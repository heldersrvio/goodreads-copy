{"version":3,"sources":["reducers/reducer.js","Firebase.js","components/Authentication/HomePageTopBar.js","components/Authentication/HomePageTopSection.js","components/Authentication/HomePageBottomSection.js","components/Authentication/HomePageFootBar.js","components/Authentication/HomePage.js","components/Global/TopBarSearchBar.js","components/Global/TopBar.js","components/Dashboard/Dashboard.js","App.js","components/Authentication/SignInPage.js","components/Authentication/SignUpPage.js","components/Authentication/SignOutPage.js","components/Books/BookPage.js","components/Authentication/ForgotPasswordPage.js","components/Books/LinearChart.js","components/Books/ColumnChart.js","components/Books/AreaChart.js","components/Books/BarChart.js","components/Books/BookStatsForEditionPage.js","components/Books/BookAllStatsPage.js","components/Books/SimilarBooksPage.js","components/Books/BookEditionsPage.js","components/Books/BookCoverPage.js","components/Books/BookPhotoPage.js","components/Books/AddNewBookPage.js","components/Books/BookTopShelvesPage.js","components/Books/BookGenreShelfPage.js","components/Books/BookTriviaPage.js","components/Books/BookQuotesPage.js","components/Books/BookListsPage.js","components/Authors/AuthorPage.js","components/Authors/FavoriteAuthorsPage.js","components/Authors/FavoriteAuthorsForUserPage.js","components/Dashboard/NotificationsPage.js","components/Dashboard/ProfileSettings.js","components/Dashboard/Settings.js","components/Dashboard/FeedUpdateSettings.js","components/Dashboard/AccountSettingsPage.js","components/Dashboard/ChangePasswordPage.js","components/Dashboard/DeleteAccountPage.js","components/Dashboard/EditFavoriteGenresPage.js","components/Dashboard/GenrePage.js","components/News/NewsPage.js","components/News/ArticlePage.js","components/News/ArticleLikedByPage.js","components/User/RatingsChart.js","components/User/UserPage.js","components/User/UserCompareBooksPage.js","components/User/BookCompatibilityTestPage.js","components/User/InteractiveStarRating.js","components/User/WantToReadButton.js","components/User/EditCompatibilityTestAnswersPage.js","components/User/UserAddAsFriendPage.js","components/User/AddToShelvesPopup.js","components/User/UserReviewSection.js","components/Global/TopAlertMessage.js","components/User/EditableBookshelfDateField.js","components/User/UserBookshelfPage.js","components/User/UserPhotoPage.js","components/User/UserYearInBooksPage.js","components/Recommendations/RecommendationsFromUsersPage.js","components/Recommendations/RecommendationsFromYouPage.js","components/Friends/FollowersPage.js","components/Friends/PeopleFollowingPage.js","components/Friends/FriendsPage.js","components/Explore/ExplorePage.js","components/Explore/SearchPage.js","components/Error/ErrorPage.js","ErrorBoundary.js","index.js"],"names":["reducer","signOut","type","userReducer","state","action","localStorage","setItem","JSON","stringify","data","userUID","userInfo","login","undefined","Firebase","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","database","firestore","pageGenerator","generateSignInPage","generateSignOutPage","generateSignUpPage","generateForgotPasswordPage","generateExplorePage","generateSearchPage","q","searchType","searchField","generateBookPage","bookId","title","replace","generateAddBookPage","generateBookCoverPage","generateBookPhotoPage","photoId","generateBookEditionsPage","originalBookId","originalBookTitle","generateBookListsPage","generateSeriesPage","seriesId","name","toLowerCase","generateAuthorPage","authorId","generateListopiaPage","generateCreateListPage","generateListsCreatedByUserPage","userId","firstName","generateListsVotedByUserPage","generateListsLikedByUserPage","generateListPage","listId","generateUserPage","generateUserPhotoPage","generateUserBooksPage","generateUserRatingsPage","generateUserReviewsPage","generateUserShelfPage","shelves","searchTerm","view","perPageValue","page","viewValue","shelvesValue","length","join","generateReviewPage","reviewId","generateReviewLikesPage","generateBookGenreShelfPage","genre","generateBookTopShelvesPage","generateBookStatsPage","generateBookStatsPageForEdition","generateSimilarBooksPage","generateGenrePage","generateBooksByAuthorPage","generateArticlePage","articleId","generateBookTriviaPage","generateQuizzesPage","generateQuizPage","quizId","generateCreateQuizPage","generateQuotesPage","generateBookQuotesPage","generateQuotePage","quoteId","text","slice","generateAddQuotePage","generateQuotesTagPage","tag","generateQuotesSearchPage","queryTerm","generateWriteReviewPageForBook","generateUserCompareBooksPage","generateFavoriteAuthorsPage","generateUserFavoriteAuthorsPage","generateUserYearInBooksPage","year","generateUserFriendsPage","generateInviteFriendsPage","generateAccountSettingsPage","generateChangePasswordPage","generateDeleteAccountPage","generateEditFavoriteGenresPage","generateNewsPage","generateAllStoriesNewsPage","generateArticlesNewsPage","generateInterviewsNewsPage","generateArticleLikesPage","generateAddAsFriendPage","generateRecommendationsPage","isReceiver","generateGiveRecommendationPage","generateGiveRecommendationToUserPage","generateBookCompatibilityTestPage","generateBookEditCompatibilityTestAnswersPage","getSeriesDetailsForBook","rootBook","bookTitle","a","collection","doc","get","rootBookQuery","seriesInfo","series","seriesInstance","seriesQuery","id","where","booksInSeriesQuery","otherBooksIds","docs","map","document","otherBooksCovers","cover","getMainAuthorDetailsForBook","mainAuthorQuery","authorDetails","mainAuthorId","authorNames","authorPages","push","authorIsMember","GRMember","authorFollowerCount","followersIds","userIsFollowingAuthor","includes","booksByAuthorPage","about","mainAuthorAbout","picture","mainAuthorPicture","getOtherAuthorsDetailsForBook","otherAuthors","authorFunctions","Promise","all","author","otherAuthorsQuery","otherAuthorsQueryData","i","role","getUserDetailsForBook","userDetails","bookInstanceQuery","bookInstanceQueryResults","userStatus","status","progress","userProgress","rating","userRating","position","toReadBookPosition","allBookInstancesQuery","thisEditionRatings","thisEditionRating","thisEditionAddedBy","fiveRatings","fourRatings","threeRatings","twoRatings","oneRatings","addedBy","toReads","bookQuery","allEditionsQuery","otherEditionsIds","filter","otherEditionsTitles","otherEditionsISBNs","ISBN","otherEditionsCovers","otherEditionsPages","otherEditionsAddedBy","_document","allEditionsQueryBooks","forEach","indexOf","getReviewDetailsForBook","reviewQuery","bookReviews","bookEdition","reviewDetails","review","user","userBooksInstancesQuery","userQuery","userName","lastName","profileImage","date","toDate","edition","editionLink","numberOfLikes","usersWhoLiked","likedByUser","recommendsItFor","reviews","getMiscDetailsForBook","bookDocumentData","miscDetails","preSynopsis","synopsis","amazonLink","publisher","pageCount","publishedDate","editionPublishedDate","language","getFirstEditionInfoForBook","firstEditionInfo","orderBy","limit","firstEditionQuery","firstEditionPublishedYear","getFullYear","originalId","originalTitle","getListsForBook","listsQuery","list","bookIds","books","voterCount","userVotes","bookTitles","bookCovers","lists","getGenresForBook","shelfQuery","genreDictionary","genreQuery","genres","Object","keys","key","index","userCount","getPublishedBooksByAuthor","rootBooksByAuthorQuery","getAlsoEnjoyedBooksForBook","alsoEnjoyed","book","getAlsoEnjoyedBooksDetails","isMainBook","mainEditionId","mainEditionQuery","bookObj","authorQuery","authorName","assign","getAlsoEnjoyedBooksDetailsForBook","alsoEnjoyedObject","mainBook","alsoEnjoyedBooks","detailsObject","getQuizQuestionsForBook","questions","question","questionObject","quizTitle","quizDescription","description","quizPage","mainQuestion","options","answers","getArticlesForBook","articleQuery","image","content","likeCount","commentCount","comments","getQuotesPageForBook","quotesPage","getQuotesForBook","quoteQuery","queryBookById","bookQueryDocument","seriesDetails","mainAuthorDetails","publishedBooksByAuthor","articles","quizQuestions","quotes","console","log","queryAllBooksForSearchBar","getEditionDetailsForBook","booksQuery","editionObject","isMainEdition","mainEdition","userDetailsForEdition","queryBooks","searchString","allBooksQuery","queryBooksForBookCreation","link","getFriendsInfo","history","friendsQuery","friends","friend","pathname","error","message","queryBookRecommendedToFriendsStatus","friendIds","recommendationQuery","queryStatusUpdatesForRootBook","allbooksQuery","allbooksIds","updatesQuery","queryStatusUpdatesForBook","auth","resetPassword","email","sendPasswordResetEmail","passwordSignIn","password","rememberMe","signInWithEmailAndPassword","facebookSignIn","provider","FacebookAuthProvider","signInWithPopup","result","uid","displayName","split","photoURL","exists","set","membershipDate","Timestamp","fromDate","Date","favoriteAuthors","newFriendsRequests","aboutMe","addAFriend","addANewStatusToBook","addAQuote","addBookToShelves","ageAndBirthdayPrivacy","city","country","customGender","dateOfBirth","emailAddressVisibleTo","favoriteGenres","followAnAuthor","followers","friendChallengeAnswer","friendChallengeQuestion","gender","interests","locationViewableBy","middleName","notifications","pronouns","Math","round","random","recommendABook","showGenderTo","showLastNameTo","stateProvinceCode","typeOfBooks","updateContent","updatesPeople","voteForABookReview","website","whoCanViewMyProfile","zipCode","code","twitterSignIn","TwitterAuthProvider","googleSignIn","GoogleAuthProvider","queryBookInstanceDetails","bookInstanceData","wantToReadBooks","readingBooks","bookQueryData","authorQueryData","authorPage","authorHasBadge","signUp","Error","createUserWithEmailAndPassword","queryUserInfo","newUserInfo","userQueryData","bookInstancesQuery","bookInstancesQueryData","numberOfReadBooks","instance","userBooks","modifyUserInfo","addBookToShelf","userInstanceQuery","changeBookPosition","lowestPositionQuery","merge","add","shelf","removeBookFromShelf","delete","rateBook","update","FieldValue","updateBookInShelf","newPosition","oldPosition","higherPositionQuery","lowerPositionQuery","addNewUserShelf","rootBooks","addBookToUserShelf","editionIds","concat","removeBookFromUserShelf","correspondingShelves","shelfDoc","rB","likeUnlikeReview","reviewRef","followUnfollowAuthor","authorRef","followerIds","recommendBook","sender","receiver","newRec","switchBookEditionForUser","oldEdition","newEdition","getBookPhotos","photoQuery","photos","url","getPhotoDetails","usersWhoViewed","getSynopsisAndPreSynopsisForBook","createNewBook","authorRoles","isbn","publishedYear","publishedMonth","publishedDay","numberOfPages","format","editionLanguage","originalPublicationYear","originalPublicationMonth","originalPublicationDay","coverImage","newBookObject","seriesMatches","match","seriesName","splice","parseInt","NaN","properName","n","toUpperCase","newAuthorRef","properAuthorName","newMainAuthorRef","newRootBookRef","Number","isNaN","properSeriesName","newSeriesRef","originalPublicationDate","originalBookQuery","timestamp","originalBookCandidates","newBookRef","addedNewBook","getBookInfoForTopShelvesPage","getBookInfoForGenreShelfPage","numberOfFriends","numberOfBooks","numberOfBooksOnShelf","users","allOccurrencesOfRootBooksOnShelf","reduce","previous","current","numberOfOccurrencesOfRootBooks","rootBooksSortedByPopularity","sort","b","min","bookQueryForRootBook","popularBooksOnShelf","getBookInfoForTriviaPage","quizQuery","quiz","quizName","creatorId","creator","quizCreatorQuery","creatorFirstName","questionRootBook","numberOfUsersWhoTookQuiz","usersWhoTook","numberOfQuestions","likeQuote","getBookInfoForQuotesPage","ratingsQuery","numberOfRatings","ratings","averageRating","lengh","editionsQuery","editions","reviewsQuery","numberOfReviews","thisUserInstanceQuery","tags","getBookInfoForListsPage","bookPosition","addRemoveAuthorToFavorites","getAuthorBestBook","allBooksByAuthor","userInstanceQueryForBook","totalInstances","getAuthorInfoForAuthorPage","placeOfBirth","influences","twitter","memberSince","profilePicture","authorInstanceQuery","userInstanceRatingQuery","followerId","authorFollowerRankingQuery","mostFollowedPosition","score","reviewerRankingQuery","reviewerPosition","obj","usersWhoHaveAsFavorite","numberOfToReadBooks","numberOfReadingBooks","numberOfFavoriteBooks","favorite","friendId","friendUserQuery","rootBookDoc","booksByAuthor","ratingCount","seriesByAuthor","relatedNews","article","numberOfComments","quote","favoriteAuthorQuery","bestBookId","bestBookTitle","changeFavoriteAuthors","newArray","fetchUserFavoriteAuthors","rootBooksByAuthor","editionsByAuthor","numberOfShelvedBooks","numberOfMemberReviews","numberOfFollowers","getUserInfoForFavoriteAuthorsForUserPage","authors","getNotificationsForUser","notification","anchorSrc","nonAnchorContent","time","saveUserSettings","settings","deleteProfilePicture","getUserSettings","tidyUpUserSettingForProps","setting","profile","account","emailVerifiedDate","passwordLength","feed","checkIfPasswordsMatch","changePassword","newPassword","deleteAccount","getFavoriteGenresForUser","updateFavoriteGenresForUser","newGenres","getGenreInfo","userFavoriteGenres","relatedGenres","parentGenre","allRootBooksOfGenre","allBookDocsOfGenre","apply","newReleases","release","userUpdatesQuery","entries","differenceInDays","bookDoc","bookValuePair","mostReadThisWeek","_b","numberOfVoters","genreBooks","_d","featuredBooks","some","datePublished","authorPicture","quotesTagged","getNews","newsQuery","featured","isFeatured","likeUnlikeArticle","getInfoForArticle","likes","getArticleTitle","getUsersWhoLikedArticle","getUserInfoForUserPage","loggedInUserUID","userReviewQuery","request","updateDoc","bookshelvesQuery","loggedInUserQuery","mainAuthorName","mainAuthorIsMember","bookshelves","updateDate","userToReadPosition","_doc","otherUserId","newFriendId","otherUserQuery","bestBookQuery","bestBookRootBookQuery","isMember","bestBookSeries","bestBookSeriesInstance","numberOfReviewVoters","reviewText","quoteContent","authorInfo","bookInfo","quoteBookDoc","authorProfilePicture","vote","whoCanViewUserProfile","isFollowedByUser","isUserFriend","hasPendingFriendResquestFromUser","birthday","lastActiveDate","joinedDate","favoriteBooks","toReadBooks","currentlyReadingBooks","recentUpdates","following","votedLists","followUser","userToFollowUID","userToFollowQuery","unfollowUser","follower","unfriendUser","friendQuery","deleteUpdate","updateId","getInfoForCompareBooksPage","otherUserUID","getUserInfoForCompareBooksPage","bookInstanceDoc","bookEditionIds","allUserInstancesOfBook","allUserInstancesOfBookWithRating","shelvesQuery","rootId","popularityScore","otherUserFirstName","otherUserLastName","otherUserPronouns","loggedInUserBooks","otherUserBooks","getBooksInfoForBookCompatibilityTestPage","popularBooksRootIds","classicsBooksRootIds","popularFictionBooksRootIds","thrillersBooksRootIds","nonFictionBooksRootIds","fantasyBooksRootIds","romanceBooksRootIds","scienceFictionBooksRootIds","womensFictionBooksRootIds","getBooksInfoForCategory","rootIds","popularBooks","classicsBooks","popularFictionBooks","thrillersBooks","nonFictionBooks","fantasyBooks","romanceBooks","scienceFictionBooks","womensFictionBooks","getUsersInfoForCompatibilityTestPage","getUserBooksInCategory","rootIdsArray","allUserBookDocs","loggedInUserAllBooks","otherUserAllBooks","loggedInUser","otherUser","sendFriendRequest","senderId","receiverId","receiverQuery","getUserInfoForAddAsFriendPage","newFriendQuery","addNewBookshelf","shelfName","queryUserInfoForUserBookshelfPage","allUserBooksInstances","allUserRootBooks","wantToReadUserRootBooks","readingUserRootBooks","readUserRootBooks","getShelfBookInfo","allEditionIds","userInstancesQuery","editionQuery","allRatedBookInstances","averageBookRating","userBookUpdates","dateRead","loggedInUserInstanceQuery","dateAdded","datePublishedEdtion","dateStarted","loggedInUserRating","queryLoggedInUserInfoForUserBookshelfPage","getUserInfoForYearInBooksPage","startOfYear","endOfYear","loggedInUserYearBooks","shelvedQuery","numberShelved","getUserProfilePicture","getRecommendationsToFromUser","recommendationsQuery","deleteRecommendation","recommendationId","getInfoForFollowPage","loggedInUserId","scope","location","currentlyReadingBook","isFriend","getInfoForExplorePage","getBookInfo","getSimilarBooks","similarBooks","enjoyedBooks","enjoyedBookId","readingBookId","allUserUpdates","trendingBooks","count","enjoyedBook","readingBook","getInfoForSearchPage","query","allGenres","rootBookId","allBooks","filteredBooks","userBookQuery","numberOfEditions","genreShelves","allPeople","filteredPeople","person","HomePageTopBar","useState","setEmail","setPassword","setRememberMe","useHistory","href","src","alt","value","onChange","e","target","placeholder","htmlFor","onClick","preventDefault","HomePageTopSection","setName","HomePageBottomSection","props","setSearchTerm","className","recExample1","bookList","bookLinkList","bookCoverList","recBookLink","recBookCover","recBook","recExample2","HomePageFootBar","HomePage","source","popularLists","bookQuantity","voterQuantity","topBookNames","topBookCovers","topBookLinks","TopBarSearchBar","searchBarInput","setSearchBarInput","resultsSection","setResultsSection","loading","setLoading","useEffect","generateResults","queryResults","results","assignResultsToDisplay","inputIcon","TopBar","browseClicked","setBrowseClicked","profileClicked","setProfileClicked","notificationsClicked","setNotificationsClicked","setNotifications","newNotifications","setNewNotifications","newFriends","setNewFriends","browseRef","useRef","profileRef","notificationsRef","parse","getItem","checkForNewNotifications","checkForNewFriends","addEventListener","event","contains","getNotifications","loadingSpinner","rightSection","ref","formatDistance","addSuffix","browseDropDownGenresList","browseDropDown","Dashboard","App","dispatch","useDispatch","useSelector","trackPromise","onAuthStateChanged","newUser","FirstPage","isLoggedIn","SignInPage","useLocation","errorMessage","SignUpPage","SignOutPage","BookPage","bookPageId","params","authorAboutP","synopsisP","enlargeCoverWindow","enlargeCoverButton","recommendWindow","recommendItButton","synopsisHeight","setSynopsisHeight","authorAboutHeight","setAuthorAboutHeight","setBookInfo","loaded","setLoaded","savingShelf","setSavingShelf","quizQuestionOptionSelected","setQuizQuestionOptionSelected","synopsisShowMore","setSynopsisShowMore","showMoreBookInfoDetails","setShowMoreBookInfoDetails","readersEnjoyedListTranslation","setReadersEnjoyedListTranslation","authorAboutShowMore","setAuthorAboutShowMore","isShelfPopupHidden","setIsShelfPopupHidden","isShelfPopupBottomHidden","setIsShelfPopupBottomHidden","isAddShelfInputSectionHidden","setIsAddShelfInputSectionHidden","addShelfInput","setAddShelfInput","shelfPopupReadingInput","setShelfPopupReadingInput","shelfPopupToReadInput","setShelfPopupToReadInput","exhibitedStarRating","setExhibitedStarRating","reviewSearchInput","setReviewSearchInput","reviewsShowingMore","setReviewsShowingMore","reviewsHaveButton","setReviewsHaveButton","showFiltersDialogBox","setShowFiltersDialogBox","showSortOrderDialogBox","setShowSortOrderDialogBox","reviewStars","setReviewStars","showAllEditionsForReviews","setShowAllEditionsForReviews","sortOrder","setSortOrder","searchReviewFilter","setSearchReviewFilter","loadingFollowAuthor","setLoadingFollowAuthor","showEnlargeCoverWindow","setShowEnlargeCoverWindow","showRecommendWindow","setShowRecommendWindow","recommendWindowSearchBox","setRecommendWindowSearchBox","loadingFriends","setLoadingFriends","friendsInfo","setFriendsInfo","recommendWindowAddingMessages","setRecommendWindowAddingMessages","recommendWindowMessages","setRecommendWindowMessages","recommendWindowSentStatuses","setRecommendWindowSentStatuses","topRatingDetailsPopupHidden","setTopRatingDetailsPopupHidden","bottomRatingDetailsPopupHidden","setBottomRatingDetailsPopupHidden","queryFriends","newFriendsInfo","_friend","recommendedToFriendsStatus","useLayoutEffect","scrollHeight","getElementsByClassName","haveButtons","Array","from","generalRating","toFixed","mostFrequentRating","max","removeBookSafely","window","confirm","changeBookShelf","updateProgress","pages","addToShelfButton","_e","bookOptionsDropdown","bookPageInfoLeft","onMouseOver","onMouseLeave","bookPageTitleArea","generateBookPageRatingsArea","isTop","clientX","clientY","width","height","y","fill","style","bookPageSynopsisArea","bookPageGetACopy","bookPageBookInfoDetailsExpanded","bookPageBookInfoDetails","getYear","bookPageInfoRight","bookPageBookInfo","bookPageListsWithBook","_bookId","startYourReviewSection","reviewList","first","second","item","r","bookPageCommunityReviews","getBoundingClientRect","left","bottom","right","disabled","onKeyDown","keyCode","UID","charAt","bookPageMainContentLeft","bookPageMainContentRightTop","bookPageReadersAlsoEnjoyedSection","transform","previousValue","forwardButton","classList","remove","mainListWidth","offsetWidth","mainListContentsWidth","scrollWidth","bookPageGenres","bookPageAuthorAboutSection","innerHTML","onMouseOut","bookPageBooksByAuthorSection","bookPageArticlesFeaturingBook","bookPageQuizQuestionIndex","floor","bookPageQuizQuestion","option","checked","bookPageQuotes","bookPageMainContentRight","bookPageMainContent","bookPageEnlargingCover","bookPageRecommendToFriends","friendInfo","newValue","ForgotPasswordPage","LinearChart","statusUpdates","setStatusUpdates","clickCircle","setClickCircle","hoverCircle","setHoverCircle","toolTip","setToolTip","hoveringAddedPath","setHoveringAddedPath","hoveringRatingsPath","setHoveringRatingsPath","hoveringReviewsPath","setHoveringReviewsPath","hoveringToReadPath","setHoveringToReadPath","tableVisible","setTableVisible","allEditions","statusUpdateObjs","getStatusInfo","interval","start","subDays","end","addedUpdatesNumbers","eachDayOfInterval","isSameDay","ratingsUpdatesNumbers","reviewsUpdatesNumbers","toReadUpdatesNumbers","maximumDailyUpdates","chartUnit","addedPathDefinitionCoordinates","updatesNumber","ratingsPathDefinitionCoordinates","reviewsPathDefinitionCoordinates","toReadPathDefinitionCoordinates","addedPathDefinition","currentIndex","ratingsPathDefinition","reviewsPathDefinition","toReadPathDefinition","svg","point","querySelector","createSVGPoint","x","matrixTransform","getScreenCTM","inverse","matchingAddedPathCoordinates","coordinates","abs","matchingRatingsPathCoordinates","matchingReviewsPathCoordinates","matchingToReadPathCoordinates","getAttribute","color","valueForDate","newHoverCircle","cx","cy","stroke","strokeWidth","strokeOpacity","fillOpacity","newToolTip","d","textAnchor","fontFamily","fontSize","fontWeight","newClickCircle","in","stdDeviation","dx","dy","slope","clipPath","table","colSpan","bottomSection","ColumnChart","hoveredAddedColumns","setHoveredAddedColumns","hoveredRatingsColumns","setHoveredRatingsColumns","hoveredReviewsColumns","setHoveredReviewsColumns","hoveredToReadColumns","setHoveredToReadColumns","_value","quantity","AreaChart","fill-opacity","BarChart","hoveredAddedBars","setHoveredAddedBars","hoveredRatingsBars","setHoveredRatingsBars","hoveredReviewsBars","setHoveredReviewsBars","hoveredToReadBars","setHoveredToReadBars","offsetValue","BookStatsForEditionPage","chartType","setChartType","pageSelectionArea","editionDescriptionArea","chartArea","leftSection","editionPage","BookAllStatsPage","SimilarBooksPage","similarBooksPageId","savingShelves","setSavingShelves","synopsisHaveButton","setSynopsisHaveButton","synopsisShowingMore","setSynopsisShowingMore","areAddShelfInputSectionsHidden","setAreAddShelfInputSectionsHidden","addShelfInputs","setAddShelfInputs","exhibitedStarRatings","setExhibitedStarRatings","_book","p","previousObject","pageIndicator","generateBookCard","bookObject","generateAddToShelfButton","generateBookOptionsDropdown","mainContent","BookEditionsPage","bookEditionsPageId","editionsInfo","setEditionsInfo","detailsExpanding","setDetailsExpanding","defaultExpanding","setDefaultExpanding","editionsPerPage","setEditionsPerPage","setPage","formatFilter","setFormatFilter","areShelfPopupsHidden","setAreShelfPopupsHidden","areShelfPopupsBottomHidden","setAreShelfPopupsBottomHidden","shelfPopupReadingInputs","setShelfPopupReadingInputs","shelfPopupToReadInputs","setShelfPopupToReadInputs","editionOnUserShelf","setEditionOnUserShelf","editionsObj","_edition","getEditionsInfo","generateEditionCard","generateRateBookSection","sortedEditionCards","editionCardList","_editionCard","ceil","_x","number","editionsPerPageSelectionArea","pageTitle","pageInfoAndFiltersTop","pageInfoAndFiltersBottom","pageInfoAndFilters","BookCoverPage","bookCoverPageId","bookPhotos","setBookPhotos","bookPhotosObj","photo","BookPhotoPage","bookPhotoPageId","URLSearchParams","search","photoInfo","setPhotoInfo","photoObj","loadInfo","AddNewBookPage","fileInput","setDescription","titleInput","setTitleInput","mainAuthorNameInput","setMainAuthorNameInput","mainAuthorRoleInput","setMainAuthorRoleInput","otherAuthorNameInputs","setOtherAuthorNameInputs","otherAuthorRoleInputs","setOtherAuthorRoleInputs","isbnInput","setIsbnInput","publisherInput","setPublisherInput","publishedYearInput","setPublishedYearInput","publishedMonthInput","setPublishedMonthInput","publishedDayInput","setPublishedDayInput","numberOfPagesInput","setNumberOfPagesInput","formatIsOther","setFormatIsOther","formatInput","setFormatInput","amazonLinkInput","setAmazonLinkInput","editionLanguageInput","setEditionLanguageInput","originalTitleInput","setOriginalTitleInput","originalPublishedYearInput","setOriginalPublishedYearInput","originalPublishedMonthInput","setOriginalPublishedMonthInput","originalPublishedDayInput","setOriginalPublishedDayInput","isTitlePopupHidden","setIsTitlePopupHidden","isMainAuthorPopupHidden","setIsMainAuthorPopupHidden","isMainAuthorRolePopupHidden","setIsMainAuthorRolePopupHidden","isOtherAuthorsPopupHidden","setIsOtherAuthorsPopupHidden","isOtherAuthorsRolesPopupHidden","setIsOtherAuthorsRolesPopupHidden","isPublishedYearPopupHidden","setIsPublishedYearPopupHidden","isFormatPopupHidden","setIsFormatPopupHidden","isAmazonLinkPopupHidden","setIsAmazonLinkPopupHidden","isDescriptionPopupHidden","setIsDescriptionPopupHidden","isLanguagePopupHidden","setIsLanguagePopupHidden","isOriginalTitlePopupHidden","setIsOriginalTitlePopupHidden","isOriginalPublicationYearPopupHidden","setIsOriginalPublicationYearPopupHidden","isRecaptchaCompleted","setIsRecaptchaCompleted","errorType","setErrorType","errors","setErrors","isShowingTitleMessage","setIsShowingTitleMessage","bookSuggestions","setBookSuggestions","synopsisAndPreSynopsisObj","getBookMiscInfo","topWarningMessage","topErrorMessage","errorList","addNewBookPageTitle","addNewBookPageNote","titlePopup","mainAuthorPopup","generateRolePopup","publishedYearPopup","formatPopup","amazonLinkPopup","descriptionPopup","languagePopup","originalTitlePopup","originalPublicationYearPopup","bookForm","required","onFocus","onBlur","suggestion","generateOtherAuthorsPopup","toString","rows","workSettingsForm","sitekey","process","currentErrors","_role","files","URL","createObjectURL","BookTopShelvesPage","getInfo","pageHeader","showingShelfNumbers","pageNavigationSection","genreList","_genre","BookGenreShelfPage","bookGenreShelfPageId","BookTriviaPage","bookTriviaPageId","bookPageAnchor","quizzesSection","_question","BookQuotesPage","bookQuotesPageId","string","userLikedQuotes","setUserLikedQuotes","searchInput","setSearchInput","bookCard","showingNumbersSpan","quoteList","_quote","mainContentLeftSection","mainContentRightSection","BookListsPage","authorshipSection","listsList","_list","AuthorPage","authorPageId","followAuthorDropdown","followAuthorDropdownTrigger","authorFirstName","setAuthorInfo","nowAuthorInFavorites","setNowAuthorInFavorites","nowAuthorNotInFavorites","setNowAuthorNotInFavorites","followAuthorDropdownVisible","setFollowAuthorDropdownVisible","isShowingAuthorRatingStats","setIsShowingAuthorRatingStats","authorDescriptionShowMore","setAuthorDescriptionShowMore","authorObject","getAuthorInfo","authorBooksAverageRating","authorBooksTotalRatings","authorBooksNumberOfReviews","followButtonAndDropdown","photoAndStatsArea","yearInBooksSection","followersSection","bookshelvesSection","friendsSection","authorNowInFavoritesMessage","authorMainInfoSection","influence","authorBooksSection","authorSeriesSection","_series","relatedNewsSection","_article","quotesSection","favoriteAuthorsSection","FavoriteAuthorsPage","setAuthors","orderInputs","setOrderInputs","isSaving","setIsSaving","showingErrorMessage","setShowingErrorMessage","authorArray","_author","getAuthorsInfo","saveFavoriteAuthorList","noAuthorsYetMessage","reorderInstructionMessage","generateAuthorCard","draggable","onDragStart","dataTransfer","setData","onDragOver","onDrop","newIndex","getData","removeAuthor","favoriteAuthorsList","input","_input","FavoriteAuthorsForUserPage","setUserInfo","getUserInfo","noAuthorsYetSpan","authorList","rootBookCount","NotificationsPage","loadNotifications","notificationList","ProfileSettings","profilePictureFileInput","firstNameInput","setFirstNameInput","middleNameInput","setMiddleNameInput","lastNameInput","setLastNameInput","showLastNameToInput","setShowLastNameToInput","genderInput","setGenderInput","customGenderInput","setCustomGenderInput","pronounsInput","setPronounsInput","showGenderToInput","setShowGenderToInput","zipCodeInput","setZipCodeInput","cityInput","setCityInput","stateProvinceCodeInput","setStateProvidenceCodeInput","countryInput","setCountryInput","locationViewableByInput","setLocationViewableByInput","dateOfBirthInput","setDateOfBirthInput","ageAndBirthdayPrivacyInput","setAgeAndBirthdayPrivacyInput","websiteInput","setWebsiteInput","interestsInput","setInterestsInput","typeOfBooksInput","setTypeOfBooksInput","aboutMeInput","setAboutMeInput","monthList","html","getMonth","getDate","month","saveProfileSettings","saveProfilePicture","Settings","emailInput","setEmailInput","whoCanViewMyProfileInput","setWhoCanViewMyProfileInput","emailAddressVisibleToInput","setEmailAddressVisibleToInput","friendChallengeQuestionInput","setFriendChallengeQuestionInput","hasChallengeAnswer","setHasChallengeAnswer","friendChallengeAnswerInput","setFriendChallengeAnswerInput","moveToProfileTab","saveAccountSettings","FeedUpdateSettings","addBookToShelvesInput","setAddBookToShelvesInput","addAFriendInput","setAddAFriendInput","voteForABookReviewInput","setVoteForABookReviewInput","addAQuoteInput","setAddAQuoteInput","recommendABookInput","setRecommendABookInput","addANewStatusToBookInput","setAddANewStatusToBookInput","followAnAuthorInput","setFollowAnAuthorInput","saveFeedSettings","AccountSettingsPage","tab","setTab","topMessage","setTopMessage","topMessageType","setTopMessageType","saveProfileOrFeedSettings","character","file","objectURL","topMessageDiv","mainContentTopSection","tabNavigationSection","mainForm","ChangePassswordPage","currentPasswordInput","setCurrentPasswordInput","newPasswordInput","setNewPasswordInput","confirmPasswordInput","setConfirmPasswordInput","DeleteAccountPage","EditFavoriteGenresPage","setFavoriteGenres","setAllGenres","isShowingCustomGenresOption","setIsShowingCustomGenresOption","customGenreInput","setCustomGenreInput","standardGenreList","userFavorites","getFavoriteGenres","explanationBox","genreSelectionArea","g","stopPropagation","readOnly","s","GenrePage","genreInfo","setGenreInfo","descriptionShowingMore","setDescriptionShowingMore","capitalizeAndSeparate","addGenreToFavorites","removeGenreFromFavorites","descriptionSection","newReleasesSection","mostReadThisWeekSection","listsSection","coverIndex","genreBooksSection","relatedGenresSection","relatedGenre","NewsPage","contentType","news","setNews","getNewsInfo","featuredArticle","browsingTypeContentArea","newsListSection","ArticlePage","articlePageId","articleTitle","articleInfo","setArticleInfo","savingLike","setSavingLike","getArticleInfo","topLikesArea","articleContentSection","paragraph","bottomLikesArea","ArticleLikedByPage","setTitle","setUsers","getUsersAndTitle","userList","_u","RatingsChart","closeChart","UserPage","userPageId","pageLocation","moreDropdown","moreDropdownTrigger","savingFollow","setSavingFollow","showingMoreDropdown","setShowingMoreDropdown","unfollowModalVisible","setUnfollowModalVisible","userRatingsChartVisible","setUserRatingsChartVisible","updatesBeingDeleted","setUpdatesBeingDeleted","addedFriend","userInfoObject","numberOfInteractiveBookCards","isLoggedInUser","showProfile","showLastName","showGender","showLocation","showAge","showBirthday","userAge","differenceInYears","recentUpdate","topMessageSection","introduction","checkmark","createElement","span","outerSpan","appendChild","hasPendingFriendRequestFromUser","userToReadShelfSection","userBookshelvesSection","userCurrentlyReadingSection","userRecentUpdatesSection","userIsFollowing","u","userQuotesSection","_q","userYearInBooksSection","userFriendsSection","_f","userFollowingSection","followingUser","userFavoriteAuthorsSection","_a","userListopiaSection","_l","userFavoriteGenresSection","mainContentRightSectionBottomLinks","unfollowUserModal","privateProfileSection","UserCompareBooksPage","sortFilter","userShelf","friendShelf","userBooksInfo","setUserBooksInfo","sortExplanationPopupHidden","setSortExplanationPopupHidden","otherUserUnratedBooksIndex","setOtherUserUnratedBooksIndex","unratedBookRating","setUnratedBookRating","reviewShowMore","setReviewShowMore","userBooksObject","getUserBooksInfo","otherUserUnratedBooks","loggedInUserBookshelves","bookshelf","otherUserBookshelves","commonShelves","otherUserFilteredBooks","loggedInUserFilteredBooks","otherUserNumberOfBooks","otherUserNumberOfUniqueBooks","loggedInUserBook","numberOfBooksInCommon","loggedInUserNumberOfBooks","loggedInUserNumberOfUniqueBooks","percentageOfLoggedInUserBooksInCommon","percentageOfOtherUserBooksInCommon","allBooksInCommon","ratedBooksInCommon","loggedInBookObject","otherUserBookObject","similarityOfTastesIndex","otherUserBook","unratedBooksFromOtherUser","comparisonChartSection","booksInCommonTable","otherUserBookObjectA","otherUserBookObjectB","rateOtherBooksArea","BookCompatibilityTestPage","pageId","userFirstName","usersInfo","setUsersInfo","booksInfo","setBooksInfo","friendSelectInput","setFriendSelectInput","popularBooksIds","useMemo","classicsBooksIds","popularFictionBooksIds","thrillersBooksIds","nonFictionBooksIds","fantasyBooksIds","romanceBooksIds","scienceFictionBooksIds","womensFictionBooksIds","noPictureImageUrl","calculateMatchForCategory","generalCategoryIdArray","user1BookArray","user2BookArray","matchesArray","generalMatch","generalCompatibilitySection","categoryCompatibilitySection","matchValue","generateSpecificCategoryCompatibilitySection","categoryName","bookIdsArray","booksInfoObject","loggedInUserInfoObject","otherUserInfoObject","generateTableEntryForBook","bookObjectArray","bookRootId","popularSection","classicsSection","popularFictionSection","thrillersSection","nonFictionSection","fantasySection","romanceSection","scienceFictionSection","womensFictionSection","newFriendIndex","InteractiveStarRating","saving","setSaving","saveRating","WantToReadButton","addBook","addToShelf","removeBook","removeFromShelf","wantToRead","EditCompatibilityTestAnswersPage","ratedBooks","setRatedBooks","setWantToReadBooks","categoryTitles","getBooksInfo","moveBookToWantToReadShelf","removeBookFromWantToReadShelf","topSection","categoriesSection","generateBookRow","startingIndex","ratedBook","UserAddAsFriendPage","isShowingMessageArea","setIsShowingMessageArea","setMessage","isRequestSent","setIsRequestSent","requestSentArea","explanationSection","AddToShelvesPopup","shelvesBookBelongsTo","selectedShelves","setSelectedShelves","searchShelfInput","setSearchShelfInput","isAddShelfSectionVisible","setIsAddShelfSectionVisible","close","changeBookStatus","UserReviewSection","isExpanded","setIsExpanded","TopAlertMessage","isVisible","setIsVisible","EditableBookshelfDateField","initialDate","setYear","setMonth","day","setDay","isPopupVisible","setIsPopupVisible","isLoading","setIsLoading","save","UserBookshelfPage","openAddShelvesPopup","order","perPage","searchQuery","loggedInUserShelves","setLoggedInUserShelves","searchInputText","setSearchInputText","isSettingsTabOpen","setIsSettingsTabOpen","isAuthorColumnVisible","setIsAuthorColumnVisible","isAvgRatingColumnVisible","setIsAvgRatingColumnVisible","isCoverColumnVisible","setIsCoverColumnVisible","isDateAddedColumnVisible","setIsDateAddedColumnVisible","isDatePublicationColumnVisible","setIsDatePublicationColumnVisible","isDatePublicationEditionColumnVisible","setIsDatePublicationEditionColumnVisible","isDateReadColumnVisible","setIsDateReadColumnVisible","isDateStartedColumnVisible","setIsDateStartedColumnVisible","isFormatColumnVisible","setIsFormatColumnVisible","isIsbnColumnVisible","setIsIsbnColumnVisible","isNumPagesColumnVisible","setIsNumPagesColumnVisible","isNumRatingsColumnVisible","setIsNumRatingsColumnVisible","isPositionColumnVisible","setIsPositionColumnVisible","isRatingColumnVisible","setIsRatingColumnVisible","isReviewColumnVisible","setIsReviewColumnVisible","isShelvesColumnVisible","setIsShelvesColumnVisible","isTitleColumnVisible","setIsTitleColumnVisible","isSelectingMultipleShelves","setIsSelectingMultipleShelves","selectedColumnSetButton","setSelectedColumnSetButton","tableSortColumn","setTableSortColumn","tableSortOrder","setTableSortOrder","visibleAddToShelvesPopup","setVisibleAddToShelvesPopup","isShowingLoggedInUserAddShelfArea","setIsShowingLoggedInUserAddShelfArea","loggedInUserAddShelfInput","setLoggedInUserAddShelfInput","batchEditSelectedShelf","setBatchEditSelectedShelf","isShowingBatchEdit","setIsShowingBatchEdit","booksChecked","setBooksChecked","batchEditLoadingButton","setBatchEditLoadingButton","wantToReadBooksPositionInputs","setWantToReadBooksPositionInputs","savePositionChangesVisiblePopup","setSavePositionChangesVisiblePopup","savingPositions","setSavingPositions","getUsersInfo","addShelf","go","setAllColumns","avgRating","datePublishedEdition","numPages","numRatings","currentUserShelves","booksToBeShown","shelfBook","every","alertMessage","shelvesTopBarLeftSection","portion","shelvesTopBarRightSection","shelvesTopBar","yourReadingActivitySession","addBooksSection","addShelfInputArea","addShelfArea","bookshelfNavigationSection","batchEditTab","alert","booksToBeRemovedRootIds","settingsTab","newPageValue","noMatchingItemsSpan","booksTable","compare","value1","value2","v","loggedInBook","previousShelf","tableParametersSection","mainInfoContainer","UserPhotoPage","userPhotoPageId","userObj","UserYearInBooksPage","numberYear","isCurrentYear","setBooks","userProfilePicture","setUserProfilePicture","shortestBook","longestBook","averageLength","mostPopularBook","leastPopularBook","userAverageRating","highestRatedBook","booksSortedByRating","overallStatsSection","bookStatsSection","myBooks","RecommendationsFromUsersPage","recommendations","setRecommendations","recommendationsArray","rec","loadRecommendations","ignoreRecommendation","recommendation","RecommendationsFromYouPage","FollowersPage","setFollowers","loadFollowers","_follower","PeopleFollowingPage","followings","setFollowings","loadFollowings","_following","FriendsPage","setFriends","noPictureImage","loadFriends","ExplorePage","info","setInfo","enjoyedBookSectionSequence","setEnjoyedBookSectionSequence","readingBookSectionSequence","setReadingBookSectionSequence","trendingBooksSectionSequence","setTrendingBooksSectionSequence","articlesSequence","setArticlesSequence","noCoverUrl","topNewsAndInterviewsSection","enjoyedBookSection","viewBox","fillRule","readingBookSection","trendingBooksSection","bottomNewsAndInterviewsSection","SearchPage","searchFieldInput","setSearchFieldInput","people","setPeople","setGenre","resultsPerPage","searchArea","field","navigationTabsSection","bookResultsSection","peopleResultsSection","_person","genreShelf","ErrorPage","template","ErrorBoundary","hasError","stack","errorInfo","this","setState","children","React","Component","store","createStore","Stats","LoadingIndicator","_props","usePromiseTracker","promiseInProgress","ReactDOM","render","StrictMode","path","exact","routerProps","component","getElementById"],"mappings":"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GAAD,OAAOirB,EAA4BjrB,EAAEC,OAAOH,UAEvD,2BAAOK,QAAQ,WAAf,WACA,4BACCL,MAAOorB,EACP/8C,KAAK,UACLwyB,UAAU,iBACVZ,SAAU,SAACC,GAAD,OAAOmrB,EAAgBnrB,EAAEC,OAAOH,SAE1C,4BAAQA,MAAM,IAAd,UAxYgB,CACnB,gBACA,SACA,cACA,UACA,UACA,iBACA,UACA,SACA,WACA,aACA,yBACA,YACA,UACA,QACA,YACA,UACA,aACA,UACA,UACA,aACA,WACA,UACA,UACA,SACA,QACA,UACA,SACA,UACA,yBACA,WACA,gBACA,SACA,iCACA,oBACA,WACA,eACA,UACA,WACA,WACA,aACA,iBACA,2BACA,OACA,QACA,QACA,mBACA,0BACA,WACA,UACA,QACA,eACA,aACA,qBACA,OACA,SACA,iBACA,UACA,WACA,WACA,qBACA,aACA,UACA,QACA,cACA,oBACA,UACA,UACA,WACA,8BACA,gBACA,OACA,UACA,SACA,uBACA,gBACA,mBACA,8BACA,QACA,SACA,UACA,UACA,QACA,YACA,SACA,YACA,UACA,aACA,OACA,YACA,SACA,gBACA,SACA,QACA,8BACA,WACA,YACA,UACA,UACA,QACA,YACA,6BACA,OACA,UACA,SACA,QACA,cACA,UACA,QACA,SACA,aACA,QACA,WACA,yCACA,qBACA,SACA,SACA,aACA,mCACA,SACA,UACA,UACA,UACA,yBACA,gBACA,YACA,aACA,QACA,YACA,aACA,SACA,WACA,WACA,OACA,QACA,mBACA,aACA,aACA,YACA,UACA,SACA,kCACA,uBACA,SACA,WACA,aACA,UACA,aACA,UACA,UACA,QACA,QACA,cACA,uBACA,gBACA,cACA,YACA,QACA,UACA,OACA,iBACA,2BACA,SACA,OACA,WACA,QACA,SACA,mBACA,WACA,OACA,cACA,WACA,SACA,WACA,cACA,QACA,UACA,UACA,qBACA,SACA,wBACA,cACA,mCACA,QACA,aACA,wBACA,eACA,UACA,aACA,eACA,YACA,WACA,WACA,kBACA,UACA,eACA,uCACA,cACA,QACA,YACA,aACA,0BACA,QACA,WACA,iCACA,YACA,SACA,cACA,uBACA,SACA,aACA,+BACA,WACA,OACA,UACA,QACA,sBACA,UACA,SACA,eACA,2BACA,SACA,SACA,UACA,uBACA,iBACA,uCACA,UACA,aACA,UACA,qBACA,YACA,UACA,4BACA,wBACA,4BACA,iBACA,QACA,aACA,QACA,SACA,YAwJgBzrB,KAAI,SAACgP,EAAShH,GAC1B,OACC,4BAAQD,IAAKC,EAAOyjB,MAAOzc,GACzBA,OAKL,2BAAO8c,QAAQ,oBAAf,yBACA,4BACChyB,KAAK,mBACLwyB,UAAU,0BACVb,MAAOsrB,GACPrrB,SAAU,SAACC,GAAD,OAAOqrB,GAA2BrrB,EAAEC,OAAOH,SAErD,4BAAQA,MAAM,YAAd,YACA,4BAAQA,MAAM,gBAAd,gBACA,4BAAQA,MAAM,UAAd,WAED,2BAAOK,QAAQ,iBACd,+CACA,4BACCQ,UAAU,+BACVP,QAAS,SAACJ,GACTA,EAAEK,iBACFkrB,QAAoBz/C,KAGpB,IAPF,iCAWD,yBAAK60B,UAAU,iBACd,4BACCA,UAAU,oBACVb,WACsBh0B,IAArBw/C,IAAuD,OAArBA,GAC/BA,GAAiBtwC,cACjB,GAEJ+kB,SAAU,SAACC,GACV,IAAMoQ,EAAWpQ,EAAEC,OAAOH,MAC1ByrB,IAAoB,SAACl/B,GACpB,MAAoB,KAAb+jB,OACJtkC,EACA,IAAI6W,KACJ+H,SAAS0lB,QACItkC,IAAbugB,EAAyBA,EAAS+/B,WAAa,OAClCtgD,IAAbugB,EAAyBA,EAASggC,UAAY,QAKnD,4BAAQvsB,MAAM,KACboL,MAAM,IACL0B,KAAK,GACLv4B,KAAI,SAAC8hC,EAAQ95B,GAAT,OAAmB,IAAIsG,MAAO3H,cAAgB,GAAKqB,KACvDhI,KAAI,SAACpC,EAAMoK,GACX,OACC,4BAAQyjB,MAAO7tB,EAAMmK,IAAKC,GACxBpK,OAKN,4BACC0uB,UAAU,qBACVb,WACsBh0B,IAArBw/C,GACGY,GAAUZ,GAAiBc,YAC3B,GAEJrsB,SAAU,SAACC,GACV,IAAMoQ,EAAWpQ,EAAEC,OAAOH,MAC1ByrB,IAAoB,SAACl/B,GACpB,MAAoB,KAAb+jB,OACJtkC,EACA,IAAI6W,UACS7W,IAAbugB,EAAyBA,EAASrR,cAAgB,GAClDkxC,GAAUzzC,QAAQ23B,QACLtkC,IAAbugB,EAAyBA,EAASggC,eAAYvgD,QAKnD,4BAAQg0B,MAAM,KACboL,MAAM,IACL0B,KAAK,GACLv4B,KAAI,SAAC8hC,EAAQ95B,GAAT,OAAmB6vC,GAAU7vC,MACjChI,KAAI,SAACi4C,EAAOjwC,GACZ,OACC,4BAAQyjB,MAAOwsB,EAAOlwC,IAAKC,GACzBiwC,OAKN,4BACC3rB,UAAU,mBACVb,WACsBh0B,IAArBw/C,IAAuD,OAArBA,GAC/BA,GAAiBe,UACjB,GAEJtsB,SAAU,SAACC,GACV,IAAMoQ,EAAWpQ,EAAEC,OAAOH,MAC1ByrB,IAAoB,SAACl/B,GACpB,MAAoB,KAAb+jB,OACJtkC,EACA,IAAI6W,UACS7W,IAAbugB,EAAyBA,EAASrR,cAAgB,UACrClP,IAAbugB,EAAyBA,EAAS+/B,WAAa,EAC/C1hC,SAAS0lB,SAKd,4BAAQtQ,MAAM,KACboL,MAAM,IACL0B,KAAK,GACLv4B,KAAI,SAAC8hC,EAAQ95B,GAAT,OACJ,4BAAQD,IAAKC,EAAOyjB,MAAOzjB,EAAQ,GACjCA,EAAQ,QAKd,2BAAO8jB,QAAQ,4BACb,2BAEF,4BACCL,MAAO0rB,GACPr9C,KAAK,2BACLwyB,UAAU,kCACVZ,SAAU,SAACC,GAAD,OAAOyrB,GAA8BzrB,EAAEC,OAAOH,SAExD,4BAAQA,MAAM,gCACZ,uCAEF,4BAAQA,MAAM,gCAAd,iDAGA,4BAAQA,MAAM,+BAAd,gDAGA,4BAAQA,MAAM,gCACZ,6BAEF,4BAAQA,MAAM,+BAAd,sCAGA,4BAAQA,MAAM,8BACZ,4BAEF,4BAAQA,MAAM,+BACZ,iDAEF,4BAAQA,MAAM,+BACZ,wCAGH,2BAAOK,QAAQ,WAAf,cAEC,0BAAMQ,UAAU,cAAhB,kCAED,2BACCz1B,KAAK,OACL40B,MAAO4rB,GACPv9C,KAAK,UACLwyB,UAAU,gBACVZ,SAAU,SAACC,GAAD,OAAO2rB,GAAgB3rB,EAAEC,OAAOH,UAE3C,2BAAOK,QAAQ,aAAf,kFAIA,0BAAMQ,UAAU,kBACf,oEAED,2BACCz1B,KAAK,OACLiD,KAAK,YACLwyB,UAAU,kBACVb,MAAO8rB,GACP7rB,SAAU,SAACC,GAAD,OAAO6rB,GAAkB7rB,EAAEC,OAAOH,UAE7C,2BAAOK,QAAQ,iBAAf,2CAGA,2BACCj1B,KAAK,OACLiD,KAAK,gBACLwyB,UAAU,sBACVb,MAAOgsB,GACP/rB,SAAU,SAACC,GAAD,OAAO+rB,GAAoB/rB,EAAEC,OAAOH,UAE/C,2BAAOK,QAAQ,YAAf,YACA,8BACChyB,KAAK,WACLwyB,UAAU,iBACVb,MAAOksB,GACPjsB,SAAU,SAACC,GAAD,OAAOisB,GAAgBjsB,EAAEC,OAAOH,UAE3C,2BACC50B,KAAK,SACLy1B,UAAU,gBACVb,MAAM,wBACNM,QAAS,SAACJ,GACTA,EAAEK,iBACFI,EAAM8rB,oBAAoB,CACzB59C,UAAWi7C,EACX3lC,WAAY6lC,EACZ1wC,SAAU4wC,EACVvlC,eAAgBylC,EAChBpmC,OAAQsmC,EACR9mC,aAAcgnC,EACdnmC,SAAUqmC,EACVhmC,aAAckmC,EACdzlC,QAAS2lC,EACTxnC,KAAM0nC,EACNpmC,kBAAmBsmC,EACnB3nC,QAAS6nC,EACTlnC,mBAAoBonC,GACpB7nC,YAAa+nC,GACbnoC,sBAAuBqoC,GACvBzmC,QAAS2mC,GACT3nC,UAAW6nC,GACXjnC,YAAamnC,GACbhpC,QAASkpC,SAKb,yBAAKrrB,UAAU,iBACd,uBACCA,UAAU,0BACVhB,KAAM5zB,EAASY,cAAcsC,sBAAsBwxB,EAAMzsB,KAEzD,yBACC4rB,SAC0B9zB,IAAzB20B,EAAMtR,eACHsR,EAAMtR,eACN,6FAEJ0Q,IAAKY,EAAM9xB,kBAGa7C,IAAzB20B,EAAMtR,eACN,4BACCwR,UAAU,uCACVP,QAAS,SAAC2L,GAAD,OAAQtL,EAAMzO,yBAFxB,uBAOA,yBAAK2O,UAAU,qBACd,2BAAOz1B,KAAK,OAAOk5B,IAAKulB,IACxB,4BACChpB,UAAU,sBACVP,QAAS,SAACJ,GACTA,EAAEK,sBAEmCv0B,IAApC69C,EAAwBr9B,SACY,OAApCq9B,EAAwBr9B,SAExBmU,EAAM+rB,mBACL7C,EAAwBr9B,QAAQy2B,MAAM,MAT1C,iBAkBF,uBACCpiB,UAAU,mBACVhB,KAAM5zB,EAASY,cAAc2F,6BAF9B,yBCpeWm6C,I,OAzNE,SAAChsB,GAAW,IAAD,EACSnB,mBAASmB,EAAMlf,OADxB,mBACpBmrC,EADoB,KACRC,EADQ,OAEqCrtB,mBAC/DmB,EAAMzb,qBAHoB,mBAEpB4nC,EAFoB,KAEMC,EAFN,OAKyCvtB,mBACnEmB,EAAMjd,uBANoB,mBAKpBspC,EALoB,KAKQC,EALR,OAWvBztB,mBAASmB,EAAM5c,yBAXQ,mBAS1BmpC,EAT0B,KAU1BC,EAV0B,OAYyB3tB,mBACnB,KAAhCmB,EAAM7c,uBAboB,mBAYpBspC,EAZoB,KAYAC,EAZA,OAeyC7tB,mBACnEmB,EAAM7c,uBAhBoB,mBAepBwpC,EAfoB,KAeQC,EAfR,KAmB3B,OACC,0BAAM1sB,UAAU,YACf,2BAAOR,QAAQ,SAAf,iBACe,0BAAMQ,UAAU,gBAAhB,KACd,0BAAMA,UAAU,mBACc70B,IAA5B20B,EAAMnO,kBAAN,oBACevI,YAAO0W,EAAMnO,kBAAmB,cAD/C,KAEE,KAGL,2BACCpnB,KAAK,OACLiD,KAAK,QACL2xB,MAAO4sB,EACP3sB,SAAU,SAACC,GAAD,OAAO2sB,EAAc3sB,EAAEC,OAAOH,UAEzC,2BAAOK,QAAQ,YAAf,YACA,0BAAMQ,UAAU,YACf,8BAAOuK,MAAMzK,EAAMlO,gBAAgBqa,KAAK,MACxC,uBAAGjN,KAAM5zB,EAASY,cAAc0F,8BAAhC,oBAID,yBAAKsuB,UAAU,mBACd,uCACA,0BAAMA,UAAU,qBAAhB,sFAEoB,IACnB,4BACCA,UAAU,qBACVP,QAASK,EAAM6sB,kBAFhB,eAHD,kMAWsD,IACrD,4BACC3sB,UAAU,qBACVP,QAASK,EAAM6sB,kBAFhB,eAZD,qHAqBA,2BAAOntB,QAAQ,2BACd,wDAED,yBAAKQ,UAAU,2BACd,yBAAKA,UAAU,sBACd,2BACCz1B,KAAK,QACLiD,KAAK,SACL2xB,MAAM,SACN+P,QAAsC,WAA7B+c,EACT7sB,SAAU,SAACC,GAAD,OAAO6sB,EAA4B7sB,EAAEC,OAAOH,UAEvD,2BAAOK,QAAQ,UAAf,WAED,yBAAKQ,UAAU,iCACd,2BACCz1B,KAAK,QACLiD,KAAK,oBACL2xB,MAAM,oBACN+P,QAAsC,sBAA7B+c,EACT7sB,SAAU,SAACC,GAAD,OAAO6sB,EAA4B7sB,EAAEC,OAAOH,UAEvD,2BAAOK,QAAQ,qBAAf,sBAED,yBAAKQ,UAAU,+BACd,2BACCz1B,KAAK,QACLiD,KAAK,kBACL2xB,MAAM,kBACN+P,QAAsC,oBAA7B+c,EACT7sB,SAAU,SAACC,GAAD,OAAO6sB,EAA4B7sB,EAAEC,OAAOH,UAEvD,2BAAOK,QAAQ,mBAAf,qBAGF,2BAAOA,QAAQ,oBAAf,qCAGA,yBAAKQ,UAAU,oBACd,yBAAKA,UAAU,wCACd,2BACCz1B,KAAK,QACLiD,KAAK,2BACL2xB,MAAM,2BACN+P,QACgC,6BAA/Bid,EAED/sB,SAAU,SAACC,GAAD,OAAO+sB,EAA8B/sB,EAAEC,OAAOH,UAEzD,2BAAOK,QAAQ,4BACb,8BAGH,yBAAKQ,UAAU,sBACd,2BACCz1B,KAAK,QACLiD,KAAK,SACL2xB,MAAM,SACN+P,QAAwC,WAA/Bid,EACT/sB,SAAU,SAACC,GAAD,OAAO+sB,EAA8B/sB,EAAEC,OAAOH,UAEzD,2BAAOK,QAAQ,UAAf,aAIH,yBAAKQ,UAAU,4BACd,+CACA,0BAAMA,UAAU,8BAAhB,yLAKA,2BAAOR,QAAQ,sBAAf,sBACA,0BAAMQ,UAAU,mCACdusB,EACE,wGACA,0CAEJ,2BACChiD,KAAK,OACLiD,KAAK,qBACL2xB,MAAOktB,EACPjtB,SAAU,SAACC,GAAD,OAAOitB,EAAgCjtB,EAAEC,OAAOH,UAE1DotB,EACA,2BAAO/sB,QAAQ,oBAAf,uEAGG,KACH+sB,EACA,0BAAMvsB,UAAU,yBAAhB,kCAGG,KACHusB,EACA,2BACChiD,KAAK,OACLiD,KAAK,mBACLwyB,UAAU,yBACVb,MAAOstB,EACPrtB,SAAU,SAACC,GAAD,OAAOqtB,EAA8BrtB,EAAEC,OAAOH,UAEtD,KACJ,4BACCa,UAAU,kCACVP,QAAS,SAACJ,GACTA,EAAEK,iBACF8sB,GAAsB,SAAC9gC,GAAD,OAAeA,OAGrC6gC,EACE,mCACA,+BAGL,2BACChiD,KAAK,SACLy1B,UAAU,gBACVb,MAAM,wBACNM,QAAS,SAACJ,GACTA,EAAEK,iBACFI,EAAM8sB,oBAAoB,CACzBhsC,MAAOmrC,EACP1nC,oBAAqB4nC,EACrBppC,sBAAuBspC,EACvBjpC,wBAAyBmpC,EACzBppC,sBAAuBwpC,OAI1B,uBACCzsB,UAAU,mBACVhB,KAAM5zB,EAASY,cAAc2F,6BAF9B,wBCrEYk7C,I,OAhIY,SAAC/sB,GAAW,IAAD,EACqBnB,mBACzDmB,EAAMvd,kBAF8B,mBAC9BuqC,EAD8B,KACPC,EADO,OAISpuB,mBAASmB,EAAM1d,YAJxB,mBAI9B4qC,EAJ8B,KAIbC,EAJa,OAKyBtuB,mBAC7DmB,EAAM3b,oBAN8B,mBAK9B+oC,EAL8B,KAKLC,EALK,OAQOxuB,mBAASmB,EAAMxd,WARtB,mBAQ9B8qC,EAR8B,KAQdC,EARc,OASiB1uB,mBACrDmB,EAAMlc,gBAV8B,mBAS9B0pC,EAT8B,KASTC,EATS,OAY2B5uB,mBAC/DmB,EAAMzd,qBAb8B,mBAY9BmrC,EAZ8B,KAYJC,EAZI,OAeiB9uB,mBACrDmB,EAAM/c,gBAhB8B,mBAe9B2qC,EAf8B,KAeTC,EAfS,KAmBrC,OACC,0BAAM3tB,UAAU,wBACf,oDACA,kNAKA,yBAAKA,UAAU,mBACd,yBAAKA,UAAU,kCACd,2BACCz1B,KAAK,WACLiD,KAAK,sBACL0hC,QAAS4d,EACT1tB,SAAU,SAACC,GAAD,OAAO0tB,EAAyB1tB,EAAEC,OAAO4P,YAEpD,2BAAO1P,QAAQ,uBAAf,+BAID,yBAAKQ,UAAU,2BACd,2BACCz1B,KAAK,WACLiD,KAAK,eACL0hC,QAAS8d,EACT5tB,SAAU,SAACC,GAAD,OAAO4tB,EAAmB5tB,EAAEC,OAAO4P,YAE9C,2BAAO1P,QAAQ,gBAAf,iBAED,yBAAKQ,UAAU,qCACd,2BACCz1B,KAAK,WACLiD,KAAK,yBACL0hC,QAASge,EACT9tB,SAAU,SAACC,GAAD,OAAO8tB,EAA2B9tB,EAAEC,OAAO4P,YAEtD,2BAAO1P,QAAQ,0BAAf,2BAED,yBAAKQ,UAAU,0BACd,2BACCz1B,KAAK,WACLiD,KAAK,cACL0hC,QAASke,EACThuB,SAAU,SAACC,GAAD,OAAOguB,EAAkBhuB,EAAEC,OAAO4P,YAE7C,2BAAO1P,QAAQ,eAAf,gBAED,yBAAKQ,UAAU,oBACd,2BACCz1B,KAAK,WACLiD,KAAK,mBACL0hC,QAASoe,EACTluB,SAAU,SAACC,GAAD,OAAOkuB,EAAuBluB,EAAEC,OAAO4P,YAElD,2BAAO1P,QAAQ,oBAAf,qBAED,yBAAKQ,UAAU,uCACd,2BACCz1B,KAAK,WACLiD,KAAK,2BACL0hC,QAASse,EACTpuB,SAAU,SAACC,GAAD,OAAOouB,EAA4BpuB,EAAEC,OAAO4P,YAEvD,2BAAO1P,QAAQ,4BAAf,2CAID,yBAAKQ,UAAU,oBACd,2BACCz1B,KAAK,WACLiD,KAAK,mBACL0hC,QAASwe,EACTtuB,SAAU,SAACC,GAAD,OAAOsuB,EAAuBtuB,EAAEC,OAAO4P,YAElD,2BAAO1P,QAAQ,oBAAf,sBAGF,2BACCj1B,KAAK,SACL40B,MAAM,qBACNa,UAAU,4BACVP,QAAS,SAACJ,GACTA,EAAEK,iBACFI,EAAM8tB,iBAAiB,CACtBrrC,iBAAkBuqC,EAClB1qC,WAAY4qC,EACZ7oC,mBAAoB+oC,EACpB5qC,UAAW8qC,EACXxpC,eAAgB0pC,EAChBjrC,oBAAqBmrC,EACrBzqC,eAAgB2qC,UCyEPG,I,OA/Ka,WAC3B,IAAMluC,EAAUof,cADiB,EAELJ,oBAAS,GAFJ,mBAE1BgH,EAF0B,KAElBC,EAFkB,OAGDjH,mBAAS,IAHR,mBAG1B1zB,EAH0B,KAGhBs9C,EAHgB,OAIX5pB,mBAAS,WAJE,mBAI1BmvB,EAJ0B,KAIrBC,EAJqB,OAKGpvB,mBAAS,IALZ,mBAK1BqvB,EAL0B,KAKdC,EALc,OAMWtvB,mBAAS,UANpB,mBAM1BuvB,EAN0B,KAMVC,EANU,KAQ3B91C,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,YACQ,uCAAG,sBAAA7uB,EAAA,kEACnB21C,EADmB,SAEZpkB,uBAAa/4B,EAASkmB,gBAAgBjZ,EAAKrN,QAAS2U,IAFxC,kCAInBimB,GAAU,GAJS,2CAAH,qDAMjB4iB,KACE,CAACnwC,EAAKrN,QAAS2U,IAElB,IAAMyuC,EAAyB,uCAAG,WAAOh9B,GAAP,SAAAxe,EAAA,sEAC3BxH,EAAS+lB,iBAAiB9Y,EAAKrN,QAASomB,GADb,OAEjC68B,EAAc,gDACdE,EAAkB,UAHe,2CAAH,sDAMzBvB,EAAmB,uCAAG,WAAOx7B,GAAP,SAAAxe,EAAA,2DAE1Bwe,EAASnO,sBAAsBxB,MAAM,KAAKvS,OAAS,GACnDkiB,EAASnO,sBACPxB,MAAM,IACNgS,MAAK,SAAC46B,GAAD,MACL,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAK35C,SAAS25C,OANrB,gBAS1BJ,EACC,2EAEDE,EAAkB,OAZQ,sCAcpB/iD,EAAS+lB,iBAAiB9Y,EAAKrN,QAASomB,GAdpB,OAe1B68B,EAAc,gDACdE,EAAkB,UAhBQ,2CAAH,sDAoBnBtC,EAAkB,uCAAG,WAAOyC,GAAP,eAAA17C,EAAA,8DACbzH,IAATmjD,EADsB,uBAEnBC,EAAYlM,IAAIC,gBAAgBgM,GAFb,SAGnBljD,EAAS+lB,iBAAiB9Y,EAAKrN,QAAS,CAC7C0N,aAAc61C,IAJU,OAMzBN,EAAc,gDACdE,EAAkB,UAPO,2CAAH,sDAWlB98B,EAAoB,uCAAG,sBAAAze,EAAA,0DACxBk4B,OAAOC,QAAQ,iBADS,gCAErB3/B,EAASimB,qBAAqBhZ,EAAKrN,SAFd,OAG3BijD,EAAc,gCACdE,EAAkB,UAJS,2CAAH,qDAYpBK,EACL,yBACCxuB,UACoB,WAAnBkuB,EACG,wCACA,sCAGJ,8BAAOF,GACP,4BACChuB,UAAU,eACVP,QAAS,SAAC2L,GAAD,OAAQ6iB,EAAc,QAK5BxL,EACL,wBAAIziB,UAAU,gCAAd,oBAGKyuB,EACL9oB,GAAmB,OAATttB,EACT,yBAAK2nB,UAAU,kDACbyiB,EACD,uBACCzjB,KAAM5zB,EAASY,cAAcqC,iBAC5BgK,EAAKrN,QACLC,EAASwmB,QAAQzjB,YAHnB,oBASE,KAEC0gD,EACL,yBAAK1uB,UAAU,0BACd,4BACCA,UACS,YAAR8tB,EACG,iCACA,wBAEJruB,QAAS,SAAC2L,GAAD,OAAQ2iB,EAAO,aANzB,WAUA,4BACC/tB,UACS,aAAR8tB,EACG,iCACA,wBAEJruB,QAAS,SAAC2L,GAAD,OAAQ2iB,EAAO,cANzB,YAUA,4BACC/tB,UACS,UAAR8tB,EACG,iCACA,wBAEJruB,QAAS,SAAC2L,GAAD,OAAQ2iB,EAAO,WANzB,UAaIY,EAAWhpB,EACR,YAARmoB,EACC,kBAAC,GAAD,iBACK7iD,EAASwmB,QADd,CAECm6B,oBAAqBwC,EACrBvC,mBAAoBA,EACpBx6B,qBAAsBA,KAEZ,aAARy8B,EACH,kBAAC,GAAD,iBACK7iD,EAASymB,QADd,CAECk7B,oBAAqBA,EACrBD,iBAtFsB,WACxBoB,EAAO,eAwFN,kBAAC,GAAD,iBACK9iD,EAAS4mB,KADd,CAEC+7B,iBAAkBQ,KAGjB,KAEJ,OACC,yBAAKpuB,UAAU,yBACd,kBAAC,EAAD,MACA,yBAAKA,UAAU,sCACE,KAAfguB,EAAoBQ,EAAgB,KACpCC,EACAC,EACAC,GAEF,kBAAC,EAAD,SC3DYC,I,OAnHa,WAC3B,IAAMjvC,EAAUof,cADiB,EAELJ,mBAAS,IAFJ,mBAE1BqhB,EAF0B,KAElBC,EAFkB,OAGuBthB,mBAAS,IAHhC,mBAG1BkwB,EAH0B,KAGJC,EAHI,OAIenwB,mBAAS,IAJxB,mBAI1BowB,EAJ0B,KAIRC,EAJQ,OAKuBrwB,mBAAS,IALhC,mBAK1BswB,EAL0B,KAKJC,EALI,KAO3B72C,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,WACY,OAAjBppB,EAAKrN,cAAqCG,IAAjBkN,EAAKrN,SACjC2U,EAAQvL,KAAK,CACZ2L,SAAU,gBACVtV,MAAO,CAAEuV,MAAO,0BAGhB,CAAC3H,EAAKrN,QAAS2U,IAElB,IAAMmS,EAAqB,uCAAG,sBAAAlf,EAAA,sEAChBxH,EAAS0mB,sBACrBzZ,EAAKrN,QACL6jD,GAH4B,mFAAH,qDAOrB98B,EAAc,uCAAG,sBAAAnf,EAAA,sEAChBxH,EAAS2mB,eAAe1Z,EAAKrN,QAAS+jD,EAAkBpvC,GADxC,2CAAH,qDAId8iC,EACL,wBAAIziB,UAAU,+BAAd,mBAGK0gB,EACL,yBAAK1gB,UAAU,mCACd,0BAAMA,UAAU,oBACI,IAAlBggB,EAAO9wC,OACL,iDADF,UAEK8wC,EAAO9wC,OAFZ,mDAIF,4BACE8wC,EAAOtrC,SAAS,YAChB,+EACG,KACHsrC,EAAOtrC,SAAS,SAChB,gFACG,KACHsrC,EAAOtrC,SAAS,WAChB,oEACG,OAKD2jC,EACL,yBAAKrY,UAAU,qCACbyiB,EACAzC,EAAO9wC,OAAS,EAAIwxC,EAAY,KACjC,yBAAK1gB,UAAU,iBACd,2BAAOR,QAAQ,oBAAf,oBACA,2BACCj1B,KAAK,WACLiD,KAAK,mBACL2xB,MAAO0vB,EACPzvB,SAAU,SAACC,GAAD,OAAOyvB,EAAwBzvB,EAAEC,OAAOH,UAEnD,2BAAOK,QAAQ,gBAAf,gBACA,2BACCj1B,KAAK,WACLiD,KAAK,eACL2xB,MAAO4vB,EACP3vB,SAAU,SAACC,GAAD,OAAO2vB,EAAoB3vB,EAAEC,OAAOH,UAE/C,2BAAOK,QAAQ,oBAAf,oBACA,2BACCj1B,KAAK,WACLiD,KAAK,mBACL2xB,MAAO8vB,EACP7vB,SAAU,SAACC,GAAD,OAAO6vB,EAAwB7vB,EAAEC,OAAOH,UAEnD,yBAAKa,UAAU,kBACd,2BACCz1B,KAAK,SACL40B,MAAM,eACNM,QAAO,uCAAE,WAAOJ,GAAP,SAAAzsB,EAAA,6DACRysB,EAAEK,iBADM,SAEqB5N,IAFrB,cAKGi9B,IAAqBE,EAC/BhP,EAAU,CAAC,YACD8O,EAAiB7/C,OAAS,EACpC+wC,EAAU,CAAC,UAEXluB,IANAkuB,EAAU,CAAC,aAJJ,2CAAF,wDAcR,uBAAGjhB,KAAM5zB,EAASY,cAAcyF,+BAAhC,aAQJ,OACC,yBAAKuuB,UAAU,wBACd,kBAAC,EAAD,MACCqY,EACD,kBAAC,EAAD,SCxCY8W,I,OAtEW,WACzB,IAAMxvC,EAAUof,cACV1mB,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,WACY,OAAjBppB,EAAKrN,cAAqCG,IAAjBkN,EAAKrN,SACjC2U,EAAQvL,KAAK,CACZ2L,SAAU,gBACVtV,MAAO,CAAEuV,MAAO,0BAGhB,CAAC3H,EAAKrN,QAAS2U,IAElB,IAAMsS,EAAa,uCAAG,sBAAArf,EAAA,0DAEpBk4B,OAAOC,QACN,mFAHmB,gCAMd3/B,EAAS6mB,cAAc5Z,EAAKrN,QAAS2U,GANvB,2CAAH,qDAUb8iC,EACL,wBAAIziB,UAAU,8BAAd,qBAGKgkB,EACL,yBAAKhkB,UAAU,iDACbyiB,EACD,mKAIA,yBAAKziB,UAAU,kBACd,2BACCz1B,KAAK,SACL40B,MAAM,oBACNM,QAAO,uCAAE,WAAOJ,GAAP,SAAAzsB,EAAA,6DACRysB,EAAEK,iBADM,SAEFzN,IAFE,2CAAF,wDAKR,uBAAG+M,KAAM5zB,EAASY,cAAcyF,+BAAhC,YAOGwyC,EACL,yBAAKjkB,UAAU,kDACd,uBAAGhB,KAAM5zB,EAASY,cAAcyF,+BAAhC,qBAMF,OACC,yBAAKuuB,UAAU,uBACd,kBAAC,EAAD,MACA,yBAAKA,UAAU,oCACbgkB,EACAC,GAEF,kBAAC,EAAD,SCkJYmL,I,OAlNgB,WAC9B,IAAMzvC,EAAUof,cADoB,EAERJ,oBAAS,GAFD,mBAE7BgH,EAF6B,KAErBC,EAFqB,OAGQjH,mBAAS,IAHjB,mBAG7B7b,EAH6B,KAGbusC,EAHa,OAIF1wB,mBAAS,IAJP,mBAI7BX,EAJ6B,KAIlBsxB,EAJkB,OAQhC3wB,oBAAS,GARuB,mBAMnC4wB,EANmC,KAOnCC,EAPmC,OASY7wB,mBAAS,IATrB,mBAS7B8wB,EAT6B,KASXC,EATW,KAW9Br3C,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,YACc,uCAAG,8BAAA7uB,EAAA,6DACnB+8C,EAAoB,CACzB,eACA,UACA,UACA,iBACA,qBACA,QACA,UACA,kBACA,WACA,cACA,MACA,YACA,WACA,YACA,aACA,YACA,WACA,SACA,YACA,QACA,SACA,kBACA,UACA,SACA,mBACA,SACA,QACA,UACA,cACA,WACA,aACA,SACA,aACA,WACA,UACA,YACA,WACA,eACA,SACA,UAzCwB,SA4CGxrB,uBAC3B/4B,EAAS8mB,yBAAyB7Z,EAAKrN,QAAS2U,IA7CxB,OA4CnBiwC,EA5CmB,OA+CzBP,EAAkBO,GAClBN,EACCM,EAAcvoC,OACbsoC,EAAkBv4C,QAAO,SAAC5H,GAAD,OAAYogD,EAAcl7C,SAASlF,QAG9Do2B,GAAU,GArDe,2CAAH,qDAuDvBiqB,KACE,CAACx3C,EAAKrN,QAAS2U,IAElB,IAmBM8iC,EACL,wBAAIziB,UAAU,oCAAd,+BAKK8vB,EACL,yBAAK9vB,UAAU,6CACd,gJAOI+vB,EAAqBpqB,EAC1B,yBAAK3F,UAAU,kDACd,yBAAKA,UAAU,eACbhC,EAAUtqB,KAAI,SAAClE,EAAOkM,GACtB,OACC,yBACCskB,UACCld,EAAepO,SAASlF,GACrB,qBACA,YAEJiM,IAAKC,EACL+jB,QAAS,SAACJ,GACTA,EAAEK,iBACE5c,EAAepO,SAASlF,GAC3B6/C,GAAkB,SAAC3jC,GAAD,OACjBA,EAAStU,QAAO,SAAC44C,GAAD,OAAOA,IAAMxgD,QAG9B6/C,GAAkB,SAAC3jC,GAAD,OAAcA,EAASrE,OAAO7X,QAIlD,2BACCjF,KAAK,WACLiD,KAAK,iBACL0hC,QAASpsB,EAAepO,SAASlF,GACjCiwB,QAAS,SAACJ,GACTA,EAAE4wB,kBACEntC,EAAepO,SAASlF,GAC3B6/C,GAAkB,SAAC3jC,GAAD,OACjBA,EAAStU,QAAO,SAAC44C,GAAD,OAAOA,IAAMxgD,QAG9B6/C,GAAkB,SAAC3jC,GAAD,OAAcA,EAASrE,OAAO7X,OAGlD0gD,UAAU,IAEX,2BAAO1wB,QAAQ,kBACShwB,EAxE3BiS,MAAM,KACN/N,KAAI,SAACy8C,GAAD,OACS,IAAbA,EAAEjhD,OAAeihD,EAAEhmC,cAAgBgmC,EAAE,GAAGhmC,cAAgBgmC,EAAEx/C,MAAM,MAEhExB,KAAK,WA0EJogD,EAQD,yBAAKvvB,UAAU,wBACd,2BAAOR,QAAQ,gBAAf,oDACmD,KAEnD,2BACCj1B,KAAK,OACLiD,KAAK,eACL+xB,YAAY,8BACZJ,MAAOswB,EACPrwB,SAAU,SAACC,GAAD,OAAOqwB,EAAoBrwB,EAAEC,OAAOH,WAhBhD,4BACCa,UAAU,uBACVP,QAAS,SAAC2L,GAAD,OAAQokB,GAA+B,KAFjD,8CAqBC,KAEEnX,EACL,yBAAKrY,UAAU,0CACbyiB,EACAqN,EACAC,EACD,2BACCxlD,KAAK,SACL40B,MAAM,WACNM,QAAO,uCAAE,WAAOJ,GAAP,eAAAzsB,EAAA,6DACRysB,EAAEK,iBACItN,EACLq9B,EAAiBvgD,OAAS,EACvB4T,EAAeuE,OACcooC,EA1GlChuC,MAAM,KACN/N,KAAI,SAACy8C,GAAD,MACK,MAATA,EAAE,GACCA,EAAEx/C,MAAM,GAAGlD,cAAcgU,MAAM,KAAKtS,KAAK,KACzCghD,EAAE1iD,cAAcgU,MAAM,KAAKtS,KAAK,SAwG9B2T,EAPI,SAQF1X,EAAS+mB,4BAA4B9Z,EAAKrN,QAASonB,GARjD,OASRzS,EAAQvL,KAAK,CACZ2L,SAAU,MAVH,2CAAF,yDAiBV,OACC,yBAAKigB,UAAU,6BACd,kBAAC,EAAD,MACCqY,EACD,kBAAC,EAAD,SCuMY+X,I,OArZG,SAAC,GAAe,IAEtB5gD,EAFqB,EAAZoa,MAEnBmb,OAAUv1B,MAFqB,EAIJmvB,oBAAS,GAJL,mBAIzBgH,EAJyB,KAIjBC,EAJiB,OAKEjH,mBAAS,IALX,mBAKzB0xB,EALyB,KAKdC,EALc,OAM4B3xB,oBAAS,GANrC,mBAMzB4xB,EANyB,KAMDC,EANC,KAQ1Bn4C,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,YACS,uCAAG,sBAAA7uB,EAAA,kEACpB09C,EADoB,SAEbnsB,uBAAa/4B,EAASinB,aAAaha,EAAKrN,QAASwE,IAFpC,kCAIpBo2B,GAAU,GAJU,2CAAH,qDAMlBvT,KACE,CAACha,EAAKrN,QAASwE,IAElB,IAAMihD,EAAwB,SAAClN,GAC9B,OAAOA,EACL9hC,MAAM,KACN/N,KAAI,SAACy8C,GAAD,OACS,IAAbA,EAAEjhD,OAAeihD,EAAEhmC,cAAgBgmC,EAAE,GAAGhmC,cAAgBgmC,EAAEx/C,MAAM,MAEhExB,KAAK,MAGFuhD,EAAmB,uCAAG,sBAAA99C,EAAA,sEACrBxH,EAAS+mB,4BACd9Z,EAAKrN,QACLqlD,EAAU/9B,mBAAmBjL,OAAO7X,IAHV,OAK3B8gD,GAAa,SAAC5kC,GACb,OAAO,2BACHA,GADJ,IAEC4G,mBAAoB5G,EAAS4G,mBAAmBjL,OAAO7X,QAR9B,2CAAH,qDAanBmhD,EAAwB,uCAAG,sBAAA/9C,EAAA,sEAC1BxH,EAAS+mB,4BACd9Z,EAAKrN,QACLqlD,EAAU/9B,mBAAmBlb,QAAO,SAAC44C,GAAD,OAAOA,IAAMxgD,MAHlB,OAKhC8gD,GAAa,SAAC5kC,GACb,OAAO,2BACHA,GADJ,IAEC4G,mBAAoB5G,EAAS4G,mBAAmBlb,QAC/C,SAAC44C,GAAD,OAAOA,IAAMxgD,UATgB,2CAAH,qDAexBizC,EAAa9c,EAClB,yBAAK3F,UAAU,qBACd,yBAAKA,UAAU,mBACd,6CAC2B70B,IAA1BklD,EAAU79B,YAA4B,8BAAO,KAAc,UACjCrnB,IAA1BklD,EAAU79B,YACV,uBACCwM,KAAM5zB,EAASY,cAAc6D,kBAC5BwgD,EAAU79B,cAGVi+B,EAAsBJ,EAAU79B,cAE/B,MAEL,4BAAKi+B,EAAsBjhD,SACOrE,IAAjCklD,EAAU/9B,mBACV,4BACC0N,UAAU,uBACVuL,YAAa,SAAClM,GACTgxB,EAAU/9B,mBAAmB5d,SAASlF,KACzC6vB,EAAEC,OAAOoP,UAAY,0BAGvBlD,aAAc,SAACnM,GACVgxB,EAAU/9B,mBAAmB5d,SAASlF,KACzC6vB,EAAEC,OAAOoP,UAAY,cAGvBjP,QAAS,SAAC2L,GACLilB,EAAU/9B,mBAAmB5d,SAASlF,GACzCmhD,IAEAD,MAIDL,EAAU/9B,mBAAmB5d,SAASlF,GACpC,YACA,0BAED,MAEF,KAEEohD,EAAqBjrB,EAC1B,yBACC3F,UACCuwB,EACG,sCACA,kCAGJ,2BAAIF,EAAUjzC,aACd,4BACC4iB,UAAU,qCACVP,QAAS,SAAC2L,GACTolB,GAA0B,SAAC9kC,GAAD,OAAeA,OAGzC6kC,EAAyB,SAAW,YAGpC,KAEEM,EACLlrB,GAAU0qB,EAAUz9B,YAAY1jB,OAAS,EACxC,yBAAK8wB,UAAU,mCACd,0BAAMA,UAAU,iBAAhB,+BAAyDxwB,EAAM2a,cAA/D,MACA,yBAAK6V,UAAU,aACbqwB,EAAUz9B,YAAYlf,KAAI,SAACsI,EAAMN,GACjC,OACC,uBACCD,IAAKC,EACLskB,UAAU,qBACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BsP,EAAK3I,GACL2I,EAAKpP,QAGN,yBACCqyB,SACgB9zB,IAAf6Q,EAAKnI,MACFmI,EAAKnI,MACL,2FAEJqrB,IAAKljB,EAAKpP,cAOb,KAECkkD,EACLnrB,GAAU0qB,EAAUl9B,iBAAiBjkB,OAAS,EAC7C,yBAAK8wB,UAAU,8CACd,0BAAMA,UAAU,iBAAhB,uBACA,yBAAKA,UAAU,aACbqwB,EAAUl9B,iBAAiBzf,KAAI,SAACsI,EAAMN,GACtC,OACC,uBACCD,IAAKC,EACLskB,UAAU,qBACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BsP,EAAK3I,GACL2I,EAAKpP,QAGN,yBACCqyB,SACgB9zB,IAAf6Q,EAAKnI,MACFmI,EAAKnI,MACL,2FAEJqrB,IAAKljB,EAAKpP,cAOb,KAECmkD,EACLprB,GAAU0qB,EAAUp1C,MAAM/L,OAAS,EAClC,yBAAK8wB,UAAU,4BACd,0BAAMA,UAAU,iBAAhB,SACA,yBAAKA,UAAU,cACbqwB,EAAUp1C,MAAMvH,KAAI,SAACgH,EAAMgB,GAC3B,OACC,yBAAKskB,UAAU,YAAYvkB,IAAKC,GAC/B,yBAAKskB,UAAU,UACbtlB,EAAKM,WAAWtH,KAAI,SAACG,EAAOm9C,GAC5B,OACC,uBACChxB,UAAU,gBACVhB,KAAM5zB,EAASY,cAAcmC,iBAC5BuM,EAAKrH,GACLqH,EAAK9N,OAEN6O,IAAKu1C,GAEL,yBAAK/xB,IAAKprB,EAAOqrB,IAAK,mBAK1B,uBACCc,UAAU,SACVhB,KAAM5zB,EAASY,cAAcmC,iBAC5BuM,EAAKrH,GACLqH,EAAK9N,QAGL8N,EAAK9N,OAEP,0BAAMozB,UAAU,gBAAhB,UAAmCtlB,EAAK2Q,cAAxC,yBAAiE3Q,EAAK2Y,eAAtE,kBAMF,KAEC49B,EACLtrB,GAAU0qB,EAAU/8B,WAAWpkB,OAAS,EACvC,yBAAK8wB,UAAU,kCACd,0BAAMA,UAAU,iBAAhB,UAAoCywB,EACnCjhD,GACC2a,cAFF,WAGA,yBAAK6V,UAAU,aACbqwB,EAAU/8B,WAAW5f,KAAI,SAACsI,EAAMN,GAChC,OACC,uBACCD,IAAKC,EACLskB,UAAU,qBACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BsP,EAAK3I,GACL2I,EAAKpP,QAGN,yBACCqyB,SACgB9zB,IAAf6Q,EAAKnI,MACFmI,EAAKnI,MACL,2FAEJqrB,IAAKljB,EAAKpP,cAOb,KAECo3C,EACL,yBAAKhkB,UAAU,wCACbyiB,EACAmO,EACAC,EACAC,EACAC,EACAE,GAIGC,EACLvrB,GAAU0qB,EAAU99B,cAAcrjB,OAAS,EAC1C,yBAAK8wB,UAAU,qCACd,0BAAMA,UAAU,iBAAhB,kBACA,yBAAKA,UAAU,uBACbqwB,EAAU99B,cAAc7e,KAAI,SAACy9C,EAAcz1C,GAC3C,OACC,uBACCD,IAAKC,EACLsjB,KAAM5zB,EAASY,cAAc6D,kBAAkBshD,IAE9CV,EAAsBU,SAMzB,KAEC5K,EACL5gB,GAAU0qB,EAAUxgC,YAAY3gB,OAAS,EACxC,yBAAK8wB,UAAU,mCACd,0BAAMA,UAAU,iBAAhB,gBACCqwB,EAAUxgC,YAAYnc,KAAI,SAACoc,EAASpU,GACpC,OACC,yBAAKskB,UAAU,kBAAkBvkB,IAAKC,QAClBvQ,IAAlB2kB,EAAQnS,MACR,uBACCqiB,UAAU,wBACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B+f,EAAQzc,GACRyc,EAAQljB,QAGT,yBAAKqyB,IAAKnP,EAAQnS,MAAOuhB,IAAKpP,EAAQljB,SAEpC,KACJ,uBACCozB,UAAU,kBACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B+f,EAAQzc,GACRyc,EAAQljB,QAGRkjB,EAAQljB,OAEV,2BAAIkjB,EAAQlS,SACZ,uBACCoiB,UAAU,sBACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B+f,EAAQzc,GACRyc,EAAQljB,QAJV,qBAaD,KAEC65C,EACL9gB,GAAU0qB,EAAUz8B,aAAa1kB,OAAS,EACzC,yBAAK8wB,UAAU,6BACd,uBACChB,KAAM5zB,EAASY,cAAc6E,sBAAsBrB,GACnDwwB,UAAU,iBAFX,8BAGoBywB,EAAsBjhD,GAAO2a,cAHjD,WAIA,yBAAK6V,UAAU,eACbqwB,EAAUz8B,aAAalgB,KAAI,SAACsc,EAAOtU,GACnC,OACC,yBAAKskB,UAAU,aAAavkB,IAAKC,GAChC,yBAAKskB,UAAU,iCACW70B,IAAxB6kB,EAAM2D,cACN,uBACCqL,KAAM5zB,EAASY,cAAc0B,mBAC5BsiB,EAAMriB,SACNqiB,EAAMzT,aAGP,yBACC0iB,SACyB9zB,IAAxB6kB,EAAM2D,cACH3D,EAAM2D,cACN,6FAEJuL,IAAKlP,EAAMzT,cAGV,KACJ,yBAAKyjB,UAAU,gBACd,0BAAMA,UAAU,iBAAhB,iBAAsChQ,EAAMpS,QAA5C,YACA,0BAAMoiB,UAAU,yBACf,8BAAO,WACP,qCAAOhQ,EAAMzT,WAAb,aAA4ByT,EAAMrd,eAIrC,uBACCqtB,UAAU,gBACVhB,KAAM5zB,EAASY,cAAcwE,kBAC5Bwf,EAAM3c,GACN2c,EAAMpS,UAJR,UAMKoS,EAAMjX,cANX,gBAWJ,uBACCinB,UAAU,gBACVhB,KAAM5zB,EAASY,cAAc6E,sBAAsBrB,IAFpD,mBAOE,KAECy0C,EACL,yBAAKjkB,UAAU,yCACbkxB,EACA3K,EACAE,GAIH,OACC,yBAAKzmB,UAAU,cACd,kBAAC,EAAD,MACA,yBAAKA,UAAU,2BACbgkB,EACAC,GAEF,kBAAC,EAAD,SCjIYmN,I,OA7QE,WAChB,IAAMrzB,EAAQ,IAAIsd,gBAAgB5W,cAAc6W,QAC1C+V,EAActzB,EAAMhrB,IAAI,gBACxBhE,EAA6B,OAAtBgvB,EAAMhrB,IAAI,QAAmBgX,SAASgU,EAAMhrB,IAAI,SAAW,EAClE0M,EACW,aAAhB4xC,EACGjmD,EAASY,cAAc+F,2BAA6B,IACpC,eAAhBs/C,EACAjmD,EAASY,cAAcgG,6BAA+B,IACtD5G,EAASY,cAAc6F,mBAAqB,IAT1B,EAUM8sB,oBAAS,GAVf,mBAUfgH,EAVe,KAUPC,EAVO,OAWEjH,mBAAS,IAXX,mBAWf2yB,EAXe,KAWTC,EAXS,KAatB9vB,qBAAU,YACQ,uCAAG,sBAAA7uB,EAAA,kEACnB2+C,EADmB,SACLptB,uBAAa/4B,EAASyoB,WADjB,kCAEnB+R,GAAU,GAFS,2CAAH,qDAIjB4rB,KACE,IAEH,IAAMC,EAAkB9rB,EACrB2rB,EAAKl6C,QACL,SAAC0Y,GAAD,QACmB,aAAhBuhC,GAA+C,YAAjBvhC,EAAQvlB,SACtB,eAAhB8mD,GAAiD,cAAjBvhC,EAAQvlB,OAC1CulB,EAAQiE,YACP,GACF,KAEG0uB,EACL,uBACCziB,UAAU,gBACVhB,KAAM5zB,EAASY,cAAc6F,oBAE7B,oDAII6/C,EACL,yBAAK1xB,UAAU,8BACd,uBACCA,UACiB,QAAhBqxB,GAAyC,OAAhBA,EACtB,yBACA,gBAEJryB,KAAM5zB,EAASY,cAAc8F,8BAN9B,eAUA,uBACCkuB,UACiB,aAAhBqxB,EAA6B,sBAAwB,aAEtDryB,KAAM5zB,EAASY,cAAc+F,4BAJ9B,YAQA,uBACCiuB,UACiB,eAAhBqxB,EACG,wBACA,eAEJryB,KAAM5zB,EAASY,cAAcgG,8BAN9B,eAaI2/C,EAAkBhsB,EACvB,yBAAK3F,UAAU,+BACJ,IAATjxB,EACA,yBAAKixB,UAAU,yBACa70B,IAA1BsmD,EAAgB9zC,MAChB,uBACCqiB,UAAU,wBACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B0hD,EAAgBp+C,GAChBo+C,EAAgB7kD,QAGjB,yBAAKqyB,IAAKwyB,EAAgB9zC,MAAOuhB,IAAKuyB,EAAgB7kD,SAEpD,KACJ,yBAAKozB,UAAU,kBACd,yBAAKA,UAAU,iBACd,8BAAOyxB,EAAgBlnD,KAAK4f,eAC5B,uBACC6U,KAAM5zB,EAASY,cAAc+D,oBAC5B0hD,EAAgBp+C,GAChBo+C,EAAgB7kD,QAGhBwc,YAAOqoC,EAAgB94C,KAAM,YAGhC,yBAAKqnB,UAAU,qBACd,uBACCA,UAAU,kBACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B0hD,EAAgBp+C,GAChBo+C,EAAgB7kD,QAGhB6kD,EAAgB7kD,OAElB,0BAAMozB,UAAU,2BACdyxB,EAAgB7zC,QAAQjN,MAAM,EAAG,KAAO,OAE1C,uBACCqvB,UAAU,cACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B0hD,EAAgBp+C,GAChBo+C,EAAgB7kD,QAJlB,cAUD,yBAAKozB,UAAU,cACd,uBACChB,KAAM5zB,EAASY,cAAciG,yBAC5Bw/C,EAAgBp+C,KAFlB,UAIKo+C,EAAgB14C,cAJrB,cAQA,KACJ,yBAAKinB,UAAU,kBACbsxB,EACCl6C,QACA,SAAC0Y,EAASpU,GAAV,OACCA,EAAe,GAAP3M,GACR2M,GAAsB,IAAZ3M,EAAO,IACjB+gB,IAAY2hC,KACM,aAAhBJ,GAA+C,YAAjBvhC,EAAQvlB,SACtB,eAAhB8mD,GAAiD,cAAjBvhC,EAAQvlB,SAE3CmJ,KAAI,SAACoc,EAASpU,GACd,OACC,yBAAKskB,UAAU,eAAevkB,IAAKC,QACfvQ,IAAlB2kB,EAAQnS,MACR,uBACCqiB,UAAU,wBACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B+f,EAAQzc,GACRyc,EAAQljB,QAGT,yBAAKqyB,IAAKnP,EAAQnS,MAAOuhB,IAAKpP,EAAQljB,SAEpC,KACJ,yBAAKozB,UAAU,kBACd,yBAAKA,UAAU,iBACd,8BAAOlQ,EAAQvlB,KAAK4f,eACpB,uBACC6U,KAAM5zB,EAASY,cAAc+D,oBAC5B+f,EAAQzc,GACRyc,EAAQljB,QAGRwc,YAAO0G,EAAQnX,KAAM,YAGxB,yBAAKqnB,UAAU,qBACd,uBACCA,UAAU,kBACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B+f,EAAQzc,GACRyc,EAAQljB,QAGRkjB,EAAQljB,OAEV,0BAAMozB,UAAU,2BACdlQ,EAAQlS,QAAQjN,MAAM,EAAG,KAAO,OAElC,uBACCqvB,UAAU,cACVhB,KAAM5zB,EAASY,cAAc+D,oBAC5B+f,EAAQzc,GACRyc,EAAQljB,QAJV,cAUD,yBAAKozB,UAAU,cACd,uBACChB,KAAM5zB,EAASY,cAAciG,yBAC5B6d,EAAQzc,KAFV,UAIKyc,EAAQ/W,cAJb,kBAWN0K,KAAK42B,KACLiX,EAAKl6C,QACJ,SAAC0Y,GAAD,OACCA,EAAQvlB,OAAS8mD,GACD,QAAhBA,GACgB,OAAhBA,KACAniD,OAAS,IACR,EACH,yBAAK8wB,UAAU,2BACJ,IAATjxB,EACA,+CAEA,uBAAGiwB,KAAMvf,EAAI,eAAW1Q,EAAO,IAA/B,iBAEAw7B,MAAMC,KACN,CACCt7B,OAAQuU,KAAK42B,KAAKiX,EAAKpiD,OAAS,MAEjC,SAACorC,EAAI9kC,GAAL,OAAWA,EAAI,KACd9B,KAAI,SAAC6mC,EAAQ7+B,GACd,OAAI3M,IAASwrC,EAEX,0BAAM9+B,IAAKC,GACV,4BAAK6+B,IAKP,uBAAG9+B,IAAKC,EAAOsjB,KAAMvf,EAAI,eAAW86B,IAClCA,MAIHxrC,IACD0U,KAAK42B,KACJiX,EAAKl6C,QACJ,SAAC0Y,GAAD,OACCA,EAAQvlB,OAAS8mD,GACD,QAAhBA,GACgB,OAAhBA,KACAniD,OAAS,IAEX,2CAEA,uBAAG8vB,KAAMvf,EAAI,eAAW1Q,EAAO,IAA/B,cAGC,MAEF,KAEJ,OACC,yBAAKixB,UAAU,aACd,kBAAC,EAAD,MACA,yBAAKA,UAAU,0BACbyiB,EACD,yBAAKziB,UAAU,gBACb0xB,EACAC,IAGH,kBAAC,EAAD,SCpJYC,I,OApHK,SAAC,GAAe,IAAbhoC,EAAY,EAAZA,MAChBjK,EAAUof,cAEL8yB,EACPjoC,EADHmb,OAAU8sB,cAEL7hD,EAAY6hD,EAAcpwC,MAAM,KAAK,GACrCqwC,EAAeD,EACnBpwC,MAAM,KACN9Q,MAAM,GACN+C,KAAI,SAAC6vC,GAAD,OACc,IAAlBA,EAAOr0C,OACJq0C,EAAOp5B,cACPo5B,EAAO,GAAGp5B,cAAgBo5B,EAAO5yC,MAAM,MAE1CxB,KAAK,KAd2B,EAeNwvB,oBAAS,GAfH,mBAe3BgH,EAf2B,KAenBC,EAfmB,OAgBIjH,mBAAS,IAhBb,mBAgB3BozB,EAhB2B,KAgBdC,EAhBc,OAiBErzB,oBAAS,GAjBX,mBAiB3BszB,EAjB2B,KAiBfC,EAjBe,KAmB5B75C,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,YACW,uCAAG,sBAAA7uB,EAAA,kEACtBo/C,EADsB,SACD7tB,uBAAa/4B,EAAS8oB,kBAAkBlkB,IADvC,kCAEtB41B,GAAU,GAFY,2CAAH,qDAIpBusB,KACE,CAACniD,IAEJ,IAAMyyC,EAAa9c,EAClB,yBAAK3F,UAAU,uBACd,uBACCA,UAAU,wBACVhB,KAAM5zB,EAASY,cAAc6F,oBAE7B,qDACA,yBAAKmuB,UAAU,qBAEhB,4BAAK8xB,GACL,0BAAM9xB,UAAU,uBAAhB,oBACC+xB,EAAYx1C,WADb,eAEO6M,YAAO2oC,EAAYp5C,KAAM,oBAE9B,KAEEy5C,EAAezsB,EACpB,yBAAK3F,UAAU,+BACd,uBACChB,KAAM5zB,EAASY,cAAciG,yBAAyBjC,IADvD,UAEK+hD,EAAY59B,MAAMjlB,OAFvB,YAIE,KAEEmjD,EAAwB1sB,EAC7B,yBAAK3F,UAAU,wCACd,yBAAKf,IAAK8yB,EAAYp0C,MAAOuhB,IAAK4yB,IACjCC,EAAYn0C,QAAQ6D,MAAM,OAAO/N,KAAI,SAAC4+C,EAAW52C,GACjD,OAAO,uBAAGD,IAAKC,GAAQ42C,OAGtB,KAEEC,EAAkB5sB,EACvB,yBAAK3F,UAAU,kCACbiyB,EACA,yBACCjyB,UAAU,kBACVf,IACC,q9DAEDC,IAAI,YAGL,4BACCO,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,6DACRs/C,GAAc,GADN,SAEF9mD,EAAS6oB,kBAAkB5b,EAAKrN,QAASgF,EAAW2P,GAFlD,OAGRuyC,GAAc,GACdF,GAAe,SAACtmC,GACf,OAAO,2BACHA,GADJ,IAECyI,MAAOzI,EAASyI,MAAMzf,SAAS2D,EAAKrN,SACjC0gB,EAASyI,MAAM/c,QAAO,SAACiB,GAAD,OAAUA,IAASA,EAAKrN,WAC9C0gB,EAASyI,MAAM9M,OAAOhP,EAAKrN,cATxB,2CAAF,uDAcN+mD,EAAY59B,MAAMzf,SAAS2D,EAAKrN,SAAW,SAAW,QAGzD,0BAAMg1B,UAAU,aAAhB,QACA,uBACChB,KAAM5zB,EAASY,cAAciG,yBAAyBjC,IADvD,UAEK+hD,EAAY59B,MAAMjlB,OAFvB,YAIE,KAEEmpC,EACL,yBAAKrY,UAAU,6BACbyiB,EACA2P,EACAC,EACAE,GAIH,OACC,yBAAKvyB,UAAU,gBACd,kBAAC,EAAD,MACCqY,EACD,kBAAC,EAAD,SCcYma,I,OA/HY,SAAC,GAAe,IAE/BxiD,EAF8B,EAAZ4Z,MAE5Bmb,OAAU/0B,UAF8B,EAIb2uB,oBAAS,GAJI,mBAIlCgH,EAJkC,KAI1BC,EAJ0B,OAKjBjH,mBAAS,GALQ,mBAKlC5vB,EALkC,KAK5BiqC,EAL4B,OAMfra,mBAAS,MANM,mBAMlC/xB,EANkC,KAM3B6lD,EAN2B,OAOf9zB,mBAAS,IAPM,mBAOlCpT,EAPkC,KAO3BmnC,EAP2B,KASzCjxB,qBAAU,YACa,uCAAG,sBAAA7uB,EAAA,kEACxB6/C,EADwB,SACTtuB,uBAAa/4B,EAASgpB,gBAAgBpkB,IAD7B,8CAExB0iD,EAFwB,SAETvuB,uBAAa/4B,EAASipB,wBAAwBrkB,IAFrC,kCAGxB41B,GAAU,GAHc,4CAAH,qDAKtB+sB,KACE,CAAC3iD,IAEJyxB,qBAAU,WACT7iB,QAAQC,IAAI0M,KACV,CAACA,IAEJ,IAAMk3B,EAAa9c,EAClB,wBAAI3F,UAAU,gCACb,uBAAGhB,KAAM5zB,EAASY,cAAc+D,oBAAoBC,EAAWpD,IAC7DA,GAEF,8BAAO,eAEL,KAEEgmD,EAAWjtB,EAChB,yBAAK3F,UAAU,mCACd,0BAAMA,UAAU,wBAAhB,kBACc,KAAZjxB,EAAO,GAAW,EADpB,YAGCA,IAAS0U,KAAK42B,KAAK9uB,EAAMrc,OAAS,KAAOqc,EAAMrc,OAAgB,IAAPH,EAHzD,eAIOwc,EAAMrc,SACb,yBAAK8wB,UAAU,QACbzU,EACCnU,QACA,SAACy7C,EAAIn3C,GAAL,OAAeA,GAAsB,KAAZ3M,EAAO,IAAY2M,GAAgB,IAAP3M,KAErD2E,KAAI,SAAC2E,EAAMqD,GACX,OACC,yBAAKskB,UAAU,YAAYvkB,IAAKC,GAC/B,uBACCskB,UAAU,+BACVhB,KAAM5zB,EAASY,cAAcqC,iBAC5BgK,EAAKhF,GACLgF,EAAK7K,OAGN,yBACCyxB,SACyB9zB,IAAxBkN,EAAKmW,eACFnW,EAAKmW,eACL,6FAEJ0Q,IAAK7mB,EAAK7K,QAGZ,yBAAKwyB,UAAU,iBACd,uBACCA,UAAU,cACVhB,KAAM5zB,EAASY,cAAcqC,iBAC5BgK,EAAKhF,GACLgF,EAAK7K,OAGL6K,EAAK7K,MAEP,wCAAU6K,EAAKgT,cAAf,WACA,wCAAUhT,EAAK+S,gBAAf,mBAMLG,EAAMrc,OAAS,IACf,yBAAK8wB,UAAU,wBACd,4BACCP,QAAS,SAAC2L,GAAD,OAAQ4N,GAAQ,SAACttB,GAAD,OAAcA,EAAW,MAClD6hB,SAAmB,IAATx+B,GAFX,iBAMCw7B,MAAMC,KACN,CACCt7B,OAAQuU,KAAK42B,KAAK9uB,EAAMrc,OAAS,OAElC,SAACorC,EAAI9kC,GAAL,OAAWA,EAAI,KACd9B,KAAI,SAAC6mC,GACN,OACC,4BACCva,UAAU,qBACVvkB,IAAK8+B,EACL9a,QAAS,SAAC2L,GAAD,OAAQ4N,EAAQuB,IACzBhN,SAAUx+B,IAASwrC,GAElBxrC,IAASwrC,EAASA,EAAS,2BAAIA,OAInC,4BACC9a,QAAS,SAAC2L,GAAD,OAAQ4N,GAAQ,SAACttB,GAAD,OAAcA,EAAW,MAClD6hB,SAAUx+B,IAAS0U,KAAK42B,KAAK9uB,EAAMrc,OAAS,MAF7C,cAOE,MAEF,KAEJ,OACC,yBAAK8wB,UAAU,yBACd,kBAAC,EAAD,MACA,yBAAKA,UAAU,sCACbyiB,EACAmQ,GAEF,kBAAC,EAAD,S,UCqCYE,I,cAlKM,SAAChzB,GACrB,IAAMnQ,EAAclM,KAAKmnB,IACxB9K,EAAMppB,YACLopB,EAAMnpB,YACNmpB,EAAMlpB,aACNkpB,EAAMjpB,WACNipB,EAAMhpB,WACP,GAEK6zB,EAAqBlnB,KAAKmnB,IAC/B9K,EAAMppB,YACNopB,EAAMnpB,YACNmpB,EAAMlpB,aACNkpB,EAAMjpB,WACNipB,EAAMhpB,YAGP,OACC,yBAAKkpB,UAAU,iBACd,4BACCA,UAAU,4BACVP,QAAS,SAAC2L,GAAD,OAAQtL,EAAMizB,eAFxB,WAMA,2BAAO/yB,UAAU,uBAChB,+BACC,4BACC,wBAAI8L,MAAM,KAAK9L,UAAU,mBACxB,mCACA,yBAAKA,UAAU,4BAEhB,wBAAIA,UAAU,uBACb,yBACCA,UAAU,YACVkM,MAAO,CACNJ,MACiB,IAAhBnc,EACwB,IAApBmQ,EAAMppB,YAAqBi0B,EAC5B,MAIP,wBAAImB,MAAM,KAAK9L,UAAU,kCAAzB,UAEkB,IAAhBrQ,EACGlM,KAAKC,MAA2B,IAApBoc,EAAMppB,YAAqBiZ,GACvC,EAJL,cAKOmQ,EAAMppB,YALb,OAQD,4BACC,wBAAIo1B,MAAM,KAAK9L,UAAU,mBACxB,mCACA,yBAAKA,UAAU,4BAEhB,wBAAIA,UAAU,uBACb,yBACCA,UAAU,YACVkM,MAAO,CACNJ,MACiB,IAAhBnc,EACwB,IAApBmQ,EAAMnpB,YAAqBg0B,EAC5B,MAIP,wBAAImB,MAAM,KAAK9L,UAAU,kCAAzB,UAEkB,IAAhBrQ,EACGlM,KAAKC,MAA2B,IAApBoc,EAAMnpB,YAAqBgZ,GACvC,EAJL,cAKOmQ,EAAMnpB,YALb,OAQD,4BACC,wBAAIm1B,MAAM,KAAK9L,UAAU,mBACxB,mCACA,yBAAKA,UAAU,4BAEhB,wBAAIA,UAAU,uBACb,yBACCA,UAAU,YACVkM,MAAO,CACNJ,MACiB,IAAhBnc,EACyB,IAArBmQ,EAAMlpB,aAAsB+zB,EAC7B,MAIP,wBAAImB,MAAM,KAAK9L,UAAU,kCAAzB,UAEkB,IAAhBrQ,EACGlM,KAAKC,MAA4B,IAArBoc,EAAMlpB,aAAsB+Y,GACxC,EAJL,cAKOmQ,EAAMlpB,aALb,OAQD,4BACC,wBAAIk1B,MAAM,KAAK9L,UAAU,mBACxB,mCACA,yBAAKA,UAAU,4BAEhB,wBAAIA,UAAU,uBACb,yBACCA,UAAU,YACVkM,MAAO,CACNJ,MACiB,IAAhBnc,EACuB,IAAnBmQ,EAAMjpB,WAAoB8zB,EAC3B,MAIP,wBAAImB,MAAM,KAAK9L,UAAU,kCAAzB,UAEkB,IAAhBrQ,EACGlM,KAAKC,MAA0B,IAAnBoc,EAAMjpB,WAAoB8Y,GACtC,EAJL,cAKOmQ,EAAMlpB,aALb,OAQD,4BACC,wBAAIk1B,MAAM,KAAK9L,UAAU,mBACxB,mCACA,yBAAKA,UAAU,4BAEhB,wBAAIA,UAAU,uBACb,yBACCA,UAAU,YACVkM,MAAO,CACNJ,MACiB,IAAhBnc,EACuB,IAAnBmQ,EAAMhpB,WAAoB6zB,EAC3B,MAIP,wBAAImB,MAAM,KAAK9L,UAAU,kCAAzB,UAEkB,IAAhBrQ,EACGlM,KAAKC,MAA0B,IAAnBoc,EAAMhpB,WAAoB6Y,GACtC,EAJL,cAKOmQ,EAAMhpB,WALb,YCu3ESk8C,GA5/EE,SAAC,GAAe,IAErBC,EAFoB,EAAZrpC,MAElBmb,OAAUkuB,WAELtzC,EAAUof,cACVm0B,EAAezuB,cACf0uB,EAAevwB,mBACfwwB,EAAsBxwB,mBACtB70B,EAASklD,EAAWxxC,MAAM,KAAK,GAC/BzT,EACLilD,EAAWxxC,MAAM,KAAK,GAAGvS,OAAS,EAC/B+jD,EAAWxxC,MAAM,KAAK,GAAG,GAAG0I,cAC5B8oC,EAAWxxC,MAAM,KAAK,GAAG9Q,MAAM,GAC/BsiD,EAAWxxC,MAAM,KAAK,GAAG0I,cAbE,EAcHwU,oBAAS,GAdN,mBAcxBgH,EAdwB,KAchBC,EAdgB,OAeCjH,mBAAS,IAfV,mBAexB1zB,EAfwB,KAeds9C,EAfc,OAgBS5pB,oBAAS,GAhBlB,mBAgBxB00B,EAhBwB,KAgBVC,EAhBU,OAiBuB30B,oBAAS,GAjBhC,mBAiBxB40B,EAjBwB,KAiBHC,EAjBG,OAkBW70B,mBAAS,IAlBpB,mBAkBxBsY,EAlBwB,KAkBTC,EAlBS,OAmByBvY,mBAAS,IAnBlC,mBAmBxBwa,EAnBwB,KAmBFC,EAnBE,OAoBqCza,mBACnE,IArB8B,mBAoBxB0a,EApBwB,KAoBIC,EApBJ,OAuB+B3a,mBAAS,IAvBxC,mBAuBxB4a,EAvBwB,KAuBCC,EAvBD,OAwB6B7a,mBAAS,IAxBtC,mBAwBxB8a,GAxBwB,KAwBAC,GAxBA,QA4B3B/a,mBAAS,IA5BkB,qBA0B9B4Y,GA1B8B,MA2B9BC,GA3B8B,SA6Ba7Y,mBAAS,IA7BtB,qBA6BxB8Y,GA7BwB,MA6BRC,GA7BQ,SA8ByB/Y,mBAAS,IA9BlC,qBA8BxBgZ,GA9BwB,MA8BFC,GA9BE,SA+BejZ,mBAAS,IA/BxB,qBA+BxB6kB,GA/BwB,MA+BPC,GA/BO,SAgCyB9kB,oBAAS,GAhClC,qBAgCxB80B,GAhCwB,MAgCFC,GAhCE,SAiC+B/0B,oBAAS,GAjCxC,qBAiCxBg1B,GAjCwB,MAiCCC,GAjCD,SAkCuBj1B,mBAAS,IAlChC,qBAkCxBk1B,GAlCwB,MAkCHC,GAlCG,SAmCKn1B,mBAAS,IAnCd,qBAmCxBqvB,GAnCwB,MAmCZC,GAnCY,MAqCzB51C,GAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CmH,2BAAgB,WACfx2B,SAASwvB,iBAAiB,SAAS,SAACC,GAGP,OAAzB+vB,EAAaxnC,cACYxgB,IAAzBgoD,EAAaxnC,SACbwnC,EAAaxnC,QAAQ0X,SAASD,EAAM9D,SACJ,OAAhC8zB,EAAoBznC,cACYxgB,IAAhCioD,EAAoBznC,SACpBynC,EAAoBznC,QAAQ0X,SAASD,EAAM9D,SAG7Ck0B,GAAuB,SAK1B/xB,qBAAU,gBACkBt2B,IAAvB+nD,EAAazoD,OAAuByoD,EAAazoD,MAAMspD,aAC1D9F,GACC,gHAGA,CAACiF,EAAazoD,QAEjBg3B,qBAAU,YACQ,uCAAG,8BAAA7uB,EAAA,sEACUuxB,uBAC5B/4B,EAASkpB,uBAAuBvmB,EAAQsK,GAAKrN,UAF3B,QACbgpD,EADa,QAIJ39B,cAAe,EAC9BkyB,EAAYyL,GACZpuB,GAAU,GACJquB,EACLD,EAAep9B,sBAAsB1nB,OACrC8kD,EAAen9B,cAAczf,QAC5B,SAACsP,GAAD,MACiB,qBAAhBA,EAAOnc,MACS,kBAAhBmc,EAAOnc,MACS,qBAAhBmc,EAAOnc,MACS,cAAhBmc,EAAOnc,QACP2E,OACHgoC,EAAiB3M,MAAM0pB,GAA8BhoB,MAAK,IAC1DmN,EAAwB7O,MAAM0pB,GAA8BhoB,MAAK,IACjEqN,EACC/O,MAAM0pB,GAA8BhoB,MAAK,IAE1CuN,EAA2BjP,MAAM0pB,GAA8BhoB,KAAK,KACpEyN,GAA0BnP,MAAM0pB,GAA8BhoB,KAAK,KACnEuL,GACCjN,MAAM0pB,GAA8BhoB,MAAK,IAE1CyL,GAAkBnN,MAAM0pB,GAA8BhoB,KAAK,KAC3D2L,GACCoc,EAAep9B,sBACbljB,KAAI,SAACsI,GAAD,YAA+B7Q,IAApB6Q,EAAK7F,WAA2B,EAAI6F,EAAK7F,cACxDkR,OACA2sC,EAAen9B,cACbzf,QACA,SAACsP,GAAD,MACiB,qBAAhBA,EAAOnc,MACS,kBAAhBmc,EAAOnc,MACS,qBAAhBmc,EAAOnc,MACS,cAAhBmc,EAAOnc,MACS,mBAAhBmc,EAAOnc,QAERmJ,KAAI,SAACgT,GAAD,YAC2Bvb,IAA/Bub,EAAOqP,SAAS5f,WACb,EACAuQ,EAAOqP,SAAS5f,gBAIxB29C,GACCvpB,MAAMypB,EAAen9B,cAAc3nB,QAAQ+8B,MAAK,IAhD9B,4CAAH,qDAmDjBuc,KACE,CAACnwC,GAAKrN,QAAS+C,IAElB,IAAMgvB,GAAW4I,OACIx6B,IAAlBF,EAASwX,MACS,KAAlBxX,EAASwX,WACsBtX,IAA/BF,EAAS8Y,mBACsB,KAA/B9Y,EAAS8Y,wBACY5Y,IAArBF,EAASyX,SACY,KAArBzX,EAASyX,QALT,UAMIzX,EAASwX,KANb,aAMsBxX,EAAS8Y,kBAN/B,aAMqD9Y,EAASyX,cAC3CvX,IAAlBF,EAASwX,MACS,KAAlBxX,EAASwX,WACsBtX,IAA/BF,EAAS8Y,mBACsB,KAA/B9Y,EAAS8Y,kBAHT,UAIG9Y,EAASwX,KAJZ,aAIqBxX,EAAS8Y,wBACZ5Y,IAAlBF,EAASwX,MACS,KAAlBxX,EAASwX,WACYtX,IAArBF,EAASyX,SACY,KAArBzX,EAASyX,QAHT,UAIGzX,EAASwX,KAJZ,aAIqBxX,EAASyX,cACCvX,IAA/BF,EAAS8Y,mBACsB,KAA/B9Y,EAAS8Y,wBACY5Y,IAArBF,EAASyX,SACY,KAArBzX,EAASyX,QAHT,UAIGzX,EAAS8Y,kBAJZ,aAIkC9Y,EAASyX,cACzBvX,IAAlBF,EAASwX,MAAwC,KAAlBxX,EAASwX,KACxCxX,EAASwX,UACsBtX,IAA/BF,EAAS8Y,mBACsB,KAA/B9Y,EAAS8Y,kBACT9Y,EAAS8Y,uBACY5Y,IAArBF,EAASyX,SAA8C,KAArBzX,EAASyX,QAC3CzX,EAASyX,QACT,GACD,GACGwxC,GAAiBnmD,IAAWsK,GAAKrN,QACjCmpD,GACLxuB,IACCuuB,IACmC,WAAnCjpD,EAASkrB,uBAC2B,sBAAnClrB,EAASkrB,uBACQ,OAAjB9d,GAAKrN,cACYG,IAAjBkN,GAAKrN,SAC8B,oBAAnCC,EAASkrB,uBACTlrB,EAASorB,cACN+9B,GACLzuB,GACsB,KAAtB16B,EAASwN,eACatN,IAAtBF,EAASwN,WACoB,WAA5BxN,EAAS6Y,gBACoB,YAA5B7Y,EAAS6Y,gBAAgC7Y,EAASorB,cAC/Cg+B,GACL1uB,GACoB,KAApB16B,EAASkY,SACkB,aAA1BlY,EAAS4Y,cACkB,eAA1B5Y,EAAS4Y,cAAiC5Y,EAASorB,cAChDi+B,GACL3uB,GACa,KAAb5I,KACiC,aAAhC9xB,EAASoY,oBACwB,eAAhCpY,EAASoY,oBAAuCpY,EAASorB,cACtDk+B,GACL5uB,QACsBx6B,IAAtBF,EAASsrB,WACP,CACD,+BACA,8BACA,gCACC7hB,SAASzJ,EAASuX,wBACF,OAAjBnK,GAAKrN,cACYG,IAAjBkN,GAAKrN,SACJ,CAAC,+BAAgC,+BAA+B0J,SAChEzJ,EAASuX,wBAETvX,EAASorB,cACNm+B,GACL7uB,QACsBx6B,IAAtBF,EAASsrB,WACP,CAAC,+BAAgC,+BAA+B7hB,SACjEzJ,EAASuX,wBAEQ,OAAjBnK,GAAKrN,cACYG,IAAjBkN,GAAKrN,SACJ,CACA,+BACA,+BACA,+BACC0J,SAASzJ,EAASuX,wBACnBvX,EAASorB,cAENo+B,GACL9uB,QAAgCx6B,IAAtBF,EAASsrB,SAChBm+B,aAAkB,IAAI1yC,KAAQ/W,EAASsrB,UACvC,EAEEk6B,GAAwB,SAAClN,GAC9B,OAAOA,EACL9hC,MAAM,KACN/N,KAAI,SAACy8C,GAAD,OACS,IAAbA,EAAEjhD,OAAeihD,EAAEhmC,cAAgBgmC,EAAE,GAAGhmC,cAAgBgmC,EAAEx/C,MAAM,MAEhExB,KAAK,MASF07B,GAAmB,SAACqN,EAAYx8B,GAL9BovB,OAAOC,QACb,+FAMA3/B,EAASmb,oBAAoBlO,GAAKrN,QAASktC,EAAW7kC,IACtDk1C,GAAY,SAAC78B,GACZ,OAAO,2BACHA,GADJ,IAECkL,sBACClb,GAASgQ,EAASkL,sBAAsB1nB,OACrCwc,EAASkL,sBACTlL,EAASkL,sBAAsBljB,KAAI,SAACsI,EAAMxG,GAC1C,OAAIA,IAAMkG,EACF,2BACHM,GADJ,IAEClG,gBAAY3K,EACZ8K,kBAAc9K,EACdgL,gBAAYhL,IAGP6Q,KAEX6a,cACCnb,EAAQgQ,EAASkL,sBAAsB1nB,OACpCwc,EAASmL,cACTnL,EAASmL,cAAcnjB,KAAI,SAACgT,EAAQlR,GACpC,OACEkR,EAAOnc,KAAKmK,SAAS,aACN,cAAhBgS,EAAOnc,MACS,mBAAhBmc,EAAOnc,OAKNmhB,EAASmL,cACPzf,QACA,SAACu9C,GAAD,MACuB,cAAtBA,EAAapqD,MACboqD,EAAapqD,KAAKmK,SAAS,aACL,mBAAtBigD,EAAapqD,QAEduN,QAAQ4O,GACTgF,EAASkL,sBAAsB1nB,SAChCwM,EAEO,2BACHgL,GADJ,IAECqP,SAAS,2BACLrP,EAAOqP,UADH,IAEPjgB,gBAAY3K,EACZ8K,kBAAc9K,EACdgL,gBAAYhL,MApBRub,YAgCVskB,GAAe,uCAAG,WAAOkN,EAAYx8B,EAAO4K,GAA1B,SAAA1T,EAAA,8DACDzH,IAAlB+sC,EAAW7kC,GADQ,uBAEtB6jC,GAAiB,SAACxrB,GAAD,OAChBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,QAH5B,SAKhB/zB,EAAS4a,eACd3N,GAAKrN,QACLktC,EAAW7kC,GACXiT,EACA3G,GATqB,OAWtB4oC,GAAY,SAAC78B,GACZ,OAAO,2BACHA,GADJ,IAECkL,sBACClb,GAASgQ,EAASkL,sBAAsB1nB,OACrCwc,EAASkL,sBACTlL,EAASkL,sBAAsBljB,KAAI,SAACsI,EAAMxG,GAC1C,OAAIA,IAAMkG,EACF,2BACHM,GADJ,IAEClG,WAAYwQ,IAGPtK,KAEX6a,cACCnb,EAAQgQ,EAASkL,sBAAsB1nB,OACpCwc,EAASmL,cACTnL,EAASmL,cAAcnjB,KAAI,SAACgT,EAAQlR,GACpC,OACEkR,EAAOnc,KAAKmK,SAAS,aACN,cAAhBgS,EAAOnc,MACS,mBAAhBmc,EAAOnc,OAKNmhB,EAASmL,cACPzf,QACA,SAACu9C,GAAD,MACuB,cAAtBA,EAAapqD,MACboqD,EAAapqD,KAAKmK,SAAS,aACL,mBAAtBigD,EAAapqD,QAEduN,QAAQ4O,GACTgF,EAASkL,sBAAsB1nB,SAChCwM,EAEO,2BACHgL,GADJ,IAECqP,SAAS,2BACLrP,EAAOqP,UADH,IAEPjgB,WAAYwQ,MAlBRI,UA2BdwwB,GAAiB,SAACxrB,GAAD,OAChBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAgByjB,QA/D7B,2CAAH,0DAoEf1Y,GAAQ,uCAAG,WAAOyxB,EAAYx8B,EAAOxF,GAA1B,SAAAtD,EAAA,8DACMzH,IAAlB+sC,EAAW7kC,GADC,gCAETjI,EAASqb,SAASpO,GAAKrN,QAASktC,EAAW7kC,GAAI6C,EAAQyJ,GAF9C,OAGf4oC,GAAY,SAAC78B,EAAUlW,GACtB,OAAO,2BACHkW,GADJ,IAECkL,sBACClb,GAASgQ,EAASkL,sBAAsB1nB,OACrCwc,EAASkL,sBACTlL,EAASkL,sBAAsBljB,KAAI,SAACsI,EAAMxG,GAC1C,OAAIA,IAAMkG,EACF,2BACHM,GADJ,IAEClG,gBACqB3K,IAApB6Q,EAAKlG,WACF,OACAkG,EAAKlG,WACTK,WAAYD,IAGP8F,KAEX6a,cACCnb,EAAQgQ,EAASkL,sBAAsB1nB,OACpCwc,EAASmL,cACTnL,EAASmL,cAAcnjB,KAAI,SAACgT,EAAQlR,GACpC,OACEkR,EAAOnc,KAAKmK,SAAS,aACN,cAAhBgS,EAAOnc,MACS,mBAAhBmc,EAAOnc,OAKNmhB,EAASmL,cACPzf,QACA,SAACu9C,GAAD,MACuB,cAAtBA,EAAapqD,MACboqD,EAAapqD,KAAKmK,SAAS,aACL,mBAAtBigD,EAAapqD,QAEduN,QAAQ4O,GACTgF,EAASkL,sBAAsB1nB,SAChCwM,EAEO,2BACHgL,GADJ,IAECqP,SAAS,2BACLrP,EAAOqP,UADH,IAEPjgB,gBACgC3K,IAA/Bub,EAAOqP,SAASjgB,WACb,OACA4Q,EAAOqP,SAASjgB,WACpBK,WAAYD,MAtBRwQ,UA/BC,2CAAH,0DAiERukB,GAAc,uCAAG,WAAOiN,EAAYx8B,EAAOwvB,GAA1B,SAAAt4B,EAAA,2DAEJ,OAAjByF,GAAKrN,cACYG,IAAjBkN,GAAKrN,cACaG,IAAlB+sC,EAAW7kC,IACX63B,EAAMh8B,OAAS,GALM,gCAOf9D,EAASwb,kBACdvO,GAAKrN,QACLktC,EAAW7kC,GACX0W,SAASmhB,IAVW,OAYrBqd,GAAY,SAAC78B,GACZ,OAAO,2BACHA,GADJ,IAECkL,sBACClb,GAASgQ,EAASkL,sBAAsB1nB,OACrCwc,EAASkL,sBACTlL,EAASkL,sBAAsBljB,KAAI,SAACsI,EAAMxG,GAC1C,OAAIA,IAAMkG,EACF,2BACHM,GADJ,IAEC/F,aAAci1B,IAGTlvB,KAEX6a,cACCnb,EAAQgQ,EAASkL,sBAAsB1nB,OACpCwc,EAASmL,cACTnL,EAASmL,cAAcnjB,KAAI,SAACgT,EAAQlR,GACpC,OACEkR,EAAOnc,KAAKmK,SAAS,aACN,cAAhBgS,EAAOnc,MACS,mBAAhBmc,EAAOnc,OAKNmhB,EAASmL,cACPzf,QACA,SAACu9C,GAAD,MACuB,cAAtBA,EAAapqD,MACboqD,EAAapqD,KAAKmK,SAAS,aACL,mBAAtBigD,EAAapqD,QAEduN,QAAQ4O,GACTgF,EAASkL,sBAAsB1nB,SAChCwM,EAEO,2BACHgL,GADJ,IAECqP,SAAS,2BACLrP,EAAOqP,UADH,IAEP9f,aAAci1B,MAlBVxkB,UApCO,2CAAH,0DAkEdyxB,GAA2B,SAACD,EAAYx8B,GAC7C,OAAOiqB,GAAoC,YAA1BuS,EAAWpiC,WAC3B,yBAAKkqB,UAAU,yBACd,yBACCA,UACCmZ,EAAqBz9B,GAClB,uBACA,uCAGJ,yBAAKskB,UAAU,wBACd,yBAAKA,UAAU,oBACd,8BACC,6DAED,4CACa,IACZ,2BACCz1B,KAAK,OACL40B,MAAOoa,EAAwB79B,GAC/BskB,UACCqZ,EAA2B39B,GACxB,sBACA,uCAEJ+jB,QAAS,SAAC2L,GACTkO,GAA8B,SAAC5tB,GAAD,OAC7BA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAgByjB,QAEnDia,GAAwB,SAAC1tB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAgByjB,SAGpDC,SAAU,SAACC,GACV,IAAMoQ,EAAWpQ,EAAEC,OAAOH,MAC1Bqa,GAA2B,SAAC9tB,GAAD,OAC1BA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OACZA,IAAMkG,EAAQ+zB,EAAWtQ,WAI1B,IA1BJ,MA2BK+Y,EAAWv+B,UA3BhB,IA2B4B,IAC3B,uBACCqlB,UACkB7zB,IAAjBkN,GAAKrN,SAA0C,OAAjBqN,GAAKrN,QAChCI,EAASY,cAAc0C,sBACvB2J,GAAKrN,QACLqN,GAAKpN,SAAS+C,UACd,CAAC,YAED,iBARL,gBAeF,yBACCgyB,UACCqZ,EAA2B39B,GACxB,6BACA,uBAGJ,4BACCskB,UAAU,yBACVP,QAAS,SAAC2L,GACTH,GACCiN,EACAx8B,EACA69B,EAAwB79B,IAEzB49B,GAA8B,SAAC5tB,GAAD,OAC7BA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,QAElDia,GAAwB,SAAC1tB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,UAZpD,UAkBA,4BACCa,UAAU,yBACVP,QAAS,SAAC2L,GACTkO,GAA8B,SAAC5tB,GAAD,OAC7BA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,QAElDia,GAAwB,SAAC1tB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,UAPpD,UAaA,sCACA,4BACCa,UAAU,2BACVP,QAAS,SAAC2L,GACTJ,GAAgBkN,EAAYx8B,EAAO,QACnC49B,GAA8B,SAAC5tB,GAAD,OAC7BA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,QAElDia,GAAwB,SAAC1tB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,UARpD,mBAgBF,yBAAKa,UAAU,2BACd,yBAAKA,UAAU,yBAGjB,4BACCA,UAAU,iCACVP,QAAS,SAAC2L,GAAD,OAAQP,GAAiBqN,EAAYx8B,MAE/C,oDAEEiqB,GAAoC,SAA1BuS,EAAWpiC,WACxB,yBAAKkqB,UAAU,sBACd,yBAAKA,UAAU,wBACd,yBAAKA,UAAU,qBACd,yBAAKA,UAAU,oBACd,uBACChB,KAAM5zB,EAASY,cAAciF,+BAC5BinC,EAAW7kC,KAFb,kBAOA,sCACA,uBACC2rB,UACkB7zB,IAAjBkN,GAAKrN,SAA0C,OAAjBqN,GAAKrN,QAChCI,EAASY,cAAc0C,sBACvB2J,GAAKrN,QACLqN,GAAKpN,SAAS+C,UACd,CAAC,YAED,iBARL,gBAeF,yBAAKgyB,UAAU,2BACd,yBAAKA,UAAU,yBAGjB,4BACCA,UAAU,8BACVP,QAAS,SAAC2L,GAAD,OAAQP,GAAiBqN,EAAYx8B,MAE/C,uCAEEiqB,GAAoC,YAA1BuS,EAAWpiC,WACxB,yBAAKkqB,UAAU,yBACd,yBACCA,UACCmZ,EAAqBz9B,GAClB,uBACA,uCAGJ,yBAAKskB,UAAU,wBACd,yBAAKA,UAAU,oBACd,kCAEC,2BACCz1B,KAAK,OACL40B,MAAOsa,GAAuB/9B,GAC9BskB,UAAU,6BACVZ,SAAU,SAACC,GACV,IAAMoQ,EAAWpQ,EAAEC,OAAOH,MAC1Bua,IAA0B,SAAChuB,GAAD,OACzBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OACZA,IAAMkG,EAAQ+zB,EAAWtQ,SAI5BM,QAAS,SAAC2L,GACTkO,GAA8B,SAAC5tB,GAAD,OAC7BA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAgByjB,QAEnDia,GAAwB,SAAC1tB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAgByjB,WAGlD,IAtBJ,WAuBS,sCAvBT,YA0BAka,EAA2B39B,GAC3B,yBAAKskB,UAAU,uBACd,uBACChB,UACkB7zB,IAAjBkN,GAAKrN,SAA0C,OAAjBqN,GAAKrN,QAChCI,EAASY,cAAc0C,sBACvB2J,GAAKrN,QACLqN,GAAKpN,SAAS+C,UACd,CAAC,YAED,iBARL,eAeD,yBAAKgyB,UAAU,uBACd,4BACCA,UAAU,yBACVP,QAAS,SAAC2L,GACThgC,EAAS8a,mBACR7N,GAAKrN,QACLktC,EAAW7kC,GACX0W,SAAS0vB,GAAuB/9B,KAEjC6sC,GAAY,SAAC78B,GACZ,OAAO,2BACHA,GADJ,IAECkL,sBACClb,GAASgQ,EAASkL,sBAAsB1nB,OACrCwc,EAASkL,sBACTlL,EAASkL,sBAAsBljB,KAAI,SAACsI,EAAMxG,GAC1C,OAAIA,IAAMkG,EACF,2BACHM,GADJ,IAECiZ,mBAAoBlL,SACnB0vB,GAAuB/9B,MAInBM,KAEX6a,cACCnb,EAAQgQ,EAASkL,sBAAsB1nB,OACpCwc,EAASmL,cACTnL,EAASmL,cAAcnjB,KAAI,SAACgT,EAAQlR,GACpC,OACEkR,EAAOnc,KAAKmK,SAAS,aACN,cAAhBgS,EAAOnc,MACS,mBAAhBmc,EAAOnc,OAKNmhB,EAASmL,cACPzf,QACA,SAACu9C,GAAD,MACuB,cAAtBA,EAAapqD,MACboqD,EAAapqD,KAAKmK,SACjB,aAEqB,mBAAtBigD,EAAapqD,QAEduN,QAAQ4O,GACTgF,EAASkL,sBAAsB1nB,SAChCwM,EAEO,2BACHgL,GADJ,IAECqP,SAAS,2BACLrP,EAAOqP,UADH,IAEPd,mBAAoBlL,SACnB0vB,GAAuB/9B,QArBpBgL,UA+Bd4yB,GAA8B,SAAC5tB,GAAD,OAC7BA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,QAElDia,GAAwB,SAAC1tB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,UArEpD,QA2EA,4BACCa,UAAU,yBACVP,QAAS,SAAC2L,GACTkO,GAA8B,SAAC5tB,GAAD,OAC7BA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,QAElDia,GAAwB,SAAC1tB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,UAPpD,YAgBH,yBAAKa,UAAU,2BACd,yBAAKA,UAAU,yBAGjB,4BACCA,UAAU,iCACVP,QAAS,SAAC2L,GAAD,OAAQP,GAAiBqN,EAAYx8B,MAE/C,+CAGD,4BACCskB,UAAU,gCACVP,QAAS,kBAAMuL,GAAgBkN,EAAYx8B,EAAO,aAEjDu7B,EAAcv7B,GAAS,YAAc,iBAKnC08B,GAA8B,SAACF,EAAYx8B,GAChD,OACC,yBAAKskB,UAAU,0CACd,yBAAKA,UAAU,yBACd,yBAAKA,UAAU,6BACd,4BACCA,UAAU,uBACVP,QAAS,kBAAMuL,GAAgBkN,EAAYx8B,EAAO,UAFnD,QAMA,4BACCskB,UAAU,oCACVP,QAAS,kBAAMuL,GAAgBkN,EAAYx8B,EAAO,aAFnD,qBAMA,4BACCskB,UAAU,+BACVP,QAAS,kBAAMuL,GAAgBkN,EAAYx8B,EAAO,aAFnD,iBAOD,yBAAKskB,UAAU,gCACd,4BACCA,UAAU,qBACVP,QAAS,SAAC2L,GAAD,OACRoM,IAAkC,SAAC9rB,GAAD,OACjCA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAgByjB,UAJrD,aAUA,yBACCa,UACCuX,GAA+B77B,GAC5B,0CACA,oCAGJ,2BACCskB,UAAU,2BACVz1B,KAAK,OACL40B,WAC2Bh0B,IAA1BssC,GAAe/7B,GACZ+7B,GAAe/7B,GACf,GAEJ0jB,SAAU,SAACC,GACV,IAAMoQ,EAAWpQ,EAAEC,OAAOH,MAC1BuY,IAAkB,SAAChsB,GAAD,OACjBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,EAAQ+zB,EAAWtQ,WAIxD,4BACCa,UAAU,gCACVP,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,2DACJ6kC,GAAe/7B,GAAOxM,OAAS,GAD3B,gCAED9D,EAAS+b,mBACd9O,GAAKrN,QACLktC,EAAWxlC,SACX+kC,GAAe/7B,GACf,KACAiE,GAPM,OASP63B,IAAkC,SAAC9rB,GAAD,OACjCA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,GAAeyjB,QAV3C,2CAAF,uDAFR,YA0BA8a,GAA0B,SAAC/B,EAAYx8B,GAC5C,OACC,yBAAKskB,UAAU,4BACa70B,IAA1B+sC,EAAW/hC,WAA2B,KACtC,4BACC6pB,UAAU,sBACVP,QAAS,kBAAMhZ,GAASyxB,EAAYx8B,OAAOvQ,KAF5C,qBAO0BA,IAA1B+sC,EAAW/hC,WACX,0BAAM6pB,UAAU,kBAAhB,kBAEA,0BAAMA,UAAU,4BAAhB,cAED,yBAAKA,UAAU,mCACd,yBACCA,UACC2X,GAAqBj8B,GAAS,EAC3B,4BACA,yBAEJ9O,MAAM,kBACN2+B,YAAa,SAACH,GAAD,OACZwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,EAAQ,EAAIyjB,SAGhDqM,aAAc,SAACJ,GAAD,OACbwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OACZA,IAAMkG,QAAmCvQ,IAA1B+sC,EAAW/hC,WACvB+hC,EAAW/hC,WACXX,IAAMkG,EACN,EACAyjB,SAINM,QAAS,kBAAMhZ,GAASyxB,EAAYx8B,EAAO,MAE5C,yBACCskB,UACC2X,GAAqBj8B,GAAS,EAC3B,4BACA,yBAEJ9O,MAAM,YACN2+B,YAAa,SAACH,GAAD,OACZwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,EAAQ,EAAIyjB,SAGhDqM,aAAc,SAACJ,GAAD,OACbwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OACZA,IAAMkG,QAAmCvQ,IAA1B+sC,EAAW/hC,WACvB+hC,EAAW/hC,WACXX,IAAMkG,EACN,EACAyjB,SAINM,QAAS,kBAAMhZ,GAASyxB,EAAYx8B,EAAO,MAE5C,yBACCskB,UACC2X,GAAqBj8B,GAAS,EAC3B,4BACA,yBAEJ9O,MAAM,WACN2+B,YAAa,SAACH,GAAD,OACZwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,EAAQ,EAAIyjB,SAGhDqM,aAAc,SAACJ,GAAD,OACbwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OACZA,IAAMkG,QAAmCvQ,IAA1B+sC,EAAW/hC,WACvB+hC,EAAW/hC,WACXX,IAAMkG,EACN,EACAyjB,SAINM,QAAS,kBAAMhZ,GAASyxB,EAAYx8B,EAAO,MAE5C,yBACCskB,UACC2X,GAAqBj8B,GAAS,EAC3B,4BACA,yBAEJ9O,MAAM,kBACN2+B,YAAa,SAACH,GAAD,OACZwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,EAAQ,EAAIyjB,SAGhDqM,aAAc,SAACJ,GAAD,OACbwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OACZA,IAAMkG,QAAmCvQ,IAA1B+sC,EAAW/hC,WACvB+hC,EAAW/hC,WACXX,IAAMkG,EACN,EACAyjB,SAINM,QAAS,kBAAMhZ,GAASyxB,EAAYx8B,EAAO,MAE5C,yBACCskB,UACC2X,GAAqBj8B,GAAS,EAC3B,4BACA,yBAEJ9O,MAAM,iBACN2+B,YAAa,SAACH,GAAD,OACZwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OAAeA,IAAMkG,EAAQ,EAAIyjB,SAGhDqM,aAAc,SAACJ,GAAD,OACbwM,IAAwB,SAAClsB,GAAD,OACvBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GAAR,OACZA,IAAMkG,QAAmCvQ,IAA1B+sC,EAAW/hC,WACvB+hC,EAAW/hC,WACXX,IAAMkG,EACN,EACAyjB,SAINM,QAAS,kBAAMhZ,GAASyxB,EAAYx8B,EAAO,SAO1Ck5C,GACLjvB,GAAUqoB,GAAW9+C,OAAS,EAC7B,yBAAK8wB,UAAU,0BACd,8BAAOguB,IACP,4BACChuB,UAAU,eACVP,QAAS,SAAC2L,GAAD,OAAQ6iB,GAAc,QAG9B,KAEC4G,GAAelvB,EACpB,yBAAK3F,UAAU,0BACd,yBAAKA,UAAU,qBACe70B,IAA5BF,EAASujB,eACT,uBACCwR,UAAU,eACVhB,KAAM5zB,EAASY,cAAcsC,sBAAsBP,IAEnD,yBAAKkxB,IAAKh0B,EAASujB,eAAgB0Q,IAAKlxB,KAGzC,yBACCixB,IACC,6FAEDC,IAAKlxB,IAGP,0BAAMgyB,UAAU,iBACf,uBACChB,KAAM5zB,EAASY,cAAcwC,wBAAwBT,IADtD,UAEK9C,EAASiiB,gBAFd,aAGA,4BACC8S,UAAU,2BACVP,QAAS,SAAC2L,GAAD,OAAQwoB,IAA2B,KAF7C,WAGM3oD,EAASmiB,cAAcsd,QAAQ,GAHrC,UAIA,yBACC1K,UACC2zB,GACG,6BACA,sBAGJ,kBAAC,GAAD,CACCj9C,YAAazL,EAASyL,YACtBC,YAAa1L,EAAS0L,YACtBC,aAAc3L,EAAS2L,aACvBC,WAAY5L,EAAS4L,WACrBC,WAAY7L,EAAS6L,WACrBi8C,WAAY,kBAAMa,IAA2B,QAIhD,uBACC5zB,UAAU,sBACVhB,KAAM5zB,EAASY,cAAcyC,wBAAwBV,IAFtD,UAGK9C,EAASwiB,gBAHd,cAKD,yBAAKuS,UAAU,iBACd,4BACEo0B,GAAepmD,EAAY,IAAM/C,EAASwN,SAAWzK,EACrDkmD,GACA,uBAAGl1B,KAAM5zB,EAASY,cAAcyF,+BAAhC,kBAGG,MAEH4hD,GAAiBa,GAsIfb,EACH,yBAAKhgD,GAAG,kBACP,8BACA,8BACA,8BACA,+BAEE,KA5IH,yBAAK2sB,UAAU,0BACZ/0B,EAASorB,aAuDP,KAtDH,4BACC2J,UACC/0B,EAASmrB,iBACN,0BACA,gBAEJmV,YAAa,SAACH,GACTngC,EAASmrB,mBACMziB,SAAS8+B,cAC1B,8BAES/D,UAAY,aAGxBC,WAAY,SAACvD,GACZ,GAAIngC,EAASmrB,iBAAkB,CAC9B,IAAM0+B,EAAYnhD,SAASohD,cAAc,OACzCD,EAAU5mB,UAAU7nB,IAAI,uBACxB,IAAM2uC,EAAOrhD,SAASohD,cAAc,QACpCC,EAAKtmB,UAAY,YACjB,IAAMumB,EAAYthD,SAAS8+B,cAC1B,8BAEDwiB,EAAUvmB,UAAY,GACtBumB,EAAUC,YAAYJ,GACtBG,EAAUC,YAAYF,KAGxBv1B,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,0DACJ3H,EAASmrB,iBADL,gBAEPs9B,IAAwB,GAFjB,6BAIPJ,GAAgB,GAJT,SAKDloD,EAAS4rB,WAAW3e,GAAKrN,QAAS+C,EAAQ4R,GALzC,OAMP2zC,GAAgB,GAChB/K,GAAY,SAAC78B,GACZ,OAAO,2BACHA,GADJ,IAEC0K,kBAAkB,EAClBzF,kBAAmBjF,EAASiF,kBAAoB,OAX3C,2CAAF,uDAiBN1lB,EAASmrB,iBACT,0BAAM4J,UAAU,yBACf,yBAAKA,UAAU,wBACf,4CAGD,yCAIH,uBACCA,UACC/0B,EAASkqD,gCACN,0BACA,kBAEJ5nB,SAAUtiC,EAASkqD,gCACnBn2B,KAAM5zB,EAASY,cAAckG,wBAAwBnE,GACrDw9B,YAAa,SAACH,GACTngC,EAASorB,eACM1iB,SAAS8+B,cAC1B,+BAES/D,UAAY,aAGxBC,WAAY,SAACvD,GACZ,GAAIngC,EAASorB,aAAc,CAC1B,IAAMy+B,EAAYnhD,SAASohD,cAAc,OACzCD,EAAU5mB,UAAU7nB,IAAI,uBACxB,IAAM2uC,EAAOrhD,SAASohD,cAAc,QACpCC,EAAKtmB,UAAY,UACjB,IAAMumB,EAAYthD,SAAS8+B,cAC1B,+BAEDwiB,EAAUvmB,UAAY,GACtBumB,EAAUC,YAAYJ,GACtBG,EAAUC,YAAYF,KAGxBv1B,QAAS,SAACJ,GACLp0B,EAASorB,eACZgJ,EAAEK,iBACFg0B,IAAwB,MAIzBzoD,EAASorB,aACT,0BAAM2J,UAAU,0BACf,yBAAKA,UAAU,wBACf,0CAEE/0B,EAASkqD,gCACZ,0BAAMn1B,UAAU,gBAAhB,WAEA,6CAGF,4BACCyD,IAAK2vB,EACLpzB,UAAU,wBACVP,QAAS,SAAC2L,GAAD,OAAQooB,GAAuB,SAAC9nC,GAAD,OAAeA,OAEvD,sCACA,yBAAKsU,UAAU,oBACf,yBACCyD,IAAK0vB,EACLnzB,UACCuzB,EAAsB,gBAAkB,wBAGzC,4BACC,4BACC,uBACCvzB,UAAU,kBACVhB,KAAM5zB,EAASY,cAAckF,6BAC5BnD,IAHF,sBAqBN,2BAAOiyB,UAAU,aAChB,+BACC,4BACC,uCACCq0B,IAAcC,IAAgBC,GAC9B,4BACEA,IAAWF,IAAcC,GAAzB,cACSG,GADT,aAEExpD,EAASkY,OAAO,GAAGgH,cACnBlf,EAASkY,OAAOxS,MAAM,GAHxB,aAIOosB,IACLw3B,IAAWF,GAAX,cACOI,GADP,aAEAxpD,EAASkY,OAAO,GAAGgH,cACnBlf,EAASkY,OAAOxS,MAAM,IAEtB4jD,IAAWD,GAAX,cACOG,GADP,aACmB13B,IACnBw3B,GAAO,cACAE,IACPJ,IAAcC,GAAd,UAEArpD,EAASkY,OAAO,GAAGgH,cACnBlf,EAASkY,OAAOxS,MAAM,GAHtB,aAIKosB,IACLs3B,GACAppD,EAASkY,OAAO,GAAGgH,cACnBlf,EAASkY,OAAOxS,MAAM,GACtBosB,IAGJ,sCAAQ/uB,EAAR,mCAGDwmD,GACA,4BACC,wCACA,4BAAKprC,YAAOne,EAASsrB,SAAU,mBAE7B,UACkBprB,IAArBF,EAASmZ,SAAyBnZ,EAASmZ,QAAQlV,OAAS,EAC5D,4BACC,uCACA,4BACC,uBAAG8vB,KAAM/zB,EAASmZ,SAAUnZ,EAASmZ,WAGpC,KACJ,4BACC,wCACA,gDAAkBgF,YACjBne,EAASwrB,WACT,aAFD,yBAICxrB,EAASurB,eAAenc,iBACvB,IAAI2H,MAAO3H,eACZpP,EAASurB,eAAei1B,cAAe,IAAIzpC,MAAOypC,WAC/C,aACCxgD,EAASurB,eAAenc,iBACzB,IAAI2H,MAAO3H,eACXpP,EAASurB,eAAei1B,cACvB,IAAIzpC,MAAOypC,WAAa,GACxBxgD,EAASurB,eAAenc,iBACzB,IAAI2H,MAAO3H,cAAgB,GACY,KAAvCpP,EAASurB,eAAei1B,YACE,KAA1B,IAAIzpC,MAAOypC,WACX,aACAxgD,EAASurB,eAAenc,iBACxB,IAAI2H,MAAO3H,cACX,YAFA,aAGM+O,YAAOne,EAASurB,eAAgB,sBAGnBrrB,IAAvBF,EAASmY,WACVnY,EAASmY,UAAUlU,OAAS,EAC3B,4BACC,yCACA,4BAAKjE,EAASmY,YAEZ,UACwBjY,IAA3BF,EAASyrB,eACVzrB,EAASyrB,cAAcxnB,OAAS,EAC/B,4BACC,8CACA,4BAAKjE,EAASyrB,gBAEZ,UACgBvrB,IAAnBF,EAAS2J,OAAuB3J,EAAS2J,MAAM1F,OAAS,EACxD,4BACC,qCACA,4BAAKjE,EAAS2J,QAEZ,SAKL,KAEEwgD,GAAyBzvB,EAC9B,yBAAK3F,UAAU,mCACd,uBACChB,KAAM5zB,EAASY,cAAc0C,sBAAsBX,EAAQC,EAAW,CACrE,YAEDgyB,UAAU,iBAJX,UAKKhyB,EAAUmc,cALf,qBAMA,yBAAK6V,UAAU,aACb/0B,EAAS0rB,YACRvf,QAAO,SAACgc,EAAI1X,GAAL,OAAeA,EAAQ,MAC9BhI,KAAI,SAACsI,EAAMN,GACX,OACC,uBACCskB,UAAU,SACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BsP,EAAK3I,GACL2I,EAAKpP,OAEN6O,IAAKC,GAEL,yBACCujB,SACgB9zB,IAAf6Q,EAAKnI,MACFmI,EAAKnI,MACL,2FAEJqrB,IAAKljB,EAAKpP,aAMhB,uBACCozB,UAAU,eACVhB,KAAM5zB,EAASY,cAAc0C,sBAAsBX,EAAQC,EAAW,CACrE,aAHF,YASE,KAEEqnD,GAAyB1vB,EAC9B,yBAAK3F,UAAU,iCACd,uBACCA,UAAU,gBACVhB,KAAM5zB,EAASY,cAAcuC,yBAF9B,UAGKP,EAAUmc,cAHf,mBAIA,yBAAK6V,UAAU,oBACb/0B,EAAS8pB,YAAYrhB,KAAI,SAAC4S,EAAO5K,GACjC,OACC,uBACCD,IAAKC,EACLsjB,KAAM5zB,EAASY,cAAc0C,sBAC5BX,EACAC,EACA,CAACsY,EAAM9Y,QALT,UAOK8Y,EAAM9Y,KAPX,aAOoB8Y,EAAM+E,cAP1B,UAWH,uBACC2U,UAAU,SACVhB,KAAM5zB,EAASY,cAAcuC,yBAF9B,YAOE,KAEE+mD,GACL3vB,GAAU16B,EAAS2rB,sBAAsB1nB,OAAS,EACjD,yBAAK8wB,UAAU,uCACd,uBACCA,UAAU,gBACVhB,KAAM5zB,EAASY,cAAc0C,sBAC5BX,EACAC,EACA,CAAC,aALH,UAOKA,EAAUmc,cAPf,0BAQA,yBAAK6V,UAAU,0BACb/0B,EAAS2rB,sBAAsBljB,KAAI,SAACsI,EAAMN,GAC1C,OACC,yBAAKskB,UAAU,cAAcvkB,IAAKC,GACjC,yBAAKskB,UAAU,gBACd,uBACCA,UAAU,eACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BsP,EAAK3I,GACL2I,EAAKpP,QAGN,yBACCsyB,IAAKljB,EAAKpP,MACVqyB,SACgB9zB,IAAf6Q,EAAKnI,MACFmI,EAAKnI,MACL,8FAIN,yBAAKmsB,UAAU,oBACd,0BAAMA,UAAU,0BACf,uBACChB,KAAM5zB,EAASY,cAAcqC,iBAC5BN,EACAC,IAHF,UAMComD,GACGpmD,EAAY,IAAM/C,EAASwN,SAC3BzK,IAEJ,wDAED,uBACCgyB,UAAU,eACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BsP,EAAK3I,GACL2I,EAAKpP,QAGLoP,EAAKpP,OAEP,0BAAMozB,UAAU,wBACf,qCACA,uBACChB,KAAM5zB,EAASY,cAAc0B,mBAC5BsO,EAAK/H,aACL+H,EAAK6Y,iBAGL7Y,EAAK6Y,gBAEN7Y,EAAK8Y,mBACL,0BAAMkL,UAAU,yBAAhB,sBAGG,MAEL,0BAAMA,UAAU,oBACf,+CACChkB,EAAK+Y,YAAYrhB,KAAI,SAAC4S,EAAO9Q,GAC7B,OACC,0BAAMiG,IAAKjG,GACV,uBACCwpB,KAAM5zB,EAASY,cAAc0C,sBAC5BX,EACAC,EACA,CAACsY,KAGDA,GAED9Q,IAAMwG,EAAK+Y,YAAY7lB,OAAS,EAChC,oCACG,UAKR,0BAAM8wB,UAAU,oBACd5W,YAAOpN,EAAKgZ,WAAY,0BAI5B,yBAAKgL,UAAU,iBACd,yBAAKA,UAAU,oCACbmY,GAAyBn8B,EAAMN,GAC/B08B,GAA4Bp8B,EAAMN,IAEnCu+B,GAAwBj+B,EAAMN,UAOlC,KAEC65C,GAA2B5vB,EAChC,yBAAK3F,UAAU,+BACd,0BAAMA,UAAU,iBAAhB,UAAoChyB,EAAUmc,cAA9C,sBACClf,EAAS4rB,cAAcnjB,KAAI,SAACgT,EAAQhL,GACpC,OACC,yBACCskB,UACCtkB,IAAUzQ,EAAS4rB,cAAc3nB,OAAS,EACvC,cACA,uBAEJuM,IAAKC,GAEL,0BAAMskB,UAAU,sBACf,uBACChB,KAAM5zB,EAASY,cAAcqC,iBAC5BN,EACAC,IAGAomD,GAAepmD,EAAY,IAAM/C,EAASwN,SAAWzK,GAEvD,mCACiB,cAAhB0Y,EAAOnc,KACP,0BAAMy1B,UAAU,mBAAhB,eACc,IACb,yBAAKA,UAAU,gBACd,yBACCA,UACCtZ,EAAOxQ,QAAU,EACd,yBACAwQ,EAAOxQ,QAAU,GACjB,gCACAwQ,EAAOxQ,OAAS,EAChB,iCACA,4BAGL,yBACC8pB,UACCtZ,EAAOxQ,QAAU,EACd,yBACAwQ,EAAOxQ,QAAU,IACjB,gCACAwQ,EAAOxQ,OAAS,EAChB,iCACA,4BAGL,yBACC8pB,UACCtZ,EAAOxQ,QAAU,EACd,yBACAwQ,EAAOxQ,QAAU,IACjB,gCACAwQ,EAAOxQ,OAAS,EAChB,iCACA,4BAGL,yBACC8pB,UACCtZ,EAAOxQ,QAAU,EACd,yBACAwQ,EAAOxQ,QAAU,IACjB,gCACAwQ,EAAOxQ,OAAS,EAChB,iCACA,4BAGL,yBACC8pB,UACCtZ,EAAOxQ,QAAU,EACd,yBACAwQ,EAAOxQ,QAAU,IACjB,gCACAwQ,EAAOxQ,OAAS,EAChB,iCACA,8BAKY,qBAAhBwQ,EAAOnc,KACV,+CACmB,kBAAhBmc,EAAOnc,KACV,kDACmB,qBAAhBmc,EAAOnc,KACV,iDACmB,eAAhBmc,EAAOnc,KACV,8BACC,sDACA,uBACCy0B,KAAM5zB,EAASY,cAAcqC,iBAC5BqY,EAAOzb,SAASoI,GAChBqT,EAAOzb,SAASuC,OAGhBkZ,EAAOzb,SAASuC,OAGA,yBAAhBkZ,EAAOnc,KACV,8BACC,4CACCmc,EAAOiP,qBAAuB,EAD/B,yBAGA,uBACCqJ,KAAM5zB,EAASY,cAAcqC,iBAC5BqY,EAAOzb,SAASoI,GAChBqT,EAAOzb,SAASuC,OAHlB,UAKKkZ,EAAOzb,SAASuC,KALrB,OAMA,6CACA,uBACCwxB,KAAM5zB,EAASY,cAAcU,iBAC5Bga,EAAOqP,SAAS1iB,GAChBqT,EAAOqP,SAASnpB,QAGhB8Z,EAAOqP,SAASnpB,QAGA,cAAhB8Z,EAAOnc,KACV,8BACC,0CACA,uBACCy0B,KAAM5zB,EAASY,cAAcwE,kBAC5BkW,EAAOjW,QACPiW,EAAOmP,eAHT,UASkB,mBAAhBnP,EAAOnc,KACV,8BACC,8CACA,uBACCy0B,KAAM5zB,EAASY,cAAcU,iBAC5Bga,EAAOqP,SAAS1iB,GAChBqT,EAAOqP,SAASnpB,QAGhB,IACA8Z,EAAOqP,SAASnpB,MAAO,KAEzB,qCACA,uBACCoyB,KAAM5zB,EAASY,cAAcqC,iBAC5BqY,EAAOzb,SAASoI,GAChBqT,EAAOzb,SAASuC,OAGhBkZ,EAAOzb,SAASuC,OAInB,oDAGe,qBAAhBkZ,EAAOnc,MACQ,qBAAhBmc,EAAOnc,MACS,kBAAhBmc,EAAOnc,MACS,cAAhBmc,EAAOnc,MACS,mBAAhBmc,EAAOnc,KACN,yBAAKy1B,UAAU,uBACd,yBAAKA,UAAU,gBACd,uBACCA,UAAU,eACVhB,KAAM5zB,EAASY,cAAcU,iBAC5Bga,EAAOqP,SAAS1iB,GAChBqT,EAAOqP,SAASnpB,QAGjB,yBACCsyB,IAAKxY,EAAOqP,SAASnpB,MACrBqyB,SAC2B9zB,IAA1Bub,EAAOqP,SAASliB,MACb6S,EAAOqP,SAASliB,MAChB,8FAIN,yBAAKmsB,UAAU,oBACd,uBACCA,UAAU,eACVhB,KAAM5zB,EAASY,cAAcU,iBAC5Bga,EAAOqP,SAAS1iB,GAChBqT,EAAOqP,SAASnpB,QAGhB8Z,EAAOqP,SAASnpB,OAElB,0BAAMozB,UAAU,wBACf,qCACA,uBACChB,KAAM5zB,EAASY,cAAc0B,mBAC5BgZ,EAAOoP,WAAWziB,GAClBqT,EAAOoP,WAAWtoB,OAGlBkZ,EAAOoP,WAAWtoB,MAEnBkZ,EAAOoP,WAAWN,SAClB,0BAAMwK,UAAU,yBAAhB,sBAGG,QAIP,yBAAKA,UAAU,iBACd,yBAAKA,UAAU,oCACbmY,GACAzxB,EAAOqP,SACP9qB,EAAS2rB,sBAAsB1nB,OAC9BjE,EAAS4rB,cACPzf,QAAO,SAACsP,GAAD,MACP,CACC,mBACA,gBACA,mBACA,iBACA,aACChS,SAASgS,EAAOnc,SAElBuN,QAAQ4O,IAEX0xB,GACA1xB,EAAOqP,SACP9qB,EAAS2rB,sBAAsB1nB,OAC9BjE,EAAS4rB,cACPzf,QAAO,SAACsP,GAAD,MACP,CACC,mBACA,gBACA,mBACA,iBACA,aACChS,SAASgS,EAAOnc,SAElBuN,QAAQ4O,KAGZuzB,GACAvzB,EAAOqP,SACP9qB,EAAS2rB,sBAAsB1nB,OAC9BjE,EAAS4rB,cACPzf,QAAO,SAACsP,GAAD,MACP,CACC,mBACA,gBACA,mBACA,iBACA,aACChS,SAASgS,EAAOnc,SAElBuN,QAAQ4O,MAIX,KACa,eAAhBA,EAAOnc,KACP,uBACCy1B,UAAU,2BACVhB,KAAM5zB,EAASY,cAAcqC,iBAC5BqY,EAAOzb,SAASoI,GAChBqT,EAAOzb,SAASuC,OAGjB,yBACCyxB,SAC6B9zB,IAA5Bub,EAAOzb,SAAS6J,QACb4R,EAAOzb,SAAS6J,QAChB,6FAEJoqB,IAAKxY,EAAOzb,SAASuC,QAGpB,KACa,yBAAhBkZ,EAAOnc,KACP,yBAAKy1B,UAAU,uBACd,uBACChB,KAAM5zB,EAASY,cAAcU,iBAC5Bga,EAAOqP,SAAS1iB,GAChBqT,EAAOqP,SAASnpB,QAGjB,yBACCqyB,SAC2B9zB,IAA1Bub,EAAOqP,SAASliB,MACb6S,EAAOqP,SAASliB,MAChB,2FAEJqrB,IAAKxY,EAAOqP,SAASnpB,SAGvB,0BAAMozB,UAAU,oBAAhB,WAAwCtZ,EAAOkP,WAAWjlB,MACzD,EACA,KAFD,OAKE,KACa,cAAhB+V,EAAOnc,KACP,yBAAKy1B,UAAU,cACd,uBACChB,KAAM5zB,EAASY,cAAcU,iBAC5Bga,EAAOqP,SAAS1iB,GAChBqT,EAAOqP,SAASnpB,QAGjB,yBACCqyB,SAC2B9zB,IAA1Bub,EAAOqP,SAASliB,MACb6S,EAAOqP,SAASliB,MAChB,2FAEJqrB,IAAKxY,EAAOqP,SAASnpB,SAGvB,yBAAKozB,UAAU,gCACd,8CAAWtZ,EAAOmP,aAAlB,WACA,uBACCmJ,KAAM5zB,EAASY,cAAc0B,mBAC5BgZ,EAAOoP,WAAWziB,GAClBqT,EAAOoP,WAAWtoB,OAGlBkZ,EAAOoP,WAAWtoB,QAInB,KACa,kBAAhBkZ,EAAOnc,KACP,yBAAKy1B,UAAU,uBACd,uBACCA,UAAU,iCACVhB,KAAM5zB,EAASY,cAAc0B,mBAC5BgZ,EAAOoP,WAAWziB,GAClBqT,EAAOoP,WAAWtoB,OAGnB,yBACCyxB,SAC+B9zB,IAA9Bub,EAAOoP,WAAWhhB,QACf4R,EAAOoP,WAAWhhB,QAClB,6FAEJoqB,IAAKxY,EAAOoP,WAAWtoB,QAGzB,yBAAKwyB,UAAU,8BACd,0BAAMA,UAAU,oBACf,uBACChB,KAAM5zB,EAASY,cAAc0B,mBAC5BgZ,EAAOoP,WAAWziB,GAClBqT,EAAOoP,WAAWtoB,OAGlBkZ,EAAOoP,WAAWtoB,MAEnBkZ,EAAOoP,WAAWN,SAClB,yBAAKwK,UAAU,oBACZ,MAEL,0BAAMA,UAAU,yBACf,4CACA,uBACChB,KAAM5zB,EAASY,cAAcU,iBAC5Bga,EAAOoP,WAAW5F,WAClBxJ,EAAOoP,WAAW3F,qBAGmBhlB,IAArCub,EAAOoP,WAAWL,eAChB/O,EAAOoP,WAAW3F,cADpB,UAEKzJ,EAAOoP,WAAW3F,cAFvB,aAEyCzJ,EAAOoP,WAAWL,eAF3D,cAE+E/O,EAAOoP,WAAWJ,uBAFjG,MAIF,4BACCsK,UAAU,uBACVuL,YAAa,SAAClM,GACT3Y,EAAOoP,WAAW0/B,kBACrBn2B,EAAEC,OAAOoP,UAAY,aAGvBC,WAAY,SAACtP,GACR3Y,EAAOoP,WAAW0/B,kBACrBn2B,EAAEC,OAAOoP,UAAY,eAItBhoB,EAAOoP,WAAW0/B,gBAChB,YACA,oBAKJ,KACH3B,GAAoBn4C,GACpB,yBACCujB,IAAI,oFACJC,IAAI,YAEF,KACJ,0BAAMc,UAAU,oBACd5W,YAAO1C,EAAO/N,KAAM,wBAEtB,4BACCqnB,UAAU,uBACVP,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,0DAEPk4B,OAAOC,QACN,gLAHM,uBAMP+oB,IAAuB,SAACpoC,GAAD,OACtBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GACpB,OAAIA,IAAMkG,GAGHyjB,QAXF,SAcD/zB,EAASmsB,aAAa7Q,EAAOrT,IAd5B,OAePk1C,GAAY,SAAC78B,GACZ,OAAO,2BACHA,GADJ,IAECmL,cAAenL,EAASmL,cAAczf,QACrC,SAACq+C,EAAGjgD,GAAJ,OAAUA,IAAMkG,UAInBo4C,IAAuB,SAACpoC,GAAD,OACtBA,EAAShY,KAAI,SAACyrB,EAAO3pB,GACpB,OAAIA,IAAMkG,GAGHyjB,QA5BF,2CAAF,6DAsCT,KAEEu2B,GACL/vB,GAAU16B,EAAS0T,OAAOzP,OAAS,EAClC,yBAAK8wB,UAAU,4BACd,0BAAMA,UAAU,iBAAhB,UAAoChyB,EAAUmc,cAA9C,cACClf,EAAS0T,OACRvH,QAAO,SAACu+C,EAAIj6C,GAAL,OAAeA,EAAQ,KAC9BhI,KAAI,SAACsc,EAAOtU,GACZ,OACC,yBAAKskB,UAAU,uBAAuBvkB,IAAKC,GAC1C,yBAAKskB,UAAU,gBACd,uBACChB,KAAM5zB,EAASY,cAAc0B,mBAC5BsiB,EAAMriB,SACNqiB,EAAMzT,aAGP,yBACC0iB,SACgC9zB,IAA/B6kB,EAAMiG,qBACHjG,EAAMiG,qBACN,6FAEJiJ,IAAKlP,EAAMzT,cAGb,yBAAKyjB,UAAU,wBACd,0BAAMA,UAAU,SAAhB,gBAA6BhQ,EAAMpS,QAAnC,WACA,0BAAMoiB,UAAU,oBACf,0BAAMA,UAAU,QAAhB,WACA,wCAAUhQ,EAAMzT,WAAhB,OACA,uBACCyiB,KAAM5zB,EAASY,cAAcc,oBAC5BkjB,EAAMrjB,OACNqjB,EAAMrd,YAGNqd,EAAMrd,cAKX,yBAAKqtB,UAAU,iBACI,OAAjB3nB,GAAKrN,SAAqBglB,EAAM/W,YA8B7BuqC,GAAgB9uC,SAASgH,GAC5B,uBACCskB,UAAU,UACVhB,KAAM5zB,EAASY,cAAcwE,kBAC5Bwf,EAAM3c,GACN2c,EAAMpS,UAJR,cAUA,uBACCoiB,UAAU,UACVhB,KAAM5zB,EAASY,cAAcwE,kBAC5Bwf,EAAM3c,GACN2c,EAAMpS,UAJR,gBAxCA,4BACC6hB,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,sEACFxH,EAAS2hB,UACd1U,GAAKrN,QACLglB,EAAM3c,GACNsM,GAJO,OAMR4oC,GAAY,SAAC78B,GACZ,OAAO,2BACHA,GADJ,IAEC/M,OAAQ+M,EAAS/M,OAAOjL,KAAI,SAACnH,EAAGiJ,GAC/B,OAAIA,IAAMkG,EACF,2BACHsU,GADJ,IAEC/W,aAAa,IAGP+W,UAKXyzB,IAAmB,SAAC/3B,GAAD,OAClBA,EAASrE,OAAO3L,MAtBT,2CAAF,uDADR,QAkDD,uBACCskB,UAAU,oBACVhB,KAAM5zB,EAASY,cAAcwE,kBAC5Bwf,EAAM3c,GACN2c,EAAMpS,UAJR,UAMKoS,EAAMjX,cANX,iBAYH,KAECirC,GACL,yBAAKhkB,UAAU,uCACb40B,GACAC,GACAO,GACAC,GACAC,GACAC,GACAG,IAIGE,GACL,yBAAK51B,UAAU,mCACd,uBACCA,UAAU,gBACVhB,KAAM5zB,EAASY,cAAcqF,6BAC5B,IAAI2Q,MAAO3H,cACXtM,EACAC,IALF,UAOKA,EAAUmc,cAPf,qBAQA,yBAAK6V,UAAU,iBACd,uBACCA,UAAU,gBACVhB,KAAM5zB,EAASY,cAAcqF,6BAC5B,IAAI2Q,MAAO3H,cACXtM,EACAC,IAGD,yBACCixB,IACC,6FAEDC,IAAI,mBAGN,yBAAKc,UAAU,+BACd,8BACC,qCACCk0B,GAAiB,OAAH,UAAelmD,EAAf,MADf,aAEI,IAAIgU,MAAO3H,cAFf,oBAID,uDACC65C,GAAiB,OAAH,UAAelmD,EAAf,MADf,iEAGA,uBACCgxB,KAAM5zB,EAASY,cAAcqF,6BAC5B,IAAI2Q,MAAO3H,cACXtM,EACAC,IAJF,cAOCkmD,GAAiB,OAAH,UAAelmD,EAAf,MAPf,aAQI,IAAIgU,MAAO3H,cARf,sBAcEw7C,GACLlwB,GAAU16B,EAAS4U,QAAQ3Q,OAAS,EACnC,yBAAK8wB,UAAU,6BACd,0BAAMA,UAAU,iBAAhB,UAAoChyB,EAAUmc,cAA9C,uBACClf,EAAS4U,QAAQ3Q,OADlB,MAGA,yBAAK8wB,UAAU,eACb/0B,EAAS4U,QACRzI,QAAO,SAAC0+C,EAAIp6C,GAAL,OAAeA,EAAQ,KAC9BhI,KAAI,SAACoM,EAAQpE,GACb,OACC,yBAAKskB,UAAU,cAAcvkB,IAAKC,GACjC,uBACCskB,UAAU,0BACVhB,KAAM5zB,EAASY,cAAc0B,mBAC5BoS,EAAOzM,GACPyM,EAAOtS,OAGR,yBACCyxB,SACoB9zB,IAAnB2U,EAAOhL,QACJgL,EAAOhL,QACP,6FAEJoqB,IAAKpf,EAAOtS,QAGd,yBAAKwyB,UAAU,iBACd,uBACChB,KAAM5zB,EAASY,cAAc0B,mBAC5BoS,EAAOzM,GACPyM,EAAOtS,OAGPsS,EAAOtS,MAET,yBAAKwyB,UAAU,gBACd,wCAAUlgB,EAAOuL,cAAjB,WACA,0BAAM2U,UAAU,aAAhB,KACA,wCAAUlgB,EAAOsL,gBAAjB,qBAQL,KAEC2qC,GACLpwB,GAAU16B,EAAS6rB,UAAU5nB,OAAS,EACrC,yBAAK8wB,UAAU,+BACd,0BAAMA,UAAU,iBAAhB,iBAA2ChyB,EAAUmc,cAArD,kBACA,yBAAK6V,UAAU,kBACb/0B,EAAS6rB,UAAUpjB,KAAI,SAACsiD,EAAet6C,GACvC,OACC,uBACCsjB,KAAM5zB,EAASY,cAAcqC,iBAC5B2nD,EAAc3iD,GACd2iD,EAAcxoD,MAEfiO,IAAKC,GAEL,yBACCujB,SAC2B9zB,IAA1B6qD,EAAclhD,QACXkhD,EAAclhD,QACd,6FAEJoqB,IAAK82B,EAAcxoD,YAMxB,0BAAMwyB,UAAU,4BAAhB,UAA+C/0B,EAAS0lB,kBAAxD,iCAAkG3iB,KAEhG,KAECioD,GACLtwB,GAAU16B,EAASgX,gBAAgB/S,OAAS,EAC3C,yBAAK8wB,UAAU,sCACd,0BAAMA,UAAU,iBAAhB,UACKhyB,EAAUmc,cADf,uBAEE+pC,GACA,uBAAGl1B,KAAM5zB,EAASY,cAAcmF,+BAAhC,QAGG,MAEL,yBAAK6uB,UAAU,wBACb/0B,EAASgX,gBACR7K,QAAO,SAAC8+C,EAAIx6C,GAAL,OAAeA,EAAQ,KAC9BhI,KAAI,SAAC2B,EAAQqG,GACb,OACC,yBAAKskB,UAAU,uBAAuBvkB,IAAKC,GAC1C,uBACCskB,UAAU,kCACVhB,KAAM5zB,EAASY,cAAc0B,mBAC5B2H,EAAOhC,GACPgC,EAAO7H,OAGR,yBACCyxB,SACoB9zB,IAAnBkK,EAAOP,QACJO,EAAOP,QACP,6FAEJoqB,IAAK7pB,EAAO7H,QAGd,yBAAKwyB,UAAU,iBACd,uBACCA,UAAU,gBACVhB,KAAM5zB,EAASY,cAAc0B,mBAC5B2H,EAAOhC,GACPgC,EAAO7H,OAGP6H,EAAO7H,MAET,8BACC,6CACA,uBACCwyB,UAAU,8BACVhB,KAAM5zB,EAASY,cAAcU,iBAC5B2I,EAAO6a,WACP7a,EAAO8a,gBAGP9a,EAAO8a,uBASd,KAECgmC,GACLxwB,GAAU16B,EAAS8rB,WAAW7nB,OAAS,EACtC,yBAAK8wB,UAAU,8BACd,uBACCA,UAAU,gBACVhB,KAAM5zB,EAASY,cAAciC,6BAC5BF,EACAC,IAJF,kBASA,yBAAKgyB,UAAU,cACb/0B,EAAS8rB,WACR3f,QAAO,SAACg/C,EAAI16C,GAAL,OAAeA,EAAQ,KAC9BhI,KAAI,SAACgH,EAAMgB,GACX,OACC,yBAAKskB,UAAU,YAAYvkB,IAAKC,GAC/B,yBAAKskB,UAAU,UACbtlB,EAAKM,WAAWtH,KAAI,SAACG,EAAO2B,GAC5B,OACC,uBACCwqB,UAAU,0BACVhB,KAAM5zB,EAASY,cAAcmC,iBAC5BuM,EAAKrH,GACLqH,EAAK9N,OAEN6O,IAAKjG,GAEL,yBAAKypB,IAAKprB,EAAOqrB,IAAKxkB,EAAK9N,aAK/B,uBACCozB,UAAU,eACVhB,KAAM5zB,EAASY,cAAcmC,iBAC5BuM,EAAKrH,GACLqH,EAAK9N,QAGL8N,EAAK9N,OAEP,0BAAMozB,UAAU,mBAAhB,UAAsCtlB,EAAK2Q,cAA3C,yBAAoE3Q,EAAK2Y,eAAzE,iBAKL,uBACC2M,UAAU,eACVhB,KAAM5zB,EAASY,cAAciC,6BAC5BF,EACAC,IAJF,YAUE,KAECqoD,GACL1wB,GAAU16B,EAAS6X,eAAe5T,OAAS,EAC1C,yBAAK8wB,UAAU,qCACd,0BAAMA,UAAU,iBAAhB,kBAEEk0B,GACA,uBAAGl1B,KAAM5zB,EAASY,cAAc4F,kCAAhC,QAGG,MAEL,0BAAMouB,UAAU,wBACd/0B,EAAS6X,eAAepP,KAAI,SAAClE,EAAOkM,GACpC,OAAIA,IAAUzQ,EAAS6X,eAAe5T,OAAS,EAE7C,uBACC8vB,KAAM5zB,EAASY,cAAc6D,kBAAkBL,GAC/CiM,IAAKC,GAEJ+0C,GAAsBjhD,IAGfkM,IAAUzQ,EAAS6X,eAAe5T,OAAS,EAEpD,0BAAMuM,IAAKC,GACV,uBAAGsjB,KAAM5zB,EAASY,cAAc6D,kBAAkBL,IAChDihD,GAAsBjhD,IAExB,8BAAO,WAKT,0BAAMiM,IAAKC,GACV,uBAAGsjB,KAAM5zB,EAASY,cAAc6D,kBAAkBL,IAChDihD,GAAsBjhD,IAExB,0CAMF,KAEC8mD,GACL,yBAAKt2B,UAAU,qDACd,uBACChB,KAAM5zB,EAASY,cAAckC,6BAC5BH,EACAC,IAHF,yBAKoBA,KAIhBi2C,GACL,yBAAKjkB,UAAU,wCACb41B,GACAC,GACAE,GACAE,GACAE,GACAE,GACAC,IAIGC,GAAoB5wB,EACzB,yBACC3F,UACCyzB,GACG,wCACA,iCAGJ,4BACCzzB,UAAU,eACVP,QAAS,SAAC2L,GAAD,OAAQsoB,IAAwB,MAE1C,sCAAQzoD,EAASorB,aAAe,WAAa,WAA7C,YACC+9B,GAAepmD,EAAY,IAAM/C,EAASwN,SAAWzK,EADtD,MAGA,8BACE/C,EAASorB,aAAT,2BACsBroB,EADtB,gHACuIA,EADvI,qDAEsBA,EAFtB,wCAIF,yBAAKgyB,UAAU,WACd,4BACCA,UAAU,iBACVP,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,yDACR8gD,IAAwB,GACxBJ,GAAgB,IACZroD,EAASorB,aAHL,gCAIDjrB,EAASisB,aAAahf,GAAKrN,QAAS+C,EAAQ4R,GAJ3C,6CAMDvU,EAAS+rB,aAAa9e,GAAKrN,QAAS+C,EAAQ4R,GAN3C,OAQR2zC,GAAgB,GAChB/K,GAAY,SAAC78B,GACZ,OAAO,2BACHA,GADJ,IAEC0K,kBAAkB,EAClBzF,kBAAmBjF,EAASiF,kBAAoB,OAb1C,4CAAF,uDAFR,WAsBA,4BACCqP,UAAU,gBACVP,QAAS,SAAC2L,GAAD,OAAQsoB,IAAwB,KAF1C,YAQC,KAEE8C,GAAwB7wB,EAC7B,yBAAK3F,UAAU,mBACd,sCAAQhyB,EAAR,eACA,yBAAKgyB,UAAU,gBACd,yBAAKA,UAAU,gBACd,yBACCf,IAAI,6FACJC,IAAI,oBAEL,wCAAUj0B,EAASiiB,gBAAnB,sBAAgDjiB,EAASwiB,gBAAzD,aACA,4BACCuS,UAAU,2BACVP,QAAS,SAAC2L,GAAD,OAAQwoB,IAA2B,KAF7C,sBAGiB3oD,EAASmiB,cAAcsd,QAAQ,KAChD,yBACC1K,UACC2zB,GACG,6BACA,sBAGJ,kBAAC,GAAD,CACCj9C,YAAazL,EAASyL,YACtBC,YAAa1L,EAAS0L,YACtBC,aAAc3L,EAAS2L,aACvBC,WAAY5L,EAAS4L,WACrBC,WAAY7L,EAAS6L,WACrBi8C,WAAY,kBAAMa,IAA2B,QAIhD,yBAAK5zB,UAAU,iBACd,0BAAMA,UAAU,qBAAhB,UAAwChyB,EAAxC,uCACA,4DACA,4BACC,qEACA,yEAED,uBACCgyB,UAAU,kBACVhB,KAAM5zB,EAASY,cAAckG,wBAAwBnE,IAFtD,iBASA,KAEEsqC,GACL1S,GAAUwuB,GACT,yBAAKn0B,UAAU,0BACbgkB,GACAC,GACAsS,IAGFC,GAGF,OACC,yBACCx2B,UACCyzB,GAAuB,+BAAiC,aAGzD,yBACCzzB,UACCyzB,GAAuB,0BAA4B,oBAGrD,kBAAC,EAAD,MACCpb,GACD,kBAAC,EAAD,QCvgDYoe,I,OAl/Bc,SAAC,GAAe,IAEjC1oD,EAFgC,EAAZ6b,MAE9Bmb,OAAUh3B,OAEL4R,EAAUof,cACVhB,EAAQ,IAAIsd,gBAAgB5W,cAAc6W,QAC1Cob,EAAmC,WAAtB34B,EAAMhrB,IAAI,QAAuB,SAAW,aACzDuT,EAA+B,OAAvByX,EAAMhrB,IAAI,SAAoBgrB,EAAMhrB,IAAI,SAAW,MAC3D4jD,EACuB,OAA5B54B,EAAMhrB,IAAI,cAAyBgrB,EAAMhrB,IAAI,cAAgBuT,EACxDswC,EACyB,OAA9B74B,EAAMhrB,IAAI,gBAA2BgrB,EAAMhrB,IAAI,gBAAkBuT,EAXvB,EAYfqY,oBAAS,GAZM,mBAYpCgH,EAZoC,KAY5BC,EAZ4B,OAaDjH,mBAAS,IAbR,mBAapCk4B,EAboC,KAarBC,EAbqB,OAcyBn4B,oBACnE,GAf0C,mBAcpCo4B,EAdoC,KAcRC,EAdQ,OAiByBr4B,mBACnE,GAlB0C,mBAiBpCs4B,EAjBoC,KAiBRC,EAjBQ,OAoBOv4B,mBAAS,GApBhB,mBAoBpCw4B,EApBoC,KAoBjBC,EApBiB,OAqBCz4B,oBAAS,GArBV,mBAqBpC04B,EArBoC,KAqBpBC,EArBoB,KAuBrCj/C,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,YACa,uCAAG,4BAAA7uB,EAAA,yDACpByF,EAAKrN,UAAY+C,EADG,gBAEvB4R,EAAQvL,KAAK,CACZ2L,SAAU3U,EAASY,cAAcqC,iBAChCN,EACAsK,EAAKpN,SAAS+C,WAEfvD,MAAO,0CAPe,sCAUO05B,uBAC7B/4B,EAASqsB,2BAA2Bpf,EAAKrN,QAAS+C,EAAQ4R,IAXpC,OAUjB43C,EAViB,OAavBT,EAAiBS,GACjB3xB,GAAU,GAda,2CAAH,qDAiBtB4xB,KACE,CAACn/C,EAAKrN,QAAS+C,EAAQ4R,EAAStH,EAAKpN,SAAS+C,YAEjDyzB,qBAAU,WACT,QAAwCt2B,IAApC0rD,EAAcv+B,kBAAiC,CAClD,IAAMm/B,EAAwBZ,EAAct+B,eAAenhB,QAC1D,SAAC4E,EAAMN,GAAP,OACCA,EAAQ,KACPm7C,EAAcv+B,kBAAkB7E,MAChC,SAAC1H,GAAD,OAAOA,EAAEkM,SAAWjc,EAAKic,WAEV,IAAhBjc,EAAK9F,aACW/K,IAAhB6Q,EAAK9F,UAEH+gD,EAA6BQ,EAAsBvoD,QACtDkoD,EACCK,EAAsBR,GAA4B/gD,WAInD,CAAC+gD,EAA4BJ,IAEhC,IAAMa,EAA0B/xB,EAC7BkxB,EAAcv+B,kBAAkB7M,QAAO,SAACC,EAAUC,GAMlD,OALAA,EAAQoJ,YAAYld,SAAQ,SAAC8/C,GACvBjsC,EAAShX,SAASijD,IACtBjsC,EAAStX,KAAKujD,MAGTjsC,IACJ,IACH,GACGksC,EAAuBjyB,EAC1BkxB,EAAct+B,eAAe9M,QAAO,SAACC,EAAUC,GAM/C,OALAA,EAAQoJ,YAAYld,SAAQ,SAAC8/C,GACvBjsC,EAAShX,SAASijD,IACtBjsC,EAAStX,KAAKujD,MAGTjsC,IACJ,IACH,GACGmsC,EAAgBH,EAAwBtgD,QAAO,SAACugD,GAAD,OACpDC,EAAqBljD,SAASijD,MAGzBG,EAAyBnyB,EAC5BkxB,EAAct+B,eAAenhB,QAC7B,SAAC4E,GAAD,MACiB,QAAhB46C,GACA56C,EAAK+Y,YAAYrgB,SAASkiD,IAC1B56C,EAAKjG,SAAW6gD,KAEjB,GACGmB,EAA4BpyB,EAC/BkxB,EAAcv+B,kBAAkBlhB,QAChC,SAAC4E,GAAD,MACe,QAAd26C,GACA36C,EAAK+Y,YAAYrgB,SAASiiD,IAC1B36C,EAAKjG,SAAW4gD,KAEjB,GAEGqB,EAAyBryB,EAASmyB,EAAuB5oD,OAAS,EAClE+oD,EAA+BtyB,EAClCmyB,EAAuB1gD,QACvB,SAAC4E,GAAD,OACE+7C,EAA0BtkC,MAC1B,SAACykC,GAAD,OAAsBA,EAAiBjgC,SAAWjc,EAAKic,aAEvD/oB,OACF,EACGipD,EACLH,EAAyBC,EACpBG,EAA4BzyB,EAC/BoyB,EAA0B7oD,OAC1B,EACGmpD,EACLD,EAA4BD,EACvBG,GACyB,IAA9BF,EACGD,EAAwBC,EACxB,EACEG,GACsB,IAA3BP,EACGG,EAAwBH,EACxB,EAEEQ,GAAmB7yB,EACtBmyB,EACC1gD,QAAO,SAAC4E,GAAD,OACP+7C,EAA0BtkC,MACzB,SAACykC,GAAD,OAAsBA,EAAiBjgC,SAAWjc,EAAKic,aAGxDvkB,KAAI,SAACsI,GAAD,OAAUA,EAAKic,UACpB,GACGwgC,GAAqBD,GAAiBphD,QAAO,SAAC6gB,GACnD,IAAMygC,EAAqBX,EAA0B3gD,QACpD,SAAC8gD,GAAD,OAAsBA,EAAiBjgC,SAAWA,KACjD,GACI0gC,EAAsBb,EAAuB1gD,QAClD,SAAC8gD,GAAD,OAAsBA,EAAiBjgC,SAAWA,KACjD,GACF,YAC+B9sB,IAA9ButD,EAAmBxiD,QACW,IAA9BwiD,EAAmBxiD,aACY/K,IAA/BwtD,EAAoBziD,QACW,IAA/ByiD,EAAoBziD,UAGhB0iD,GAA0BjzB,EAC7B8yB,GACC/kD,KAAI,SAACukB,GACL,IAAMigC,EAAmBH,EAA0B3gD,QAClD,SAAC2U,GAAD,OAAOA,EAAEkM,SAAWA,KACnB,GACI4gC,EAAgBf,EAAuB1gD,QAC5C,SAAC2U,GAAD,OAAOA,EAAEkM,SAAWA,KACnB,GAEF,OACC,IAAiE,GAA3DxU,KAAKwvB,IAAIilB,EAAiBhiD,OAAS2iD,EAAc3iD,WAGxDuV,QACA,SAACC,EAAUC,GAAX,OAAuBD,EAAWC,EAAU8sC,GAAmBvpD,SAC/D,GAED,EACG4pD,GAA4BnzB,EAC/BmyB,EAAuB1gD,QACvB,SAAC4E,EAAMN,GAAP,OACCA,EAAQ,KACP88C,GAAiB9jD,SAASsH,EAAKic,SAChB,IAAhBjc,EAAK9F,aACW/K,IAAhB6Q,EAAK9F,UAEN,GAEGuQ,GAAQ,uCAAG,WAAOyxB,EAAYhiC,GAAnB,SAAAtD,EAAA,8DACMzH,IAAlB+sC,EAAW7kC,GADC,gCAETjI,EAASqb,SAASpO,EAAKrN,QAASktC,EAAW7kC,GAAI6C,EAAQyJ,GAF9C,OAGfm3C,GAAiB,SAACprC,GACjB,OAAO,2BACHA,GADJ,IAEC4M,kBAAmB5M,EAAS4M,kBAAkBjR,OAA3B,2BACf6wB,GADe,IAElBhiC,SACAH,OAAQ,eATI,2CAAH,wDAgBR0sC,GAAa9c,EAClB,wBAAI3F,UAAU,kCACb,uBACChB,KAAM5zB,EAASY,cAAcqC,iBAC5BN,EACA8oD,EAAc1+B,0BAGsBhtB,IAApC0rD,EAAcz+B,kBACZy+B,EAAc1+B,mBACd,IACA0+B,EAAcz+B,kBACdy+B,EAAc1+B,oBAElB,8BAAO,qBAEL,KAEE4gC,GAAyBpzB,EAC9B,yBAAK3F,UAAU,oDACd,yBAAKA,UAAU,eACd,yBACCf,IAAG,qEAAgE+4B,EAAhE,YAA0FI,EAA1F,cAAyHD,EAAzH,mBAAyJ10C,KAAKmnB,IAChKotB,EACAI,GAFE,uBAIHl5B,IAAI,qBAEL,yBAAKc,UAAU,0BACd,yBAAKA,UAAU,cACd,yBAAKA,UAAU,iCACf,8BACC,wCAAU62B,EAAc1+B,mBAAxB,qBAAuD6/B,EAAvD,OACA,uBACCh5B,KAAM5zB,EAASY,cAAcyC,wBAAwBV,IADtD,UAEKkqD,EAFL,MAGA,kDAGyB,IAA1BE,EACA,yBAAKn4B,UAAU,mBACd,yBAAKA,UAAU,sCACf,yDAA2Bm4B,EAA3B,cACyC,IAAxCG,IACC5tB,QAAQ,GAFV,kCAGsC,IAArC6tB,IACC7tB,QAAQ,GAJV,gBAKCmsB,EAAcx+B,kBALf,eAQE,KACJ,yBAAK2H,UAAU,kBACd,yBAAKA,UAAU,qCACf,8BACC,kDAAoBo4B,EAApB,OACA,uBACCp5B,KAAM5zB,EAASY,cAAcyC,wBAC5B4J,EAAKrN,UAFP,UAIKqtD,EAJL,MAKA,oDAKuB,IAA1BF,EACA,yBAAKn4B,UAAU,kBACd,wDAA0B44B,GAA1B,4CACA,yBAAK54B,UAAU,aACd,2BAAOR,QAAQ,QAAf,QACA,4BACChyB,KAAK,OACL2xB,MAAOu3B,EACPt3B,SAAU,SAACC,GAAD,OACT1f,EAAQvL,KAAK,CACZ2L,SAAU3U,EAASY,cAAckF,6BAChCnD,GAEDutC,OAAO,SAAD,OAAWjc,EAAEC,OAAOH,MAApB,uBAAwCw3B,EAAxC,yBAAkEC,OAI1E,sDACA,2CAED,4BACCn3B,QAAS,SAAC2L,GAAD,OACR4rB,GAA8B,SAACtrC,GAAD,OAAeA,OAF/C,OAOA,yBACCsU,UACC+2B,EACG,gCACA,0BAGJ,yBAAK/2B,UAAU,aACf,yBAAKA,UAAU,cACd,8BACC,2CAED,4BACCA,UAAU,eACVP,QAAS,SAAC2L,GAAD,OAAQ4rB,GAA8B,OAGjD,yBAAKh3B,UAAU,eACd,8BACC,kDAED,0MAKA,8BACC,sCAED,yFAKD,MAEF,KAEEg5B,GAAqBrzB,EACE,IAA5B6yB,GAAiBtpD,OAChB,0BAAM8wB,UAAU,2BAAhB,kBAAsD62B,EAAc1+B,mBAApE,qCAEA,2BAAO6H,UAAU,yBAChB,+BACC,wBAAIA,UAAU,WACb,wBAAI8L,MAAM,OAAV,cACA,wBAAIA,MAAM,OAAV,UAAoB+qB,EAAc1+B,mBAAlC,cACA,wBAAI2T,MAAM,OAAV,eAGF,+BACE0sB,GACC1sC,MAAK,SAAClZ,EAAGmZ,GACT,IAAMktC,EAAuBnB,EAAuB1gD,QACnD,SAAC4E,GAAD,OAAUA,EAAKic,SAAWrlB,KACzB,GACIsmD,EAAuBpB,EAAuB1gD,QACnD,SAAC4E,GAAD,OAAUA,EAAKic,SAAWlM,KACzB,GACF,MAAmB,WAAf2qC,OAE8BvrD,IAAhC8tD,EAAqB/iD,QACW,IAAhC+iD,EAAqB/iD,OAEd6V,OAEyB5gB,IAAhC+tD,EAAqBhjD,QACW,IAAhCgjD,EAAqBhjD,OAEdtD,EAGNsmD,EAAqBhjD,OAAS+iD,EAAqB/iD,OAKpDgjD,EAAqBhhC,gBACrB+gC,EAAqB/gC,mBAIvBxkB,KAAI,SAACukB,EAAQvc,GACb,IAAMw8C,EAAmBrB,EAAcv+B,kBAAkBlhB,QACxD,SAAC4E,GAAD,OAAUA,EAAKic,SAAWA,KACzB,GACI4gC,EAAgBhC,EAAct+B,eAAenhB,QAClD,SAAC4E,GAAD,OAAUA,EAAKic,SAAWA,KACzB,GACF,OACC,wBAAI+H,UAAU,gBAAgBvkB,IAAKC,GAClC,wBAAIowB,MAAM,OACT,yBAAK9L,UAAU,mBACd,uBACCA,UAAU,eACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BwrD,EAAiB7kD,GACjB6kD,EAAiBtrD,QAGlB,yBACCqyB,SAC4B9zB,IAA3B+sD,EAAiBrkD,MACdqkD,EAAiBrkD,MACjB,2FAEJqrB,IAAKg5B,EAAiBtrD,SAGxB,yBAAKozB,UAAU,6BACd,uBACCA,UAAU,eACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BwrD,EAAiB7kD,GACjB6kD,EAAiBtrD,QAGjBsrD,EAAiBtrD,OAEnB,0BAAMozB,UAAU,mBACf,qCACA,uBACCA,UAAU,gBACVhB,KAAM5zB,EAASY,cAAc0B,mBAC5BwqD,EAAiBvqD,SACjBuqD,EAAiB37C,aAGjB27C,EAAiB37C,gBAMvB,wBAAIuvB,MAAM,OACiB,IAAzB+sB,EAAc3iD,aACU/K,IAAzB0tD,EAAc3iD,OACb,yBAAK8pB,UAAU,gBACd,yBACCA,UACC64B,EAAc3iD,QAAU,EACrB,yBACA2iD,EAAc3iD,QAAU,GACxB,gCACA2iD,EAAc3iD,OAAS,EACvB,iCACA,4BAGL,yBACC8pB,UACC64B,EAAc3iD,QAAU,EACrB,yBACA2iD,EAAc3iD,QAAU,IACxB,gCACA2iD,EAAc3iD,OAAS,EACvB,iCACA,4BAGL,yBACC8pB,UACC64B,EAAc3iD,QAAU,EACrB,yBACA2iD,EAAc3iD,QAAU,IACxB,gCACA2iD,EAAc3iD,OAAS,EACvB,iCACA,4BAGL,yBACC8pB,UACC64B,EAAc3iD,QAAU,EACrB,yBACA2iD,EAAc3iD,QAAU,IACxB,gCACA2iD,EAAc3iD,OAAS,EACvB,iCACA,4BAGL,yBACC8pB,UACC64B,EAAc3iD,QAAU,EACrB,yBACA2iD,EAAc3iD,QAAU,IACxB,gCACA2iD,EAAc3iD,OAAS,EACvB,iCACA,6BAKN,0BAAM8pB,UAAU,eACd64B,EAAc9iD,SAIlB,wBAAI+1B,MAAM,OACoB,IAA5BosB,EAAiBhiD,aACU/K,IAA5B+sD,EAAiBhiD,OAChB,yBAAK8pB,UAAU,gBACd,yBACCA,UACCk4B,EAAiBhiD,QAAU,EACxB,yBACAgiD,EAAiBhiD,QAAU,GAC3B,gCACAgiD,EAAiBhiD,OAAS,EAC1B,iCACA,4BAGL,yBACC8pB,UACCk4B,EAAiBhiD,QAAU,EACxB,yBACAgiD,EAAiBhiD,QAAU,IAC3B,gCACAgiD,EAAiBhiD,OAAS,EAC1B,iCACA,4BAGL,yBACC8pB,UACCk4B,EAAiBhiD,QAAU,EACxB,yBACAgiD,EAAiBhiD,QAAU,IAC3B,gCACAgiD,EAAiBhiD,OAAS,EAC1B,iCACA,4BAGL,yBACC8pB,UACCk4B,EAAiBhiD,QAAU,EACxB,yBACAgiD,EAAiBhiD,QAAU,IAC3B,gCACAgiD,EAAiBhiD,OAAS,EAC1B,iCACA,4BAGL,yBACC8pB,UACCk4B,EAAiBhiD,QAAU,EACxB,yBACAgiD,EAAiBhiD,QAAU,IAC3B,gCACAgiD,EAAiBhiD,OAAS,EAC1B,iCACA,6BAKN,0BAAM8pB,UAAU,eACdk4B,EAAiBniD,eAUzB,KAEEojD,GACLxzB,GACA4yB,GAAqC,KACrCO,GAA0B5pD,OAAS,EAClC,yBAAK8wB,UAAU,iDACd,0BAAMA,UAAU,qCAAhB,uDACkD62B,EAAc1+B,mBADhE,oDAGC8+B,EAA6B6B,GAA0B5pD,OACvD,yBAAK8wB,UAAU,kBACd,0BAAMA,UAAU,wBACf,yCACCi3B,EAA6B,EAD9B,uBAGA,yBAAKj3B,UAAU,mCACd,yBACCA,UACCm3B,EAAoB,EACjB,4BACA,yBAEJvqD,MAAM,kBACN2+B,YAAa,SAACH,GAAD,OAAQgsB,EAAqB,IAC1C5rB,aAAc,SAACJ,GAAD,OACbgsB,EACC0B,GAA0B7B,GACxB/gD,SAGJupB,QAAS,kBACRhZ,GACCqyC,GAA0B7B,GAC1B,MAIH,yBACCj3B,UACCm3B,EAAoB,EACjB,4BACA,yBAEJvqD,MAAM,YACN2+B,YAAa,SAACH,GAAD,OAAQgsB,EAAqB,IAC1C5rB,aAAc,SAACJ,GAAD,OACbgsB,EACC0B,GAA0B7B,GACxB/gD,SAGJupB,QAAS,kBACRhZ,GACCqyC,GAA0B7B,GAC1B,MAIH,yBACCj3B,UACCm3B,EAAoB,EACjB,4BACA,yBAEJvqD,MAAM,WACN2+B,YAAa,SAACH,GAAD,OAAQgsB,EAAqB,IAC1C5rB,aAAc,SAACJ,GAAD,OACbgsB,EACC0B,GAA0B7B,GACxB/gD,SAGJupB,QAAS,kBACRhZ,GACCqyC,GAA0B7B,GAC1B,MAIH,yBACCj3B,UACCm3B,EAAoB,EACjB,4BACA,yBAEJvqD,MAAM,kBACN2+B,YAAa,SAACH,GAAD,OAAQgsB,EAAqB,IAC1C5rB,aAAc,SAACJ,GAAD,OACbgsB,EACC0B,GAA0B7B,GACxB/gD,SAGJupB,QAAS,kBACRhZ,GACCqyC,GAA0B7B,GAC1B,MAIH,yBACCj3B,UACCm3B,EAAoB,EACjB,4BACA,yBAEJvqD,MAAM,iBACN2+B,YAAa,SAACH,GAAD,OAAQgsB,EAAqB,IAC1C5rB,aAAc,SAACJ,GAAD,OACbgsB,EACC0B,GAA0B7B,GACxB/gD,SAGJupB,QAAS,kBACRhZ,GACCqyC,GAA0B7B,GAC1B,OAKJ,0BAAMj3B,UAAU,WAAhB,QACA,4BACCA,UAAU,cACVP,QAAS,SAAC2L,GAAD,OACR8rB,GAA8B,SAACxrC,GAAD,OAAcA,EAAW,OAHzD,SASD,yBAAKsU,UAAU,aACd,uBACCA,UAAU,eACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BosD,GAA0B7B,GAA4B5jD,GACtDylD,GAA0B7B,GAA4BrqD,QAGvD,yBACCqyB,SAEa9zB,IADZ2tD,GAA0B7B,GACxBpjD,MACCilD,GAA0B7B,GACzBpjD,MACD,2FAEJqrB,IACC45B,GAA0B7B,GAA4BrqD,SAIzD,yBAAKozB,UAAU,iBACd,uBACCA,UAAU,eACVhB,KAAM5zB,EAASY,cAAcU,iBAC5BosD,GAA0B7B,GAA4B5jD,GACtDylD,GAA0B7B,GAA4BrqD,QAGtDksD,GAA0B7B,GAA4BrqD,OAExD,0BAAMozB,UAAU,mBACf,qCACA,uBACCA,UAAU,gBACVhB,KAAM5zB,EAASY,cAAc0B,mBAC5BorD,GAA0B7B,GACxBtpD,SACFmrD,GAA0B7B,GACxB16C,aAIFu8C,GAA0B7B,GACxB16C,aAIL,0BAAMyjB,UAAU,mBACf,wCAAU62B,EAAc1+B,mBAAxB,gBACA,yBAAK6H,UAAU,gBACd,yBACCA,UACC84B,GAA0B7B,GACxB/gD,QAAU,EACT,yBACA4iD,GACA7B,GACE/gD,QAAU,GACZ,gCACA4iD,GACA7B,GACE/gD,OAAS,EACX,iCACA,4BAGL,yBACC8pB,UACC84B,GAA0B7B,GACxB/gD,QAAU,EACT,yBACA4iD,GACA7B,GACE/gD,QAAU,IACZ,gCACA4iD,GACA7B,GACE/gD,OAAS,EACX,iCACA,4BAGL,yBACC8pB,UACC84B,GAA0B7B,GACxB/gD,QAAU,EACT,yBACA4iD,GACA7B,GACE/gD,QAAU,IACZ,gCACA4iD,GACA7B,GACE/gD,OAAS,EACX,iCACA,4BAGL,yBACC8pB,UACC84B,GAA0B7B,GACxB/gD,QAAU,EACT,yBACA4iD,GACA7B,GACE/gD,QAAU,IACZ,gCACA4iD,GACA7B,GACE/gD,OAAS,EACX,iCACA,4BAGL,yBACC8pB,UACC84B,GAA0B7B,GACxB/gD,QAAU,EACT,yBACA4iD,GACA7B,GACE/gD,QAAU,IACZ,gCACA4iD,GACA7B,GACE/gD,OAAS,EACX,iCACA,8BAKP,0BAAM8pB,UAAU,oBACf,+CACC84B,GACA7B,GACCliC,YAAYrhB,KAAI,SAACikD,EAAWj8C,GAC7B,OACC,0BACCskB,UAAU,iBACVvkB,IAAKC,GAFN,UAGKi8C,EAHL,gBAQUxsD,IADZ2tD,GAA0B7B,GACzB7+C,OACD,yBACC4nB,UACCq3B,EAAiB,wBAA0B,eAG5C,0BAAMr3B,UAAU,eAEd84B,GAA0B7B,GACxB7+C,QAGH0gD,GAA0B7B,GACzB7+C,OAAOlJ,OAAS,IACjB,4BACC8wB,UAAU,mBACVP,QAAS,SAAC2L,GAAD,OACRksB,GAAkB,SAAC5rC,GAAD,OAAeA,OAGjC2rC,EAAiB,SAAW,WAE3B,MAEF,MAEL,yBAAKr3B,UAAU,sBACd,6CAAei3B,EAA6B,EAA5C,eACC6B,GAA0B5pD,YAM9B,yBAAK8wB,UAAU,wBACd,iDAAmBm4B,EAAnB,iCAAiEtB,EAAc1+B,mBAA/E,oDAA6IygC,GAA7I,eACA,uBACC55B,KAAM5zB,EAASY,cAAcqC,iBAC5BN,EACA8oD,EAAc1+B,qBAHhB,kBAKa0+B,EAAc1+B,mBAL3B,iBASA,KAEC6rB,GAAyBre,EAC9B,yBAAK3F,UAAU,qDACbyiB,GACAoU,EAAct+B,eAAerpB,OAAS,EACtC,yBAAK8wB,UAAU,2BACb+4B,GACAC,GACAG,IAGF,0BAAMn5B,UAAU,uBAAhB,UAA0C62B,EAAc1+B,mBAAxD,8BAGC,KAEE8rB,GAA0Bte,EAC/B,yBAAK3F,UAAU,sDACd,uBACChB,KAAM5zB,EAASY,cAAcqC,iBAC5BN,EACA8oD,EAAc1+B,qBAHhB,kBAKa0+B,EAAc1+B,mBAL3B,oBAMA,uBACC6G,KAAM5zB,EAASY,cAAcuG,kCAC5BxE,EACA8oD,EAAc1+B,qBAHhB,2BAQA,uBACC6G,KAAM5zB,EAASY,cAAcsG,qCAC5BvE,IAFF,8BAIyB8oD,EAAc1+B,qBACvC,yBAAK6H,UAAU,uBACd,2BAAOR,QAAQ,kBAAf,kBACA,4BACChyB,KAAK,iBACL2xB,MAAO7Y,EACP8Y,SAAU,SAACC,GACV1f,EAAQvL,KAAK,CACZ2L,SAAU3U,EAASY,cAAckF,6BAChCnD,GAEDutC,OAAO,SAAD,OAAWob,EAAX,kBAA+Br3B,EAAEC,OAAOH,WAIhD,uCACA,wCACA,qDACA,2CACC04B,EAAcnkD,KAAI,SAAC4S,EAAO5K,GAC1B,OAAO,4BAAQD,IAAKC,GAAQ4K,QAI/B,yBAAK0Z,UAAU,qBACd,2BAAOR,QAAQ,gBAAf,gBACA,4BACChyB,KAAK,eACL2xB,MAAOw3B,EACPv3B,SAAU,SAACC,GACV1f,EAAQvL,KAAK,CACZ2L,SAAU3U,EAASY,cAAckF,6BAChCnD,GAEDutC,OAAO,SAAD,OAAWob,EAAX,uBAAoCr3B,EAAEC,OAAOH,MAA7C,yBAAmEy3B,OAI3E,uCACA,wCACA,qDACA,2CACCc,EAAwBhkD,KAAI,SAAC4S,EAAO5K,GACpC,OAAO,4BAAQD,IAAKC,GAAQ4K,QAI/B,yBAAK0Z,UAAU,sBACd,2BAAOR,QAAQ,iBAAf,iBACA,4BACChyB,KAAK,gBACL2xB,MAAOy3B,EACPx3B,SAAU,SAACC,GACV1f,EAAQvL,KAAK,CACZ2L,SAAU3U,EAASY,cAAckF,6BAChCnD,GAEDutC,OAAO,SAAD,OAAWob,EAAX,uBAAoCC,EAApC,yBAA8Dt3B,EAAEC,OAAOH,WAI/E,uCACA,wCACA,qDACA,2CACCy4B,EAAqBlkD,KAAI,SAAC4S,EAAO5K,GACjC,OAAO,4BAAQD,IAAKC,GAAQ4K,SAK7B,KAEJ,OACC,yBAAK0Z,UAAU,2BACd,kBAAC,EAAD,MACA,yBAAKA,UAAU,wCACbgkB,GACAC,IAEF,kBAAC,EAAD,SCtRYmV,I,OAvtBmB,WACjC,IAAMz5C,EAAUof,cAEVs6B,EADQ,IAAIhe,gBAAgB5W,cAAc6W,QAC3BvoC,IAAI,MACnBhF,EAAoB,OAAXsrD,EAAkBA,EAAO53C,MAAM,KAAK,GAAK,KAClDjJ,EACM,OAAX6gD,EACGA,EACC53C,MAAM,KACN9Q,MAAM,GACN+C,KAAI,SAAClG,GAAD,OAAUA,EAAK,GAAG2c,cAAgB3c,EAAKmD,MAAM,MACjDxB,KAAK,KACN,KACEmqD,EAA6B,OAAb9gD,EAAoBA,EAASiJ,MAAM,KAAK,GAAK,KAb5B,EAcXkd,oBAAS,GAdE,mBAchCgH,EAdgC,KAcxBC,EAdwB,OAeLjH,mBAAS,IAfJ,mBAehC46B,EAfgC,KAerBC,EAfqB,OAgBL76B,mBAAS,IAhBJ,mBAgBhC86B,EAhBgC,KAgBrBC,EAhBqB,OAiBW/6B,mBAAS,GAjBpB,mBAiBhCg7B,EAjBgC,KAiBbC,EAjBa,KAmBjCC,EAAkBC,mBACvB,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAEKC,EAAmBD,mBACxB,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAEKE,EAAyBF,mBAC9B,iBAAM,CAAC,uBAAwB,0BAC/B,IAEKG,EAAoBH,mBACzB,iBAAM,CACL,uBACA,uBACA,0BAED,IAEKI,EAAqBJ,mBAC1B,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAEKK,EAAkBL,mBACvB,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAEKM,EAAkBN,mBACvB,iBAAM,CAAC,uBAAwB,0BAC/B,IAEKO,EAAyBP,mBAC9B,iBAAM,CACL,uBACA,uBACA,0BAED,IAEKQ,EAAwBR,mBAC7B,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAGKS,EACL,6FAEKliD,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,YACI,uCAAG,sBAAA7uB,EAAA,kEACf8mD,EADe,SAERv1B,uBACL/4B,EAASotB,yCACRqhC,EACAE,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,IAZY,8CAgBfd,EAhBe,SAiBRr1B,uBACL/4B,EAASyuB,qCACRggC,EACAE,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAjiD,EAAKrN,QACL+C,EACA4R,IA9BY,kCAkCfimB,GAAU,GAlCK,4CAAH,qDAoCb4c,KACE,CACFuX,EACAC,EACAH,EACAI,EACAE,EACAG,EACAD,EACAH,EACAE,EACA/hD,EAAKrN,QACL+C,EACA4R,IAGD,IAAM66C,EAA4B,SACjCC,EACAC,EACAC,GAEA,IAAMlC,EAAqBgC,EAAuBrjD,QACjD,SAAC6gB,GAAD,OACCyiC,EAAejnC,MACd,SAACzX,GAAD,OACCA,EAAKic,SAAWA,QACA9sB,IAAhB6Q,EAAK9F,QACL8F,EAAK9F,OAAS,MAEhBykD,EAAelnC,MACd,SAACzX,GAAD,OACCA,EAAKic,SAAWA,QACA9sB,IAAhB6Q,EAAK9F,QACL8F,EAAK9F,OAAS,QAGlB,OAAkC,IAA9BuiD,EAAmBvpD,QACd,EAEFupD,EAAmBhtC,QACzB,SAACC,EAAUC,GAAX,OACCD,GACC,EACAjI,KAAKwvB,IACJynB,EAAetjD,QAAO,SAAC4E,GAAD,OAAUA,EAAKic,SAAWtM,KAAS,GAAGzV,OAC3DykD,EAAevjD,QAAO,SAAC4E,GAAD,OAAUA,EAAKic,SAAWtM,KAAS,GAAGzV,SAE9D,EACAuiD,EAAmBvpD,SACrB,IAmEI0rD,EAAe,CA/DAj1B,EAClB60B,EACAX,EACAN,EAAUp/B,aAAaf,aACvBmgC,EAAUn/B,UAAUhB,cAEpB,EACmBuM,EACnB60B,EACAT,EACAR,EAAUp/B,aAAad,cACvBkgC,EAAUn/B,UAAUf,eAEpB,EACyBsM,EACzB60B,EACAR,EACAT,EAAUp/B,aAAab,oBACvBigC,EAAUn/B,UAAUd,qBAEpB,EACoBqM,EACpB60B,EACAP,EACAV,EAAUp/B,aAAaZ,eACvBggC,EAAUn/B,UAAUb,gBAEpB,EACqBoM,EACrB60B,EACAN,EACAX,EAAUp/B,aAAaX,gBACvB+/B,EAAUn/B,UAAUZ,iBAEpB,EACkBmM,EAClB60B,EACAL,EACAZ,EAAUp/B,aAAaV,aACvB8/B,EAAUn/B,UAAUX,cAEpB,EACkBkM,EAClB60B,EACAJ,EACAb,EAAUp/B,aAAaT,aACvB6/B,EAAUn/B,UAAUV,cAEpB,EACyBiM,EACzB60B,EACAH,EACAd,EAAUp/B,aAAaR,oBACvB4/B,EAAUn/B,UAAUT,qBAEpB,EACwBgM,EACxB60B,EACAF,EACAf,EAAUp/B,aAAaP,mBACvB2/B,EAAUn/B,UAAUR,oBAEpB,GAYGihC,EAAeD,EACnBxjD,QAAO,SAACwS,GAAD,OAAsB,IAAXA,KAClB6B,QACA,SAACC,EAAUC,GAAX,OACCD,EACAC,EAAUivC,EAAaxjD,QAAO,SAACwS,GAAD,OAAsB,IAAXA,KAAc1a,SACxD,GAGIuzC,EACL,wBAAIziB,UAAU,uCAAd,mCAKK86B,EAA8Bn1B,EACnC,yBAAK3F,UAAU,8DACd,uBACCA,UAAU,+BACVhB,KAAM5zB,EAASY,cAAcqC,iBAC5BgK,EAAKrN,QACLqN,EAAKpN,SAAS+C,YAGf,yBACCixB,SAC2C9zB,IAA1CouD,EAAUp/B,aAAa3L,eACpB+qC,EAAUp/B,aAAa3L,eACvB+rC,EAEJr7B,IAAK7mB,EAAKpN,SAAS+C,aAGrB,8BACC,0DACA,uBACCgxB,KAAM5zB,EAASY,cAAcqC,iBAC5BN,EACAyK,EAASiJ,MAAM,KAAK,KAGpBjJ,GAEF,6CAA8B,IAAfqiD,GAAoBnwB,QAAQ,GAA3C,QAED,uBACC1K,UAAU,+BACVhB,KAAM5zB,EAASY,cAAcqC,iBAC5BgK,EAAKrN,QACLqN,EAAKpN,SAAS+C,YAGf,yBACCixB,SACwC9zB,IAAvCouD,EAAUn/B,UAAU5L,eACjB+qC,EAAUn/B,UAAU5L,eACpB+rC,EAEJr7B,IAAK7mB,EAAKpN,SAAS+C,cAInB,KAEE+sD,EAA+Bp1B,EACpC,2BAAO3F,UAAU,+DAChB,+BACC,4BACC,wCACA,uCAGF,+BACE,CACA,UACA,WACA,kBACA,YACA,aACA,UACA,UACA,kBACA,mBACCtsB,KAAI,SAAClE,EAAOkM,GACb,IAAMs/C,GACoB,IAAzBJ,EAAal/C,GAAgB,EAAIk/C,EAAal/C,GAC/C,OACC,wBAAID,IAAKC,EAAOskB,UAAqB,IAAVtkB,EAAc,WAAa,IACrD,wBAAIskB,UAAU,eACb,uBACChB,KAAM5zB,EAASY,cAAc6D,kBAC5BL,EAAMiS,MAAM,KAAKtS,KAAK,OAGtBK,IAGH,wBAAIwwB,UAAU,YACb,8BAAoB,IAAbg7B,GACP,yBACCh7B,UAAW,cAA6B,IAAbg7B,GAAkBnZ,oBAQjD,KAEEoZ,EAA+C,SACpDC,EACAC,EACAC,EACAC,EACAC,EACA5/C,GAEA,IAAM6/C,EAA4B,SAACC,GAClC,OAAIA,EAAgBtsD,OAAS,OAEG/D,IAA9BqwD,EAAgB,GAAGtlD,QACW,IAA9BslD,EAAgB,GAAGtlD,OAGlB,yBAAK8pB,UAAU,gBACd,yBACCA,UACCw7B,EAAgB,GAAGtlD,QAAU,EAC1B,yBACAslD,EAAgB,GAAGtlD,QAAU,GAC7B,gCACAslD,EAAgB,GAAGtlD,OAAS,EAC5B,iCACA,4BAGL,yBACC8pB,UACCw7B,EAAgB,GAAGtlD,QAAU,EAC1B,yBACAslD,EAAgB,GAAGtlD,QAAU,IAC7B,gCACAslD,EAAgB,GAAGtlD,OAAS,EAC5B,iCACA,4BAGL,yBACC8pB,UACCw7B,EAAgB,GAAGtlD,QAAU,EAC1B,yBACAslD,EAAgB,GAAGtlD,QAAU,IAC7B,gCACAslD,EAAgB,GAAGtlD,OAAS,EAC5B,iCACA,4BAGL,yBACC8pB,UACCw7B,EAAgB,GAAGtlD,QAAU,EAC1B,yBACAslD,EAAgB,GAAGtlD,QAAU,IAC7B,gCACAslD,EAAgB,GAAGtlD,OAAS,EAC5B,iCACA,4BAGL,yBACC8pB,UACCw7B,EAAgB,GAAGtlD,QAAU,EAC1B,yBACAslD,EAAgB,GAAGtlD,QAAU,IAC7B,gCACAslD,EAAgB,GAAGtlD,OAAS,EAC5B,iCACA,6BAON,0BAAM8pB,UAAU,eAAew7B,EAAgB,GAAGzlD,QAI9C,0BAAMiqB,UAAU,gBAAhB,OAGR,OACC,2BAAOA,UAAU,0BAA0BvkB,IAAKC,GAC/C,+BACC,4BACC,4BAAKw/C,EAAe,UACpB,yCACA,sCAAQ5B,EAAR,cACA,uCAGF,+BACE6B,EAAaznD,KAAI,SAAC+nD,EAAYjmD,GAC9B,IAAM0iD,EAAmBmD,EAAuBjkD,QAC/C,SAAC4E,GAAD,OAAUA,EAAKic,SAAWwjC,KAErB5C,EAAgByC,EAAoBlkD,QACzC,SAAC4E,GAAD,OAAUA,EAAKic,SAAWwjC,KAE3B,OACC,wBACChgD,IAAKjG,EACLwqB,UAAWxqB,IAAM2lD,EAAajsD,OAAS,EAAI,WAAa,IAExD,4BACC,8BACC,uBACC8vB,KAAM5zB,EAASY,cAAcU,iBAC5B0uD,EAAgB5lD,GAAGnC,GACnB+nD,EAAgB5lD,GAAG5I,QAGnBwuD,EAAgB5lD,GAAG5I,OAErB,sCACA,uBACCoyB,KAAM5zB,EAASY,cAAc0B,mBAC5B0tD,EAAgB5lD,GAAG7H,SACnBytD,EAAgB5lD,GAAG+G,aAGnB6+C,EAAgB5lD,GAAG+G,cAIvB,4BAAKg/C,EAA0BrD,IAC/B,4BAAKqD,EAA0B1C,IAC/B,4BACEX,EAAiBhpD,OAAS,QACI/D,IAA/B+sD,EAAiB,GAAGhiD,QACW,IAA/BgiD,EAAiB,GAAGhiD,QACpB2iD,EAAc3pD,OAAS,QACK/D,IAA5B0tD,EAAc,GAAG3iD,QACW,IAA5B2iD,EAAc,GAAG3iD,OAGV,IAFNuN,KAAKwvB,IACJilB,EAAiB,GAAGhiD,OAAS2iD,EAAc,GAAG3iD,QAE9C,0BAAM8pB,UAAU,aAAhB,aAGO,IAFJvc,KAAKwvB,IACPilB,EAAiB,GAAGhiD,OAAS2iD,EAAc,GAAG3iD,QAE/C,0BAAM8pB,UAAU,QAAhB,QAGO,IAFJvc,KAAKwvB,IACPilB,EAAiB,GAAGhiD,OAAS2iD,EAAc,GAAG3iD,QAE/C,0BAAM8pB,UAAU,MAAhB,MAGO,IAFJvc,KAAKwvB,IACPilB,EAAiB,GAAGhiD,OAAS2iD,EAAc,GAAG3iD,QAE/C,0BAAM8pB,UAAU,YAAhB,YAEA,0BAAMA,UAAU,YAAhB,YAGD,uCAWH07B,EAAiB/1B,EACtB,yBAAK3F,UAAU,gDACbi7B,EACA,UACApB,EACAJ,EAAUrgC,aACVmgC,EAAUp/B,aAAaf,aACvBmgC,EAAUn/B,UAAUhB,aACpB,IAGC,KAEEuiC,EAAkBh2B,EACvB,yBAAK3F,UAAU,iDACbi7B,EACA,WACAlB,EACAN,EAAUpgC,cACVkgC,EAAUp/B,aAAad,cACvBkgC,EAAUn/B,UAAUf,cACpB,IAGC,KAEEuiC,EAAwBj2B,EAC7B,yBAAK3F,UAAU,wDACbi7B,EACA,kBACAjB,EACAP,EAAUngC,oBACVigC,EAAUp/B,aAAab,oBACvBigC,EAAUn/B,UAAUd,oBACpB,IAGC,KAEEuiC,EAAmBl2B,EACxB,yBAAK3F,UAAU,kDACbi7B,EACA,YACAhB,EACAR,EAAUlgC,eACVggC,EAAUp/B,aAAaZ,eACvBggC,EAAUn/B,UAAUb,eACpB,IAGC,KAEEuiC,EAAoBn2B,EACzB,yBAAK3F,UAAU,mDACbi7B,EACA,aACAf,EACAT,EAAUjgC,gBACV+/B,EAAUp/B,aAAaX,gBACvB+/B,EAAUn/B,UAAUZ,gBACpB,IAGC,KAEEuiC,GAAiBp2B,EACtB,yBAAK3F,UAAU,gDACbi7B,EACA,UACAd,EACAV,EAAUhgC,aACV8/B,EAAUp/B,aAAaV,aACvB8/B,EAAUn/B,UAAUX,aACpB,IAGC,KAEEuiC,GAAiBr2B,EACtB,yBAAK3F,UAAU,gDACbi7B,EACA,UACAb,EACAX,EAAU//B,aACV6/B,EAAUp/B,aAAaT,aACvB6/B,EAAUn/B,UAAUV,aACpB,IAGC,KAEEuiC,GAAwBt2B,EAC7B,yBAAK3F,UAAU,wDACbi7B,EACA,kBACAZ,EACAZ,EAAU9/B,oBACV4/B,EAAUp/B,aAAaR,oBACvB4/B,EAAUn/B,UAAUT,oBACpB,IAGC,KAEEuiC,GAAuBv2B,EAC5B,yBAAK3F,UAAU,uDACbi7B,EACA,kBACAX,EACAb,EAAU7/B,mBACV2/B,EAAUp/B,aAAaP,mBACvB2/B,EAAUn/B,UAAUR,mBACpB,IAGC,KAEEoqB,GACL,yBAAKhkB,UAAU,0DACbyiB,EACAqY,EACAC,EACAW,EACAC,EACAC,EACAC,EACAC,EACAC,GACAC,GACAC,GACAC,IAIGjY,GAA0Bte,EAC/B,yBAAK3F,UAAU,2DACd,yBAAKA,UAAU,aACd,uBACChB,KAAM5zB,EAASY,cAAcwG,6CAC5BzE,IAFF,mBAOA,uBAAGixB,KAAM5zB,EAASY,cAAckF,6BAA6BnD,IAA7D,kBAID,yBAAKiyB,UAAU,gCACd,oDACA,4BACCb,MAAOw6B,EACPv6B,SAAU,SAACC,GACV,IAAM88B,EAAiB98B,EAAEC,OAAOH,MAChCy6B,EAAqBuC,GAErBx8C,EAAQvL,KAAK,CACZ2L,SAAU3U,EAASY,cAAcuG,kCAChCgnD,EAAUp/B,aAAata,QAAQs8C,EAAiB,GAAG9oD,GACnDkmD,EAAUp/B,aAAata,QAAQs8C,EAAiB,GAAG3uD,UAKtD,4BAAQwyB,UAAU,oBAAoBb,MAAO,IAC5Co6B,EAAUp/B,aAAata,QAAQnM,KAAI,SAACoM,EAAQpE,GAC5C,OACC,4BAAQD,IAAKC,EAAOyjB,MAAOzjB,EAAQ,GACjCoE,EAAOtS,YAOX,KAEE6qC,GACL,yBAAKrY,UAAU,6CACbgkB,GACAC,IAIH,OACC,yBAAKjkB,UAAU,gCACd,kBAAC,EAAD,MACCqY,GACD,kBAAC,EAAD,SC5nBY+jB,I,OA1Fe,SAACt8B,GAAW,IAAD,EACcnB,mBAASmB,EAAM5pB,QAD7B,mBACjCmxB,EADiC,KACZC,EADY,OAEZ3I,oBAAS,GAFG,mBAEjC09B,EAFiC,KAEzBC,EAFyB,KAIlC71C,EAAQ,uCAAG,WAAOvQ,GAAP,SAAAtD,EAAA,sDAChB0pD,GAAU,GACVx8B,EAAMy8B,WAAWrmD,GACjBomD,GAAU,GAHM,2CAAH,sDAMd,OAAQD,EAqEP,yBAAKr8B,UAAU,mCACd,0BAAMA,UAAU,eAAhB,WArED,yBAAKA,UAAU,wCACd,yBACCA,UACCqH,EAAsB,EACnB,4BACA,yBAEJz6B,MAAM,kBACN2+B,YAAa,SAACH,GAAD,OAAQ9D,EAAuB,IAC5CkE,aAAc,SAACJ,GAAD,OACb9D,OAAwCn8B,IAAjB20B,EAAM5pB,OAAuB,EAAI4pB,EAAM5pB,SAE/DupB,QAAS,kBAAMhZ,EAAS,MAEzB,yBACCuZ,UACCqH,EAAsB,EACnB,4BACA,yBAEJz6B,MAAM,YACN2+B,YAAa,SAACH,GAAD,OAAQ9D,EAAuB,IAC5CkE,aAAc,SAACJ,GAAD,OACb9D,OAAwCn8B,IAAjB20B,EAAM5pB,OAAuB,EAAI4pB,EAAM5pB,SAE/DupB,QAAS,kBAAMhZ,EAAS,MAEzB,yBACCuZ,UACCqH,EAAsB,EACnB,4BACA,yBAEJz6B,MAAM,WACN2+B,YAAa,SAACH,GAAD,OAAQ9D,EAAuB,IAC5CkE,aAAc,SAACJ,GAAD,OACb9D,OAAwCn8B,IAAjB20B,EAAM5pB,OAAuB,EAAI4pB,EAAM5pB,SAE/DupB,QAAS,kBAAMhZ,EAAS,MAEzB,yBACCuZ,UACCqH,EAAsB,EACnB,4BACA,yBAEJz6B,MAAM,kBACN2+B,YAAa,SAACH,GAAD,OAAQ9D,EAAuB,IAC5CkE,aAAc,SAACJ,GAAD,OACb9D,OAAwCn8B,IAAjB20B,EAAM5pB,OAAuB,EAAI4pB,EAAM5pB,SAE/DupB,QAAS,kBAAMhZ,EAAS,MAEzB,yBACCuZ,UACCqH,EAAsB,EACnB,4BACA,yBAEJz6B,MAAM,iBACN2+B,YAAa,SAACH,GAAD,OAAQ9D,EAAuB,IAC5CkE,aAAc,SAACJ,GAAD,OACb9D,OAAwCn8B,IAAjB20B,EAAM5pB,OAAuB,EAAI4pB,EAAM5pB,SAE/DupB,QAAS,kBAAMhZ,EAAS,SCxBb+1C,I,OAlDU,SAAC18B,GAAW,IAAD,EACPnB,oBAAS,GADF,mBAC5B09B,EAD4B,KACpBC,EADoB,KAG7BG,EAAO,uCAAG,sBAAA7pD,EAAA,6DACf0pD,GAAU,GADK,SAETn4B,uBAAarE,EAAM48B,cAFV,OAGfJ,GAAU,GAHK,2CAAH,qDAMPK,EAAU,uCAAG,sBAAA/pD,EAAA,6DAClB0pD,GAAU,GADQ,SAEZn4B,uBAAarE,EAAM88B,mBAFP,OAGlBN,GAAU,GAHQ,2CAAH,qDAMhB,OACC,4BACCt8B,UACCF,EAAM+8B,WACH,kCACA,+BAEJp9B,QAAS,SAAC2L,GACLtL,EAAM+8B,WACTF,IAEAF,MAIF,8BACGJ,EAME,KALH,yBACCr8B,UAAU,YACVf,IAAI,kFACJC,IAAI,gBAGN,8BAAOm9B,EAAS,YAAc,oBCgOnBS,I,OAjQ0B,WACxC,IAAMn9C,EAAUof,cAD8B,EAElBJ,oBAAS,GAFS,mBAEvCgH,EAFuC,KAE/BC,EAF+B,OAGZjH,mBAAS,IAHG,mBAGvC86B,EAHuC,KAG5BC,EAH4B,OAIV/6B,mBAAS,IAJC,mBAIvCo+B,EAJuC,KAI3BC,EAJ2B,OAKAr+B,mBAAS,IALT,mBAKvC7Z,EALuC,KAKtBm4C,EALsB,KAOxClvD,EADQ,IAAIstC,gBAAgB5W,cAAc6W,QAC3BvoC,IAAI,MAEnBsF,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAKvCk6B,EAAiB,CACtB,gBACA,iBACA,wBACA,kBACA,mBACA,gBACA,gBACA,wBACA,yBAGKrD,EAAkBC,mBACvB,iBAAM,CACL,uBACA,uBACA,uBACA,uBACA,uBACA,0BAED,IAEKC,EAAmBD,mBACxB,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAEKE,EAAyBF,mBAC9B,iBAAM,CAAC,uBAAwB,0BAC/B,IAEKG,EAAoBH,mBACzB,iBAAM,CACL,uBACA,uBACA,0BAED,IAEKI,EAAqBJ,mBAC1B,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAEKK,EAAkBL,mBACvB,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAEKM,EAAkBN,mBACvB,iBAAM,CAAC,uBAAwB,0BAC/B,IAEKO,EAAyBP,mBAC9B,iBAAM,CACL,uBACA,uBACA,0BAED,IAEKQ,EAAwBR,mBAC7B,iBAAM,CACL,uBACA,uBACA,uBACA,0BAED,IAGDr4B,qBAAU,WACT,IAAM07B,EAAY,uCAAG,sBAAAvqD,EAAA,kEACpB8mD,EADoB,SAEbv1B,uBACL/4B,EAASotB,yCACRqhC,EACAE,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,IAZiB,kCAgBpB10B,GAAU,GAhBU,2CAAH,qDAkBG,OAAjBvtB,EAAKrN,cAAqCG,IAAjBkN,EAAKrN,QACjC2U,EAAQvL,KAAK,CACZ2L,SAAU,kBAGXo9C,MAEC,CACFtD,EACAE,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAjiD,EAAKrN,QACL2U,IAGD,IAAMy9C,EAAyB,uCAAG,WAAO/pD,GAAP,SAAAT,EAAA,sEAC3BuxB,uBACL/4B,EAAS4a,eAAe3N,EAAKrN,QAASqI,EAAI,UAAWsM,IAFrB,OAIjCs9C,GAAmB,SAACvxC,GAAD,OAAcA,EAASrE,OAAOhU,MAJhB,2CAAH,sDAOzBgqD,EAA6B,uCAAG,WAAOhqD,GAAP,SAAAT,EAAA,sEAC/BuxB,uBAAa/4B,EAASmb,oBAAoBlO,EAAKrN,QAASqI,IADzB,OAErC4pD,GAAmB,SAACvxC,GAAD,OAClBA,EAAStU,QAAO,SAACzK,GAAD,OAAYA,IAAW0G,QAHH,2CAAH,sDAO7BoT,EAAQ,uCAAG,WAAOpT,EAAI6C,GAAX,SAAAtD,EAAA,sEACVuxB,uBAAa/4B,EAASqb,SAASpO,EAAKrN,QAASqI,EAAI6C,EAAQyJ,IAD/C,OAEhBq9C,GAAc,SAACtxC,GAAD,OACbA,EAASrE,OAAO,CACfhU,KACA6C,cALc,2CAAH,wDAURonD,EACL,yBAAKt9B,UAAU,iEACd,uDACA,yFACA,uBACChB,KACY,OAAXjxB,EACG3C,EAASY,cAAcuG,kCAAkCxE,GACzD3C,EAASY,cAAcwF,6BAJ5B,oBAYI+rD,EAAoB53B,EACzB,yBAAK3F,UAAU,wEACd,yBAAKA,UAAU,cACbzkB,OAAOC,KAAKi+C,GAAW/lD,KAAI,SAAC+H,EAAKC,GACjC,IAAM8hD,EAAkB,SAACC,GACxB,OACC,yBAAKz9B,UAAU,YACby5B,EAAUh+C,GACTrE,QACA,SAACygC,EAAOriC,GAAR,OAAcA,GAAKioD,GAAiBjoD,EAAIioD,EAAgB,KAExD/pD,KAAI,SAACsI,EAAMxG,GACX,IAAMkoD,EAAYX,EAAW3lD,QAC5B,SAACsmD,GAAD,OAAeA,EAAUrqD,KAAO2I,EAAK3I,MAEtC,OACC,yBAAK2sB,UAAU,YAAYvkB,IAAKjG,GAC/B,yBACCypB,SACgB9zB,IAAf6Q,EAAKnI,MAAsBmI,EAAKnI,MAzL5C,2FA2LWqrB,IAAKljB,EAAKpP,QAEX,kBAAC,GAAD,CACCiwD,WAAY/3C,EAAgBpQ,SAASsH,EAAK3I,IAC1CqpD,WAAY,kBAAMU,EAA0BphD,EAAK3I,KACjDupD,gBAAiB,kBAChBS,EAA8BrhD,EAAK3I,OAGrC,kBAAC,GAAD,CACC6C,OACCwnD,EAAUxuD,OAAS,EAAIwuD,EAAU,GAAGxnD,OAAS,EAE9CqmD,WAAY,SAACrmD,GAAD,OAAYuQ,EAASzK,EAAK3I,GAAI6C,YASlD,OACC,yBAAK8pB,UAAU,sBAAsBvkB,IAAKC,GACzC,0BAAMskB,UAAU,iBAAiBk9B,EAAexhD,IAC/C8hD,EAAgB,GAChB/D,EAAUh+C,GAAKvM,OAAS,EACxB,yBAAK8wB,UAAU,YACZ,KACHy5B,EAAUh+C,GAAKvM,OAAS,EAAIsuD,EAAgB,GAAK,UAKtD,uBACCx+B,KACY,OAAXjxB,EACG3C,EAASY,cAAcuG,kCAAkCxE,GACzD3C,EAASY,cAAcwF,6BAJ5B,oBAUE,KAEJ,OACC,yBAAKwuB,UAAU,wCACd,kBAAC,EAAD,MACA,yBAAKA,UAAU,qDACbs9B,EACAC,GAEF,kBAAC,EAAD,SChHYI,I,OA9Ia,SAAC,GAAe,IAAb/zC,EAAY,EAAZA,MACxBjK,EAAUof,cAEL3J,EACPxL,EADHmb,OAAU3P,YAH+B,EAKduJ,oBAAS,GALK,mBAKnCgH,EALmC,KAK3BC,EAL2B,OAMVjH,mBAAS,IANC,mBAMnC1zB,EANmC,KAMzBs9C,EANyB,OAOc5pB,oBAAS,GAPvB,mBAOnCi/B,EAPmC,KAObC,EAPa,OAQZl/B,mBAAS,IARG,mBAQnC1e,EARmC,KAQ1B69C,EAR0B,OASAn/B,oBAAS,GATT,mBASnCo/B,EATmC,KASpBC,EAToB,KAWpC3lD,EAAOxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAE7CvB,qBAAU,WACT,IAAM+mB,EAAW,uCAAG,sBAAA51C,EAAA,kEACnB21C,EADmB,SAEZpkB,uBACL/4B,EAASqvB,8BACRpiB,EAAKrN,QACLoqB,EACAzV,IANgB,kCAUnBimB,GAAU,GAVS,2CAAH,qDAabvtB,EAAKrN,UAAYoqB,EACpBzV,EAAQvL,KAAK,CACZ2L,SAAU3U,EAASY,cAAcqC,iBAChC+mB,EACA/c,EAAKpN,SAAS+C,WAEfvD,MAAO,wCAEmB,OAAjB4N,EAAKrN,cAAqCG,IAAjBkN,EAAKrN,QACxC2U,EAAQvL,KAAK,CACZ2L,SAAU,kBAGXyoC,MAEC,CAACnwC,EAAKrN,QAASoqB,EAAa/c,EAAKpN,SAAS+C,UAAW2R,IAExD,IAAM8iC,EAAa9c,EAClB,wBAAI3F,UAAU,kCACb,uBACChB,KAAM5zB,EAASY,cAAcqC,iBAC5B+mB,EACAnqB,EAAS+C,YAGT/C,EAAS+C,WAEX,8BAAO,uBAEL,KAEEiwD,EAAkBt4B,EACvB,yBAAK3F,UAAU,6CACd,0EAA4C/0B,EAAS+C,UAArD,MACA,kGAGA,uBACCgyB,UAAU,OACVhB,KAAM5zB,EAASY,cAAcqC,iBAC5B+mB,EACAnqB,EAAS+C,YAJX,OAUE,KAEEkwD,EAAqBv4B,EAC1B,yBAAK3F,UAAU,+CACd,0BAAMA,UAAU,cAAhB,kFAIA,0BAAMA,UAAU,cAAhB,sBAA6C/0B,EAAS+C,UAAtD,+DACA,4BACCgyB,UAAU,qBACVP,QAAS,SAAC2L,GAAD,OAAQyyB,GAAwB,SAACnyC,GAAD,OAAeA,OAFzD,gCAI4B,KAE5B,8BACCsU,UAAW49B,EAAuB,UAAY,iBAC9Cz+B,MAAOlf,EACPmf,SAAU,SAACC,GAAD,OAAOy+B,EAAWz+B,EAAEC,OAAOH,UAEtC,0BAAMa,UAAU,aAAhB,wEAA8F/0B,EAAS+C,UAAvG,qCAA6I/C,EAASuY,SAAtJ,iGAEE,KAEEsxB,EAAgBnP,EACrB,yBAAK3F,UAAU,0CACd,4BACCA,UAAU,oBACVP,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,sEACFxH,EAASivB,kBACdhiB,EAAKrN,QACLoqB,EACAnV,EAAQ/Q,OAAS,EAAI+Q,OAAU9U,GAJxB,OAMR6yD,GAAiB,GANT,2CAAF,uDAFR,mBAaA,uBACCh+B,UAAU,WACVhB,KAAM5zB,EAASY,cAAcqC,iBAC5B+mB,EACAnqB,EAAS+C,YAJX,WAUE,KAEEqqC,EACL,yBAAKrY,UAAU,wCACbyiB,EACCsb,EAAqCE,EAArBC,EAChBH,EAAgC,KAAhBjpB,GAIpB,OACC,yBAAK9U,UAAU,2BACd,kBAAC,EAAD,MACCqY,EACD,kBAAC,EAAD,SCIY8lB,I,cAjJW,SAACr+B,GAAW,IAAD,EACUnB,mBAC7CmB,EAAMs+B,sBAF6B,mBAC7BC,EAD6B,KACZC,EADY,OAIY3/B,mBAAS,IAJrB,mBAI7B4/B,EAJ6B,KAIXC,EAJW,OAK4B7/B,oBAC/D,GANmC,mBAK7B8/B,EAL6B,KAKHC,EALG,OAQM//B,mBAAS,IARf,mBAQ7BoI,EAR6B,KAQdC,EARc,KAcpC,OAJAvF,qBAAU,WACT68B,EAAmBx+B,EAAMs+B,wBACvB,CAACt+B,EAAMs+B,uBAGT,yBAAKp+B,UAAU,4CACd,yBAAKA,UAAU,qBACd,yBAAKA,UAAU,yBACd,4BAAQA,UAAU,yBAAlB,qBACA,4BACCA,UAAU,qBACVP,QAAS,SAAC2L,GAAD,OAAQtL,EAAM6+B,UAFxB,UAOD,2BACCp0D,KAAK,OACLy1B,UAAU,qBACVb,MAAOo/B,EACPn/B,SAAU,SAACC,GAAD,OAAOm/B,EAAoBn/B,EAAEC,OAAOH,WAGhD,yBAAKa,UAAU,wBACbF,EAAMnxB,QACLyI,QACA,SAACkP,GAAD,OAC6B,IAA5Bi4C,EAAiBrvD,QACjBoX,EAAM5R,SAAS6pD,EAAiB9wD,kBAEjCiG,KAAI,SAAC4S,EAAO5K,GACZ,OACC,yBACCskB,UACW,SAAV1Z,EACG+3C,EAAgB3pD,SAAS4R,GACxB,8BACA,qBACD+3C,EAAgB3pD,SAAS4R,GACzB,uBACA,cAEJ7K,IAAKC,EACL+jB,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,yDACHyrD,EAAgB3pD,SAAS4R,GADtB,qBAGN,CAAC,OAAQ,UAAW,qBAAqB5R,SAAS4R,GAH5C,mBAKD+3C,EAAgB3pD,SAAS4R,GALxB,uBAMLg4C,GAAmB,SAAC5yC,GAAD,OAClBA,EACEtU,QACA,SAAC+4C,GAAD,OACE,CACA,OACA,UACA,qBACCz7C,SAASy7C,MAEZ9oC,OAAOf,MAhBL,SAkBCwZ,EAAM8+B,iBAAiBt4C,GAlBxB,iCAoBK+3C,EAAgB3pD,SAAS4R,GApB9B,wBAqBNg4C,GAAmB,SAAC5yC,GAAD,OAAcA,EAASrE,OAAOf,MArB3C,UAsBAwZ,EAAM9Z,eAAeM,GAtBrB,4CAAF,uDA2BP,8BAAOA,QAKZ,yBAAK0Z,UAAU,yBACZy+B,GAA4BF,EAAiBrvD,OAAS,EACvD,4BACC8wB,UAAU,uBACVP,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,yDAEqB,IAA5B2rD,EAAiBrvD,SACjB4wB,EAAMnxB,QAAQ+F,SAAS6pD,GAHhB,gBAKPG,GAA4B,GALrB,sCAOD5+B,EAAM9Z,eAAeu4C,GAPpB,OAQPC,EAAoB,IACpBE,GAA4B,GATrB,2CAAF,uDAasB,IAA5BH,EAAiBrvD,QAClB4wB,EAAMnxB,QAAQ+F,SAAS6pD,GACtB,0BAAMv+B,UAAU,sBAAhB,iBAEA,qCAEC,sCAAQu+B,EAAR,MAFD,WAQF,yBAAKv+B,UAAU,2BACd,2BACCz1B,KAAK,OACL40B,MAAO4H,EACP3H,SAAU,SAACC,GAAD,OAAO2H,EAAiB3H,EAAEC,OAAOH,UAE5C,4BACCa,UAAU,kCACVP,QAAO,uCAAE,WAAO2L,GAAP,SAAAx4B,EAAA,sEACFktB,EAAM9Z,eAAe+gB,GADnB,OAERC,EAAiB,IACjB03B,GAA4B,GAHpB,2CAAF,uDAFR,YCrFSG,I,OAnCW,SAAC/+B,GAAW,IAAD,EACAnB,oBAAS,GADT,mBAC7BmgC,EAD6B,KACjBC,EADiB,KAGpC,OACC,yBACC/+B,UACC8+B,EACG,sDACA,2CAGJ,0BAAM9+B,eAAgC70B,IAArB20B,EAAMlK,WAA2B,iBAAmB,SAC9CzqB,IAArB20B,EAAMlK,WACJkK,EAAMlK,WAAWjlB,MACjB,EACAmuD,EAAah/B,EAAMlK,WAAW1mB,OAAS,KAEvC,aAEkB/D,IAArB20B,EAAMlK,YAA4BkK,EAAMlK,WAAW1mB,OAAS,IAC5D,4BACC8wB,UAAU,0BACVP,QAAS,SAAC2L,GAAD,OAAQ2zB,GAAc,SAACrzC,GAAD,OAAeA,OAE7CozC,EAAa,SAAW,WAEvB,QCLQE,I,OArBS,SAACl/B,GAAW,IAAD,EACAnB,oBAAS,GADT,mBAC3BsgC,EAD2B,KAChBC,EADgB,KAGlC,OACC,yBACCl/B,UAAS,0BAAqBF,EAAMwT,MAA3B,YAAqC2rB,EAAuB,GAAX,WAE1D,8BAAOn/B,EAAMliB,SACb,4BACCoiB,UAAU,eACVP,QAAS,SAAC2L,GAAD,OAAQ8zB,GAAa,SCiJnBC,I,OA1JoB,SAACr/B,GAAW,IAAD,EACrBnB,wBACDxzB,IAAtB20B,EAAMs/B,YACHt/B,EAAMs/B,YAAY/kD,cAAcwnC,WAChC,IAJyC,mBACtCvwC,EADsC,KAChC+tD,EADgC,OAMnB1gC,wBACHxzB,IAAtB20B,EAAMs/B,YACHt/B,EAAMs/B,YAAY3T,WAAW5J,WAC7B,IATyC,mBAMtC8J,EANsC,KAM/B2T,EAN+B,OAWvB3gC,wBACCxzB,IAAtB20B,EAAMs/B,YACHt/B,EAAMs/B,YAAY1T,UAAU7J,WAC5B,IAdyC,mBAWtC0d,EAXsC,KAWjCC,EAXiC,OAgBD7gC,oBAAS,GAhBR,mBAgBtC8gC,EAhBsC,KAgBtBC,EAhBsB,OAiBX/gC,oBAAS,GAjBE,mBAiBtCghC,EAjBsC,KAiB3BC,EAjB2B,KAyB7C,OACC,yBAAK5/B,UAAU,iCACd,0BAAMA,eAAiC70B,IAAtB20B,EAAMs/B,YAA4B,eAAiB,SAC5Cj0D,IAAtB20B,EAAMs/B,YACJh2C,YAAO0W,EAAMs/B,YAAa,gBAC1B,WAEJ,4BACCp/B,UAAU,cACVP,QAAS,SAAC2L,GAAD,OAAQs0B,GAAkB,SAACh0C,GAAD,OAAeA,OAFnD,UAMEi0C,EAkGD,yBAAK3/B,UAAU,iCACd,yBACCA,UAAU,sBACVf,IAAI,oFACJC,IAAI,YAEL,0BAAMc,UAAU,eAAhB,cAvGD,yBACCA,UACCy/B,EAAiB,iBAAmB,yBAGrC,yBAAKz/B,UAAU,qBACd,4BACCA,UAAU,cACVb,MAAO7tB,EACP8tB,SAAU,SAACC,GAAD,OAAOggC,EAAQhgC,EAAEC,OAAOH,SAElC,4BAAQA,MAAM,KACboL,MAAM,KACL0B,KAAK,GACLv4B,KAAI,SAAC8hC,EAAQ95B,GAAT,QACH,IAAIsG,MAAO3H,cAAgB,KAAO,IAAMqB,IAAQmmC,cAEjDnuC,KAAI,SAACpC,EAAMoK,GACX,OACC,4BAAQyjB,MAAO7tB,EAAMmK,IAAKC,GACxBpK,OAKN,4BACC0uB,UAAU,eACVb,MAAOwsB,EACPvsB,SAAU,SAACC,GAAD,OAAOigC,EAASjgC,EAAEC,OAAOH,SAEnC,4BAAQA,MAAM,KACd,4BAAQA,MAAM,KAAd,WACA,4BAAQA,MAAM,KAAd,YACA,4BAAQA,MAAM,KAAd,SACA,4BAAQA,MAAM,KAAd,SACA,4BAAQA,MAAM,KAAd,OACA,4BAAQA,MAAM,KAAd,QACA,4BAAQA,MAAM,KAAd,QACA,4BAAQA,MAAM,KAAd,UACA,4BAAQA,MAAM,KAAd,aACA,4BAAQA,MAAM,KAAd,WACA,4BAAQA,MAAM,MAAd,YACA,4BAAQA,MAAM,MAAd,aAED,4BACCa,UAAU,aACVb,MAAOogC,EACPngC,SAAU,SAACC,GAAD,OAAOmgC,EAAOngC,EAAEC,OAAOH,SAEjC,4BAAQA,MAAM,KACboL,MAAM,IACL0B,KAAK,GACLv4B,KAAI,SAAC8hC,EAAQ95B,GAAT,OACJ,4BAAQD,IAAKC,EAAOyjB,OAAQzjB,EAAQ,GAAGmmC,YACrCnmC,EAAQ,OAIb,4BACCskB,UAAU,sBACVP,QAAS,SAAC2L,GAAD,OA/Edi0B,GAAQ,IAAIr9C,MAAO3H,cAAcwnC,YACjCyd,GAAS,IAAIt9C,MAAOypC,WAAW5J,iBAC/B2d,GAAO,IAAIx9C,MAAO0pC,UAAU7J,cA2ExB,iBAOD,yBAAK7hB,UAAU,wBACd,yBAAKA,UAAU,gBACd,4BACCA,UAAU,cACVP,QAAS,SAAC2L,GACTw0B,GAAa,GACTtuD,EAAKpC,OAAS,GAAKy8C,EAAMz8C,OAAS,GAAKqwD,EAAIrwD,OAAS,GACvD4wB,EAAM+/B,KACL,IAAI79C,KAAK+H,SAASzY,GAAOyY,SAAS4hC,GAAQ5hC,SAASw1C,KAGrDK,GAAa,KATf,QAcA,4BACC5/B,UAAU,gBACVP,QAAS,SAAC2L,GAAD,OAAQs0B,GAAkB,KAFpC,WAOD,4BACC1/B,UAAU,gBACVP,QAAS,SAAC2L,GAAD,OAAQs0B,GAAkB,KAFpC,cCiwFSI,GAv3FW,SAAC,GAAe,IAAbl2C,EAAY,EAAZA,MACtBm2C,EAAsBn9B,mBACtBjjB,EAAUof,cAELs6B,EACPzvC,EADHmb,OAAUs0B,OAELtrD,EAASsrD,EAAO53C,MAAM,KAAK,GAC3B63C,EACLD,EAAO53C,MAAM,KAAK,GAAG,GAAG0I,cAAgBkvC,EAAO53C,MAAM,KAAK,GAAG9Q,MAAM,GAC9DotB,EAAQ,IAAIsd,gBAAgB5W,cAAc6W,QAC1C3sC,EACkB,OAAvBovB,EAAMhrB,IAAI,eAA4C5H,IAAvB4yB,EAAMhrB,IAAI,SACtCgrB,EAAMhrB,IAAI,SAAS0O,MAAM,KACzB,CAAC,OACCu+C,EACkB,OAAvBjiC,EAAMhrB,IAAI,eAA4C5H,IAAvB4yB,EAAMhrB,IAAI,SACf,MAAvBgrB,EAAMhrB,IAAI,SACT,aACA,YACD,aACE+Y,EACiB,OAAtBiS,EAAMhrB,IAAI,cAA0C5H,IAAtB4yB,EAAMhrB,IAAI,QACrCgrB,EAAMhrB,IAAI,QACV,aACEktD,EACqB,OAA1BliC,EAAMhrB,IAAI,kBAAkD5H,IAA1B4yB,EAAMhrB,IAAI,YACzCgrB,EAAMhrB,IAAI,YACV,GACEhE,EACiB,OAAtBgvB,EAAMhrB,IAAI,cAA0C5H,IAAtB4yB,EAAMhrB,IAAI,QACrCgX,SAASgU,EAAMhrB,IAAI,SACnB,EACElE,EACiB,OAAtBkvB,EAAMhrB,IAAI,cAA0C5H,IAAtB4yB,EAAMhrB,IAAI,QACrCgrB,EAAMhrB,IAAI,QACV,QACEmtD,EACyB,OAA9BniC,EAAMhrB,IAAI,sBACoB5H,IAA9B4yB,EAAMhrB,IAAI,gBACPgrB,EAAMhrB,IAAI,gBACV,GAxCoC,EAyCZ4rB,oBAAS,GAzCG,mBAyCjCgH,EAzCiC,KAyCzBC,EAzCyB,OA0CRjH,mBAAS,IA1CD,mBA0CjC1zB,EA1CiC,KA0CvBs9C,EA1CuB,OA2Cc5pB,mBAAS,IA3CvB,mBA2CjCwhC,EA3CiC,KA2CZC,EA3CY,KA6ClCpS,EAAavpB,cAAch6B,MA7CO,EA+CMk0B,mBAASuhC,GA/Cf,mBA+CjCG,EA/CiC,KA+ChBC,EA/CgB,OAgDU3hC,oBAAS,GAhDnB,mBAgDjC4hC,EAhDiC,KAgDdC,EAhDc,OAiDkB7hC,oBAAS,GAjD3B,mBAiDjC8hC,EAjDiC,KAiDVC,EAjDU,OAkDwB/hC,oBAC/D,GAnDuC,mBAkDjCgiC,GAlDiC,KAkDPC,GAlDO,QAqDgBjiC,oBAAS,GArDzB,qBAqDjCkiC,GArDiC,MAqDXC,GArDW,SAsDwBniC,oBAC/D,GAvDuC,qBAsDjCoiC,GAtDiC,MAsDPC,GAtDO,SA4DpCriC,oBAAS,GA5D2B,qBA0DvCsiC,GA1DuC,MA2DvCC,GA3DuC,SAgEpCviC,oBAAS,GAhE2B,qBA8DvCwiC,GA9DuC,MA+DvCC,GA/DuC,SAiEsBziC,oBAAS,GAjE/B,qBAiEjC0iC,GAjEiC,MAiERC,GAjEQ,SAkE4B3iC,oBACnE,GAnEuC,qBAkEjC4iC,GAlEiC,MAkELC,GAlEK,SAqEkB7iC,oBAAS,GArE3B,qBAqEjC8iC,GArEiC,MAqEVC,GArEU,SAsEc/iC,oBAAS,GAtEvB,qBAsEjCgjC,GAtEiC,MAsEZC,GAtEY,SAuEsBjjC,oBAAS,GAvE/B,qBAuEjCkjC,GAvEiC,MAuERC,GAvEQ,SAwE0BnjC,oBACjE,GAzEuC,qBAwEjCojC,GAxEiC,MAwENC,GAxEM,SA2EsBrjC,oBAAS,GA3E/B,qBA2EjCsjC,GA3EiC,MA2ERC,GA3EQ,SA4EkBvjC,oBAAS,GA5E3B,qBA4EjCwjC,GA5EiC,MA4EVC,GA5EU,SA6EkBzjC,oBAAS,GA7E3B,qBA6EjC0jC,GA7EiC,MA6EVC,GA7EU,SA8EoB3jC,oBAAS,GA9E7B,qBA8EjC4jC,GA9EiC,MA8ETC,GA9ES,SA+EgB7jC,oBAAS,GA/EzB,qBA+EjC8jC,GA/EiC,MA+EXC,GA/EW,SAgF4B/jC,oBACnE,GAjFuC,qBAgFjCgkC,GAhFiC,MAgFLC,GAhFK,SAmFsBjkC,mBAAS,IAnF/B,qBAmFjCkkC,GAnFiC,MAmFRC,GAnFQ,SAoFMnkC,mBAAS7S,GApFf,qBAoFjCi3C,GApFiC,MAoFhBC,GApFgB,SAqFIrkC,mBAASqhC,GArFb,qBAqFjCiD,GArFiC,MAqFjBC,GArFiB,SAsFwBvkC,mBAC/D,MAvFuC,qBAsFjCwkC,GAtFiC,MAsFPC,GAtFO,SA4FpCzkC,oBAAS,GA5F2B,qBA0FvC0kC,GA1FuC,MA2FvCC,GA3FuC,SA6F0B3kC,mBACjE,IA9FuC,qBA6FjC4kC,GA7FiC,MA6FNC,GA7FM,SAgGoB7kC,mBAAS,QAhG7B,qBAgGjC8kC,GAhGiC,MAgGTC,GAhGS,SAiGY/kC,oBAAS,GAjGrB,qBAiGjCglC,GAjGiC,MAiGbC,GAjGa,SAkGAjlC,mBAAS,IAlGT,qBAkGjCklC,GAlGiC,MAkGnBC,GAlGmB,SAmGoBnlC,mBAAS,MAnG7B,qBAmGjColC,GAnGiC,MAmGTC,GAnGS,SAuGpCrlC,mBAAS,IAvG2B,qBAqGvCslC,GArGuC,MAsGvCC,GAtGuC,SA2GpCvlC,mBAAS,MA3G2B,qBAyGvCwlC,GAzGuC,MA0GvCC,GA1GuC,SA4GMzlC,oBAAS,GA5Gf,qBA4GjC0lC,GA5GiC,MA4GhBC,GA5GgB,MA8GlCjsD,GAC6C,OAAlDxN,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAC7Bn4B,KAAKk4B,MAAMp4B,aAAaq4B,QAAQ,cAChC,CAAEh4B,QAAS,MAEfm/B,2BAAgB,WACfx2B,SAASwvB,iBAAiB,SAAS,SAACC,GAGD,OAAhC28B,EAAoBp0C,SACa,OAAhCo0C,EAAoBp0C,cACYxgB,IAAhC40D,EAAoBp0C,SACpBo0C,EAAoBp0C,QAAQ0X,SAASD,EAAM9D,SAElB,uBAA3B8D,EAAM9D,OAAOU,WAEbojC,GAA4B,WAG5B,IAEH3hC,qBAAU,YACS,uCAAG,4BAAA7uB,EAAA,sEACMuxB,uBACzB/4B,EAASyvB,kCAAkC9sB,EAAQsK,GAAKrN,UAFrC,cACdwa,EADc,OAIpB+iC,EAAY/iC,GAJQ,KAKpB46C,EALoB,SAMbj8B,uBACL/4B,EAAS4wB,0CAA0C3jB,GAAKrN,UAPtC,kCAUpBk5D,GACC1+C,EAAY7W,QACVyI,QAAO,SAACkP,GAAD,MAA0B,iBAAfA,EAAM9Y,QAAyB,GACjDoN,MAAMlH,KAAI,SAACsI,GAAD,OAAUA,EAAK5F,aAE5BwvB,GAAU,GAfU,4CAAH,qDAiBlB2+B,KACE,CAACx2D,EAAQsK,GAAKrN,UAEjB,IAAMyb,GAAQ,uCAAG,WAAO9Z,EAAQuJ,GAAf,SAAAtD,EAAA,8DACKzH,IAAjBkN,GAAKrN,SAA0C,OAAjBqN,GAAKrN,QADvB,gBAEf2U,EAAQvL,KAAK,iBAFE,sCAIThJ,EAASqb,SAASpO,GAAKrN,QAAS2B,EAAQuJ,EAAQyJ,GAJvC,2CAAH,wDAQR6kD,GAAQ,uCAAG,WAAO5pC,GAAP,SAAAhoB,EAAA,8DACKzH,IAAjBkN,GAAKrN,SAA0C,OAAjBqN,GAAKrN,QADvB,gCAETI,EAAS6b,gBAAgB5O,GAAKrN,QAAS4vB,EAAWjb,GAFzC,OAGfA,EAAQ8kD,GAAG,GAHI,2CAAH,sDAORC,GAAgB,SACrBrvD,EACAsvD,EACA9wD,EACA+nB,EACAlI,EACAkxC,EACAlpC,EACAI,EACA1S,EACAL,EACA87C,EACAC,EACA1uD,EACAF,EACAkC,EACAzJ,EACA/B,GAEA8zD,EAAyBrrD,GACzBurD,GAA4B+D,GAC5B7D,GAAwBjtD,GACxBmtD,GAA4BplC,GAC5BslC,GAAkCxtC,GAClC0tC,GAAyCwD,GACzCtD,GAA2B5lC,GAC3B8lC,GAA8B1lC,GAC9B4lC,GAAyBt4C,GACzBw4C,GAAuB74C,GACvB+4C,GAA2B+C,GAC3B7C,GAA6B8C,GAC7B5C,GAA2B9rD,GAC3BgsD,GAAyBlsD,GACzBosD,GAAyBlqD,GACzBoqD,GAA0B7zD,GAC1B+zD,GAAwB91D,IAGnB2tD,GACL,6FAKKwK,GAAqBp/B,EACxBu6B,EAAYhxD,OAAS,EACpBjE,EAAS0D,QAAQyI,QAAO,SAACkP,GAAD,MAA0B,QAAfA,EAAM9Y,QACzCmB,EACC+E,KAAI,SAAC4S,GACL,OAAOrb,EAAS0D,QAAQyI,QACvB,SAACugD,GAAD,OAAeA,EAAUnqD,OAAS8Y,KACjCpX,OAAS,EACRjE,EAAS0D,QAAQyI,QACjB,SAACugD,GAAD,OAAeA,EAAUnqD,OAAS8Y,KAChC,GACF,QAEHlP,QAAO,SAAC6X,GAAD,OAAiB,OAARA,KAClB,GAEG+1C,GACL9E,EAAYhxD,OAAS,EAClB61D,GAAmBt5C,QAAO,SAACC,EAAUC,GAYrC,OAXAA,EAAQ/Q,MAAM/C,SAAQ,SAACmE,GAEpB0P,EAAShX,SAASsH,KAClBA,EAAKpP,MAAMa,cAAciH,SAASwrD,EAAYzyD,iBAC9CuO,EAAKO,WACH9O,cACAiH,SAASwrD,EAAYzyD,gBAExBie,EAAStX,KAAK4H,MAGT0P,IACJ,IACHq5C,GAAmB71D,OAAS,EAC5B61D,GAAmBt5C,QAAO,SAACC,EAAUC,GAWrC,OAVAA,EAAQ/Q,MAAM/C,SAAQ,SAACotD,IAEpBv5C,EAAShY,KAAI,SAACsI,GAAD,OAAUA,EAAK3I,MAAIqB,SAASuwD,EAAU5xD,KACpD0xD,GAAmBG,OAAM,SAAC5+C,GAAD,OACxBA,EAAM1L,MAAM6Y,MAAK,SAAC1H,GAAD,OAAOA,EAAE1Y,KAAO4xD,EAAU5xD,UAG5CqY,EAAStX,KAAK6wD,MAGTv5C,IACJ,IACHia,EACA16B,EAAS0D,QAAQ8c,QAAO,SAACC,EAAUC,GAcnC,OAbAA,EAAQ/Q,MAAM/C,SAAQ,SAACotD,GAEpBv5C,EAAShY,KAAI,SAACsI,GAAD,OAAUA,EAAK3I,MAAIqB,SAASuwD,EAAU5xD,MACnD4xD,EAAUr4D,MACTa,cACAiH,SAASwrD,EAAYzyD,iBACtBw3D,EAAU1oD,WACR9O,cACAiH,SAASwrD,EAAYzyD,gBAExBie,EAAStX,KAAK6wD,MAGTv5C,IACJ,IACH,GAEEy5C,GAAe,kBAAC,GAAD,CAAiB7xB,MAAM,SAAS11B,QAASowC,IAExDoX,GACL,yBAAKplC,UAAU,gBACd,4BACC,uBACCA,UACCjyB,IAAWsK,GAAKrN,QACb,2BACA,oBAEJg0B,KAAM5zB,EAASY,cAAcqC,iBAAiBN,EAAQurD,IAEtD,yBACCr6B,SAC6B9zB,IAA5BF,EAASujB,eACNvjB,EAASujB,eACT+rC,GAEJr7B,IAAKo6B,KAGP,uBACCt5B,UACCjyB,IAAWsK,GAAKrN,QAAU,sBAAwB,eAEnDg0B,KAAM5zB,EAASY,cAAcqC,iBAAiBN,EAAQurD,IAErDA,GAEF,0BACCt5B,UAAWjyB,IAAWsK,GAAKrN,QAAU,mBAAqB,aAEzD,OAEF,uBACCg1B,UAAU,UACVhB,KAAM5zB,EAASY,cAAc0C,sBAC5BX,EACAurD,EACA,CAAC,SAGDvrD,IAAWsK,GAAKrN,QAAU,WAAa,SAExC+5D,GAAmB71D,OAAS,GACE,QAA/B61D,GAAmB,GAAGv3D,KACrB,0BAAMwyB,UAAU,cAAhB,KACG,KACH+kC,GAAmB71D,OAAS,GAAoC,QAA/B61D,GAAmB,GAAGv3D,KACrDu3D,GAAmBrxD,KAAI,SAAC4S,EAAO5K,GAC/B,OACC,yBAAKskB,UAAU,oCAAoCvkB,IAAKC,GACvD,yBAAKskB,UAAU,6BACd,8BACC,0BAAMA,UAAU,mBACd,CAAC,OAAQ,eAAgB,qBAAqBtrB,SAC9C4R,EAAM9Y,MAEJ8Y,EAAM9Y,KACLiU,MAAM,KACN/N,KACA,SAAC2xD,GAAD,OACCA,EAAQ,GAAGl7C,cAAgBk7C,EAAQ10D,MAAM,MAE1CxB,KAAK,KACNmX,EAAM9Y,MAEV,0BAAMwyB,UAAU,qBAAhB,YAA0C1Z,EAAM1L,MAAM1L,OAAtD,QAED,uBACC8wB,UAAU,aACVhB,KAAM5zB,EAASY,cAAc0C,sBAC5BX,EACAurD,EACA3qD,EAAQyI,QAAO,SAACugD,GAAD,OAAeA,IAAcrxC,EAAM9Y,QAClD,GACA,QACA,GACA,IAGD,yBACCyxB,IAAI,0FACJC,IAAI,0BAINxjB,IAAUqpD,GAAmB71D,OAAS,EACtC,0BAAM8wB,UAAU,wBAAwB,KACrC,SAIN,OAKAslC,GACL,yBAAKtlC,UAAU,iBACd,yBAAKA,UAAU,wBACd,2BACCz1B,KAAK,OACLy1B,UAAU,aACVT,YAAY,uBACZJ,MAAOkhC,EACPjhC,SAAU,SAACC,GAAD,OAAOihC,EAAmBjhC,EAAEC,OAAOH,QAC7CqO,UAAW,SAACnO,GACXzgB,QAAQC,IAAIwgB,EAAEoO,SACI,KAAdpO,EAAEoO,SACL9tB,EAAQvL,KACPhJ,EAASY,cAAc0C,sBACtBX,EACAurD,EACA,CAAC,OACD+G,EACA,QACAJ,EACA,OAML,uBACCjgC,UAAU,4BACVhB,KAAM5zB,EAASY,cAAc0C,sBAC5BX,EACAurD,EACA,CAAC,OACD+G,EACA,QACAJ,EACA,IAGD,yBACC/gC,IAAI,SACJD,IAAI,kGAINlxB,IAAWsK,GAAKrN,QAChB,uBACCg1B,UAAU,kBACVhB,KAAM5zB,EAASY,cAAckF,6BAA6BnD,IAF3D,iBAMG,KACHA,IAAWsK,GAAKrN,QAChB,4BACCg1B,UACC2jC,GACG,mCACA,2BAEJlkC,QAAS,SAAC2L,GACTo1B,GAAqB,GACrBoD,IAAsB,SAACl4C,GAAD,OAAeA,OARvC,cAaG,KACJ,4BACCsU,UACCugC,EACG,iCACA,yBAEJ9gC,QAAS,SAAC2L,GACTw4B,IAAsB,GACtBpD,GAAqB,SAAC90C,GAAD,OAAeA,OARtC,YAaA,0BAAMsU,UAAU,aAAhB,KACA,uBACCA,UAAU,cACVhB,KACiB,KAAhBkhC,EACG90D,EAASY,cAAc0C,sBACvBX,EACAurD,EACA,CAAC,OACD4G,EACA,QACAD,EACA,GAEA70D,EAASY,cAAc0C,sBACvBX,EACAurD,EACA3qD,EACA,GACA,QACAsxD,EACA,IAIJ,yBACC10B,YAAa,SAAClM,GACbA,EAAEC,OAAOL,IACR,2DAEF0P,WAAY,SAACtP,GACC,UAATxwB,IACHwwB,EAAEC,OAAOL,IACR,oFAGHC,IAAI,aACJD,IACU,UAATpwB,EACG,0DACA,qFAIN,uBACCmxB,UAAU,cACVhB,KACiB,KAAhBkhC,EACG90D,EAASY,cAAc0C,sBACvBX,EACAurD,EACA,CAAC,OACD4G,EACA,QACAD,EACA,GAEA70D,EAASY,cAAc0C,sBACvBX,EACAurD,EACA3qD,EACA,GACA,QACAsxD,EACA,IAIJ,yBACC10B,YAAa,SAAClM,GACbA,EAAEC,OAAOL,IACR,2DAEF0P,WAAY,SAACtP,GACC,UAATxwB,IACHwwB,EAAEC,OAAOL,IACR,oFAGHC,IAAI,aACJD,IACU,UAATpwB,EACG,0DACA,sFAOF02D,GAAgB5/B,EACrB,yBAAK3F,UAAU,uCACbolC,GACAE,IAEC,KAEEE,GAC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","file":"static/js/main.67a98be4.chunk.js","sourcesContent":["const reducer = (() => {\n\tconst userReducer = (state = {}, action) => {\n\t\tswitch (action.type) {\n\t\t\tcase 'LOGIN':\n\t\t\t\tlocalStorage.setItem('userState', JSON.stringify({ ...action.data }));\n\t\t\t\treturn { ...action.data };\n\t\t\tcase 'SIGN_OUT':\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t'userState',\n\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\tuserUID: null,\n\t\t\t\t\t\tuserInfo: {},\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn {\n\t\t\t\t\tuserUID: null,\n\t\t\t\t\tuserInfo: {},\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t};\n\n\tconst login = (userUID, userInfo) => {\n\t\tif (userUID === undefined || userInfo === undefined) {\n\t\t\treturn signOut();\n\t\t}\n\t\treturn {\n\t\t\ttype: 'LOGIN',\n\t\t\tdata: {\n\t\t\t\tuserUID,\n\t\t\t\tuserInfo,\n\t\t\t},\n\t\t};\n\t};\n\n\tconst signOut = () => {\n\t\treturn {\n\t\t\ttype: 'SIGN_OUT',\n\t\t};\n\t};\n\n\treturn {\n\t\tuserReducer,\n\t\tlogin,\n\t\tsignOut,\n\t};\n})();\n\nexport default reducer;\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport { differenceInDays, endOfYear, startOfYear } from 'date-fns';\n\nconst Firebase = (() => {\n\tconst firebaseConfig = {\n\t\tapiKey: 'AIzaSyCgUVtCN8iWCzV7N3_zptMhvSdw-Z2gJ7c',\n\t\tauthDomain: 'goodreads-copy.firebaseapp.com',\n\t\tdatabaseURL: 'https://goodreads-copy.firebaseio.com',\n\t\tprojectId: 'goodreads-copy',\n\t\tstorageBucket: 'goodreads-copy.appspot.com',\n\t\tmessagingSenderId: '76297927706',\n\t\tappId: '1:76297927706:web:fba0aae0bdb5c9bf21e5a3',\n\t};\n\n\tfirebase.initializeApp(firebaseConfig);\n\n\tconst database = firebase.firestore();\n\n\tconst pageGenerator = (() => {\n\t\tconst generateSignInPage = () => {\n\t\t\treturn '/user/sign_in';\n\t\t};\n\n\t\tconst generateSignOutPage = () => {\n\t\t\treturn '/user/sign_out';\n\t\t};\n\n\t\tconst generateSignUpPage = () => {\n\t\t\treturn '/user/sign_up';\n\t\t};\n\n\t\tconst generateForgotPasswordPage = () => {\n\t\t\treturn '/user/forgot_password';\n\t\t};\n\n\t\tconst generateExplorePage = () => {\n\t\t\treturn '/explore';\n\t\t};\n\n\t\tconst generateSearchPage = (q, searchType, searchField) => {\n\t\t\treturn (\n\t\t\t\t'/search?q=' +\n\t\t\t\tq +\n\t\t\t\t'&search_type=' +\n\t\t\t\tsearchType +\n\t\t\t\t'&search_field=' +\n\t\t\t\tsearchField\n\t\t\t);\n\t\t};\n\n\t\tconst generateBookPage = (bookId, title) => {\n\t\t\treturn '/book/show/' + bookId + '.' + title.replace(/ /g, '_');\n\t\t};\n\n\t\tconst generateAddBookPage = () => {\n\t\t\treturn '/book/new';\n\t\t};\n\n\t\tconst generateBookCoverPage = (bookId, title) => {\n\t\t\treturn '/book/photo/' + bookId + '.' + title.replace(/ /g, '_');\n\t\t};\n\n\t\tconst generateBookPhotoPage = (bookId, title, photoId) => {\n\t\t\treturn (\n\t\t\t\t'/photo/work/' +\n\t\t\t\tbookId +\n\t\t\t\t'.' +\n\t\t\t\ttitle.replace(/ /g, '_') +\n\t\t\t\t'?photo=' +\n\t\t\t\tphotoId\n\t\t\t);\n\t\t};\n\n\t\tconst generateBookEditionsPage = (originalBookId, originalBookTitle) => {\n\t\t\treturn (\n\t\t\t\t'/work/editions/' +\n\t\t\t\toriginalBookId +\n\t\t\t\t'.' +\n\t\t\t\toriginalBookTitle.replace(/ /g, '_')\n\t\t\t);\n\t\t};\n\n\t\tconst generateBookListsPage = (bookId) => {\n\t\t\treturn '/list/book' + bookId;\n\t\t};\n\n\t\tconst generateSeriesPage = (seriesId, name) => {\n\t\t\treturn `/series/${seriesId}-${name.toLowerCase().replace(/ /g, '-')}`;\n\t\t};\n\n\t\tconst generateAuthorPage = (authorId, name) => {\n\t\t\treturn '/author/show/' + authorId + '.' + name.replace(/ /g, '_');\n\t\t};\n\n\t\tconst generateListopiaPage = () => {\n\t\t\treturn '/list';\n\t\t};\n\n\t\tconst generateCreateListPage = () => {\n\t\t\treturn '/list/new';\n\t\t};\n\n\t\tconst generateListsCreatedByUserPage = (userId, firstName) => {\n\t\t\treturn '/list/created/' + userId + '-' + firstName.toLowerCase();\n\t\t};\n\n\t\tconst generateListsVotedByUserPage = (userId, firstName) => {\n\t\t\treturn '/list/user_votes/' + userId + '-' + firstName.toLowerCase();\n\t\t};\n\n\t\tconst generateListsLikedByUserPage = (userId, firstName) => {\n\t\t\treturn '/list/liked/' + userId + '-' + firstName.toLowerCase();\n\t\t};\n\n\t\tconst generateListPage = (listId, title) => {\n\t\t\treturn '/list/show/' + listId + '.' + title.replace(/ /g, '_');\n\t\t};\n\n\t\tconst generateUserPage = (userId, firstName) => {\n\t\t\treturn '/user/show/' + userId + '-' + firstName.toLowerCase();\n\t\t};\n\n\t\tconst generateUserPhotoPage = (userId) => {\n\t\t\treturn '/photo/user/' + userId;\n\t\t};\n\n\t\tconst generateUserBooksPage = (userId) => {\n\t\t\treturn '/review/list/' + userId;\n\t\t};\n\n\t\tconst generateUserRatingsPage = (userId) => {\n\t\t\treturn '/review/list/' + userId + '?sort=rating&view=reviews';\n\t\t};\n\n\t\tconst generateUserReviewsPage = (userId) => {\n\t\t\treturn '/review/list/' + userId + '?sort=review&view=reviews';\n\t\t};\n\n\t\tconst generateUserShelfPage = (\n\t\t\tuserId,\n\t\t\tfirstName,\n\t\t\tshelves = ['all'],\n\t\t\tsearchTerm = '',\n\t\t\tview = 'table',\n\t\t\tperPageValue = '20',\n\t\t\tpage = '1'\n\t\t) => {\n\t\t\tconst viewValue = view === undefined ? 'table' : view;\n\t\t\tconst shelvesValue = shelves.length === 0 ? ['all'] : shelves;\n\t\t\treturn (\n\t\t\t\t'/review/list/' +\n\t\t\t\tuserId +\n\t\t\t\t'-' +\n\t\t\t\tfirstName.toLowerCase() +\n\t\t\t\t'?shelf=' +\n\t\t\t\tshelvesValue.join(',') +\n\t\t\t\t'&view=' +\n\t\t\t\tviewValue +\n\t\t\t\t'&search_query=' +\n\t\t\t\tsearchTerm +\n\t\t\t\t'&per_page=' +\n\t\t\t\tperPageValue +\n\t\t\t\t'&page=' +\n\t\t\t\tpage\n\t\t\t);\n\t\t};\n\n\t\tconst generateBookGenreShelfPage = (bookId, title, genre) => {\n\t\t\treturn (\n\t\t\t\t'/shelf/users/' +\n\t\t\t\tbookId +\n\t\t\t\t'.' +\n\t\t\t\ttitle.replace(/ /g, '_') +\n\t\t\t\t'?shelf=' +\n\t\t\t\tgenre.toLowerCase().replace(/ /g, '-')\n\t\t\t);\n\t\t};\n\n\t\tconst generateBookTopShelvesPage = (bookId) => {\n\t\t\treturn '/work/shelves/' + bookId;\n\t\t};\n\n\t\tconst generateBookStatsPage = (bookId) => {\n\t\t\treturn '/book/stats?id=' + bookId;\n\t\t};\n\t\tconst generateBookStatsPageForEdition = (bookId) => {\n\t\t\treturn '/book/stats?id=' + bookId + '&just_this_edition=yep';\n\t\t};\n\n\t\tconst generateReviewPage = (reviewId) => {\n\t\t\treturn '/review/show/' + reviewId;\n\t\t};\n\n\t\tconst generateReviewLikesPage = (reviewId) => {\n\t\t\treturn '/rating/voters/' + reviewId + '?resource_type=Review';\n\t\t};\n\n\t\tconst generateSimilarBooksPage = (bookId, title) => {\n\t\t\treturn '/book/similar/' + bookId + '.' + title.replace(/ /g, '_');\n\t\t};\n\n\t\tconst generateGenrePage = (genre) => {\n\t\t\treturn '/genres/' + genre.toLowerCase().replace(/ /g, '-');\n\t\t};\n\n\t\tconst generateBooksByAuthorPage = (authorId, name) => {\n\t\t\treturn '/author/list/' + authorId + '.' + name.replace(/ /g, '_');\n\t\t};\n\n\t\tconst generateArticlePage = (articleId, title) => {\n\t\t\treturn (\n\t\t\t\t'/blog/show/' + articleId + '-' + title.toLowerCase().replace(/ /g, '-')\n\t\t\t);\n\t\t};\n\n\t\tconst generateBookTriviaPage = (bookId, title) => {\n\t\t\treturn '/trivia/work/' + bookId + '.' + title.replace(/ /g, '_');\n\t\t};\n\n\t\tconst generateQuizzesPage = () => {\n\t\t\treturn '/quizzes';\n\t\t};\n\n\t\tconst generateQuizPage = (quizId, title) => {\n\t\t\treturn (\n\t\t\t\t'/quizzes/' + quizId + '-' + title.toLowerCase().replace(/ /g, '-')\n\t\t\t);\n\t\t};\n\n\t\tconst generateCreateQuizPage = () => {\n\t\t\treturn '/quizzes/new';\n\t\t};\n\n\t\tconst generateQuotesPage = () => {\n\t\t\treturn '/quotes';\n\t\t};\n\n\t\tconst generateBookQuotesPage = (bookId, title) => {\n\t\t\treturn (\n\t\t\t\t'/work/quotes/' + bookId + '-' + title.toLowerCase().replace(/ /g, '-')\n\t\t\t);\n\t\t};\n\n\t\tconst generateQuotePage = (quoteId, text) => {\n\t\t\treturn (\n\t\t\t\t'/quotes/' +\n\t\t\t\tquoteId +\n\t\t\t\t'-' +\n\t\t\t\ttext.slice(0, 50).toLowerCase().replace(/ /g, '-')\n\t\t\t);\n\t\t};\n\n\t\tconst generateAddQuotePage = () => {\n\t\t\treturn '/quotes/new';\n\t\t};\n\n\t\tconst generateQuotesTagPage = (tag) => {\n\t\t\treturn '/quotes/tag/' + tag;\n\t\t};\n\n\t\tconst generateQuotesSearchPage = (queryTerm) => {\n\t\t\treturn '/quotes/search?q=' + queryTerm;\n\t\t};\n\n\t\tconst generateWriteReviewPageForBook = (bookId) => {\n\t\t\treturn '/review/edit' + bookId;\n\t\t};\n\n\t\tconst generateUserCompareBooksPage = (userId) => {\n\t\t\treturn '/user/compare/' + userId;\n\t\t};\n\n\t\tconst generateFavoriteAuthorsPage = () => {\n\t\t\treturn '/favorite_authors';\n\t\t};\n\n\t\tconst generateUserFavoriteAuthorsPage = (userId) => {\n\t\t\treturn '/user/' + userId + '/favorite_authors';\n\t\t};\n\n\t\tconst generateUserYearInBooksPage = (year, userId, name) => {\n\t\t\treturn (\n\t\t\t\t'/user/year_in_books/' +\n\t\t\t\tyear +\n\t\t\t\t'/' +\n\t\t\t\tuserId +\n\t\t\t\t'-' +\n\t\t\t\tname.toLowerCase().replace(/ /g, '-')\n\t\t\t);\n\t\t};\n\n\t\tconst generateUserFriendsPage = (userId, name) => {\n\t\t\treturn (\n\t\t\t\t'/friend/user/' + userId + '-' + name.toLowerCase().replace(/ /g, '-')\n\t\t\t);\n\t\t};\n\n\t\tconst generateInviteFriendsPage = () => {\n\t\t\treturn '/friend/invite';\n\t\t};\n\n\t\tconst generateAccountSettingsPage = () => {\n\t\t\treturn '/user/edit';\n\t\t};\n\n\t\tconst generateChangePasswordPage = () => {\n\t\t\treturn '/user/change_password';\n\t\t};\n\n\t\tconst generateDeleteAccountPage = () => {\n\t\t\treturn '/user/destroy';\n\t\t};\n\n\t\tconst generateEditFavoriteGenresPage = () => {\n\t\t\treturn '/user/edit_fav_genres';\n\t\t};\n\n\t\tconst generateNewsPage = () => {\n\t\t\treturn '/news';\n\t\t};\n\n\t\tconst generateAllStoriesNewsPage = () => {\n\t\t\treturn '/news?content_type=all';\n\t\t};\n\n\t\tconst generateArticlesNewsPage = () => {\n\t\t\treturn '/news?content_type=articles';\n\t\t};\n\n\t\tconst generateInterviewsNewsPage = () => {\n\t\t\treturn '/news?content_type=interviews';\n\t\t};\n\n\t\tconst generateArticleLikesPage = (articleId) => {\n\t\t\treturn '/rating/voters/' + articleId + '?resource_type=Article';\n\t\t};\n\n\t\tconst generateAddAsFriendPage = (userId) => {\n\t\t\treturn '/friend/add_as_friend/' + userId;\n\t\t};\n\n\t\tconst generateRecommendationsPage = (isReceiver = true) => {\n\t\t\treturn `/recommendations/${isReceiver ? 'to_me' : 'from_me'}`;\n\t\t};\n\n\t\tconst generateGiveRecommendationPage = () => {\n\t\t\treturn '/recommendations/new';\n\t\t};\n\n\t\tconst generateGiveRecommendationToUserPage = (userId) => {\n\t\t\treturn '/recommendation/new?recommendation%5Bto_user_id%5D=' + userId;\n\t\t};\n\n\t\tconst generateBookCompatibilityTestPage = (userId, name) => {\n\t\t\treturn (\n\t\t\t\t'/book/compatibility_results?id=' +\n\t\t\t\tuserId +\n\t\t\t\t'-' +\n\t\t\t\tname.toLowerCase().replace(/ /g, '-')\n\t\t\t);\n\t\t};\n\n\t\tconst generateBookEditCompatibilityTestAnswersPage = (userId) => {\n\t\t\treturn '/book/compatibility_test?id=' + userId;\n\t\t};\n\n\t\treturn {\n\t\t\tgenerateSignInPage,\n\t\t\tgenerateSignOutPage,\n\t\t\tgenerateSignUpPage,\n\t\t\tgenerateForgotPasswordPage,\n\t\t\tgenerateExplorePage,\n\t\t\tgenerateSearchPage,\n\t\t\tgenerateBookPage,\n\t\t\tgenerateAddBookPage,\n\t\t\tgenerateBookCoverPage,\n\t\t\tgenerateBookPhotoPage,\n\t\t\tgenerateBookEditionsPage,\n\t\t\tgenerateBookListsPage,\n\t\t\tgenerateSeriesPage,\n\t\t\tgenerateAuthorPage,\n\t\t\tgenerateListopiaPage,\n\t\t\tgenerateCreateListPage,\n\t\t\tgenerateListsCreatedByUserPage,\n\t\t\tgenerateListsVotedByUserPage,\n\t\t\tgenerateListsLikedByUserPage,\n\t\t\tgenerateListPage,\n\t\t\tgenerateUserPage,\n\t\t\tgenerateUserPhotoPage,\n\t\t\tgenerateUserBooksPage,\n\t\t\tgenerateUserRatingsPage,\n\t\t\tgenerateUserReviewsPage,\n\t\t\tgenerateUserShelfPage,\n\t\t\tgenerateReviewPage,\n\t\t\tgenerateReviewLikesPage,\n\t\t\tgenerateBookGenreShelfPage,\n\t\t\tgenerateBookTopShelvesPage,\n\t\t\tgenerateBookStatsPage,\n\t\t\tgenerateBookStatsPageForEdition,\n\t\t\tgenerateSimilarBooksPage,\n\t\t\tgenerateGenrePage,\n\t\t\tgenerateBooksByAuthorPage,\n\t\t\tgenerateArticlePage,\n\t\t\tgenerateBookTriviaPage,\n\t\t\tgenerateQuizzesPage,\n\t\t\tgenerateQuizPage,\n\t\t\tgenerateCreateQuizPage,\n\t\t\tgenerateQuotesPage,\n\t\t\tgenerateBookQuotesPage,\n\t\t\tgenerateQuotePage,\n\t\t\tgenerateAddQuotePage,\n\t\t\tgenerateQuotesTagPage,\n\t\t\tgenerateQuotesSearchPage,\n\t\t\tgenerateWriteReviewPageForBook,\n\t\t\tgenerateUserCompareBooksPage,\n\t\t\tgenerateFavoriteAuthorsPage,\n\t\t\tgenerateUserFavoriteAuthorsPage,\n\t\t\tgenerateUserYearInBooksPage,\n\t\t\tgenerateUserFriendsPage,\n\t\t\tgenerateInviteFriendsPage,\n\t\t\tgenerateAccountSettingsPage,\n\t\t\tgenerateChangePasswordPage,\n\t\t\tgenerateDeleteAccountPage,\n\t\t\tgenerateEditFavoriteGenresPage,\n\t\t\tgenerateNewsPage,\n\t\t\tgenerateAllStoriesNewsPage,\n\t\t\tgenerateArticlesNewsPage,\n\t\t\tgenerateInterviewsNewsPage,\n\t\t\tgenerateArticleLikesPage,\n\t\t\tgenerateAddAsFriendPage,\n\t\t\tgenerateRecommendationsPage,\n\t\t\tgenerateGiveRecommendationPage,\n\t\t\tgenerateGiveRecommendationToUserPage,\n\t\t\tgenerateBookCompatibilityTestPage,\n\t\t\tgenerateBookEditCompatibilityTestAnswersPage,\n\t\t};\n\t})();\n\n\tconst getSeriesDetailsForBook = async (rootBook, bookTitle) => {\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(rootBook)\n\t\t\t.get();\n\t\tconst seriesInfo = {};\n\t\tif (rootBookQuery.data().series !== undefined) {\n\t\t\tseriesInfo.seriesInstance = rootBookQuery.data().seriesInstance;\n\t\t\tconst seriesQuery = await database\n\t\t\t\t.collection('series')\n\t\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t\t.get();\n\t\t\tseriesInfo.series = { name: seriesQuery.data().name };\n\t\t\tseriesInfo.series.page = pageGenerator.generateSeriesPage(\n\t\t\t\tseriesQuery.id,\n\t\t\t\tseriesInfo.series.name\n\t\t\t);\n\t\t\tconst booksInSeriesQuery = await database\n\t\t\t\t.collection('books')\n\t\t\t\t.where('series', '==', seriesInfo.series.name)\n\t\t\t\t.where('title', '!=', bookTitle)\n\t\t\t\t.get();\n\t\t\tseriesInfo.series.otherBooksIds = booksInSeriesQuery.docs.map(\n\t\t\t\t(document) => document.id\n\t\t\t);\n\t\t\tseriesInfo.series.otherBooksCovers = booksInSeriesQuery.docs.map(\n\t\t\t\t(document) => document.data().cover\n\t\t\t);\n\t\t}\n\t\treturn seriesInfo;\n\t};\n\n\tconst getMainAuthorDetailsForBook = async (rootBook, userUID) => {\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(rootBook)\n\t\t\t.get();\n\t\tconst mainAuthorQuery = await database\n\t\t\t.collection('authors')\n\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t.get();\n\t\tconst authorDetails = {};\n\t\tauthorDetails.mainAuthorId = rootBookQuery.data().authorId;\n\t\tauthorDetails.authorNames = [];\n\t\tauthorDetails.authorPages = [];\n\t\tauthorDetails.authorNames.push(mainAuthorQuery.data().name);\n\t\tauthorDetails.authorPages.push(\n\t\t\tpageGenerator.generateAuthorPage(\n\t\t\t\trootBookQuery.data().authorId,\n\t\t\t\tmainAuthorQuery.data().name\n\t\t\t)\n\t\t);\n\t\tauthorDetails.authorIsMember = mainAuthorQuery.data().GRMember;\n\t\tauthorDetails.authorFollowerCount =\n\t\t\tmainAuthorQuery.data().followersIds !== undefined\n\t\t\t\t? mainAuthorQuery.data().followersIds.length\n\t\t\t\t: 0;\n\t\tauthorDetails.userIsFollowingAuthor =\n\t\t\tmainAuthorQuery.data().followersIds !== undefined\n\t\t\t\t? mainAuthorQuery.data().followersIds.includes(userUID)\n\t\t\t\t: false;\n\t\tauthorDetails.booksByAuthorPage = pageGenerator.generateBooksByAuthorPage(\n\t\t\trootBookQuery.data().authorId,\n\t\t\tmainAuthorQuery.data().name\n\t\t);\n\t\tif (mainAuthorQuery.data().about !== undefined) {\n\t\t\tauthorDetails.mainAuthorAbout = mainAuthorQuery.data().about;\n\t\t}\n\t\tif (mainAuthorQuery.data().picture !== undefined) {\n\t\t\tauthorDetails.mainAuthorPicture = mainAuthorQuery.data().picture;\n\t\t}\n\t\treturn authorDetails;\n\t};\n\n\tconst getOtherAuthorsDetailsForBook = async (\n\t\totherAuthors,\n\t\tauthorNames,\n\t\tauthorPages,\n\t\tauthorFunctions\n\t) => {\n\t\tconst otherAuthorsQuery =\n\t\t\totherAuthors !== undefined\n\t\t\t\t? await Promise.all(\n\t\t\t\t\t\totherAuthors.map(\n\t\t\t\t\t\t\tasync (author) =>\n\t\t\t\t\t\t\t\tawait database.collection('authors').doc(author.id).get()\n\t\t\t\t\t\t)\n\t\t\t\t  )\n\t\t\t\t: null;\n\t\tconst otherAuthorsQueryData =\n\t\t\totherAuthorsQuery !== null\n\t\t\t\t? otherAuthorsQuery.map((document) => document.data())\n\t\t\t\t: null;\n\t\tif (otherAuthorsQueryData !== null) {\n\t\t\tfor (let i = 0; i < otherAuthorsQueryData.length; i++) {\n\t\t\t\tauthorNames.push(otherAuthorsQueryData[i].name);\n\t\t\t\tauthorPages.push(\n\t\t\t\t\tpageGenerator.generateAuthorPage(\n\t\t\t\t\t\totherAuthors[i].id,\n\t\t\t\t\t\totherAuthorsQueryData[i].name\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tauthorFunctions.push(otherAuthors[i].role);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst getUserDetailsForBook = async (userUID, bookId) => {\n\t\tconst userDetails = {};\n\t\tif (userUID !== null && userUID !== undefined) {\n\t\t\tconst bookInstanceQuery = await database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t.get();\n\t\t\tconst bookInstanceQueryResults = bookInstanceQuery.docs.map((document) =>\n\t\t\t\tdocument.data()\n\t\t\t);\n\t\t\tif (bookInstanceQueryResults.length > 0) {\n\t\t\t\tuserDetails.userStatus = bookInstanceQueryResults[0].status;\n\t\t\t\tif (bookInstanceQueryResults[0].progress !== undefined) {\n\t\t\t\t\tuserDetails.userProgress = bookInstanceQueryResults[0].progress;\n\t\t\t\t}\n\t\t\t\tif (bookInstanceQueryResults[0].rating !== undefined) {\n\t\t\t\t\tuserDetails.userRating = bookInstanceQueryResults[0].rating;\n\t\t\t\t}\n\t\t\t\tif (bookInstanceQueryResults[0].position !== undefined) {\n\t\t\t\t\tuserDetails.toReadBookPosition = bookInstanceQueryResults[0].position;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst allBookInstancesQuery = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.get();\n\t\tuserDetails.thisEditionRatings = 0;\n\t\tuserDetails.thisEditionRating = 0;\n\t\tuserDetails.thisEditionAddedBy = 0;\n\t\tuserDetails.fiveRatings = 0;\n\t\tuserDetails.fourRatings = 0;\n\t\tuserDetails.threeRatings = 0;\n\t\tuserDetails.twoRatings = 0;\n\t\tuserDetails.oneRatings = 0;\n\t\tuserDetails.addedBy = 0;\n\t\tuserDetails.toReads = 0;\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst rootBook = bookQuery.data().rootBook;\n\t\tconst allEditionsQuery = await database\n\t\t\t.collection('books')\n\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t.get();\n\t\tconst otherEditionsIds = allEditionsQuery.docs\n\t\t\t.filter((document) => document.id !== bookId)\n\t\t\t.map((document) => document.id);\n\t\tuserDetails.otherEditionsTitles = allEditionsQuery.docs\n\t\t\t.filter((document) => document.id !== bookId)\n\t\t\t.map((document) => document.data().title);\n\t\tuserDetails.otherEditionsISBNs = allEditionsQuery.docs\n\t\t\t.filter((document) => document.id !== bookId)\n\t\t\t.map((document) => document.data().ISBN);\n\t\tuserDetails.otherEditionsCovers = allEditionsQuery.docs\n\t\t\t.filter((document) => document.id !== bookId)\n\t\t\t.map((document) => document.data().cover);\n\t\tuserDetails.otherEditionsPages = allEditionsQuery.docs\n\t\t\t.filter((document) => document.id !== bookId)\n\t\t\t.map((document) =>\n\t\t\t\tpageGenerator.generateBookPage(document.id, document.data().title)\n\t\t\t);\n\t\tuserDetails.otherEditionsAddedBy = allEditionsQuery.docs\n\t\t\t.filter((document) => document.id !== bookId)\n\t\t\t.map((_document) => 0);\n\t\tconst allEditionsQueryBooks = allEditionsQuery.docs.map(\n\t\t\t(document) => document.id\n\t\t);\n\t\tallBookInstancesQuery.docs.forEach((document) => {\n\t\t\tif (allEditionsQueryBooks.includes(document.data().bookId)) {\n\t\t\t\tif (\n\t\t\t\t\tdocument.data().bookId === bookId &&\n\t\t\t\t\tdocument.data().rating !== undefined\n\t\t\t\t) {\n\t\t\t\t\tuserDetails.thisEditionRatings++;\n\t\t\t\t\tuserDetails.thisEditionRating += document.data().rating;\n\t\t\t\t\tuserDetails.thisEditionAddedBy++;\n\t\t\t\t} else if (document.data().bookId === bookId) {\n\t\t\t\t\tuserDetails.thisEditionAddedBy++;\n\t\t\t\t} else {\n\t\t\t\t\tuserDetails.otherEditionsAddedBy[\n\t\t\t\t\t\totherEditionsIds.indexOf(document.data().bookId)\n\t\t\t\t\t]++;\n\t\t\t\t}\n\t\t\t\tuserDetails.addedBy++;\n\t\t\t\tif (document.data().status === 'to-read') {\n\t\t\t\t\tuserDetails.toReads++;\n\t\t\t\t}\n\t\t\t\tswitch (document.data().rating) {\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tuserDetails.fiveRatings++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tuserDetails.fourRatings++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tuserDetails.threeRatings++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tuserDetails.twoRatings++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tuserDetails.oneRatings++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tuserDetails.thisEditionRating =\n\t\t\tuserDetails.thisEditionRatings !== 0\n\t\t\t\t? userDetails.thisEditionRating / userDetails.thisEditionRatings\n\t\t\t\t: 0;\n\t\treturn userDetails;\n\t};\n\n\tconst getReviewDetailsForBook = async (bookId, title, userUID) => {\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst rootBook = bookQuery.data().rootBook;\n\t\tconst reviewQuery = await database.collection('reviews').get();\n\t\tconst bookReviews = [];\n\t\tawait Promise.all(\n\t\t\treviewQuery.docs.map(async (document) => {\n\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t.collection('books')\n\t\t\t\t\t.doc(document.data().bookEdition)\n\t\t\t\t\t.get();\n\t\t\t\tif (bookQuery.data().rootBook === rootBook) {\n\t\t\t\t\tbookReviews.push(document);\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\tconst reviewDetails = {};\n\t\treviewDetails.reviews = await Promise.all(\n\t\t\tbookReviews.map(async (document) => {\n\t\t\t\tconst review = {};\n\t\t\t\treview.user = document.data().user;\n\t\t\t\tconst userBooksInstancesQuery = await database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t\t.where('userId', '==', review.user)\n\t\t\t\t\t.get();\n\t\t\t\tif (userBooksInstancesQuery.docs[0].data().rating !== undefined) {\n\t\t\t\t\treview.rating = userBooksInstancesQuery.docs[0].data().rating;\n\t\t\t\t} else {\n\t\t\t\t\treview.rating = 0;\n\t\t\t\t}\n\t\t\t\tconst userQuery = await database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(review.user)\n\t\t\t\t\t.get();\n\t\t\t\treview.userName = userQuery.data().firstName;\n\t\t\t\tif (userQuery.data().lastName !== undefined) {\n\t\t\t\t\treview.userName = review.userName + ' ' + userQuery.data().lastName;\n\t\t\t\t}\n\t\t\t\tif (userQuery.data().profileImage !== undefined) {\n\t\t\t\t\treview.profileImage = userQuery.data().profileImage;\n\t\t\t\t}\n\t\t\t\tif (userQuery.data().shelves !== undefined) {\n\t\t\t\t\treview.shelves = document.data().shelves;\n\t\t\t\t}\n\t\t\t\treview.id = document.id;\n\t\t\t\treview.date = document.data().date.toDate();\n\t\t\t\treview.edition = document.data().bookEdition;\n\t\t\t\treview.editionLink = pageGenerator.generateBookPage(\n\t\t\t\t\treview.edition,\n\t\t\t\t\ttitle\n\t\t\t\t);\n\t\t\t\treview.text = document.data().text;\n\t\t\t\treview.numberOfLikes = document.data().usersWhoLiked.length;\n\t\t\t\treview.likedByUser = document.data().usersWhoLiked.includes(userUID);\n\t\t\t\tif (document.data().recommendsItFor !== undefined) {\n\t\t\t\t\treview.recommendsItFor = document.data().recommendsItFor;\n\t\t\t\t}\n\t\t\t\treturn review;\n\t\t\t})\n\t\t);\n\t\treturn reviewDetails;\n\t};\n\n\tconst getMiscDetailsForBook = (bookDocumentData) => {\n\t\tconst miscDetails = {};\n\t\tif (bookDocumentData.preSynopsis !== undefined) {\n\t\t\tmiscDetails.preSynopsis = bookDocumentData.preSynopsis;\n\t\t}\n\t\tif (bookDocumentData.synopsis !== undefined) {\n\t\t\tmiscDetails.synopsis = bookDocumentData.synopsis;\n\t\t}\n\t\tif (bookDocumentData.amazonLink !== undefined) {\n\t\t\tmiscDetails.amazonLink = bookDocumentData.amazonLink;\n\t\t}\n\t\tif (bookDocumentData.type !== undefined) {\n\t\t\tmiscDetails.type = bookDocumentData.type;\n\t\t}\n\t\tif (bookDocumentData.publisher !== undefined) {\n\t\t\tmiscDetails.publisher = bookDocumentData.publisher;\n\t\t}\n\t\tif (bookDocumentData.pageCount !== undefined) {\n\t\t\tmiscDetails.pageCount = bookDocumentData.pageCount;\n\t\t}\n\t\tif (bookDocumentData.publishedDate !== undefined) {\n\t\t\tmiscDetails.editionPublishedDate = bookDocumentData.publishedDate.toDate();\n\t\t}\n\t\tif (bookDocumentData.ISBN !== undefined) {\n\t\t\tmiscDetails.ISBN = bookDocumentData.ISBN;\n\t\t}\n\t\tif (bookDocumentData.language !== undefined) {\n\t\t\tmiscDetails.language = bookDocumentData.language;\n\t\t}\n\t\treturn miscDetails;\n\t};\n\n\tconst getFirstEditionInfoForBook = async (rootBook) => {\n\t\tconst firstEditionInfo = {};\n\t\tconst firstEditionQuery = await database\n\t\t\t.collection('books')\n\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t.orderBy('publishedDate')\n\t\t\t.limit(1)\n\t\t\t.get();\n\t\tfirstEditionInfo.firstEditionPublishedYear = firstEditionQuery.docs[0]\n\t\t\t.data()\n\t\t\t.publishedDate.toDate()\n\t\t\t.getFullYear();\n\t\tfirstEditionInfo.originalId = firstEditionQuery.docs[0].id;\n\t\tfirstEditionInfo.originalTitle = firstEditionQuery.docs[0].data().title;\n\t\treturn firstEditionInfo;\n\t};\n\n\tconst getListsForBook = async (bookId) => {\n\t\tconst listsQuery = await database\n\t\t\t.collection('lists')\n\t\t\t.where('books', 'array-contains', bookId)\n\t\t\t.get();\n\t\tconst lists = await Promise.all(\n\t\t\tlistsQuery.docs.map(async (document) => {\n\t\t\t\tconst list = {};\n\t\t\t\tlist.id = document.id;\n\t\t\t\tlist.title = document.data().title;\n\t\t\t\tlist.bookIds = document.data().books;\n\t\t\t\tlist.voterCount = document.data().userVotes.length;\n\t\t\t\tlist.bookTitles = [];\n\t\t\t\tlist.bookCovers = [];\n\t\t\t\tawait Promise.all(\n\t\t\t\t\tlist.bookIds.map(async (id) => {\n\t\t\t\t\t\tconst bookQuery = await database.collection('books').doc(id).get();\n\t\t\t\t\t\tlist.bookTitles.push(bookQuery.data().title);\n\t\t\t\t\t\tlist.bookCovers.push(bookQuery.data().cover);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn list;\n\t\t\t})\n\t\t);\n\t\treturn lists;\n\t};\n\n\tconst getGenresForBook = async (rootBook) => {\n\t\tconst shelfQuery = await database\n\t\t\t.collection('shelves')\n\t\t\t.where('rootBooks', 'array-contains', rootBook)\n\t\t\t.where('genre', '!=', null)\n\t\t\t.get();\n\t\tconst genreDictionary = {};\n\t\tawait Promise.all(\n\t\t\tshelfQuery.docs.map(async (document) => {\n\t\t\t\tconst genreQuery = await database\n\t\t\t\t\t.collection('genres')\n\t\t\t\t\t.doc(document.data().genre)\n\t\t\t\t\t.get();\n\t\t\t\tif (genreDictionary[genreQuery.data().name] === undefined) {\n\t\t\t\t\tgenreDictionary[genreQuery.data().name] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tgenreDictionary[genreQuery.data().name] += 1;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\tconst genres = Object.keys(genreDictionary).map((key, index) => {\n\t\t\treturn {\n\t\t\t\tgenre: key,\n\t\t\t\tuserCount: genreDictionary[key],\n\t\t\t};\n\t\t});\n\t\treturn genres;\n\t};\n\n\tconst getPublishedBooksByAuthor = async (rootBook) => {\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(rootBook)\n\t\t\t.get();\n\t\tconst authorId = rootBookQuery.data().authorId;\n\t\tconst rootBooksByAuthorQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.where('authorId', '==', authorId)\n\t\t\t.get();\n\t\treturn await Promise.all(\n\t\t\trootBooksByAuthorQuery.docs\n\t\t\t\t.filter((document) => document.id !== rootBook)\n\t\t\t\t.map(async (document) => {\n\t\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.where('rootBook', '==', document.id)\n\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: bookQuery.docs[0].id,\n\t\t\t\t\t\tcover: bookQuery.docs[0].data().cover,\n\t\t\t\t\t\tpage: Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\tbookQuery.docs[0].id,\n\t\t\t\t\t\t\tbookQuery.docs[0].data().title\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t);\n\t};\n\n\tconst getAlsoEnjoyedBooksForBook = async (rootBook) => {\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(rootBook)\n\t\t\t.get();\n\t\tif (rootBookQuery.data().alsoEnjoyed === undefined) {\n\t\t\treturn [];\n\t\t}\n\t\treturn await Promise.all(\n\t\t\trootBookQuery.data().alsoEnjoyed.map(async (book) => {\n\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t.collection('books')\n\t\t\t\t\t.where('rootBook', '==', book)\n\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t.get();\n\t\t\t\treturn {\n\t\t\t\t\tid: bookQuery.docs[0].id,\n\t\t\t\t\ttitle: bookQuery.docs[0].data().title,\n\t\t\t\t\tcover: bookQuery.docs[0].data().cover,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t};\n\n\tconst getAlsoEnjoyedBooksDetails = async (userUID, bookId, isMainBook) => {\n\t\tlet mainEditionId = bookId;\n\t\tif (!isMainBook) {\n\t\t\tconst mainEditionQuery = await database\n\t\t\t\t.collection('books')\n\t\t\t\t.where('rootBook', '==', bookId)\n\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t.get();\n\t\t\tmainEditionId = mainEditionQuery.docs[0].id;\n\t\t}\n\t\tconst bookObj = {\n\t\t\tid: mainEditionId,\n\t\t};\n\t\tconst bookQuery = await database\n\t\t\t.collection('books')\n\t\t\t.doc(mainEditionId)\n\t\t\t.get();\n\t\tbookObj.title = bookQuery.data().title;\n\t\tbookObj.cover = bookQuery.data().cover;\n\t\tbookObj.rootBook = bookQuery.data().rootBook;\n\t\tif (bookQuery.data().preSynopsis !== undefined) {\n\t\t\tbookObj.preSynopsis = bookQuery.data().preSynopsis;\n\t\t}\n\t\tif (bookQuery.data().synopsis !== undefined) {\n\t\t\tbookObj.synopsis = bookQuery.data().synopsis;\n\t\t}\n\t\tconst rootBook = bookQuery.data().rootBook;\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(rootBook)\n\t\t\t.get();\n\t\tconst authorQuery = await database\n\t\t\t.collection('authors')\n\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t.get();\n\t\tbookObj.authorName = authorQuery.data().name;\n\t\tbookObj.authorId = rootBookQuery.data().authorId;\n\t\tbookObj.authorIsMember = authorQuery.data().GRMember;\n\t\tif (rootBookQuery.data().series !== undefined) {\n\t\t\tconst seriesQuery = await database\n\t\t\t\t.collection('series')\n\t\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t\t.get();\n\t\t\tbookObj.series = seriesQuery.data().name;\n\t\t\tbookObj.seriesInstance = rootBookQuery.data().seriesInstance;\n\t\t}\n\t\tconst userDetails = await getUserDetailsForBook(userUID, mainEditionId);\n\t\tObject.assign(bookObj, userDetails);\n\t\treturn bookObj;\n\t};\n\n\tconst getAlsoEnjoyedBooksDetailsForBook = async (userUID, bookId) => {\n\t\tconst alsoEnjoyedObject = {};\n\t\talsoEnjoyedObject.mainBook = await getAlsoEnjoyedBooksDetails(\n\t\t\tuserUID,\n\t\t\tbookId,\n\t\t\ttrue\n\t\t);\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t.get();\n\t\tif (rootBookQuery.data().alsoEnjoyed === undefined) {\n\t\t\treturn alsoEnjoyedObject;\n\t\t}\n\t\talsoEnjoyedObject.alsoEnjoyedBooks = [];\n\t\tif (rootBookQuery.data().alsoEnjoyed !== undefined) {\n\t\t\tawait Promise.all(\n\t\t\t\trootBookQuery.data().alsoEnjoyed.map(async (book) => {\n\t\t\t\t\tconst detailsObject = await getAlsoEnjoyedBooksDetails(\n\t\t\t\t\t\tuserUID,\n\t\t\t\t\t\tbook,\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t\talsoEnjoyedObject.alsoEnjoyedBooks.push(detailsObject);\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\treturn alsoEnjoyedObject;\n\t};\n\n\tconst getQuizQuestionsForBook = async (rootBook) => {\n\t\tconst questions = [];\n\t\tconst quizQuery = await database\n\t\t\t.collection('quizzes')\n\t\t\t.where('books', 'array-contains', rootBook)\n\t\t\t.get();\n\t\tquizQuery.docs.forEach((document) => {\n\t\t\tdocument.data().questions.forEach((question) => {\n\t\t\t\tconst questionObject = {\n\t\t\t\t\tquizId: document.id,\n\t\t\t\t\tquizTitle: document.data().title,\n\t\t\t\t\tquizDescription: document.data().description,\n\t\t\t\t\tquizPage: pageGenerator.generateQuizPage(\n\t\t\t\t\t\tdocument.id,\n\t\t\t\t\t\tdocument.data().title\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t\tquestionObject.question = question.mainQuestion;\n\t\t\t\tquestionObject.options = question.answers;\n\t\t\t\tquestions.push(questionObject);\n\t\t\t});\n\t\t});\n\t\treturn questions;\n\t};\n\n\tconst getArticlesForBook = async (rootBook) => {\n\t\tconst articleQuery = await database\n\t\t\t.collection('articles')\n\t\t\t.where('featuredBooks', 'array-contains', rootBook)\n\t\t\t.get();\n\t\treturn articleQuery.docs.map((document) => {\n\t\t\treturn {\n\t\t\t\tid: document.id,\n\t\t\t\ttitle: document.data().title,\n\t\t\t\timage: document.data().image,\n\t\t\t\tcontent: document.data().content,\n\t\t\t\tlikeCount: document.data().usersWhoLiked.length,\n\t\t\t\tcommentCount: document.data().comments.length,\n\t\t\t};\n\t\t});\n\t};\n\n\tconst getQuotesPageForBook = async (rootBook) => {\n\t\tconst mainEditionQuery = await database\n\t\t\t.collection('books')\n\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t.where('mainEdition', '==', true)\n\t\t\t.get();\n\t\treturn {\n\t\t\tquotesPage: pageGenerator.generateBookQuotesPage(\n\t\t\t\tmainEditionQuery.docs[0].id,\n\t\t\t\tmainEditionQuery.docs[0].data().title\n\t\t\t),\n\t\t};\n\t};\n\n\tconst getQuotesForBook = async (rootBook) => {\n\t\tconst quoteQuery = await database\n\t\t\t.collection('quotes')\n\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t.limit(2)\n\t\t\t.get();\n\t\treturn quoteQuery.docs.map((document) => {\n\t\t\treturn {\n\t\t\t\tid: document.id,\n\t\t\t\ttext: document.data().text,\n\t\t\t\tpage: pageGenerator.generateQuotePage(\n\t\t\t\t\tdocument.id,\n\t\t\t\t\tdocument.data().text\n\t\t\t\t),\n\t\t\t\tlikeCount: document.data().usersWhoLiked.length,\n\t\t\t};\n\t\t});\n\t};\n\n\tconst queryBookById = async (userUID, bookId) => {\n\t\ttry {\n\t\t\tconst bookQueryDocument = await database\n\t\t\t\t.collection('books')\n\t\t\t\t.doc(bookId)\n\t\t\t\t.get();\n\t\t\tconst bookObj = {};\n\t\t\tconst data = bookQueryDocument.data();\n\t\t\tbookObj.id = bookQueryDocument.id;\n\t\t\tbookObj.title = data.title;\n\t\t\tbookObj.cover = data.cover;\n\t\t\tbookObj.rootBook = data.rootBook;\n\t\t\tObject.assign(bookObj, getMiscDetailsForBook(data));\n\t\t\tconst seriesDetails = await getSeriesDetailsForBook(\n\t\t\t\tdata.rootBook,\n\t\t\t\tbookObj.title\n\t\t\t);\n\t\t\tObject.assign(bookObj, seriesDetails);\n\t\t\tconst mainAuthorDetails = await getMainAuthorDetailsForBook(\n\t\t\t\tdata.rootBook\n\t\t\t);\n\t\t\tObject.assign(bookObj, mainAuthorDetails);\n\t\t\tbookObj.authorFunctions = [];\n\t\t\tawait getOtherAuthorsDetailsForBook(\n\t\t\t\tdata.otherAuthors,\n\t\t\t\tbookObj.authorNames,\n\t\t\t\tbookObj.authorPages,\n\t\t\t\tbookObj.authorFunctions\n\t\t\t);\n\t\t\tconst userDetails = await getUserDetailsForBook(userUID, bookObj.id);\n\t\t\tObject.assign(bookObj, userDetails);\n\t\t\tconst reviewDetails = await getReviewDetailsForBook(\n\t\t\t\tbookObj.id,\n\t\t\t\tbookObj.title,\n\t\t\t\tuserUID\n\t\t\t);\n\t\t\tObject.assign(bookObj, reviewDetails);\n\t\t\tconst firstEditionInfo = await getFirstEditionInfoForBook(data.rootBook);\n\t\t\tObject.assign(bookObj, firstEditionInfo);\n\t\t\tbookObj.lists = await getListsForBook(bookObj.id);\n\t\t\tbookObj.genres = await getGenresForBook(data.rootBook);\n\t\t\tbookObj.publishedBooksByAuthor = await getPublishedBooksByAuthor(\n\t\t\t\tdata.rootBook\n\t\t\t);\n\t\t\tbookObj.alsoEnjoyedBooks = await getAlsoEnjoyedBooksForBook(\n\t\t\t\tdata.rootBook\n\t\t\t);\n\t\t\tbookObj.articles = await getArticlesForBook(data.rootBook);\n\t\t\tbookObj.quizQuestions = await getQuizQuestionsForBook(data.rootBook);\n\t\t\tbookObj.quotesPage = await getQuotesPageForBook(data.rootBook);\n\t\t\tbookObj.quotes = await getQuotesForBook(data.rootBook);\n\t\t\treturn bookObj;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst queryAllBooksForSearchBar = async () => {\n\t\tconst bookQuery = await database.collection('books').get();\n\t\treturn await Promise.all(\n\t\t\tbookQuery.docs.map(async (document) => {\n\t\t\t\tconst bookObj = {};\n\t\t\t\tconst data = document.data();\n\t\t\t\tbookObj.id = document.id;\n\t\t\t\tbookObj.title = data.title;\n\t\t\t\tbookObj.cover = data.cover;\n\t\t\t\tconst seriesDetails = await getSeriesDetailsForBook(\n\t\t\t\t\tdata.rootBook,\n\t\t\t\t\tbookObj.title\n\t\t\t\t);\n\t\t\t\tObject.assign(bookObj, seriesDetails);\n\t\t\t\tconst mainAuthorDetails = await getMainAuthorDetailsForBook(\n\t\t\t\t\tdata.rootBook\n\t\t\t\t);\n\t\t\t\tObject.assign(bookObj, mainAuthorDetails);\n\t\t\t\treturn bookObj;\n\t\t\t})\n\t\t);\n\t};\n\n\tconst getEditionDetailsForBook = async (userUID, rootBook) => {\n\t\tconst booksQuery = await database\n\t\t\t.collection('books')\n\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t.get();\n\t\treturn await Promise.all(\n\t\t\tbooksQuery.docs.map(async (edition) => {\n\t\t\t\tconst editionObject = {\n\t\t\t\t\ttitle: edition.data().title,\n\t\t\t\t\tcover: edition.data().cover,\n\t\t\t\t\tid: edition.id,\n\t\t\t\t\ttype: edition.data().type,\n\t\t\t\t\tpublisher: edition.data().publisher,\n\t\t\t\t\tlanguage: edition.data().language,\n\t\t\t\t\tpageCount: edition.data().pageCount,\n\t\t\t\t\tpublishedDate: edition.data().publishedDate.toDate(),\n\t\t\t\t\tisMainEdition: edition.data().mainEdition,\n\t\t\t\t};\n\t\t\t\tconst mainAuthorDetails = await getMainAuthorDetailsForBook(rootBook);\n\t\t\t\tObject.assign(editionObject, mainAuthorDetails);\n\t\t\t\teditionObject.authorFunctions = ['Writer'];\n\t\t\t\tawait getOtherAuthorsDetailsForBook(\n\t\t\t\t\tedition.data().otherAuthors,\n\t\t\t\t\teditionObject.authorNames,\n\t\t\t\t\teditionObject.authorPages,\n\t\t\t\t\teditionObject.authorFunctions\n\t\t\t\t);\n\t\t\t\tconst userDetailsForEdition = await getUserDetailsForBook(\n\t\t\t\t\tuserUID,\n\t\t\t\t\tedition.id\n\t\t\t\t);\n\t\t\t\tObject.assign(editionObject, userDetailsForEdition);\n\t\t\t\treturn editionObject;\n\t\t\t})\n\t\t);\n\t};\n\n\tconst queryBooks = async (searchString) => {\n\t\ttry {\n\t\t\tconst allBooksQuery = await queryAllBooksForSearchBar();\n\t\t\treturn allBooksQuery.filter(\n\t\t\t\t(book) =>\n\t\t\t\t\tbook.title.toLowerCase().includes(searchString.toLowerCase()) ||\n\t\t\t\t\tbook.authorNames[0].toLowerCase().includes(searchString.toLowerCase())\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst queryBooksForBookCreation = async (searchString) => {\n\t\ttry {\n\t\t\tconst allBooksQuery = await database.collection('books').get();\n\t\t\treturn await Promise.all(\n\t\t\t\tallBooksQuery.docs\n\t\t\t\t\t.filter((doc) =>\n\t\t\t\t\t\tdoc.data().title.toLowerCase().includes(searchString.toLowerCase())\n\t\t\t\t\t)\n\t\t\t\t\t.map(async (doc) => {\n\t\t\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t.doc(doc.data().rootBook)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\tif (rootBookQuery.data().series === undefined) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttitle: doc.data().title,\n\t\t\t\t\t\t\t\tlink: pageGenerator.generateBookPage(doc.id, doc.data().title),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst seriesQuery = await database\n\t\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttitle: `${doc.data().title} (${seriesQuery.data().name} ${\n\t\t\t\t\t\t\t\t\trootBookQuery.data().seriesInstance\n\t\t\t\t\t\t\t\t})`,\n\t\t\t\t\t\t\t\tlink: pageGenerator.generateBookPage(doc.id, doc.data().title),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst getFriendsInfo = async (userUID, history) => {\n\t\ttry {\n\t\t\tconst friendsQuery = await database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(userUID)\n\t\t\t\t.get();\n\t\t\tif (friendsQuery.data().friends === undefined) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn await Promise.all(\n\t\t\t\tfriendsQuery.data().friends.map(async (friend) => {\n\t\t\t\t\tconst userQuery = await database\n\t\t\t\t\t\t.collection('users')\n\t\t\t\t\t\t.doc(friend)\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: friend,\n\t\t\t\t\t\tfirstName: userQuery.data().firstName,\n\t\t\t\t\t\tprofileImage: userQuery.data().profileImage,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t);\n\t\t} catch (error) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: error.message },\n\t\t\t});\n\t\t\treturn [];\n\t\t}\n\t};\n\n\tconst queryBookRecommendedToFriendsStatus = async (\n\t\tuserUID,\n\t\tbookId,\n\t\tfriendIds,\n\t\thistory\n\t) => {\n\t\ttry {\n\t\t\treturn await Promise.all(\n\t\t\t\tfriendIds.map(async (id) => {\n\t\t\t\t\tconst recommendationQuery = await database\n\t\t\t\t\t\t.collection('recommendations')\n\t\t\t\t\t\t.where('sender', '==', userUID)\n\t\t\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t\t\t.where('receiver', '==', id)\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn recommendationQuery.docs.length > 0;\n\t\t\t\t})\n\t\t\t);\n\t\t} catch (error) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: error.message },\n\t\t\t});\n\t\t}\n\t};\n\n\tconst queryStatusUpdatesForRootBook = async (bookId) => {\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst rootBook = bookQuery.data().rootBook;\n\t\tconst allbooksQuery = await database\n\t\t\t.collection('books')\n\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t.get();\n\t\tconst allbooksIds = allbooksQuery.docs.map((document) => document.id);\n\t\tconst updatesQuery = await database\n\t\t\t.collection('userBooksUpdates')\n\t\t\t.where('book', 'in', allbooksIds)\n\t\t\t.get();\n\t\treturn updatesQuery.docs.map((document) => document.data());\n\t};\n\n\tconst queryStatusUpdatesForBook = async (bookId) => {\n\t\tconst updatesQuery = await database\n\t\t\t.collection('userBooksUpdates')\n\t\t\t.where('book', '==', bookId)\n\t\t\t.get();\n\t\treturn updatesQuery.docs.map((document) => document.data());\n\t};\n\n\tconst signOut = async (history) => {\n\t\ttry {\n\t\t\tawait firebase.auth().signOut();\n\t\t\tlocalStorage.userInfo = null;\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_out',\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst resetPassword = async (email) => {\n\t\ttry {\n\t\t\tawait firebase.auth().sendPasswordResetEmail(email);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst passwordSignIn = async (email, password, rememberMe, history) => {\n\t\ttry {\n\t\t\tawait firebase.auth().signInWithEmailAndPassword(email, password);\n\t\t\tif (rememberMe) {\n\t\t\t\tlocalStorage.user = email;\n\t\t\t\tlocalStorage.password = password;\n\t\t\t}\n\t\t\thistory.push({\n\t\t\t\tpathname: '/',\n\t\t\t});\n\t\t} catch (error) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: error.message },\n\t\t\t});\n\t\t}\n\t};\n\n\tconst facebookSignIn = async () => {\n\t\tconst provider = new firebase.auth.FacebookAuthProvider();\n\t\ttry {\n\t\t\tconst result = await firebase.auth().signInWithPopup(provider);\n\n\t\t\tconst user = result.user;\n\t\t\tconst userUID = user.uid;\n\t\t\tconst firstName = user.displayName.split(' ')[0];\n\t\t\tconst email = user.email;\n\t\t\tconst profileImage = user.photoURL;\n\n\t\t\tif (!(await database.collection('users').doc(userUID).get()).exists) {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(userUID)\n\t\t\t\t\t.set({\n\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tprofileImage,\n\t\t\t\t\t\tmembershipDate: firebase.firestore.Timestamp.fromDate(new Date()),\n\t\t\t\t\t\tfavoriteAuthors: [],\n\t\t\t\t\t\tfriends: [],\n\t\t\t\t\t\tnewFriendsRequests: [],\n\t\t\t\t\t\taboutMe: '',\n\t\t\t\t\t\taddAFriend: true,\n\t\t\t\t\t\taddANewStatusToBook: true,\n\t\t\t\t\t\taddAQuote: true,\n\t\t\t\t\t\taddBookToShelves: true,\n\t\t\t\t\t\tageAndBirthdayPrivacy: 'age-members-birthday-friends',\n\t\t\t\t\t\tcity: '',\n\t\t\t\t\t\tcountry: '',\n\t\t\t\t\t\tcustomGender: '',\n\t\t\t\t\t\tdateOfBirth: null,\n\t\t\t\t\t\temailAddressVisibleTo: 'no-one',\n\t\t\t\t\t\tfavoriteGenres: [],\n\t\t\t\t\t\tfollowAnAuthor: true,\n\t\t\t\t\t\tfollowers: [],\n\t\t\t\t\t\tfriendChallengeAnswer: '',\n\t\t\t\t\t\tfriendChallengeQuestion: '',\n\t\t\t\t\t\tgender: '',\n\t\t\t\t\t\tinterests: '',\n\t\t\t\t\t\tlocationViewableBy: 'everyone',\n\t\t\t\t\t\tmiddleName: '',\n\t\t\t\t\t\tnotifications: [],\n\t\t\t\t\t\tpronouns: ['male', 'female'][Math.round(Math.random() * 1)],\n\t\t\t\t\t\trecommendABook: true,\n\t\t\t\t\t\tshowGenderTo: 'everyone',\n\t\t\t\t\t\tshowLastNameTo: 'anyone',\n\t\t\t\t\t\tstateProvinceCode: '',\n\t\t\t\t\t\ttypeOfBooks: '',\n\t\t\t\t\t\tupdateContent: 'book-only',\n\t\t\t\t\t\tupdatesPeople: 'friends-following',\n\t\t\t\t\t\tvoteForABookReview: true,\n\t\t\t\t\t\twebsite: '',\n\t\t\t\t\t\twhoCanViewMyProfile: 'anyone',\n\t\t\t\t\t\tzipCode: '',\n\t\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error.code);\n\t\t}\n\t};\n\n\tconst twitterSignIn = async () => {\n\t\tconst provider = new firebase.auth.TwitterAuthProvider();\n\t\ttry {\n\t\t\tconst result = await firebase.auth().signInWithPopup(provider);\n\n\t\t\tconst user = result.user;\n\t\t\tconst userUID = user.uid;\n\t\t\tconst firstName = user.displayName.split(' ')[0];\n\t\t\tconst email = user.email;\n\t\t\tconst profileImage = user.photoURL;\n\n\t\t\tif (!(await database.collection('users').doc(userUID).get()).exists) {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(userUID)\n\t\t\t\t\t.set({\n\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tprofileImage,\n\t\t\t\t\t\tmembershipDate: firebase.firestore.Timestamp.fromDate(new Date()),\n\t\t\t\t\t\tfavoriteAuthors: [],\n\t\t\t\t\t\tfriends: [],\n\t\t\t\t\t\tnewFriendsRequests: [],\n\t\t\t\t\t\taboutMe: '',\n\t\t\t\t\t\taddAFriend: true,\n\t\t\t\t\t\taddANewStatusToBook: true,\n\t\t\t\t\t\taddAQuote: true,\n\t\t\t\t\t\taddBookToShelves: true,\n\t\t\t\t\t\tageAndBirthdayPrivacy: 'age-members-birthday-friends',\n\t\t\t\t\t\tcity: '',\n\t\t\t\t\t\tcountry: '',\n\t\t\t\t\t\tcustomGender: '',\n\t\t\t\t\t\tdateOfBirth: null,\n\t\t\t\t\t\temailAddressVisibleTo: 'no-one',\n\t\t\t\t\t\tfavoriteGenres: [],\n\t\t\t\t\t\tfollowAnAuthor: true,\n\t\t\t\t\t\tfollowers: [],\n\t\t\t\t\t\tfriendChallengeAnswer: '',\n\t\t\t\t\t\tfriendChallengeQuestion: '',\n\t\t\t\t\t\tgender: '',\n\t\t\t\t\t\tinterests: '',\n\t\t\t\t\t\tlocationViewableBy: 'everyone',\n\t\t\t\t\t\tmiddleName: '',\n\t\t\t\t\t\tnotifications: [],\n\t\t\t\t\t\tpronouns: ['male', 'female'][Math.round(Math.random() * 1)],\n\t\t\t\t\t\trecommendABook: true,\n\t\t\t\t\t\tshowGenderTo: 'everyone',\n\t\t\t\t\t\tshowLastNameTo: 'anyone',\n\t\t\t\t\t\tstateProvinceCode: '',\n\t\t\t\t\t\ttypeOfBooks: '',\n\t\t\t\t\t\tupdateContent: 'book-only',\n\t\t\t\t\t\tupdatesPeople: 'friends-following',\n\t\t\t\t\t\tvoteForABookReview: true,\n\t\t\t\t\t\twebsite: '',\n\t\t\t\t\t\twhoCanViewMyProfile: 'anyone',\n\t\t\t\t\t\tzipCode: '',\n\t\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tconsole.log(error.code);\n\t\t}\n\t};\n\n\tconst googleSignIn = async () => {\n\t\tconst provider = new firebase.auth.GoogleAuthProvider();\n\t\ttry {\n\t\t\tconst result = await firebase.auth().signInWithPopup(provider);\n\n\t\t\tconst user = result.user;\n\t\t\tconst userUID = user.uid;\n\t\t\tconst firstName = user.displayName.split(' ')[0];\n\t\t\tconst email = user.email;\n\t\t\tconst profileImage = user.photoURL;\n\n\t\t\tif (!(await database.collection('users').doc(userUID).get()).exists) {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(userUID)\n\t\t\t\t\t.set({\n\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tprofileImage,\n\t\t\t\t\t\tmembershipDate: firebase.firestore.Timestamp.fromDate(new Date()),\n\t\t\t\t\t\tfavoriteAuthors: [],\n\t\t\t\t\t\tfriends: [],\n\t\t\t\t\t\tnewFriendsRequests: [],\n\t\t\t\t\t\taboutMe: '',\n\t\t\t\t\t\taddAFriend: true,\n\t\t\t\t\t\taddANewStatusToBook: true,\n\t\t\t\t\t\taddAQuote: true,\n\t\t\t\t\t\taddBookToShelves: true,\n\t\t\t\t\t\tageAndBirthdayPrivacy: 'age-members-birthday-friends',\n\t\t\t\t\t\tcity: '',\n\t\t\t\t\t\tcountry: '',\n\t\t\t\t\t\tcustomGender: '',\n\t\t\t\t\t\tdateOfBirth: null,\n\t\t\t\t\t\temailAddressVisibleTo: 'no-one',\n\t\t\t\t\t\tfavoriteGenres: [],\n\t\t\t\t\t\tfollowAnAuthor: true,\n\t\t\t\t\t\tfollowers: [],\n\t\t\t\t\t\tfriendChallengeAnswer: '',\n\t\t\t\t\t\tfriendChallengeQuestion: '',\n\t\t\t\t\t\tgender: '',\n\t\t\t\t\t\tinterests: '',\n\t\t\t\t\t\tlocationViewableBy: 'everyone',\n\t\t\t\t\t\tmiddleName: '',\n\t\t\t\t\t\tnotifications: [],\n\t\t\t\t\t\tpronouns: ['male', 'female'][Math.round(Math.random() * 1)],\n\t\t\t\t\t\trecommendABook: true,\n\t\t\t\t\t\tshowGenderTo: 'everyone',\n\t\t\t\t\t\tshowLastNameTo: 'anyone',\n\t\t\t\t\t\tstateProvinceCode: '',\n\t\t\t\t\t\ttypeOfBooks: '',\n\t\t\t\t\t\tupdateContent: 'book-only',\n\t\t\t\t\t\tupdatesPeople: 'friends-following',\n\t\t\t\t\t\tvoteForABookReview: true,\n\t\t\t\t\t\twebsite: '',\n\t\t\t\t\t\twhoCanViewMyProfile: 'anyone',\n\t\t\t\t\t\tzipCode: '',\n\t\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error.code);\n\t\t}\n\t};\n\n\tconst queryBookInstanceDetails = async (bookInstanceData) => {\n\t\tlet wantToReadBooks = [];\n\t\tlet readingBooks = [];\n\t\tfor (let i = 0; i < bookInstanceData.length; i++) {\n\t\t\tconst bookObj = {};\n\t\t\tconst bookQuery = await database\n\t\t\t\t.collection('books')\n\t\t\t\t.doc(bookInstanceData[i].bookId)\n\t\t\t\t.get();\n\t\t\tconst bookQueryData = bookQuery.data();\n\t\t\tbookObj.title = bookQueryData.title;\n\t\t\tbookObj.cover = bookQueryData.cover;\n\t\t\tbookObj.page = pageGenerator.generateBookPage(\n\t\t\t\tbookInstanceData[i].bookId,\n\t\t\t\tbookQueryData.title\n\t\t\t);\n\t\t\tif (bookInstanceData[i].status === 'to-read') {\n\t\t\t\twantToReadBooks.push(bookObj);\n\t\t\t} else {\n\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t.doc(bookQueryData.rootBook)\n\t\t\t\t\t.get();\n\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t.collection('authors')\n\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t.get();\n\t\t\t\tconst authorQueryData = authorQuery.data();\n\t\t\t\tbookObj.author = authorQueryData.name;\n\t\t\t\tbookObj.authorPage = pageGenerator.generateAuthorPage(\n\t\t\t\t\trootBookQuery.data().authorId,\n\t\t\t\t\tauthorQueryData.name\n\t\t\t\t);\n\t\t\t\tbookObj.authorHasBadge = authorQueryData.GRMember;\n\t\t\t\treadingBooks.push(bookObj);\n\t\t\t}\n\t\t}\n\t\treturn [wantToReadBooks, readingBooks];\n\t};\n\n\tconst signUp = async (email, password, name, history) => {\n\t\ttry {\n\t\t\tif (name.length === 0) {\n\t\t\t\tthrow new Error('name');\n\t\t\t}\n\t\t\tif (email.length === 0) {\n\t\t\t\tthrow new Error('email-missing');\n\t\t\t}\n\n\t\t\tconsole.log(\n\t\t\t\t`Creating user with email ${email} and password ${password}...`\n\t\t\t);\n\t\t\tconst result = await firebase\n\t\t\t\t.auth()\n\t\t\t\t.createUserWithEmailAndPassword(email, password);\n\t\t\tconst userUID = result.user.uid;\n\n\t\t\tif (!(await database.collection('users').doc(userUID).get()).exists) {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(userUID)\n\t\t\t\t\t.set({\n\t\t\t\t\t\tfirstName: name.split(' ')[0],\n\t\t\t\t\t\tlastName:\n\t\t\t\t\t\t\tname.split(' ').length > 1\n\t\t\t\t\t\t\t\t? name.split(' ').slice(1).join(' ')\n\t\t\t\t\t\t\t\t: '',\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tmembershipDate: firebase.firestore.Timestamp.fromDate(new Date()),\n\t\t\t\t\t\tfavoriteAuthors: [],\n\t\t\t\t\t\tfriends: [],\n\t\t\t\t\t\tnewFriendsRequests: [],\n\t\t\t\t\t\taboutMe: '',\n\t\t\t\t\t\taddAFriend: true,\n\t\t\t\t\t\taddANewStatusToBook: true,\n\t\t\t\t\t\taddAQuote: true,\n\t\t\t\t\t\taddBookToShelves: true,\n\t\t\t\t\t\tageAndBirthdayPrivacy: 'age-members-birthday-friends',\n\t\t\t\t\t\tcity: '',\n\t\t\t\t\t\tcountry: '',\n\t\t\t\t\t\tcustomGender: '',\n\t\t\t\t\t\tdateOfBirth: null,\n\t\t\t\t\t\temailAddressVisibleTo: 'no-one',\n\t\t\t\t\t\tfavoriteGenres: [],\n\t\t\t\t\t\tfollowAnAuthor: true,\n\t\t\t\t\t\tfollowers: [],\n\t\t\t\t\t\tfriendChallengeAnswer: '',\n\t\t\t\t\t\tfriendChallengeQuestion: '',\n\t\t\t\t\t\tgender: '',\n\t\t\t\t\t\tinterests: '',\n\t\t\t\t\t\tlocationViewableBy: 'everyone',\n\t\t\t\t\t\tmiddleName: '',\n\t\t\t\t\t\tnotifications: [],\n\t\t\t\t\t\tpronouns: ['male', 'female'][Math.round(Math.random() * 1)],\n\t\t\t\t\t\trecommendABook: true,\n\t\t\t\t\t\tshowGenderTo: 'everyone',\n\t\t\t\t\t\tshowLastNameTo: 'anyone',\n\t\t\t\t\t\tstateProvinceCode: '',\n\t\t\t\t\t\ttypeOfBooks: '',\n\t\t\t\t\t\tupdateContent: 'book-only',\n\t\t\t\t\t\tupdatesPeople: 'friends-following',\n\t\t\t\t\t\tvoteForABookReview: true,\n\t\t\t\t\t\twebsite: '',\n\t\t\t\t\t\twhoCanViewMyProfile: 'anyone',\n\t\t\t\t\t\tzipCode: '',\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\thistory.push({\n\t\t\t\tpathname: '/',\n\t\t\t});\n\t\t} catch (error) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_up',\n\t\t\t\tstate: { error: error.message },\n\t\t\t});\n\t\t\treturn error;\n\t\t}\n\t};\n\n\tconst queryUserInfo = async (userUID) => {\n\t\tif (userUID === null) {\n\t\t\treturn {};\n\t\t}\n\t\tlet newUserInfo = {};\n\t\ttry {\n\t\t\tconst userQuery = await database.collection('users').doc(userUID).get();\n\t\t\tconst userQueryData = userQuery.data();\n\t\t\tnewUserInfo = { ...userQueryData };\n\t\t\tconst bookInstancesQuery = await database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t.get();\n\t\t\tconst bookInstancesQueryData = bookInstancesQuery.docs.map((document) =>\n\t\t\t\tdocument.data()\n\t\t\t);\n\t\t\tnewUserInfo.numberOfReadBooks = bookInstancesQueryData.filter(\n\t\t\t\t(instance) => instance.status === 'read'\n\t\t\t).length;\n\t\t\tconst userBooks = await queryBookInstanceDetails(\n\t\t\t\tbookInstancesQueryData.filter((instance) => instance.status !== 'read')\n\t\t\t);\n\t\t\tnewUserInfo.wantToReadBooks = userBooks[0];\n\t\t\tnewUserInfo.readingBooks = userBooks[1];\n\t\t\treturn newUserInfo;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst modifyUserInfo = async (userUID) => {\n\t\tconst newUserInfo = await queryUserInfo(userUID);\n\t\treturn newUserInfo;\n\t};\n\n\tconst addBookToShelf = async (userUID, bookId, status, history) => {\n\t\tif (userUID === undefined || userUID === null) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst userInstanceQuery = await database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t.get();\n\t\t\tif (userInstanceQuery.docs.length > 0) {\n\t\t\t\tif (userInstanceQuery.docs[0].data().status === 'to-read') {\n\t\t\t\t\tawait changeBookPosition(userUID, bookId, 10000);\n\t\t\t\t}\n\t\t\t\tif (status === 'to-read') {\n\t\t\t\t\tconst lowestPositionQuery = await database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t\t\t.orderBy('position', 'desc')\n\t\t\t\t\t\t.limit(1)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tif (lowestPositionQuery.docs.length > 0) {\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t\t\t\t.set(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\t\tposition: lowestPositionQuery.docs[0].data().position + 1,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t\t\t\t.set({ status, position: 1 }, { merge: true });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t\t\t.set({ status }, { merge: true });\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (status === 'to-read') {\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.add({ bookId, userId: userUID, status, position: 1 });\n\t\t\t\t} else {\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.add({ bookId, userId: userUID, status });\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait database.collection('userBooksUpdates').add({\n\t\t\t\tuser: userUID,\n\t\t\t\tbook: bookId,\n\t\t\t\tshelf: status,\n\t\t\t\taction: 'add-book',\n\t\t\t\tdate: firebase.firestore.Timestamp.fromDate(new Date()),\n\t\t\t});\n\t\t}\n\t};\n\n\tconst removeBookFromShelf = async (userUID, bookId) => {\n\t\tconst userInstanceQuery = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('userId', '==', userUID)\n\t\t\t.where('bookId', '==', bookId)\n\t\t\t.get();\n\t\tif (userInstanceQuery.docs.length > 0) {\n\t\t\tif (userInstanceQuery.docs[0].data().status === 'to-read') {\n\t\t\t\tawait changeBookPosition(userUID, bookId, 10000);\n\t\t\t}\n\t\t\tawait database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t.delete();\n\t\t}\n\t\tconst reviewQuery = await database\n\t\t\t.collection('reviews')\n\t\t\t.where('user', '==', userUID)\n\t\t\t.where('bookEdition', '==', bookId)\n\t\t\t.get();\n\t\tif (reviewQuery.docs.length > 0) {\n\t\t\tawait database.collection('reviews').doc(reviewQuery.docs[0].id).delete();\n\t\t}\n\t};\n\n\tconst rateBook = async (userUID, bookId, rating, history) => {\n\t\tif (userUID === undefined || userUID === null) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst userInstanceQuery = await database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t.get();\n\t\t\tif (userInstanceQuery.docs.length > 0) {\n\t\t\t\tif (rating !== undefined) {\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t\t\t.set({ rating }, { merge: true });\n\t\t\t\t} else {\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t\t\t.update({ rating: firebase.firestore.FieldValue.delete() });\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.add({ bookId, userId: userUID, status: 'read', rating });\n\t\t\t}\n\t\t\tif (rating !== undefined) {\n\t\t\t\tawait database.collection('userBooksUpdates').add({\n\t\t\t\t\tuser: userUID,\n\t\t\t\t\tbook: bookId,\n\t\t\t\t\taction: 'rate-book',\n\t\t\t\t\tdate: firebase.firestore.Timestamp.fromDate(new Date()),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tconst updateBookInShelf = async (userUID, bookId, progress) => {\n\t\tconst userInstanceQuery = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('userId', '==', userUID)\n\t\t\t.where('bookId', '==', bookId)\n\t\t\t.get();\n\t\tif (userInstanceQuery.docs.length > 0) {\n\t\t\tawait database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t.set({ progress }, { merge: true });\n\t\t}\n\t\tawait database.collection('userBooksUpdates').add({\n\t\t\tuser: userUID,\n\t\t\tbook: bookId,\n\t\t\taction: 'progress-book',\n\t\t\tprogress,\n\t\t\tdate: firebase.firestore.Timestamp.fromDate(new Date()),\n\t\t});\n\t};\n\n\tconst changeBookPosition = async (userUID, bookId, newPosition) => {\n\t\tconst userInstanceQuery = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('userId', '==', userUID)\n\t\t\t.where('bookId', '==', bookId)\n\t\t\t.get();\n\t\tif (\n\t\t\tuserInstanceQuery.docs.length > 0 &&\n\t\t\tuserInstanceQuery.docs[0].data().status === 'to-read'\n\t\t) {\n\t\t\tconst oldPosition = userInstanceQuery.docs[0].data().position;\n\t\t\tif (newPosition < oldPosition) {\n\t\t\t\tconst higherPositionQuery = await database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t\t.where('position', '>=', newPosition)\n\t\t\t\t\t.where('position', '<', oldPosition)\n\t\t\t\t\t.get();\n\t\t\t\tawait Promise.all(\n\t\t\t\t\thigherPositionQuery.docs.map(async (document) => {\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t.doc(document.id)\n\t\t\t\t\t\t\t.set({ position: document.data().position + 1 }, { merge: true });\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (newPosition > oldPosition) {\n\t\t\t\tconst lowerPositionQuery = await database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t\t.where('position', '<=', newPosition)\n\t\t\t\t\t.where('position', '>', oldPosition)\n\t\t\t\t\t.get();\n\t\t\t\tawait Promise.all(\n\t\t\t\t\tlowerPositionQuery.docs.map(async (document) => {\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t.doc(document.id)\n\t\t\t\t\t\t\t.set({ position: document.data().position - 1 }, { merge: true });\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\tawait database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t.set({ position: newPosition }, { merge: true });\n\t\t}\n\t};\n\n\tconst addNewUserShelf = async (userUID, shelf, history) => {\n\t\tif (userUID === undefined || userUID === null) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst genreQuery = await database.collection('genres').doc(shelf).get();\n\t\t\tconst shelfQuery = !genreQuery.exists\n\t\t\t\t? await database\n\t\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t\t.where('name', '==', shelf)\n\t\t\t\t\t\t.where('user', '==', userUID)\n\t\t\t\t\t\t.get()\n\t\t\t\t: await database\n\t\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t\t.where('genre', '==', shelf)\n\t\t\t\t\t\t.where('user', '==', userUID)\n\t\t\t\t\t\t.get();\n\t\t\tif (shelfQuery.docs.length === 0) {\n\t\t\t\tif (!genreQuery.exists) {\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t\t.add({ name: shelf, user: userUID, rootBooks: [], genre: null });\n\t\t\t\t} else {\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t\t.add({ genre: shelf, user: userUID, rootBooks: [] });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tconst addBookToUserShelf = async (\n\t\tuserUID,\n\t\trootBook,\n\t\tshelf,\n\t\tgenre = null,\n\t\thistory\n\t) => {\n\t\tif (userUID === undefined || userUID === null) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst editionIds = (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('books')\n\t\t\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t\t\t.get()\n\t\t\t).docs.map((doc) => doc.id);\n\t\t\tconst mainEditionId = (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('books')\n\t\t\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t.get()\n\t\t\t).docs[0].id;\n\t\t\tconst statusQuery = await database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t.where('bookId', 'in', editionIds)\n\t\t\t\t.get();\n\t\t\tif (statusQuery.docs.length === 0) {\n\t\t\t\tawait addBookToShelf(userUID, mainEditionId, 'read', history);\n\t\t\t}\n\t\t\tconst shelfQuery = await database\n\t\t\t\t.collection('shelves')\n\t\t\t\t.where('user', '==', userUID)\n\t\t\t\t.where('name', '==', shelf)\n\t\t\t\t.get();\n\t\t\tif (shelfQuery.docs.length === 0) {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t.add({ user: userUID, rootBooks: [rootBook], genre, name: shelf });\n\t\t\t} else {\n\t\t\t\tif (!shelfQuery.docs[0].data().rootBooks.includes(rootBook)) {\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t\t.doc(shelfQuery.docs[0].id)\n\t\t\t\t\t\t.set(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trootBooks: shelfQuery.docs[0]\n\t\t\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t\t\t.rootBooks.concat([rootBook]),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tconst removeBookFromUserShelf = async (userUID, rootBook, shelf, history) => {\n\t\tif (userUID === undefined || userUID === null) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst shelfQuery = await database\n\t\t\t\t.collection('shelves')\n\t\t\t\t.where('user', '==', userUID)\n\t\t\t\t.get();\n\t\t\tconst correspondingShelves = shelfQuery.docs.filter(\n\t\t\t\t(doc) => doc.data().name === shelf || doc.data().genre === shelf\n\t\t\t);\n\t\t\tif (\n\t\t\t\tcorrespondingShelves.length > 0 &&\n\t\t\t\tcorrespondingShelves[0].data().rootBooks.includes(rootBook)\n\t\t\t) {\n\t\t\t\tconst shelfDoc = database\n\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t.doc(correspondingShelves[0].id);\n\t\t\t\tawait shelfDoc.update({\n\t\t\t\t\trootBooks: correspondingShelves[0]\n\t\t\t\t\t\t.data()\n\t\t\t\t\t\t.rootBooks.filter((rB) => rB !== rootBook),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tconst likeUnlikeReview = async (userUID, reviewId, history) => {\n\t\tif (userUID === undefined || userUID === null) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst reviewRef = database.collection('reviews').doc(reviewId);\n\t\t\tconst reviewQuery = await reviewRef.get();\n\t\t\tif (!reviewQuery.data().usersWhoLiked.includes(userUID)) {\n\t\t\t\tawait reviewRef.set(\n\t\t\t\t\t{ usersWhoLiked: reviewQuery.data().usersWhoLiked.concat([userUID]) },\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tawait reviewRef.set(\n\t\t\t\t\t{\n\t\t\t\t\t\tusersWhoLiked: reviewQuery\n\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t.usersWhoLiked.filter((userId) => userId !== userUID),\n\t\t\t\t\t},\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst followUnfollowAuthor = async (userUID, authorId, history) => {\n\t\tif (userUID === undefined || userUID === null) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst authorRef = database.collection('authors').doc(authorId);\n\t\t\tconst authorQuery = await authorRef.get();\n\t\t\tif (!authorQuery.data().followerIds.includes(userUID)) {\n\t\t\t\tawait authorRef.set(\n\t\t\t\t\t{ followerIds: authorQuery.data().followerIds.concat([userUID]) },\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tawait authorRef.set(\n\t\t\t\t\t{\n\t\t\t\t\t\tfollowerIds: authorQuery\n\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t.followerIds.filter((userId) => userId !== userUID),\n\t\t\t\t\t},\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst recommendBook = async (sender, receiver, bookId, message) => {\n\t\tconst newRec = await database.collection('recommendations').add({\n\t\t\tsender,\n\t\t\treceiver,\n\t\t\tbookId,\n\t\t});\n\t\tif (message.length > 0) {\n\t\t\tnewRec.set({ message }, { merge: true });\n\t\t}\n\t};\n\n\tconst switchBookEditionForUser = async (userUID, oldEdition, newEdition) => {\n\t\tconst reviewQuery = await database\n\t\t\t.collection('reviews')\n\t\t\t.where('bookEdition', '==', oldEdition)\n\t\t\t.where('user', '==', userUID)\n\t\t\t.get();\n\t\tif (reviewQuery.docs.length > 0) {\n\t\t\tawait database\n\t\t\t\t.collection('reviews')\n\t\t\t\t.doc(reviewQuery.docs[0].id)\n\t\t\t\t.set({ bookEdition: newEdition }, { merge: true });\n\t\t}\n\t\tconst userInstanceQuery = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('bookId', '==', oldEdition)\n\t\t\t.where('userId', '==', userUID)\n\t\t\t.get();\n\t\tif (userInstanceQuery.docs.length > 0) {\n\t\t\tawait database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.doc(userInstanceQuery.docs[0].id)\n\t\t\t\t.set({ bookId: newEdition }, { merge: true });\n\t\t}\n\t};\n\n\tconst getBookPhotos = async (bookId) => {\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst rootBook = bookQuery.data().rootBook;\n\t\tconst photoQuery = await database\n\t\t\t.collection('bookPhotos')\n\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t.get();\n\t\treturn {\n\t\t\tcover: bookQuery.data().cover,\n\t\t\tphotos: photoQuery.docs.map((document) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: document.id,\n\t\t\t\t\turl: document.data().url,\n\t\t\t\t\ttype: document.data().type,\n\t\t\t\t};\n\t\t\t}),\n\t\t};\n\t};\n\n\tconst getPhotoDetails = async (userUID, photoId) => {\n\t\tconst photoQuery = await database\n\t\t\t.collection('bookPhotos')\n\t\t\t.doc(photoId)\n\t\t\t.get();\n\t\tif (\n\t\t\tuserUID !== null &&\n\t\t\t!photoQuery.data().usersWhoViewed.includes(userUID)\n\t\t) {\n\t\t\tawait database\n\t\t\t\t.collection('bookPhotos')\n\t\t\t\t.doc(photoId)\n\t\t\t\t.set(\n\t\t\t\t\t{ usersWhoViewed: photoQuery.data().usersWhoViewed.concat(userUID) },\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t}\n\t\treturn photoQuery.data();\n\t};\n\n\tconst getSynopsisAndPreSynopsisForBook = async (bookId) => {\n\t\ttry {\n\t\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\t\treturn {\n\t\t\t\tpreSynopsis:\n\t\t\t\t\tbookQuery.data().preSynopsis !== undefined\n\t\t\t\t\t\t? bookQuery.data().preSynopsis\n\t\t\t\t\t\t: null,\n\t\t\t\tsynopsis:\n\t\t\t\t\tbookQuery.data().synopsis !== undefined\n\t\t\t\t\t\t? bookQuery.data().synopsis\n\t\t\t\t\t\t: null,\n\t\t\t};\n\t\t} catch (error) {\n\t\t\treturn {\n\t\t\t\tpreSynopsis: null,\n\t\t\t\tsynopsis: null,\n\t\t\t};\n\t\t}\n\t};\n\n\tconst createNewBook = async ({\n\t\ttitle,\n\t\tauthorNames,\n\t\tauthorRoles,\n\t\tisbn,\n\t\tpublisher,\n\t\tpublishedYear,\n\t\tpublishedMonth,\n\t\tpublishedDay,\n\t\tnumberOfPages,\n\t\tformat,\n\t\tamazonLink,\n\t\tdescription,\n\t\teditionLanguage,\n\t\toriginalTitle,\n\t\toriginalPublicationYear,\n\t\toriginalPublicationMonth,\n\t\toriginalPublicationDay,\n\t\tcoverImage,\n\t\thistory,\n\t}) => {\n\t\ttry {\n\t\t\tconst newBookObject = {};\n\t\t\tconst seriesMatches = title.match(/[(][\\w\\d\\s]+,[ ]*#\\d[)]/g);\n\t\t\tconst seriesName =\n\t\t\t\tseriesMatches !== null\n\t\t\t\t\t? seriesMatches[0].split(',')[0].splice(1).join('')\n\t\t\t\t\t: '';\n\t\t\tconst seriesInstance =\n\t\t\t\tseriesMatches !== null\n\t\t\t\t\t? parseInt(seriesMatches[0].split('#')[1].split(')')[0])\n\t\t\t\t\t: NaN;\n\t\t\tif (seriesMatches === null) {\n\t\t\t\tnewBookObject.title = title;\n\t\t\t} else {\n\t\t\t\tnewBookObject.title = title.split('(')[0];\n\t\t\t}\n\t\t\tif (editionLanguage.length > 0) {\n\t\t\t\tnewBookObject.language = editionLanguage;\n\t\t\t}\n\t\t\tif (isbn.length > 0) {\n\t\t\t\tnewBookObject.ISBN = isbn;\n\t\t\t}\n\t\t\tif (format.length > 0) {\n\t\t\t\tnewBookObject.type = format;\n\t\t\t}\n\t\t\tif (amazonLink.length > 0 && amazonLink.includes('amazon.co')) {\n\t\t\t\tnewBookObject.amazonLink = amazonLink;\n\t\t\t}\n\t\t\tif (numberOfPages.length > 0) {\n\t\t\t\tnewBookObject.pageCount = numberOfPages;\n\t\t\t}\n\t\t\tif (publishedYear.length > 0) {\n\t\t\t\tconst publishedDate = new Date(\n\t\t\t\t\tparseInt(publishedYear),\n\t\t\t\t\tpublishedMonth.length > 0 ? parseInt(publishedMonth) : 0,\n\t\t\t\t\tpublishedDay.length > 0 ? parseInt(publishedDay) : 1\n\t\t\t\t);\n\t\t\t\tnewBookObject.publishedDate = firebase.firestore.Timestamp.fromDate(\n\t\t\t\t\tpublishedDate\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (publisher.length > 0) {\n\t\t\t\tnewBookObject.publisher = publisher;\n\t\t\t}\n\t\t\tif (coverImage !== '') {\n\t\t\t\tnewBookObject.cover = coverImage;\n\t\t\t}\n\t\t\tif (description.length > 0) {\n\t\t\t\tif (description.split('\\n')[1] !== undefined) {\n\t\t\t\t\tnewBookObject.preSynopsis = description.split('\\n')[0];\n\t\t\t\t\tnewBookObject.synopsis = description.split('\\n').slice(1).join('');\n\t\t\t\t} else {\n\t\t\t\t\tnewBookObject.synopsis = description;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (authorNames.length > 1) {\n\t\t\t\tnewBookObject.otherAuthors = await Promise.all(\n\t\t\t\t\tauthorNames.slice(1).map(async (name, index) => {\n\t\t\t\t\t\tconst properName = name\n\t\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t\t.map((n) =>\n\t\t\t\t\t\t\t\tn.length > 1\n\t\t\t\t\t\t\t\t\t? n[0].toUpperCase() + n.slice(1).toLowerCase()\n\t\t\t\t\t\t\t\t\t: n[0].toUpperCase()\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.join(' ');\n\t\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t\t.where('name', '==', properName)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\tif (authorQuery.docs.length > 0) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: authorQuery.docs[0].id,\n\t\t\t\t\t\t\t\trole: authorRoles[index],\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst newAuthorRef = await database\n\t\t\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t\t\t.add({ name: properName, GRMember: false });\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: newAuthorRef.id,\n\t\t\t\t\t\t\t\trole: authorRoles[index],\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst properAuthorName = authorNames[0]\n\t\t\t\t.split(' ')\n\t\t\t\t.map((n) =>\n\t\t\t\t\tn.length > 1\n\t\t\t\t\t\t? n[0].toUpperCase() + n.slice(1).toLowerCase()\n\t\t\t\t\t\t: n[0].toUpperCase()\n\t\t\t\t)\n\t\t\t\t.join(' ');\n\t\t\tconst mainAuthorQuery = await database\n\t\t\t\t.collection('authors')\n\t\t\t\t.where('name', '==', properAuthorName)\n\t\t\t\t.get();\n\t\t\tlet mainAuthorId = '';\n\t\t\tif (mainAuthorQuery.docs.length === 0) {\n\t\t\t\tconst newMainAuthorRef = await database\n\t\t\t\t\t.collection('authors')\n\t\t\t\t\t.add({ name: properAuthorName, GRMember: false });\n\t\t\t\tmainAuthorId = newMainAuthorRef.id;\n\t\t\t\tconst newRootBookRef = await database\n\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t.add({ authorId: mainAuthorId });\n\t\t\t\tnewBookObject.rootBook = newRootBookRef.id;\n\t\t\t\tnewBookObject.mainEdition = true;\n\t\t\t\tif (seriesName.length > 0 && !Number.isNaN(seriesInstance)) {\n\t\t\t\t\tconst properSeriesName = seriesName\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map((n) =>\n\t\t\t\t\t\t\tn.length > 1\n\t\t\t\t\t\t\t\t? n[0].toUpperCase() + n.slice(1).toLowerCase()\n\t\t\t\t\t\t\t\t: n[0].toUpperCase()\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.join(' ');\n\t\t\t\t\tconst newSeriesRef = await database\n\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t.add({ name: properSeriesName });\n\t\t\t\t\tnewRootBookRef.set(\n\t\t\t\t\t\t{ series: newSeriesRef.id, seriesInstance },\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmainAuthorId = mainAuthorQuery.docs[0].id;\n\t\t\t\tif (originalTitle.length > 0) {\n\t\t\t\t\tconst originalPublicationDate =\n\t\t\t\t\t\toriginalPublicationYear.length > 0\n\t\t\t\t\t\t\t? new Date(\n\t\t\t\t\t\t\t\t\tparseInt(originalPublicationYear),\n\t\t\t\t\t\t\t\t\toriginalPublicationMonth.length > 0\n\t\t\t\t\t\t\t\t\t\t? parseInt(originalPublicationMonth)\n\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t\toriginalPublicationDay.length > 0\n\t\t\t\t\t\t\t\t\t\t? parseInt(originalPublicationDay)\n\t\t\t\t\t\t\t\t\t\t: 1\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\tconst originalBookQuery = await database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.where('title', '==', originalTitle)\n\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst originalBookCandidates = (\n\t\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\t\toriginalBookQuery.docs.map(async (book) => {\n\t\t\t\t\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t\t\t.doc(book.data().rootBook)\n\t\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\t\tconst seriesQuery =\n\t\t\t\t\t\t\t\t\trootBookQuery.data().series !== undefined\n\t\t\t\t\t\t\t\t\t\t? await database\n\t\t\t\t\t\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t\t\t\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\t\t\tif (originalPublicationDate !== null) {\n\t\t\t\t\t\t\t\t\tconst timestamp = firebase.firestore.Timestamp.fromDate(\n\t\t\t\t\t\t\t\t\t\toriginalPublicationDate\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tmainAuthorQuery.docs[0].data().name ===\n\t\t\t\t\t\t\t\t\t\t\tauthorQuery.data().name &&\n\t\t\t\t\t\t\t\t\t\tbook.data().publishedDate === timestamp &&\n\t\t\t\t\t\t\t\t\t\t((seriesQuery === null && seriesName.length === 0) ||\n\t\t\t\t\t\t\t\t\t\t\t(seriesName.toLowerCase() ===\n\t\t\t\t\t\t\t\t\t\t\t\tseriesQuery.data().name.toLowerCase() &&\n\t\t\t\t\t\t\t\t\t\t\t\tseriesInstance === rootBookQuery.data().seriesInstance))\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn book;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tmainAuthorQuery.docs[0].data().name ===\n\t\t\t\t\t\t\t\t\t\t\tauthorQuery.data().name &&\n\t\t\t\t\t\t\t\t\t\t((seriesQuery === null && seriesName.length === 0) ||\n\t\t\t\t\t\t\t\t\t\t\t(seriesName.toLowerCase() ===\n\t\t\t\t\t\t\t\t\t\t\t\tseriesQuery.data().name.toLowerCase() &&\n\t\t\t\t\t\t\t\t\t\t\t\tseriesInstance === rootBookQuery.data().seriesInstance))\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn book;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)\n\t\t\t\t\t).filter((book) => book !== null);\n\t\t\t\t\tif (originalBookCandidates.length !== 0) {\n\t\t\t\t\t\tnewBookObject.rootBook = originalBookCandidates[0].data().rootBook;\n\t\t\t\t\t\tnewBookObject.mainEdition = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newRootBookRef = await database\n\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t.add({ authorId: mainAuthorId });\n\t\t\t\t\t\tnewBookObject.rootBook = newRootBookRef.id;\n\t\t\t\t\t\tnewBookObject.mainEdition = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst originalBookQuery = await database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.where('title', '==', title)\n\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst originalBookCandidates = await Promise.all(\n\t\t\t\t\t\toriginalBookQuery.docs.filter(async (book) => {\n\t\t\t\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t\t.doc(book.data().rootBook)\n\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\tconst seriesQuery =\n\t\t\t\t\t\t\t\trootBookQuery.data().series !== undefined\n\t\t\t\t\t\t\t\t\t? await database\n\t\t\t\t\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t\t\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tmainAuthorQuery.docs[0].data().name ===\n\t\t\t\t\t\t\t\t\tauthorQuery.data().name &&\n\t\t\t\t\t\t\t\t((seriesQuery === null && seriesName.length === 0) ||\n\t\t\t\t\t\t\t\t\t(seriesName.toLowerCase() ===\n\t\t\t\t\t\t\t\t\t\tseriesQuery.data().name.toLowerCase() &&\n\t\t\t\t\t\t\t\t\t\tseriesInstance === rootBookQuery.data().seriesInstance))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn book;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t})\n\t\t\t\t\t).filter((book) => book !== null);\n\t\t\t\t\tif (originalBookCandidates.length !== 0) {\n\t\t\t\t\t\tnewBookObject.rootBook = originalBookCandidates[0].data().rootBook;\n\t\t\t\t\t\tnewBookObject.mainEdition = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newRootBookRef = await database\n\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t.add({ authorId: mainAuthorId });\n\t\t\t\t\t\tnewBookObject.rootBook = newRootBookRef.id;\n\t\t\t\t\t\tnewBookObject.mainEdition = true;\n\t\t\t\t\t\tif (seriesName.length > 0 && !Number.isNaN(seriesInstance)) {\n\t\t\t\t\t\t\tconst properSeriesName = seriesName\n\t\t\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t\t\t.map((n) =>\n\t\t\t\t\t\t\t\t\tn.length > 1\n\t\t\t\t\t\t\t\t\t\t? n[0].toUpperCase() + n.slice(1).toLowerCase()\n\t\t\t\t\t\t\t\t\t\t: n[0].toUpperCase()\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.join(' ');\n\t\t\t\t\t\t\tconst newSeriesRef = await database\n\t\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t\t.add({ name: properSeriesName });\n\t\t\t\t\t\t\tnewRootBookRef.set(\n\t\t\t\t\t\t\t\t{ series: newSeriesRef.id, seriesInstance },\n\t\t\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst newBookRef = await database.collection('books').add(newBookObject);\n\t\t\t// 'Book was created. Please note that it will take up to 10 minutes for this book to be searchable by title/author.'\n\t\t\thistory.push({\n\t\t\t\tpathname: `/review/new/${newBookRef.id}?newBook=yes`,\n\t\t\t\tstate: { addedNewBook: true },\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst getBookInfoForTopShelvesPage = async (bookId) => {\n\t\ttry {\n\t\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\t\tconst genres = await getGenresForBook(bookQuery.data().rootBook);\n\t\t\treturn {\n\t\t\t\ttitle: bookQuery.data().title,\n\t\t\t\tgenres: genres.map((genre) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: genre.genre,\n\t\t\t\t\t\tuserCount: genre.userCount,\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst getBookInfoForGenreShelfPage = async (bookId, shelf) => {\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t.get();\n\t\tconst series =\n\t\t\trootBookQuery.data().series === undefined\n\t\t\t\t? undefined\n\t\t\t\t: (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t  ).data().name;\n\t\tconst seriesInstance = rootBookQuery.data().seriesInstance;\n\t\tconst shelfQuery = await database\n\t\t\t.collection('shelves')\n\t\t\t.where('name', '==', shelf)\n\t\t\t.where('rootBooks', 'array-contains', bookQuery.data().rootBook)\n\t\t\t.get();\n\t\tconst users = await Promise.all(\n\t\t\tshelfQuery.docs.map(async (shelf) => {\n\t\t\t\tconst id = shelf.data().user;\n\t\t\t\tconst userQuery = await database.collection('users').doc(id).get();\n\t\t\t\tconst firstName = userQuery.data().firstName;\n\t\t\t\tconst picture = userQuery.data().profileImage;\n\t\t\t\tconst numberOfFriends = userQuery.data().friends.length;\n\t\t\t\tconst userBooksInstancesQuery = await database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('userId', '==', id)\n\t\t\t\t\t.get();\n\t\t\t\tconst numberOfBooks = userBooksInstancesQuery.docs.length;\n\t\t\t\tconst numberOfBooksOnShelf = shelf.data().rootBooks.length;\n\t\t\t\treturn {\n\t\t\t\t\tid,\n\t\t\t\t\tfirstName,\n\t\t\t\t\tpicture,\n\t\t\t\t\tnumberOfBooks,\n\t\t\t\t\tnumberOfFriends,\n\t\t\t\t\tnumberOfBooksOnShelf,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t\tconst allOccurrencesOfRootBooksOnShelf = shelfQuery.docs\n\t\t\t.map((doc) => doc.data().rootBooks)\n\t\t\t.reduce((previous, current) => previous.concat(current), []);\n\t\tconst numberOfOccurrencesOfRootBooks = allOccurrencesOfRootBooksOnShelf.reduce(\n\t\t\t(previous, current) => {\n\t\t\t\tif (previous[current] === undefined) {\n\t\t\t\t\tprevious[current] = 1;\n\t\t\t\t} else {\n\t\t\t\t\tprevious[current] = previous[current] + 1;\n\t\t\t\t}\n\t\t\t\treturn previous;\n\t\t\t},\n\t\t\t{}\n\t\t);\n\t\tconst rootBooksSortedByPopularity = Object.keys(\n\t\t\tnumberOfOccurrencesOfRootBooks\n\t\t).sort(\n\t\t\t(a, b) =>\n\t\t\t\tnumberOfOccurrencesOfRootBooks[b] - numberOfOccurrencesOfRootBooks[a]\n\t\t);\n\t\trootBooksSortedByPopularity.length = Math.min(\n\t\t\trootBooksSortedByPopularity.length,\n\t\t\t5\n\t\t);\n\t\tconst popularBooksOnShelf = await Promise.all(\n\t\t\trootBooksSortedByPopularity.map(async (rootBook) => {\n\t\t\t\tconst bookQueryForRootBook = await database\n\t\t\t\t\t.collection('books')\n\t\t\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t.get();\n\t\t\t\treturn {\n\t\t\t\t\tid: bookQueryForRootBook.docs[0].id,\n\t\t\t\t\ttitle: bookQueryForRootBook.docs[0].data().title,\n\t\t\t\t\tcover: bookQueryForRootBook.docs[0].data().cover,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t\treturn {\n\t\t\tseries,\n\t\t\tseriesInstance,\n\t\t\tusers,\n\t\t\tpopularBooksOnShelf,\n\t\t};\n\t};\n\n\tconst getBookInfoForTriviaPage = async (bookId) => {\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t.get();\n\t\tconst series =\n\t\t\trootBookQuery.data().series === undefined\n\t\t\t\t? undefined\n\t\t\t\t: (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t  ).data().name;\n\t\tconst seriesInstance = rootBookQuery.data().seriesInstance;\n\t\tconst quizQuery = await database\n\t\t\t.collection('quizzes')\n\t\t\t.where('books', 'array-contains', bookQuery.data().rootBook)\n\t\t\t.get();\n\t\tconst quizQuestions = await Promise.all(\n\t\t\tquizQuery.docs.map(async (quiz) => {\n\t\t\t\tconst quizId = quiz.id;\n\t\t\t\tconst quizName = quiz.data().title;\n\t\t\t\tconst creatorId = quiz.data().creator;\n\t\t\t\tconst quizCreatorQuery = await database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(creatorId)\n\t\t\t\t\t.get();\n\t\t\t\tconst creatorFirstName = quizCreatorQuery.data().firstName;\n\t\t\t\tconst question = quiz.data().questions[0].mainQuestion;\n\t\t\t\tconst questionRootBook = quiz.data().questions[0].rootBook;\n\t\t\t\tconst book =\n\t\t\t\t\tquestionRootBook === undefined\n\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t\t\t.where('rootBook', '==', questionRootBook)\n\t\t\t\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t  ).data().title;\n\t\t\t\tconst numberOfUsersWhoTookQuiz = quiz.data().usersWhoTook.length;\n\t\t\t\tconst numberOfQuestions = quiz.data().questions.length;\n\t\t\t\tconst rating = quiz.data().rating;\n\n\t\t\t\treturn {\n\t\t\t\t\tquizId,\n\t\t\t\t\tquizName,\n\t\t\t\t\tcreatorId,\n\t\t\t\t\tcreatorFirstName,\n\t\t\t\t\tquestion,\n\t\t\t\t\tbook,\n\t\t\t\t\tnumberOfUsersWhoTookQuiz,\n\t\t\t\t\tnumberOfQuestions,\n\t\t\t\t\trating,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t\treturn {\n\t\t\tseries,\n\t\t\tseriesInstance,\n\t\t\tquizQuestions,\n\t\t};\n\t};\n\n\tconst likeQuote = async (userUID, quoteId, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst quoteQuery = await database.collection('quotes').doc(quoteId).get();\n\t\t\tif (!quoteQuery.data().usersWhoLiked.includes(userUID)) {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('quotes')\n\t\t\t\t\t.doc(quoteId)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{ usersWhoLiked: quoteQuery.data().usersWhoLiked.concat(userUID) },\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst getBookInfoForQuotesPage = async (userUID, bookId) => {\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst pageCount = bookQuery.data().pageCount;\n\t\tconst cover = bookQuery.data().cover;\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t.get();\n\t\tconst authorId = rootBookQuery.data().authorId;\n\t\tconst authorQuery = await database\n\t\t\t.collection('authors')\n\t\t\t.doc(authorId)\n\t\t\t.get();\n\t\tconst authorName = authorQuery.data().name;\n\t\tconst ratingsQuery = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('rating', '>', 0)\n\t\t\t.get();\n\t\tconst numberOfRatings = ratingsQuery.docs.length;\n\t\tconst ratings = ratingsQuery.docs.map((doc) => doc.data().rating);\n\t\tconst averageRating =\n\t\t\tratingsQuery.docs.lengh === 0\n\t\t\t\t? 0\n\t\t\t\t: ratings.reduce(\n\t\t\t\t\t\t(previous, current) => previous + current / numberOfRatings,\n\t\t\t\t\t\t0\n\t\t\t\t  );\n\t\tconst editionsQuery = await database\n\t\t\t.collection('books')\n\t\t\t.where('rootBook', '==', bookQuery.data().rootBook)\n\t\t\t.get();\n\t\tconst editions = editionsQuery.docs.map((doc) => doc.id);\n\t\tconst reviewsQuery = await database\n\t\t\t.collection('reviews')\n\t\t\t.where('bookEdition', 'in', editions)\n\t\t\t.get();\n\t\tconst numberOfReviews = reviewsQuery.docs.length;\n\t\tconst thisUserInstanceQuery =\n\t\t\tuserUID === null || userUID === undefined\n\t\t\t\t? null\n\t\t\t\t: await database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t\t\t.get();\n\t\tconst userStatus =\n\t\t\tthisUserInstanceQuery === null || thisUserInstanceQuery.docs.length === 0\n\t\t\t\t? undefined\n\t\t\t\t: thisUserInstanceQuery.docs[0].data().status;\n\t\tconst userRating =\n\t\t\tthisUserInstanceQuery === null || thisUserInstanceQuery.docs.length === 0\n\t\t\t\t? undefined\n\t\t\t\t: thisUserInstanceQuery.docs[0].data().rating;\n\t\tconst userProgress =\n\t\t\tthisUserInstanceQuery === null || thisUserInstanceQuery.docs.length === 0\n\t\t\t\t? undefined\n\t\t\t\t: thisUserInstanceQuery.docs[0].data().progress;\n\t\tconst toReadBookPosition =\n\t\t\tthisUserInstanceQuery === null || thisUserInstanceQuery.docs.length === 0\n\t\t\t\t? undefined\n\t\t\t\t: thisUserInstanceQuery.docs[0].data().position;\n\t\tconst quotes = (\n\t\t\tawait database\n\t\t\t\t.collection('quotes')\n\t\t\t\t.where('rootBook', '==', bookQuery.data().rootBook)\n\t\t\t\t.get()\n\t\t).docs.map((doc) => {\n\t\t\treturn {\n\t\t\t\tid: doc.id,\n\t\t\t\tcontent: doc.data().text,\n\t\t\t\ttags: doc.data().tags,\n\t\t\t\tusersWhoLiked: doc.data().usersWhoLiked,\n\t\t\t};\n\t\t});\n\t\treturn {\n\t\t\tpageCount,\n\t\t\tcover,\n\t\t\tauthorId,\n\t\t\tauthorName,\n\t\t\tnumberOfRatings,\n\t\t\taverageRating,\n\t\t\tnumberOfReviews,\n\t\t\tuserStatus,\n\t\t\tuserRating,\n\t\t\tuserProgress,\n\t\t\ttoReadBookPosition,\n\t\t\tquotes,\n\t\t};\n\t};\n\n\tconst getBookInfoForListsPage = async (bookId) => {\n\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\tconst title = bookQuery.data().title;\n\t\tconst cover = bookQuery.data().cover;\n\t\tconst rootBookQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t.get();\n\t\tconst seriesQuery = await database\n\t\t\t.collection('series')\n\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t.get();\n\t\tconst series = seriesQuery.data().name;\n\t\tconst seriesInstance = rootBookQuery.data().seriesInstance;\n\t\tconst authorId = rootBookQuery.data().authorId;\n\t\tconst authorQuery = await database\n\t\t\t.collection('authors')\n\t\t\t.doc(authorId)\n\t\t\t.get();\n\t\tconst authorName = authorQuery.data().name;\n\t\tconst authorIsMember = authorQuery.data().GRMember;\n\t\tconst listsQuery = await database\n\t\t\t.collection('lists')\n\t\t\t.where('books', 'array-contains', bookId)\n\t\t\t.get();\n\t\tconst lists = await Promise.all(\n\t\t\tlistsQuery.docs.map(async (doc) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: doc.id,\n\t\t\t\t\tname: doc.data().title,\n\t\t\t\t\tbookPosition: doc.data().books.indexOf(bookId) + 1,\n\t\t\t\t\tbookCovers: await Promise.all(\n\t\t\t\t\t\tdoc.data().books.map(async (id) => {\n\t\t\t\t\t\t\treturn (await database.collection('books').doc(id).get()).data()\n\t\t\t\t\t\t\t\t.cover;\n\t\t\t\t\t\t})\n\t\t\t\t\t),\n\t\t\t\t\tvoterCount: doc.data().userVotes.length,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\n\t\treturn {\n\t\t\ttitle,\n\t\t\tcover,\n\t\t\tseries,\n\t\t\tseriesInstance,\n\t\t\tauthorId,\n\t\t\tauthorName,\n\t\t\tauthorIsMember,\n\t\t\tlists,\n\t\t};\n\t};\n\n\tconst addRemoveAuthorToFavorites = async (userUID, authorId, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst userQuery = await database.collection('users').doc(userUID).get();\n\t\t\tif (\n\t\t\t\tuserQuery.data().favoriteAuthors !== undefined &&\n\t\t\t\tuserQuery.data().favoriteAuthors.includes(authorId)\n\t\t\t) {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(userUID)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfavoriteAuthors: userQuery\n\t\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t\t.favoriteAuthors.filter((author) => author !== authorId),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(userUID)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfavoriteAuthors: userQuery\n\t\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t\t.favoriteAuthors.concat(authorId),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst getAuthorBestBook = async (authorId) => {\n\t\tconst allBooksByAuthor = (\n\t\t\tawait Promise.all(\n\t\t\t\t(\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t.where('authorId', '==', authorId)\n\t\t\t\t\t\t.get()\n\t\t\t\t).docs.map(async (doc) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t.where('rootBook', '==', doc.id)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs.map((doc) => doc.id);\n\t\t\t\t})\n\t\t\t)\n\t\t).reduce((previous, current) => previous.concat(current), []);\n\t\treturn (\n\t\t\tawait Promise.all(\n\t\t\t\tallBooksByAuthor.map(async (bookId) => {\n\t\t\t\t\tconst userInstanceQueryForBook = await database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: bookId,\n\t\t\t\t\t\ttotalInstances: userInstanceQueryForBook.docs.length,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t)\n\t\t).reduce(\n\t\t\t(previous, current) =>\n\t\t\t\tcurrent.totalInstances >= previous.totalInstances ? current : previous,\n\t\t\t{\n\t\t\t\tid: '',\n\t\t\t\ttotalInstances: 0,\n\t\t\t}\n\t\t).id;\n\t};\n\n\tconst getAuthorInfoForAuthorPage = async (userUID, authorId) => {\n\t\tconst authorQuery = await database\n\t\t\t.collection('authors')\n\t\t\t.doc(authorId)\n\t\t\t.get();\n\t\tconst GRMember = authorQuery.data().GRMember;\n\t\tconst placeOfBirth = authorQuery.data().placeOfBirth;\n\t\tconst dateOfBirth =\n\t\t\tauthorQuery.data().dateOfBirth !== null &&\n\t\t\tauthorQuery.data().dateOfBirth !== undefined\n\t\t\t\t? authorQuery.data().dateOfBirth.toDate()\n\t\t\t\t: undefined;\n\t\tconst influences =\n\t\t\tauthorQuery.data().influences !== undefined\n\t\t\t\t? await Promise.all(\n\t\t\t\t\t\tauthorQuery.data().influences.map(async (id) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tname: (\n\t\t\t\t\t\t\t\t\tawait database.collection('authors').doc(id).get()\n\t\t\t\t\t\t\t\t).data().name,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t  )\n\t\t\t\t: undefined;\n\t\tconst website = authorQuery.data().website;\n\t\tconst twitter = authorQuery.data().twitter;\n\t\tconst genre = authorQuery.data().genre;\n\t\tconst userQuery =\n\t\t\tauthorQuery.data().user !== undefined\n\t\t\t\t? await database.collection('users').doc(authorQuery.data().user).get()\n\t\t\t\t: undefined;\n\t\tconst memberSince =\n\t\t\tuserQuery !== undefined\n\t\t\t\t? userQuery.data().membershipDate.toDate()\n\t\t\t\t: undefined;\n\t\tconst description =\n\t\t\tauthorQuery.data().about !== undefined\n\t\t\t\t? authorQuery.data().about.replace(/\\\\n/g, '\\n')\n\t\t\t\t: undefined;\n\t\tconst profilePicture = authorQuery.data().picture;\n\t\tconst authorInstanceQuery =\n\t\t\tuserQuery !== undefined\n\t\t\t\t? await database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('userId', '==', userQuery.id)\n\t\t\t\t\t\t.get()\n\t\t\t\t: undefined;\n\t\tconst userInstanceRatingQuery =\n\t\t\tuserQuery !== undefined\n\t\t\t\t? await database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('userId', '==', userQuery.id)\n\t\t\t\t\t\t.where('rating', '>', 0)\n\t\t\t\t\t\t.get()\n\t\t\t\t: undefined;\n\t\tconst numberOfRatings =\n\t\t\tuserInstanceRatingQuery !== undefined\n\t\t\t\t? userInstanceRatingQuery.docs.length\n\t\t\t\t: undefined;\n\t\tconst numberOfReviews =\n\t\t\tuserQuery !== undefined\n\t\t\t\t? (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('reviews')\n\t\t\t\t\t\t\t.where('user', '==', userQuery.id)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t  ).docs.length\n\t\t\t\t: undefined;\n\t\tconst averageRating =\n\t\t\tuserInstanceRatingQuery !== undefined\n\t\t\t\t? userInstanceRatingQuery.docs.reduce(\n\t\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\t\tprevious + current / userInstanceRatingQuery.docs.length,\n\t\t\t\t\t\t0\n\t\t\t\t  )\n\t\t\t\t: undefined;\n\t\tconst followers =\n\t\t\tauthorQuery.data().followers !== undefined\n\t\t\t\t? await Promise.all(\n\t\t\t\t\t\tauthorQuery.data().followers.map(async (followerId) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: followerId,\n\t\t\t\t\t\t\t\tname: (\n\t\t\t\t\t\t\t\t\tawait database.collection('users').doc(followerId).get()\n\t\t\t\t\t\t\t\t).data().firstName,\n\t\t\t\t\t\t\t\tprofilePicture: (\n\t\t\t\t\t\t\t\t\tawait database.collection('users').doc(followerId).get()\n\t\t\t\t\t\t\t\t).data().profileImage,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t  )\n\t\t\t\t: [];\n\t\tconst authorFollowerRankingQuery = (\n\t\t\tawait database.collection('authors').get()\n\t\t).docs.sort((a, b) =>\n\t\t\ta.data().followers === undefined || b.data().followers === undefined\n\t\t\t\t? b\n\t\t\t\t: b.data().followers.length - a.data().followers.length\n\t\t);\n\t\tconst mostFollowedPosition =\n\t\t\tauthorFollowerRankingQuery.map((doc) => doc.id).indexOf(authorId) + 1;\n\t\tconst reviewerRankingQuery = await Promise.all(\n\t\t\t(await database.collection('users').get()).docs\n\t\t\t\t.map(async (doc) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\tscore: (\n\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t.collection('reviews')\n\t\t\t\t\t\t\t\t.where('user', '==', doc.id)\n\t\t\t\t\t\t\t\t.where('rating', '>', 0)\n\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t).docs\n\t\t\t\t\t\t\t.map((doc) => doc.data().rating)\n\t\t\t\t\t\t\t.reduce((previous, current) => previous + current, 0),\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => b.score - a.score)\n\t\t);\n\t\tconst reviewerPosition =\n\t\t\treviewerRankingQuery.map((obj) => obj.id).indexOf(authorId) !== -1\n\t\t\t\t? reviewerRankingQuery.map((obj) => obj.id).indexOf(authorId) + 1\n\t\t\t\t: undefined;\n\t\tconst usersWhoHaveAsFavorite = (\n\t\t\tawait database\n\t\t\t\t.collection('users')\n\t\t\t\t.where('favoriteAuthors', 'array-contains', authorId)\n\t\t\t\t.get()\n\t\t).docs.map((doc) => doc.id);\n\t\tconst numberOfReadBooks =\n\t\t\tauthorInstanceQuery !== undefined\n\t\t\t\t? authorInstanceQuery.docs.filter((doc) => doc.data().status === 'read')\n\t\t\t\t\t\t.length\n\t\t\t\t: undefined;\n\t\tconst numberOfToReadBooks =\n\t\t\tauthorInstanceQuery !== undefined\n\t\t\t\t? authorInstanceQuery.docs.filter(\n\t\t\t\t\t\t(doc) => doc.data().status === 'to-read'\n\t\t\t\t  ).length\n\t\t\t\t: null;\n\t\tconst numberOfReadingBooks =\n\t\t\tauthorInstanceQuery !== undefined\n\t\t\t\t? authorInstanceQuery.docs.filter(\n\t\t\t\t\t\t(doc) => doc.data().status === 'reading'\n\t\t\t\t  ).length\n\t\t\t\t: null;\n\t\tconst numberOfFavoriteBooks =\n\t\t\tauthorInstanceQuery !== undefined\n\t\t\t\t? authorInstanceQuery.docs.filter((doc) => doc.data().favorite).length\n\t\t\t\t: null;\n\t\tconst friends =\n\t\t\tuserQuery !== undefined\n\t\t\t\t? await Promise.all(\n\t\t\t\t\t\tuserQuery.data().friends.map(async (friendId) => {\n\t\t\t\t\t\t\tconst friendUserQuery = await database\n\t\t\t\t\t\t\t\t.collection('users')\n\t\t\t\t\t\t\t\t.doc(friendId)\n\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: friendId,\n\t\t\t\t\t\t\t\tname:\n\t\t\t\t\t\t\t\t\tfriendUserQuery.data().lastName !== undefined\n\t\t\t\t\t\t\t\t\t\t? friendUserQuery.data().firstName +\n\t\t\t\t\t\t\t\t\t\t  ' ' +\n\t\t\t\t\t\t\t\t\t\t  friendUserQuery.data().lastName\n\t\t\t\t\t\t\t\t\t\t: friendUserQuery.data().firstName,\n\t\t\t\t\t\t\t\tprofilePicture: friendUserQuery.data().profileImage,\n\t\t\t\t\t\t\t\tnumberOfBooks: (\n\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t\t\t\t.where('userId', '==', friendId)\n\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t).docs.length,\n\t\t\t\t\t\t\t\tnumberOfFriends: friendUserQuery.data().friends.length,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t  )\n\t\t\t\t: undefined;\n\t\tconst rootBooksByAuthorQuery = await database\n\t\t\t.collection('rootBooks')\n\t\t\t.where('authorId', '==', authorId)\n\t\t\t.get();\n\t\tconst booksByAuthor = await Promise.all(\n\t\t\trootBooksByAuthorQuery.docs.map(async (rootBookDoc) => {\n\t\t\t\tconst editionIds = (\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.where('rootBook', '==', rootBookDoc.id)\n\t\t\t\t\t\t.get()\n\t\t\t\t).docs.map((doc) => doc.id);\n\t\t\t\tconst bookQuery = (\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.where('rootBook', '==', rootBookDoc.id)\n\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t.get()\n\t\t\t\t).docs[0];\n\t\t\t\tconst userInstanceQuery =\n\t\t\t\t\tuserUID !== undefined && userUID !== null\n\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t  ).docs.filter((doc) => editionIds.includes(doc.data().bookId))\n\t\t\t\t\t\t: undefined;\n\t\t\t\tconst ratingsQuery = (\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('bookId', 'in', editionIds)\n\t\t\t\t\t\t.get()\n\t\t\t\t).docs.filter((doc) => doc.data().rating !== undefined);\n\t\t\t\treturn {\n\t\t\t\t\tid: bookQuery.id,\n\t\t\t\t\ttitle: bookQuery.data().title,\n\t\t\t\t\tseriesId: rootBookDoc.data().series,\n\t\t\t\t\tseries:\n\t\t\t\t\t\trootBookDoc.data().series !== undefined\n\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t\t\t\t.doc(rootBookDoc.data().series)\n\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t  ).data().name\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\tseriesInstance: rootBookDoc.data().seriesInstance,\n\t\t\t\t\tcover: bookQuery.data().cover,\n\t\t\t\t\tuserStatus:\n\t\t\t\t\t\tuserInstanceQuery !== undefined && userInstanceQuery.length > 0\n\t\t\t\t\t\t\t? userInstanceQuery[0].data().status\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\tuserRating:\n\t\t\t\t\t\tuserInstanceQuery !== undefined && userInstanceQuery.length > 0\n\t\t\t\t\t\t\t? userInstanceQuery[0].data().rating\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\taverageRating: ratingsQuery\n\t\t\t\t\t\t.map((doc) => doc.data().rating)\n\t\t\t\t\t\t.reduce(\n\t\t\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\t\t\tratingsQuery.length !== 0\n\t\t\t\t\t\t\t\t\t? previous + current / ratingsQuery.length\n\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\tratings: ratingsQuery.length,\n\t\t\t\t\tpublishedYear:\n\t\t\t\t\t\tbookQuery.data().publishedDate !== undefined\n\t\t\t\t\t\t\t? bookQuery.data().publishedDate.toDate().getFullYear()\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\teditions: editionIds.length,\n\t\t\t\t\tnumberOfReviews: (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('reviews')\n\t\t\t\t\t\t\t.where('bookEdition', 'in', editionIds)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs.length,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t\tconst seriesByAuthor = await Promise.all(\n\t\t\t(\n\t\t\t\tawait database\n\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t.where('authorId', '==', authorId)\n\t\t\t\t\t.get()\n\t\t\t).docs\n\t\t\t\t.filter((doc) => doc.data().series !== undefined)\n\t\t\t\t.map((doc) => doc.data().series)\n\t\t\t\t.reduce(\n\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\tprevious.includes(current) ? previous : previous.concat(current),\n\t\t\t\t\t[]\n\t\t\t\t)\n\t\t\t\t.map(async (seriesId) => {\n\t\t\t\t\tconst seriesQuery = await database\n\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t.doc(seriesId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t.where('series', '==', seriesId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst ratingCount = booksByAuthor\n\t\t\t\t\t\t.filter((book) => book.seriesId === seriesId)\n\t\t\t\t\t\t.reduce((previous, current) => previous + current.ratings, 0);\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttitle: seriesQuery.data().name,\n\t\t\t\t\t\tbooks: await Promise.all(\n\t\t\t\t\t\t\trootBookQuery.docs.map(async (rootBook) => {\n\t\t\t\t\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t\t\t.where('rootBook', '==', rootBook.id)\n\t\t\t\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tid: bookQuery.docs[0].id,\n\t\t\t\t\t\t\t\t\ttitle: bookQuery.docs[0].data().title,\n\t\t\t\t\t\t\t\t\tseriesInstance: rootBook.data().seriesInstance,\n\t\t\t\t\t\t\t\t\tcover: bookQuery.docs[0].data().cover,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t),\n\t\t\t\t\t\taverageRating: booksByAuthor\n\t\t\t\t\t\t\t.filter((book) => book.seriesId === seriesId)\n\t\t\t\t\t\t\t.reduce(\n\t\t\t\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t? previous +\n\t\t\t\t\t\t\t\t\t\t  (current.averageRating * current.ratings) / ratingCount\n\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tnumberOfRatings: ratingCount,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t);\n\t\tconst relatedNews = (\n\t\t\tawait database\n\t\t\t\t.collection('articles')\n\t\t\t\t.where(\n\t\t\t\t\t'featuredBooks',\n\t\t\t\t\t'array-contains-any',\n\t\t\t\t\trootBooksByAuthorQuery.docs.map((rootBook) => rootBook.id)\n\t\t\t\t)\n\t\t\t\t.get()\n\t\t).docs.map((article) => {\n\t\t\treturn {\n\t\t\t\tid: article.id,\n\t\t\t\ttitle: article.data().title,\n\t\t\t\tcontent: article.data().content,\n\t\t\t\tnumberOfLikes: article.data().usersWhoLiked.length,\n\t\t\t\tnumberOfComments: article.data().comments.length,\n\t\t\t\timage: article.data().image,\n\t\t\t};\n\t\t});\n\t\tconst quotes = await Promise.all(\n\t\t\t(\n\t\t\t\tawait database\n\t\t\t\t\t.collection('quotes')\n\t\t\t\t\t.where('authorId', '==', authorId)\n\t\t\t\t\t.get()\n\t\t\t).docs.map(async (quote) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: quote.id,\n\t\t\t\t\tcontent: quote.data().text,\n\t\t\t\t\tbookTitle: (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t.where('rootBook', '==', quote.data().rootBook)\n\t\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs[0].data().title,\n\t\t\t\t\ttags: quote.data().tags,\n\t\t\t\t\tusersWhoLiked: quote.data().usersWhoLiked,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t\tconst favoriteAuthors =\n\t\t\tuserQuery !== undefined\n\t\t\t\t? await Promise.all(\n\t\t\t\t\t\tuserQuery.data().favoriteAuthors.map(async (author) => {\n\t\t\t\t\t\t\tconst favoriteAuthorQuery = await database\n\t\t\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t\t\t.doc(author)\n\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\tconst bestBookId = await getAuthorBestBook(author);\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: author,\n\t\t\t\t\t\t\t\tname: favoriteAuthorQuery.data().name,\n\t\t\t\t\t\t\t\timage: favoriteAuthorQuery.data().picture,\n\t\t\t\t\t\t\t\tbestBookId,\n\t\t\t\t\t\t\t\tbestBookTitle: (\n\t\t\t\t\t\t\t\t\tawait database.collection('books').doc(bestBookId).get()\n\t\t\t\t\t\t\t\t).data().title,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t  )\n\t\t\t\t: undefined;\n\n\t\treturn {\n\t\t\tGRMember,\n\t\t\tplaceOfBirth,\n\t\t\tdateOfBirth,\n\t\t\tinfluences,\n\t\t\twebsite,\n\t\t\ttwitter,\n\t\t\tgenre,\n\t\t\tmemberSince,\n\t\t\tdescription,\n\t\t\tprofilePicture,\n\t\t\tnumberOfRatings,\n\t\t\tnumberOfReviews,\n\t\t\taverageRating,\n\t\t\tfollowers,\n\t\t\tmostFollowedPosition,\n\t\t\treviewerPosition,\n\t\t\tusersWhoHaveAsFavorite,\n\t\t\tnumberOfReadBooks,\n\t\t\tnumberOfToReadBooks,\n\t\t\tnumberOfReadingBooks,\n\t\t\tnumberOfFavoriteBooks,\n\t\t\tfriends,\n\t\t\tbooksByAuthor,\n\t\t\tseriesByAuthor,\n\t\t\trelatedNews,\n\t\t\tquotes,\n\t\t\tfavoriteAuthors,\n\t\t};\n\t};\n\n\tconst changeFavoriteAuthors = async (userUID, newArray) => {\n\t\tif (userUID !== null && userUID !== undefined) {\n\t\t\ttry {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.doc(userUID)\n\t\t\t\t\t.set({ favoriteAuthors: newArray }, { merge: true });\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst fetchUserFavoriteAuthors = async (userUID, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t\treturn [];\n\t\t} else {\n\t\t\treturn await Promise.all(\n\t\t\t\t(await database.collection('users').doc(userUID).get())\n\t\t\t\t\t.data()\n\t\t\t\t\t.favoriteAuthors.map(async (authorId) => {\n\t\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t\t.doc(authorId)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\tconst bestBookId = await getAuthorBestBook(authorId);\n\t\t\t\t\t\tconst rootBooksByAuthor = (\n\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t\t.where('authorId', '==', authorId)\n\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t).docs.map((doc) => doc.id);\n\t\t\t\t\t\tconst editionsByAuthor = (\n\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t\t.where('rootBook', 'in', rootBooksByAuthor)\n\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t).docs.map((doc) => doc.id);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: authorId,\n\t\t\t\t\t\t\tname: authorQuery.data().name,\n\t\t\t\t\t\t\tuserId: authorQuery.data().user,\n\t\t\t\t\t\t\tbestBookId,\n\t\t\t\t\t\t\tbestBookTitle: (\n\t\t\t\t\t\t\t\tawait database.collection('books').doc(bestBookId).get()\n\t\t\t\t\t\t\t).data().title,\n\t\t\t\t\t\t\tprofilePicture: authorQuery.data().picture,\n\t\t\t\t\t\t\tnumberOfBooks: editionsByAuthor.length,\n\t\t\t\t\t\t\tnumberOfShelvedBooks:\n\t\t\t\t\t\t\t\tauthorQuery.data().user === undefined\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t\t\t\t\t\t.where('userId', '==', authorQuery.data().user)\n\t\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t  ).docs.length,\n\t\t\t\t\t\t\tnumberOfMemberReviews: (\n\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t.collection('reviews')\n\t\t\t\t\t\t\t\t\t.where('bookEdition', 'in', editionsByAuthor)\n\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t).docs.length,\n\t\t\t\t\t\t\tnumberOfFriends:\n\t\t\t\t\t\t\t\tauthorQuery.data().user === undefined\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t\t\t.collection('users')\n\t\t\t\t\t\t\t\t\t\t\t\t.doc(authorQuery.data().user)\n\t\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t  ).data().friends.length,\n\t\t\t\t\t\t\tnumberOfFollowers:\n\t\t\t\t\t\t\t\tauthorQuery.data().followers === undefined\n\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t: authorQuery.data().followers.length,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\tconst getUserInfoForFavoriteAuthorsForUserPage = async (userId) => {\n\t\tconst userQuery = await database.collection('users').doc(userId).get();\n\t\treturn {\n\t\t\tfirstName: userQuery.data().firstName,\n\t\t\tauthors: await fetchUserFavoriteAuthors(userId, null),\n\t\t};\n\t};\n\n\tconst getNotificationsForUser = async (userUID, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t\treturn [];\n\t\t} else {\n\t\t\tconst userQuery = await database.collection('users').doc(userUID).get();\n\t\t\treturn userQuery.data().notifications.map((notification) => {\n\t\t\t\treturn {\n\t\t\t\t\tanchorSrc: notification.anchorSrc,\n\t\t\t\t\tcontent: notification.content,\n\t\t\t\t\timage: notification.image,\n\t\t\t\t\tname: notification.name,\n\t\t\t\t\tnonAnchorContent: notification.nonAnchorContent,\n\t\t\t\t\ttime: notification.time.toDate(),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst saveUserSettings = async (userUID, settings) => {\n\t\tawait database\n\t\t\t.collection('users')\n\t\t\t.doc(userUID)\n\t\t\t.set(settings, { merge: true });\n\t};\n\n\tconst deleteProfilePicture = async (userUID) => {\n\t\tawait database\n\t\t\t.collection('users')\n\t\t\t.doc(userUID)\n\t\t\t.update({ profileImage: firebase.firestore.FieldValue.delete() });\n\t};\n\n\tconst getUserSettings = async (userUID, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t\treturn {};\n\t\t} else {\n\t\t\tconst userQueryData = (\n\t\t\t\tawait database.collection('users').doc(userUID).get()\n\t\t\t).data();\n\t\t\tconst tidyUpUserSettingForProps = (setting) => {\n\t\t\t\treturn setting !== undefined ? setting : '';\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tprofile: {\n\t\t\t\t\tfirstName: tidyUpUserSettingForProps(userQueryData.firstName),\n\t\t\t\t\tmiddleName: tidyUpUserSettingForProps(userQueryData.middleName),\n\t\t\t\t\tlastName: tidyUpUserSettingForProps(userQueryData.lastName),\n\t\t\t\t\tshowLastNameTo: userQueryData.showLastNameTo,\n\t\t\t\t\tgender: tidyUpUserSettingForProps(userQueryData.gender),\n\t\t\t\t\tcustomGender: tidyUpUserSettingForProps(userQueryData.customGender),\n\t\t\t\t\tpronouns: userQueryData.pronouns,\n\t\t\t\t\tshowGenderTo: userQueryData.showGenderTo,\n\t\t\t\t\tzipCode: tidyUpUserSettingForProps(userQueryData.zipCode),\n\t\t\t\t\tcity: tidyUpUserSettingForProps(userQueryData.city),\n\t\t\t\t\tstateProvinceCode: tidyUpUserSettingForProps(\n\t\t\t\t\t\tuserQueryData.stateProvinceCode\n\t\t\t\t\t),\n\t\t\t\t\tcountry: tidyUpUserSettingForProps(userQueryData.country),\n\t\t\t\t\tlocationViewableBy: userQueryData.locationViewableBy,\n\t\t\t\t\tdateOfBirth:\n\t\t\t\t\t\tuserQueryData.dateOfBirth === null\n\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t: userQueryData.dateOfBirth.toDate(),\n\t\t\t\t\tageAndBirthdayPrivacy: userQueryData.ageAndBirthdayPrivacy,\n\t\t\t\t\tprofilePicture: userQueryData.profileImage,\n\t\t\t\t\twebsite: tidyUpUserSettingForProps(userQueryData.website),\n\t\t\t\t\tinterests: tidyUpUserSettingForProps(userQueryData.interests),\n\t\t\t\t\ttypeOfBooks: tidyUpUserSettingForProps(userQueryData.typeOfBooks),\n\t\t\t\t\taboutMe: tidyUpUserSettingForProps(userQueryData.aboutMe),\n\t\t\t\t},\n\t\t\t\taccount: {\n\t\t\t\t\temail: tidyUpUserSettingForProps(userQueryData.email),\n\t\t\t\t\temailVerifiedDate: userQueryData.emailVerifiedDate,\n\t\t\t\t\tpasswordLength: tidyUpUserSettingForProps(userQueryData.password)\n\t\t\t\t\t\t.length,\n\t\t\t\t\twhoCanViewMyProfile: userQueryData.whoCanViewMyProfile,\n\t\t\t\t\temailAddressVisibleTo: userQueryData.emailAddressVisibleTo,\n\t\t\t\t\tfriendChallengeQuestion: tidyUpUserSettingForProps(\n\t\t\t\t\t\tuserQueryData.friendChallengeQuestion\n\t\t\t\t\t),\n\t\t\t\t\tfriendChallengeAnswer: tidyUpUserSettingForProps(\n\t\t\t\t\t\tuserQueryData.friendChallengeAnswer\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\tfeed: {\n\t\t\t\t\taddBookToShelves: userQueryData.addBookToShelves,\n\t\t\t\t\taddAFriend: userQueryData.addAFriend,\n\t\t\t\t\tvoteForABookReview: userQueryData.voteForABookReview,\n\t\t\t\t\taddAQuote: userQueryData.addAQuote,\n\t\t\t\t\trecommendABook: userQueryData.recommendABook,\n\t\t\t\t\taddANewStatusToBook: userQueryData.addANewStatusToBook,\n\t\t\t\t\tfollowAnAuthor: userQueryData.followAnAuthor,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t};\n\n\tconst checkIfPasswordsMatch = async (userUID, password) => {\n\t\treturn (\n\t\t\t(await database.collection('users').doc(userUID).get()).data()\n\t\t\t\t.password === password\n\t\t);\n\t};\n\n\tconst changePassword = async (userUID, newPassword, history) => {\n\t\tawait database\n\t\t\t.collection('users')\n\t\t\t.doc(userUID)\n\t\t\t.set({ password: newPassword }, { merge: true });\n\t\thistory.push({\n\t\t\tpathname: '/user/sign_in',\n\t\t\tstate: { message: 'Your password has been updated.' },\n\t\t});\n\t};\n\n\tconst deleteAccount = async (userUID, history) => {\n\t\tconst userInstanceQuery = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('userId', '==', userUID)\n\t\t\t.get();\n\t\tuserInstanceQuery.docs.map(async (doc) => {\n\t\t\tawait doc.delete();\n\t\t});\n\t\tconst reviewQuery = await database\n\t\t\t.collection('reviews')\n\t\t\t.where('user', '==', userUID)\n\t\t\t.get();\n\t\treviewQuery.docs.map(async (doc) => {\n\t\t\tawait doc.delete();\n\t\t});\n\t\tawait database.collection('users').doc(userUID).delete();\n\t\thistory.push({\n\t\t\tpathname: '/home',\n\t\t\tstate: { message: 'Your account will be permanently deleted.' },\n\t\t});\n\t};\n\n\tconst getFavoriteGenresForUser = async (userUID, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t\treturn [];\n\t\t} else {\n\t\t\treturn (await database.collection('users').doc(userUID).get()).data()\n\t\t\t\t.favoriteGenres;\n\t\t}\n\t};\n\n\tconst updateFavoriteGenresForUser = async (userUID, newGenres) => {\n\t\tawait database\n\t\t\t.collection('users')\n\t\t\t.doc(userUID)\n\t\t\t.set({ favoriteGenres: newGenres }, { merge: true });\n\t};\n\n\tconst getGenreInfo = async (userUID, genre) => {\n\t\tconst userFavoriteGenres =\n\t\t\tuserUID !== undefined && userUID !== null\n\t\t\t\t? (await database.collection('users').doc(userUID).get()).data()\n\t\t\t\t\t\t.favoriteGenres\n\t\t\t\t: undefined;\n\t\tconst genreQuery = await database.collection('genres').doc(genre).get();\n\t\tconst description = genreQuery.data().description;\n\t\tconst relatedGenres = genreQuery.data().relatedGenres;\n\t\tconst parentGenre = genreQuery.data().parentGenre;\n\t\tconst shelfQuery = await database\n\t\t\t.collection('shelves')\n\t\t\t.where('genre', '==', genre)\n\t\t\t.get();\n\t\tconst allRootBooksOfGenre = shelfQuery.docs.reduce((previous, current) => {\n\t\t\tconst newArray = previous;\n\t\t\tcurrent.data().rootBooks.forEach((rootBook) => {\n\t\t\t\tif (!newArray.includes(rootBook)) {\n\t\t\t\t\tnewArray.push(rootBook);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn newArray;\n\t\t}, []);\n\t\tconst allBookDocsOfGenre = [].concat.apply(\n\t\t\t[],\n\t\t\tawait Promise.all(\n\t\t\t\tallRootBooksOfGenre.map(async (rootBook) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs;\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t\tconst newReleases = allBookDocsOfGenre\n\t\t\t.sort((a, b) =>\n\t\t\t\ta.data().publishedDate === undefined\n\t\t\t\t\t? b\n\t\t\t\t\t: b.data().publishedDate === undefined\n\t\t\t\t\t? a\n\t\t\t\t\t: b.data().publishedDate.toDate() - a.data().publishedDate.toDate()\n\t\t\t)\n\t\t\t.map((release) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: release.id,\n\t\t\t\t\tcover: release.data().cover,\n\t\t\t\t\ttitle: release.data().title,\n\t\t\t\t};\n\t\t\t});\n\t\tnewReleases.length = Math.min(newReleases.length, 15);\n\t\tconst userUpdatesQuery = await database\n\t\t\t.collection('userBooksUpdates')\n\t\t\t.get();\n\t\tconst mostReadThisWeek = await Promise.all(\n\t\t\tObject.entries(\n\t\t\t\tuserUpdatesQuery.docs\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(doc) =>\n\t\t\t\t\t\t\tdifferenceInDays(new Date(), doc.data().date.toDate()) <= 7 &&\n\t\t\t\t\t\t\tallBookDocsOfGenre\n\t\t\t\t\t\t\t\t.map((bookDoc) => bookDoc.id)\n\t\t\t\t\t\t\t\t.includes(doc.data().book) &&\n\t\t\t\t\t\t\tdoc.data().action === 'add-book' &&\n\t\t\t\t\t\t\t(doc.data().shelf === 'read' || doc.data().shelf === 'reading')\n\t\t\t\t\t)\n\t\t\t\t\t.reduce((previous, current) => {\n\t\t\t\t\t\tif (previous[current.data().book] === undefined) {\n\t\t\t\t\t\t\tprevious[current.data().book] = 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tprevious[current.data().book] += 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn previous;\n\t\t\t\t\t}, {})\n\t\t\t)\n\t\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t\t.map(async (bookValuePair) => {\n\t\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.doc(bookValuePair[0])\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: bookValuePair[0],\n\t\t\t\t\t\tcover: bookQuery.data().cover,\n\t\t\t\t\t\ttitle: bookQuery.data().cover,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t);\n\t\tmostReadThisWeek.length = Math.min(mostReadThisWeek.length, 15);\n\t\tconst lists = await Promise.all(\n\t\t\t(\n\t\t\t\tawait database\n\t\t\t\t\t.collection('lists')\n\t\t\t\t\t.where('tags', 'array-contains', genre)\n\t\t\t\t\t.get()\n\t\t\t).docs.map(async (doc) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: doc.id,\n\t\t\t\t\ttitle: doc.data().title,\n\t\t\t\t\tbookCovers: await Promise.all(\n\t\t\t\t\t\tdoc\n\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t.books.filter((_b, index) => index < 5)\n\t\t\t\t\t\t\t.map(async (book) => {\n\t\t\t\t\t\t\t\tconst cover = (\n\t\t\t\t\t\t\t\t\tawait database.collection('books').doc(book).get()\n\t\t\t\t\t\t\t\t).data().cover;\n\t\t\t\t\t\t\t\treturn cover !== undefined\n\t\t\t\t\t\t\t\t\t? cover\n\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\t\t\t\t\t\t\t})\n\t\t\t\t\t),\n\t\t\t\t\tnumberOfBooks: doc.data().books.length,\n\t\t\t\t\tnumberOfVoters: doc.data().userVotes.length,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t\tconst genreBooks = allBookDocsOfGenre\n\t\t\t.filter((_d, index) => index < 15)\n\t\t\t.map((doc) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: doc.id,\n\t\t\t\t\tcover: doc.data().cover,\n\t\t\t\t\ttitle: doc.data().title,\n\t\t\t\t};\n\t\t\t});\n\t\tconst relatedNews = (await database.collection('articles').get()).docs\n\t\t\t.filter(\n\t\t\t\t(doc) =>\n\t\t\t\t\tdoc.data().featuredBooks !== undefined &&\n\t\t\t\t\tdoc\n\t\t\t\t\t\t.data()\n\t\t\t\t\t\t.featuredBooks.some((rootBook) =>\n\t\t\t\t\t\t\tallRootBooksOfGenre.includes(rootBook)\n\t\t\t\t\t\t)\n\t\t\t)\n\t\t\t.sort(\n\t\t\t\t(a, b) =>\n\t\t\t\t\tb.data().datePublished.toDate() - a.data().datePublished.toDate()\n\t\t\t)\n\t\t\t.map((doc) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: doc.id,\n\t\t\t\t\timage: doc.data().image,\n\t\t\t\t\ttitle: doc.data().title,\n\t\t\t\t\tcontent: doc.data().content,\n\t\t\t\t};\n\t\t\t});\n\t\trelatedNews.length = Math.min(relatedNews.length, 1);\n\t\tconst quotesTagged = await Promise.all(\n\t\t\t(\n\t\t\t\tawait database\n\t\t\t\t\t.collection('quotes')\n\t\t\t\t\t.where('tags', 'array-contains', genre)\n\t\t\t\t\t.get()\n\t\t\t).docs.map(async (doc) => {\n\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t.collection('authors')\n\t\t\t\t\t.doc(doc.data().authorId)\n\t\t\t\t\t.get();\n\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t.collection('books')\n\t\t\t\t\t.where('rootBook', '==', doc.data().rootBook)\n\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t.get();\n\t\t\t\treturn {\n\t\t\t\t\tid: doc.id,\n\t\t\t\t\tcontent: doc.data().text,\n\t\t\t\t\tnumberOfLikes: doc.data().usersWhoLiked.length,\n\t\t\t\t\tauthorId: doc.data().authorId,\n\t\t\t\t\tauthorName: authorQuery.data().name,\n\t\t\t\t\tauthorPicture: authorQuery.data().picture,\n\t\t\t\t\tbookTitle: bookQuery.docs[0].data().title,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\n\t\treturn {\n\t\t\tuserFavoriteGenres,\n\t\t\tdescription,\n\t\t\trelatedGenres,\n\t\t\tparentGenre,\n\t\t\tnewReleases,\n\t\t\tmostReadThisWeek,\n\t\t\tlists,\n\t\t\tgenreBooks,\n\t\t\trelatedNews,\n\t\t\tquotesTagged,\n\t\t};\n\t};\n\n\tconst getNews = async () => {\n\t\tconst newsQuery = await database\n\t\t\t.collection('articles')\n\t\t\t.orderBy('datePublished', 'desc')\n\t\t\t.get();\n\t\treturn newsQuery.docs.map((doc) => {\n\t\t\treturn {\n\t\t\t\tid: doc.id,\n\t\t\t\timage: doc.data().image,\n\t\t\t\ttype: doc.data().type,\n\t\t\t\ttitle: doc.data().title,\n\t\t\t\tdate: doc.data().datePublished.toDate(),\n\t\t\t\tnumberOfLikes: doc.data().usersWhoLiked.length,\n\t\t\t\tcontent: doc.data().content,\n\t\t\t\tfeatured: doc.data().isFeatured,\n\t\t\t};\n\t\t});\n\t};\n\n\tconst likeUnlikeArticle = async (userUID, articleId, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst articleQuery = await database\n\t\t\t\t.collection('articles')\n\t\t\t\t.doc(articleId)\n\t\t\t\t.get();\n\t\t\tif (articleQuery.data().usersWhoLiked.includes(userUID)) {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('articles')\n\t\t\t\t\t.doc(articleId)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tusersWhoLiked: articleQuery\n\t\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t\t.usersWhoLiked.filter((user) => user !== userUID),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tawait database\n\t\t\t\t\t.collection('articles')\n\t\t\t\t\t.doc(articleId)\n\t\t\t\t\t.set(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tusersWhoLiked: articleQuery.data().usersWhoLiked.concat(userUID),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ merge: true }\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst getInfoForArticle = async (articleId) => {\n\t\tconst articleQuery = await database\n\t\t\t.collection('articles')\n\t\t\t.doc(articleId)\n\t\t\t.get();\n\t\treturn {\n\t\t\tauthorName: articleQuery.data().authorName,\n\t\t\tdate: articleQuery.data().datePublished.toDate(),\n\t\t\tlikes: articleQuery.data().usersWhoLiked,\n\t\t\timage: articleQuery.data().image,\n\t\t\tcontent: articleQuery.data().content,\n\t\t};\n\t};\n\n\tconst getArticleTitle = async (articleId) => {\n\t\treturn (await database.collection('articles').doc(articleId).get()).data()\n\t\t\t.title;\n\t};\n\n\tconst getUsersWhoLikedArticle = async (articleId) => {\n\t\tconst articleQuery = await database\n\t\t\t.collection('articles')\n\t\t\t.doc(articleId)\n\t\t\t.get();\n\t\treturn await Promise.all(\n\t\t\tarticleQuery.data().usersWhoLiked.map(async (user) => {\n\t\t\t\tconst userQuery = await database.collection('users').doc(user).get();\n\t\t\t\treturn {\n\t\t\t\t\tid: userQuery.id,\n\t\t\t\t\tname: userQuery.data().firstName,\n\t\t\t\t\tprofilePicture: userQuery.data().profileImage,\n\t\t\t\t\tnumberOfBooks: (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t.where('userId', '==', user)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs.length,\n\t\t\t\t\tnumberOfFriends: userQuery.data().friends.length,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t};\n\n\tconst getUserInfoForUserPage = async (userUID, loggedInUserUID) => {\n\t\tconst userQuery = await database.collection('users').doc(userUID).get();\n\t\tconst userUpdatesQuery = await database\n\t\t\t.collection('userBooksUpdates')\n\t\t\t.where('user', '==', userUID)\n\t\t\t.get();\n\t\tconst userInstanceQuery = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('userId', '==', userUID)\n\t\t\t.get();\n\t\tconst userReviewQuery = await database\n\t\t\t.collection('reviews')\n\t\t\t.where('user', '==', userUID)\n\t\t\t.get();\n\t\treturn {\n\t\t\twhoCanViewUserProfile: userQuery.data().whoCanViewMyProfile,\n\t\t\tisFollowedByUser:\n\t\t\t\tuserQuery.data().followers !== undefined &&\n\t\t\t\tuserQuery.data().followers.includes(loggedInUserUID),\n\t\t\tisUserFriend: userQuery.data().friends.includes(loggedInUserUID),\n\t\t\thasPendingFriendResquestFromUser:\n\t\t\t\tuserQuery\n\t\t\t\t\t.data()\n\t\t\t\t\t.newFriendsRequests.filter(\n\t\t\t\t\t\t(request) => request.sender === loggedInUserUID\n\t\t\t\t\t).length > 0,\n\t\t\tlastName: userQuery.data().lastName,\n\t\t\tshowLastNameTo: userQuery.data().showLastNameTo,\n\t\t\tshowGenderTo: userQuery.data().showGenderTo,\n\t\t\tgender:\n\t\t\t\tuserQuery.data().gender === 'm'\n\t\t\t\t\t? 'Male'\n\t\t\t\t\t: userQuery.data().gender === 'f'\n\t\t\t\t\t? 'Female'\n\t\t\t\t\t: userQuery.data().gender === 'c'\n\t\t\t\t\t? userQuery.data().customGender\n\t\t\t\t\t: '',\n\t\t\tlocationViewableBy: userQuery.data().locationViewableBy,\n\t\t\tcountry: userQuery.data().country,\n\t\t\tstateProvinceCode: userQuery.data().stateProvinceCode,\n\t\t\tcity: userQuery.data().city,\n\t\t\tageAndBirthdayPrivacy: userQuery.data().ageAndBirthdayPrivacy,\n\t\t\tbirthday:\n\t\t\t\tuserQuery.data().dateOfBirth === null\n\t\t\t\t\t? undefined\n\t\t\t\t\t: userQuery.data().dateOfBirth.toDate(),\n\t\t\twebsite: userQuery.data().website,\n\t\t\tlastActiveDate:\n\t\t\t\tuserUpdatesQuery.docs.length > 0\n\t\t\t\t\t? userUpdatesQuery.docs\n\t\t\t\t\t\t\t.sort(\n\t\t\t\t\t\t\t\t(a, b) => b.data().date.toDate() - a.data().date.toDate()\n\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t.date.toDate()\n\t\t\t\t\t: userQuery.data().membershipDate.toDate(),\n\t\t\tjoinedDate: userQuery.data().membershipDate.toDate(),\n\t\t\tinterests: userQuery.data().interests,\n\t\t\tfavoriteBooks: userQuery.data().typeOfBooks,\n\t\t\tabout: userQuery.data().aboutMe,\n\t\t\tprofilePicture: userQuery.data().profileImage,\n\t\t\tnumberOfRatings: userInstanceQuery.docs.filter(\n\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating !== 0\n\t\t\t).length,\n\t\t\tfiveRatings: userInstanceQuery.docs.filter(\n\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating === 5\n\t\t\t).length,\n\t\t\tfourRatings: userInstanceQuery.docs.filter(\n\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating === 4\n\t\t\t).length,\n\t\t\tthreeRatings: userInstanceQuery.docs.filter(\n\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating === 3\n\t\t\t).length,\n\t\t\ttwoRatings: userInstanceQuery.docs.filter(\n\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating === 2\n\t\t\t).length,\n\t\t\toneRatings: userInstanceQuery.docs.filter(\n\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating === 1\n\t\t\t).length,\n\t\t\taverageRating: userInstanceQuery.docs\n\t\t\t\t.filter(\n\t\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating !== 0\n\t\t\t\t)\n\t\t\t\t.reduce(\n\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\tprevious +\n\t\t\t\t\t\tcurrent.data().rating /\n\t\t\t\t\t\t\tuserInstanceQuery.docs.filter(\n\t\t\t\t\t\t\t\t(doc) =>\n\t\t\t\t\t\t\t\t\tdoc.data().rating !== undefined && doc.data().rating !== 0\n\t\t\t\t\t\t\t).length,\n\t\t\t\t\t0\n\t\t\t\t),\n\t\t\tnumberOfReviews: userReviewQuery.docs.length,\n\t\t\tbookshelves: (\n\t\t\t\tawait database.collection('shelves').where('user', '==', userUID).get()\n\t\t\t).docs.map((doc) => {\n\t\t\t\treturn {\n\t\t\t\t\tname:\n\t\t\t\t\t\tdoc.data().name !== undefined ? doc.data().name : doc.data().genre,\n\t\t\t\t\tnumberOfBooks: doc.data().rootBooks.length,\n\t\t\t\t};\n\t\t\t}),\n\t\t\ttoReadBooks: await Promise.all(\n\t\t\t\tuserInstanceQuery.docs\n\t\t\t\t\t.filter((doc) => doc.data().status === 'to-read')\n\t\t\t\t\t.map(async (doc) => {\n\t\t\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t.doc(doc.data().bookId)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: doc.data().bookId,\n\t\t\t\t\t\t\ttitle: bookQuery.data().title,\n\t\t\t\t\t\t\tcover: bookQuery.data().cover,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t),\n\t\t\tcurrentlyReadingBooks: await Promise.all(\n\t\t\t\tuserInstanceQuery.docs\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(doc) =>\n\t\t\t\t\t\t\tdoc.data().status === 'reading' &&\n\t\t\t\t\t\t\tuserUpdatesQuery.docs.some(\n\t\t\t\t\t\t\t\t(updateDoc) =>\n\t\t\t\t\t\t\t\t\tupdateDoc.data().book === doc.data().bookId &&\n\t\t\t\t\t\t\t\t\tupdateDoc.data().action === 'add-book'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.map(async (doc) => {\n\t\t\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t.doc(doc.data().bookId)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\tconst bookshelvesQuery = await database\n\t\t\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t\t\t.where('user', '==', userUID)\n\t\t\t\t\t\t\t.where('rootBooks', 'array-contains', bookQuery.data().rootBook)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\tconst loggedInUserQuery = await database\n\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t.where('userId', '==', loggedInUserUID)\n\t\t\t\t\t\t\t.where('bookId', '==', doc.data().bookId)\n\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: doc.data().bookId,\n\t\t\t\t\t\t\ttitle: bookQuery.data().title,\n\t\t\t\t\t\t\tcover: bookQuery.data().cover,\n\t\t\t\t\t\t\tmainAuthorId: rootBookQuery.data().authorId,\n\t\t\t\t\t\t\tmainAuthorName: authorQuery.data().name,\n\t\t\t\t\t\t\tmainAuthorIsMember: authorQuery.data().GRMember,\n\t\t\t\t\t\t\tbookshelves: bookshelvesQuery.docs.map((doc) =>\n\t\t\t\t\t\t\t\tdoc.data().name !== undefined\n\t\t\t\t\t\t\t\t\t? doc.data().name\n\t\t\t\t\t\t\t\t\t: doc.data().genre\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tupdateDate: userUpdatesQuery.docs\n\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t(updateDoc) => updateDoc.data().book === doc.data().bookId\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.sort(\n\t\t\t\t\t\t\t\t\t(a, b) => b.data().date.toDate() - a.data().date.toDate()\n\t\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t\t.date.toDate(),\n\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\tloggedInUserQuery.docs.length === 0\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: loggedInUserQuery.docs[0].data().status,\n\t\t\t\t\t\t\tuserRating:\n\t\t\t\t\t\t\t\tloggedInUserQuery.docs.length === 0\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: loggedInUserQuery.docs[0].data().rating,\n\t\t\t\t\t\t\tuserProgress:\n\t\t\t\t\t\t\t\tloggedInUserQuery.docs.length === 0\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: loggedInUserQuery.docs[0].data().progress,\n\t\t\t\t\t\t\tuserToReadPosition:\n\t\t\t\t\t\t\t\tloggedInUserQuery.docs.length === 0\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: loggedInUserQuery.docs[0].data().position,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t),\n\t\t\trecentUpdates: await Promise.all(\n\t\t\t\tuserUpdatesQuery.docs\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(doc) =>\n\t\t\t\t\t\t\t(userQuery.data().addBookToShelves &&\n\t\t\t\t\t\t\t\tdoc.data().action === 'add-book' &&\n\t\t\t\t\t\t\t\t!['reading', 'to-read', 'read'].includes(doc.data().shelf)) ||\n\t\t\t\t\t\t\t(userQuery.data().addAFriend &&\n\t\t\t\t\t\t\t\tdoc.data().action === 'add-friend') ||\n\t\t\t\t\t\t\t(userQuery.data().voteForABookReview &&\n\t\t\t\t\t\t\t\tdoc.data().action === 'vote-for-book-review') ||\n\t\t\t\t\t\t\t(userQuery.data().addAQuote &&\n\t\t\t\t\t\t\t\tdoc.data().action === 'add-quote') ||\n\t\t\t\t\t\t\t(userQuery.data().recommendABook &&\n\t\t\t\t\t\t\t\tdoc.data().action === 'recommend-book') ||\n\t\t\t\t\t\t\t(userQuery.data().addANewStatusToBook &&\n\t\t\t\t\t\t\t\t((doc.data().action === 'add-book' &&\n\t\t\t\t\t\t\t\t\t['read', 'reading', 'to-read'].includes(doc.data().shelf)) ||\n\t\t\t\t\t\t\t\t\tdoc.data().action === 'rate-book')) ||\n\t\t\t\t\t\t\t(userQuery.data().followAnAuthor &&\n\t\t\t\t\t\t\t\tdoc.data().action === 'follow-author')\n\t\t\t\t\t)\n\t\t\t\t\t.sort((a, b) => b.data().date.toDate() - a.data().date.toDate())\n\t\t\t\t\t.filter((_doc, index) => index < 10)\n\t\t\t\t\t.map(async (doc) => {\n\t\t\t\t\t\tconst reviewQuery =\n\t\t\t\t\t\t\tdoc.data().action === 'vote-for-book-review'\n\t\t\t\t\t\t\t\t? await database\n\t\t\t\t\t\t\t\t\t\t.collection('reviews')\n\t\t\t\t\t\t\t\t\t\t.doc(doc.data().review)\n\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\tconst bookQuery =\n\t\t\t\t\t\t\tdoc.data().book !== undefined\n\t\t\t\t\t\t\t\t? await database.collection('books').doc(doc.data().book).get()\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst loggedInUserQuery =\n\t\t\t\t\t\t\tdoc.data().book !== undefined\n\t\t\t\t\t\t\t\t? await database\n\t\t\t\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t\t\t\t.where('userId', '==', loggedInUserUID)\n\t\t\t\t\t\t\t\t\t\t.where('bookId', '==', doc.data().book)\n\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t: { docs: [] };\n\t\t\t\t\t\tconst rootBookQuery =\n\t\t\t\t\t\t\tbookQuery !== undefined\n\t\t\t\t\t\t\t\t? await database\n\t\t\t\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst authorId =\n\t\t\t\t\t\t\tdoc.data().action === 'follow-author'\n\t\t\t\t\t\t\t\t? doc.data().author\n\t\t\t\t\t\t\t\t: doc.data().action === 'add-book' ||\n\t\t\t\t\t\t\t\t  doc.data().action === 'recommend-book' ||\n\t\t\t\t\t\t\t\t  doc.data().action === 'rate-book'\n\t\t\t\t\t\t\t\t? rootBookQuery.data().authorId\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst authorQuery =\n\t\t\t\t\t\t\tauthorId !== undefined\n\t\t\t\t\t\t\t\t? await database.collection('authors').doc(authorId).get()\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst otherUserId =\n\t\t\t\t\t\t\tdoc.data().action === 'add-friend'\n\t\t\t\t\t\t\t\t? doc.data().newFriendId\n\t\t\t\t\t\t\t\t: doc.data().action === 'vote-for-book-review'\n\t\t\t\t\t\t\t\t? reviewQuery.data().user\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst otherUserQuery =\n\t\t\t\t\t\t\totherUserId !== undefined\n\t\t\t\t\t\t\t\t? await database.collection('users').doc(otherUserId).get()\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst bestBookId =\n\t\t\t\t\t\t\tauthorId !== undefined\n\t\t\t\t\t\t\t\t? await getAuthorBestBook(authorId)\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst bestBookQuery =\n\t\t\t\t\t\t\tbestBookId !== undefined\n\t\t\t\t\t\t\t\t? await database.collection('books').doc(bestBookId).get()\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst bestBookRootBookQuery =\n\t\t\t\t\t\t\tbestBookQuery !== undefined\n\t\t\t\t\t\t\t\t? await database\n\t\t\t\t\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t\t\t\t\t.doc(bestBookQuery.data().rootBook)\n\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\tdoc.data().action !== 'add-book'\n\t\t\t\t\t\t\t\t\t? doc.data().action\n\t\t\t\t\t\t\t\t\t: 'add-book-' + doc.data().shelf,\n\t\t\t\t\t\t\tdate: doc.data().date.toDate(),\n\t\t\t\t\t\t\trating: doc.data().rating === undefined ? 0 : doc.data().rating,\n\t\t\t\t\t\t\tnewFriendId: doc.data().newFriendId,\n\t\t\t\t\t\t\tnumberOfReviewVoters:\n\t\t\t\t\t\t\t\treviewQuery !== null\n\t\t\t\t\t\t\t\t\t? reviewQuery.data().usersWhoLiked.length\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\treviewText:\n\t\t\t\t\t\t\t\treviewQuery !== null ? reviewQuery.data().text : undefined,\n\t\t\t\t\t\t\tquoteId: doc.data().quote,\n\t\t\t\t\t\t\tquoteContent:\n\t\t\t\t\t\t\t\tdoc.data().quote !== undefined\n\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t\t\t.collection('quotes')\n\t\t\t\t\t\t\t\t\t\t\t\t.doc(doc.data().quote)\n\t\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t  ).data().text\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\tuserInfo:\n\t\t\t\t\t\t\t\totherUserQuery !== undefined\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\tid: otherUserQuery.id,\n\t\t\t\t\t\t\t\t\t\t\tname: otherUserQuery.data().firstName,\n\t\t\t\t\t\t\t\t\t\t\tpicture: otherUserQuery.data().profileImage,\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\tauthorInfo:\n\t\t\t\t\t\t\t\tauthorQuery !== undefined\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\tid: authorId,\n\t\t\t\t\t\t\t\t\t\t\tname: authorQuery.data().name,\n\t\t\t\t\t\t\t\t\t\t\tisMember: authorQuery.data().GRMember,\n\t\t\t\t\t\t\t\t\t\t\tbestBookId: bestBookId,\n\t\t\t\t\t\t\t\t\t\t\tbestBookTitle: bestBookQuery.data().title,\n\t\t\t\t\t\t\t\t\t\t\tbestBookSeries: (\n\t\t\t\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.doc(bestBookRootBookQuery.data().series)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t\t\t).name,\n\t\t\t\t\t\t\t\t\t\t\tbestBookSeriesInstance: bestBookRootBookQuery.data()\n\t\t\t\t\t\t\t\t\t\t\t\t.seriesInstance,\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\tbookInfo:\n\t\t\t\t\t\t\t\tbookQuery !== undefined\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\tid: bookQuery.id,\n\t\t\t\t\t\t\t\t\t\t\ttitle: bookQuery.data().title,\n\t\t\t\t\t\t\t\t\t\t\tcover: bookQuery.data().cover,\n\t\t\t\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserQuery.docs.length === 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserQuery.docs[0].data().status,\n\t\t\t\t\t\t\t\t\t\t\tuserRating:\n\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserQuery.docs.length === 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserQuery.docs[0].data().rating,\n\t\t\t\t\t\t\t\t\t\t\tuserProgress:\n\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserQuery.docs.length === 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserQuery.docs[0].data().progress,\n\t\t\t\t\t\t\t\t\t\t\tuserToReadPosition:\n\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserQuery.docs.length === 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserQuery.docs[0].data().position,\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t),\n\t\t\tquotes: await Promise.all(\n\t\t\t\t(\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('quotes')\n\t\t\t\t\t\t.where('usersWhoLiked', 'array-contains', userUID)\n\t\t\t\t\t\t.get()\n\t\t\t\t).docs.map(async (doc) => {\n\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t.doc(doc.data().authorId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst quoteBookDoc = (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t.where('rootBook', '==', doc.data().rootBook)\n\t\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs[0];\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\tcontent: doc.data().text,\n\t\t\t\t\t\tauthorId: doc.data().authorId,\n\t\t\t\t\t\tauthorName: authorQuery.data().name,\n\t\t\t\t\t\tauthorProfilePicture: authorQuery.data().picture,\n\t\t\t\t\t\tbookId: quoteBookDoc.id,\n\t\t\t\t\t\tbookTitle: quoteBookDoc.data().title,\n\t\t\t\t\t\tnumberOfLikes: doc.data().usersWhoLiked.length,\n\t\t\t\t\t\tlikedByUser: doc.data().usersWhoLiked.includes(loggedInUserUID),\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t),\n\t\t\tfriends: await Promise.all(\n\t\t\t\tuserQuery.data().friends.map(async (friend) => {\n\t\t\t\t\tconst friendUserQuery = await database\n\t\t\t\t\t\t.collection('users')\n\t\t\t\t\t\t.doc(friend)\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: friend,\n\t\t\t\t\t\tname: friendUserQuery.data().firstName,\n\t\t\t\t\t\tpicture: friendUserQuery.data().profileImage,\n\t\t\t\t\t\tnumberOfBooks: (\n\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t\t.where('userId', '==', friend)\n\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t).docs.length,\n\t\t\t\t\t\tnumberOfFriends: friendUserQuery.data().friends.length,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t),\n\t\t\tfollowing: (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('users')\n\t\t\t\t\t.where('followers', 'array-contains', userUID)\n\t\t\t\t\t.get()\n\t\t\t).docs.map((doc) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: doc.id,\n\t\t\t\t\tpicture: doc.data().profileImage,\n\t\t\t\t\tname: doc.data().firstName,\n\t\t\t\t};\n\t\t\t}),\n\t\t\tnumberOfFollowers:\n\t\t\t\tuserQuery.data().followers === undefined\n\t\t\t\t\t? 0\n\t\t\t\t\t: userQuery.data().followers.length,\n\t\t\tfavoriteAuthors: await Promise.all(\n\t\t\t\tuserQuery.data().favoriteAuthors.map(async (author) => {\n\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t.doc(author)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst bestBookId = await getAuthorBestBook(author);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: author,\n\t\t\t\t\t\tname: authorQuery.data().name,\n\t\t\t\t\t\tpicture: authorQuery.data().picture,\n\t\t\t\t\t\tbestBookId,\n\t\t\t\t\t\tbestBookTitle: (\n\t\t\t\t\t\t\tawait database.collection('books').doc(bestBookId).get()\n\t\t\t\t\t\t).data().title,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t),\n\t\t\tvotedLists: await Promise.all(\n\t\t\t\t(await database.collection('lists').get()).docs\n\t\t\t\t\t.filter((doc) =>\n\t\t\t\t\t\tdoc.data().userVotes.some((vote) => vote.user === userUID)\n\t\t\t\t\t)\n\t\t\t\t\t.map(async (doc) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\t\ttitle: doc.data().title,\n\t\t\t\t\t\t\tbookCovers: await Promise.all(\n\t\t\t\t\t\t\t\tdoc\n\t\t\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t\t\t.userVotes.filter((vote) => vote.user === userUID)[0]\n\t\t\t\t\t\t\t\t\t.books.map(async (book) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\tawait database.collection('books').doc(book).get()\n\t\t\t\t\t\t\t\t\t\t).data().cover;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tnumberOfBooks: doc.data().books.length,\n\t\t\t\t\t\t\tnumberOfVoters: doc.data().userVotes.length,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t),\n\t\t\tfavoriteGenres: userQuery.data().favoriteGenres,\n\t\t};\n\t};\n\n\tconst followUser = async (userUID, userToFollowUID, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst userToFollowQuery = await database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(userToFollowUID)\n\t\t\t\t.get();\n\t\t\tawait database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(userToFollowUID)\n\t\t\t\t.set(\n\t\t\t\t\t{\n\t\t\t\t\t\tfollowers:\n\t\t\t\t\t\t\tuserToFollowQuery.data().followers === undefined\n\t\t\t\t\t\t\t\t? [userUID]\n\t\t\t\t\t\t\t\t: userToFollowQuery.data().followers.concat(userUID),\n\t\t\t\t\t},\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t}\n\t};\n\n\tconst unfollowUser = async (userUID, userToFollowUID, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst userToFollowQuery = await database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(userToFollowUID)\n\t\t\t\t.get();\n\t\t\tawait database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(userToFollowUID)\n\t\t\t\t.set(\n\t\t\t\t\t{\n\t\t\t\t\t\tfollowers: userToFollowQuery\n\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t.followers.filter((follower) => follower !== userUID),\n\t\t\t\t\t},\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t}\n\t};\n\n\tconst unfriendUser = async (userUID, friendId, history) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst userQuery = await database.collection('users').doc(userUID).get();\n\t\t\tconst friendQuery = await database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(friendId)\n\t\t\t\t.get();\n\t\t\tawait database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(userUID)\n\t\t\t\t.set(\n\t\t\t\t\t{\n\t\t\t\t\t\tfriends: userQuery\n\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t.friends.filter((friend) => friend !== friendId),\n\t\t\t\t\t},\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t\tawait database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(friendId)\n\t\t\t\t.set(\n\t\t\t\t\t{\n\t\t\t\t\t\tfriends: friendQuery\n\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t.friends.filter((friend) => friend !== userUID),\n\t\t\t\t\t},\n\t\t\t\t\t{ merge: true }\n\t\t\t\t);\n\t\t}\n\t};\n\n\tconst deleteUpdate = async (updateId) => {\n\t\tawait database.collection('userBooksUpdates').doc(updateId).delete();\n\t};\n\n\tconst getInfoForCompareBooksPage = async (userUID, otherUserUID, history) => {\n\t\tconst getUserInfoForCompareBooksPage = async (user) => {\n\t\t\treturn await Promise.all(\n\t\t\t\t(\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('userId', '==', user)\n\t\t\t\t\t\t.get()\n\t\t\t\t).docs.map(async (bookInstanceDoc) => {\n\t\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.doc(bookInstanceDoc.data().bookId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst bookEditionIds = (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t.where('rootBook', '==', rootBookQuery.id)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs.map((doc) => doc.id);\n\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst allUserInstancesOfBook = await database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('bookId', 'in', bookEditionIds)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst allUserInstancesOfBookWithRating = allUserInstancesOfBook.docs.filter(\n\t\t\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating !== 0\n\t\t\t\t\t);\n\t\t\t\t\tconst shelvesQuery = await database\n\t\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t\t.where('rootBooks', 'array-contains', rootBookQuery.id)\n\t\t\t\t\t\t.where('user', '==', user)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst reviewQuery = await database\n\t\t\t\t\t\t.collection('reviews')\n\t\t\t\t\t\t.where('bookEdition', '==', bookQuery.id)\n\t\t\t\t\t\t.where('user', '==', user)\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: bookInstanceDoc.data().bookId,\n\t\t\t\t\t\trootId: bookQuery.data().rootBook,\n\t\t\t\t\t\ttitle: bookQuery.data().title,\n\t\t\t\t\t\tcover: bookQuery.data().cover,\n\t\t\t\t\t\tstatus: bookInstanceDoc.data().status,\n\t\t\t\t\t\trating: bookInstanceDoc.data().rating,\n\t\t\t\t\t\tpopularityScore:\n\t\t\t\t\t\t\t100 -\n\t\t\t\t\t\t\t(allUserInstancesOfBook.docs.length /\n\t\t\t\t\t\t\t\t(await database.collection('userBooksInstances').get()).docs\n\t\t\t\t\t\t\t\t\t.length) *\n\t\t\t\t\t\t\t\t100,\n\t\t\t\t\t\taverageRating: allUserInstancesOfBookWithRating.reduce(\n\t\t\t\t\t\t\t(previous, current) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tcurrent.data().rating === undefined ||\n\t\t\t\t\t\t\t\t\tcurrent.data().rating === 0\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn previous;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tprevious +\n\t\t\t\t\t\t\t\t\tcurrent.data().rating /\n\t\t\t\t\t\t\t\t\t\tallUserInstancesOfBookWithRating.length\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\t\tauthorId: rootBookQuery.data().authorId,\n\t\t\t\t\t\tauthorName: authorQuery.data().name,\n\t\t\t\t\t\tbookshelves: shelvesQuery.docs.map((shelfDoc) =>\n\t\t\t\t\t\t\tshelfDoc.data().genre !== null &&\n\t\t\t\t\t\t\tshelfDoc.data().genre !== undefined\n\t\t\t\t\t\t\t\t? shelfDoc.data().genre\n\t\t\t\t\t\t\t\t: shelfDoc.data().name\n\t\t\t\t\t\t),\n\t\t\t\t\t\treview:\n\t\t\t\t\t\t\treviewQuery.docs.length > 0\n\t\t\t\t\t\t\t\t? reviewQuery.docs[0].data().text\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t);\n\t\t};\n\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst otherUserQuery = await database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(otherUserUID)\n\t\t\t\t.get();\n\n\t\t\treturn {\n\t\t\t\totherUserFirstName: otherUserQuery.data().firstName,\n\t\t\t\totherUserLastName:\n\t\t\t\t\totherUserQuery.data().showLastNameTo === 'anyone' ||\n\t\t\t\t\t(otherUserQuery.data().showLastNameTo === 'friends' &&\n\t\t\t\t\t\totherUserQuery.data().friends.includes(userUID))\n\t\t\t\t\t\t? otherUserQuery.data().lastName\n\t\t\t\t\t\t: undefined,\n\t\t\t\totherUserPronouns:\n\t\t\t\t\totherUserQuery.data().pronouns === 'male'\n\t\t\t\t\t\t? 'his'\n\t\t\t\t\t\t: otherUserQuery.data().pronouns === 'female'\n\t\t\t\t\t\t? 'her'\n\t\t\t\t\t\t: 'their',\n\t\t\t\tloggedInUserBooks: await getUserInfoForCompareBooksPage(userUID),\n\t\t\t\totherUserBooks: await getUserInfoForCompareBooksPage(otherUserUID),\n\t\t\t};\n\t\t}\n\t};\n\n\tconst getBooksInfoForBookCompatibilityTestPage = async (\n\t\tpopularBooksRootIds,\n\t\tclassicsBooksRootIds,\n\t\tpopularFictionBooksRootIds,\n\t\tthrillersBooksRootIds,\n\t\tnonFictionBooksRootIds,\n\t\tfantasyBooksRootIds,\n\t\tromanceBooksRootIds,\n\t\tscienceFictionBooksRootIds,\n\t\twomensFictionBooksRootIds\n\t) => {\n\t\tconst getBooksInfoForCategory = async (rootIds) => {\n\t\t\treturn await Promise.all(\n\t\t\t\trootIds.map(async (rootId) => {\n\t\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t.doc(rootId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.where('rootBook', '==', rootId)\n\t\t\t\t\t\t.where('mainEdition', '==', true)\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: bookQuery.docs[0].id,\n\t\t\t\t\t\ttitle: bookQuery.docs[0].data().title,\n\t\t\t\t\t\tcover: bookQuery.docs[0].data().cover,\n\t\t\t\t\t\tauthorId: rootBookQuery.data().authorId,\n\t\t\t\t\t\tauthorName: authorQuery.data().name,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t);\n\t\t};\n\n\t\treturn {\n\t\t\tpopularBooks: await getBooksInfoForCategory(popularBooksRootIds),\n\t\t\tclassicsBooks: await getBooksInfoForCategory(classicsBooksRootIds),\n\t\t\tpopularFictionBooks: await getBooksInfoForCategory(\n\t\t\t\tpopularFictionBooksRootIds\n\t\t\t),\n\t\t\tthrillersBooks: await getBooksInfoForCategory(thrillersBooksRootIds),\n\t\t\tnonFictionBooks: await getBooksInfoForCategory(nonFictionBooksRootIds),\n\t\t\tfantasyBooks: await getBooksInfoForCategory(fantasyBooksRootIds),\n\t\t\tromanceBooks: await getBooksInfoForCategory(romanceBooksRootIds),\n\t\t\tscienceFictionBooks: await getBooksInfoForCategory(\n\t\t\t\tscienceFictionBooksRootIds\n\t\t\t),\n\t\t\twomensFictionBooks: await getBooksInfoForCategory(\n\t\t\t\twomensFictionBooksRootIds\n\t\t\t),\n\t\t};\n\t};\n\n\tconst getUsersInfoForCompatibilityTestPage = async (\n\t\tpopularBooksRootIds,\n\t\tclassicsBooksRootIds,\n\t\tpopularFictionBooksRootIds,\n\t\tthrillersBooksRootIds,\n\t\tnonFictionBooksRootIds,\n\t\tfantasyBooksRootIds,\n\t\tromanceBooksRootIds,\n\t\tscienceFictionBooksRootIds,\n\t\twomensFictionBooksRootIds,\n\t\tuserUID,\n\t\totherUserUID,\n\t\thistory\n\t) => {\n\t\tif (userUID === null || userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t} else {\n\t\t\tconst getUserBooksInCategory = async (rootIdsArray, allUserBookDocs) => {\n\t\t\t\treturn (\n\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\tallUserBookDocs.map(async (doc) => {\n\t\t\t\t\t\t\tconst bookQuery = await database\n\t\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t\t.doc(doc.data().bookId)\n\t\t\t\t\t\t\t\t.get();\n\t\t\t\t\t\t\treturn rootIdsArray.includes(bookQuery.data().rootBook)\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\trootId: bookQuery.data().rootBook,\n\t\t\t\t\t\t\t\t\t\tstatus: doc.data().status,\n\t\t\t\t\t\t\t\t\t\trating: doc.data().rating,\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t).filter((obj) => obj !== null);\n\t\t\t};\n\n\t\t\tconst loggedInUserQuery = await database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(userUID)\n\t\t\t\t.get();\n\t\t\tconst otherUserQuery = await database\n\t\t\t\t.collection('users')\n\t\t\t\t.doc(otherUserUID)\n\t\t\t\t.get();\n\n\t\t\tconst loggedInUserAllBooks = (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t\t.get()\n\t\t\t).docs;\n\t\t\tconst otherUserAllBooks = (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('userId', '==', otherUserUID)\n\t\t\t\t\t.get()\n\t\t\t).docs;\n\n\t\t\treturn {\n\t\t\t\tloggedInUser: {\n\t\t\t\t\tprofilePicture: loggedInUserQuery.data().profileImage,\n\t\t\t\t\tfriends: await Promise.all(\n\t\t\t\t\t\tloggedInUserQuery.data().friends.map(async (friendId) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: friendId,\n\t\t\t\t\t\t\t\tname: (\n\t\t\t\t\t\t\t\t\tawait database.collection('users').doc(friendId).get()\n\t\t\t\t\t\t\t\t).data().firstName,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t),\n\t\t\t\t\tpopularBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tpopularBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tclassicsBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tclassicsBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tpopularFictionBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tpopularFictionBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tthrillersBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tthrillersBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tnonFictionBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tnonFictionBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tfantasyBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tfantasyBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tromanceBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tromanceBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tscienceFictionBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tscienceFictionBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\twomensFictionBooks: await getUserBooksInCategory(\n\t\t\t\t\t\twomensFictionBooksRootIds,\n\t\t\t\t\t\tloggedInUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\totherUser: {\n\t\t\t\t\tprofilePicture: otherUserQuery.data().profileImage,\n\t\t\t\t\tpopularBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tpopularBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tclassicsBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tclassicsBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tpopularFictionBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tpopularFictionBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tthrillersBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tthrillersBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tnonFictionBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tnonFictionBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tfantasyBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tfantasyBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tromanceBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tromanceBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\tscienceFictionBooks: await getUserBooksInCategory(\n\t\t\t\t\t\tscienceFictionBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t\twomensFictionBooks: await getUserBooksInCategory(\n\t\t\t\t\t\twomensFictionBooksRootIds,\n\t\t\t\t\t\totherUserAllBooks\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t};\n\n\tconst sendFriendRequest = async (senderId, receiverId, message) => {\n\t\tconst receiverQuery = await database\n\t\t\t.collection('users')\n\t\t\t.doc(receiverId)\n\t\t\t.get();\n\t\tawait database\n\t\t\t.collection('users')\n\t\t\t.doc(receiverId)\n\t\t\t.set(\n\t\t\t\t{\n\t\t\t\t\tnewFriendsRequests: receiverQuery.data().newFriendsRequests.concat({\n\t\t\t\t\t\tid: senderId,\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t\t{ merge: true }\n\t\t\t);\n\t};\n\n\tconst getUserInfoForAddAsFriendPage = async (\n\t\tuserUID,\n\t\tnewFriendId,\n\t\thistory\n\t) => {\n\t\tconst newFriendQuery = await database\n\t\t\t.collection('users')\n\t\t\t.doc(newFriendId)\n\t\t\t.get();\n\t\tif (\n\t\t\tnewFriendQuery\n\t\t\t\t.data()\n\t\t\t\t.newFriendsRequests.some((request) => request.id === userUID)\n\t\t) {\n\t\t\thistory.push({\n\t\t\t\tpathname: pageGenerator.generateUserPage(\n\t\t\t\t\tnewFriendId,\n\t\t\t\t\tnewFriendQuery.data().firstName\n\t\t\t\t),\n\t\t\t\tstate: 'You have already sent a friend request to this person.',\n\t\t\t});\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tfirstName: newFriendQuery.data().firstName,\n\t\t\t\tpronouns:\n\t\t\t\t\tnewFriendQuery.data().pronouns === 'male'\n\t\t\t\t\t\t? 'his'\n\t\t\t\t\t\t: newFriendQuery.data().pronouns === 'female'\n\t\t\t\t\t\t? 'her'\n\t\t\t\t\t\t: 'their',\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tconst addNewBookshelf = async (userId, shelfName) => {\n\t\tconst homonymousShelvesDocs = (\n\t\t\tawait database\n\t\t\t\t.collection('shelves')\n\t\t\t\t.where('user', '==', userId)\n\t\t\t\t.where('name', '==', shelfName)\n\t\t\t\t.get()\n\t\t).docs;\n\t\tif (homonymousShelvesDocs.length === 0) {\n\t\t\tawait database\n\t\t\t\t.collection('shelves')\n\t\t\t\t.add({ user: userId, name: shelfName, rootBooks: [] });\n\t\t}\n\t};\n\n\tconst queryUserInfoForUserBookshelfPage = async (\n\t\tuserUID,\n\t\tloggedInUserUID\n\t) => {\n\t\tconst userQuery = await database.collection('users').doc(userUID).get();\n\t\tconst shelvesQuery = await database\n\t\t\t.collection('shelves')\n\t\t\t.where('user', '==', userUID)\n\t\t\t.get();\n\t\tconst allUserBooksInstances = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('userId', '==', userUID)\n\t\t\t.get();\n\t\tconst allUserRootBooks = await Promise.all(\n\t\t\tallUserBooksInstances.docs.map(\n\t\t\t\tasync (doc) =>\n\t\t\t\t\t(\n\t\t\t\t\t\tawait database.collection('books').doc(doc.data().bookId).get()\n\t\t\t\t\t).data().rootBook\n\t\t\t)\n\t\t);\n\t\tconst wantToReadUserRootBooks = await Promise.all(\n\t\t\tallUserBooksInstances.docs\n\t\t\t\t.filter((doc) => doc.data().status === 'to-read')\n\t\t\t\t.map(\n\t\t\t\t\tasync (doc) =>\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tawait database.collection('books').doc(doc.data().bookId).get()\n\t\t\t\t\t\t).data().rootBook\n\t\t\t\t)\n\t\t);\n\t\tconst readingUserRootBooks = await Promise.all(\n\t\t\tallUserBooksInstances.docs\n\t\t\t\t.filter((doc) => doc.data().status === 'reading')\n\t\t\t\t.map(\n\t\t\t\t\tasync (doc) =>\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tawait database.collection('books').doc(doc.data().bookId).get()\n\t\t\t\t\t\t).data().rootBook\n\t\t\t\t)\n\t\t);\n\t\tconst readUserRootBooks = await Promise.all(\n\t\t\tallUserBooksInstances.docs\n\t\t\t\t.filter((doc) => doc.data().status === 'read')\n\t\t\t\t.map(\n\t\t\t\t\tasync (doc) =>\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tawait database.collection('books').doc(doc.data().bookId).get()\n\t\t\t\t\t\t).data().rootBook\n\t\t\t\t)\n\t\t);\n\n\t\tconst getShelfBookInfo = async (rootBook) => {\n\t\t\tconst rootBookQuery = await database\n\t\t\t\t.collection('rootBooks')\n\t\t\t\t.doc(rootBook)\n\t\t\t\t.get();\n\t\t\tconst seriesName =\n\t\t\t\trootBookQuery.data().series !== undefined\n\t\t\t\t\t? (\n\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t.collection('series')\n\t\t\t\t\t\t\t\t.doc(rootBookQuery.data().series)\n\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t  ).data().name\n\t\t\t\t\t: undefined;\n\t\t\tconst authorQuery =\n\t\t\t\trootBookQuery !== null && rootBookQuery !== undefined\n\t\t\t\t\t? await database\n\t\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t: undefined;\n\t\t\tconst allEditionIds = (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('books')\n\t\t\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t\t\t.get()\n\t\t\t).docs.map((doc) => doc.id);\n\t\t\tconst userInstancesQuery = await database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('bookId', 'in', allEditionIds)\n\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t.get();\n\t\t\tconst editionQuery = await database\n\t\t\t\t.collection('books')\n\t\t\t\t.doc(userInstancesQuery.docs[0].data().bookId)\n\t\t\t\t.get();\n\t\t\tconst allRatedBookInstances = (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('bookId', 'in', allEditionIds)\n\t\t\t\t\t.get()\n\t\t\t).docs.filter(\n\t\t\t\t(doc) => doc.data().rating !== undefined && doc.data().rating !== 0\n\t\t\t);\n\t\t\tconst averageBookRating = allRatedBookInstances.reduce(\n\t\t\t\t(previous, current) =>\n\t\t\t\t\tprevious + current.data().rating / allRatedBookInstances.length,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst userBookUpdates = await database\n\t\t\t\t.collection('userBooksUpdates')\n\t\t\t\t.where('user', '==', userUID)\n\t\t\t\t.where('book', 'in', allEditionIds)\n\t\t\t\t.get();\n\t\t\tconst dateRead =\n\t\t\t\tuserBookUpdates.docs.filter(\n\t\t\t\t\t(doc) =>\n\t\t\t\t\t\tdoc.data().action === 'add-book' && doc.data().shelf === 'read'\n\t\t\t\t).length === 0\n\t\t\t\t\t? undefined\n\t\t\t\t\t: userBookUpdates.docs\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(doc) =>\n\t\t\t\t\t\t\t\t\tdoc.data().action === 'add-book' &&\n\t\t\t\t\t\t\t\t\tdoc.data().shelf === 'read'\n\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t.date.toDate();\n\t\t\tconst reviewQuery = await database\n\t\t\t\t.collection('reviews')\n\t\t\t\t.where('bookEdition', 'in', allEditionIds)\n\t\t\t\t.where('user', '==', userUID)\n\t\t\t\t.get();\n\t\t\tconst loggedInUserInstanceQuery =\n\t\t\t\tloggedInUserUID !== undefined && loggedInUserUID !== null\n\t\t\t\t\t? await database\n\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t.where('bookId', 'in', allEditionIds)\n\t\t\t\t\t\t\t.where('userId', '==', loggedInUserUID)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t: undefined;\n\n\t\t\treturn {\n\t\t\t\tid: userInstancesQuery.docs[0].data().bookId,\n\t\t\t\trootId: rootBook,\n\t\t\t\tcover: editionQuery.data().cover,\n\t\t\t\ttitle: editionQuery.data().title,\n\t\t\t\tseriesName,\n\t\t\t\tseriesInstance: rootBookQuery.data().seriesInstance,\n\t\t\t\tauthorId: rootBookQuery.data().authorId,\n\t\t\t\tauthorName: authorQuery.data().name,\n\t\t\t\taverageRating: averageBookRating,\n\t\t\t\tdateAdded:\n\t\t\t\t\tuserBookUpdates.docs.length === 0\n\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t: userBookUpdates.docs\n\t\t\t\t\t\t\t\t.sort(\n\t\t\t\t\t\t\t\t\t(a, b) => a.data().date.toDate() - b.data().date.toDate()\n\t\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t\t.date.toDate(),\n\t\t\t\tdatePublished: (\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t\t\t\t.get()\n\t\t\t\t).docs\n\t\t\t\t\t.sort(\n\t\t\t\t\t\t(a, b) =>\n\t\t\t\t\t\t\ta.data().publishedDate.toDate() - b.data().publishedDate.toDate()\n\t\t\t\t\t)[0]\n\t\t\t\t\t.data()\n\t\t\t\t\t.publishedDate.toDate(),\n\t\t\t\tdatePublishedEdtion: editionQuery.data().publishedDate.toDate(),\n\t\t\t\tdateRead,\n\t\t\t\tdateStarted:\n\t\t\t\t\tuserBookUpdates.docs.filter(\n\t\t\t\t\t\t(doc) =>\n\t\t\t\t\t\t\tdoc.data().action === 'add-book' && doc.data().shelf === 'reading'\n\t\t\t\t\t).length === 0\n\t\t\t\t\t\t? dateRead\n\t\t\t\t\t\t: userBookUpdates.docs\n\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t(doc) =>\n\t\t\t\t\t\t\t\t\t\tdoc.data().action === 'add-book' &&\n\t\t\t\t\t\t\t\t\t\tdoc.data().shelf === 'reading'\n\t\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t\t.data()\n\t\t\t\t\t\t\t\t.date.toDate(),\n\t\t\t\tformat: editionQuery.data().format,\n\t\t\t\tisbn: editionQuery.data().ISBN,\n\t\t\t\tnumberOfPages: editionQuery.data().pageCount,\n\t\t\t\tnumberOfRatings: allRatedBookInstances.length,\n\t\t\t\tposition: userInstancesQuery.docs[0].data().position,\n\t\t\t\trating: userInstancesQuery.docs[0].data().rating,\n\t\t\t\treview:\n\t\t\t\t\treviewQuery.docs.length > 0\n\t\t\t\t\t\t? reviewQuery.docs[0].data().text\n\t\t\t\t\t\t: undefined,\n\t\t\t\tloggedInUserRating:\n\t\t\t\t\tloggedInUserInstanceQuery === undefined ||\n\t\t\t\t\tloggedInUserInstanceQuery.docs.length === 0\n\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t: loggedInUserInstanceQuery.docs[0].data().rating,\n\t\t\t};\n\t\t};\n\n\t\treturn {\n\t\t\tprofilePicture: userQuery.data().profileImage,\n\t\t\tshelves: await Promise.all(\n\t\t\t\tshelvesQuery.docs\n\t\t\t\t\t.map((doc) => doc.data())\n\t\t\t\t\t.concat([\n\t\t\t\t\t\t{ name: 'all', rootBooks: allUserRootBooks },\n\t\t\t\t\t\t{ name: 'read', rootBooks: readUserRootBooks },\n\t\t\t\t\t\t{ name: 'want-to-read', rootBooks: wantToReadUserRootBooks },\n\t\t\t\t\t\t{ name: 'currently-reading', rootBooks: readingUserRootBooks },\n\t\t\t\t\t])\n\t\t\t\t\t.map(async (data) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname:\n\t\t\t\t\t\t\t\tdata.genre !== null && data.genre !== undefined\n\t\t\t\t\t\t\t\t\t? data.genre\n\t\t\t\t\t\t\t\t\t: data.name,\n\t\t\t\t\t\t\tbooks: await Promise.all(data.rootBooks.map(getShelfBookInfo)),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t),\n\t\t};\n\t};\n\n\tconst queryLoggedInUserInfoForUserBookshelfPage = async (userUID) => {\n\t\tif (userUID === undefined || userUID === null) {\n\t\t\treturn [];\n\t\t}\n\t\tconst shelvesQuery = await database\n\t\t\t.collection('shelves')\n\t\t\t.where('user', '==', userUID)\n\t\t\t.get();\n\t\tconst allUserBooksInstances = await database\n\t\t\t.collection('userBooksInstances')\n\t\t\t.where('userId', '==', userUID)\n\t\t\t.get();\n\t\tconst allUserRootBooks = await Promise.all(\n\t\t\tallUserBooksInstances.docs.map(\n\t\t\t\tasync (doc) =>\n\t\t\t\t\t(\n\t\t\t\t\t\tawait database.collection('books').doc(doc.data().bookId).get()\n\t\t\t\t\t).data().rootBook\n\t\t\t)\n\t\t);\n\t\tconst wantToReadUserRootBooks = await Promise.all(\n\t\t\tallUserBooksInstances.docs\n\t\t\t\t.filter((doc) => doc.data().status === 'to-read')\n\t\t\t\t.map(\n\t\t\t\t\tasync (doc) =>\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tawait database.collection('books').doc(doc.data().bookId).get()\n\t\t\t\t\t\t).data().rootBook\n\t\t\t\t)\n\t\t);\n\t\tconst readingUserRootBooks = await Promise.all(\n\t\t\tallUserBooksInstances.docs\n\t\t\t\t.filter((doc) => doc.data().status === 'reading')\n\t\t\t\t.map(\n\t\t\t\t\tasync (doc) =>\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tawait database.collection('books').doc(doc.data().bookId).get()\n\t\t\t\t\t\t).data().rootBook\n\t\t\t\t)\n\t\t);\n\t\tconst readUserRootBooks = await Promise.all(\n\t\t\tallUserBooksInstances.docs\n\t\t\t\t.filter((doc) => doc.data().status === 'read')\n\t\t\t\t.map(\n\t\t\t\t\tasync (doc) =>\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tawait database.collection('books').doc(doc.data().bookId).get()\n\t\t\t\t\t\t).data().rootBook\n\t\t\t\t)\n\t\t);\n\n\t\tconst getShelfBookInfo = async (rootBook) => {\n\t\t\tconst allEditionIds = (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('books')\n\t\t\t\t\t.where('rootBook', '==', rootBook)\n\t\t\t\t\t.get()\n\t\t\t).docs.map((doc) => doc.id);\n\t\t\tconst userInstancesQuery = await database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('bookId', 'in', allEditionIds)\n\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t.get();\n\t\t\treturn {\n\t\t\t\tid: userInstancesQuery.docs[0].data().bookId,\n\t\t\t\trootId: rootBook,\n\t\t\t};\n\t\t};\n\n\t\treturn await Promise.all(\n\t\t\tshelvesQuery.docs\n\t\t\t\t.map((doc) => doc.data())\n\t\t\t\t.concat([\n\t\t\t\t\t{ name: 'all', rootBooks: allUserRootBooks },\n\t\t\t\t\t{ name: 'read', rootBooks: readUserRootBooks },\n\t\t\t\t\t{ name: 'want-to-read', rootBooks: wantToReadUserRootBooks },\n\t\t\t\t\t{ name: 'currently-reading', rootBooks: readingUserRootBooks },\n\t\t\t\t])\n\t\t\t\t.map(async (data) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname:\n\t\t\t\t\t\t\tdata.genre !== null && data.genre !== undefined\n\t\t\t\t\t\t\t\t? data.genre\n\t\t\t\t\t\t\t\t: data.name,\n\t\t\t\t\t\tbooks: await Promise.all(data.rootBooks.map(getShelfBookInfo)),\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t);\n\t};\n\n\tconst getUserInfoForYearInBooksPage = async (userUID, year) => {\n\t\tconst loggedInUserAllBooks = (\n\t\t\tawait database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t.where('status', '==', 'read')\n\t\t\t\t.get()\n\t\t).docs;\n\n\t\tconst userUpdatesQuery = (\n\t\t\tawait database\n\t\t\t\t.collection('userBooksUpdates')\n\t\t\t\t.where('user', '==', userUID)\n\t\t\t\t.where('action', '==', 'add-book')\n\t\t\t\t.where('shelf', '==', 'read')\n\t\t\t\t.get()\n\t\t).docs.filter(\n\t\t\t(doc) =>\n\t\t\t\tdoc.data().date >\n\t\t\t\t\tfirebase.firestore.Timestamp.fromDate(\n\t\t\t\t\t\tstartOfYear(new Date(year, 0))\n\t\t\t\t\t) &&\n\t\t\t\tdoc.data().date <\n\t\t\t\t\tfirebase.firestore.Timestamp.fromDate(endOfYear(new Date(year, 0)))\n\t\t);\n\n\t\tconst loggedInUserYearBooks = loggedInUserAllBooks.filter((doc) =>\n\t\t\tuserUpdatesQuery\n\t\t\t\t.map((updateDoc) => updateDoc.data().book)\n\t\t\t\t.includes(doc.data().bookId)\n\t\t);\n\n\t\treturn Promise.all(\n\t\t\tloggedInUserYearBooks.map(async (doc) => {\n\t\t\t\tconst bookId = doc.data().bookId;\n\t\t\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\t\t\tconst pageCount = bookQuery.data().pageCount;\n\t\t\t\tconst cover = bookQuery.data().cover;\n\t\t\t\tconst title = bookQuery.data().title;\n\t\t\t\tconst shelvedQuery = await database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t\t.get();\n\t\t\t\tconst numberShelved = shelvedQuery.docs.length;\n\t\t\t\tconst ratingsQuery = await database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t\t.where('rating', '>', 0)\n\t\t\t\t\t.get();\n\t\t\t\tconst numberOfRatings = ratingsQuery.docs.length;\n\t\t\t\tconst ratings = ratingsQuery.docs.map((doc) => doc.data().rating);\n\t\t\t\tconst averageRating =\n\t\t\t\t\tratingsQuery.docs.lengh === 0\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: ratings.reduce(\n\t\t\t\t\t\t\t\t(previous, current) => previous + current / numberOfRatings,\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t  );\n\t\t\t\tconst userRating = doc.data().rating;\n\n\t\t\t\treturn {\n\t\t\t\t\tbookId,\n\t\t\t\t\ttitle,\n\t\t\t\t\tpageCount,\n\t\t\t\t\tcover,\n\t\t\t\t\tnumberShelved,\n\t\t\t\t\tnumberOfRatings,\n\t\t\t\t\taverageRating,\n\t\t\t\t\tuserRating,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t};\n\n\tconst getUserProfilePicture = async (userUID) => {\n\t\treturn (await database.collection('users').doc(userUID).get()).data()\n\t\t\t.profileImage;\n\t};\n\n\tconst getRecommendationsToFromUser = async (userUID, isReceiver) => {\n\t\tconst recommendationsQuery = (\n\t\t\tawait database\n\t\t\t\t.collection('recommendations')\n\t\t\t\t.where(isReceiver ? 'receiver' : 'sender', '==', userUID)\n\t\t\t\t.get()\n\t\t).docs;\n\t\treturn await Promise.all(\n\t\t\trecommendationsQuery.map(async (doc) => {\n\t\t\t\tconst id = doc.id;\n\t\t\t\tconst message = doc.data().message;\n\t\t\t\tconst bookId = doc.data().bookId;\n\t\t\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t\t\t.get();\n\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t.collection('authors')\n\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t.get();\n\t\t\t\tconst userInstanceQuery = (\n\t\t\t\t\tawait database\n\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t\t\t.where('userId', '==', userUID)\n\t\t\t\t\t\t.get()\n\t\t\t\t).docs;\n\t\t\t\tconst book = {\n\t\t\t\t\tbookId,\n\t\t\t\t\ttitle: bookQuery.data().title,\n\t\t\t\t\tcover: bookQuery.data().cover,\n\t\t\t\t\tauthorId: authorQuery.id,\n\t\t\t\t\tauthorName: authorQuery.data().name,\n\t\t\t\t\tuserStatus:\n\t\t\t\t\t\tuserInstanceQuery.length > 0\n\t\t\t\t\t\t\t? userInstanceQuery[0].data().status\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\tuserRating:\n\t\t\t\t\t\tuserInstanceQuery.length > 0\n\t\t\t\t\t\t\t? userInstanceQuery[0].data().rating\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\tuserProgress:\n\t\t\t\t\t\tuserInstanceQuery.length > 0\n\t\t\t\t\t\t\t? userInstanceQuery[0].data().progress\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\ttoReadBookPosition:\n\t\t\t\t\t\tuserInstanceQuery.length > 0\n\t\t\t\t\t\t\t? userInstanceQuery[0].data().position\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\tpageCount: bookQuery.data().pageCount,\n\t\t\t\t};\n\t\t\t\tconst otherUserId = isReceiver\n\t\t\t\t\t? doc.data().sender\n\t\t\t\t\t: doc.data().receiver;\n\t\t\t\tconst otherUser = {\n\t\t\t\t\tuserId: otherUserId,\n\t\t\t\t\tfirstName: (\n\t\t\t\t\t\tawait database.collection('users').doc(otherUserId).get()\n\t\t\t\t\t).data().firstName,\n\t\t\t\t};\n\n\t\t\t\treturn {\n\t\t\t\t\tid,\n\t\t\t\t\tmessage,\n\t\t\t\t\tbook,\n\t\t\t\t\totherUser,\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t};\n\n\tconst deleteRecommendation = async (recommendationId) => {\n\t\tawait database.collection('recommendations').doc(recommendationId).delete();\n\t};\n\n\tconst getInfoForFollowPage = async (userId, loggedInUserId, scope) => {\n\t\tconst users =\n\t\t\tscope === 'followers'\n\t\t\t\t? (await database.collection('users').doc(userId).get()).data()\n\t\t\t\t\t\t.followers\n\t\t\t\t: scope === 'friends'\n\t\t\t\t? (await database.collection('users').doc(userId).get()).data().friends\n\t\t\t\t: (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('users')\n\t\t\t\t\t\t\t.where('followers', 'array-contains', userId)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t  ).docs.map((doc) => doc.id);\n\n\t\treturn await Promise.all(\n\t\t\tusers.map(async (user) => {\n\t\t\t\tconst userQuery = await database.collection('users').doc(user).get();\n\t\t\t\tconst userBooksInstancesQuery = await database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('userId', '==', user)\n\t\t\t\t\t.get();\n\t\t\t\tconst currentlyReadingBooks = userBooksInstancesQuery.docs.filter(\n\t\t\t\t\t(doc) => doc.data().status === 'reading'\n\t\t\t\t);\n\n\t\t\t\treturn {\n\t\t\t\t\tid: user,\n\t\t\t\t\tname:\n\t\t\t\t\t\tuserQuery.data().lastName === undefined\n\t\t\t\t\t\t\t? userQuery.data().firstName\n\t\t\t\t\t\t\t: userQuery.data().firstName + ' ' + userQuery.data().lastName,\n\t\t\t\t\tnumberOfBooks: userBooksInstancesQuery.docs.length,\n\t\t\t\t\tnumberOfFriends:\n\t\t\t\t\t\tuserQuery.data().friends === undefined\n\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t: userQuery.data().friends.length,\n\t\t\t\t\tlocation:\n\t\t\t\t\t\tuserQuery.data().country === undefined\n\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t: userQuery.data().country,\n\t\t\t\t\tprofilePicture: userQuery.data().profileImage,\n\t\t\t\t\tcurrentlyReadingBook:\n\t\t\t\t\t\tcurrentlyReadingBooks.length === 0\n\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\tid: currentlyReadingBooks[0].data().bookId,\n\t\t\t\t\t\t\t\t\ttitle: (\n\t\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t\t\t\t\t.doc(currentlyReadingBooks[0].data().bookId)\n\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t).data().title,\n\t\t\t\t\t\t\t\t\tcover: (\n\t\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t\t\t\t\t.doc(currentlyReadingBooks[0].data().bookId)\n\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t).data().cover,\n\t\t\t\t\t\t\t  },\n\t\t\t\t\tisFriend: userQuery.data().friends.includes(loggedInUserId),\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t};\n\n\tconst getInfoForExplorePage = async (userId) => {\n\t\tconst getBookInfo = async (bookId) => {\n\t\t\tconst bookQuery = await database.collection('books').doc(bookId).get();\n\t\t\tconst rootBookQuery = await database\n\t\t\t\t.collection('rootBooks')\n\t\t\t\t.doc(bookQuery.data().rootBook)\n\t\t\t\t.get();\n\t\t\tconst authorQuery = await database\n\t\t\t\t.collection('authors')\n\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t.get();\n\t\t\tconst userInstanceQuery = (\n\t\t\t\tawait database\n\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t.where('bookId', '==', bookId)\n\t\t\t\t\t.where('rating', '>', 0)\n\t\t\t\t\t.get()\n\t\t\t).docs;\n\n\t\t\treturn {\n\t\t\t\ttitle: bookQuery.data().title,\n\t\t\t\tid: bookId,\n\t\t\t\tcover: bookQuery.data().cover,\n\t\t\t\tauthorName: authorQuery.data().name,\n\t\t\t\trating:\n\t\t\t\t\tuserInstanceQuery.length === 0\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: userInstanceQuery.reduce(\n\t\t\t\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\t\t\t\tprevious + current / userInstanceQuery.length,\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t  ),\n\t\t\t\tnumberOfRatings: userInstanceQuery.length,\n\t\t\t};\n\t\t};\n\n\t\tconst getSimilarBooks = async (bookId) => {\n\t\t\tconst similarBooks = (\n\t\t\t\tawait database.collection('books').doc(bookId).get()\n\t\t\t).data().similarBooks;\n\t\t\tif (similarBooks === undefined) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn await Promise.all(\n\t\t\t\tsimilarBooks.map(async (book) => {\n\t\t\t\t\treturn await getBookInfo(book);\n\t\t\t\t})\n\t\t\t);\n\t\t};\n\n\t\tconst articleQuery = (\n\t\t\tawait database\n\t\t\t\t.collection('articles')\n\t\t\t\t.orderBy('datePublished', 'desc')\n\t\t\t\t.limit(15)\n\t\t\t\t.get()\n\t\t).docs;\n\t\tconst enjoyedBooks = (\n\t\t\tawait database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('userId', '==', userId)\n\t\t\t\t.where('rating', '>=', 3)\n\t\t\t\t.get()\n\t\t).docs;\n\t\tconst enjoyedBookId =\n\t\t\tenjoyedBooks.length === 0\n\t\t\t\t? undefined\n\t\t\t\t: enjoyedBooks[\n\t\t\t\t\t\tMath.round(Math.random() * (enjoyedBooks.length - 1))\n\t\t\t\t  ].data().bookId;\n\t\tconst readingBooks = (\n\t\t\tawait database\n\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t.where('userId', '==', userId)\n\t\t\t\t.where('status', '==', 'reading')\n\t\t\t\t.get()\n\t\t).docs;\n\t\tconst readingBookId =\n\t\t\treadingBooks.length === 0\n\t\t\t\t? undefined\n\t\t\t\t: readingBooks[\n\t\t\t\t\t\tMath.round(Math.random() * (readingBooks.length - 1))\n\t\t\t\t  ].data().bookId;\n\t\tconst allUserUpdates = (\n\t\t\tawait database\n\t\t\t\t.collection('userBooksUpdates')\n\t\t\t\t.orderBy('date', 'desc')\n\t\t\t\t.limit(1000)\n\t\t\t\t.get()\n\t\t).docs;\n\t\tconst trendingBooks = allUserUpdates\n\t\t\t.reduce(\n\t\t\t\t(previous, current) =>\n\t\t\t\t\tprevious.map((obj) => obj.id === current.data().book).length === 0\n\t\t\t\t\t\t? previous.concat({ id: current.data().book, count: 0 })\n\t\t\t\t\t\t: previous.map((obj) =>\n\t\t\t\t\t\t\t\tobj.id === current.data().book\n\t\t\t\t\t\t\t\t\t? { ...obj, count: obj.count + 1 }\n\t\t\t\t\t\t\t\t\t: obj\n\t\t\t\t\t\t  ),\n\t\t\t\t[]\n\t\t\t)\n\t\t\t.sort((a, b) => (a.count > b.count ? -1 : 1))\n\t\t\t.slice(0, 25)\n\t\t\t.map((obj) => obj.id);\n\n\t\treturn {\n\t\t\tarticles: articleQuery.map((doc) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: doc.id,\n\t\t\t\t\tdatePublished: doc.data().datePublished,\n\t\t\t\t\tnumberOfLikes:\n\t\t\t\t\t\tdoc.data().usersWhoLiked !== undefined\n\t\t\t\t\t\t\t? doc.data().usersWhoLiked.length\n\t\t\t\t\t\t\t: 0,\n\t\t\t\t\tnumberOfComments:\n\t\t\t\t\t\tdoc.data().comments !== undefined ? doc.data().comments.length : 0,\n\t\t\t\t\ttitle: doc.data().title,\n\t\t\t\t\timage: doc.data().image,\n\t\t\t\t};\n\t\t\t}),\n\t\t\tenjoyedBook:\n\t\t\t\tenjoyedBookId === undefined\n\t\t\t\t\t? undefined\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tid: enjoyedBookId,\n\t\t\t\t\t\t\ttitle: (\n\t\t\t\t\t\t\t\tawait database.collection('books').doc(enjoyedBookId).get()\n\t\t\t\t\t\t\t).data().title,\n\t\t\t\t\t\t\tsimilarBooks: await getSimilarBooks(enjoyedBookId),\n\t\t\t\t\t  },\n\t\t\treadingBook:\n\t\t\t\treadingBookId === undefined\n\t\t\t\t\t? undefined\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tid: readingBookId,\n\t\t\t\t\t\t\ttitle: (\n\t\t\t\t\t\t\t\tawait database.collection('books').doc(readingBookId).get()\n\t\t\t\t\t\t\t).data().title,\n\t\t\t\t\t\t\tsimilarBooks: await getSimilarBooks(readingBookId),\n\t\t\t\t\t  },\n\t\t\ttrendingBooks: await Promise.all(\n\t\t\t\ttrendingBooks.map(async (bookId) => await getBookInfo(bookId))\n\t\t\t),\n\t\t};\n\t};\n\n\tconst getInfoForSearchPage = async (userId, q, searchType, searchField) => {\n\t\tconst query = q.toLowerCase();\n\t\tif (searchField === 'genre') {\n\t\t\tconst allGenres = (await database.collection('genres').get()).docs;\n\t\t\treturn allGenres\n\t\t\t\t.filter((genre) => genre.data().name.toLowerCase().includes(query))\n\t\t\t\t.map((genre) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: genre.data().name,\n\t\t\t\t\t\tparentGenre: genre.data().parentGenre,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t} else if (searchType === 'books') {\n\t\t\tconst allBooks = await Promise.all(\n\t\t\t\t(await database.collection('books').get()).docs.map(async (doc) => {\n\t\t\t\t\tconst rootBookQuery = await database\n\t\t\t\t\t\t.collection('rootBooks')\n\t\t\t\t\t\t.doc(doc.data().rootBook)\n\t\t\t\t\t\t.get();\n\t\t\t\t\tconst authorQuery = await database\n\t\t\t\t\t\t.collection('authors')\n\t\t\t\t\t\t.doc(rootBookQuery.data().authorId)\n\t\t\t\t\t\t.get();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: doc.id,\n\t\t\t\t\t\trootBookId: rootBookQuery.id,\n\t\t\t\t\t\tamazonLink: doc.data().amazonLink,\n\t\t\t\t\t\ttitle: doc.data().title,\n\t\t\t\t\t\tcover: doc.data().cover,\n\t\t\t\t\t\tauthorId: authorQuery.id,\n\t\t\t\t\t\tauthorName: authorQuery.data().name,\n\t\t\t\t\t\tauthorIsMember: authorQuery.data().GRMember,\n\t\t\t\t\t\tpublishedYear: doc.data().publishedDate.toDate().getFullYear(),\n\t\t\t\t\t\tpageCount: doc.data().pageCount,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tconst filteredBooks = allBooks.filter((book) =>\n\t\t\t\tsearchField === 'all'\n\t\t\t\t\t? book.title.toLowerCase().includes(query) ||\n\t\t\t\t\t  book.authorName.toLowerCase().includes(query)\n\t\t\t\t\t: searchField === 'author'\n\t\t\t\t\t? book.authorName.toLowerCase().includes(query)\n\t\t\t\t\t: book.title.toLowerCase().includes(query)\n\t\t\t);\n\t\t\treturn await Promise.all(\n\t\t\t\tfilteredBooks.map(async (book) => {\n\t\t\t\t\tconst userInstanceQuery = (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t.where('bookId', '==', book.id)\n\t\t\t\t\t\t\t.where('rating', '>', 0)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs;\n\t\t\t\t\tconst userBookQuery =\n\t\t\t\t\t\tuserId !== undefined\n\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t\t\t\t.where('bookId', '==', book.id)\n\t\t\t\t\t\t\t\t\t\t.where('userId', '==', userId)\n\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t  ).docs\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\tconst editionsQuery = (\n\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t.collection('books')\n\t\t\t\t\t\t\t.where('rootBook', '==', book.rootBookId)\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t).docs;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: book.id,\n\t\t\t\t\t\tamazonLink: book.amazonLink,\n\t\t\t\t\t\ttitle: book.title,\n\t\t\t\t\t\tcover: book.cover,\n\t\t\t\t\t\tauthorId: book.authorId,\n\t\t\t\t\t\tauthorName: book.authorName,\n\t\t\t\t\t\tauthorIsMember: book.authorIsMember,\n\t\t\t\t\t\taverageRating:\n\t\t\t\t\t\t\tuserInstanceQuery.length > 0\n\t\t\t\t\t\t\t\t? userInstanceQuery.reduce(\n\t\t\t\t\t\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious +\n\t\t\t\t\t\t\t\t\t\t\tcurrent.data().rating / userInstanceQuery.docs.length,\n\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\tnumberOfRatings:\n\t\t\t\t\t\t\tuserInstanceQuery === undefined ? 0 : userInstanceQuery.length,\n\t\t\t\t\t\tpublishedYear: book.publishedYear,\n\t\t\t\t\t\tnumberOfEditions: editionsQuery.length,\n\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\tuserBookQuery === undefined || userBookQuery.length === 0\n\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t: userBookQuery[0].data().status,\n\t\t\t\t\t\tuserRating:\n\t\t\t\t\t\t\tuserBookQuery === undefined || userBookQuery.length === 0\n\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t: userBookQuery[0].data().rating,\n\t\t\t\t\t\tuserProgress:\n\t\t\t\t\t\t\tuserBookQuery === undefined || userBookQuery.length === 0\n\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t: userBookQuery[0].data().progress,\n\t\t\t\t\t\ttoReadBookPosition:\n\t\t\t\t\t\t\tuserBookQuery === undefined || userBookQuery.length === 0\n\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t: userBookQuery[0].data().position,\n\t\t\t\t\t\tpageCount: book.pageCount,\n\t\t\t\t\t\tgenreShelves: await Promise.all(\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t.collection('shelves')\n\t\t\t\t\t\t\t\t\t.where('genre', '!=', null)\n\t\t\t\t\t\t\t\t\t.where('rootBooks', 'array-contains', book.rootBookId)\n\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t).docs.map(async (doc) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tname: doc.data().genre,\n\t\t\t\t\t\t\t\t\tparentGenre: (\n\t\t\t\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t\t\t\t.collection('genres')\n\t\t\t\t\t\t\t\t\t\t\t.doc(doc.data().genre)\n\t\t\t\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t\t\t).data().parentGenre,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tconst allPeople = (await database.collection('users').get()).docs;\n\t\t\tconst filteredPeople = allPeople.filter((doc) =>\n\t\t\t\t(\n\t\t\t\t\tdoc.data().firstName +\n\t\t\t\t\t(doc.data().lastName !== undefined ? ' ' + doc.data().lastName : '')\n\t\t\t\t)\n\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t.includes(query)\n\t\t\t);\n\n\t\t\treturn await Promise.all(\n\t\t\t\tfilteredPeople.map(async (person) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: person.id,\n\t\t\t\t\t\tname:\n\t\t\t\t\t\t\tperson.data().lastName !== undefined\n\t\t\t\t\t\t\t\t? person.data().firstName + ' ' + person.data().lastName\n\t\t\t\t\t\t\t\t: person.data().firstName,\n\t\t\t\t\t\tprofilePicture: person.data().profileImage,\n\t\t\t\t\t\tlocation:\n\t\t\t\t\t\t\tperson.data().country === undefined ? '' : person.data().country,\n\t\t\t\t\t\tnumberOfFriends: person.data().friends.length,\n\t\t\t\t\t\tnumberOfBooks: (\n\t\t\t\t\t\t\tawait database\n\t\t\t\t\t\t\t\t.collection('userBooksInstances')\n\t\t\t\t\t\t\t\t.where('userId', '==', person.id)\n\t\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t).docs.length,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\treturn {\n\t\tpageGenerator,\n\t\tgetAlsoEnjoyedBooksDetailsForBook,\n\t\tqueryBookById,\n\t\tgetEditionDetailsForBook,\n\t\tqueryBooks,\n\t\tqueryBooksForBookCreation,\n\t\tgetFriendsInfo,\n\t\tqueryBookRecommendedToFriendsStatus,\n\t\tqueryStatusUpdatesForRootBook,\n\t\tqueryStatusUpdatesForBook,\n\t\tsignOut,\n\t\tresetPassword,\n\t\tpasswordSignIn,\n\t\tfacebookSignIn,\n\t\ttwitterSignIn,\n\t\tgoogleSignIn,\n\t\tqueryBookInstanceDetails,\n\t\tsignUp,\n\t\tmodifyUserInfo,\n\t\taddBookToShelf,\n\t\tremoveBookFromShelf,\n\t\trateBook,\n\t\tupdateBookInShelf,\n\t\tchangeBookPosition,\n\t\taddNewUserShelf,\n\t\taddBookToUserShelf,\n\t\tremoveBookFromUserShelf,\n\t\tlikeUnlikeReview,\n\t\tfollowUnfollowAuthor,\n\t\trecommendBook,\n\t\tswitchBookEditionForUser,\n\t\tgetBookPhotos,\n\t\tgetPhotoDetails,\n\t\tgetSynopsisAndPreSynopsisForBook,\n\t\tcreateNewBook,\n\t\tgetBookInfoForTopShelvesPage,\n\t\tgetBookInfoForGenreShelfPage,\n\t\tgetBookInfoForTriviaPage,\n\t\tlikeQuote,\n\t\tgetBookInfoForQuotesPage,\n\t\tgetBookInfoForListsPage,\n\t\taddRemoveAuthorToFavorites,\n\t\tgetAuthorInfoForAuthorPage,\n\t\tchangeFavoriteAuthors,\n\t\tfetchUserFavoriteAuthors,\n\t\tgetUserInfoForFavoriteAuthorsForUserPage,\n\t\tgetNotificationsForUser,\n\t\tsaveUserSettings,\n\t\tdeleteProfilePicture,\n\t\tgetUserSettings,\n\t\tcheckIfPasswordsMatch,\n\t\tchangePassword,\n\t\tdeleteAccount,\n\t\tgetFavoriteGenresForUser,\n\t\tupdateFavoriteGenresForUser,\n\t\tgetGenreInfo,\n\t\tgetNews,\n\t\tlikeUnlikeArticle,\n\t\tgetInfoForArticle,\n\t\tgetArticleTitle,\n\t\tgetUsersWhoLikedArticle,\n\t\tgetUserInfoForUserPage,\n\t\tfollowUser,\n\t\tunfollowUser,\n\t\tunfriendUser,\n\t\tdeleteUpdate,\n\t\tgetInfoForCompareBooksPage,\n\t\tgetBooksInfoForBookCompatibilityTestPage,\n\t\tgetUsersInfoForCompatibilityTestPage,\n\t\tsendFriendRequest,\n\t\tgetUserInfoForAddAsFriendPage,\n\t\taddNewBookshelf,\n\t\tqueryUserInfoForUserBookshelfPage,\n\t\tqueryLoggedInUserInfoForUserBookshelfPage,\n\t\tgetUserInfoForYearInBooksPage,\n\t\tgetUserProfilePicture,\n\t\tgetRecommendationsToFromUser,\n\t\tdeleteRecommendation,\n\t\tgetInfoForFollowPage,\n\t\tgetInfoForExplorePage,\n\t\tgetInfoForSearchPage,\n\t};\n})();\n\nexport default Firebase;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Firebase from '../../Firebase';\nimport '../styles/Authentication/HomePageTopBar.css';\n\nconst HomePageTopBar = () => {\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [rememberMe, setRememberMe] = useState(false);\n\tconst history = useHistory();\n\n\treturn (\n\t\t<div id=\"home-page-top-bar\">\n\t\t\t<div id=\"home-page-top-bar-left\">\n\t\t\t\t<a id=\"goodreads-home-link\" href=\"/\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/home/header_logo-8d96d7078a3d63f9f31d92282fd67cf4.png\"\n\t\t\t\t\t\talt=\"Goodreads logo\"\n\t\t\t\t\t></img>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div id=\"home-page-top-bar-right\">\n\t\t\t\t<form id=\"signin-form\">\n\t\t\t\t\t<div id=\"form-email\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\t\tplaceholder=\"Email address\"\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"remember-me\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tvalue={rememberMe}\n\t\t\t\t\t\t\t\tonChange={() => setRememberMe(!rememberMe)}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"remember-me\">Remember me</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"form-password\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<a id=\"forgot-password-a\" href=\"/reset-password\">\n\t\t\t\t\t\t\tForgot it?\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tid=\"sign-in-button\"\n\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (email.length > 0 && password.length > 0) {\n\t\t\t\t\t\t\t\tawait Firebase.passwordSignIn(\n\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\tpassword,\n\t\t\t\t\t\t\t\t\trememberMe,\n\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tSign In\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default HomePageTopBar;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport HomePageTopBar from './HomePageTopBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Authentication/HomePageTopSection.css';\n\nconst HomePageTopSection = () => {\n\tconst [name, setName] = useState('');\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst history = useHistory();\n\n\treturn (\n\t\t<div id=\"homepage-top-section\">\n\t\t\t<HomePageTopBar />\n\t\t\t<div id=\"new-user-presentation\">\n\t\t\t\t<div id=\"headline\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/home/headline-e2cd420e71737ff2815d09af5b65c4e4.png\"\n\t\t\t\t\t\talt=\"Meet your next favorite book.\"\n\t\t\t\t\t></img>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"new-account-section\">\n\t\t\t\t\t<div id=\"create-new-account\">\n\t\t\t\t\t\t<span>New here? Create a free account!</span>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tplaceholder=\"Email address\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<div id=\"sign-up-confirmation\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"sign-up-button\"\n\t\t\t\t\t\t\t\tonClick={() => Firebase.signUp(email, password, name, history)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSign up\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tBy clicking Sign up I confirm that I am at least 13 years old.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"sign-in-sms\">\n\t\t\t\t\t\t<span>or sign in using</span>\n\t\t\t\t\t\t<button id=\"facebook-button\" onClick={Firebase.facebookSignIn}>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button id=\"twitter-button\" onClick={Firebase.twitterSignIn}>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button id=\"google-button\" onClick={Firebase.googleSignIn}>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default HomePageTopSection;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/Authentication/HomePageBottomSection.css';\nimport Firebase from '../../Firebase';\n\nconst HomePageBottomSection = (props) => {\n\tconst [searchTerm, setSearchTerm] = useState('');\n\tconst genreList = [\n\t\t'Art',\n\t\t'Biography',\n\t\t'Business',\n\t\t\"Children's\",\n\t\t'Christian',\n\t\t'Classics',\n\t\t'Comics',\n\t\t'Cookbooks',\n\t\t'Ebooks',\n\t\t'Fantasy',\n\t\t'Fiction',\n\t\t'Graphic Novels',\n\t\t'Historical Fiction',\n\t\t'History',\n\t\t'Horror',\n\t\t'Memoir',\n\t\t'Music',\n\t\t'Mystery',\n\t\t'Nonfiction',\n\t\t'Poetry',\n\t\t'Psychology',\n\t\t'Romance',\n\t\t'Science',\n\t\t'Science Fiction',\n\t\t'Self Help',\n\t\t'Sports',\n\t\t'Thriller',\n\t\t'Travel',\n\t\t'Young Adult',\n\t];\n\treturn (\n\t\t<div id=\"homepage-bottom-section\">\n\t\t\t<div id=\"homepage-bottom-section-main\">\n\t\t\t\t<div className=\"intro\">\n\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t<h2>Deciding what to read next?</h2>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tYoure in the right place. Tell us what titles or genres youve\n\t\t\t\t\t\t\tenjoyed in the past, and well give you surprisingly insightful\n\t\t\t\t\t\t\trecommendations.\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t<h2>What are your friends reading?</h2>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tChances are your friends are discussing their favorite (and least\n\t\t\t\t\t\t\tfavorite) books on Goodreads.\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"discovery-box\">\n\t\t\t\t\t<h2>\n\t\t\t\t\t\tWhat will <i>you</i> discover?\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div className=\"discovery\">\n\t\t\t\t\t\t<div className=\"discovery-left-section\">\n\t\t\t\t\t\t\t<span>Because {props.recExample1.userName} liked...</span>\n\t\t\t\t\t\t\t<div className=\"book-recs\">\n\t\t\t\t\t\t\t\t{props.recExample1.bookList.map((book, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<a href={props.recExample1.bookLinkList[index]} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={props.recExample1.bookCoverList[index]}\n\t\t\t\t\t\t\t\t\t\t\t\talt={book}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"rec-arrow\"\n\t\t\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/home/discovery_arrow.png\"\n\t\t\t\t\t\t\talt=\"Arrow\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"discovery-right-section\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{props.recExample1.gender === 'm'\n\t\t\t\t\t\t\t\t\t? 'He'\n\t\t\t\t\t\t\t\t\t: props.recExample1.gender === 'f'\n\t\t\t\t\t\t\t\t\t? 'She'\n\t\t\t\t\t\t\t\t\t: 'They'}{' '}\n\t\t\t\t\t\t\t\tdiscovered:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div className=\"book-rec-and-source\">\n\t\t\t\t\t\t\t\t<a href={props.recExample1.recBookLink}>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={props.recExample1.recBookCover}\n\t\t\t\t\t\t\t\t\t\talt={props.recExample1.recBook}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"discovery\">\n\t\t\t\t\t\t<div className=\"discovery-left-section\">\n\t\t\t\t\t\t\t<span>Because {props.recExample2.userName} liked...</span>\n\t\t\t\t\t\t\t<div className=\"book-recs\">\n\t\t\t\t\t\t\t\t{props.recExample2.bookList.map((book, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<a href={props.recExample2.bookLinkList[index]} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={props.recExample2.bookCoverList[index]}\n\t\t\t\t\t\t\t\t\t\t\t\talt={book}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"rec-arrow\"\n\t\t\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/home/discovery_arrow.png\"\n\t\t\t\t\t\t\talt=\"Arrow\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"discovery-right-section\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{props.recExample2.gender === 'm'\n\t\t\t\t\t\t\t\t\t? 'He'\n\t\t\t\t\t\t\t\t\t: props.recExample2.gender === 'f'\n\t\t\t\t\t\t\t\t\t? 'She'\n\t\t\t\t\t\t\t\t\t: 'They'}{' '}\n\t\t\t\t\t\t\t\tdiscovered:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div className=\"book-rec-and-source\">\n\t\t\t\t\t\t\t\t<a href={props.recExample2.recBookLink}>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={props.recExample2.recBookCover}\n\t\t\t\t\t\t\t\t\t\talt={props.recExample2.recBook}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"homepage-search-section\">\n\t\t\t\t\t<h2>Search and browse books</h2>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Title / Author / ISBN\"\n\t\t\t\t\t\tvalue={searchTerm}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetSearchTerm(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<a href={Firebase.pageGenerator.generateSignInPage()} id=\"search-a\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tid=\"magnifying-glass-img\"\n\t\t\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/layout/magnifying_glass-a2d7514d50bcee1a0061f1ece7821750.png\"\n\t\t\t\t\t\t\talt=\"Magnifying glass\"\n\t\t\t\t\t\t></img>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div id=\"genre-list\">\n\t\t\t\t\t\t{genreList.map((genre) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateSignInPage()}\n\t\t\t\t\t\t\t\t\tkey={genre}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{genre}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"homepage-bottom-section-right\"></div>\n\t\t</div>\n\t);\n};\n\nHomePageBottomSection.propTypes = {\n\trecExample1: PropTypes.shape({\n\t\tuserName: PropTypes.string,\n\t\tgender: PropTypes.string,\n\t\tbookList: PropTypes.arrayOf(PropTypes.string),\n\t\tbookLinkList: PropTypes.arrayOf(PropTypes.string),\n\t\tbookCoverList: PropTypes.arrayOf(PropTypes.string),\n\t\trecBook: PropTypes.string,\n\t\trecBookLink: PropTypes.string,\n\t\trecBookCover: PropTypes.string,\n\t\tsource: PropTypes.string,\n\t}),\n\trecExample2: PropTypes.shape({\n\t\tuserName: PropTypes.string,\n\t\tgender: PropTypes.string,\n\t\tbookList: PropTypes.arrayOf(PropTypes.string),\n\t\tbookLinkList: PropTypes.arrayOf(PropTypes.string),\n\t\tbookCoverList: PropTypes.arrayOf(PropTypes.string),\n\t\trecBook: PropTypes.string,\n\t\trecBookLink: PropTypes.string,\n\t\trecBookCover: PropTypes.string,\n\t\tsource: PropTypes.string,\n\t}),\n};\n\nexport default HomePageBottomSection;\n","import React from 'react';\nimport '../styles/Authentication/HomePageFootBar.css';\n\nconst HomePageFootBar = () => {\n\treturn (\n\t\t<div id=\"homepage-footbar\">\n\t\t\t<div className=\"left-section\">\n\t\t\t\t<span id=\"connect-span\">CONNECT</span>\n\t\t\t\t<div className=\"social-media-links\">\n\t\t\t\t\t<a className=\"facebook-a\" href=\"https://www.facebook.com/Goodreads/\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/site_footer/footer_facebook-ea4ab848f8e86c5f5c98311bc9495a1b.svg\"\n\t\t\t\t\t\t\talt=\"Facebook logo\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a className=\"twitter-a\" href=\"https://twitter.com/goodreads\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/site_footer/footer_twitter-126b3ee80481a763f7fccb06ca03053c.svg\"\n\t\t\t\t\t\t\talt=\"Twitter logo\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"instagram-a\"\n\t\t\t\t\t\thref=\"https://www.instagram.com/goodreads/\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/site_footer/footer_instagram-d59e3887020f12bcdb12e6c539579d85.svg\"\n\t\t\t\t\t\t\talt=\"Instagram logo\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"linkedin-a\"\n\t\t\t\t\t\thref=\"https://www.linkedin.com/company/goodreads-com/\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/site_footer/footer_linkedin-5b820f4703eff965672594ef4d10e33c.svg\"\n\t\t\t\t\t\t\talt=\"Linkedin logo\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"right-section\">\n\t\t\t\t<div className=\"right-section-links\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"iOS-a\"\n\t\t\t\t\t\thref=\"https://itunes.apple.com/app/apple-store/id355833469?pt=325668&ct=mw_footer&mt=8\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/app/badge-ios-desktop-homepage-6ac7ae16eabce57f6c855361656a7540.svg\"\n\t\t\t\t\t\t\talt=\"Download on the App Store\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"Android-a\"\n\t\t\t\t\t\thref=\"https://play.google.com/store/apps/details?id=com.goodreads&utm_source=mw_footer&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/app/badge-android-desktop-home-2x-e31514e1fb4dddecf9293aa526a64cfe.png\"\n\t\t\t\t\t\t\talt=\"Get it on Google Play\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<span>Goodreads</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default HomePageFootBar;\n","import React from 'react';\nimport HomePageTopSection from './HomePageTopSection';\nimport HomePageBottomSectiom from './HomePageBottomSection';\nimport HomePageFootBar from './HomePageFootBar';\nimport '../styles/Authentication/HomePage.css';\n\nconst HomePage = () => {\n\treturn (\n\t\t<div id=\"homepage\">\n\t\t\t<HomePageTopSection />\n\t\t\t<HomePageBottomSectiom\n\t\t\t\trecExample1={{\n\t\t\t\t\tuserName: 'Shomeret',\n\t\t\t\t\tgender: 'f',\n\t\t\t\t\tbookList: [\n\t\t\t\t\t\t'Animals in Translation',\n\t\t\t\t\t\t'Animals Make Us Human',\n\t\t\t\t\t\t'Some We Love, Some We Hate, Some We Eat',\n\t\t\t\t\t],\n\t\t\t\t\tbookLinkList: [\n\t\t\t\t\t\t'/book/show/7366.Animals_in_Translation',\n\t\t\t\t\t\t'/book/show/4386485-animals-make-us-human',\n\t\t\t\t\t\t'/book/show/6953508-some-we-love-some-we-hate-some-we-eat',\n\t\t\t\t\t],\n\t\t\t\t\tbookCoverList: [\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1442375726l/7366._SX98_.jpg',\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1348264535l/4386485._SX98_.jpg',\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1369453733l/6953508._SX98_.jpg',\n\t\t\t\t\t],\n\t\t\t\t\trecBook: 'Next of Kin',\n\t\t\t\t\trecBookLink: '/book/show/325779.Next_of_Kin',\n\t\t\t\t\trecBookCover:\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1348810069l/325779._SX98_.jpg',\n\t\t\t\t\tsource: 'Psychology, Animals, Science, Nature',\n\t\t\t\t}}\n\t\t\t\trecExample2={{\n\t\t\t\t\tuserName: 'Meagan',\n\t\t\t\t\tgender: 'f',\n\t\t\t\t\tbookList: [\n\t\t\t\t\t\t'Memoirs of a Geisha',\n\t\t\t\t\t\t'The Guernsey Literary and Potato Peel Pie Society',\n\t\t\t\t\t\t'Water for Elephants',\n\t\t\t\t\t\t'The Help',\n\t\t\t\t\t],\n\t\t\t\t\tbookLinkList: [\n\t\t\t\t\t\t'/book/show/929.Memoirs_of_a_Geisha',\n\t\t\t\t\t\t'/book/show/39832183-the-guernsey-literary-and-potato-peel-pie-society',\n\t\t\t\t\t\t'/book/show/43641.Water_for_Elephants',\n\t\t\t\t\t\t'/book/show/4667024-the-help',\n\t\t\t\t\t],\n\t\t\t\t\tbookCoverList: [\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1409595968l/929._SX98_.jpg',\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1529026760l/39832183._SX98_.jpg',\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1494428973l/43641._SX98_.jpg',\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1572940430l/4667024._SX98_.jpg',\n\t\t\t\t\t],\n\t\t\t\t\trecBook: \"Moloka'i\",\n\t\t\t\t\trecBookLink: '/book/show/3273.Moloka_i',\n\t\t\t\t\trecBookCover:\n\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1441920261l/3273._SX98_.jpg',\n\t\t\t\t\tsource: 'Historical Fiction, Book Club',\n\t\t\t\t}}\n\t\t\t\tpopularLists={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Best Crime & Mystery Books',\n\t\t\t\t\t\tlink: '/list/show/11.Best_Crime_Mystery_Books',\n\t\t\t\t\t\tbookQuantity: 6010,\n\t\t\t\t\t\tvoterQuantity: 14187,\n\t\t\t\t\t\ttopBookNames: [\n\t\t\t\t\t\t\t'The Girl with the Dragon Tattoo',\n\t\t\t\t\t\t\t'And Then There Were None',\n\t\t\t\t\t\t\t'Angels & Demons',\n\t\t\t\t\t\t\t'Rebecca',\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttopBookCovers: [\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1327868566l/2429135._SX50_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1391120695l/16299._SY75_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1558711679l/960._SY75_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1386605169l/17899948._SX50_.jpg',\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttopBookLinks: [\n\t\t\t\t\t\t\t'/book/show/2429135.The_Girl_with_the_Dragon_Tattoo',\n\t\t\t\t\t\t\t'/book/show/16299.And_Then_There_Were_None',\n\t\t\t\t\t\t\t'/book/show/960.Angels_Demons',\n\t\t\t\t\t\t\t'/book/show/17899948-rebecca',\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Best for Book Clubs',\n\t\t\t\t\t\tlink: '/list/show/19.Best_for_Book_Clubs',\n\t\t\t\t\t\tbookQuantity: 6922,\n\t\t\t\t\t\tvoterQuantity: 12713,\n\t\t\t\t\t\ttopBookNames: [\n\t\t\t\t\t\t\t'The Help',\n\t\t\t\t\t\t\t'The Kite Runner',\n\t\t\t\t\t\t\t'Water for Elephants',\n\t\t\t\t\t\t\t'The Book Thief',\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttopBookCovers: [\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1572940430l/4667024._SY75_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1579036753l/77203._SY75_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1494428973l/43641._SY75_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1522157426l/19063._SY75_.jpg',\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttopBookLinks: [\n\t\t\t\t\t\t\t'/book/show/4667024-the-help',\n\t\t\t\t\t\t\t'/book/show/77203.The_Kite_Runner',\n\t\t\t\t\t\t\t'/book/show/43641.Water_for_Elephants',\n\t\t\t\t\t\t\t'/book/show/19063.The_Book_Thief',\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Best Books of the 20th Century',\n\t\t\t\t\t\tlink: '/list/show/6.Best_Books_of_the_20th_Century',\n\t\t\t\t\t\tbookQuantity: 7550,\n\t\t\t\t\t\tvoterQuantity: 49369,\n\t\t\t\t\t\ttopBookNames: [\n\t\t\t\t\t\t\t'To Kill a Mockingbird',\n\t\t\t\t\t\t\t'1984',\n\t\t\t\t\t\t\t\"Harry Potter and the Sorcerer's Stone\",\n\t\t\t\t\t\t\t'The Great Gatsby',\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttopBookCovers: [\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1553383690l/2657._SY75_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1532714506l/40961427._SX50_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1474154022l/3._SY75_.jpg',\n\t\t\t\t\t\t\t'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1490528560l/4671._SY75_.jpg',\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttopBookLinks: [\n\t\t\t\t\t\t\t'/book/show/2657.To_Kill_a_Mockingbird',\n\t\t\t\t\t\t\t'/book/show/40961427-1984',\n\t\t\t\t\t\t\t'book/show/3.Harry_Potter_and_the_Sorcerer_s_Stone',\n\t\t\t\t\t\t\t'/book/show/4671.The_Great_Gatsby',\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default HomePage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport PropTypes from 'prop-types';\nimport '../styles/Global/TopBarSearchBar.css';\n\nconst TopBarSearchBar = (props) => {\n\tconst [searchBarInput, setSearchBarInput] = useState('');\n\tconst [resultsSection, setResultsSection] = useState(null);\n\tconst [loading, setLoading] = useState(false);\n\tuseEffect(() => {\n\t\tconst generateResults = async () => {\n\t\t\tif (searchBarInput !== '') {\n\t\t\t\tsetLoading(true);\n\t\t\t}\n\t\t\tconst queryResults =\n\t\t\t\tsearchBarInput.length > 0\n\t\t\t\t\t? await Firebase.queryBooks(searchBarInput)\n\t\t\t\t\t: [];\n\t\t\treturn (\n\t\t\t\t<div id=\"search-books-results\">\n\t\t\t\t\t<div id=\"search-books-results-top-section\">\n\t\t\t\t\t\t{queryResults.map((book, index) => {\n\t\t\t\t\t\t\tif (index > 4) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"search-result-book-card\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"search-results-book-card-cover-section\">\n\t\t\t\t\t\t\t\t\t\t<img src={book.cover} alt=\"cover art\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"search-results-book-card-title-section\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"results-card-book-title\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t\t\t{book.series === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? book.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t: `${book.title} (${book.series.name}, #${book.seriesInstance})`}\n\t\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<div className=\"search-results-book-card-author\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{`by ${book.authorNames[0]}`}</span>\n\t\t\t\t\t\t\t\t\t\t\t{book.authorIsMember ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"results-author-badge\"></span>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"search-books-results-bottom-section\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"see-more-results\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateSearchPage(\n\t\t\t\t\t\t\t\tsearchBarInput,\n\t\t\t\t\t\t\t\t'books',\n\t\t\t\t\t\t\t\t'all'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>{`See all results for \"${searchBarInput}\"`}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t};\n\n\t\tconst assignResultsToDisplay = async () => {\n\t\t\tconst results = await generateResults();\n\t\t\tsetLoading(false);\n\t\t\tif (searchBarInput !== '') {\n\t\t\t\tsetResultsSection(results);\n\t\t\t} else {\n\t\t\t\tsetResultsSection(null);\n\t\t\t}\n\t\t};\n\n\t\tassignResultsToDisplay();\n\t}, [setResultsSection, props, searchBarInput]);\n\n\tconst inputIcon = loading ? (\n\t\t<div id=\"loadingSpinner\">\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t</div>\n\t) : (\n\t\t<a\n\t\t\tid=\"search-magnifiying-glass\"\n\t\t\thref={Firebase.pageGenerator.generateSearchPage(\n\t\t\t\tsearchBarInput,\n\t\t\t\t'books',\n\t\t\t\t'all'\n\t\t\t)}\n\t\t>\n\t\t\t<span></span>\n\t\t</a>\n\t);\n\n\treturn (\n\t\t<div id=\"top-bar-search-bar-container\">\n\t\t\t<div id=\"top-bar-search-bar\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"search-books-input\"\n\t\t\t\t\tplaceholder=\"Search books\"\n\t\t\t\t\tvalue={searchBarInput}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetSearchBarInput(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{inputIcon}\n\t\t\t</div>\n\t\t\t{resultsSection}\n\t\t</div>\n\t);\n};\n\nTopBarSearchBar.propTypes = {\n\tuserUID: PropTypes.string,\n};\n\nexport default TopBarSearchBar;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\nimport TopBarSearchBar from './TopBarSearchBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Global/TopBar.css';\n\nconst TopBar = () => {\n\tconst [browseClicked, setBrowseClicked] = useState(false);\n\tconst [profileClicked, setProfileClicked] = useState(false);\n\tconst [notificationsClicked, setNotificationsClicked] = useState(false);\n\tconst [notifications, setNotifications] = useState(null);\n\tconst [newNotifications, setNewNotifications] = useState(0);\n\tconst [newFriends, setNewFriends] = useState(0);\n\tconst browseRef = useRef(null);\n\tconst profileRef = useRef(null);\n\tconst notificationsRef = useRef(null);\n\tconst history = useHistory();\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst checkForNewNotifications = async () => {};\n\n\t\tconst checkForNewFriends = async () => {\n\t\t\tif (user === null) {\n\t\t\t\tsetNewFriends(0);\n\t\t\t} else {\n\t\t\t\tconst numberOfNewFriends = 0;\n\t\t\t\tsetNewFriends(numberOfNewFriends);\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('click', (event) => {\n\t\t\tif (\n\t\t\t\tbrowseRef !== null &&\n\t\t\t\tbrowseRef.current !== null &&\n\t\t\t\tbrowseRef.current !== undefined &&\n\t\t\t\t!browseRef.current.contains(event.target)\n\t\t\t) {\n\t\t\t\tsetBrowseClicked(false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\tprofileRef !== null &&\n\t\t\t\tprofileRef.current !== null &&\n\t\t\t\tprofileRef.current !== undefined &&\n\t\t\t\t!profileRef.current.contains(event.target)\n\t\t\t) {\n\t\t\t\tsetProfileClicked(false);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tnotificationsRef !== null &&\n\t\t\t\tnotificationsRef.current !== null &&\n\t\t\t\tnotificationsRef.current !== undefined &&\n\t\t\t\t!notificationsRef.current.contains(event.target)\n\t\t\t) {\n\t\t\t\tsetNotificationsClicked(false);\n\t\t\t}\n\t\t});\n\n\t\tcheckForNewNotifications();\n\t\tcheckForNewFriends();\n\t});\n\n\tconst getNotifications = async () => {\n\t\tsetNotifications([]);\n\t};\n\n\tconst setNotificationsforDisplay = () => {\n\t\tif (notifications === null) {\n\t\t\treturn null;\n\t\t}\n\t\treturn notifications.map((notification) => (\n\t\t\t<div className=\"notification-card\">\n\t\t\t\t<div className=\"notification-card-left-section\">\n\t\t\t\t\t<img src={notification.image} alt=\"notification user\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"notification-card-right-section\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<strong>{notification.name}</strong>,{' '}\n\t\t\t\t\t\t{notification.nonAnchorContent !== undefined\n\t\t\t\t\t\t\t? notification.nonAnchorContent\n\t\t\t\t\t\t\t: ''}{' '}\n\t\t\t\t\t\t<a href={notification.anchorSrc}>{notification.content}</a>\n\t\t\t\t\t</span>\n\t\t\t\t\t<br></br>\n\t\t\t\t\t<span className=\"date-distance-span\">\n\t\t\t\t\t\t{formatDistance(notification.time.toDate(), new Date(), {\n\t\t\t\t\t\t\taddSuffix: true,\n\t\t\t\t\t\t})}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t));\n\t};\n\n\tconst loadingSpinner = (\n\t\t<div id=\"loadingSpinner\">\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t\t<div></div>\n\t\t</div>\n\t);\n\n\tconst rightSection =\n\t\tuser === null || user.userUID === undefined || user.userUID === null ? (\n\t\t\t<div id=\"top-bar-right-section\">\n\t\t\t\t<div id=\"top-bar-sign-in-link-container\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tid=\"top-bar-sign-in-link\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateSignInPage()}\n\t\t\t\t\t>\n\t\t\t\t\t\tSign In\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"top-bar-join-link-container\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tid=\"top-bar-join-link\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateSignUpPage()}\n\t\t\t\t\t>\n\t\t\t\t\t\tJoin\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<div id=\"top-bar-right-section\">\n\t\t\t\t<div id=\"notifications-button-container\" ref={notificationsRef}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tid=\"notifications-button\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (newNotifications > 0) {\n\t\t\t\t\t\t\t\tsetNewNotifications(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetNotificationsClicked(!notificationsClicked);\n\t\t\t\t\t\t\tgetNotifications();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={notificationsClicked ? 'clicked' : ''}\n\t\t\t\t\t>\n\t\t\t\t\t\t{newNotifications > 0 ? <span>{newNotifications}</span> : null}\n\t\t\t\t\t</button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"notifications-drop-down\"\n\t\t\t\t\t\tclassName={notificationsClicked ? 'visible' : 'hidden'}\n\t\t\t\t\t>\n\t\t\t\t\t\t{notifications !== null && notifications.length > 0 ? (\n\t\t\t\t\t\t\t<div id=\"notifications-drop-down-top-section\">\n\t\t\t\t\t\t\t\t<a id=\"notifications-a\" href=\"/\">\n\t\t\t\t\t\t\t\t\tNOTIFICATIONS\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a id=\"view-all-notifications-a\" href=\"/\">\n\t\t\t\t\t\t\t\t\tView all notifications\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : notifications !== null ? (\n\t\t\t\t\t\t\t<span id=\"no-notifications-span\">No notifications</span>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tloadingSpinner\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div id=\"notifications-drop-down-bottom-section\">\n\t\t\t\t\t\t\t{setNotificationsforDisplay()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"friends-link-container\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tid=\"friends-link\"\n\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\tsetNewFriends(0);\n\t\t\t\t\t\t\tdocument.location.href = Firebase.pageGenerator.generateUserFriendsPage(\n\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{newFriends > 0 ? <span>{newFriends}</span> : null}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"profile-button-container\" ref={profileRef}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tid=\"profile-button\"\n\t\t\t\t\t\tonClick={() => setProfileClicked(!profileClicked)}\n\t\t\t\t\t\tclassName={profileClicked ? 'clicked' : ''}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\tuser.userInfo !== undefined &&\n\t\t\t\t\t\t\t\tuser.userInfo.profileImage !== undefined\n\t\t\t\t\t\t\t\t\t? user.userInfo.profileImage\n\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t></img>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"profile-drop-down\"\n\t\t\t\t\t\tclassName={profileClicked ? 'visible' : 'hidden'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div id=\"profile-drop-down-top-section\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{user.userInfo !== undefined &&\n\t\t\t\t\t\t\t\tuser.userInfo.firstName !== undefined\n\t\t\t\t\t\t\t\t\t? user.userInfo.firstName.toUpperCase()\n\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFriendsPage(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tFriends\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateEditFavoriteGenresPage()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tFavorite genres\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateRecommendationsPage(\n\t\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tFriends' recommendations\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id=\"profile-drop-down-bottom-section\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAccountSettingsPage()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tAccount settings\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref=\"/\"\n\t\t\t\t\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\tawait Firebase.signOut(history);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSign out\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\n\tconst browseDropDownGenresList =\n\t\tuser === null || user.userUID === undefined || user.userUID === null ? (\n\t\t\t<div id=\"browse-drop-down-right-section\">\n\t\t\t\t<span>GENRES</span>\n\t\t\t\t<ul>\n\t\t\t\t\t{[\n\t\t\t\t\t\t'Art',\n\t\t\t\t\t\t'Biography',\n\t\t\t\t\t\t'Business',\n\t\t\t\t\t\t\"Children's\",\n\t\t\t\t\t\t'Christian',\n\t\t\t\t\t\t'Classics',\n\t\t\t\t\t\t'Comics',\n\t\t\t\t\t\t'Cookbooks',\n\t\t\t\t\t\t'Ebooks',\n\t\t\t\t\t\t'Fantasy',\n\t\t\t\t\t\t'Fiction',\n\t\t\t\t\t\t'Graphic Novels',\n\t\t\t\t\t\t'Historical Fiction',\n\t\t\t\t\t\t'History',\n\t\t\t\t\t\t'Horror',\n\t\t\t\t\t\t'Memoir',\n\t\t\t\t\t\t'Music',\n\t\t\t\t\t\t'Mystery',\n\t\t\t\t\t\t'Nonfiction',\n\t\t\t\t\t\t'Poetry',\n\t\t\t\t\t\t'Psychology',\n\t\t\t\t\t\t'Romance',\n\t\t\t\t\t\t'Science',\n\t\t\t\t\t\t'Science Fiction',\n\t\t\t\t\t\t'Self Help',\n\t\t\t\t\t\t'Sports',\n\t\t\t\t\t\t'Thriller',\n\t\t\t\t\t\t'Travel',\n\t\t\t\t\t\t'Young Adult',\n\t\t\t\t\t\t'More Genres',\n\t\t\t\t\t].map((genre, index) => (\n\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t<a href=\"/\">{genre}</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<div id=\"browse-drop-down-right-section\">\n\t\t\t\t<span>FAVORITE GENRES</span>\n\t\t\t\t<ul>\n\t\t\t\t\t{user.userInfo !== undefined &&\n\t\t\t\t\tuser.userInfo.favoriteGenres !== undefined\n\t\t\t\t\t\t? user.userInfo.favoriteGenres.map((genre) => (\n\t\t\t\t\t\t\t\t<li key={genre}>\n\t\t\t\t\t\t\t\t\t<a href=\"/\">{genre}</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t  ))\n\t\t\t\t\t\t: null}\n\t\t\t\t</ul>\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateEditFavoriteGenresPage()}\n\t\t\t\t\tid=\"all-genres-a\"\n\t\t\t\t>\n\t\t\t\t\tAll Genres\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t);\n\n\tconst browseDropDown = (\n\t\t<div id=\"browse-drop-down\" className={browseClicked ? 'visible' : 'hidden'}>\n\t\t\t<div id=\"browse-drop-down-left-section\">\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateRecommendationsPage()}>\n\t\t\t\t\t\t\tRecommendations\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateExplorePage()}>Explore</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateNewsPage()}>\n\t\t\t\t\t\t\t{'News & Interviews'}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t{browseDropDownGenresList}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div id=\"top-bar\">\n\t\t\t<div id=\"logo-link-container\">\n\t\t\t\t<a id=\"logo-home-link\" href=\"/\">\n\t\t\t\t\t<span>GH</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div id=\"top-bar-left-section\">\n\t\t\t\t<div id=\"home-link-container\">\n\t\t\t\t\t<a id=\"home-link\" href=\"/\">\n\t\t\t\t\t\tHome\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t{user === null ||\n\t\t\t\tuser.userUID === undefined ||\n\t\t\t\tuser.userUID === null ? null : (\n\t\t\t\t\t<div id=\"my-books-link-container\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tid=\"my-books-link\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tMy Books\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div id=\"browse-button-container\" ref={browseRef}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tid=\"browse-button\"\n\t\t\t\t\t\tonClick={() => setBrowseClicked(!browseClicked)}\n\t\t\t\t\t\tclassName={browseClicked ? 'clicked' : ''}\n\t\t\t\t\t>\n\t\t\t\t\t\tBrowse \n\t\t\t\t\t</button>\n\t\t\t\t\t{browseDropDown}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<TopBarSearchBar userUID={user === null ? user : user.userUID} />\n\t\t\t{rightSection}\n\t\t</div>\n\t);\n};\n\nexport default TopBar;\n","import React from 'react';\nimport TopBar from '../Global/TopBar';\nimport '../styles/Dashboard/Dashboard.css';\n\nconst Dashboard = () => {\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\treturn (\n\t\t<div id=\"user-home\">\n\t\t\t<TopBar />\n\t\t\t<div id=\"dashboard\">\n\t\t\t\t<div id=\"dashboard-shelf\">\n\t\t\t\t\t<div id=\"dashboard-shelf-currently-reading\">\n\t\t\t\t\t\t<h2 id=\"dashboard-shelf-currently-reading-h2\">CURRENTLY READING</h2>\n\t\t\t\t\t\t{user.userInfo !== undefined &&\n\t\t\t\t\t\tuser.userInfo.readingBooks !== undefined\n\t\t\t\t\t\t\t? user.userInfo.readingBooks.map((book, index) => {\n\t\t\t\t\t\t\t\t\tif (index > 1) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"dashboard-shelf-reading-book-card\"\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={book.page}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"dashboard-shelf-reading-book-card-cover-a\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"dashboard-shelf-reading-book-card-cover\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={book.cover}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"dashboard-shelf-reading-book-card-details\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"dashboard-shelf-book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={book.page}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\tby <a href={book.authorPage}>{book.author}</a>{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{book.authorHasBadge ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"author-badge-wrapper\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"author-badge\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"dashboard-update-progress\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tUpdate progress\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t<span id=\"dashboard-shelf-currently-reading-bottom\">\n\t\t\t\t\t\t\t<a href={`/review/list/${user.userUID}?shelf=currently-reading`}>\n\t\t\t\t\t\t\t\tView all books\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button id=\"add-a-book\">Add a book</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button id=\"general-update\">General update</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"dashboard-shelf-want-to-read\">\n\t\t\t\t\t\t<h2 id=\"dashboard-shelf-want-to-read-h2\">WANT TO READ</h2>\n\t\t\t\t\t\t<div id=\"dashboard-shelf-want-to-read-grid\">\n\t\t\t\t\t\t\t{user.userInfo !== undefined &&\n\t\t\t\t\t\t\tuser.userInfo.wantToReadBooks !== undefined\n\t\t\t\t\t\t\t\t? user.userInfo.wantToReadBooks.map((book, index) => {\n\t\t\t\t\t\t\t\t\t\tif (index > 5) {\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"dashboard-shelf-want-to-read-book\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={book.page}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={book.cover} alt={book.title}></img>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tid=\"view-all-to-read\"\n\t\t\t\t\t\t\thref={`/review/list/${user.userUID}?shelf=to-read`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tView all books\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"dashboard-shelf-bookshelves\">\n\t\t\t\t\t\t<h2 id=\"bookshelves-h2\">BOOKSHELVES</h2>\n\t\t\t\t\t\t<div id=\"dashboard-shelf-bookshelves-bottom\">\n\t\t\t\t\t\t\t<div id=\"dashboard-shelf-bookshelves-numbers\">\n\t\t\t\t\t\t\t\t<a href={`/review/list/${user.userUID}?shelf=to-read`}>\n\t\t\t\t\t\t\t\t\t{user.userInfo !== undefined &&\n\t\t\t\t\t\t\t\t\tuser.userInfo.wantToReadBooks !== undefined\n\t\t\t\t\t\t\t\t\t\t? user.userInfo.wantToReadBooks.length\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={`/review/list/${user.userUID}?shelf=currently-reading`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{user.userInfo !== undefined &&\n\t\t\t\t\t\t\t\t\tuser.userInfo.readingBooks !== undefined\n\t\t\t\t\t\t\t\t\t\t? user.userInfo.readingBooks.length\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a href={`/review/list/${user.userUID}?shelf=read`}>\n\t\t\t\t\t\t\t\t\t{user.userInfo !== undefined &&\n\t\t\t\t\t\t\t\t\tuser.userInfo.numberOfReadBooks !== undefined\n\t\t\t\t\t\t\t\t\t\t? user.userInfo.numberOfReadBooks\n\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"dashboard-shelf-bookshelves-titles\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={`/review/list/${user.userUID}?shelf=currently-reading`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tWant to Read\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a href={`/review/list/${user.userUID}?shelf=to-read`}>\n\t\t\t\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a href={`/review/list/${user.userUID}?shelf=read`}>Read</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"dashboard-right-section\">\n\t\t\t\t\t<div id=\"dashboard-bottom\">\n\t\t\t\t\t\t<div className=\"top-section\">\n\t\t\t\t\t\t\t<h2 className=\"connect-h2\">CONNECT</h2>\n\t\t\t\t\t\t\t<div className=\"social-media-links\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"facebook-a\"\n\t\t\t\t\t\t\t\t\thref=\"https://www.facebook.com/Goodreads/\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/site_footer/footer_facebook-ea4ab848f8e86c5f5c98311bc9495a1b.svg\"\n\t\t\t\t\t\t\t\t\t\talt=\"Facebook logo\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a className=\"twitter-a\" href=\"https://twitter.com/goodreads\">\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/site_footer/footer_twitter-126b3ee80481a763f7fccb06ca03053c.svg\"\n\t\t\t\t\t\t\t\t\t\talt=\"Twitter logo\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"instagram-a\"\n\t\t\t\t\t\t\t\t\thref=\"https://www.instagram.com/goodreads/\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/site_footer/footer_instagram-d59e3887020f12bcdb12e6c539579d85.svg\"\n\t\t\t\t\t\t\t\t\t\talt=\"Instagram logo\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"linkedin-a\"\n\t\t\t\t\t\t\t\t\thref=\"https://www.linkedin.com/company/goodreads-com/\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/site_footer/footer_linkedin-5b820f4703eff965672594ef4d10e33c.svg\"\n\t\t\t\t\t\t\t\t\t\talt=\"Linkedin logo\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t\t\t<div className=\"bottom-section-links\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"iOS-a\"\n\t\t\t\t\t\t\t\t\thref=\"https://itunes.apple.com/app/apple-store/id355833469?pt=325668&ct=mw_footer&mt=8\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/app/badge-ios-desktop-homepage-6ac7ae16eabce57f6c855361656a7540.svg\"\n\t\t\t\t\t\t\t\t\t\talt=\"Download on the App Store\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"Android-a\"\n\t\t\t\t\t\t\t\t\thref=\"https://play.google.com/store/apps/details?id=com.goodreads&utm_source=mw_footer&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/app/badge-android-desktop-home-2x-e31514e1fb4dddecf9293aa526a64cfe.png\"\n\t\t\t\t\t\t\t\t\t\talt=\"Get it on Google Play\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span>Goodreads</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Dashboard;\n","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport reducer from './reducers/reducer';\nimport HomePage from './components/Authentication/HomePage';\nimport Dashboard from './components/Dashboard/Dashboard';\nimport Firebase from './Firebase';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport './styles/App.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst App = () => {\n\tconst dispatch = useDispatch();\n\tconst user = useSelector((state) => state);\n\n\tconst [loading, setLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tconst login = async (userUID, displayName) => {\n\t\t\tconst newUserInfo = await trackPromise(Firebase.modifyUserInfo(userUID));\n\t\t\tdispatch(\n\t\t\t\treducer.login(userUID, {\n\t\t\t\t\t...newUserInfo,\n\t\t\t\t\tfirstName: displayName !== null ? displayName.split(' ')[0] : '',\n\t\t\t\t})\n\t\t\t);\n\t\t\tsetLoading(false);\n\t\t};\n\n\t\tconst signOut = async () => {\n\t\t\tdispatch(reducer.signOut());\n\t\t};\n\n\t\tfirebase.auth().onAuthStateChanged((newUser) => {\n\t\t\tif (newUser !== null && user.userUID !== newUser.uid) {\n\t\t\t\tlogin(newUser.uid, newUser.displayName);\n\t\t\t} else if (newUser === null && user.userUID !== null) {\n\t\t\t\tsignOut();\n\t\t\t}\n\t\t});\n\t}, [dispatch, user.userUID]);\n\n\tconst FirstPage = (props) => {\n\t\tif (props.isLoggedIn && !props.loading) {\n\t\t\treturn <Dashboard />;\n\t\t}\n\t\treturn <HomePage />;\n\t};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<FirstPage isLoggedIn={user.userUID !== null} loading={loading} />\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useLocation } from 'react-router-dom';\nimport Firebase from '../../Firebase';\nimport '../styles/Authentication/SignInPage.css';\n\nconst SignInPage = (props) => {\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [rememberMe, setRememberMe] = useState(false);\n\tconst history = useHistory();\n\tconst location = useLocation();\n\n\tconst errorMessage =\n\t\tlocation.state !== undefined && location.state.error !== undefined ? (\n\t\t\t<div id=\"wrong-email-password-message\">\n\t\t\t\t<span>\n\t\t\t\t\tSorry, that email or password isn't right. You can{' '}\n\t\t\t\t\t<a href=\"/user/forgot_password\">reset your password.</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t) : null;\n\n\treturn (\n\t\t<div className=\"sign-in-up-page\" id=\"sign-in-page\">\n\t\t\t<a className=\"sign-in-up-page-home-link\" href=\"/\">\n\t\t\t\t<img\n\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/layout/goodreads_logo_324-a908b923dc3ed9b7a13f3da4d1ffb2df.png\"\n\t\t\t\t\talt=\"Goodreads\"\n\t\t\t\t/>\n\t\t\t</a>\n\t\t\t<div className=\"sign-in-up-page-main-card\">\n\t\t\t\t<div className=\"sign-in-up-page-main-card-top\">\n\t\t\t\t\t<h1>Sign in to Goodreads</h1>\n\t\t\t\t\t<button\n\t\t\t\t\t\tid=\"continue-with-facebook\"\n\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\tawait Firebase.facebookSignIn();\n\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\tpathname: '/',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"facebook-icon\"></span>\n\t\t\t\t\t\t<span className=\"continue-with-facebook-label\">\n\t\t\t\t\t\t\tContinue with Facebook\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div className=\"smaller-buttons\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"sign-in-with-twitter\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tawait Firebase.twitterSignIn();\n\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\tpathname: '/',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign in with Twitter\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"sign-in-with-google\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tawait Firebase.googleSignIn();\n\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\tpathname: '/',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign in with Google\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"or-container\">\n\t\t\t\t\t<span className=\"or-span\">or</span>\n\t\t\t\t</p>\n\t\t\t\t{errorMessage}\n\t\t\t\t<form className=\"sign-in-up-page-main-card-center\">\n\t\t\t\t\t<label htmlFor=\"sign-in-page-email\">Email address</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tclassName=\"sign-in-up-page-email\"\n\t\t\t\t\t\tid=\"sign-in-page-email\"\n\t\t\t\t\t\tplaceholder=\"you@yours.com\"\n\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"sign-in-page-password\">Password</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tclassName=\"sign-in-up-page-password\"\n\t\t\t\t\t\tid=\"sign-in-page-password\"\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<div className=\"sign-in-up-page-checkbox-and-label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclassName=\"sign-in-up-page-keep-in\"\n\t\t\t\t\t\t\tid=\"sign-in-page-keep-in\"\n\t\t\t\t\t\t\tvalue={rememberMe}\n\t\t\t\t\t\t\tonChange={() => setRememberMe(!rememberMe)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"sign-in-page-keep-in\">Keep me signed in</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"sign-in-up-page-main-card-center-bottom-buttons\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"sign-in-up-page-sign-in\"\n\t\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tawait Firebase.passwordSignIn(\n\t\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\t\tpassword,\n\t\t\t\t\t\t\t\t\trememberMe,\n\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign in\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"sign-in-up-page-forgot-password\"\n\t\t\t\t\t\t\thref=\"/user/forgot_password\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tForgot password\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t\t<div className=\"sign-in-up-page-main-card-bottom\">\n\t\t\t\t\t<span>Not a member?</span>\n\t\t\t\t\t<a href=\"/user/sign_up\">Sign up</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"sign-in-up-page-bottom-section\"></div>\n\t\t</div>\n\t);\n};\n\nexport default SignInPage;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useLocation } from 'react-router-dom';\nimport Firebase from '../../Firebase';\nimport '../styles/Authentication/SignUpPage.css';\n\nconst SignUpPage = (props) => {\n\tconst history = useHistory();\n\tconst location = useLocation();\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [name, setName] = useState('');\n\n\tconst errorMessage =\n\t\tlocation.state !== undefined && location.state.error === 'name' ? (\n\t\t\t<span>Sorry, you must enter a name to sign up for Goodreads.</span>\n\t\t) : location.state !== undefined &&\n\t\t  location.state.error === 'email-missing' ? (\n\t\t\t<span>\n\t\t\t\tSorry, you must enter an email address to sign up for Goodreads.\n\t\t\t</span>\n\t\t) : location.state !== undefined &&\n\t\t  location.state.error === 'email-exists' ? (\n\t\t\t<span>\n\t\t\t\tSorry, that email has already been used to sign up for Goodreads.{' '}\n\t\t\t\t<a href=\"/user/sign_in\">Sign in</a>\n\t\t\t</span>\n\t\t) : null;\n\n\treturn (\n\t\t<div className=\"sign-in-up-page\" id=\"sign-up-page\">\n\t\t\t<a className=\"sign-in-up-page-home-link\" href=\"/\">\n\t\t\t\t<img\n\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/layout/goodreads_logo_324-a908b923dc3ed9b7a13f3da4d1ffb2df.png\"\n\t\t\t\t\talt=\"Goodreads\"\n\t\t\t\t/>\n\t\t\t</a>\n\t\t\t<div className=\"sign-in-up-page-main-card\">\n\t\t\t\t<div className=\"sign-in-up-page-main-card-top\">\n\t\t\t\t\t<h1>Sign up for Goodreads</h1>\n\t\t\t\t\t<span>\n\t\t\t\t\t\tSign up to see what your friends are reading, get book\n\t\t\t\t\t\trecommendations, and join the worlds largest community of readers.\n\t\t\t\t\t</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tid=\"continue-with-facebook\"\n\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\tawait Firebase.facebookSignIn();\n\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\tpathname: '/',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"facebook-icon\"></span>\n\t\t\t\t\t\t<span className=\"continue-with-facebook-label\">\n\t\t\t\t\t\t\tContinue with Facebook\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div className=\"smaller-buttons\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"sign-in-with-twitter\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tawait Firebase.twitterSignIn();\n\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\tpathname: '/',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign in with Twitter\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"sign-in-with-google\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tawait Firebase.googleSignIn();\n\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\tpathname: '/',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign in with Google\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"or-container\" id=\"sign-up-or-container\">\n\t\t\t\t\t<span className=\"or-span\">or</span>\n\t\t\t\t</p>\n\t\t\t\t<h2 className=\"sign-up-with-email\">Sign Up with Email</h2>\n\t\t\t\t{errorMessage !== null ? (\n\t\t\t\t\t<div id=\"wrong-email-password-message\" className=\"sign-up-error\">\n\t\t\t\t\t\t{errorMessage}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t\t<form className=\"sign-in-up-page-main-card-center\">\n\t\t\t\t\t<label htmlFor=\"sign-up-page-name\">Name</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"sign-in-up-page-email\"\n\t\t\t\t\t\tid=\"sign-up-page-name\"\n\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"sign-in-page-email\">Email address</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tclassName=\"sign-in-up-page-email\"\n\t\t\t\t\t\tid=\"sign-in-page-email\"\n\t\t\t\t\t\tplaceholder=\"you@yours.com\"\n\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"sign-in-page-password\">Password</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tclassName=\"sign-in-up-page-password\"\n\t\t\t\t\t\tid=\"sign-in-page-password\"\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"sign-in-up-page-main-card-center-bottom-buttons\"\n\t\t\t\t\t\tid=\"sign-up-card-bottom-buttons\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"sign-in-up-page-sign-in\"\n\t\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tawait Firebase.signUp(email, password, name, history);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSign up\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"sign-in-up-page-main-card-bottom\"\n\t\t\t\t\t\t\tid=\"sign-up-page-already-member\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>Already a member?</span>\n\t\t\t\t\t\t\t<a href=\"/user/sign_in\">Sign in</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"sign-up-page-main-card-bottom\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tBy clicking Sign up I confirm that I am at least 13 years of\n\t\t\t\t\t\t\tage.\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t\t<div className=\"sign-in-up-page-bottom-section\"></div>\n\t\t</div>\n\t);\n};\n\nexport default SignUpPage;\n","import React from 'react';\nimport '../styles/Authentication/SignOutPage.css';\n\nconst SignOutPage = () => {\n\treturn (\n\t\t<div className=\"sign-in-up-page\" id=\"sign-out-page\">\n\t\t\t<a className=\"sign-in-up-page-home-link\" href=\"/\">\n\t\t\t\t<img\n\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/layout/goodreads_logo_324-a908b923dc3ed9b7a13f3da4d1ffb2df.png\"\n\t\t\t\t\talt=\"Goodreads\"\n\t\t\t\t/>\n\t\t\t</a>\n\t\t\t<div className=\"sign-in-up-page-main-card\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"sign-in-up-page-main-card-top\"\n\t\t\t\t\tid=\"sign-out-main-card-top\"\n\t\t\t\t>\n\t\t\t\t\t<span>You've been signed out.</span>\n\t\t\t\t\t<a href=\"/\">Goodreads Home</a>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"or-container\" id=\"sign-out-or-container\">\n\t\t\t\t\t<span className=\"or-span\">or</span>\n\t\t\t\t</p>\n\t\t\t\t<div id=\"sign-out-page-bottom\">\n\t\t\t\t\t<a href=\"/user/sign_in\">Sign in again</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"sign-in-up-page-bottom-section\"></div>\n\t\t</div>\n\t);\n};\n\nexport default SignOutPage;\n","import React, { useEffect, useState, useRef, useLayoutEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Firebase from '../../Firebase';\nimport { format } from 'date-fns';\nimport '../styles/Books/BookPage.css';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookPage = ({ match }) => {\n\tconst history = useHistory();\n\tconst {\n\t\tparams: { bookPageId },\n\t} = match;\n\tconst authorAboutP = useRef();\n\tconst synopsisP = useRef();\n\tconst enlargeCoverWindow = useRef();\n\tconst enlargeCoverButton = useRef();\n\tconst recommendWindow = useRef();\n\tconst recommendItButton = useRef();\n\tconst [synopsisHeight, setSynopsisHeight] = useState(0);\n\tconst [authorAboutHeight, setAuthorAboutHeight] = useState(0);\n\tconst [bookInfo, setBookInfo] = useState({ title: '', cover: '' });\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [savingShelf, setSavingShelf] = useState(false);\n\tconst [quizQuestionOptionSelected, setQuizQuestionOptionSelected] = useState(\n\t\t-1\n\t);\n\tconst [synopsisShowMore, setSynopsisShowMore] = useState(false);\n\tconst [showMoreBookInfoDetails, setShowMoreBookInfoDetails] = useState(false);\n\tconst [\n\t\treadersEnjoyedListTranslation,\n\t\tsetReadersEnjoyedListTranslation,\n\t] = useState(0);\n\tconst [authorAboutShowMore, setAuthorAboutShowMore] = useState(false);\n\tconst [isShelfPopupHidden, setIsShelfPopupHidden] = useState(true);\n\tconst [isShelfPopupBottomHidden, setIsShelfPopupBottomHidden] = useState(\n\t\ttrue\n\t);\n\tconst [\n\t\tisAddShelfInputSectionHidden,\n\t\tsetIsAddShelfInputSectionHidden,\n\t] = useState(true);\n\tconst [addShelfInput, setAddShelfInput] = useState('');\n\tconst [shelfPopupReadingInput, setShelfPopupReadingInput] = useState('');\n\tconst [shelfPopupToReadInput, setShelfPopupToReadInput] = useState('');\n\tconst [exhibitedStarRating, setExhibitedStarRating] = useState(0);\n\tconst [reviewSearchInput, setReviewSearchInput] = useState('');\n\tconst [reviewsShowingMore, setReviewsShowingMore] = useState([]);\n\tconst [reviewsHaveButton, setReviewsHaveButton] = useState([]);\n\tconst [showFiltersDialogBox, setShowFiltersDialogBox] = useState(false);\n\tconst [showSortOrderDialogBox, setShowSortOrderDialogBox] = useState(false);\n\tconst [reviewStars, setReviewStars] = useState(0);\n\tconst [showAllEditionsForReviews, setShowAllEditionsForReviews] = useState(\n\t\ttrue\n\t);\n\tconst [sortOrder, setSortOrder] = useState('default');\n\tconst [searchReviewFilter, setSearchReviewFilter] = useState('');\n\tconst [loadingFollowAuthor, setLoadingFollowAuthor] = useState(false);\n\tconst [showEnlargeCoverWindow, setShowEnlargeCoverWindow] = useState(false);\n\tconst [showRecommendWindow, setShowRecommendWindow] = useState(false);\n\tconst [recommendWindowSearchBox, setRecommendWindowSearchBox] = useState('');\n\tconst [loadingFriends, setLoadingFriends] = useState(false);\n\tconst [friendsInfo, setFriendsInfo] = useState([]);\n\tconst [\n\t\trecommendWindowAddingMessages,\n\t\tsetRecommendWindowAddingMessages,\n\t] = useState([]);\n\tconst [recommendWindowMessages, setRecommendWindowMessages] = useState([]);\n\tconst [\n\t\trecommendWindowSentStatuses,\n\t\tsetRecommendWindowSentStatuses,\n\t] = useState([]);\n\tconst [\n\t\ttopRatingDetailsPopupHidden,\n\t\tsetTopRatingDetailsPopupHidden,\n\t] = useState(true);\n\tconst [\n\t\tbottomRatingDetailsPopupHidden,\n\t\tsetBottomRatingDetailsPopupHidden,\n\t] = useState(true);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tlet bookId = '';\n\t\t\tlet i = 0;\n\t\t\twhile (i < bookPageId.length) {\n\t\t\t\tif (bookPageId[i] !== '.') {\n\t\t\t\t\tbookId += bookPageId[i];\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tconst bookObj = await trackPromise(\n\t\t\t\tFirebase.queryBookById(user.userUID, bookId)\n\t\t\t);\n\t\t\tlocalStorage.setItem(`${bookId}Obj`, JSON.stringify(bookObj));\n\t\t\tsetBookInfo(bookObj);\n\t\t\tif (bookObj.userRating !== undefined) {\n\t\t\t\tsetExhibitedStarRating(bookObj.userRating);\n\t\t\t}\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [bookPageId, user.userUID, match]);\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('click', (e) => {\n\t\t\tif (\n\t\t\t\tenlargeCoverWindow.current !== undefined &&\n\t\t\t\tenlargeCoverWindow.current !== null\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\tshowEnlargeCoverWindow &&\n\t\t\t\t\t!enlargeCoverWindow.current.contains(e.target) &&\n\t\t\t\t\t!enlargeCoverButton.current.contains(e.target)\n\t\t\t\t) {\n\t\t\t\t\tsetShowEnlargeCoverWindow(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('click', (e) => {\n\t\t\tif (\n\t\t\t\trecommendWindow.current !== undefined &&\n\t\t\t\trecommendWindow.current !== null\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\tshowRecommendWindow &&\n\t\t\t\t\t!recommendWindow.current.contains(e.target) &&\n\t\t\t\t\t!recommendItButton.current.contains(e.target)\n\t\t\t\t) {\n\t\t\t\t\tsetShowRecommendWindow(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tuseEffect(() => {\n\t\tif (bookInfo.userRating !== undefined) {\n\t\t\tsetExhibitedStarRating(bookInfo.userRating);\n\t\t} else {\n\t\t\tsetExhibitedStarRating(0);\n\t\t}\n\t\tif (bookInfo.userProgress !== undefined) {\n\t\t\tsetShelfPopupReadingInput(`${bookInfo.userProgress}`);\n\t\t} else {\n\t\t\tsetShelfPopupReadingInput('');\n\t\t}\n\t\tif (bookInfo.toReadBookPosition !== undefined) {\n\t\t\tsetShelfPopupToReadInput(`${bookInfo.toReadBookPosition}`);\n\t\t} else {\n\t\t\tsetShelfPopupToReadInput('');\n\t\t}\n\t}, [bookInfo]);\n\n\tuseEffect(() => {\n\t\tconst queryFriends = async () => {\n\t\t\tconst newFriendsInfo = await trackPromise(\n\t\t\t\tFirebase.getFriendsInfo(user.userUID, history)\n\t\t\t);\n\t\t\tsetFriendsInfo(newFriendsInfo);\n\t\t\tsetRecommendWindowAddingMessages(newFriendsInfo.map((_friend) => false));\n\t\t\tsetRecommendWindowMessages(newFriendsInfo.map((_friend) => ''));\n\t\t\tconst recommendedToFriendsStatus = await trackPromise(\n\t\t\t\tFirebase.queryBookRecommendedToFriendsStatus(\n\t\t\t\t\tuser.userUID,\n\t\t\t\t\tbookInfo.id,\n\t\t\t\t\tnewFriendsInfo.map((friend) => friend.id),\n\t\t\t\t\thistory\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetRecommendWindowSentStatuses(recommendedToFriendsStatus);\n\t\t};\n\t\tsetLoadingFriends(false);\n\n\t\tif (loadingFriends) {\n\t\t\tqueryFriends();\n\t\t}\n\t}, [loadingFriends, user.userUID, bookInfo.id, history]);\n\n\tuseLayoutEffect(() => {\n\t\tif (authorAboutP.current !== undefined) {\n\t\t\tsetAuthorAboutHeight(authorAboutP.current.scrollHeight);\n\t\t}\n\t\tif (synopsisP.current !== undefined) {\n\t\t\tsetSynopsisHeight(synopsisP.current.scrollHeight);\n\t\t}\n\n\t\tconst reviews = document.getElementsByClassName(\n\t\t\t'book-page-review-main-body'\n\t\t);\n\t\tif (reviews.length > 0) {\n\t\t\tconst haveButtons = [];\n\t\t\tsetReviewsShowingMore(Array.from(reviews).map((review) => false));\n\t\t\tArray.from(reviews).forEach((review) => {\n\t\t\t\tif (review.scrollHeight <= 292) {\n\t\t\t\t\thaveButtons.push(false);\n\t\t\t\t} else {\n\t\t\t\t\thaveButtons.push(true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetReviewsHaveButton(haveButtons);\n\t\t}\n\t}, [loaded]);\n\n\tconst ratingCount = loaded\n\t\t? bookInfo.fiveRatings +\n\t\t  bookInfo.fourRatings +\n\t\t  bookInfo.threeRatings +\n\t\t  bookInfo.twoRatings +\n\t\t  bookInfo.oneRatings\n\t\t: 1;\n\n\tconst generalRating = loaded\n\t\t? (\n\t\t\t\t(bookInfo.fiveRatings * 5 +\n\t\t\t\t\tbookInfo.fourRatings * 4 +\n\t\t\t\t\tbookInfo.threeRatings * 3 +\n\t\t\t\t\tbookInfo.twoRatings * 2 +\n\t\t\t\t\tbookInfo.oneRatings) /\n\t\t\t\tratingCount\n\t\t  ).toFixed(2)\n\t\t: 0;\n\n\tconst mostFrequentRating = loaded\n\t\t? Math.max(\n\t\t\t\tbookInfo.fiveRatings,\n\t\t\t\tbookInfo.fourRatings,\n\t\t\t\tbookInfo.threeRatings,\n\t\t\t\tbookInfo.twoRatings,\n\t\t\t\tbookInfo.oneRatings\n\t\t  )\n\t\t: 0;\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = () => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, bookInfo.id);\n\t\t\tsetBookInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\tuserRating: undefined,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (shelf) => {\n\t\tif (bookInfo.id !== undefined) {\n\t\t\tsetSavingShelf(true);\n\t\t\tawait Firebase.addBookToShelf(user.userUID, bookInfo.id, shelf, history);\n\t\t\tsetBookInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t};\n\t\t\t});\n\t\t\tsetSavingShelf(false);\n\t\t}\n\t};\n\n\tconst rateBook = async (rating) => {\n\t\tif (bookInfo.id !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, bookInfo.id, rating, history);\n\t\t\tsetBookInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tuserStatus:\n\t\t\t\t\t\tprevious.userStatus !== undefined ? previous.userStatus : 'read',\n\t\t\t\t\tuserRating: rating,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateProgress = async (pages) => {\n\t\tif (\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined &&\n\t\t\tbookInfo.id !== undefined &&\n\t\t\tpages.length > 0\n\t\t) {\n\t\t\tawait Firebase.updateBookInShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookInfo.id,\n\t\t\t\tparseInt(pages)\n\t\t\t);\n\t\t\tsetBookInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tuserProgress: parseInt(pages),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst addToShelfButton =\n\t\tloaded && bookInfo.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tisShelfPopupHidden\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up reading\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>Update your reading progress:</b>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tI'm on page{' '}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupReadingInput}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tisShelfPopupBottomHidden\n\t\t\t\t\t\t\t\t\t\t\t? 'page-progress-input'\n\t\t\t\t\t\t\t\t\t\t\t: 'page-progress-input white-background'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(false);\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setShelfPopupReadingInput(e.target.value)}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\tof {bookInfo.pageCount}.{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tisShelfPopupBottomHidden\n\t\t\t\t\t\t\t\t\t? 'shelf-pop-up-bottom hidden'\n\t\t\t\t\t\t\t\t\t: 'shelf-pop-up-bottom'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tupdateProgress(shelfPopupReadingInput);\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-finished-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tchangeBookShelf('read');\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFinished book\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={removeBookSafely}\n\t\t\t\t></button>\n\t\t\t\t<span>Currently Reading</span>\n\t\t\t</div>\n\t\t) : loaded && bookInfo.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<div className=\"shelf-pop-up-wrapper\">\n\t\t\t\t\t<div className=\"shelf-pop-up read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\tbookInfo.id\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={removeBookSafely}\n\t\t\t\t></button>\n\t\t\t\t<span>Read</span>\n\t\t\t</div>\n\t\t) : loaded && bookInfo.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tisShelfPopupHidden\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up to-read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupToReadInput}\n\t\t\t\t\t\t\t\t\tclassName=\"shelf-pop-up-to-read-input\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => setShelfPopupToReadInput(e.target.value)}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(false);\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\ton your <b>To Read</b> shelf.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isShelfPopupBottomHidden ? (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tFirebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(shelfPopupToReadInput)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetBookInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\ttoReadBookPosition: parseInt(shelfPopupToReadInput),\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={removeBookSafely}\n\t\t\t\t></button>\n\t\t\t\t<span>Want to Read</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf('to-read')}\n\t\t\t>\n\t\t\t\t{savingShelf ? '...saving' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\n\tconst bookOptionsDropdown = (\n\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t<div className=\"book-options-dropdown\">\n\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"dropdown-read-button\"\n\t\t\t\t\t\tonClick={() => changeBookShelf('read')}\n\t\t\t\t\t>\n\t\t\t\t\t\tRead\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"dropdown-currently-reading-button\"\n\t\t\t\t\t\tonClick={() => changeBookShelf('reading')}\n\t\t\t\t\t>\n\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"dropdown-want-to-read-button\"\n\t\t\t\t\t\tonClick={() => changeBookShelf('to-read')}\n\t\t\t\t\t>\n\t\t\t\t\t\tWant to Read\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"dropdown-add-shelf\"\n\t\t\t\t\t\tonClick={(_e) => setIsAddShelfInputSectionHidden(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t</button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tisAddShelfInputSectionHidden\n\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={addShelfInput}\n\t\t\t\t\t\t\tonChange={(e) => setAddShelfInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\tif (addShelfInput.length > 0) {\n\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\tbookInfo.rootBook,\n\t\t\t\t\t\t\t\t\t\taddShelfInput,\n\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetIsAddShelfInputSectionHidden(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst bookPageInfoLeft = loaded ? (\n\t\t<div className=\"book-page-book-info-left\">\n\t\t\t<div className=\"book-page-book-info-cover-wrap\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"book-cover-page-anchor\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateBookCoverPage(\n\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\tbookInfo.title\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tbookInfo.cover !== undefined\n\t\t\t\t\t\t\t\t? bookInfo.cover\n\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={bookInfo.title}\n\t\t\t\t\t\tclassName=\"book-info-book-cover\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t<div className=\"cover-options\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-other-editions-anchor\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookEditionsPage(\n\t\t\t\t\t\t\tbookInfo.originalId,\n\t\t\t\t\t\t\tbookInfo.originalTitle\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tOther editions\n\t\t\t\t\t</a>\n\t\t\t\t\t{bookInfo.cover !== undefined ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"book-page-enlarge-cover\"\n\t\t\t\t\t\t\tonClick={() => setShowEnlargeCoverWindow((previous) => !previous)}\n\t\t\t\t\t\t\tref={enlargeCoverButton}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tEnlarge cover\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"book-page-user-shelf-section\">\n\t\t\t\t<div className=\"add-to-shelf-buttons\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`want-to-read-button-and-options ${\n\t\t\t\t\t\t\tbookInfo.userStatus !== undefined ? bookInfo.userStatus : ''\n\t\t\t\t\t\t}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{addToShelfButton}\n\t\t\t\t\t\t{bookOptionsDropdown}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"book-page-rate-book\">\n\t\t\t\t{bookInfo.userRating === undefined ? null : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"clear-rating-button\"\n\t\t\t\t\t\tonClick={() => rateBook(undefined)}\n\t\t\t\t\t>\n\t\t\t\t\t\tClear rating\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{bookInfo.userRating === undefined ? (\n\t\t\t\t\t<span className=\"rate-this-book\">Rate this book</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"rate-this-book my-rating\">My rating:</span>\n\t\t\t\t)}\n\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRating > 0\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(1)}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(1)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRating > 1\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(2)}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(2)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRating > 2\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(3)}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(3)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRating > 3\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(4)}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(4)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRating > 4\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(5)}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(5)}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageTitleArea = loaded ? (\n\t\t<div className=\"book-page-title-area\">\n\t\t\t<h1 className=\"book-page-book-title\">{bookInfo.title}</h1>\n\t\t\t{bookInfo.series !== undefined ? (\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"book-page-book-title-series-a\"\n\t\t\t\t\thref={bookInfo.series.page}\n\t\t\t\t>{`(${bookInfo.series.name} #${bookInfo.seriesInstance})`}</a>\n\t\t\t) : (\n\t\t\t\t''\n\t\t\t)}\n\t\t\t<span className=\"book-page-author-name\">\n\t\t\t\tby{' '}\n\t\t\t\t<a className=\"book-page-author-name-a\" href={bookInfo.authorPages[0]}>\n\t\t\t\t\t{bookInfo.authorNames[0]}\n\t\t\t\t</a>\n\t\t\t\t{bookInfo.authorIsMember ? (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<span className=\"book-page-goodreads-author\">\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t(Goodreads Author)\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{bookInfo.authorNames.length > 1 ? ',' : ''}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t</span>\n\t\t\t{bookInfo.authorNames.slice(1).map((authorName, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<span key={index}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"book-page-other-author-name-a\"\n\t\t\t\t\t\t\thref={bookInfo.authorPages[index]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{authorName}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span className=\"book-page-goodreads-other-author\">\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t({bookInfo.authorFunctions[index]})\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{index === bookInfo.authorNames.length - 1 ? ',' : ''}\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t) : null;\n\n\tconst generateBookPageRatingsArea = (isTop) => {\n\t\treturn loaded ? (\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tisTop ? 'book-page-ratings-area top' : 'book-page-ratings-area bottom'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div className=\"book-page-general-rating\">\n\t\t\t\t\t<div className=\"book-page-general-rating-stars\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tgeneralRating >= 1\n\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t: generalRating >= 0.5\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t: generalRating > 0\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tgeneralRating >= 2\n\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t: generalRating >= 1.5\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t: generalRating > 1\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tgeneralRating >= 3\n\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t: generalRating >= 2.5\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t: generalRating > 2\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tgeneralRating >= 4\n\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t: generalRating >= 3.5\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t: generalRating > 3\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tgeneralRating >= 5\n\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t: generalRating >= 4.5\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t: generalRating > 4\n\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span>{!isNaN(generalRating) ? generalRating : ''}</span>\n\t\t\t\t</div>\n\t\t\t\t<span className=\"book-page-ratings-dot\"></span>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"rating-details\"\n\t\t\t\t\tonMouseOver={(_e) => {\n\t\t\t\t\t\tif (!isTop) {\n\t\t\t\t\t\t\tsetBottomRatingDetailsPopupHidden(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseLeave={(e) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!isTop &&\n\t\t\t\t\t\t\t(e.clientX > 974 ||\n\t\t\t\t\t\t\t\te.clientX < 375 ||\n\t\t\t\t\t\t\t\te.clientY > 308 ||\n\t\t\t\t\t\t\t\te.clientY < 80)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tsetBottomRatingDetailsPopupHidden(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"svg-container\">\n\t\t\t\t\t\t<svg width=\"12\" height=\"11\">\n\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t? (bookInfo.fiveRatings * 16) / ratingCount\n\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\theight=\"2\"\n\t\t\t\t\t\t\t\ty=\"0\"\n\t\t\t\t\t\t\t\tfill=\"rgb(33,86,37)\"\n\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t? (bookInfo.fourRatings * 16) / ratingCount\n\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\theight=\"2\"\n\t\t\t\t\t\t\t\ty=\"3\"\n\t\t\t\t\t\t\t\tfill=\"rgb(33,86,37)\"\n\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t? (bookInfo.threeRatings * 16) / ratingCount\n\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\theight=\"2\"\n\t\t\t\t\t\t\t\ty=\"6\"\n\t\t\t\t\t\t\t\tfill=\"rgb(33,86,37)\"\n\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t? (bookInfo.twoRatings * 16) / ratingCount\n\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\theight=\"2\"\n\t\t\t\t\t\t\t\ty=\"9\"\n\t\t\t\t\t\t\t\tfill=\"rgb(33,86,37)\"\n\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t? (bookInfo.oneRatings * 16) / ratingCount\n\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\theight=\"2\"\n\t\t\t\t\t\t\t\ty=\"12\"\n\t\t\t\t\t\t\t\tfill=\"rgb(33,86,37)\"\n\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tif (isTop) {\n\t\t\t\t\t\t\t\tsetTopRatingDetailsPopupHidden(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tRating details\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t(isTop && !topRatingDetailsPopupHidden) ||\n\t\t\t\t\t\t\t(!isTop && !bottomRatingDetailsPopupHidden)\n\t\t\t\t\t\t\t\t? 'rating-details-popup'\n\t\t\t\t\t\t\t\t: 'rating-details-popup hidden'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"rating-details-popup-tip\"></div>\n\t\t\t\t\t\t<span className=\"rating-details-top-title\">\n\t\t\t\t\t\t\t{isTop ? 'Rating details' : 'book data'}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{isTop ? (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"rating-details-top-close-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => setTopRatingDetailsPopupHidden(true)}\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<table className=\"rating-distribution\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t\t\t\t5<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (bookInfo.fiveRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t? Math.round((bookInfo.fiveRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t\t\t}% (${bookInfo.fiveRatings})`}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t\t\t\t4<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (bookInfo.fourRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t? Math.round((bookInfo.fourRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t\t\t}% (${bookInfo.fourRatings})`}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t\t\t\t3<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (bookInfo.threeRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t? Math.round(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(bookInfo.threeRatings * 100) / ratingCount\n\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t\t\t}% (${bookInfo.threeRatings})`}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t\t\t\t2<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (bookInfo.twoRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t? Math.round((bookInfo.twoRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t\t\t}% (${bookInfo.threeRatings})`}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t\t\t\t1<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (bookInfo.oneRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t? Math.round((bookInfo.oneRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t\t\t}% (${bookInfo.oneRatings})`}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<span className=\"percent-of-people-who-liked\">\n\t\t\t\t\t\t\t<span className=\"number\">\n\t\t\t\t\t\t\t\t{ratingCount !== 0\n\t\t\t\t\t\t\t\t\t? Math.round(\n\t\t\t\t\t\t\t\t\t\t\t((bookInfo.fiveRatings +\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.fourRatings +\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.threeRatings) *\n\t\t\t\t\t\t\t\t\t\t\t\t100) /\n\t\t\t\t\t\t\t\t\t\t\t\tratingCount\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: 0}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t% of people liked it\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"all-editions-info\">\n\t\t\t\t\t\t\t<span className=\"title\">All editions: </span>\n\t\t\t\t\t\t\t<span className=\"number\">{generalRating}</span> average rating,{' '}\n\t\t\t\t\t\t\t<span className=\"number\">{ratingCount}</span> ratings,{' '}\n\t\t\t\t\t\t\t<span className=\"number\">{bookInfo.reviews.length}</span> reviews,\n\t\t\t\t\t\t\tadded by <span className=\"number\">{bookInfo.addedBy}</span>{' '}\n\t\t\t\t\t\t\tpeople, <span className=\"number\">{bookInfo.toReads}</span>{' '}\n\t\t\t\t\t\t\tto-reads\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"this-edition-info\">\n\t\t\t\t\t\t\t<span className=\"title\">This edition: </span>\n\t\t\t\t\t\t\t<span className=\"number\">{bookInfo.thisEditionRating}</span>{' '}\n\t\t\t\t\t\t\taverage rating,{' '}\n\t\t\t\t\t\t\t<span className=\"number\">{bookInfo.thisEditionRatings}</span>{' '}\n\t\t\t\t\t\t\tratings,{' '}\n\t\t\t\t\t\t\t<span className=\"number\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbookInfo.reviews.filter(\n\t\t\t\t\t\t\t\t\t\t(review) => review.edition === bookInfo.id\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t\treviews, added by{' '}\n\t\t\t\t\t\t\t<span className=\"number\">{bookInfo.thisEditionAddedBy}</span>{' '}\n\t\t\t\t\t\t\tpeople\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<span className=\"book-page-ratings-dot\"></span>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"book-page-ratings-count\"\n\t\t\t\t\thref={`${bookPageId}#other-reviews`}\n\t\t\t\t>\n\t\t\t\t\t{`${ratingCount} ratings`}\n\t\t\t\t</a>\n\t\t\t\t<span className=\"book-page-ratings-dot\"></span>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"book-page-reviews-count\"\n\t\t\t\t\thref={`${bookPageId}#other-reviews`}\n\t\t\t\t>\n\t\t\t\t\t{`${bookInfo.reviews.length} ${\n\t\t\t\t\t\tbookInfo.reviews.length === 1 ? 'review' : 'reviews'\n\t\t\t\t\t}`}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\t};\n\n\tconst bookPageSynopsisArea = loaded ? (\n\t\t<div className=\"book-page-synopsis-wrapper\">\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tsynopsisShowMore\n\t\t\t\t\t\t? 'book-page-synopsis-area-full'\n\t\t\t\t\t\t: 'book-page-synopsis-area'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{bookInfo.preSynopsis !== undefined ? (\n\t\t\t\t\t<p className=\"pre-synopsis\">\n\t\t\t\t\t\t<b>{bookInfo.preSynopsis}</b>\n\t\t\t\t\t</p>\n\t\t\t\t) : null}\n\t\t\t\t<p className=\"synopsis\" ref={synopsisP}>\n\t\t\t\t\t{bookInfo.synopsis}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t{synopsisHeight > 105 ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"synopsis-show-more\"\n\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\tsetSynopsisShowMore((previous) => !previous);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{synopsisShowMore ? '(less)' : '...more'}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst bookPageGetACopy = loaded ? (\n\t\t<div className=\"book-page-get-a-copy\">\n\t\t\t<span>GET A COPY</span>\n\t\t\t<a href={bookInfo.amazonLink}>Amazon</a>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageBookInfoDetailsExpanded = loaded ? (\n\t\t<div className=\"book-page-book-info-details-expanded\">\n\t\t\t<div className=\"book-page-book-info-details-expanded-left\">\n\t\t\t\t<span>Original Title</span>\n\t\t\t\t{bookInfo.ISBN !== undefined ? <span>ISBN</span> : null}\n\t\t\t\t{bookInfo.language !== undefined ? <span>Edition Language</span> : null}\n\t\t\t\t{bookInfo.series !== undefined ? <span>Series</span> : null}\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateBookEditionsPage(\n\t\t\t\t\t\tbookInfo.rootBook,\n\t\t\t\t\t\tbookInfo.originalTitle\n\t\t\t\t\t)}\n\t\t\t\t>{`Other Editions (${bookInfo.otherEditionsPages.length})`}</a>\n\t\t\t</div>\n\t\t\t<div className=\"book-page-book-info-details-expanded-right\">\n\t\t\t\t<span>{bookInfo.originalTitle}</span>\n\t\t\t\t{bookInfo.ISBN !== undefined ? <span>{bookInfo.ISBN}</span> : null}\n\t\t\t\t{bookInfo.language !== undefined ? (\n\t\t\t\t\t<span>{bookInfo.language}</span>\n\t\t\t\t) : null}\n\t\t\t\t{bookInfo.series !== undefined ? (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={bookInfo.series.page}\n\t\t\t\t\t\tclassName=\"book-page-details-series-a\"\n\t\t\t\t\t>{`${bookInfo.series.name} #${bookInfo.seriesInstance}`}</a>\n\t\t\t\t) : null}\n\t\t\t\t<div className=\"book-page-details-editions\">\n\t\t\t\t\t<div className=\"book-page-details-other-editions\">\n\t\t\t\t\t\t{bookInfo.otherEditionsPages.length > 0 ? (\n\t\t\t\t\t\t\tbookInfo.otherEditionsPages.map((page, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={page}\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-page-details-other-editions-a\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.otherEditionsCovers[index] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? bookInfo.otherEditionsCovers[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'bookInfo.otherEditionsCovers[index]'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\talt={bookInfo.title}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"no-other-editions-found-span\">None found</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-page-details-editions-bottom\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookEditionsPage(\n\t\t\t\t\t\t\t\tbookInfo.rootBook,\n\t\t\t\t\t\t\t\tbookInfo.originalTitle\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAll Editions\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span>|</span>\n\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateAddBookPage()}>\n\t\t\t\t\t\t\tAdd a New Edition\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageBookInfoDetails = loaded ? (\n\t\t<div className=\"book-page-book-info-details\">\n\t\t\t<span className=\"book-type-and-pages\">\n\t\t\t\t{bookInfo.type !== undefined\n\t\t\t\t\t? `${bookInfo.type}, ${bookInfo.pageCount} pages`\n\t\t\t\t\t: `${bookInfo.pageCount} pages`}\n\t\t\t</span>\n\t\t\t<span className=\"book-publication\">\n\t\t\t\t{bookInfo.editionPublishedDate !== undefined\n\t\t\t\t\t? `Published ${format(\n\t\t\t\t\t\t\tbookInfo.editionPublishedDate,\n\t\t\t\t\t\t\t'MMMM do yyyy'\n\t\t\t\t\t  )} by ${bookInfo.publisher}`\n\t\t\t\t\t: null}\n\t\t\t\t{bookInfo.firstEditionPublishedYear !==\n\t\t\t\t\tbookInfo.editionPublishedDate.getYear() &&\n\t\t\t\tbookInfo.firstEditionPublishedYear !== undefined ? (\n\t\t\t\t\t<span className=\"book-publication-original-year\">{` (first published ${bookInfo.firstEditionPublishedYear})`}</span>\n\t\t\t\t) : null}\n\t\t\t</span>\n\t\t\t{showMoreBookInfoDetails ? bookPageBookInfoDetailsExpanded : null}\n\t\t\t<div className=\"book-page-book-info-bottom\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"show-more-book-info-details-button\"\n\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\tsetShowMoreBookInfoDetails((previous) => !previous);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{showMoreBookInfoDetails ? '...Less Detail' : 'More Details...'}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageInfoRight = (\n\t\t<div className=\"book-page-book-info-right\">\n\t\t\t{bookPageTitleArea}\n\t\t\t{generateBookPageRatingsArea(true)}\n\t\t\t{bookPageSynopsisArea}\n\t\t\t{bookPageGetACopy}\n\t\t\t{bookPageBookInfoDetails}\n\t\t</div>\n\t);\n\n\tconst bookPageBookInfo = (\n\t\t<div className=\"book-page-book-info\">\n\t\t\t{bookPageInfoLeft}\n\t\t\t{bookPageInfoRight}\n\t\t</div>\n\t);\n\n\tconst bookPageListsWithBook =\n\t\tloaded && bookInfo.lists !== undefined ? (\n\t\t\t<div className=\"book-page-lists-with-book\">\n\t\t\t\t<div className=\"book-page-lists-with-book-top\">\n\t\t\t\t\t<a className=\"lists-with-book-a\" href={`/lists/book/${bookInfo.id}`}>\n\t\t\t\t\t\tLISTS WITH THIS BOOK\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-page-lists-with-book-bottom\">\n\t\t\t\t\t{bookInfo.lists.map((list) => (\n\t\t\t\t\t\t<div className=\"book-page-lists-with-book-pv\" key={list.id}>\n\t\t\t\t\t\t\t<div className=\"book-page-lists-with-book-pv-top\">\n\t\t\t\t\t\t\t\t{list.bookIds.map((_bookId, index) => (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-page-lists-book-pv\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateListPage(\n\t\t\t\t\t\t\t\t\t\t\tlist.id,\n\t\t\t\t\t\t\t\t\t\t\tlist.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tlist.bookCovers[index] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? list.bookCovers[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\talt={list.bookTitles[index]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book-page-lists-with-book-pv-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-page-lists-with-book-pv-title\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateListPage(\n\t\t\t\t\t\t\t\t\t\tlist.id,\n\t\t\t\t\t\t\t\t\t\tlist.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{list.title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<span className=\"book-page-lists-with-book-pv-stats\">{`${list.bookIds.length} books  ${list.voterCount} voters`}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-page-lists-with-book-more\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"more-lists-with-book-a\"\n\t\t\t\t\t\thref={`/lists/book/${bookInfo.id}`}\n\t\t\t\t\t>\n\t\t\t\t\t\tMore lists with this book...\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : loaded ? (\n\t\t\t<div className=\"book-page-lists-with-book\">\n\t\t\t\t<div className=\"book-page-lists-with-book-top\">\n\t\t\t\t\t<a className=\"lists-with-book-a\" href={`/lists/book/${bookInfo.id}`}>\n\t\t\t\t\t\tLISTS WITH THIS BOOK\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"not-featured-listopia\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\tThis book is not yet featured on Listopia.{' '}\n\t\t\t\t\t\t<a href=\"/list\">Add this book to your favorite list </a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst startYourReviewSection =\n\t\tloaded && user.userInfo !== undefined ? (\n\t\t\t<div className=\"start-your-review-section\">\n\t\t\t\t<div className=\"start-your-review-profile-picture\">\n\t\t\t\t\t<img\n\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tuser.userInfo.profileImage !== undefined\n\t\t\t\t\t\t\t\t? user.userInfo.profileImage\n\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t}\n\t\t\t\t\t></img>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"start-your-review-section-right\">\n\t\t\t\t\t{user.userUID !== undefined && user.userUID !== null ? (\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{user.userInfo.firstName},\n\t\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\t\t{`start your review of ${bookInfo.title} ${\n\t\t\t\t\t\t\t\tbookInfo.series !== undefined\n\t\t\t\t\t\t\t\t\t? `(${bookInfo.series.name} #${bookInfo.seriesInstance})`\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span>{`Start your review of ${bookInfo.title} ${\n\t\t\t\t\t\t\tbookInfo.series !== undefined\n\t\t\t\t\t\t\t\t? `(${bookInfo.series.name} #${bookInfo.seriesInstance})`\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}`}</span>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"start-your-review-section-right-stars-write\">\n\t\t\t\t\t\t<div className=\"start-your-review-section-right-stars\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\texhibitedStarRating > 0\n\t\t\t\t\t\t\t\t\t\t? 'interactive-star big on'\n\t\t\t\t\t\t\t\t\t\t: 'interactive-star big'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(1)}\n\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => rateBook(1)}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\texhibitedStarRating > 1\n\t\t\t\t\t\t\t\t\t\t? 'interactive-star big on'\n\t\t\t\t\t\t\t\t\t\t: 'interactive-star big'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(2)}\n\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => rateBook(2)}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\texhibitedStarRating > 2\n\t\t\t\t\t\t\t\t\t\t? 'interactive-star big on'\n\t\t\t\t\t\t\t\t\t\t: 'interactive-star big'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(3)}\n\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => rateBook(3)}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\texhibitedStarRating > 3\n\t\t\t\t\t\t\t\t\t\t? 'interactive-star big on'\n\t\t\t\t\t\t\t\t\t\t: 'interactive-star big'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(4)}\n\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => rateBook(4)}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\texhibitedStarRating > 4\n\t\t\t\t\t\t\t\t\t\t? 'interactive-star big on'\n\t\t\t\t\t\t\t\t\t\t: 'interactive-star big'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(5)}\n\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => rateBook(5)}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\t\t\tbookInfo.id\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tclassName=\"write-review-button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst reviewList = loaded\n\t\t? bookInfo.reviews\n\t\t\t\t.filter((review) => {\n\t\t\t\t\tif (reviewStars !== 0) {\n\t\t\t\t\t\treturn review.rating === reviewStars;\n\t\t\t\t\t}\n\t\t\t\t\tif (!showAllEditionsForReviews) {\n\t\t\t\t\t\treturn review.edition === bookInfo.id;\n\t\t\t\t\t}\n\t\t\t\t\tif (searchReviewFilter.length > 0) {\n\t\t\t\t\t\treturn review.text.includes(searchReviewFilter);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t})\n\t\t\t\t.sort((first, second) => {\n\t\t\t\t\tif (sortOrder === 'oldest') {\n\t\t\t\t\t\treturn first.date - second.date;\n\t\t\t\t\t} else if (sortOrder === 'newest') {\n\t\t\t\t\t\treturn second.date - first.date;\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t})\n\t\t\t\t.map((review, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"book-page-review-instance\" key={index}>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName=\"book-page-review-instance-profile-image\"\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\treview.profileImage !== undefined\n\t\t\t\t\t\t\t\t\t\t? review.profileImage\n\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\talt={review.userName}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"book-page-review-instance-right\">\n\t\t\t\t\t\t\t\t<div className=\"book-page-review-instance-right-top-line\">\n\t\t\t\t\t\t\t\t\t<span className=\"book-page-review-instance-user-rated\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\treview.user,\n\t\t\t\t\t\t\t\t\t\t\t\treview.userName.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{review.userName}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span>&nbsp;rated it</span>\n\t\t\t\t\t\t\t\t\t\t<div className=\"review-instance-stars\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\treview.rating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\treview.rating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\treview.rating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\treview.rating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\treview.rating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-page-review-instance-date\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateReviewPage(review.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(review.date, 'MMM dd, yyyy')}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{review.recommendsItFor !== undefined ? (\n\t\t\t\t\t\t\t\t\t<span className=\"recommends-it-for\">\n\t\t\t\t\t\t\t\t\t\tRecommends it for:{' '}\n\t\t\t\t\t\t\t\t\t\t<span className=\"recommends-it-for-answer\">\n\t\t\t\t\t\t\t\t\t\t\t{review.recommendsItFor}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t{review.shelves !== undefined ? (\n\t\t\t\t\t\t\t\t\t<span className=\"book-page-review-instance-shelves\">\n\t\t\t\t\t\t\t\t\t\tShelves:{' '}\n\t\t\t\t\t\t\t\t\t\t<span className=\"book-page-review-instance-shelves-answer\">\n\t\t\t\t\t\t\t\t\t\t\t{review.shelves.map((shelf, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treview.user,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treview.userName.split(' ')[0],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[shelf]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{shelf}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{index !== review.shelves.length - 1 ? ', ' : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div className=\"review-main-body-container\">\n\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\treviewsShowingMore.includes(index)\n\t\t\t\t\t\t\t\t\t\t\t\t? 'book-page-review-main-body full'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'book-page-review-main-body'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{review.text}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t{reviewsHaveButton[index] ? (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"review-show-more\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetReviewsShowingMore((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (previous.includes(index)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn previous.filter((item) => item !== index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn previous.concat([index]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{reviewsShowingMore.includes(index)\n\t\t\t\t\t\t\t\t\t\t\t\t? '(less)'\n\t\t\t\t\t\t\t\t\t\t\t\t: '...more'}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"book-page-review-bottom\">\n\t\t\t\t\t\t\t\t\t{review.numberOfLikes > 0 ? (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-page-review-likes\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateReviewLikesPage(\n\t\t\t\t\t\t\t\t\t\t\t\treview.id\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{review.numberOfLikes} likes\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t{review.numberOfLikes > 0 ? (\n\t\t\t\t\t\t\t\t\t\t<span className=\"black-dot\"></span>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-page-review-like-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\t\t\tawait Firebase.likeUnlikeReview(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\treview.id,\n\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tsetBookInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\t\treviews: previous.reviews.map((r) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (r.id !== review.id) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn r;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...r,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlikedByUser: !r.likedByUser,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{review.likedByUser ? 'Unlike' : 'Like'}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<span className=\"black-dot\"></span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-page-review-see-review\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateReviewPage(review.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tsee review\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t: null;\n\n\tconst bookPageCommunityReviews = loaded ? (\n\t\t<div className=\"book-page-community-reviews\">\n\t\t\t<div className=\"book-page-community-reviews-top\">\n\t\t\t\t<span className=\"book-page-community-reviews-title\">\n\t\t\t\t\tCOMMUNITY REVIEWS\n\t\t\t\t</span>\n\t\t\t\t<span className=\"book-page-community-reviews-showing\">\n\t\t\t\t\t{bookInfo.reviews.length === 0\n\t\t\t\t\t\t? 'Showing 0-0'\n\t\t\t\t\t\t: bookInfo.reviews.length < 30\n\t\t\t\t\t\t? `Showing 1-${bookInfo.reviews.length}`\n\t\t\t\t\t\t: 'Showing 1-30'}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"ratings-section\">\n\t\t\t\t<div className=\"ratings-section-top\">\n\t\t\t\t\t{generateBookPageRatingsArea(false)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"ratings-section-bottom\">\n\t\t\t\t\t<div className=\"ratings-section-bottom-left\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"ratings-section-bottom-left-wrapper\"\n\t\t\t\t\t\t\tonMouseOver={(_e) => {\n\t\t\t\t\t\t\t\tsetShowFiltersDialogBox(true);\n\t\t\t\t\t\t\t\tsetShowSortOrderDialogBox(false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonMouseLeave={(e) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\te.clientX >\n\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t\t\t'ratings-section-bottom-left-wrapper'\n\t\t\t\t\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t\t\t\t\t.getBoundingClientRect().left +\n\t\t\t\t\t\t\t\t\t\t\t400 ||\n\t\t\t\t\t\t\t\t\te.clientY >\n\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t\t\t'ratings-section-bottom-left-wrapper'\n\t\t\t\t\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t\t\t\t\t.getBoundingClientRect().bottom +\n\t\t\t\t\t\t\t\t\t\t\t15\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tsetShowFiltersDialogBox(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"ratings-section-bottom-left-filters-title\">\n\t\t\t\t\t\t\t\tFilters\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tshowFiltersDialogBox\n\t\t\t\t\t\t\t\t\t\t? 'reviews-filter-dialog-box'\n\t\t\t\t\t\t\t\t\t\t: 'reviews-filter-dialog-box hidden'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"dialog-box-tip\"></div>\n\t\t\t\t\t\t\t\t<div className=\"rating-filters\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"all-filter\"\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => setReviewStars(0)}\n\t\t\t\t\t\t\t\t\t>{`all (${bookInfo.reviews.length})`}</button>\n\t\t\t\t\t\t\t\t\t<span className=\"filter-separator\">|</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"five-star-filter\"\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => setReviewStars(5)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-stars\">5 stars </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-amount\">{`(${\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.reviews.filter((review) => review.rating === 5)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t\t\t\t\t\t})`}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<span className=\"filter-separator\">|</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"four-star-filter\"\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => setReviewStars(4)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-stars\">4 stars </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-amount\">{`(${\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.reviews.filter((review) => review.rating === 4)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t\t\t\t\t\t})`}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<span className=\"filter-separator\">|</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"three-star-filter\"\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => setReviewStars(3)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-stars\">3 stars </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-amount\">{`(${\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.reviews.filter((review) => review.rating === 3)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t\t\t\t\t\t})`}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<span className=\"filter-separator\">|</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"two-star-filter\"\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => setReviewStars(2)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-stars\">2 stars </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-amount\">{`(${\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.reviews.filter((review) => review.rating === 2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t\t\t\t\t\t})`}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<span className=\"filter-separator\">|</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"one-star-filter\"\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => setReviewStars(1)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-stars\">1 star </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"filter-button-amount\">{`(${\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.reviews.filter((review) => review.rating === 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t\t\t\t\t\t})`}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"edition-filters\">\n\t\t\t\t\t\t\t\t\t<span className=\"edition-filters-title\">editions:</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"all-editions-filter\"\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => setShowAllEditionsForReviews(true)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tall\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<span className=\"filter-separator\">|</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"this-edition-filter\"\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => setShowAllEditionsForReviews(false)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tthis edition\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span className=\"separator\">|</span>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonMouseOver={(_e) => {\n\t\t\t\t\t\t\t\tsetShowSortOrderDialogBox(true);\n\t\t\t\t\t\t\t\tsetShowFiltersDialogBox(false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonMouseLeave={(e) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\te.clientX >\n\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t\t\t'ratings-section-bottom-left-wrapper-two'\n\t\t\t\t\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t\t\t\t\t.getBoundingClientRect().right +\n\t\t\t\t\t\t\t\t\t\t\t10 ||\n\t\t\t\t\t\t\t\t\te.clientY >\n\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t\t\t'ratings-section-bottom-left-wrapper'\n\t\t\t\t\t\t\t\t\t\t\t)[0]\n\t\t\t\t\t\t\t\t\t\t\t.getBoundingClientRect().bottom +\n\t\t\t\t\t\t\t\t\t\t\t10\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tsetShowSortOrderDialogBox(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"ratings-section-bottom-left-wrapper-two\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"ratings-section-bottom-left-sort-title\">\n\t\t\t\t\t\t\t\tSort order\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tshowSortOrderDialogBox\n\t\t\t\t\t\t\t\t\t\t? 'reviews-sort-dialog-box'\n\t\t\t\t\t\t\t\t\t\t: 'reviews-sort-dialog-box hidden'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"dialog-box-tip\"></div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"sort-review-default-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => setSortOrder('default')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDefault\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<span className=\"filter-separator\">|</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"sort-review-newest-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => setSortOrder('newest')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tNewest\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<span className=\"filter-separator\">|</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"sort-review-oldest-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => setSortOrder('oldest')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tOldest\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"ratings-section-bottom-right\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"book-page-review-search-box\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={reviewSearchInput}\n\t\t\t\t\t\t\tonChange={(e) => setReviewSearchInput(e.target.value)}\n\t\t\t\t\t\t\tplaceholder=\"Search review text\"\n\t\t\t\t\t\t\tdisabled={reviewStars > 0 || !showAllEditionsForReviews}\n\t\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\t\tif (e.keyCode === 13 && reviewSearchInput.length > 0) {\n\t\t\t\t\t\t\t\t\tsetSearchReviewFilter(reviewSearchInput);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"review-search-box-magnifying-glass\"\n\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\tif (reviewSearchInput.length > 0) {\n\t\t\t\t\t\t\t\t\tsetSearchReviewFilter(reviewSearchInput);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"reviews-section\">\n\t\t\t\t{bookInfo.reviews.filter((review) => {\n\t\t\t\t\tif (user.UID !== undefined) {\n\t\t\t\t\t\treturn review.user === user.UID;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}).length > 0\n\t\t\t\t\t? null\n\t\t\t\t\t: startYourReviewSection}\n\t\t\t\t<div className=\"book-page-reviews-section-review-list\">\n\t\t\t\t\t{reviewStars > 0 ||\n\t\t\t\t\t!showAllEditionsForReviews ||\n\t\t\t\t\tsearchReviewFilter.length > 0 ? (\n\t\t\t\t\t\treviewStars > 0 && reviewList.length === 0 ? (\n\t\t\t\t\t\t\t<span className=\"review-filter-message\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tThere are 0 reviews rated <b>{reviewStars} stars</b>.{' '}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"clear-review-filters-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetReviewStars(0);\n\t\t\t\t\t\t\t\t\t\tsetShowAllEditionsForReviews(true);\n\t\t\t\t\t\t\t\t\t\tsetSearchReviewFilter('');\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tClear filters\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : reviewStars > 0 ? (\n\t\t\t\t\t\t\t<span className=\"review-filter-message\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tDisplaying 1-\n\t\t\t\t\t\t\t\t\t{reviewList.length >= 30 ? 30 : reviewList.length} of{' '}\n\t\t\t\t\t\t\t\t\t{reviewList.length} reviews rated <b>{reviewStars} stars</b>,\n\t\t\t\t\t\t\t\t\tsorted by{' '}\n\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t{sortOrder.charAt(0).toUpperCase() + sortOrder.slice(1)}\n\t\t\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t\t\t.{' '}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"clear-review-filters-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetReviewStars(0);\n\t\t\t\t\t\t\t\t\t\tsetShowAllEditionsForReviews(true);\n\t\t\t\t\t\t\t\t\t\tsetSearchReviewFilter('');\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tClear filters\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : !showAllEditionsForReviews && reviewList.length === 0 ? (\n\t\t\t\t\t\t\t<span className=\"review-filter-message\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tThere are 0 reviews for <b>this edition</b>.{' '}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"clear-review-filters-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetReviewStars(0);\n\t\t\t\t\t\t\t\t\t\tsetShowAllEditionsForReviews(true);\n\t\t\t\t\t\t\t\t\t\tsetSearchReviewFilter('');\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tClear filters\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : !showAllEditionsForReviews ? (\n\t\t\t\t\t\t\t<span className=\"review-filter-message\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tDisplaying 1-\n\t\t\t\t\t\t\t\t\t{reviewList.length >= 30 ? 30 : reviewList.length} of{' '}\n\t\t\t\t\t\t\t\t\t{reviewList.length} reviews for <b>this edition</b>, sorted by{' '}\n\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t{sortOrder.charAt(0).toUpperCase() + sortOrder.slice(1)}\n\t\t\t\t\t\t\t\t\t</b>\n\t\t\t\t\t\t\t\t\t.{' '}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"clear-review-filters-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetReviewStars(0);\n\t\t\t\t\t\t\t\t\t\tsetShowAllEditionsForReviews(true);\n\t\t\t\t\t\t\t\t\t\tsetSearchReviewFilter('');\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tClear filters\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : searchReviewFilter.length > 0 && reviewList.length === 0 ? (\n\t\t\t\t\t\t\t<span className=\"review-filter-message\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tThere are 0 reviews that mention <b>\"{searchReviewFilter}\"</b>\n\t\t\t\t\t\t\t\t\t.{' '}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"clear-review-filters-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetReviewStars(0);\n\t\t\t\t\t\t\t\t\t\tsetShowAllEditionsForReviews(true);\n\t\t\t\t\t\t\t\t\t\tsetSearchReviewFilter('');\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tClear filters\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"review-filter-message\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tDisplaying 1-\n\t\t\t\t\t\t\t\t\t{reviewList.length >= 30 ? 30 : reviewList.length} of{' '}\n\t\t\t\t\t\t\t\t\t{reviewList.length} reviews that mention{' '}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<b>\"{searchReviewFilter}\"</b>, sorted by{' '}\n\t\t\t\t\t\t\t\t<b>{sortOrder.charAt(0).toUpperCase() + sortOrder.slice(1)}</b>.{' '}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"clear-review-filters-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetReviewStars(0);\n\t\t\t\t\t\t\t\t\t\tsetShowAllEditionsForReviews(true);\n\t\t\t\t\t\t\t\t\t\tsetSearchReviewFilter('');\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tClear filters\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : null}\n\t\t\t\t\t{reviewList.length > 0 ? (\n\t\t\t\t\t\treviewList\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"no-matching-reviews\">\n\t\t\t\t\t\t\t<span>No matching reviews.</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageMainContentLeft = (\n\t\t<div className=\"book-page-main-content-left\">\n\t\t\t{bookPageBookInfo}\n\t\t\t{bookPageListsWithBook}\n\t\t\t{bookPageCommunityReviews}\n\t\t</div>\n\t);\n\n\tconst bookPageMainContentRightTop = loaded ? (\n\t\t<div className=\"book-page-main-content-right-top\">\n\t\t\t<button\n\t\t\t\tclassName=\"recommend-book-button\"\n\t\t\t\tonClick={(_e) => {\n\t\t\t\t\tsetLoadingFriends(true);\n\t\t\t\t\tsetShowRecommendWindow(true);\n\t\t\t\t}}\n\t\t\t\tref={recommendItButton}\n\t\t\t>\n\t\t\t\tRecommend it\n\t\t\t</button>\n\t\t\t<span className=\"book-page-main-content-right-top-separator\">|</span>\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateBookStatsPage(bookInfo.id)}\n\t\t\t\tclassName=\"book-page-book-stats-a\"\n\t\t\t>\n\t\t\t\tStats\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageReadersAlsoEnjoyedSection =\n\t\tloaded && bookInfo.alsoEnjoyedBooks.length > 0 ? (\n\t\t\t<div className=\"book-page-readers-also-enjoyed\">\n\t\t\t\t<div className=\"book-page-readers-also-enjoyed-main\">\n\t\t\t\t\t<span>READERS ALSO ENJOYED</span>\n\t\t\t\t\t<div className=\"book-page-readers-also-enjoyed-selection\">\n\t\t\t\t\t\t<div className=\"book-page-readers-also-enjoyed-main-list\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"book-page-readers-also-enjoyed-main-list-contents\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\ttransform: `translate(${readersEnjoyedListTranslation}px)`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{bookInfo.alsoEnjoyedBooks.map((book, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-page-also-enjoyed-book-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\treadersEnjoyedListTranslation < 0\n\t\t\t\t\t\t\t\t\t? 'book-page-readers-also-enjoyed-back-button'\n\t\t\t\t\t\t\t\t\t: 'book-page-readers-also-enjoyed-back-button hidden'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\tsetReadersEnjoyedListTranslation((previousValue) => {\n\t\t\t\t\t\t\t\t\tconst forwardButton = document.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t'book-page-readers-also-enjoyed-forward-button'\n\t\t\t\t\t\t\t\t\t)[0];\n\t\t\t\t\t\t\t\t\tif (previousValue < -250) {\n\t\t\t\t\t\t\t\t\t\tforwardButton.classList.remove('hidden');\n\t\t\t\t\t\t\t\t\t\treturn previousValue + 250;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={'book-page-readers-also-enjoyed-forward-button'}\n\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\tsetReadersEnjoyedListTranslation((previousValue) => {\n\t\t\t\t\t\t\t\t\tconst forwardButton = document.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t'book-page-readers-also-enjoyed-forward-button'\n\t\t\t\t\t\t\t\t\t)[0];\n\t\t\t\t\t\t\t\t\tconst mainListWidth = document.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t'book-page-readers-also-enjoyed-main-list'\n\t\t\t\t\t\t\t\t\t)[0].offsetWidth;\n\t\t\t\t\t\t\t\t\tconst mainListContentsWidth = document.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t'book-page-readers-also-enjoyed-main-list-contents'\n\t\t\t\t\t\t\t\t\t)[0].scrollWidth;\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tpreviousValue === 0 ||\n\t\t\t\t\t\t\t\t\t\tpreviousValue > -mainListContentsWidth + 250 + mainListWidth\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn previousValue - 250;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tforwardButton.classList.add('hidden');\n\t\t\t\t\t\t\t\t\t\treturn -mainListContentsWidth + mainListWidth;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"book-page-readers-also-enjoyed-similar-books-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateSimilarBooksPage(\n\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\tbookInfo.title\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tSee similar books...\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst bookPageGenres = loaded ? (\n\t\t<div className=\"book-page-genres\">\n\t\t\t<div className=\"book-page-genres-main\">\n\t\t\t\t<div className=\"book-page-genres-title-area\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-genres-title-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookTopShelvesPage(\n\t\t\t\t\t\t\tbookInfo.id\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tGENRES\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-page-genres-list\">\n\t\t\t\t\t{bookInfo.genres.map((genre, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tindex === bookInfo.genres.length - 1\n\t\t\t\t\t\t\t\t\t\t? 'book-page-genres-list-cell last'\n\t\t\t\t\t\t\t\t\t\t: 'book-page-genres-list-cell'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(genre.genre)}\n\t\t\t\t\t\t\t\t\tclassName=\"genre-name\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{genre.genre.charAt(0).toUpperCase() + genre.genre.slice(1)}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookGenreShelfPage(\n\t\t\t\t\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\t\t\t\t\tbookInfo.title,\n\t\t\t\t\t\t\t\t\t\tgenre.genre\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tclassName=\"user-count\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{genre.userCount} users\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\tclassName=\"book-page-genres-see-top-shelves\"\n\t\t\t\thref={Firebase.pageGenerator.generateBookTopShelvesPage(bookInfo.id)}\n\t\t\t>\n\t\t\t\tSee top shelves...\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageAuthorAboutSection = loaded ? (\n\t\t<div className=\"author-about-section\">\n\t\t\t<div className=\"author-about-section-title-area\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"author-about-section-title-a\"\n\t\t\t\t\thref={bookInfo.authorPages[0]}\n\t\t\t\t>{`ABOUT ${bookInfo.authorNames[0].toUpperCase()}`}</a>\n\t\t\t</div>\n\t\t\t<div className=\"author-about-section-preview\">\n\t\t\t\t<div className=\"author-about-section-preview-top\">\n\t\t\t\t\t<a href={bookInfo.authorPages[0]}>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\tbookInfo.mainAuthorPicture !== undefined\n\t\t\t\t\t\t\t\t\t? bookInfo.mainAuthorPicture\n\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt={bookInfo.authorNames[0]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div className=\"author-about-section-preview-right\">\n\t\t\t\t\t\t<div className=\"author-about-section-preview-name\">\n\t\t\t\t\t\t\t<a href={bookInfo.authorPages[0]}>{bookInfo.authorNames[0]}</a>\n\t\t\t\t\t\t\t{bookInfo.authorIsMember ? (\n\t\t\t\t\t\t\t\t<div className=\"goodreads-seal\"></div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span className=\"author-about-section-preview-follower-count\">\n\t\t\t\t\t\t\t{bookInfo.authorFollowerCount} followers\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tloadingFollowAuthor\n\t\t\t\t\t\t\t\t\t? 'book-page-follow-author-button loading'\n\t\t\t\t\t\t\t\t\t: 'book-page-follow-author-button'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonMouseOver={(_e) => {\n\t\t\t\t\t\t\t\tif (bookInfo.userIsFollowingAuthor) {\n\t\t\t\t\t\t\t\t\tdocument.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t'book-page-follow-author-button'\n\t\t\t\t\t\t\t\t\t)[0].innerHTML = 'Unfollow';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonMouseOut={(_e) => {\n\t\t\t\t\t\t\t\tif (bookInfo.userIsFollowingAuthor) {\n\t\t\t\t\t\t\t\t\tdocument.getElementsByClassName(\n\t\t\t\t\t\t\t\t\t\t'book-page-follow-author-button'\n\t\t\t\t\t\t\t\t\t)[0].innerHTML = 'Following';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\tsetLoadingFollowAuthor(true);\n\t\t\t\t\t\t\t\tawait Firebase.followUnfollowAuthor(\n\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\tbookInfo.mainAuthorId,\n\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsetLoadingFollowAuthor(false);\n\t\t\t\t\t\t\t\tsetBookInfo((previous) => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\tuserIsFollowingAuthor: !previous.userIsFollowingAuthor,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{bookInfo.userIsFollowingAuthor ? 'Following' : 'Follow Author'}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"author-about-section-about-wrapper\">\n\t\t\t\t\t{bookInfo.mainAuthorAbout !== undefined ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tauthorAboutShowMore\n\t\t\t\t\t\t\t\t\t? 'author-about-section-about-full'\n\t\t\t\t\t\t\t\t\t: 'author-about-section-about'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<p className=\"main-author-about-p\" ref={authorAboutP}>\n\t\t\t\t\t\t\t\t{bookInfo.mainAuthorAbout}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{authorAboutHeight > 162 ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"author-about-show-more\"\n\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\tsetAuthorAboutShowMore((previous) => !previous);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{authorAboutShowMore ? '(less)' : '...more'}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageBooksByAuthorSection = loaded ? (\n\t\t<div className=\"book-page-books-by-author\">\n\t\t\t<div className=\"book-page-books-by-author-main\">\n\t\t\t\t<div className=\"book-page-books-by-author-main-title-area\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-books-by-author-a\"\n\t\t\t\t\t\thref={bookInfo.booksByAuthorPage}\n\t\t\t\t\t>{`BOOKS BY ${bookInfo.authorNames[0].toUpperCase()}`}</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-page-books-by-author-main-list\">\n\t\t\t\t\t{bookInfo.publishedBooksByAuthor.map((book, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a key={index} href={book.page}>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={book.id}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\tclassName=\"book-page-books-by-author-more\"\n\t\t\t\thref={bookInfo.booksByAuthorPage}\n\t\t\t>\n\t\t\t\tMore...\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageArticlesFeaturingBook =\n\t\tloaded && bookInfo.articles.length > 0 ? (\n\t\t\t<div className=\"book-page-articles\">\n\t\t\t\t<div className=\"book-page-articles-title-area\">\n\t\t\t\t\t<span className=\"book-page-articles-title\">\n\t\t\t\t\t\tARTICLES FEATURING THIS BOOK\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-page-articles-article\">\n\t\t\t\t\t{bookInfo.articles[0].image !== undefined ? (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"book-page-article-image\"\n\t\t\t\t\t\t\tsrc={bookInfo.articles[0].image}\n\t\t\t\t\t\t\talt={bookInfo.articles[0].title}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-article-title-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\tbookInfo.articles[0].id,\n\t\t\t\t\t\t\tbookInfo.articles[0].title\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{bookInfo.articles[0].title}\n\t\t\t\t\t</a>\n\t\t\t\t\t<p className=\"book-page-article-content\">\n\t\t\t\t\t\t{bookInfo.articles[0].content}\n\t\t\t\t\t</p>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-article-read-more-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\tbookInfo.articles[0].id,\n\t\t\t\t\t\t\tbookInfo.articles[0].title\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tRead more...\n\t\t\t\t\t</a>\n\t\t\t\t\t<div className=\"book-page-articles-article-bottom\">\n\t\t\t\t\t\t<span>{`${bookInfo.articles[0].likeCount} likes`}</span>\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<span>{`${bookInfo.articles[0].commentCount} comments`}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst bookPageQuizQuestionIndex = loaded\n\t\t? Math.floor(Math.random() * bookInfo.quizQuestions.length)\n\t\t: -1;\n\n\tconst bookPageQuizQuestion = loaded ? (\n\t\tbookInfo.quizQuestions.length > 0 ? (\n\t\t\t<div className=\"book-page-quiz-section\">\n\t\t\t\t<div className=\"book-page-quiz-section-title-area\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-quiz-question-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookTriviaPage(\n\t\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\t\tbookInfo.title\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tQUIZ QUESTION\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-page-quiz-question-main\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-quiz-title-a\"\n\t\t\t\t\t\thref={bookInfo.quizQuestions[bookPageQuizQuestionIndex].quizPage}\n\t\t\t\t\t>\n\t\t\t\t\t\t{bookInfo.quizQuestions[bookPageQuizQuestionIndex].quizTitle}\n\t\t\t\t\t</a>\n\t\t\t\t\t<span className=\"book-page-quiz-description\">\n\t\t\t\t\t\t{bookInfo.quizQuestions[bookPageQuizQuestionIndex].quizDescription}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"book-page-quiz-question-main-actual-question\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{bookInfo.quizQuestions[bookPageQuizQuestionIndex].question}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{bookInfo.quizQuestions[bookPageQuizQuestionIndex].options.map(\n\t\t\t\t\t\t\t(option, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"book-page-quiz-answer\" key={index}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid={`quiz-radio-${index}`}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={quizQuestionOptionSelected === index}\n\t\t\t\t\t\t\t\t\t\t\tvalue={option}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(_e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tsetQuizQuestionOptionSelected(index);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label htmlFor={`quiz-radio-${index}`}>{option}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"book-page-quiz-question-take\"\n\t\t\t\t\thref={bookInfo.quizQuestions[bookPageQuizQuestionIndex].quizPage}\n\t\t\t\t>\n\t\t\t\t\tTake this quizz...\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<div className=\"book-page-quiz-section\">\n\t\t\t\t<div className=\"book-page-quiz-section-title-area\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-quiz-question-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookTriviaPage(\n\t\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\t\tbookInfo.title\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`QUIZZES ABOUT ${bookInfo.title.toUpperCase()}:...`}</a>\n\t\t\t\t</div>\n\t\t\t\t<span className=\"book-page-no-quizzes-yet-span\">\n\t\t\t\t\tNo quizzes yet.{' '}\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-add-quizzes-now-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookTriviaPage(\n\t\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\t\tbookInfo.title\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tAdd some now \n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t)\n\t) : null;\n\n\tconst bookPageQuotes =\n\t\tloaded && bookInfo.quotes.length > 0 ? (\n\t\t\t<div className=\"book-page-quotes-section\">\n\t\t\t\t<div className=\"book-page-quotes-section-title-area\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-page-quotes-section-a\"\n\t\t\t\t\t\thref={bookInfo.quotesPage}\n\t\t\t\t\t>{`QUOTES FROM ${bookInfo.title.toUpperCase()}:...`}</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-info-quotes-section-main\">\n\t\t\t\t\t{bookInfo.quotes.map((quote, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<span className=\"book-page-quotes-section-quote\" key={index}>\n\t\t\t\t\t\t\t\t{`\"${quote.text}\"  `}\n\t\t\t\t\t\t\t\t<a href={quote.page}>{`${quote.likeCount} likes`}</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<a className=\"book-info-quotes-more-quotes\" href={bookInfo.quotesPage}>\n\t\t\t\t\tMore quotes...\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst bookPageMainContentRight = (\n\t\t<div className=\"book-page-main-content-right\">\n\t\t\t{bookPageMainContentRightTop}\n\t\t\t{bookPageReadersAlsoEnjoyedSection}\n\t\t\t{bookPageGenres}\n\t\t\t{bookPageAuthorAboutSection}\n\t\t\t{bookPageBooksByAuthorSection}\n\t\t\t{bookPageArticlesFeaturingBook}\n\t\t\t{bookPageQuizQuestion}\n\t\t\t{bookPageQuotes}\n\t\t</div>\n\t);\n\n\tconst bookPageMainContent = loaded ? (\n\t\t<div className=\"book-page-main-content\">\n\t\t\t{bookPageMainContentLeft}\n\t\t\t{bookPageMainContentRight}\n\t\t</div>\n\t) : null;\n\n\tconst bookPageEnlargingCover = loaded ? (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tshowEnlargeCoverWindow\n\t\t\t\t\t? 'cover-picture-box'\n\t\t\t\t\t: 'cover-picture-box hidden'\n\t\t\t}\n\t\t\tref={enlargeCoverWindow}\n\t\t>\n\t\t\t<button\n\t\t\t\tclassName=\"window-close-button\"\n\t\t\t\tonClick={(_e) => setShowEnlargeCoverWindow(false)}\n\t\t\t></button>\n\t\t\t<img\n\t\t\t\tsrc={bookInfo.cover}\n\t\t\t\talt={bookInfo.title}\n\t\t\t\tclassName=\"book-info-book-cover-enlarged\"\n\t\t\t></img>\n\t\t</div>\n\t) : null;\n\n\tconst bookPageRecommendToFriends = loaded ? (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tshowRecommendWindow ? 'recommend-window' : 'recommend-window hidden'\n\t\t\t}\n\t\t\tref={recommendWindow}\n\t\t>\n\t\t\t<button\n\t\t\t\tclassName=\"window-close-button\"\n\t\t\t\tonClick={(_e) => setShowRecommendWindow(false)}\n\t\t\t></button>\n\t\t\t<div className=\"content\">\n\t\t\t\t<div className=\"recommend-window-top-area\">\n\t\t\t\t\t<div className=\"recommend-window-top-area-left\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tRecommend <i>{bookInfo.title}</i> to your friends\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div className=\"searchbox-area\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\tplaceholder=\"Search by name\"\n\t\t\t\t\t\t\t\tvalue={recommendWindowSearchBox}\n\t\t\t\t\t\t\t\tonChange={(e) => setRecommendWindowSearchBox(e.target.value)}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\trecommendWindowSearchBox.length > 0\n\t\t\t\t\t\t\t\t\t\t? 'clear-button'\n\t\t\t\t\t\t\t\t\t\t: 'clear-button hidden'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tsetRecommendWindowSearchBox('');\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"recommend-window-top-area-right\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\tbookInfo.cover !== undefined\n\t\t\t\t\t\t\t\t\t? bookInfo.cover\n\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt={bookInfo.title}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"recommend-window-bottom-area\">\n\t\t\t\t\t{!loadingFriends ? (\n\t\t\t\t\t\tfriendsInfo\n\t\t\t\t\t\t\t.filter((friendInfo) =>\n\t\t\t\t\t\t\t\tfriendInfo.firstName.includes(recommendWindowSearchBox)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((friend, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"recommend-window-friend-info\" key={index}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"recommend-window-friend-info-left\">\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.profileImage !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? friend.profileImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\talt={friend.firstName}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"recommend-window-friend-info-right\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"recommend-window-friend-info-right-top\">\n\t\t\t\t\t\t\t\t\t\t\t\t{!recommendWindowAddingMessages[index] ||\n\t\t\t\t\t\t\t\t\t\t\t\trecommendWindowSentStatuses[index] ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"friend-name-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{friend.firstName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"friend-recommend-message-input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={`${friend.firstName} would like this book because...`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={recommendWindowMessages[index]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst newValue = event.target.value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetRecommendWindowMessages((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn previous.map((message, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn newValue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn message;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"recommend-window-friend-info-right-bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"recommend-to-friend-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!recommendWindowSentStatuses[index]) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.recommendBook(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendWindowMessages[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetRecommendWindowSentStatuses((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn previous.map((status, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !status;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn status;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tRecommend\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t{!recommendWindowSentStatuses[index] ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"clear-message-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetRecommendWindowAddingMessages((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendWindowAddingMessages[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'clear message'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'add message'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{recommendWindowSentStatuses[index] ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"recommended-message-area\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"check-banner\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Recommended</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"loading-spinner\"\n\t\t\t\t\t\t\tsrc={'https://s.gr-assets.com/assets/spinner.gif'}\n\t\t\t\t\t\t\talt=\"Loading\"\n\t\t\t\t\t\t></img>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"book-page\">\n\t\t\t<TopBar />\n\t\t\t{bookPageMainContent}\n\t\t\t{bookPageEnlargingCover}\n\t\t\t{bookPageRecommendToFriends}\n\t\t\t<HomePageFootBar />\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tshowEnlargeCoverWindow || showRecommendWindow\n\t\t\t\t\t\t? 'page-mask'\n\t\t\t\t\t\t: 'page-mask hidden'\n\t\t\t\t}\n\t\t\t></div>\n\t\t</div>\n\t);\n};\n\nexport default BookPage;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Firebase from '../../Firebase';\nimport '../styles/Authentication/ForgotPasswordPage.css';\n\nconst ForgotPasswordPage = (props) => {\n\tconst history = useHistory();\n\tconst [email, setEmail] = useState('');\n\n\treturn (\n\t\t<div className=\"sign-in-up-page\" id=\"forgot-password-page\">\n\t\t\t<a className=\"sign-in-up-page-home-link\" href=\"/\">\n\t\t\t\t<img\n\t\t\t\t\tsrc=\"https://www.goodreads.com/assets/layout/goodreads_logo_324-a908b923dc3ed9b7a13f3da4d1ffb2df.png\"\n\t\t\t\t\talt=\"Goodreads\"\n\t\t\t\t/>\n\t\t\t</a>\n\t\t\t<div className=\"sign-in-up-page-main-card\">\n\t\t\t\t<div className=\"sign-in-up-page-main-card-top\">\n\t\t\t\t\t<h2>Reset your password.</h2>\n\t\t\t\t</div>\n\t\t\t\t<form className=\"sign-in-up-page-main-card-center\">\n\t\t\t\t\t<label htmlFor=\"sign-in-page-email\">Email address</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tclassName=\"sign-in-up-page-email\"\n\t\t\t\t\t\tid=\"sign-in-page-email\"\n\t\t\t\t\t\tplaceholder=\"you@yours.com\"\n\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<div className=\"sign-in-up-page-main-card-center-bottom-buttons\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"sign-in-up-page-sign-in\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tawait Firebase.resetPassword(email);\n\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tReset password\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<a className=\"sign-in-up-page-forgot-password\" href=\"/user/sign_in\">\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t\t<div id=\"forgot-password-not-a-member\">\n\t\t\t\t<span>Not a member?</span>\n\t\t\t\t<a className=\"sign-in-up-page-sign-in\" href=\"/user/sign_up\">\n\t\t\t\t\tSign up\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div className=\"sign-in-up-page-bottom-section\"></div>\n\t\t</div>\n\t);\n};\n\nexport default ForgotPasswordPage;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { format, eachDayOfInterval, isSameDay, subDays } from 'date-fns';\nimport Firebase from '../../Firebase';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst LinearChart = (props) => {\n\tconst [statusUpdates, setStatusUpdates] = useState([]);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [clickCircle, setClickCircle] = useState(null);\n\tconst [hoverCircle, setHoverCircle] = useState(null);\n\tconst [toolTip, setToolTip] = useState(null);\n\tconst [hoveringAddedPath, setHoveringAddedPath] = useState(false);\n\tconst [hoveringRatingsPath, setHoveringRatingsPath] = useState(false);\n\tconst [hoveringReviewsPath, setHoveringReviewsPath] = useState(false);\n\tconst [hoveringToReadPath, setHoveringToReadPath] = useState(false);\n\tconst [tableVisible, setTableVisible] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst getStatusInfo = async () => {\n\t\t\tconst statusUpdateObjs = props.allEditions\n\t\t\t\t? await trackPromise(\n\t\t\t\t\t\tFirebase.queryStatusUpdatesForRootBook(props.bookId)\n\t\t\t\t  )\n\t\t\t\t: await trackPromise(Firebase.queryStatusUpdatesForBook(props.bookId));\n\t\t\tsetStatusUpdates(statusUpdateObjs);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetStatusInfo();\n\t}, [props.bookId, props.allEditions]);\n\n\tconst interval = { start: subDays(new Date(), 170), end: new Date() };\n\tconst addedUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\n\tconst ratingsUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'rate-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst reviewsUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'review-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst toReadUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\tupdate.shelf === 'to-read' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst maximumDailyUpdates = loaded\n\t\t? Math.max(\n\t\t\t\tMath.max(...addedUpdatesNumbers),\n\t\t\t\tMath.max(...ratingsUpdatesNumbers),\n\t\t\t\tMath.max(...reviewsUpdatesNumbers),\n\t\t\t\tMath.max(...toReadUpdatesNumbers)\n\t\t  )\n\t\t: 0;\n\tconst chartUnit = maximumDailyUpdates !== 0 ? 279 / maximumDailyUpdates : 0;\n\n\tconst addedPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst ratingsPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'rate-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst reviewsPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'review-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst toReadPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\tupdate.shelf === 'to-read' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst addedPathDefinition = addedPathDefinitionCoordinates.reduce(\n\t\t(previous, current, currentIndex) => {\n\t\t\tif (currentIndex === 0) {\n\t\t\t\treturn 'M ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t} else {\n\t\t\t\treturn previous + 'L ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t}\n\t\t},\n\t\t''\n\t);\n\n\tconst ratingsPathDefinition = ratingsPathDefinitionCoordinates.reduce(\n\t\t(previous, current, currentIndex) => {\n\t\t\tif (currentIndex === 0) {\n\t\t\t\treturn 'M ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t} else {\n\t\t\t\treturn previous + 'L ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t}\n\t\t},\n\t\t''\n\t);\n\n\tconst reviewsPathDefinition = reviewsPathDefinitionCoordinates.reduce(\n\t\t(previous, current, currentIndex) => {\n\t\t\tif (currentIndex === 0) {\n\t\t\t\treturn 'M ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t} else {\n\t\t\t\treturn previous + 'L ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t}\n\t\t},\n\t\t''\n\t);\n\n\tconst toReadPathDefinition = toReadPathDefinitionCoordinates.reduce(\n\t\t(previous, current, currentIndex) => {\n\t\t\tif (currentIndex === 0) {\n\t\t\t\treturn 'M ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t} else {\n\t\t\t\treturn previous + 'L ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t}\n\t\t},\n\t\t''\n\t);\n\n\tconst svgMouseOverHandler = (e) => {\n\t\tconst point = document.querySelector('svg').createSVGPoint();\n\t\tpoint.x = e.clientX;\n\t\tpoint.y = e.clientY;\n\t\tconst location = point.matrixTransform(\n\t\t\tdocument.querySelector('svg').getScreenCTM().inverse()\n\t\t);\n\t\tconst matchingAddedPathCoordinates = addedPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingRatingsPathCoordinates = ratingsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingReviewsPathCoordinates = reviewsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingToReadPathCoordinates = toReadPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tif (\n\t\t\t!(\n\t\t\t\tclickCircle !== null &&\n\t\t\t\tMath.abs(\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.getElementsByClassName('click-circle-inside')[0]\n\t\t\t\t\t\t.getAttribute('cx') - location.x\n\t\t\t\t) <= 5 &&\n\t\t\t\tMath.abs(\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.getElementsByClassName('click-circle-inside')[0]\n\t\t\t\t\t\t.getAttribute('cy') - location.y\n\t\t\t\t)\n\t\t\t) &&\n\t\t\t(matchingAddedPathCoordinates.length > 0 ||\n\t\t\t\tmatchingRatingsPathCoordinates.length > 0 ||\n\t\t\t\tmatchingReviewsPathCoordinates.length > 0 ||\n\t\t\t\tmatchingToReadPathCoordinates.length > 0)\n\t\t) {\n\t\t\tconst action =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? 'added'\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? 'ratings'\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? 'reviews'\n\t\t\t\t\t: 'to-read';\n\t\t\tconst color =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? '#3366cc'\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? '#dc3912'\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? '#ff9900'\n\t\t\t\t\t: '#109618';\n\t\t\tconst coordinates =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? matchingAddedPathCoordinates\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? matchingRatingsPathCoordinates\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? matchingReviewsPathCoordinates\n\t\t\t\t\t: matchingToReadPathCoordinates;\n\t\t\tconst date = eachDayOfInterval(interval)[\n\t\t\t\tMath.round((coordinates[0][0] - 57.1) / 3.2)\n\t\t\t];\n\t\t\tconst valueForDate =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? addedUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? ratingsUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? reviewsUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: toReadUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)];\n\t\t\tconst newHoverCircle = (\n\t\t\t\t<g>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"4.5\"\n\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tstrokeOpacity=\"0.25\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></circle>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"5.5\"\n\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></circle>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"6.5\"\n\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></circle>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"4\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill={color}\n\t\t\t\t\t></circle>\n\t\t\t\t</g>\n\t\t\t);\n\t\t\tsetHoverCircle(newHoverCircle);\n\t\t\tconst newToolTip = (\n\t\t\t\t<g className=\"chart-tooltip\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td={\n\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606 && coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 27.87}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 28.87}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 28.87}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 27.87}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 53.13}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 54.13}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 54.13}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 53.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 25.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 12.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 32.26}, ${coordinates[0][1] + 85.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 33.26}, ${coordinates[0][1] + 84.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 33.26}, ${coordinates[0][1] + 40.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 32.26}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 12.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 25.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 58.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 59.74}, ${coordinates[0][1] + 40.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 59.74}, ${coordinates[0][1] + 84.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 58.74}, ${coordinates[0][1] + 85.73}\n\t\t\t\t\t\t\tZ\t\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 62.612}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 63.612}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 63.612}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 62.612}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 18.388}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 19.388}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 19.388}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 18.388}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 26.312}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 13.742}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 53.34}, ${coordinates[0][1] + 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 54.34}, ${coordinates[0][1] + 57.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 54.34}, ${coordinates[0][1] + 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 53.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 26.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 13.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 27.66}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 28.66}, ${coordinates[0][1] + 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 28.66}, ${coordinates[0][1] + 57.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 27.66}, ${coordinates[0][1] + 58.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstroke=\"#cccccc\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></path>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 21.37\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 56.612\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] - 46.84\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 40.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 58.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 31.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tfontWeight=\"bold\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{format(date, 'yyyy-MM-dd')}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 21.37\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 56.612\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] - 46.84\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 23.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 75.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 48.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${action}:`}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] + 27.63\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 7.112\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 3.34\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 23.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 75.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 48.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tfontWeight=\"bold\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{valueForDate}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t);\n\t\t\tsetToolTip(newToolTip);\n\t\t} else {\n\t\t\tsetHoverCircle(null);\n\t\t\tsetToolTip(null);\n\t\t}\n\t};\n\n\tconst svgClickHandler = (e) => {\n\t\tconst point = document.querySelector('svg').createSVGPoint();\n\t\tpoint.x = e.clientX;\n\t\tpoint.y = e.clientY;\n\t\tconst location = point.matrixTransform(\n\t\t\tdocument.querySelector('svg').getScreenCTM().inverse()\n\t\t);\n\t\tconst matchingAddedPathCoordinates = addedPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingRatingsPathCoordinates = ratingsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingReviewsPathCoordinates = reviewsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingToReadPathCoordinates = toReadPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tif (\n\t\t\tmatchingAddedPathCoordinates.length > 0 ||\n\t\t\tmatchingRatingsPathCoordinates.length > 0 ||\n\t\t\tmatchingReviewsPathCoordinates.length > 0 ||\n\t\t\tmatchingToReadPathCoordinates.length > 0\n\t\t) {\n\t\t\tconst color =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? '#3366cc'\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? '#dc3912'\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? '#ff9900'\n\t\t\t\t\t: '#109618';\n\t\t\tconst coordinates =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? matchingAddedPathCoordinates\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? matchingRatingsPathCoordinates\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? matchingReviewsPathCoordinates\n\t\t\t\t\t: matchingToReadPathCoordinates;\n\t\t\tconst newClickCircle = (\n\t\t\t\t<g>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"6.5\"\n\t\t\t\t\t\tstroke={color}\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></circle>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tclassName=\"click-circle-inside\"\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"4\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill={color}\n\t\t\t\t\t></circle>\n\t\t\t\t</g>\n\t\t\t);\n\t\t\tsetHoverCircle(null);\n\t\t\tsetClickCircle(newClickCircle);\n\t\t}\n\t};\n\n\tconst svg = (\n\t\t<svg\n\t\t\twidth=\"620\"\n\t\t\theight=\"400\"\n\t\t\tonMouseOver={svgMouseOverHandler}\n\t\t\tonClick={svgClickHandler}\n\t\t>\n\t\t\t<defs id=\"abstract-renderer-id-0\">\n\t\t\t\t<clipPath id=\"abstract-renderer-id-1\">\n\t\t\t\t\t<rect x=\"55\" y=\"10\" width=\"550\" height=\"280\"></rect>\n\t\t\t\t</clipPath>\n\t\t\t\t<filter id=\"abstract-renderer-id-2\">\n\t\t\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"2\"></feGaussianBlur>\n\t\t\t\t\t<feOffset dx=\"1\" dy=\"1\"></feOffset>\n\t\t\t\t\t<feComponentTransfer>\n\t\t\t\t\t\t<feFuncA type=\"linear\" slope=\"0.1\"></feFuncA>\n\t\t\t\t\t</feComponentTransfer>\n\t\t\t\t\t<feMerge>\n\t\t\t\t\t\t<feMergeNode></feMergeNode>\n\t\t\t\t\t\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\n\t\t\t\t\t</feMerge>\n\t\t\t\t</filter>\n\t\t\t</defs>\n\t\t\t<rect\n\t\t\t\tx=\"0\"\n\t\t\t\ty=\"0\"\n\t\t\t\twidth=\"620\"\n\t\t\t\theight=\"400\"\n\t\t\t\tstroke=\"none\"\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\tfill=\"#ffffff\"\n\t\t\t></rect>\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tx=\"156\"\n\t\t\t\t\ty=\"365\"\n\t\t\t\t\twidth=\"347\"\n\t\t\t\t\theight=\"13\"\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t></rect>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) => setHoveringAddedPath(true)}\n\t\t\t\t\tonMouseLeave={(_e) => setHoveringAddedPath(false)}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"156\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"67\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"187\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tadded\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M156,371.5L182,371.5\"\n\t\t\t\t\t\tstroke=\"#3366cc\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></path>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) => setHoveringRatingsPath(true)}\n\t\t\t\t\tonMouseLeave={(_e) => setHoveringRatingsPath(false)}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"244\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"70\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"275\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tratings\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M244,371.5L270,371.5\"\n\t\t\t\t\t\tstroke=\"#dc3912\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></path>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) => setHoveringReviewsPath(true)}\n\t\t\t\t\tonMouseLeave={(_e) => setHoveringReviewsPath(false)}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"335\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"75\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"366\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\treviews\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M335,371.5L361,371.5\"\n\t\t\t\t\t\tstroke=\"#ff9900\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></path>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) => setHoveringToReadPath(true)}\n\t\t\t\t\tonMouseLeave={(_e) => setHoveringToReadPath(false)}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"431\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"72\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"462\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto-read\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M431,371.5L457,371.5\"\n\t\t\t\t\t\tstroke=\"#109618\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></path>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tx=\"55\"\n\t\t\t\t\ty=\"10\"\n\t\t\t\t\twidth=\"550\"\n\t\t\t\t\theight=\"280\"\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t></rect>\n\t\t\t\t<g\n\t\t\t\t\tclipPath={`url(/book/stats?id=${props.bookId}#abstract-renderer-id-1)`}\n\t\t\t\t>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"289\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"233\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"177\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"122\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"66\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"261\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"205\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"150\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"94\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"38\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"289\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#333333\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t{hoveringAddedPath ? (\n\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#3366cc\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tclassName=\"added-path\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\t\tstroke=\"#3366cc\"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tclassName=\"added-path\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{hoveringRatingsPath ? (\n\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#dc3912\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tclassName=\"ratings-path\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\t\tstroke=\"#dc3912\"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tclassName=\"ratings-path\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{hoveringReviewsPath ? (\n\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#ff9900\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tclassName=\"reviews-path\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\t\tstroke=\"#ff9900\"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tclassName=\"reviews-path\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{hoveringToReadPath ? (\n\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#109618\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tclassName=\"to-read-path\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\t\tstroke=\"#109618\"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tclassName=\"to-read-path\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t\t<g>\n\t\t\t\t\t{clickCircle}\n\t\t\t\t\t{hoverCircle}\n\t\t\t\t</g>\n\t\t\t\t<g>\n\t\t\t\t\t{eachDayOfInterval(interval)\n\t\t\t\t\t\t.filter((date, index) => index % 10 === 0)\n\t\t\t\t\t\t.map((date, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<g key={index}>\n\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\t\t\t\tx={59.38 + 32.1 * index}\n\t\t\t\t\t\t\t\t\t\ty=\"308.44\"\n\t\t\t\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\t\t\t\ttransform={`rotate(-30 ${59.38 + 32.1 * index} 308.44)`}\n\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(date, 'yyyy-MM-dd')}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"294.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"238.25\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round(maximumDailyUpdates / 5)\n\t\t\t\t\t\t\t\t: Math.round(maximumDailyUpdates / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"182.45\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 2) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 2) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"126.65\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 3) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 3) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"70.85\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 4) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 4) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"15.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g>{toolTip}</g>\n\t\t</svg>\n\t);\n\n\tconst table = (\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th colSpan=\"2\">books added</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>date</th>\n\t\t\t\t\t<th>added</th>\n\t\t\t\t\t<th>ratings</th>\n\t\t\t\t\t<th>reviews</th>\n\t\t\t\t\t<th>to-read</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t<td>{format(date, 'yyyy-MM-dd')}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-book'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'rate-book'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-review'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.shelf === 'to-read'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t</table>\n\t);\n\n\tconst bottomSection = loaded ? (\n\t\t<div className=\"book-stats-page-bottom-section\">\n\t\t\t<button\n\t\t\t\tclassName=\"stats-breakdown-button\"\n\t\t\t\tonClick={(_e) => setTableVisible((previous) => !previous)}\n\t\t\t>\n\t\t\t\tClick here for breakdown\n\t\t\t</button>\n\t\t\t<div className=\"chart-table\">{tableVisible ? table : null}</div>\n\t\t\t<span>\n\t\t\t\tNote: This data corresponds to the date users most recently updated this\n\t\t\t\tbook in their shelves.\n\t\t\t</span>\n\t\t</div>\n\t) : null;\n\n\treturn loaded ? (\n\t\t<div className=\"chart\">\n\t\t\t{svg}\n\t\t\t{bottomSection}\n\t\t</div>\n\t) : null;\n};\n\nLinearChart.propTypes = {\n\tbookId: PropTypes.string,\n\tallEditions: PropTypes.bool,\n};\n\nexport default LinearChart;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { format, eachDayOfInterval, isSameDay, subDays } from 'date-fns';\nimport Firebase from '../../Firebase';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst ColumnChart = (props) => {\n\tconst [statusUpdates, setStatusUpdates] = useState([]);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [toolTip, setToolTip] = useState(null);\n\tconst [hoveredAddedColumns, setHoveredAddedColumns] = useState(\n\t\tArray(171).fill(false)\n\t);\n\tconst [hoveredRatingsColumns, setHoveredRatingsColumns] = useState(\n\t\tArray(171).fill(false)\n\t);\n\tconst [hoveredReviewsColumns, setHoveredReviewsColumns] = useState(\n\t\tArray(171).fill(false)\n\t);\n\tconst [hoveredToReadColumns, setHoveredToReadColumns] = useState(\n\t\tArray(171).fill(false)\n\t);\n\tconst [tableVisible, setTableVisible] = useState(false);\n\n\tconst interval = { start: subDays(new Date(), 170), end: new Date() };\n\n\tuseEffect(() => {\n\t\tconst getStatusInfo = async () => {\n\t\t\tconst statusUpdateObjs = props.allEditions\n\t\t\t\t? await trackPromise(\n\t\t\t\t\t\tFirebase.queryStatusUpdatesForRootBook(props.bookId)\n\t\t\t\t  )\n\t\t\t\t: await trackPromise(Firebase.queryStatusUpdatesForBook(props.bookId));\n\t\t\tsetStatusUpdates(statusUpdateObjs);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetStatusInfo();\n\t}, [props.bookId, props.allEditions]);\n\n\tconst addedUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\n\tconst ratingsUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'rate-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst reviewsUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'review-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst toReadUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\tupdate.shelf === 'to-read' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst maximumDailyUpdates = loaded\n\t\t? Math.max(\n\t\t\t\tMath.max(...addedUpdatesNumbers),\n\t\t\t\tMath.max(...ratingsUpdatesNumbers),\n\t\t\t\tMath.max(...reviewsUpdatesNumbers),\n\t\t\t\tMath.max(...toReadUpdatesNumbers)\n\t\t  )\n\t\t: 0;\n\tconst chartUnit = maximumDailyUpdates !== 0 ? 279 / maximumDailyUpdates : 0;\n\n\tconst addedPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst ratingsPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'rate-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [58.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst reviewsPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'review-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [59.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst toReadPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\tupdate.shelf === 'to-read' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [60.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst svgMouseOverHandler = (e) => {\n\t\tconst point = document.querySelector('svg').createSVGPoint();\n\t\tpoint.x = e.clientX;\n\t\tpoint.y = e.clientY;\n\t\tconst location = point.matrixTransform(\n\t\t\tdocument.querySelector('svg').getScreenCTM().inverse()\n\t\t);\n\t\tconst matchingAddedPathCoordinates = addedPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingRatingsPathCoordinates = ratingsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingReviewsPathCoordinates = reviewsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingToReadPathCoordinates = toReadPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tif (\n\t\t\tmatchingAddedPathCoordinates.length > 0 ||\n\t\t\tmatchingRatingsPathCoordinates.length > 0 ||\n\t\t\tmatchingReviewsPathCoordinates.length > 0 ||\n\t\t\tmatchingToReadPathCoordinates.length > 0\n\t\t) {\n\t\t\tconst action =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? 'added'\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? 'ratings'\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? 'reviews'\n\t\t\t\t\t: 'to-read';\n\t\t\tconst coordinates =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? matchingAddedPathCoordinates\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? matchingRatingsPathCoordinates\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? matchingReviewsPathCoordinates\n\t\t\t\t\t: matchingToReadPathCoordinates;\n\t\t\tconst date = eachDayOfInterval(interval)[\n\t\t\t\tMath.round((coordinates[0][0] - 57.1) / 3.2)\n\t\t\t];\n\t\t\tconst valueForDate =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? addedUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? ratingsUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? reviewsUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: toReadUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)];\n\t\t\tconst newToolTip = (\n\t\t\t\t<g className=\"chart-tooltip\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td={\n\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606 && coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 27.87}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 28.87}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 28.87}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 27.87}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 53.13}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 54.13}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 54.13}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 53.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 25.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 12.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 32.26}, ${coordinates[0][1] + 85.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 33.26}, ${coordinates[0][1] + 84.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 33.26}, ${coordinates[0][1] + 40.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 32.26}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 12.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 25.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 58.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 59.74}, ${coordinates[0][1] + 40.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 59.74}, ${coordinates[0][1] + 84.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 58.74}, ${coordinates[0][1] + 85.73}\n\t\t\t\t\t\t\tZ\t\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 62.612}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 63.612}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 63.612}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 62.612}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 18.388}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 19.388}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 19.388}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 18.388}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 26.312}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 13.742}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 53.34}, ${coordinates[0][1] + 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 54.34}, ${coordinates[0][1] + 57.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 54.34}, ${coordinates[0][1] + 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 53.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 26.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 13.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 27.66}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 28.66}, ${coordinates[0][1] + 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 28.66}, ${coordinates[0][1] + 57.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 27.66}, ${coordinates[0][1] + 58.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstroke=\"#cccccc\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></path>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 21.37\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 56.612\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] - 46.84\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 40.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 58.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 31.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tfontWeight=\"bold\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{format(date, 'yyyy-MM-dd')}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 21.37\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 56.612\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] - 46.84\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 23.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 75.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 48.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${action}:`}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] + 27.63\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 7.112\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 3.34\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 23.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 75.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 48.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tfontWeight=\"bold\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{valueForDate}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t);\n\t\t\tsetToolTip(newToolTip);\n\t\t} else {\n\t\t\tsetToolTip(null);\n\t\t}\n\t};\n\n\tconst svg = (\n\t\t<svg width=\"620\" height=\"400\" onMouseOver={svgMouseOverHandler}>\n\t\t\t<defs id=\"abstract-renderer-id-0\">\n\t\t\t\t<clipPath id=\"abstract-renderer-id-1\">\n\t\t\t\t\t<rect x=\"55\" y=\"10\" width=\"550\" height=\"280\"></rect>\n\t\t\t\t</clipPath>\n\t\t\t\t<filter id=\"abstract-renderer-id-2\">\n\t\t\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"2\"></feGaussianBlur>\n\t\t\t\t\t<feOffset dx=\"1\" dy=\"1\"></feOffset>\n\t\t\t\t\t<feComponentTransfer>\n\t\t\t\t\t\t<feFuncA type=\"linear\" slope=\"0.1\"></feFuncA>\n\t\t\t\t\t</feComponentTransfer>\n\t\t\t\t\t<feMerge>\n\t\t\t\t\t\t<feMergeNode></feMergeNode>\n\t\t\t\t\t\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\n\t\t\t\t\t</feMerge>\n\t\t\t\t</filter>\n\t\t\t</defs>\n\t\t\t<rect\n\t\t\t\tx=\"0\"\n\t\t\t\ty=\"0\"\n\t\t\t\twidth=\"620\"\n\t\t\t\theight=\"400\"\n\t\t\t\tstroke=\"none\"\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\tfill=\"#ffffff\"\n\t\t\t></rect>\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tx=\"156\"\n\t\t\t\t\ty=\"365\"\n\t\t\t\t\twidth=\"347\"\n\t\t\t\t\theight=\"13\"\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t></rect>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\tsetHoveredAddedColumns((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => true)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\tsetHoveredAddedColumns((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"156\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"67\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"187\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tadded\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"156\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill=\"#3366cc\"\n\t\t\t\t\t></rect>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\tsetHoveredRatingsColumns((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => true)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\tsetHoveredRatingsColumns((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"244\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"70\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"275\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tratings\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"244\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill=\"#dc3912\"\n\t\t\t\t\t></rect>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\tsetHoveredReviewsColumns((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => true)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\tsetHoveredReviewsColumns((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"335\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"75\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"366\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\treviews\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"335\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill=\"#ff9900\"\n\t\t\t\t\t></rect>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\tsetHoveredToReadColumns((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => true)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\tsetHoveredToReadColumns((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"431\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"72\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"462\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto-read\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"431\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill=\"#109618\"\n\t\t\t\t\t></rect>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tx=\"55\"\n\t\t\t\t\ty=\"10\"\n\t\t\t\t\twidth=\"550\"\n\t\t\t\t\theight=\"280\"\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t></rect>\n\t\t\t\t<g\n\t\t\t\t\tclipPath={`url(/book/stats?id=${props.bookId}#abstract-renderer-id-1)`}\n\t\t\t\t>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"289\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"233\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"177\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"122\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"66\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"261\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"205\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"150\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"94\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"38\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t{addedUpdatesNumbers.map((quantity, index) => {\n\t\t\t\t\t\t\tif (hoveredAddedColumns[index]) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetHoveredAddedColumns((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={57.5 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={289.5 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"0.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"#3366cc\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={57 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={289 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"1.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 1}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={56 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={288 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"3.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 3}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.15\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={55 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={287 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"5.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 5}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetHoveredAddedColumns((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((_value, i) => i === index)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tx={57.5 + 3.2 * index}\n\t\t\t\t\t\t\t\t\ty={289.5 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\twidth=\"0.5\"\n\t\t\t\t\t\t\t\t\theight={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\tfill=\"#3366cc\"\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{ratingsUpdatesNumbers.map((quantity, index) => {\n\t\t\t\t\t\t\tif (hoveredRatingsColumns[index]) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetHoveredRatingsColumns((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={index * 2}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={58.5 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={289.5 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"0.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"#dc3912\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={58 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={289 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"1.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 1}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={57 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={288 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"3.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 3}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.15\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={56 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={287 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"5.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 5}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetHoveredRatingsColumns((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((_value, i) => i === index)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tx={58.5 + 3.2 * index}\n\t\t\t\t\t\t\t\t\ty={289.5 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\twidth=\"0.5\"\n\t\t\t\t\t\t\t\t\theight={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\tfill=\"#dc3912\"\n\t\t\t\t\t\t\t\t\tkey={index * 2}\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{reviewsUpdatesNumbers.map((quantity, index) => {\n\t\t\t\t\t\t\tif (hoveredReviewsColumns[index]) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetHoveredReviewsColumns((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={index * 3}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={59.5 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={289.5 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"0.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"#ff9900\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={59 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={289 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"1.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 1}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={58 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={288 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"3.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 3}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.15\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={57 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={287 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"5.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 5}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetHoveredReviewsColumns((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((_value, i) => i === index)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tx={59.5 + 3.2 * index}\n\t\t\t\t\t\t\t\t\ty={289.5 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\twidth=\"0.5\"\n\t\t\t\t\t\t\t\t\theight={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\tfill=\"#ff9900\"\n\t\t\t\t\t\t\t\t\tkey={index * 3}\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{toReadUpdatesNumbers.map((quantity, index) => {\n\t\t\t\t\t\t\tif (hoveredToReadColumns[index]) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetHoveredToReadColumns((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={index * 4}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={60.5 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={289.5 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"0.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"#109618\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={60 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={289 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"1.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 1}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={59 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={288 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"3.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 3}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.15\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx={58 + 3.2 * index}\n\t\t\t\t\t\t\t\t\t\t\ty={287 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"5.5\"\n\t\t\t\t\t\t\t\t\t\t\theight={quantity * chartUnit + 5}\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetHoveredToReadColumns((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((_value, i) => i === index)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tx={60.5 + 3.2 * index}\n\t\t\t\t\t\t\t\t\ty={289.5 - quantity * chartUnit}\n\t\t\t\t\t\t\t\t\twidth=\"0.5\"\n\t\t\t\t\t\t\t\t\theight={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\tfill=\"#109618\"\n\t\t\t\t\t\t\t\t\tkey={index * 4}\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"289\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#333333\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t\t<g></g>\n\t\t\t\t<g>\n\t\t\t\t\t{eachDayOfInterval(interval)\n\t\t\t\t\t\t.filter((date, index) => index % 10 === 0)\n\t\t\t\t\t\t.map((date, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<g key={index}>\n\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\t\t\t\tx={59.38 + 32.1 * index}\n\t\t\t\t\t\t\t\t\t\ty=\"308.44\"\n\t\t\t\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\t\t\t\ttransform={`rotate(-30 ${59.38 + 32.1 * index} 308.44)`}\n\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(date, 'yyyy-MM-dd')}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"294.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"238.25\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round(maximumDailyUpdates / 5)\n\t\t\t\t\t\t\t\t: Math.round(maximumDailyUpdates / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"182.45\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 2) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 2) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"126.65\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 3) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 3) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"70.85\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 4) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 4) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"15.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g>{toolTip}</g>\n\t\t</svg>\n\t);\n\n\tconst table = (\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th colSpan=\"2\">books added</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>date</th>\n\t\t\t\t\t<th>added</th>\n\t\t\t\t\t<th>ratings</th>\n\t\t\t\t\t<th>reviews</th>\n\t\t\t\t\t<th>to-read</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t<td>{format(date, 'yyyy-MM-dd')}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-book'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'rate-book'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-review'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.shelf === 'to-read'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t</table>\n\t);\n\n\tconst bottomSection = loaded ? (\n\t\t<div className=\"book-stats-page-bottom-section\">\n\t\t\t<button\n\t\t\t\tclassName=\"stats-breakdown-button\"\n\t\t\t\tonClick={(_e) => setTableVisible((previous) => !previous)}\n\t\t\t>\n\t\t\t\tClick here for breakdown\n\t\t\t</button>\n\t\t\t<div className=\"chart-table\">{tableVisible ? table : null}</div>\n\t\t\t<span>\n\t\t\t\tNote: This data corresponds to the date users most recently updated this\n\t\t\t\tbook in their shelves.\n\t\t\t</span>\n\t\t</div>\n\t) : null;\n\n\treturn loaded ? (\n\t\t<div className=\"chart\">\n\t\t\t{svg}\n\t\t\t{bottomSection}\n\t\t</div>\n\t) : null;\n};\n\nColumnChart.propTypes = {\n\tbookId: PropTypes.string,\n\tallEditions: PropTypes.bool,\n};\n\nexport default ColumnChart;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { format, eachDayOfInterval, isSameDay, subDays } from 'date-fns';\nimport Firebase from '../../Firebase';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst AreaChart = (props) => {\n\tconst [statusUpdates, setStatusUpdates] = useState([]);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [clickCircle, setClickCircle] = useState(null);\n\tconst [hoverCircle, setHoverCircle] = useState(null);\n\tconst [toolTip, setToolTip] = useState(null);\n\tconst [hoveringAddedPath, setHoveringAddedPath] = useState(false);\n\tconst [hoveringRatingsPath, setHoveringRatingsPath] = useState(false);\n\tconst [hoveringReviewsPath, setHoveringReviewsPath] = useState(false);\n\tconst [hoveringToReadPath, setHoveringToReadPath] = useState(false);\n\tconst [tableVisible, setTableVisible] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst getStatusInfo = async () => {\n\t\t\tconst statusUpdateObjs = props.allEditions\n\t\t\t\t? await trackPromise(\n\t\t\t\t\t\tFirebase.queryStatusUpdatesForRootBook(props.bookId)\n\t\t\t\t  )\n\t\t\t\t: await trackPromise(Firebase.queryStatusUpdatesForBook(props.bookId));\n\t\t\tsetStatusUpdates(statusUpdateObjs);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetStatusInfo();\n\t}, [props.bookId, props.allEditions]);\n\n\tconst interval = { start: subDays(new Date(), 170), end: new Date() };\n\tconst addedUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\n\tconst ratingsUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'rate-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst reviewsUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'review-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst toReadUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\tupdate.shelf === 'to-read' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst maximumDailyUpdates = loaded\n\t\t? Math.max(\n\t\t\t\tMath.max(...addedUpdatesNumbers),\n\t\t\t\tMath.max(...ratingsUpdatesNumbers),\n\t\t\t\tMath.max(...reviewsUpdatesNumbers),\n\t\t\t\tMath.max(...toReadUpdatesNumbers)\n\t\t  )\n\t\t: 0;\n\tconst chartUnit = maximumDailyUpdates !== 0 ? 279 / maximumDailyUpdates : 0;\n\n\tconst addedPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst ratingsPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'rate-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst reviewsPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'review-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst toReadPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\tupdate.shelf === 'to-read' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [57.1 + 3.2 * index, 289.5 - chartUnit * updatesNumber];\n\t\t  })\n\t\t: [];\n\n\tconst addedPathDefinition = addedPathDefinitionCoordinates.reduce(\n\t\t(previous, current, currentIndex) => {\n\t\t\tif (currentIndex === 0) {\n\t\t\t\treturn 'M ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t} else {\n\t\t\t\treturn previous + 'L ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t}\n\t\t},\n\t\t''\n\t);\n\n\tconst ratingsPathDefinition = ratingsPathDefinitionCoordinates.reduce(\n\t\t(previous, current, currentIndex) => {\n\t\t\tif (currentIndex === 0) {\n\t\t\t\treturn 'M ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t} else {\n\t\t\t\treturn previous + 'L ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t}\n\t\t},\n\t\t''\n\t);\n\n\tconst reviewsPathDefinition = reviewsPathDefinitionCoordinates.reduce(\n\t\t(previous, current, currentIndex) => {\n\t\t\tif (currentIndex === 0) {\n\t\t\t\treturn 'M ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t} else {\n\t\t\t\treturn previous + 'L ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t}\n\t\t},\n\t\t''\n\t);\n\n\tconst toReadPathDefinition = toReadPathDefinitionCoordinates.reduce(\n\t\t(previous, current, currentIndex) => {\n\t\t\tif (currentIndex === 0) {\n\t\t\t\treturn 'M ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t} else {\n\t\t\t\treturn previous + 'L ' + current[0] + ', ' + current[1] + '\\n';\n\t\t\t}\n\t\t},\n\t\t''\n\t);\n\n\tconst svgMouseOverHandler = (e) => {\n\t\tconst point = document.querySelector('svg').createSVGPoint();\n\t\tpoint.x = e.clientX;\n\t\tpoint.y = e.clientY;\n\t\tconst location = point.matrixTransform(\n\t\t\tdocument.querySelector('svg').getScreenCTM().inverse()\n\t\t);\n\t\tconst matchingAddedPathCoordinates = addedPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingRatingsPathCoordinates = ratingsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingReviewsPathCoordinates = reviewsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingToReadPathCoordinates = toReadPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tif (\n\t\t\t!(\n\t\t\t\tclickCircle !== null &&\n\t\t\t\tMath.abs(\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.getElementsByClassName('click-circle-inside')[0]\n\t\t\t\t\t\t.getAttribute('cx') - location.x\n\t\t\t\t) <= 5 &&\n\t\t\t\tMath.abs(\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.getElementsByClassName('click-circle-inside')[0]\n\t\t\t\t\t\t.getAttribute('cy') - location.y\n\t\t\t\t)\n\t\t\t) &&\n\t\t\t(matchingAddedPathCoordinates.length > 0 ||\n\t\t\t\tmatchingRatingsPathCoordinates.length > 0 ||\n\t\t\t\tmatchingReviewsPathCoordinates.length > 0 ||\n\t\t\t\tmatchingToReadPathCoordinates.length > 0)\n\t\t) {\n\t\t\tconst action =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? 'added'\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? 'ratings'\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? 'reviews'\n\t\t\t\t\t: 'to-read';\n\t\t\tconst color =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? '#3366cc'\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? '#dc3912'\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? '#ff9900'\n\t\t\t\t\t: '#109618';\n\t\t\tconst coordinates =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? matchingAddedPathCoordinates\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? matchingRatingsPathCoordinates\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? matchingReviewsPathCoordinates\n\t\t\t\t\t: matchingToReadPathCoordinates;\n\t\t\tconst date = eachDayOfInterval(interval)[\n\t\t\t\tMath.round((coordinates[0][0] - 57.1) / 3.2)\n\t\t\t];\n\t\t\tconst valueForDate =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? addedUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? ratingsUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? reviewsUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)]\n\t\t\t\t\t: toReadUpdatesNumbers[Math.round((coordinates[0][0] - 57.1) / 3.2)];\n\t\t\tconst newHoverCircle = (\n\t\t\t\t<g>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"4.5\"\n\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tstrokeOpacity=\"0.25\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></circle>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"5.5\"\n\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></circle>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"6.5\"\n\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></circle>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"4\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill={color}\n\t\t\t\t\t></circle>\n\t\t\t\t</g>\n\t\t\t);\n\t\t\tsetHoverCircle(newHoverCircle);\n\t\t\tconst newToolTip = (\n\t\t\t\t<g className=\"chart-tooltip\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td={\n\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606 && coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 27.87}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 28.87}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 28.87}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 27.87}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 53.13}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 54.13}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 54.13}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 53.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 25.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 12.13}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 32.26}, ${coordinates[0][1] + 85.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 33.26}, ${coordinates[0][1] + 84.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 33.26}, ${coordinates[0][1] + 40.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 32.26}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 12.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 25.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 58.74}, ${coordinates[0][1] + 39.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 59.74}, ${coordinates[0][1] + 40.73}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 59.74}, ${coordinates[0][1] + 84.73}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 58.74}, ${coordinates[0][1] + 85.73}\n\t\t\t\t\t\t\tZ\t\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t? `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 62.612}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 63.612}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 63.612}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 62.612}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 18.388}, ${coordinates[0][1] - 59.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 19.388}, ${coordinates[0][1] - 58.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 19.388}, ${coordinates[0][1] - 14.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 18.388}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 26.312}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 13.742}, ${coordinates[0][1] - 13.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t: `\n\t\t\t\t\t\t\tM ${coordinates[0][0] - 53.34}, ${coordinates[0][1] + 58.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 54.34}, ${coordinates[0][1] + 57.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 54.34}, ${coordinates[0][1] + 13.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] - 53.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 26.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0]}, ${coordinates[0][1]}\n\t\t\t\t\t\t\tL ${coordinates[0][0] - 13.34}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 27.66}, ${coordinates[0][1] + 12.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 28.66}, ${coordinates[0][1] + 13.5}\n\t\t\t\t\t\t\tL ${coordinates[0][0] + 28.66}, ${coordinates[0][1] + 57.5}\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ${coordinates[0][0] + 27.66}, ${coordinates[0][1] + 58.5}\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstroke=\"#cccccc\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></path>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 21.37\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 56.612\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] - 46.84\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 40.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 58.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 31.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tfontWeight=\"bold\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{format(date, 'yyyy-MM-dd')}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 21.37\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 56.612\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] - 46.84\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 23.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 75.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 48.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${action}:`}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] + 27.63\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 7.112\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 3.34\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 23.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 75.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 48.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tfontWeight=\"bold\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{valueForDate}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t);\n\t\t\tsetToolTip(newToolTip);\n\t\t} else {\n\t\t\tsetHoverCircle(null);\n\t\t\tsetToolTip(null);\n\t\t}\n\t};\n\n\tconst svgClickHandler = (e) => {\n\t\tconst point = document.querySelector('svg').createSVGPoint();\n\t\tpoint.x = e.clientX;\n\t\tpoint.y = e.clientY;\n\t\tconst location = point.matrixTransform(\n\t\t\tdocument.querySelector('svg').getScreenCTM().inverse()\n\t\t);\n\t\tconst matchingAddedPathCoordinates = addedPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingRatingsPathCoordinates = ratingsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingReviewsPathCoordinates = reviewsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingToReadPathCoordinates = toReadPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tif (\n\t\t\tmatchingAddedPathCoordinates.length > 0 ||\n\t\t\tmatchingRatingsPathCoordinates.length > 0 ||\n\t\t\tmatchingReviewsPathCoordinates.length > 0 ||\n\t\t\tmatchingToReadPathCoordinates.length > 0\n\t\t) {\n\t\t\tconst color =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? '#3366cc'\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? '#dc3912'\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? '#ff9900'\n\t\t\t\t\t: '#109618';\n\t\t\tconst coordinates =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? matchingAddedPathCoordinates\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? matchingRatingsPathCoordinates\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? matchingReviewsPathCoordinates\n\t\t\t\t\t: matchingToReadPathCoordinates;\n\t\t\tconst newClickCircle = (\n\t\t\t\t<g>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"6.5\"\n\t\t\t\t\t\tstroke={color}\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></circle>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tclassName=\"click-circle-inside\"\n\t\t\t\t\t\tcx={coordinates[0][0]}\n\t\t\t\t\t\tcy={coordinates[0][1]}\n\t\t\t\t\t\tr=\"4\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill={color}\n\t\t\t\t\t></circle>\n\t\t\t\t</g>\n\t\t\t);\n\t\t\tsetHoverCircle(null);\n\t\t\tsetClickCircle(newClickCircle);\n\t\t}\n\t};\n\n\tconst svg = (\n\t\t<svg\n\t\t\twidth=\"620\"\n\t\t\theight=\"400\"\n\t\t\tonMouseOver={svgMouseOverHandler}\n\t\t\tonClick={svgClickHandler}\n\t\t>\n\t\t\t<defs id=\"abstract-renderer-id-0\">\n\t\t\t\t<clipPath id=\"abstract-renderer-id-1\">\n\t\t\t\t\t<rect x=\"55\" y=\"10\" width=\"550\" height=\"280\"></rect>\n\t\t\t\t</clipPath>\n\t\t\t\t<filter id=\"abstract-renderer-id-2\">\n\t\t\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"2\"></feGaussianBlur>\n\t\t\t\t\t<feOffset dx=\"1\" dy=\"1\"></feOffset>\n\t\t\t\t\t<feComponentTransfer>\n\t\t\t\t\t\t<feFuncA type=\"linear\" slope=\"0.1\"></feFuncA>\n\t\t\t\t\t</feComponentTransfer>\n\t\t\t\t\t<feMerge>\n\t\t\t\t\t\t<feMergeNode></feMergeNode>\n\t\t\t\t\t\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\n\t\t\t\t\t</feMerge>\n\t\t\t\t</filter>\n\t\t\t</defs>\n\t\t\t<rect\n\t\t\t\tx=\"0\"\n\t\t\t\ty=\"0\"\n\t\t\t\twidth=\"620\"\n\t\t\t\theight=\"400\"\n\t\t\t\tstroke=\"none\"\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\tfill=\"#ffffff\"\n\t\t\t></rect>\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tx=\"156\"\n\t\t\t\t\ty=\"365\"\n\t\t\t\t\twidth=\"347\"\n\t\t\t\t\theight=\"13\"\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t></rect>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) => setHoveringAddedPath(true)}\n\t\t\t\t\tonMouseLeave={(_e) => setHoveringAddedPath(false)}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"156\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"67\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"187\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tadded\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"156\"\n\t\t\t\t\t\ty=\"371.5\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"6.5\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill-opacity=\"0.3\"\n\t\t\t\t\t\tfill=\"#3366cc\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M156,371.5L182,371.5\"\n\t\t\t\t\t\tstroke=\"#3366cc\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></path>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) => setHoveringRatingsPath(true)}\n\t\t\t\t\tonMouseLeave={(_e) => setHoveringRatingsPath(false)}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"244\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"70\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"275\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tratings\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"244\"\n\t\t\t\t\t\ty=\"371.5\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"6.5\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill-opacity=\"0.3\"\n\t\t\t\t\t\tfill=\"#dc3912\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M244,371.5L270,371.5\"\n\t\t\t\t\t\tstroke=\"#dc3912\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></path>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) => setHoveringReviewsPath(true)}\n\t\t\t\t\tonMouseLeave={(_e) => setHoveringReviewsPath(false)}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"335\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"75\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"366\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\treviews\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"335\"\n\t\t\t\t\t\ty=\"371.5\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"6.5\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill-opacity=\"0.3\"\n\t\t\t\t\t\tfill=\"#ff9900\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M335,371.5L361,371.5\"\n\t\t\t\t\t\tstroke=\"#ff9900\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></path>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) => setHoveringToReadPath(true)}\n\t\t\t\t\tonMouseLeave={(_e) => setHoveringToReadPath(false)}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"431\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"72\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"462\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto-read\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"431\"\n\t\t\t\t\t\ty=\"371.5\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"6.5\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill-opacity=\"0.3\"\n\t\t\t\t\t\tfill=\"#109618\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M431,371.5L457,371.5\"\n\t\t\t\t\t\tstroke=\"#109618\"\n\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t></path>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tx=\"55\"\n\t\t\t\t\ty=\"10\"\n\t\t\t\t\twidth=\"550\"\n\t\t\t\t\theight=\"280\"\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t></rect>\n\t\t\t\t<g\n\t\t\t\t\tclipPath={`url(/book/stats?id=${props.bookId}#abstract-renderer-id-1)`}\n\t\t\t\t>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"289\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"233\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"177\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"122\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"66\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"261\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"205\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"150\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"94\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"38\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t{hoveringAddedPath ? (\n\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#3366cc\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tclassName=\"added-path\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\t\tstroke=\"#3366cc\"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tclassName=\"added-path\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{hoveringRatingsPath ? (\n\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#dc3912\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tclassName=\"ratings-path\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\t\tstroke=\"#dc3912\"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tclassName=\"ratings-path\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{hoveringReviewsPath ? (\n\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#ff9900\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tclassName=\"reviews-path\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\t\tstroke=\"#ff9900\"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tclassName=\"reviews-path\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{hoveringToReadPath ? (\n\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.1\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\t\t\tstroke=\"#109618\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tclassName=\"to-read-path\"\n\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\t\tstroke=\"#109618\"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tclassName=\"to-read-path\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"289\"\n\t\t\t\t\t\t\twidth=\"550\"\n\t\t\t\t\t\t\theight=\"1\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#333333\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td={addedPathDefinition}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfillOpacity=\"0.3\"\n\t\t\t\t\t\t\tfill=\"#3366cc\"\n\t\t\t\t\t\t\tclassName=\"added-path\"\n\t\t\t\t\t\t></path>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td={ratingsPathDefinition}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfillOpacity=\"0.3\"\n\t\t\t\t\t\t\tfill=\"#dc3912\"\n\t\t\t\t\t\t\tclassName=\"ratings-path\"\n\t\t\t\t\t\t></path>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td={reviewsPathDefinition}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfillOpacity=\"0.3\"\n\t\t\t\t\t\t\tfill=\"ff9900\"\n\t\t\t\t\t\t\tclassName=\"reviews-path\"\n\t\t\t\t\t\t></path>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td={toReadPathDefinition}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfillOpacity=\"0.3\"\n\t\t\t\t\t\t\tfill=\"#109618\"\n\t\t\t\t\t\t\tclassName=\"to-read-path\"\n\t\t\t\t\t\t></path>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t\t<g>\n\t\t\t\t\t{clickCircle}\n\t\t\t\t\t{hoverCircle}\n\t\t\t\t</g>\n\t\t\t\t<g>\n\t\t\t\t\t{eachDayOfInterval(interval)\n\t\t\t\t\t\t.filter((date, index) => index % 10 === 0)\n\t\t\t\t\t\t.map((date, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<g key={index}>\n\t\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\t\t\t\tx={59.38 + 32.1 * index}\n\t\t\t\t\t\t\t\t\t\ty=\"308.44\"\n\t\t\t\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\t\t\t\ttransform={`rotate(-30 ${59.38 + 32.1 * index} 308.44)`}\n\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(date, 'yyyy-MM-dd')}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"294.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"238.25\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round(maximumDailyUpdates / 5)\n\t\t\t\t\t\t\t\t: Math.round(maximumDailyUpdates / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"182.45\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 2) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 2) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"126.65\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 3) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 3) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"70.85\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 4) / 5)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 4) / 5, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tx=\"42\"\n\t\t\t\t\t\t\ty=\"15.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g>{toolTip}</g>\n\t\t</svg>\n\t);\n\n\tconst table = (\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th colSpan=\"2\">books added</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>date</th>\n\t\t\t\t\t<th>added</th>\n\t\t\t\t\t<th>ratings</th>\n\t\t\t\t\t<th>reviews</th>\n\t\t\t\t\t<th>to-read</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t<td>{format(date, 'yyyy-MM-dd')}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-book'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'rate-book'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-review'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.shelf === 'to-read'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t</table>\n\t);\n\n\tconst bottomSection = loaded ? (\n\t\t<div className=\"book-stats-page-bottom-section\">\n\t\t\t<button\n\t\t\t\tclassName=\"stats-breakdown-button\"\n\t\t\t\tonClick={(_e) => setTableVisible((previous) => !previous)}\n\t\t\t>\n\t\t\t\tClick here for breakdown\n\t\t\t</button>\n\t\t\t<div className=\"chart-table\">{tableVisible ? table : null}</div>\n\t\t\t<span>\n\t\t\t\tNote: This data corresponds to the date users most recently updated this\n\t\t\t\tbook in their shelves.\n\t\t\t</span>\n\t\t</div>\n\t) : null;\n\n\treturn loaded ? (\n\t\t<div className=\"chart\">\n\t\t\t{svg}\n\t\t\t{bottomSection}\n\t\t</div>\n\t) : null;\n};\n\nAreaChart.propTypes = {\n\tbookId: PropTypes.string,\n\tallEditions: PropTypes.bool,\n};\n\nexport default AreaChart;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { format, eachDayOfInterval, isSameDay, subDays } from 'date-fns';\nimport Firebase from '../../Firebase';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BarChart = (props) => {\n\tconst [statusUpdates, setStatusUpdates] = useState([]);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [toolTip, setToolTip] = useState(null);\n\tconst [hoveredAddedBars, setHoveredAddedBars] = useState(\n\t\tArray(171).fill(false)\n\t);\n\tconst [hoveredRatingsBars, setHoveredRatingsBars] = useState(\n\t\tArray(171).fill(false)\n\t);\n\tconst [hoveredReviewsBars, setHoveredReviewsBars] = useState(\n\t\tArray(171).fill(false)\n\t);\n\tconst [hoveredToReadBars, setHoveredToReadBars] = useState(\n\t\tArray(171).fill(false)\n\t);\n\tconst [tableVisible, setTableVisible] = useState(false);\n\n\tconst interval = { start: subDays(new Date(), 170), end: new Date() };\n\n\tuseEffect(() => {\n\t\tconst getStatusInfo = async () => {\n\t\t\tconst statusUpdateObjs = props.allEditions\n\t\t\t\t? await trackPromise(\n\t\t\t\t\t\tFirebase.queryStatusUpdatesForRootBook(props.bookId)\n\t\t\t\t  )\n\t\t\t\t: await trackPromise(Firebase.queryStatusUpdatesForBook(props.bookId));\n\t\t\tsetStatusUpdates(statusUpdateObjs);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetStatusInfo();\n\t}, [props.bookId, props.allEditions]);\n\n\tconst addedUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\n\tconst ratingsUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'rate-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst reviewsUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'review-book' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst toReadUpdatesNumbers = loaded\n\t\t? eachDayOfInterval(interval).map(\n\t\t\t\t(date) =>\n\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\tupdate.shelf === 'to-read' &&\n\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t\t).length\n\t\t  )\n\t\t: [];\n\tconst maximumDailyUpdates = loaded\n\t\t? Math.max(\n\t\t\t\tMath.max(...addedUpdatesNumbers),\n\t\t\t\tMath.max(...ratingsUpdatesNumbers),\n\t\t\t\tMath.max(...reviewsUpdatesNumbers),\n\t\t\t\tMath.max(...toReadUpdatesNumbers)\n\t\t  )\n\t\t: 0;\n\tconst chartUnit = maximumDailyUpdates !== 0 ? 608 / maximumDailyUpdates : 0;\n\n\tconst addedPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [56 + chartUnit * updatesNumber, 10.5 + 2 * index];\n\t\t  })\n\t\t: [];\n\n\tconst ratingsPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'rate-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [56 + chartUnit * updatesNumber, 11.5 + 2 * index];\n\t\t  })\n\t\t: [];\n\n\tconst reviewsPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'review-book' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [56 + chartUnit * updatesNumber, 12.5 + 2 * index];\n\t\t  })\n\t\t: [];\n\n\tconst toReadPathDefinitionCoordinates = loaded\n\t\t? eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\tconst updatesNumber = statusUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\tupdate.shelf === 'to-read' &&\n\t\t\t\t\t\tisSameDay(update.date.toDate(), date)\n\t\t\t\t).length;\n\t\t\t\treturn [56 + chartUnit * updatesNumber, 13.5 + 2 * index];\n\t\t  })\n\t\t: [];\n\n\tconst svgMouseOverHandler = (e) => {\n\t\tconst point = document.querySelector('svg').createSVGPoint();\n\t\tpoint.x = e.clientX;\n\t\tpoint.y = e.clientY;\n\t\tconst location = point.matrixTransform(\n\t\t\tdocument.querySelector('svg').getScreenCTM().inverse()\n\t\t);\n\t\tconst matchingAddedPathCoordinates = addedPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingRatingsPathCoordinates = ratingsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingReviewsPathCoordinates = reviewsPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tconst matchingToReadPathCoordinates = toReadPathDefinitionCoordinates.filter(\n\t\t\t(coordinates) =>\n\t\t\t\tMath.abs(coordinates[0] - location.x) <= 5 &&\n\t\t\t\tMath.abs(coordinates[1] - location.y) <= 5\n\t\t);\n\t\tif (\n\t\t\tmatchingAddedPathCoordinates.length > 0 ||\n\t\t\tmatchingRatingsPathCoordinates.length > 0 ||\n\t\t\tmatchingReviewsPathCoordinates.length > 0 ||\n\t\t\tmatchingToReadPathCoordinates.length > 0\n\t\t) {\n\t\t\tconst action =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? 'added'\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? 'ratings'\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? 'reviews'\n\t\t\t\t\t: 'to-read';\n\t\t\tconst coordinates =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? matchingAddedPathCoordinates\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? matchingRatingsPathCoordinates\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? matchingReviewsPathCoordinates\n\t\t\t\t\t: matchingToReadPathCoordinates;\n\t\t\tconst offsetValue =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? 10.5\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? 11.5\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? 12.5\n\t\t\t\t\t: 13.5;\n\t\t\tconst date = eachDayOfInterval(interval)[\n\t\t\t\tMath.round((coordinates[0][1] - offsetValue) / 2)\n\t\t\t];\n\t\t\tconst valueForDate =\n\t\t\t\tmatchingAddedPathCoordinates.length > 0\n\t\t\t\t\t? addedUpdatesNumbers[\n\t\t\t\t\t\t\tMath.round((coordinates[0][1] - offsetValue) / 2)\n\t\t\t\t\t  ]\n\t\t\t\t\t: matchingRatingsPathCoordinates.length > 0\n\t\t\t\t\t? ratingsUpdatesNumbers[\n\t\t\t\t\t\t\tMath.round((coordinates[0][1] - offsetValue) / 2)\n\t\t\t\t\t  ]\n\t\t\t\t\t: matchingReviewsPathCoordinates.length > 0\n\t\t\t\t\t? reviewsUpdatesNumbers[\n\t\t\t\t\t\t\tMath.round((coordinates[0][1] - offsetValue) / 2)\n\t\t\t\t\t  ]\n\t\t\t\t\t: toReadUpdatesNumbers[\n\t\t\t\t\t\t\tMath.round((coordinates[0][1] - offsetValue) / 2)\n\t\t\t\t\t  ];\n\t\t\tconst newToolTip = (\n\t\t\t\t<g className=\"chart-tooltip\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td={\n\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606 && coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t? `\n                            M ${coordinates[0][0] - 27.87}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 13.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] - 28.87}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 14.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] - 28.87}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 58.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] - 27.87}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 53.13}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] + 54.13}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 58.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 54.13}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 14.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] + 53.13}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 13.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 25.13}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 13.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0]}, ${coordinates[0][1]}\n                            L ${coordinates[0][0] + 12.13}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 13.5\n\t\t\t\t\t\t\t\t  }\n                            Z\n                        `\n\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t? `\n                            M ${coordinates[0][0] - 32.26}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 85.73\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] - 33.26}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 84.73\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] - 33.26}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 40.73\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] - 32.26}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 39.73\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 12.74}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 39.73\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0]}, ${coordinates[0][1]}\n                            L ${coordinates[0][0] + 25.74}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 39.73\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 58.74}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 39.73\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] + 59.74}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 40.73\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 59.74}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 84.73\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] + 58.74}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 85.73\n\t\t\t\t\t\t\t\t  }\n                            Z\t\n                        `\n\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t? `\n                            M ${coordinates[0][0] - 62.612}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 13.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] - 63.612}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 14.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] - 63.612}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 58.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] - 62.612}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 18.388}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] + 19.388}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 58.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 19.388}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 14.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] + 18.388}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 13.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] - 26.312}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 13.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0]}, ${coordinates[0][1]}\n                            L ${coordinates[0][0] - 13.742}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] - 13.5\n\t\t\t\t\t\t\t\t  }\n                            Z\n                        `\n\t\t\t\t\t\t\t\t: `\n                            M ${coordinates[0][0] - 53.34}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 58.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] - 54.34}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 57.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] - 54.34}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 13.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] - 53.34}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 12.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] - 26.34}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 12.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0]}, ${coordinates[0][1]}\n                            L ${coordinates[0][0] - 13.34}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 12.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 27.66}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 12.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] + 28.66}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 13.5\n\t\t\t\t\t\t\t\t  }\n                            L ${coordinates[0][0] + 28.66}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 57.5\n\t\t\t\t\t\t\t\t  }\n                            A 1, 1, 0, 0, 1, ${coordinates[0][0] + 27.66}, ${\n\t\t\t\t\t\t\t\t\t\tcoordinates[0][1] + 58.5\n\t\t\t\t\t\t\t\t  }\n                            Z\n                        `\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstroke=\"#cccccc\"\n\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></path>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 21.37\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 56.612\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] - 46.84\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 40.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 58.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 31.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tfontWeight=\"bold\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{format(date, 'yyyy-MM-dd')}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 21.37\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 56.612\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] - 46.84\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 23.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 75.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 48.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${action}:`}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx={\n\t\t\t\t\t\t\t\tcoordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] + 27.63\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][0] - 7.112\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 3.34\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ty={\n\t\t\t\t\t\t\t\tcoordinates[0][1] - 59.5 > 9\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] - 23.95\n\t\t\t\t\t\t\t\t\t: coordinates[0][0] + 54.13 < 606\n\t\t\t\t\t\t\t\t\t? coordinates[0][1] + 75.73\n\t\t\t\t\t\t\t\t\t: coordinates[0][1] + 48.05\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tfontWeight=\"bold\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#000000\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{valueForDate}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t);\n\t\t\tsetToolTip(newToolTip);\n\t\t} else {\n\t\t\tsetToolTip(null);\n\t\t}\n\t};\n\n\tconst svg = (\n\t\t<svg width=\"620\" height=\"400\" onMouseOver={svgMouseOverHandler}>\n\t\t\t<defs id=\"abstract-renderer-id-0\">\n\t\t\t\t<clipPath id=\"abstract-renderer-id-1\">\n\t\t\t\t\t<rect x=\"55\" y=\"10\" width=\"550\" height=\"280\"></rect>\n\t\t\t\t</clipPath>\n\t\t\t\t<filter id=\"abstract-renderer-id-2\">\n\t\t\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"2\"></feGaussianBlur>\n\t\t\t\t\t<feOffset dx=\"1\" dy=\"1\"></feOffset>\n\t\t\t\t\t<feComponentTransfer>\n\t\t\t\t\t\t<feFuncA type=\"linear\" slope=\"0.1\"></feFuncA>\n\t\t\t\t\t</feComponentTransfer>\n\t\t\t\t\t<feMerge>\n\t\t\t\t\t\t<feMergeNode></feMergeNode>\n\t\t\t\t\t\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\n\t\t\t\t\t</feMerge>\n\t\t\t\t</filter>\n\t\t\t</defs>\n\t\t\t<rect\n\t\t\t\tx=\"0\"\n\t\t\t\ty=\"0\"\n\t\t\t\twidth=\"620\"\n\t\t\t\theight=\"400\"\n\t\t\t\tstroke=\"none\"\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\tfill=\"#ffffff\"\n\t\t\t></rect>\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tx=\"156\"\n\t\t\t\t\ty=\"365\"\n\t\t\t\t\twidth=\"347\"\n\t\t\t\t\theight=\"13\"\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t></rect>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\tsetHoveredAddedBars((previous) => previous.map((_value, i) => true))\n\t\t\t\t\t}\n\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\tsetHoveredAddedBars((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"156\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"67\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"187\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tadded\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"156\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill=\"#3366cc\"\n\t\t\t\t\t></rect>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\tsetHoveredRatingsBars((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => true)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\tsetHoveredRatingsBars((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"244\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"70\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"275\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tratings\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"244\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill=\"#dc3912\"\n\t\t\t\t\t></rect>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\tsetHoveredReviewsBars((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => true)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\tsetHoveredReviewsBars((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"335\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"75\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"366\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\treviews\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"335\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill=\"#ff9900\"\n\t\t\t\t\t></rect>\n\t\t\t\t</g>\n\t\t\t\t<g\n\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\tsetHoveredToReadBars((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => true)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\tsetHoveredToReadBars((previous) =>\n\t\t\t\t\t\t\tprevious.map((_value, i) => false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"431\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"72\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t\t></rect>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\t\tx=\"462\"\n\t\t\t\t\t\t\ty=\"376.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#222222\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto-read\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tx=\"431\"\n\t\t\t\t\t\ty=\"365\"\n\t\t\t\t\t\twidth=\"26\"\n\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\tfill=\"#109618\"\n\t\t\t\t\t></rect>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tx=\"55\"\n\t\t\t\t\ty=\"10\"\n\t\t\t\t\twidth=\"550\"\n\t\t\t\t\theight=\"280\"\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\tfillOpacity=\"0\"\n\t\t\t\t\tfill=\"#ffffff\"\n\t\t\t\t></rect>\n\t\t\t\t<g\n\t\t\t\t\tclipPath={`url(/book/stats?id=${props.bookId}#abstract-renderer-id-1)`}\n\t\t\t\t>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"147\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"238\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"330\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"421\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"513\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"604\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#cccccc\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"101\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"192\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"284\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"375\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"467\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"558\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#ebebeb\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t{addedUpdatesNumbers.map((quantity, index) => {\n\t\t\t\t\t\t\tif (hoveredAddedBars[index]) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetHoveredAddedBars((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"56\"\n\t\t\t\t\t\t\t\t\t\t\ty={10.5 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\theight=\"0.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"#3366cc\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"55.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={10 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 1}\n\t\t\t\t\t\t\t\t\t\t\theight=\"1.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"54.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={9 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 3}\n\t\t\t\t\t\t\t\t\t\t\theight=\"3.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.15\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"53.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={8 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 5}\n\t\t\t\t\t\t\t\t\t\t\theight=\"5.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetHoveredAddedBars((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((_value, i) => i === index)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tx=\"56\"\n\t\t\t\t\t\t\t\t\ty={10.5 + 2 * index}\n\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\theight=\"0.5\"\n\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\tfill=\"#3366cc\"\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{ratingsUpdatesNumbers.map((quantity, index) => {\n\t\t\t\t\t\t\tif (hoveredRatingsBars[index]) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetHoveredRatingsBars((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={index * 2}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"56\"\n\t\t\t\t\t\t\t\t\t\t\ty={11.5 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\theight=\"0.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"#dc3912\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"55.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={11 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 1}\n\t\t\t\t\t\t\t\t\t\t\theight=\"1.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"54.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={10 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 3}\n\t\t\t\t\t\t\t\t\t\t\theight=\"3.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.15\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"53.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={9 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 5}\n\t\t\t\t\t\t\t\t\t\t\theight=\"5.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetHoveredRatingsBars((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((_value, i) => i === index)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tx=\"56\"\n\t\t\t\t\t\t\t\t\ty={11.5 + 2 * index}\n\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\theight=\"0.5\"\n\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\tfill=\"#dc3912\"\n\t\t\t\t\t\t\t\t\tkey={index * 2}\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{reviewsUpdatesNumbers.map((quantity, index) => {\n\t\t\t\t\t\t\tif (hoveredReviewsBars[index]) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetHoveredReviewsBars((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={index * 3}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"56\"\n\t\t\t\t\t\t\t\t\t\t\ty={12.5 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\theight=\"0.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"#ff9900\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"55.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={12 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 1}\n\t\t\t\t\t\t\t\t\t\t\theight=\"1.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"54.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={11 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 3}\n\t\t\t\t\t\t\t\t\t\t\theight=\"3.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.15\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"53.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={10 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 5}\n\t\t\t\t\t\t\t\t\t\t\theight=\"5.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetHoveredReviewsBars((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((_value, i) => i === index)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tx=\"56\"\n\t\t\t\t\t\t\t\t\ty={12.5 + 2 * index}\n\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\theight=\"0.5\"\n\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\tfill=\"#ff9900\"\n\t\t\t\t\t\t\t\t\tkey={index * 3}\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{toReadUpdatesNumbers.map((quantity, index) => {\n\t\t\t\t\t\t\tif (hoveredToReadBars[index]) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetHoveredToReadBars((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkey={index * 4}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"56\"\n\t\t\t\t\t\t\t\t\t\t\ty={13.5 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\t\t\theight=\"0.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"#109618\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"55.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={13 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 1}\n\t\t\t\t\t\t\t\t\t\t\theight=\"1.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"54.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={12 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 3}\n\t\t\t\t\t\t\t\t\t\t\theight=\"3.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.15\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\t\tx=\"53.5\"\n\t\t\t\t\t\t\t\t\t\t\ty={11 + 2 * index}\n\t\t\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit + 5}\n\t\t\t\t\t\t\t\t\t\t\theight=\"5.5\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"#000000\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeOpacity=\"0.05\"\n\t\t\t\t\t\t\t\t\t\t\tfillOpacity=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetHoveredToReadBars((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((_value, i) => i === index)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tx=\"56\"\n\t\t\t\t\t\t\t\t\ty={13.5 + 2 * index}\n\t\t\t\t\t\t\t\t\twidth={quantity * chartUnit}\n\t\t\t\t\t\t\t\t\theight=\"0.5\"\n\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\t\t\tfill=\"#109618\"\n\t\t\t\t\t\t\t\t\tkey={index * 4}\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tx=\"55\"\n\t\t\t\t\t\t\ty=\"10\"\n\t\t\t\t\t\t\twidth=\"1\"\n\t\t\t\t\t\t\theight=\"280\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#333333\"\n\t\t\t\t\t\t></rect>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t\t<g></g>\n\t\t\t\t<g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\tx=\"55.5\"\n\t\t\t\t\t\t\ty=\"309.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\tx=\"147\"\n\t\t\t\t\t\t\ty=\"309.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round(maximumDailyUpdates / 6)\n\t\t\t\t\t\t\t\t: Math.round(maximumDailyUpdates / 6, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\tx=\"238.5\"\n\t\t\t\t\t\t\ty=\"309.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 2) / 6)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 2) / 6, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\tx=\"330\"\n\t\t\t\t\t\t\ty=\"309.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 3) / 6)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 3) / 6, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\tx=\"421.5\"\n\t\t\t\t\t\t\ty=\"309.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 4) / 6)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 4) / 6, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\tx=\"513\"\n\t\t\t\t\t\t\ty=\"309.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates !== 1\n\t\t\t\t\t\t\t\t? Math.round((maximumDailyUpdates * 5) / 6)\n\t\t\t\t\t\t\t\t: Math.round((maximumDailyUpdates * 5) / 6, 1)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\tx=\"604.5\"\n\t\t\t\t\t\t\ty=\"309.05\"\n\t\t\t\t\t\t\tfontFamily=\"Arial\"\n\t\t\t\t\t\t\tfontSize=\"13\"\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\t\t\t\tfill=\"#444444\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{maximumDailyUpdates}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t\t<g>{toolTip}</g>\n\t\t</svg>\n\t);\n\n\tconst table = (\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th colSpan=\"2\">books added</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>date</th>\n\t\t\t\t\t<th>added</th>\n\t\t\t\t\t<th>ratings</th>\n\t\t\t\t\t<th>reviews</th>\n\t\t\t\t\t<th>to-read</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{eachDayOfInterval(interval).map((date, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t<td>{format(date, 'yyyy-MM-dd')}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-book'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'rate-book'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-review'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatusUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(update.date.toDate(), date) &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.action === 'add-book' &&\n\t\t\t\t\t\t\t\t\t\t\tupdate.shelf === 'to-read'\n\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t</table>\n\t);\n\n\tconst bottomSection = loaded ? (\n\t\t<div className=\"book-stats-page-bottom-section\">\n\t\t\t<button\n\t\t\t\tclassName=\"stats-breakdown-button\"\n\t\t\t\tonClick={(_e) => setTableVisible((previous) => !previous)}\n\t\t\t>\n\t\t\t\tClick here for breakdown\n\t\t\t</button>\n\t\t\t<div className=\"chart-table\">{tableVisible ? table : null}</div>\n\t\t\t<span>\n\t\t\t\tNote: This data corresponds to the date users most recently updated this\n\t\t\t\tbook in their shelves.\n\t\t\t</span>\n\t\t</div>\n\t) : null;\n\n\treturn loaded ? (\n\t\t<div className=\"chart\">\n\t\t\t{svg}\n\t\t\t{bottomSection}\n\t\t</div>\n\t) : null;\n};\n\nBarChart.propTypes = {\n\tbookId: PropTypes.string,\n\tallEditions: PropTypes.bool,\n};\n\nexport default BarChart;\n","import React, { useEffect, useState } from 'react';\nimport Firebase from '../../Firebase';\nimport LinearChart from './LinearChart';\nimport ColumnChart from './ColumnChart';\nimport AreaChart from './AreaChart';\nimport BarChart from './BarChart';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Books/BookStatsForEditionPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookStatsForEditionPage = ({ bookId }) => {\n\tconst [bookInfo, setBookInfo] = useState({ title: '', cover: '' });\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [chartType, setChartType] = useState('LineChart');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tconst bookObj = await trackPromise(\n\t\t\t\tFirebase.queryBookById(user.userUID, bookId)\n\t\t\t);\n\t\t\tsetBookInfo(bookObj);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [bookId, user.userUID]);\n\n\tconst title = loaded ? (\n\t\t<span className=\"book-stats-for-edition-page-title\">\n\t\t\t<a href={Firebase.pageGenerator.generateBookPage(bookId, bookInfo.title)}>\n\t\t\t\t{bookInfo.series !== undefined\n\t\t\t\t\t? `${bookInfo.title} (${bookInfo.series.name}, #${bookInfo.seriesInstance})`\n\t\t\t\t\t: `${bookInfo.title}`}\n\t\t\t</a>\n\t\t\t{' > Stats'}\n\t\t</span>\n\t) : null;\n\n\tconst pageSelectionArea = loaded ? (\n\t\t<div className=\"page-selection-area\">\n\t\t\t<a\n\t\t\t\tclassName=\"all-editions-page-a\"\n\t\t\t\thref={Firebase.pageGenerator.generateBookStatsPage(bookId)}\n\t\t\t>{`All ${bookInfo.otherEditionsPages.length + 1} Editions`}</a>\n\t\t\t<span className=\"just-this-edition-page-span\">{`Just This Editon ${\n\t\t\t\tbookInfo.ISBN !== undefined ? `ISBN ${bookInfo.ISBN}` : ''\n\t\t\t}`}</span>\n\t\t</div>\n\t) : null;\n\n\tconst editionDescriptionArea = loaded ? (\n\t\t<div className=\"edition-description-area\">\n\t\t\t<img\n\t\t\t\tsrc={\n\t\t\t\t\tbookInfo.cover !== undefined\n\t\t\t\t\t\t? bookInfo.cover\n\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t}\n\t\t\t\talt={bookInfo.title}\n\t\t\t></img>\n\t\t\t<span>\n\t\t\t\t<span>Stats for: </span>\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(bookId, bookInfo.title)}\n\t\t\t\t>{`${bookInfo.title}${\n\t\t\t\t\tbookInfo.series !== undefined\n\t\t\t\t\t\t? ` (${bookInfo.series.name}, #${bookInfo.seriesInstance})`\n\t\t\t\t\t\t: ''\n\t\t\t\t}`}</a>\n\t\t\t\t<span>{`${bookInfo.type !== undefined ? ` (${bookInfo.type})` : ''}${\n\t\t\t\t\tbookInfo.ISBN !== undefined ? ` - ${bookInfo.ISBN}` : ''\n\t\t\t\t}`}</span>\n\t\t\t</span>\n\t\t</div>\n\t) : null;\n\n\tconst chartArea = loaded ? (\n\t\t<div className=\"chart-area\">\n\t\t\t<form className=\"chart-type-form\">\n\t\t\t\t<label htmlFor=\"chart-type\">Chart type</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"chart-type\"\n\t\t\t\t\tclassName=\"chart-type-select\"\n\t\t\t\t\tvalue={chartType}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetChartType(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"ColumnChart\">ColumnChart</option>\n\t\t\t\t\t<option value=\"LineChart\">LineChart</option>\n\t\t\t\t\t<option value=\"AreaChart\">AreaChart</option>\n\t\t\t\t\t<option value=\"BarChart\">BarChart</option>\n\t\t\t\t</select>\n\t\t\t</form>\n\t\t\t{chartType === 'ColumnChart' ? (\n\t\t\t\t<ColumnChart bookId={bookId} />\n\t\t\t) : chartType === 'AreaChart' ? (\n\t\t\t\t<AreaChart bookId={bookId} />\n\t\t\t) : chartType === 'BarChart' ? (\n\t\t\t\t<BarChart bookId={bookId} />\n\t\t\t) : (\n\t\t\t\t<LinearChart bookId={bookId} />\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst leftSection = (\n\t\t<div className=\"book-stats-for-edition-page-left-section\">\n\t\t\t{title}\n\t\t\t{pageSelectionArea}\n\t\t\t{editionDescriptionArea}\n\t\t\t{chartArea}\n\t\t</div>\n\t);\n\n\tconst rightSection = loaded ? (\n\t\t<div className=\"book-stats-for-edition-page-right-section\">\n\t\t\t<span>STATS FOR OTHER EDITIONS</span>\n\t\t\t<div className=\"edition-list\">\n\t\t\t\t{bookInfo.otherEditionsPages.map((editionPage, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"edition-card\" key={index}>\n\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tbookInfo.otherEditionsCovers[index] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? bookInfo.otherEditionsCovers[index]\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={bookInfo.otherEditionsTitles[index]}\n\t\t\t\t\t\t\t\t></img>\n\t\t\t\t\t\t\t\t<div className=\"middle-section\">\n\t\t\t\t\t\t\t\t\t<a href={editionPage}>{`${\n\t\t\t\t\t\t\t\t\t\tbookInfo.otherEditionsTitles[index]\n\t\t\t\t\t\t\t\t\t}${\n\t\t\t\t\t\t\t\t\t\tbookInfo.series !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? ` (${bookInfo.series.name}, #${bookInfo.seriesInstance})`\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t}`}</a>\n\t\t\t\t\t\t\t\t\t<span>{`ISBN: ${\n\t\t\t\t\t\t\t\t\t\tbookInfo.otherEditionsISBNs[index] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? bookInfo.otherEditionsISBNs[index]\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t}`}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t<span>{`${bookInfo.otherEditionsAddedBy[index]} people added`}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"book-stats-for-edition-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"book-stats-for-edition-page-main-content\">\n\t\t\t\t{leftSection}\n\t\t\t\t{rightSection}\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookStatsForEditionPage;\n","import React, { useEffect, useState } from 'react';\nimport Firebase from '../../Firebase';\nimport LinearChart from './LinearChart';\nimport ColumnChart from './ColumnChart';\nimport AreaChart from './AreaChart';\nimport BarChart from './BarChart';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Books/BookAllStatsPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookAllStatsPage = ({ bookId }) => {\n\tconst [bookInfo, setBookInfo] = useState({ title: '', cover: '' });\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [chartType, setChartType] = useState('LineChart');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tconst bookObj = await trackPromise(\n\t\t\t\tFirebase.queryBookById(user.userUID, bookId)\n\t\t\t);\n\t\t\tsetBookInfo(bookObj);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [bookId, user.userUID]);\n\n\tconst title = loaded ? (\n\t\t<span className=\"book-all-stats-page-title\">\n\t\t\t<a href={Firebase.pageGenerator.generateBookPage(bookId, bookInfo.title)}>\n\t\t\t\t{bookInfo.series !== undefined\n\t\t\t\t\t? `${bookInfo.title} (${bookInfo.series.name}, #${bookInfo.seriesInstance})`\n\t\t\t\t\t: `${bookInfo.title}`}\n\t\t\t</a>\n\t\t\t{' > Stats'}\n\t\t</span>\n\t) : null;\n\n\tconst pageSelectionArea = loaded ? (\n\t\t<div className=\"page-selection-area\">\n\t\t\t<span className=\"all-editions-page-span\">{`All ${\n\t\t\t\tbookInfo.otherEditionsPages.length + 1\n\t\t\t} Editions`}</span>\n\t\t\t<a\n\t\t\t\tclassName=\"just-this-edition-page-a\"\n\t\t\t\thref={Firebase.pageGenerator.generateBookStatsPageForEdition(bookId)}\n\t\t\t>{`Just This Editon ${\n\t\t\t\tbookInfo.ISBN !== undefined ? `ISBN ${bookInfo.ISBN}` : ''\n\t\t\t}`}</a>\n\t\t</div>\n\t) : null;\n\n\tconst chartArea = loaded ? (\n\t\t<div className=\"chart-area\">\n\t\t\t<form className=\"chart-type-form\">\n\t\t\t\t<label htmlFor=\"chart-type\">Chart type</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"chart-type\"\n\t\t\t\t\tclassName=\"chart-type-select\"\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetChartType(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t\tvalue={chartType}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"ColumnChart\">ColumnChart</option>\n\t\t\t\t\t<option value=\"LineChart\">LineChart</option>\n\t\t\t\t\t<option value=\"AreaChart\">AreaChart</option>\n\t\t\t\t\t<option value=\"BarChart\">BarChart</option>\n\t\t\t\t</select>\n\t\t\t</form>\n\t\t\t{chartType === 'ColumnChart' ? (\n\t\t\t\t<ColumnChart bookId={bookId} />\n\t\t\t) : chartType === 'AreaChart' ? (\n\t\t\t\t<AreaChart bookId={bookId} />\n\t\t\t) : chartType === 'BarChart' ? (\n\t\t\t\t<BarChart bookId={bookId} />\n\t\t\t) : (\n\t\t\t\t<LinearChart bookId={bookId} />\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"book-all-stats-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"book-all-stats-page-main-content\">\n\t\t\t\t{title}\n\t\t\t\t{pageSelectionArea}\n\t\t\t\t{chartArea}\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookAllStatsPage;\n","import React, { useEffect, useState, useLayoutEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Books/SimilarBooksPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst SimilarBooksPage = ({ match }) => {\n\tconst history = useHistory();\n\tconst {\n\t\tparams: { similarBooksPageId },\n\t} = match;\n\tconst [bookInfo, setBookInfo] = useState({ title: '', cover: '' });\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [savingShelves, setSavingShelves] = useState([]);\n\tconst [synopsisHaveButton, setSynopsisHaveButton] = useState([]);\n\tconst [synopsisShowingMore, setSynopsisShowingMore] = useState([]);\n\tconst [\n\t\tareAddShelfInputSectionsHidden,\n\t\tsetAreAddShelfInputSectionsHidden,\n\t] = useState([]);\n\tconst [addShelfInputs, setAddShelfInputs] = useState([]);\n\tconst [exhibitedStarRatings, setExhibitedStarRatings] = useState([]);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tlet bookId = '';\n\t\t\tlet i = 0;\n\t\t\twhile (i < similarBooksPageId.length) {\n\t\t\t\tif (similarBooksPageId[i] !== '.') {\n\t\t\t\t\tbookId += similarBooksPageId[i];\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tconst bookObj = await trackPromise(\n\t\t\t\tFirebase.getAlsoEnjoyedBooksDetailsForBook(user.userUID, bookId)\n\t\t\t);\n\t\t\tlocalStorage.setItem(`alsoEnjoyed${bookId}Obj`, JSON.stringify(bookObj));\n\t\t\tsetBookInfo(bookObj);\n\t\t\tsetSynopsisShowingMore(\n\t\t\t\t[bookObj.mainBook, ...bookObj.alsoEnjoyedBooks].map((_book) => false)\n\t\t\t);\n\t\t\tsetSavingShelves(\n\t\t\t\t[bookObj.mainBook, ...bookObj.alsoEnjoyedBooks].map((_book) => false)\n\t\t\t);\n\t\t\tsetAreAddShelfInputSectionsHidden(\n\t\t\t\t[bookObj.mainBook, ...bookObj.alsoEnjoyedBooks].map((_book) => true)\n\t\t\t);\n\t\t\tsetAddShelfInputs(\n\t\t\t\t[bookObj.mainBook, ...bookObj.alsoEnjoyedBooks].map((_book) => '')\n\t\t\t);\n\t\t\tsetExhibitedStarRatings(\n\t\t\t\t[bookObj.mainBook, ...bookObj.alsoEnjoyedBooks].map((book) =>\n\t\t\t\t\tbook.userRating !== undefined ? book.userRating : 0\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [similarBooksPageId, user.userUID]);\n\n\tuseLayoutEffect(() => {\n\t\tconst synopsis = document.getElementsByClassName('synopsis');\n\t\tsetSynopsisHaveButton(Array.from(synopsis).map((p) => p.scrollHeight > 36));\n\t}, [loaded]);\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = (bookId, index) => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, bookId);\n\t\t\tsetBookInfo((previous) => {\n\t\t\t\tif (index === 0) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...previous,\n\t\t\t\t\t\tmainBook: {\n\t\t\t\t\t\t\t...previous.mainBook,\n\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\talsoEnjoyedBooks: previous.alsoEnjoyedBooks.map((previousObject, i) =>\n\t\t\t\t\t\ti === index\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: previousObject\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (bookId, index, shelf) => {\n\t\tif (bookId !== undefined) {\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t);\n\t\t\tawait Firebase.addBookToShelf(user.userUID, bookId, shelf, history);\n\t\t\tsetBookInfo((previous) => {\n\t\t\t\tif (index === 0) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...previous,\n\t\t\t\t\t\tmainBook: {\n\t\t\t\t\t\t\t...previous.mainBook,\n\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\talsoEnjoyedBooks: previous.alsoEnjoyedBooks.map((previousObject, i) =>\n\t\t\t\t\t\ti === index\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: previousObject\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t});\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t);\n\t\t}\n\t};\n\n\tconst rateBook = async (bookId, index, rating) => {\n\t\tif (bookId !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, bookId, rating, history);\n\t\t\tsetBookInfo((previous, i) => {\n\t\t\t\tif (index === 0) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...previous,\n\t\t\t\t\t\tmainBook: {\n\t\t\t\t\t\t\t...previous.mainBook,\n\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\tprevious.mainBook.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t? previous.mainBook.userStatus\n\t\t\t\t\t\t\t\t\t: 'read',\n\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\talsoEnjoyedBooks: previous.alsoEnjoyedBooks.map((previousObject, i) =>\n\t\t\t\t\t\ti === index\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\t\tpreviousObject.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? previousObject.userStatus\n\t\t\t\t\t\t\t\t\t\t\t: 'read',\n\t\t\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: previousObject\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst pageIndicator = loaded ? (\n\t\t<div className=\"similar-books-page-page-indicator\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\tbookInfo.mainBook.authorId,\n\t\t\t\t\tbookInfo.mainBook.authorName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{bookInfo.mainBook.authorName}\n\t\t\t</a>\n\t\t\t<span className=\"similar-books-page-page-indicator-arrow\"></span>\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\tbookInfo.mainBook.id,\n\t\t\t\t\tbookInfo.mainBook.title\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{bookInfo.mainBook.title}\n\t\t\t</a>\n\t\t\t<span className=\"similar-books-page-page-indicator-arrow\"></span>\n\t\t\t<span>Similar books</span>\n\t\t</div>\n\t) : null;\n\n\tconst title = loaded ? (\n\t\t<h1 className=\"similar-books-page-title\">{`Books similar to ${\n\t\t\tbookInfo.mainBook.title\n\t\t}${\n\t\t\tbookInfo.mainBook.series !== undefined\n\t\t\t\t? ` (${bookInfo.mainBook.series}, #${bookInfo.mainBook.seriesInstance})`\n\t\t\t\t: ''\n\t\t}`}</h1>\n\t) : null;\n\n\tconst generateAddToShelfButton = (bookObject, index) => {\n\t\treturn loaded && bookObject.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject.id, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>{savingShelves[index] ? 'Saving...' : 'Currently Reading'}</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject.id, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>{savingShelves[index] ? 'Saving...' : 'Read'}</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject.id, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>{savingShelves[index] ? 'Saving...' : 'Want to Read'}</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf(bookObject.id, index, 'to-read')}\n\t\t\t>\n\t\t\t\t{savingShelves[index] ? 'Saving...' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst generateBookOptionsDropdown = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t? 'book-options-dropdown'\n\t\t\t\t\t\t\t: 'book-options-dropdown expanded'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tbookObject.userStatus === 'to-read'\n\t\t\t\t\t\t\t\t\t? 'dropdown-want-to-read-button bold'\n\t\t\t\t\t\t\t\t\t: 'dropdown-want-to-read-button'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject.id, index, 'to-read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWant to Read\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tbookObject.userStatus === 'reading'\n\t\t\t\t\t\t\t\t\t? 'dropdown-reading-button bold'\n\t\t\t\t\t\t\t\t\t: 'dropdown-want-reading-button'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject.id, index, 'reading')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tbookObject.userStatus === 'read'\n\t\t\t\t\t\t\t\t\t? 'dropdown-read-button bold'\n\t\t\t\t\t\t\t\t\t: 'dropdown-read-button'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject.id, index, 'read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRead\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t\t\t? 'dropdown-add-shelf'\n\t\t\t\t\t\t\t\t\t: 'dropdown-add-shelf hidden'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"New Shelf Name\"\n\t\t\t\t\t\t\t\tvalue={addShelfInputs[index]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\tsetAddShelfInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? newValue : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tdisabled={addShelfInputs[index].length === 0}\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (addShelfInputs[index].length > 0) {\n\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.rootBook,\n\t\t\t\t\t\t\t\t\t\t\taddShelfInputs[index],\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst generateBookCard = (bookObject, index) => {\n\t\tconst ratingCount =\n\t\t\tbookObject.fiveRatings +\n\t\t\tbookObject.fourRatings +\n\t\t\tbookObject.threeRatings +\n\t\t\tbookObject.twoRatings +\n\t\t\tbookObject.oneRatings;\n\n\t\tconst generalRating =\n\t\t\tratingCount !== 0\n\t\t\t\t? (\n\t\t\t\t\t\t(bookObject.fiveRatings * 5 +\n\t\t\t\t\t\t\tbookObject.fourRatings * 4 +\n\t\t\t\t\t\t\tbookObject.threeRatings * 3 +\n\t\t\t\t\t\t\tbookObject.twoRatings * 2 +\n\t\t\t\t\t\t\tbookObject.oneRatings) /\n\t\t\t\t\t\tratingCount\n\t\t\t\t  ).toFixed(2)\n\t\t\t\t: 0;\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tindex === bookInfo.alsoEnjoyedBooks.length\n\t\t\t\t\t\t? 'similar-books-page-book-card borderless'\n\t\t\t\t\t\t: 'similar-books-page-book-card'\n\t\t\t\t}\n\t\t\t\tkey={index}\n\t\t\t>\n\t\t\t\t<div className=\"similar-books-page-book-card-left-section\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\tbookObject.id,\n\t\t\t\t\t\t\tbookObject.title\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\tbookObject.cover !== undefined\n\t\t\t\t\t\t\t\t\t? bookObject.cover\n\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt={bookObject.title}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"similar-books-page-book-card-right-section\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"book-card-book-title-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\tbookObject.id,\n\t\t\t\t\t\t\tbookObject.title\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`${bookObject.title}${\n\t\t\t\t\t\tbookObject.series !== undefined\n\t\t\t\t\t\t\t? ` (${bookObject.series}, #${bookObject.seriesInstance})`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t}`}</a>\n\t\t\t\t\t<span className=\"author-span\">\n\t\t\t\t\t\tby{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\tbookObject.authorId,\n\t\t\t\t\t\t\t\tbookObject.authorName\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{bookObject.authorName}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t{bookObject.authorIsMember ? (\n\t\t\t\t\t\t\t<div className=\"goodreads-seal\"></div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"book-page-general-rating\">\n\t\t\t\t\t\t<div className=\"book-page-general-rating-stars\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tgeneralRating >= 1\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: generalRating >= 0.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: generalRating > 0\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tgeneralRating >= 2\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: generalRating >= 1.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: generalRating > 1\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tgeneralRating >= 3\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: generalRating >= 2.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: generalRating > 2\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tgeneralRating >= 4\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: generalRating >= 3.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: generalRating > 3\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tgeneralRating >= 5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: generalRating >= 4.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: generalRating > 4\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{!isNaN(generalRating) ? `${generalRating} avg. rating` : ''}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"separator-dot\"></span>\n\t\t\t\t\t\t<span>{`${ratingCount} Ratings`}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-page-synopsis-wrapper\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tsynopsisShowingMore[index]\n\t\t\t\t\t\t\t\t\t? 'book-page-synopsis-area-full'\n\t\t\t\t\t\t\t\t\t: 'book-page-synopsis-area'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{bookObject.preSynopsis !== undefined ? (\n\t\t\t\t\t\t\t\t<p className=\"pre-synopsis\">\n\t\t\t\t\t\t\t\t\t<b>{bookObject.preSynopsis}</b>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<p className=\"synopsis\">{bookObject.synopsis}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{synopsisHaveButton[index] ? (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"synopsis-show-more\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetSynopsisShowingMore((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? !value : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{synopsisShowingMore[index] ? 'Less' : 'More'}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-and-ratings-section\">\n\t\t\t\t\t\t<div className=\"shelf-section\">\n\t\t\t\t\t\t\t{generateAddToShelfButton(bookObject, index)}\n\t\t\t\t\t\t\t{generateBookOptionsDropdown(bookObject, index)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"rating-section\">\n\t\t\t\t\t\t\t{bookObject.userRating === undefined ? (\n\t\t\t\t\t\t\t\t<span>Rate it: </span>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span>Your rating: </span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\texhibitedStarRatings[index] > 0\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 1 : value))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() => rateBook(bookObject.id, index, 1)}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\texhibitedStarRatings[index] > 1\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 2 : value))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() => rateBook(bookObject.id, index, 2)}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\texhibitedStarRatings[index] > 2\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 3 : value))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() => rateBook(bookObject.id, index, 3)}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\texhibitedStarRatings[index] > 3\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 4 : value))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() => rateBook(bookObject.id, index, 4)}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\texhibitedStarRatings[index] > 4\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 5 : value))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() => rateBook(bookObject.id, index, 5)}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"similar-books-page-main-content\">\n\t\t\t{pageIndicator}\n\t\t\t{title}\n\t\t\t<div className=\"main-book-card\">\n\t\t\t\t{generateBookCard(bookInfo.mainBook, 0)}\n\t\t\t</div>\n\t\t\t<span>Goodreads members who liked this book also liked:</span>\n\t\t\t<div className=\"similar-books-cards\">\n\t\t\t\t{bookInfo.alsoEnjoyedBooks.map((book, index) =>\n\t\t\t\t\tgenerateBookCard(book, index + 1)\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"similar-books-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default SimilarBooksPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Firebase from '../../Firebase';\nimport { format } from 'date-fns';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Books/BookEditionsPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookEditionsPage = ({ match }) => {\n\tconst history = useHistory();\n\tconst {\n\t\tparams: { bookEditionsPageId },\n\t} = match;\n\tconst rootBook = bookEditionsPageId.split('.')[0];\n\tconst bookTitle = bookEditionsPageId.split('.')[1].replace(/_/g, ' ');\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [editionsInfo, setEditionsInfo] = useState([]);\n\tconst [detailsExpanding, setDetailsExpanding] = useState([]);\n\tconst [defaultExpanding, setDefaultExpanding] = useState(false);\n\tconst [editionsPerPage, setEditionsPerPage] = useState(10);\n\tconst [page, setPage] = useState(1);\n\tconst [formatFilter, setFormatFilter] = useState('');\n\tconst [sortOrder, setSortOrder] = useState('num ratings');\n\tconst [savingShelves, setSavingShelves] = useState([]);\n\tconst [\n\t\tareAddShelfInputSectionsHidden,\n\t\tsetAreAddShelfInputSectionsHidden,\n\t] = useState([]);\n\tconst [addShelfInputs, setAddShelfInputs] = useState([]);\n\tconst [exhibitedStarRatings, setExhibitedStarRatings] = useState([]);\n\tconst [areShelfPopupsHidden, setAreShelfPopupsHidden] = useState([]);\n\tconst [areShelfPopupsBottomHidden, setAreShelfPopupsBottomHidden] = useState(\n\t\t[]\n\t);\n\tconst [shelfPopupReadingInputs, setShelfPopupReadingInputs] = useState([]);\n\tconst [shelfPopupToReadInputs, setShelfPopupToReadInputs] = useState([]);\n\tconst [editionOnUserShelf, setEditionOnUserShelf] = useState(null);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getEditionsInfo = async () => {\n\t\t\tconst editionsObj = await trackPromise(\n\t\t\t\tFirebase.getEditionDetailsForBook(user.userUID, rootBook)\n\t\t\t);\n\t\t\tlocalStorage.setItem(\n\t\t\t\t`editions${rootBook}Obj`,\n\t\t\t\tJSON.stringify(editionsObj)\n\t\t\t);\n\t\t\tsetEditionsInfo(editionsObj);\n\t\t\tsetDetailsExpanding(editionsObj.map((_edition) => false));\n\t\t\tsetSavingShelves(editionsObj.map((_edition) => false));\n\t\t\tsetAreAddShelfInputSectionsHidden(editionsObj.map((_edition) => true));\n\t\t\tsetAddShelfInputs(editionsObj.map((_edition) => ''));\n\t\t\tsetExhibitedStarRatings(\n\t\t\t\teditionsObj.map((edition) =>\n\t\t\t\t\tedition.userRating !== undefined ? edition.userRating : 0\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetAreShelfPopupsHidden(editionsObj.map((_edition) => true));\n\t\t\tsetAreShelfPopupsBottomHidden(editionsObj.map((_edition) => true));\n\t\t\tsetShelfPopupReadingInputs(editionsObj.map((_edition) => ''));\n\t\t\tsetShelfPopupToReadInputs(editionsObj.map((_edition) => ''));\n\t\t\tsetEditionOnUserShelf(\n\t\t\t\teditionsObj.filter((edition) => edition.userStatus !== undefined)\n\t\t\t\t\t.length > 0\n\t\t\t\t\t? editionsObj.filter((edition) => edition.userStatus !== undefined)[0]\n\t\t\t\t\t\t\t.id\n\t\t\t\t\t: null\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetEditionsInfo();\n\t}, [rootBook, user.userUID]);\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = (editionObject, index) => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, editionObject.id);\n\t\t\tsetEditionsInfo((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (editionObject, index, shelf) => {\n\t\tif (editionObject.id !== undefined) {\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t);\n\t\t\tawait Firebase.addBookToShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\teditionObject.id,\n\t\t\t\tshelf,\n\t\t\t\thistory\n\t\t\t);\n\t\t\tsetEditionsInfo((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t);\n\t\t}\n\t};\n\n\tconst rateBook = async (editionObject, index, rating) => {\n\t\tif (editionObject.id !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, editionObject.id, rating, history);\n\t\t\tsetEditionsInfo((previous, i) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\tpreviousObject.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t\t? previousObject.userStatus\n\t\t\t\t\t\t\t\t\t\t: 'read',\n\t\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateProgress = async (editionObject, index, pages) => {\n\t\tif (\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined &&\n\t\t\teditionObject.id !== undefined &&\n\t\t\tpages.length > 0\n\t\t) {\n\t\t\tawait Firebase.updateBookInShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\teditionObject.id,\n\t\t\t\tparseInt(pages)\n\t\t\t);\n\t\t\tsetEditionsInfo((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? { ...previousObject, userProgress: pages }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst generateAddToShelfButton = (editionObject, index) => {\n\t\treturn loaded && editionObject.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up reading\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>Update your reading progress:</b>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tI'm on page{' '}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupReadingInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t\t\t? 'page-progress-input'\n\t\t\t\t\t\t\t\t\t\t\t: 'page-progress-input white-background'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupReadingInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\tof {editionObject.pageCount}.{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t? 'shelf-pop-up-bottom hidden'\n\t\t\t\t\t\t\t\t\t: 'shelf-pop-up-bottom'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tupdateProgress(\n\t\t\t\t\t\t\t\t\t\teditionObject,\n\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\tshelfPopupReadingInputs[index]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-finished-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tchangeBookShelf(editionObject, index, 'read');\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFinished book\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(editionObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Currently Reading</span>\n\t\t\t</div>\n\t\t) : loaded && editionObject.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<div className=\"shelf-pop-up-wrapper\">\n\t\t\t\t\t<div className=\"shelf-pop-up read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\teditionObject.id\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(editionObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Read</span>\n\t\t\t</div>\n\t\t) : loaded && editionObject.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up to-read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupToReadInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName=\"shelf-pop-up-to-read-input\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupToReadInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\ton your <b>To Read</b> shelf.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{areShelfPopupsBottomHidden[index] ? (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tFirebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\teditionObject.id,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(shelfPopupToReadInputs[index])\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetEditionsInfo((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((previousObject, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoReadBookPosition: parseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelfPopupToReadInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t: previousObject\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(editionObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Want to Read</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf(editionObject, index, 'to-read')}\n\t\t\t>\n\t\t\t\t{savingShelves[index] ? '...saving' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst generateBookOptionsDropdown = (editionObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t\t<div className=\"book-options-dropdown\">\n\t\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(editionObject, index, 'read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRead\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-currently-reading-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(editionObject, index, 'reading')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-want-to-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(editionObject, index, 'to-read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWant to Read\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf\"\n\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={addShelfInputs[index]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\tsetAddShelfInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? newValue : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (addShelfInputs[index].length > 0) {\n\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\teditionObject.rootBook,\n\t\t\t\t\t\t\t\t\t\t\taddShelfInputs[index],\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst generateRateBookSection = (editionObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-rate-book\">\n\t\t\t\t{editionObject.userRating === undefined ? null : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"clear-rating-button\"\n\t\t\t\t\t\tonClick={() => rateBook(editionObject, index, undefined)}\n\t\t\t\t\t>\n\t\t\t\t\t\tClear rating\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{editionObject.userRating === undefined ? (\n\t\t\t\t\t<span className=\"rate-this-book\">Rate this book</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"rate-this-book my-rating\">My rating:</span>\n\t\t\t\t)}\n\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 0\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 1 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && editionObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? editionObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(editionObject, index, 1)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 1\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 2 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && editionObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? editionObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(editionObject, index, 2)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 2\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 3 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && editionObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? editionObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(editionObject, index, 3)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 3\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 4 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && editionObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? editionObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(editionObject, index, 4)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 4\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 5 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && editionObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? editionObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(editionObject, index, 5)}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst generateEditionCard = (editionObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-editions-page-edition-card\" key={index}>\n\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t<div className=\"cover-section\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\teditionObject.id,\n\t\t\t\t\t\t\t\teditionObject.title\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\teditionObject.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t? editionObject.cover\n\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\talt={editionObject.title}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"info-section\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"edition-title-a\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\teditionObject.id,\n\t\t\t\t\t\t\t\teditionObject.title\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${editionObject.title}${\n\t\t\t\t\t\t\t\teditionObject.type !== undefined\n\t\t\t\t\t\t\t\t\t? ` (${editionObject.type})`\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span className=\"published-span\">{`${\n\t\t\t\t\t\t\teditionObject.publishedDate !== undefined &&\n\t\t\t\t\t\t\teditionObject.publisher !== undefined\n\t\t\t\t\t\t\t\t? `Published ${format(\n\t\t\t\t\t\t\t\t\t\teditionObject.publishedDate,\n\t\t\t\t\t\t\t\t\t\t'MMMM do yyyy'\n\t\t\t\t\t\t\t\t  )} by ${editionObject.publisher}`\n\t\t\t\t\t\t\t\t: editionObject.publisher !== undefined\n\t\t\t\t\t\t\t\t? `Published by ${editionObject.publisher}`\n\t\t\t\t\t\t\t\t: editionObject.publishedDate !== undefined\n\t\t\t\t\t\t\t\t? `Published ${format(\n\t\t\t\t\t\t\t\t\t\teditionObject.publishedDate,\n\t\t\t\t\t\t\t\t\t\t'MMMM do yyyy'\n\t\t\t\t\t\t\t\t  )}`\n\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t}`}</span>\n\t\t\t\t\t\t<span className=\"format-and-pages\">\n\t\t\t\t\t\t\t{editionObject.type !== undefined &&\n\t\t\t\t\t\t\teditionObject.pageCount !== undefined\n\t\t\t\t\t\t\t\t? `${editionObject.type}, ${editionObject.pageCount} pages`\n\t\t\t\t\t\t\t\t: editionObject.type !== undefined\n\t\t\t\t\t\t\t\t? `${editionObject.type}`\n\t\t\t\t\t\t\t\t: editionObject.pageCount !== undefined\n\t\t\t\t\t\t\t\t? `${editionObject.pageCount} pages`\n\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<table\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tdetailsExpanding[index]\n\t\t\t\t\t\t\t\t\t? 'info-section-more-details'\n\t\t\t\t\t\t\t\t\t: 'info-section-more-details hidden'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr className=\"info-section-more-details-author\">\n\t\t\t\t\t\t\t\t\t<th>Author(s):</th>\n\t\t\t\t\t\t\t\t\t<td className=\"authors-td\">\n\t\t\t\t\t\t\t\t\t\t{editionObject.authorPages.map((authorPage, i) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<span key={i}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={authorPage}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{editionObject.authorNames[i]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{i !== 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"author-function\">{` (${editionObject.authorFunctions[i]})`}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{i !== editionObject.authorPages.length - 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? ', '\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t{editionObject.ISBN !== undefined ? (\n\t\t\t\t\t\t\t\t\t<tr className=\"info-section-more-details-ISBN\">\n\t\t\t\t\t\t\t\t\t\t<th>ISBN:</th>\n\t\t\t\t\t\t\t\t\t\t<td className=\"isbn-td\">{editionObject.ISBN}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t{editionObject.language !== undefined ? (\n\t\t\t\t\t\t\t\t\t<tr className=\"info-section-more-details-language\">\n\t\t\t\t\t\t\t\t\t\t<th>Edition language:</th>\n\t\t\t\t\t\t\t\t\t\t<td className=\"language-td\">{editionObject.language}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<tr className=\"info-section-more-details-rating\">\n\t\t\t\t\t\t\t\t\t<th>Average rating:</th>\n\t\t\t\t\t\t\t\t\t<td className=\"average-rating-td\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"rating-value-span\">\n\t\t\t\t\t\t\t\t\t\t\t{Math.round(editionObject.thisEditionRating, 2)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"rating-count-span\">{` (${editionObject.thisEditionRatings} ratings)`}</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"more-less-detail-button\"\n\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\tsetDetailsExpanding((previous) =>\n\t\t\t\t\t\t\t\t\tprevious.map((previousValue, i) =>\n\t\t\t\t\t\t\t\t\t\ti === index ? !previousValue : previousValue\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{detailsExpanding[index] ? 'less detail' : 'more detail'}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{editionOnUserShelf === null ||\n\t\t\t\teditionOnUserShelf === editionObject.id ? (\n\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`want-to-read-button-and-options ${\n\t\t\t\t\t\t\t\teditionObject.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t? editionObject.userStatus\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{generateAddToShelfButton(editionObject, index)}\n\t\t\t\t\t\t\t{generateBookOptionsDropdown(editionObject, index)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{generateRateBookSection(editionObject, index)}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"switch-to-edition-button\"\n\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\tawait Firebase.switchBookEditionForUser(\n\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\teditionOnUserShelf,\n\t\t\t\t\t\t\t\teditionObject.id\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsetEditionOnUserShelf(editionObject.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tSwitch to This Edition\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst sortedEditionCards = loaded\n\t\t? editionsInfo\n\t\t\t\t.filter(\n\t\t\t\t\t(edition) => edition.type === formatFilter || formatFilter === ''\n\t\t\t\t)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tswitch (sortOrder) {\n\t\t\t\t\t\tcase 'title':\n\t\t\t\t\t\t\treturn a.title < b.title ? -1 : 1;\n\t\t\t\t\t\tcase 'original date published':\n\t\t\t\t\t\t\treturn a.publishedDate - b.publishedDate;\n\t\t\t\t\t\tcase 'date published':\n\t\t\t\t\t\t\treturn b.publishedDate - a.publishedDate;\n\t\t\t\t\t\tcase 'avg rating':\n\t\t\t\t\t\t\treturn b.thisEditionRating - a.thisEditionRating;\n\t\t\t\t\t\tcase 'num ratings':\n\t\t\t\t\t\t\treturn b.thisEditionRatings - a.thisEditionRatings;\n\t\t\t\t\t\tcase 'format':\n\t\t\t\t\t\t\treturn a.type < b.type ? -1 : 1;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.map((edition, index) => generateEditionCard(edition, index))\n\t\t: null;\n\n\tconst editionCardList = loaded ? (\n\t\t<div className=\"book-editions-page-edition-card-list\">\n\t\t\t{sortedEditionCards.length > 0 ? (\n\t\t\t\tsortedEditionCards.filter((_editionCard, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tindex >= (page - 1) * 10 &&\n\t\t\t\t\t\tindex + 1 <= (page - 1) * 10 + editionsPerPage\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t) : (\n\t\t\t\t<span className=\"no-editions-with-format-span\">{`There are no editions with format ${formatFilter}.`}</span>\n\t\t\t)}\n\t\t\t{Math.ceil(sortedEditionCards.length / editionsPerPage) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(sortedEditionCards.length / editionsPerPage),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\tpage === Math.ceil(sortedEditionCards.length / editionsPerPage)\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst editionsPerPageSelectionArea = loaded ? (\n\t\t<div className=\"editions-per-page-selection-area\">\n\t\t\t<label htmlFor=\"editions-per-page\">per page</label>\n\t\t\t<select\n\t\t\t\tname=\"editions-per-page\"\n\t\t\t\tvalue={editionsPerPage}\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tsetPage(1);\n\t\t\t\t\tsetEditionsPerPage(parseInt(e.target.value));\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t<option value=\"25\">25</option>\n\t\t\t\t<option value=\"50\">50</option>\n\t\t\t\t<option value=\"75\">75</option>\n\t\t\t\t<option value=\"100\">100</option>\n\t\t\t</select>\n\t\t</div>\n\t) : null;\n\n\tconst pageTitle = loaded ? (\n\t\t<div className=\"book-editions-page-title\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\teditionsInfo.filter((edition) => edition.isMainEdition)[0].id,\n\t\t\t\t\tbookTitle\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{bookTitle}\n\t\t\t</a>\n\t\t\t<span>{'>'}</span>\n\t\t\t<span>Editions</span>\n\t\t</div>\n\t) : null;\n\n\tconst pageInfoAndFiltersTop = loaded ? (\n\t\t<div className=\"book-editions-page-info-and-filters-top\">\n\t\t\t<div className=\"book-editions-page-info-and-filters-top-left\">\n\t\t\t\t<span className=\"author-name-field\">\n\t\t\t\t\t<span>{'by '}</span>\n\t\t\t\t\t<a href={editionsInfo[0].authorPages[0]}>\n\t\t\t\t\t\t{editionsInfo[0].authorNames[0]}\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t\t<span className=\"first-published-date-field\">\n\t\t\t\t\t{`First published ${format(\n\t\t\t\t\t\teditionsInfo.reduce((previous, current) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tprevious.publishedDate === undefined ||\n\t\t\t\t\t\t\t\tcurrent.publishedDate < previous.publishedDate\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn current.publishedDate;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn previous.publishedDate;\n\t\t\t\t\t\t}, editionsInfo[0].publishedDate),\n\t\t\t\t\t\t'MMMM do yyyy'\n\t\t\t\t\t)}`}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"book-editions-page-info-and-filters-top-right\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"expand-collapse-details-button\"\n\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\tif (defaultExpanding) {\n\t\t\t\t\t\t\tsetDetailsExpanding((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((_value) => false)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsetDefaultExpanding(false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetDetailsExpanding((previous) => previous.map((_value) => true));\n\t\t\t\t\t\t\tsetDefaultExpanding(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{defaultExpanding ? 'collapse details' : 'expand details'}\n\t\t\t\t</button>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"add-new-edition-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateAddBookPage()}\n\t\t\t\t>\n\t\t\t\t\tAdd a new edition\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst pageInfoAndFiltersBottom = loaded ? (\n\t\t<div className=\"book-editions-page-info-and-filters-bottom\">\n\t\t\t<div className=\"book-editions-page-info-and-filters-bottom-left\">\n\t\t\t\t<span className=\"editions-bold\">Editions</span>\n\t\t\t\t<span className=\"page-showing-numbers-span\">{`Showing ${\n\t\t\t\t\tsortedEditionCards.length > 0 ? (page - 1) * 10 + 1 : 0\n\t\t\t\t}-${\n\t\t\t\t\t(page - 1) * 10 + editionsPerPage <= sortedEditionCards.length\n\t\t\t\t\t\t? (page - 1) * 10 + editionsPerPage\n\t\t\t\t\t\t: sortedEditionCards.length\n\t\t\t\t} of ${sortedEditionCards.length}`}</span>\n\t\t\t</div>\n\t\t\t<div className=\"book-editions-page-info-and-filters-bottom-right\">\n\t\t\t\t<label htmlFor=\"format\">Format</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"format\"\n\t\t\t\t\tvalue={formatFilter}\n\t\t\t\t\tclassName=\"format-select\"\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetPage(1);\n\t\t\t\t\t\tsetFormatFilter(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t<option value=\"Paperback\">Paperback</option>\n\t\t\t\t\t<option value=\"Hardcover\">Hardcover</option>\n\t\t\t\t\t<option value=\"Mass Market Paperback\">Mass Market Paperback</option>\n\t\t\t\t\t<option value=\"Kindle Edition\">Kindle Edition</option>\n\t\t\t\t\t<option value=\"Nook\">Nook</option>\n\t\t\t\t\t<option value=\"ebook\">ebook</option>\n\t\t\t\t\t<option value=\"Library Binding\">Library Binding</option>\n\t\t\t\t\t<option value=\"Audiobook\">Audiobook</option>\n\t\t\t\t\t<option value=\"Audio CD\">Audio CD</option>\n\t\t\t\t\t<option value=\"Audio Cassette\">Audio Cassette</option>\n\t\t\t\t\t<option value=\"Audible Audio\">Audible Audio</option>\n\t\t\t\t\t<option value=\"CD-ROM\">CD-ROM</option>\n\t\t\t\t\t<option value=\"MP3 CD\">MP3 CD</option>\n\t\t\t\t\t<option value=\"Board book\">Board book</option>\n\t\t\t\t\t<option value=\"Leather Bound\">Leather Bound</option>\n\t\t\t\t\t<option value=\"Unbound\">Unbound</option>\n\t\t\t\t\t<option value=\"Spiral-bound\">Spiral-bound</option>\n\t\t\t\t\t<option value=\"Unknown Binding\">Unknown Binding</option>\n\t\t\t\t</select>\n\t\t\t\t<label htmlFor=\"sort-order\">Sort by</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"sort-order\"\n\t\t\t\t\tvalue={sortOrder}\n\t\t\t\t\tclassName=\"sort-order-select\"\n\t\t\t\t\tonChange={(e) => setSortOrder(e.target.value)}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"title\">title</option>\n\t\t\t\t\t<option value=\"original date published\">\n\t\t\t\t\t\toriginal date published\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"date published\">date published</option>\n\t\t\t\t\t<option value=\"avg rating\">avg rating</option>\n\t\t\t\t\t<option value=\"num ratings\">num ratings</option>\n\t\t\t\t\t<option value=\"format\">format</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst pageInfoAndFilters = (\n\t\t<div className=\"page-info-and-filters\">\n\t\t\t{pageInfoAndFiltersTop}\n\t\t\t{pageInfoAndFiltersBottom}\n\t\t</div>\n\t);\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"book-editions-page-main-content\">\n\t\t\t{pageTitle}\n\t\t\t{pageInfoAndFilters}\n\t\t\t{editionCardList}\n\t\t\t{editionsPerPageSelectionArea}\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"book-editions-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookEditionsPage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Books/BookCoverPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookCoverPage = ({ match }) => {\n\tconst {\n\t\tparams: { bookCoverPageId },\n\t} = match;\n\tconst bookId = bookCoverPageId.split('.')[0];\n\tconst bookTitle = bookCoverPageId.split('.')[1].replace(/_/g, ' ');\n\tconst [bookPhotos, setBookPhotos] = useState(null);\n\tconst [loaded, setLoaded] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tconst bookPhotosObj = await trackPromise(Firebase.getBookPhotos(bookId));\n\t\t\tsetBookPhotos(bookPhotosObj);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [bookId]);\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"book-cover-page-main-content\">\n\t\t\t<div className=\"main-content-left-section\">\n\t\t\t\t<span className=\"book-cover-page-title\">\n\t\t\t\t\t<a href={Firebase.pageGenerator.generateBookPage(bookId, bookTitle)}>\n\t\t\t\t\t\t{bookTitle}\n\t\t\t\t\t</a>\n\t\t\t\t\t<span>{'>'}</span>\n\t\t\t\t\t<span>Cover</span>\n\t\t\t\t</span>\n\t\t\t\t<a href={Firebase.pageGenerator.generateBookPage(bookId, bookTitle)}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tbookPhotos.cover !== undefined\n\t\t\t\t\t\t\t\t? bookPhotos.cover\n\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={`${bookTitle} cover`}\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div className=\"main-content-right-section\">\n\t\t\t\t<span className=\"main-content-right-section-title-span\">\n\t\t\t\t\t{`${bookTitle.toUpperCase()} PHOTOS`}\n\t\t\t\t</span>\n\t\t\t\t{bookPhotos.photos.length > 0 ? (\n\t\t\t\t\t<div className=\"photo-list\">\n\t\t\t\t\t\t{bookPhotos.photos.map((photo, index) => (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPhotoPage(\n\t\t\t\t\t\t\t\t\tbookId,\n\t\t\t\t\t\t\t\t\tbookTitle,\n\t\t\t\t\t\t\t\t\tphoto.id\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img src={photo.url} alt={`${bookTitle} ${photo.type}`} />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"no-photos-yet-span\">\n\t\t\t\t\t\tThis book has no photos yet.\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"book-cover-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookCoverPage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Books/BookPhotoPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookPhotoPage = ({ match, location }) => {\n\tconst {\n\t\tparams: { bookPhotoPageId },\n\t} = match;\n\tconst photoId = new URLSearchParams(location.search).get('photo');\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [photoInfo, setPhotoInfo] = useState(null);\n\tconst bookId = bookPhotoPageId.split('.')[0];\n\tconst bookTitle = bookPhotoPageId.split('.')[1].replace(/_/g, ' ');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst loadInfo = async () => {\n\t\t\tconst photoObj = await trackPromise(\n\t\t\t\tFirebase.getPhotoDetails(user.userUID, photoId)\n\t\t\t);\n\t\t\tsetPhotoInfo(photoObj);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tloadInfo();\n\t}, [user.userUID, photoId]);\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"book-photo-page-main-content\">\n\t\t\t<span className=\"book-photo-page-title\">\n\t\t\t\t<a href={Firebase.pageGenerator.generateBookPage(bookId, bookTitle)}>\n\t\t\t\t\t{bookTitle}\n\t\t\t\t</a>\n\t\t\t\t<span>{'>'}</span>\n\t\t\t\t<span>Photos</span>\n\t\t\t\t<span>{'>'}</span>\n\t\t\t\t<span>{photoInfo.type}</span>\n\t\t\t</span>\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateBookPhotoPage(\n\t\t\t\t\tbookId,\n\t\t\t\t\tbookTitle,\n\t\t\t\t\tphotoId\n\t\t\t\t)}\n\t\t\t\tclassName=\"small-photo-a\"\n\t\t\t>\n\t\t\t\t<img src={photoInfo.url} alt={photoInfo.type} />\n\t\t\t</a>\n\t\t\t<div className=\"main-photo-section\">\n\t\t\t\t<a className=\"largest-size-a\" href={photoInfo.url}>\n\t\t\t\t\tlargest size\n\t\t\t\t</a>\n\t\t\t\t<img src={photoInfo.url} alt={photoInfo.type} />\n\t\t\t\t<span className=\"views-span\">{`Views: ${photoInfo.usersWhoViewed.length}`}</span>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"book-photo-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookPhotoPage;\n","import React, { useState, useEffect, useRef } from 'react';\nimport Firebase from '../../Firebase';\nimport { useHistory } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport '../styles/Books/AddNewBookPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst AddNewBookPage = ({ location }) => {\n\tconst history = useHistory();\n\tconst query = new URLSearchParams(location.search);\n\tconst authorName = query.get('author');\n\tconst bookTitle = query.get('title');\n\tconst bookId = query.get('work[id]');\n\tconst fileInput = useRef();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [description, setDescription] = useState('');\n\tconst [titleInput, setTitleInput] = useState(\n\t\tbookTitle !== null ? bookTitle : ''\n\t);\n\tconst [mainAuthorNameInput, setMainAuthorNameInput] = useState(\n\t\tauthorName !== null ? authorName : ''\n\t);\n\tconst [mainAuthorRoleInput, setMainAuthorRoleInput] = useState(null);\n\tconst [otherAuthorNameInputs, setOtherAuthorNameInputs] = useState([]);\n\tconst [otherAuthorRoleInputs, setOtherAuthorRoleInputs] = useState([]);\n\tconst [isbnInput, setIsbnInput] = useState('');\n\tconst [publisherInput, setPublisherInput] = useState('');\n\tconst [publishedYearInput, setPublishedYearInput] = useState('');\n\tconst [publishedMonthInput, setPublishedMonthInput] = useState('');\n\tconst [publishedDayInput, setPublishedDayInput] = useState('');\n\tconst [numberOfPagesInput, setNumberOfPagesInput] = useState('');\n\tconst [formatIsOther, setFormatIsOther] = useState(false);\n\tconst [formatInput, setFormatInput] = useState('');\n\tconst [amazonLinkInput, setAmazonLinkInput] = useState('');\n\tconst [editionLanguageInput, setEditionLanguageInput] = useState('Select...');\n\tconst [originalTitleInput, setOriginalTitleInput] = useState('');\n\tconst [originalPublishedYearInput, setOriginalPublishedYearInput] = useState(\n\t\t''\n\t);\n\tconst [\n\t\toriginalPublishedMonthInput,\n\t\tsetOriginalPublishedMonthInput,\n\t] = useState('');\n\tconst [originalPublishedDayInput, setOriginalPublishedDayInput] = useState(\n\t\t''\n\t);\n\tconst [isTitlePopupHidden, setIsTitlePopupHidden] = useState(true);\n\tconst [isMainAuthorPopupHidden, setIsMainAuthorPopupHidden] = useState(true);\n\tconst [\n\t\tisMainAuthorRolePopupHidden,\n\t\tsetIsMainAuthorRolePopupHidden,\n\t] = useState(true);\n\tconst [isOtherAuthorsPopupHidden, setIsOtherAuthorsPopupHidden] = useState(\n\t\t[]\n\t);\n\tconst [\n\t\tisOtherAuthorsRolesPopupHidden,\n\t\tsetIsOtherAuthorsRolesPopupHidden,\n\t] = useState([]);\n\tconst [isPublishedYearPopupHidden, setIsPublishedYearPopupHidden] = useState(\n\t\ttrue\n\t);\n\tconst [isFormatPopupHidden, setIsFormatPopupHidden] = useState(true);\n\tconst [isAmazonLinkPopupHidden, setIsAmazonLinkPopupHidden] = useState(true);\n\tconst [isDescriptionPopupHidden, setIsDescriptionPopupHidden] = useState(\n\t\ttrue\n\t);\n\tconst [isLanguagePopupHidden, setIsLanguagePopupHidden] = useState(true);\n\tconst [isOriginalTitlePopupHidden, setIsOriginalTitlePopupHidden] = useState(\n\t\ttrue\n\t);\n\tconst [\n\t\tisOriginalPublicationYearPopupHidden,\n\t\tsetIsOriginalPublicationYearPopupHidden,\n\t] = useState(true);\n\tconst [isRecaptchaCompleted, setIsRecaptchaCompleted] = useState(false);\n\tconst [errorType, setErrorType] = useState(null);\n\tconst [errors, setErrors] = useState([]);\n\tconst [isShowingTitleMessage, setIsShowingTitleMessage] = useState(false);\n\tconst [bookSuggestions, setBookSuggestions] = useState([]);\n\n\tconst languageOptions = [\n\t\t'Arabic',\n\t\t'Bengali',\n\t\t'Chinese',\n\t\t'Dutch',\n\t\t'English',\n\t\t'French',\n\t\t'German',\n\t\t'Hindi',\n\t\t'Italian',\n\t\t'Japanese',\n\t\t'Korean',\n\t\t'Portuguese',\n\t\t'Russian',\n\t\t'Spanish',\n\t];\n\n\tconst organizeInputsForSubmit = () => {\n\t\treturn {\n\t\t\ttitle: titleInput,\n\t\t\tauthorNames: [mainAuthorNameInput].concat(\n\t\t\t\totherAuthorNameInputs.filter((name) => name.length > 0)\n\t\t\t),\n\t\t\tauthorRoles: [\n\t\t\t\tmainAuthorRoleInput !== null && mainAuthorRoleInput.length > 0\n\t\t\t\t\t? mainAuthorRoleInput\n\t\t\t\t\t: 'Writer',\n\t\t\t]\n\t\t\t\t.concat(\n\t\t\t\t\totherAuthorRoleInputs.filter(\n\t\t\t\t\t\t(_role, index) => otherAuthorNameInputs[index].length > 0\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.map((role) => (role.length === 0 ? 'Writer' : role)),\n\t\t\tisbn: isbnInput,\n\t\t\tpublisher: publisherInput,\n\t\t\tpublishedYear: publishedYearInput,\n\t\t\tpublishedMonth: publishedMonthInput,\n\t\t\tpublishedDay: publishedDayInput,\n\t\t\tnumberOfPages: numberOfPagesInput,\n\t\t\tformat: formatInput,\n\t\t\tamazonLink: amazonLinkInput,\n\t\t\tdescription: description,\n\t\t\teditionLanguage:\n\t\t\t\teditionLanguageInput !== 'Select...' ? editionLanguageInput : '',\n\t\t\toriginalTitle: originalTitleInput,\n\t\t\toriginalPublicationYear: originalPublishedYearInput,\n\t\t\toriginalPublicationMonth: originalPublishedMonthInput,\n\t\t\toriginalPublicationDay: originalPublishedDayInput,\n\t\t\tcoverImage:\n\t\t\t\tfileInput.current !== undefined &&\n\t\t\t\tfileInput.current !== null &&\n\t\t\t\tfileInput.current.files.length > 0\n\t\t\t\t\t? URL.createObjectURL(fileInput.current.files[0])\n\t\t\t\t\t: '',\n\t\t\thistory: history,\n\t\t};\n\t};\n\n\tuseEffect(() => {\n\t\tconst user = JSON.parse(localStorage.getItem('userState'));\n\t\tif (user === undefined || user === null) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: {},\n\t\t\t});\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tconst getBookMiscInfo = async () => {\n\t\t\tconst synopsisAndPreSynopsisObj = await trackPromise(\n\t\t\t\tFirebase.getSynopsisAndPreSynopsisForBook(bookId)\n\t\t\t);\n\t\t\tif (synopsisAndPreSynopsisObj.preSynopsis !== null) {\n\t\t\t\tsetDescription(synopsisAndPreSynopsisObj.preSynopsis);\n\t\t\t\tif (synopsisAndPreSynopsisObj.synopsis !== null) {\n\t\t\t\t\tsetDescription(\n\t\t\t\t\t\t(previous) => previous + synopsisAndPreSynopsisObj.synopsis\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (synopsisAndPreSynopsisObj.synopsis !== null) {\n\t\t\t\tsetDescription(synopsisAndPreSynopsisObj.synopsis);\n\t\t\t}\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookMiscInfo();\n\t}, [bookId]);\n\n\tconst topWarningMessage = (\n\t\t<div className=\"add-new-book-page-top-message warning\">\n\t\t\t<span>\n\t\t\t\tPlease prove to us that you're not a robot by solving the challenge\n\t\t\t\tbelow\n\t\t\t</span>\n\t\t\t<button\n\t\t\t\tclassName=\"top-message-close-button\"\n\t\t\t\tonClick={(_e) => setErrorType(null)}\n\t\t\t></button>\n\t\t</div>\n\t);\n\n\tconst topErrorMessage = (\n\t\t<div className=\"add-new-book-page-top-message error\">\n\t\t\t<span>Sorry, something went wrong with creating this book.</span>\n\t\t\t<button\n\t\t\t\tclassName=\"top-message-close-button\"\n\t\t\t\tonClick={(_e) => setErrorType(null)}\n\t\t\t></button>\n\t\t</div>\n\t);\n\n\tconst errorList = (\n\t\t<div className=\"add-new-book-page-error-list\">\n\t\t\t<span className=\"error-list-title\">\n\t\t\t\t{errors.length === 1\n\t\t\t\t\t? '1 error prohibited this book from being saved:'\n\t\t\t\t\t: `${errors.length} errors prohibited this book from being saved:`}\n\t\t\t</span>\n\t\t\t<ul>\n\t\t\t\t{errors.includes('author') ? <li>Author can't be blank</li> : null}\n\t\t\t\t{errors.includes('title') ? (\n\t\t\t\t\t<li>Title is too short (minimum is 1 character)</li>\n\t\t\t\t) : null}\n\t\t\t\t{errors.includes('year') ? <li>Year is invalid</li> : null}\n\t\t\t\t{errors.includes('pages') ? <li>Number of pages is invalid</li> : null}\n\t\t\t</ul>\n\t\t</div>\n\t);\n\n\tconst addNewBookPageTitle = (\n\t\t<h1 className=\"add-new-book-page-title\">Add a New Book</h1>\n\t);\n\n\tconst addNewBookPageNote = (\n\t\t<span className=\"add-new-book-page-note\">\n\t\t\t<b>Note: </b>Please{' '}\n\t\t\t<a href=\"/search\">\n\t\t\t\t<nobr>do a search</nobr>\n\t\t\t</a>{' '}\n\t\t\tbefore adding a book, as it may be a duplicate. Please also carefully read\n\t\t\tthe guidelines to the right, especially the part about what kind of books\n\t\t\tto add.\n\t\t</span>\n\t);\n\n\tconst titlePopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisTitlePopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>\n\t\t\t\t\tIf the book is in a series, put which book it is in parenthesis after\n\t\t\t\t\tthe title. For example: Breaking Dawn (Twilight, #4).\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst mainAuthorPopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisMainAuthorPopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>\n\t\t\t\t\tFirst name goes first. Only social suffixes are used. This includes\n\t\t\t\t\tJr., Sr., and Roman numerals. There is no punctuation between the name\n\t\t\t\t\tand the suffix.\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst generateRolePopup = (index) => (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\t(index === 0 && isMainAuthorRolePopupHidden) ||\n\t\t\t\t(index !== 0 && isOtherAuthorsRolesPopupHidden[index - 1])\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>\n\t\t\t\t\tHelp us keep this field consistent. Suggested values are:\n\t\t\t\t\t<br />\n\t\t\t\t\t-Author (default) - no need to specify this\n\t\t\t\t\t<br />\n\t\t\t\t\t-Illustrator\n\t\t\t\t\t<br />\n\t\t\t\t\t-Contributor\n\t\t\t\t\t<br />\n\t\t\t\t\t-Editor\n\t\t\t\t\t<br />\n\t\t\t\t\t-Translator\n\t\t\t\t\t<br />\n\t\t\t\t\t-Narrator\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst generateOtherAuthorsPopup = (index) => (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisOtherAuthorsPopupHidden[index]\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>\n\t\t\t\t\tAdd authors in the order they are listed on the book cover, or\n\t\t\t\t\talphabetically if there is no cover or various editions disagree.\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst publishedYearPopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisPublishedYearPopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>This is the date this particular edition was published.</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst formatPopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisFormatPopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>\n\t\t\t\t\tTo use a format not in the list click \"other\". Please only add books.\n\t\t\t\t\tBooks generally have ISBN numbers (but don\\'t have to), and are\n\t\t\t\t\tusually published. Periodicals such as newspapers, magazines, and\n\t\t\t\t\tcomics are not books. However a volume of comics or articles or\n\t\t\t\t\tgraphic novels is considered a book.\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst amazonLinkPopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisAmazonLinkPopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>Link to the book's page on Amazon.</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst descriptionPopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisDescriptionPopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>\n\t\t\t\t\tDescription/synopsis only -- not your review. Please avoid spoilers,\n\t\t\t\t\tespecially if copying from Wikipedia.\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst languagePopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisLanguagePopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>\n\t\t\t\t\tThe language this edition of the book is primarily written in.\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst originalTitlePopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisOriginalTitlePopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>Title of the original publication of this work.</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst originalPublicationYearPopup = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisOriginalPublicationYearPopupHidden\n\t\t\t\t\t? 'add-new-book-page-popup-wrapper hidden'\n\t\t\t\t\t: 'add-new-book-page-popup-wrapper'\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"add-new-book-page-popup\">\n\t\t\t\t<span>\n\t\t\t\t\tThe date the first edition of this title was published. All fields\n\t\t\t\t\toptional.\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"add-new-book-page-popup-tip\"></div>\n\t\t</div>\n\t);\n\n\tconst bookForm = (\n\t\t<form className=\"add-new-book-page-book-form\">\n\t\t\t<div className=\"form-title-area\">\n\t\t\t\t<label htmlFor=\"title\" className=\"main-label\">\n\t\t\t\t\t<span>title</span>\n\t\t\t\t\t<span className=\"red-asterisk\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"title\"\n\t\t\t\t\trequired={true}\n\t\t\t\t\tvalue={titleInput}\n\t\t\t\t\tonChange={(e) => setTitleInput(e.target.value)}\n\t\t\t\t\tonFocus={(_e) => setIsTitlePopupHidden(false)}\n\t\t\t\t\tonBlur={async (_e) => {\n\t\t\t\t\t\tsetIsTitlePopupHidden(true);\n\t\t\t\t\t\tif (titleInput.length > 0) {\n\t\t\t\t\t\t\tsetIsShowingTitleMessage(true);\n\t\t\t\t\t\t\tsetBookSuggestions(\n\t\t\t\t\t\t\t\tawait Firebase.queryBooksForBookCreation(titleInput)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetBookSuggestions([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t></input>\n\t\t\t\t{titlePopup}\n\t\t\t</div>\n\t\t\t<div className=\"title-suggestions-area\">\n\t\t\t\t{isShowingTitleMessage ? (\n\t\t\t\t\t<span>\n\t\t\t\t\t\tThe book you are adding may already exist in our database. If it\n\t\t\t\t\t\tappears below, please use that edition instead of adding a new one.\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t\t<div className=\"book-suggestion-list\">\n\t\t\t\t\t{bookSuggestions.map((suggestion, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={suggestion.link}\n\t\t\t\t\t\t\t\tclassName=\"title-book-suggestion\"\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{suggestion.title}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"form-author-area\">\n\t\t\t\t<div className=\"main-author-area\">\n\t\t\t\t\t<label htmlFor=\"author\" className=\"main-label\">\n\t\t\t\t\t\t<span>author</span>\n\t\t\t\t\t\t<span className=\"red-asterisk\">*</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"author\"\n\t\t\t\t\t\trequired={true}\n\t\t\t\t\t\tvalue={mainAuthorNameInput}\n\t\t\t\t\t\tonChange={(e) => setMainAuthorNameInput(e.target.value)}\n\t\t\t\t\t\tonFocus={(_e) => setIsMainAuthorPopupHidden(false)}\n\t\t\t\t\t\tonBlur={(_e) => setIsMainAuthorPopupHidden(true)}\n\t\t\t\t\t></input>\n\t\t\t\t\t{mainAuthorPopup}\n\t\t\t\t\t{mainAuthorRoleInput === null ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"add-role-button\"\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsetMainAuthorRoleInput('');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd role\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"main-author-role-area\">\n\t\t\t\t\t\t\t<label htmlFor=\"main-author-role\">Role:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"main-author-role\"\n\t\t\t\t\t\t\t\tvalue={mainAuthorRoleInput !== null ? mainAuthorRoleInput : ''}\n\t\t\t\t\t\t\t\tonChange={(e) => setMainAuthorRoleInput(e.target.value)}\n\t\t\t\t\t\t\t\tonFocus={(_e) => setIsMainAuthorRolePopupHidden(false)}\n\t\t\t\t\t\t\t\tonBlur={(_e) => setIsMainAuthorRolePopupHidden(true)}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t{generateRolePopup(0)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"other-authors-area\">\n\t\t\t\t\t{otherAuthorNameInputs.map((name, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"other-author-input\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"other-author-input-name\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">name:</label>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\t\tsetOtherAuthorNameInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonFocus={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetIsOtherAuthorsPopupHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonBlur={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetIsOtherAuthorsPopupHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t\t\t{generateOtherAuthorsPopup(index)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"other-author-input-role\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"role\">role:</label>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tname=\"role\"\n\t\t\t\t\t\t\t\t\t\tvalue={otherAuthorRoleInputs[index]}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\t\tsetOtherAuthorRoleInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonFocus={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetIsOtherAuthorsRolesPopupHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index + 1 ? false : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonBlur={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetIsOtherAuthorsRolesPopupHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index + 1 ? true : value\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t\t\t{generateRolePopup(index + 1)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"add-new-author-button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tsetOtherAuthorNameInputs((previous) => previous.concat(''));\n\t\t\t\t\t\t\tsetOtherAuthorRoleInputs((previous) => previous.concat(''));\n\t\t\t\t\t\t\tsetIsOtherAuthorsPopupHidden((previous) => previous.concat(true));\n\t\t\t\t\t\t\tsetIsOtherAuthorsRolesPopupHidden((previous) =>\n\t\t\t\t\t\t\t\tprevious.concat(true)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tAdd new author\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"form-isbn-area\">\n\t\t\t\t<label htmlFor=\"isbn\" className=\"main-label\">\n\t\t\t\t\tisbn\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"isbn\"\n\t\t\t\t\tvalue={isbnInput}\n\t\t\t\t\tonChange={(e) => setIsbnInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t</div>\n\t\t\t<div className=\"form-publisher-area\">\n\t\t\t\t<label htmlFor=\"publisher\" className=\"main-label\">\n\t\t\t\t\tpublisher\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"publisher\"\n\t\t\t\t\tvalue={publisherInput}\n\t\t\t\t\tonChange={(e) => setPublisherInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t</div>\n\t\t\t<div className=\"form-published-area\">\n\t\t\t\t<label htmlFor=\"published\" className=\"main-label\">\n\t\t\t\t\tpublished\n\t\t\t\t</label>\n\t\t\t\t<div className=\"published\">\n\t\t\t\t\t<div className=\"published-year\">\n\t\t\t\t\t\t<label htmlFor=\"published-year\">year:</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tname=\"published-year\"\n\t\t\t\t\t\t\tvalue={publishedYearInput}\n\t\t\t\t\t\t\tonChange={(e) => setPublishedYearInput(e.target.value)}\n\t\t\t\t\t\t\tonFocus={(_e) => setIsPublishedYearPopupHidden(false)}\n\t\t\t\t\t\t\tonBlur={(_e) => setIsPublishedYearPopupHidden(true)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t{publishedYearPopup}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"published-month\">\n\t\t\t\t\t\t<label htmlFor=\"published-month\">month:</label>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tname=\"published-month\"\n\t\t\t\t\t\t\tvalue={publishedMonthInput}\n\t\t\t\t\t\t\tonChange={(e) => setPublishedMonthInput(e.target.value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t\t<option value=\"0\">January</option>\n\t\t\t\t\t\t\t<option value=\"1\">February</option>\n\t\t\t\t\t\t\t<option value=\"2\">March</option>\n\t\t\t\t\t\t\t<option value=\"3\">April</option>\n\t\t\t\t\t\t\t<option value=\"4\">May</option>\n\t\t\t\t\t\t\t<option value=\"5\">June</option>\n\t\t\t\t\t\t\t<option value=\"6\">July</option>\n\t\t\t\t\t\t\t<option value=\"7\">August</option>\n\t\t\t\t\t\t\t<option value=\"8\">September</option>\n\t\t\t\t\t\t\t<option value=\"9\">October</option>\n\t\t\t\t\t\t\t<option value=\"10\">November</option>\n\t\t\t\t\t\t\t<option value=\"11\">December</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"published-day\">\n\t\t\t\t\t\t<label htmlFor=\"published-day\">day:</label>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tname=\"published-day\"\n\t\t\t\t\t\t\tvalue={publishedDayInput}\n\t\t\t\t\t\t\tonChange={(e) => setPublishedDayInput(e.target.value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option></option>\n\t\t\t\t\t\t\t{Array(31)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((_value, index) => (\n\t\t\t\t\t\t\t\t\t<option key={index} value={(index + 1).toString()}>\n\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"form-pages-area\">\n\t\t\t\t<label htmlFor=\"number-of-pages\" className=\"main-label\">\n\t\t\t\t\tnumber of pages\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"number-of-pages\"\n\t\t\t\t\tvalue={numberOfPagesInput}\n\t\t\t\t\tonChange={(e) => setNumberOfPagesInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t</div>\n\t\t\t<div className=\"form-format-area\">\n\t\t\t\t<label htmlFor=\"format\" className=\"main-label\">\n\t\t\t\t\tformat\n\t\t\t\t</label>\n\t\t\t\t{!formatIsOther ? (\n\t\t\t\t\t<select\n\t\t\t\t\t\tname=\"format\"\n\t\t\t\t\t\tvalue={formatInput}\n\t\t\t\t\t\tonChange={(e) => setFormatInput(e.target.value)}\n\t\t\t\t\t\tonFocus={(_e) => setIsFormatPopupHidden(false)}\n\t\t\t\t\t\tonBlur={(_e) => setIsFormatPopupHidden(true)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t<option value=\"Paperback\">Paperback</option>\n\t\t\t\t\t\t<option value=\"Hardcover\">Hardcover</option>\n\t\t\t\t\t\t<option value=\"Mass Market Paperback\">Mass Market Paperback</option>\n\t\t\t\t\t\t<option value=\"Kindle Edition\">Kindle Edition</option>\n\t\t\t\t\t\t<option value=\"Nook\">Nook</option>\n\t\t\t\t\t\t<option value=\"ebook\">ebook</option>\n\t\t\t\t\t\t<option value=\"Library Binding\">Library Binding</option>\n\t\t\t\t\t\t<option value=\"Audiobook\">Audiobook</option>\n\t\t\t\t\t\t<option value=\"Audio CD\">Audio CD</option>\n\t\t\t\t\t\t<option value=\"Audio Cassette\">Audio Cassette</option>\n\t\t\t\t\t\t<option value=\"Audible Audio\">Audible Audio</option>\n\t\t\t\t\t\t<option value=\"CD-ROM\">CD-ROM</option>\n\t\t\t\t\t\t<option value=\"MP3 CD\">MP3 CD</option>\n\t\t\t\t\t\t<option value=\"Board book\">Board book</option>\n\t\t\t\t\t\t<option value=\"Leather Bound\">Leather Bound</option>\n\t\t\t\t\t\t<option value=\"Unbound\">Unbound</option>\n\t\t\t\t\t\t<option value=\"Spiral-bound\">Spiral-bound</option>\n\t\t\t\t\t\t<option value=\"Unknown Binding\">Unknown Binding</option>\n\t\t\t\t\t</select>\n\t\t\t\t) : (\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={formatInput}\n\t\t\t\t\t\tonChange={(e) => setFormatInput(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t)}\n\t\t\t\t{!formatIsOther ? (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"set-format-to-other-button\"\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tsetFormatIsOther(true);\n\t\t\t\t\t\t\tsetIsFormatPopupHidden(true);\n\t\t\t\t\t\t\tsetFormatInput('');\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tOther\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"set-format-to-options\"\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tsetFormatIsOther(false);\n\t\t\t\t\t\t\tsetFormatInput('');\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\toptions\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{!formatIsOther ? formatPopup : null}\n\t\t\t</div>\n\t\t\t<div className=\"form-amazon-link-area\">\n\t\t\t\t<label htmlFor=\"amazon-link\" className=\"main-label\">\n\t\t\t\t\tamazon link\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"amazon-link\"\n\t\t\t\t\tvalue={amazonLinkInput}\n\t\t\t\t\tonChange={(e) => setAmazonLinkInput(e.target.value)}\n\t\t\t\t\tonFocus={(_e) => setIsAmazonLinkPopupHidden(false)}\n\t\t\t\t\tonBlur={(_e) => setIsAmazonLinkPopupHidden(true)}\n\t\t\t\t></input>\n\t\t\t\t{amazonLinkPopup}\n\t\t\t</div>\n\t\t\t<div className=\"form-description-area\">\n\t\t\t\t<label htmlFor=\"description\" className=\"main-label\">\n\t\t\t\t\tdescription\n\t\t\t\t</label>\n\t\t\t\t<textarea\n\t\t\t\t\tname=\"description\"\n\t\t\t\t\trows=\"20\"\n\t\t\t\t\tvalue={description}\n\t\t\t\t\tonChange={(e) => setDescription(e.target.value)}\n\t\t\t\t\tonFocus={(_e) => setIsDescriptionPopupHidden(false)}\n\t\t\t\t\tonBlur={(_e) => setIsDescriptionPopupHidden(true)}\n\t\t\t\t></textarea>\n\t\t\t\t{descriptionPopup}\n\t\t\t</div>\n\t\t\t<div className=\"form-edition-language-area\">\n\t\t\t\t<label htmlFor=\"edition-language\" className=\"main-label\">\n\t\t\t\t\tedition language\n\t\t\t\t</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"edition-language\"\n\t\t\t\t\tvalue={editionLanguageInput}\n\t\t\t\t\tonChange={(e) => setEditionLanguageInput(e.target.value)}\n\t\t\t\t\tonFocus={(_e) => setIsLanguagePopupHidden(false)}\n\t\t\t\t\tonBlur={(_e) => setIsLanguagePopupHidden(true)}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"Select...\">Select...</option>\n\t\t\t\t\t{languageOptions.map((option, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<option value={option} key={index}>\n\t\t\t\t\t\t\t\t{option}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t\t{languagePopup}\n\t\t\t</div>\n\t\t</form>\n\t);\n\n\tconst workSettingsForm =\n\t\tbookId === null ? (\n\t\t\t<form className=\"add-new-book-page-work-settings-form\">\n\t\t\t\t<div className=\"work-settings-form-top\">\n\t\t\t\t\t<h2>Work Settings</h2>\n\t\t\t\t\t<span>\n\t\t\t\t\t\tOriginal publication date, characters, awards, and setting apply to\n\t\t\t\t\t\tall books in this work.\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"work-settings-form-bottom\">\n\t\t\t\t\t<div className=\"form-original-title-area\">\n\t\t\t\t\t\t<label htmlFor=\"original-title\" className=\"main-label\">\n\t\t\t\t\t\t\toriginal title\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tname=\"original-title\"\n\t\t\t\t\t\t\tvalue={originalTitleInput}\n\t\t\t\t\t\t\tonChange={(e) => setOriginalTitleInput(e.target.value)}\n\t\t\t\t\t\t\tonFocus={(_e) => setIsOriginalTitlePopupHidden(false)}\n\t\t\t\t\t\t\tonBlur={(_e) => setIsOriginalTitlePopupHidden(true)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t{originalTitlePopup}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"form-original-publication-date-area\">\n\t\t\t\t\t\t<label htmlFor=\"original-publication-date\" className=\"main-label\">\n\t\t\t\t\t\t\toriginal publication date\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div className=\"original-publication-date\">\n\t\t\t\t\t\t\t<div className=\"published-year\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"published-year\">year:</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tname=\"published-year\"\n\t\t\t\t\t\t\t\t\tvalue={originalPublishedYearInput}\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\tsetOriginalPublishedYearInput(e.target.value)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonFocus={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetIsOriginalPublicationYearPopupHidden(false)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonBlur={(_e) => setIsOriginalPublicationYearPopupHidden(true)}\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t\t{originalPublicationYearPopup}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"published-month\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"published-month\">month:</label>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tname=\"published-month\"\n\t\t\t\t\t\t\t\t\tvalue={originalPublishedMonthInput}\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\tsetOriginalPublishedMonthInput(e.target.value)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t\t\t\t<option value=\"0\">January</option>\n\t\t\t\t\t\t\t\t\t<option value=\"1\">February</option>\n\t\t\t\t\t\t\t\t\t<option value=\"2\">March</option>\n\t\t\t\t\t\t\t\t\t<option value=\"3\">April</option>\n\t\t\t\t\t\t\t\t\t<option value=\"4\">May</option>\n\t\t\t\t\t\t\t\t\t<option value=\"5\">June</option>\n\t\t\t\t\t\t\t\t\t<option value=\"6\">July</option>\n\t\t\t\t\t\t\t\t\t<option value=\"7\">August</option>\n\t\t\t\t\t\t\t\t\t<option value=\"8\">September</option>\n\t\t\t\t\t\t\t\t\t<option value=\"9\">October</option>\n\t\t\t\t\t\t\t\t\t<option value=\"10\">November</option>\n\t\t\t\t\t\t\t\t\t<option value=\"11\">December</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"published-day\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"published-day\">day:</label>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tname=\"published-day\"\n\t\t\t\t\t\t\t\t\tvalue={originalPublishedDayInput}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setOriginalPublishedDayInput(e.target.value)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option></option>\n\t\t\t\t\t\t\t\t\t{Array(31)\n\t\t\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t\t\t.map((_value, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<option key={index} value={(index + 1).toString()}>\n\t\t\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t) : null;\n\n\tconst leftSection = loaded ? (\n\t\t<div className=\"add-new-book-page-left-section\">\n\t\t\t{errorType === 'warning'\n\t\t\t\t? topWarningMessage\n\t\t\t\t: errorType === 'error'\n\t\t\t\t? topErrorMessage\n\t\t\t\t: null}\n\t\t\t{addNewBookPageTitle}\n\t\t\t{addNewBookPageNote}\n\t\t\t{errors.length > 0 ? errorList : null}\n\t\t\t{bookForm}\n\t\t\t{workSettingsForm}\n\t\t\t<div className=\"add-new-book-page-left-section-bottom\">\n\t\t\t\t<span>\n\t\t\t\t\t<span className=\"red-asterisk\">*</span>\n\t\t\t\t\t<span>denotes required field</span>\n\t\t\t\t</span>\n\t\t\t\t<ReCAPTCHA\n\t\t\t\t\tsitekey={process.env.REACT_APP_SITE_KEY}\n\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\tif (value.length !== 0) {\n\t\t\t\t\t\t\tsetIsRecaptchaCompleted(true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetIsRecaptchaCompleted(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tvalue=\"Create book\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tif (!isRecaptchaCompleted) {\n\t\t\t\t\t\t\tsetErrorType('warning');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst currentErrors = [];\n\t\t\t\t\t\t\tif (titleInput.length < 1) {\n\t\t\t\t\t\t\t\tcurrentErrors.push('title');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (mainAuthorNameInput.length < 1) {\n\t\t\t\t\t\t\t\tcurrentErrors.push('author');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t(publishedYearInput.length > 0 &&\n\t\t\t\t\t\t\t\t\tNumber.isNaN(parseInt(publishedYearInput))) ||\n\t\t\t\t\t\t\t\t(originalPublishedYearInput.length > 0 &&\n\t\t\t\t\t\t\t\t\tNumber.isNaN(parseInt(originalPublishedYearInput)))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcurrentErrors.push('year');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tnumberOfPagesInput.length > 0 &&\n\t\t\t\t\t\t\t\tNumber.isNaN(parseInt(numberOfPagesInput))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcurrentErrors.push('pages');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (currentErrors.length === 0) {\n\t\t\t\t\t\t\t\tFirebase.createNewBook(organizeInputsForSubmit());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetErrorType('error');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetErrors(currentErrors);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t></input>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst rightSection = (\n\t\t<div className=\"add-new-book-page-right-section\">\n\t\t\t<div className=\"add-cover-image-section\">\n\t\t\t\t<span>Add a cover image for this book.</span>\n\t\t\t\t<input type=\"file\" ref={fileInput}></input>\n\t\t\t</div>\n\t\t\t<div className=\"guidelines-section\">\n\t\t\t\t<span className=\"guidelines-section-title\">Guidelines</span>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<b>Authors: </b>\n\t\t\t\t\t\tAdd authors in the order they are listed on the book cover, or\n\t\t\t\t\t\talphabetically if there is no cover or various editions disagree.\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<b>Format: </b>\n\t\t\t\t\t\tShould generally be Hardcover, Paperback, Audio CD, Ebook, etc\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<b>Title: </b>\n\t\t\t\t\t\tIf the book is in a series, put which book it is in parenthesis\n\t\t\t\t\t\tafter the title. For example: Harry Potter and the Sorcerer's Stone\n\t\t\t\t\t\t(Harry Potter, #1).\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<b>Types of books: </b>\n\t\t\t\t\t\tPlease only add books. Books generally have ISBN numbers (but don't\n\t\t\t\t\t\thave to), and are usually published. Periodicals such as newspapers,\n\t\t\t\t\t\tmagazines, and comics are not books. However a volume of comics or\n\t\t\t\t\t\tarticles or a graphic novel is considered a book.\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst mainContent = (\n\t\t<div className=\"add-new-book-page-main-content\">\n\t\t\t{leftSection}\n\t\t\t{rightSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"add-new-book-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default AddNewBookPage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Books/BookTopShelvesPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookTopShelvesPage = ({ match }) => {\n\tconst {\n\t\tparams: { bookId },\n\t} = match;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [bookInfo, setBookInfo] = useState({});\n\tconst [page, setPage] = useState(1);\n\n\tuseEffect(() => {\n\t\tconst getInfo = async () => {\n\t\t\tsetBookInfo(\n\t\t\t\tawait trackPromise(Firebase.getBookInfoForTopShelvesPage(bookId))\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetInfo();\n\t}, [bookId]);\n\n\tconst pageHeader = loaded ? (\n\t\t<h1 className=\"book-top-shelves-page-header\">\n\t\t\t<a href={Firebase.pageGenerator.generateBookPage(bookId, bookInfo.title)}>\n\t\t\t\t{bookInfo.title}\n\t\t\t</a>\n\t\t\t<span>{' > Top Shelves'}</span>\n\t\t</h1>\n\t) : null;\n\n\tconst showingShelfNumbers = loaded ? (\n\t\t<div className=\"book-top-shelves-page-showing-shelf-numbers\">\n\t\t\t<span className=\"page-description\">{`Top shelves for ${bookInfo.title}`}</span>\n\t\t\t<span className=\"showing-numbers\">{`Showing ${(page - 1) * 100 + 1}-${\n\t\t\t\tpage !== Math.ceil(bookInfo.genres.length / 100)\n\t\t\t\t\t? page * 100\n\t\t\t\t\t: bookInfo.genres.length\n\t\t\t} of ${bookInfo.genres.length}`}</span>\n\t\t</div>\n\t) : null;\n\n\tconst pageNavigationSection =\n\t\tloaded && Math.ceil(bookInfo.genres.length / 100) > 1 ? (\n\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t<button\n\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t>\n\t\t\t\t\t previous\n\t\t\t\t</button>\n\t\t\t\t{Array.from(\n\t\t\t\t\t{\n\t\t\t\t\t\tlength: Math.ceil(bookInfo.genres.length / 100),\n\t\t\t\t\t},\n\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t).map((number) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t<button\n\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\tdisabled={page === Math.ceil(bookInfo.genres.length / 100)}\n\t\t\t\t>\n\t\t\t\t\tnext \n\t\t\t\t</button>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst genreList = loaded ? (\n\t\t<div className=\"book-top-shelves-page-genre-list\">\n\t\t\t{bookInfo.genres\n\t\t\t\t.filter((_genre, index) => {\n\t\t\t\t\treturn index >= (page - 1) * 100 && index <= page * 100 - 1;\n\t\t\t\t})\n\t\t\t\t.map((genre, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"book-top-shelves-page-genre\" key={index}>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"genre-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(genre.name)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{genre.name.toLowerCase().replace(/ /g, '-')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"user-shelves-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookGenreShelfPage(\n\t\t\t\t\t\t\t\t\tbookId,\n\t\t\t\t\t\t\t\t\tbookInfo.title,\n\t\t\t\t\t\t\t\t\tgenre.name\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{genre.userCount > 1 ? `${genre.userCount} people` : '1 person'}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t{pageNavigationSection}\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"book-top-shelves-page-main-content\">\n\t\t\t{pageHeader}\n\t\t\t{showingShelfNumbers}\n\t\t\t{genreList}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"book-top-shelves-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookTopShelvesPage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Books/BookGenreShelfPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookGenreShelfPage = ({ match, location }) => {\n\tconst {\n\t\tparams: { bookGenreShelfPageId },\n\t} = match;\n\tconst shelf = new URLSearchParams(location.search).get('shelf');\n\tconst bookId = bookGenreShelfPageId.split('.')[0];\n\tconst bookTitle = bookGenreShelfPageId.split('.')[1].replace(/_/g, ' ');\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [bookInfo, setBookInfo] = useState({});\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tsetBookInfo(\n\t\t\t\tawait trackPromise(Firebase.getBookInfoForGenreShelfPage(bookId, shelf))\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [bookId, shelf]);\n\n\tconst pageHeader = loaded ? (\n\t\t<h1 className=\"book-genre-shelf-page-header\">\n\t\t\t<a href={Firebase.pageGenerator.generateBookPage(bookId, bookTitle)}>\n\t\t\t\t{bookInfo.seriesInstance === undefined\n\t\t\t\t\t? bookTitle\n\t\t\t\t\t: `${bookTitle} (${bookInfo.series}, #${bookInfo.seriesInstance})`}\n\t\t\t</a>\n\t\t\t<span>{' > '}</span>\n\t\t\t<a href={Firebase.pageGenerator.generateBookTopShelvesPage(bookId)}>\n\t\t\t\tTop Shelves\n\t\t\t</a>\n\t\t\t<span>{' > '}</span>\n\t\t\t<span>{shelf}</span>\n\t\t</h1>\n\t) : null;\n\n\tconst leftSection = loaded ? (\n\t\t<div className=\"book-genre-shelf-page-left-section\">\n\t\t\t{bookInfo.users.map((user, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"user-card\" key={index}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"user-card-picture-a\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\tuser.id,\n\t\t\t\t\t\t\t\tuser.firstName\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName=\"user-card-picture\"\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tuser.picture !== undefined\n\t\t\t\t\t\t\t\t\t\t? user.picture\n\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/user/m_100x100-c7bfe730633c9983e27caaa66a8e244a.png'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\talt={user.firstName}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div className=\"user-card-right-section\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\tuser.id,\n\t\t\t\t\t\t\t\t\tuser.firstName\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tclassName=\"user-name-a\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{user.firstName}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span>{`${user.numberOfBooks} books`}</span>\n\t\t\t\t\t\t\t<span>{`${user.numberOfFriends} friends`}</span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\tuser.id,\n\t\t\t\t\t\t\t\t\tuser.firstName,\n\t\t\t\t\t\t\t\t\t[shelf]\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>{`${user.numberOfBooksOnShelf} ${shelf} books`}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t) : null;\n\n\tconst rightSection = loaded ? (\n\t\t<div className=\"book-genre-shelf-page-right-section\">\n\t\t\t<span className=\"popular-books-title\">{`POPULAR ${shelf.toUpperCase()} BOOKS`}</span>\n\t\t\t<div className=\"popular-books-list\">\n\t\t\t\t{bookInfo.popularBooksOnShelf.map((book, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"popular-book-card\" key={index}>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"image-container\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{book.title}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"book-genre-shelf-page-main-content\">\n\t\t\t{pageHeader}\n\t\t\t<div className=\"central-section\">\n\t\t\t\t{leftSection}\n\t\t\t\t{rightSection}\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"book-genre-shelf-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookGenreShelfPage;\n","import React, { useState, useEffect } from 'react';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Books/BookTriviaPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookTriviaPage = ({ match }) => {\n\tconst {\n\t\tparams: { bookTriviaPageId },\n\t} = match;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [bookInfo, setBookInfo] = useState({});\n\tconst [page, setPage] = useState(1);\n\tconst bookId = bookTriviaPageId.split('.')[0];\n\tconst title = bookTriviaPageId.split('.')[1].replace(/_/g, ' ');\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tsetBookInfo(\n\t\t\t\tawait trackPromise(Firebase.getBookInfoForTriviaPage(bookId))\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [bookId]);\n\n\tconst pageHeader = loaded ? (\n\t\t<h1 className=\"book-trivia-page-header\">\n\t\t\t{bookInfo.series === undefined\n\t\t\t\t? `Trivia about ${title}`\n\t\t\t\t: `Trivia about ${title} (${bookInfo.series}, #${bookInfo.seriesInstance})`}\n\t\t</h1>\n\t) : null;\n\n\tconst bookPageAnchor = (\n\t\t<a\n\t\t\tclassName=\"back-to-book-page-a\"\n\t\t\thref={Firebase.pageGenerator.generateBookPage(bookId, title)}\n\t\t>\n\t\t\tback to book page \n\t\t</a>\n\t);\n\n\tconst quizzesSection = loaded ? (\n\t\t<div className=\"book-trivia-page-quizzes-section\">\n\t\t\t<span className=\"book-trivia-page-quizzes-title\">QUIZZES</span>\n\t\t\t<div className=\"book-trivia-page-quizzes-other-quizzes\">\n\t\t\t\t<span>\n\t\t\t\t\t<a href={Firebase.pageGenerator.generateCreateQuizPage()}>\n\t\t\t\t\t\tcreate a quiz\n\t\t\t\t\t</a>{' '}\n\t\t\t\t\tor{' '}\n\t\t\t\t\t<a href={Firebase.pageGenerator.generateQuizzesPage()}>\n\t\t\t\t\t\tsee other quizzes\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"quiz-questions\">\n\t\t\t\t{bookInfo.quizQuestions\n\t\t\t\t\t.filter((_question, index) => {\n\t\t\t\t\t\treturn index < page * 30 && index >= (page - 1) * 30;\n\t\t\t\t\t})\n\t\t\t\t\t.map((question, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"quiz-question\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"quiz-question-top-section\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"quiz-title\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuizPage(\n\t\t\t\t\t\t\t\t\t\t\tquestion.quizId,\n\t\t\t\t\t\t\t\t\t\t\tquestion.quizName\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{question.quizName}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<span className=\"quiz-author-span\">\n\t\t\t\t\t\t\t\t\t\tby{' '}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\tquestion.creatorId,\n\t\t\t\t\t\t\t\t\t\t\t\tquestion.creatorFirstName\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{question.creatorFirstName}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"quiz-question-middle-section\">\n\t\t\t\t\t\t\t\t\t<span className=\"question\">\n\t\t\t\t\t\t\t\t\t\t{question.book === undefined\n\t\t\t\t\t\t\t\t\t\t\t? question.question\n\t\t\t\t\t\t\t\t\t\t\t: `${question.question} ${question.book}`}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<div className=\"quiz-number-of-questions-and-rating\">\n\t\t\t\t\t\t\t\t\t\t<span>{`${question.numberOfQuestions} questions`}</span>\n\t\t\t\t\t\t\t\t\t\t<div className=\"quiz-rating\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tquestion.rating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tquestion.rating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tquestion.rating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tquestion.rating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tquestion.rating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: question.rating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"quiz-question-bottom-section\">\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{`${question.numberOfUsersWhoTookQuiz} people took this quiz | `}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuizPage(\n\t\t\t\t\t\t\t\t\t\t\t\tquestion.quizId,\n\t\t\t\t\t\t\t\t\t\t\t\tquestion.quizName\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\ttake this quiz\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t\t{Math.ceil(bookInfo.quizQuestions.length / 30) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(bookInfo.quizQuestions.length / 30),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={page === Math.ceil(bookInfo.quizQuestions.length / 30)}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"book-trivia-page-main-content\">\n\t\t\t{pageHeader}\n\t\t\t{bookPageAnchor}\n\t\t\t{quizzesSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"book-trivia-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookTriviaPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Books/BookQuotesPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookQuotesPage = ({ match }) => {\n\tconst history = useHistory();\n\tconst {\n\t\tparams: { bookQuotesPageId },\n\t} = match;\n\tconst bookId = bookQuotesPageId.split('-')[0];\n\tconst bookTitle = bookQuotesPageId\n\t\t.split('-')\n\t\t.slice(1)\n\t\t.map((string) => string[0].toUpperCase() + string.slice(1))\n\t\t.join(' ');\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [bookInfo, setBookInfo] = useState({});\n\tconst [page, setPage] = useState(1);\n\tconst [isShelfPopupHidden, setIsShelfPopupHidden] = useState(true);\n\tconst [isShelfPopupBottomHidden, setIsShelfPopupBottomHidden] = useState(\n\t\ttrue\n\t);\n\tconst [\n\t\tisAddShelfInputSectionHidden,\n\t\tsetIsAddShelfInputSectionHidden,\n\t] = useState(true);\n\tconst [addShelfInput, setAddShelfInput] = useState('');\n\tconst [shelfPopupReadingInput, setShelfPopupReadingInput] = useState('');\n\tconst [shelfPopupToReadInput, setShelfPopupToReadInput] = useState('');\n\tconst [exhibitedStarRating, setExhibitedStarRating] = useState(0);\n\tconst [savingShelf, setSavingShelf] = useState(false);\n\tconst [userLikedQuotes, setUserLikedQuotes] = useState([]);\n\tconst [searchInput, setSearchInput] = useState('');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tsetBookInfo(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getBookInfoForQuotesPage(user.userUID, bookId)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [bookId, user.userUID]);\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = () => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, bookId);\n\t\t\tsetBookInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\tuserRating: undefined,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (shelf) => {\n\t\tsetSavingShelf(true);\n\t\tawait Firebase.addBookToShelf(user.userUID, bookId, shelf, history);\n\t\tsetBookInfo((previous) => {\n\t\t\treturn {\n\t\t\t\t...previous,\n\t\t\t\tuserStatus: shelf,\n\t\t\t};\n\t\t});\n\t\tsetSavingShelf(false);\n\t};\n\n\tconst rateBook = async (rating) => {\n\t\tawait Firebase.rateBook(user.userUID, bookId, rating, history);\n\t\tsetBookInfo((previous) => {\n\t\t\treturn {\n\t\t\t\t...previous,\n\t\t\t\tuserStatus:\n\t\t\t\t\tprevious.userStatus !== undefined ? previous.userStatus : 'read',\n\t\t\t\tuserRating: rating,\n\t\t\t};\n\t\t});\n\t};\n\n\tconst updateProgress = async (pages) => {\n\t\tif (\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined &&\n\t\t\tpages.length > 0\n\t\t) {\n\t\t\tawait Firebase.updateBookInShelf(user.userUID, bookId, parseInt(pages));\n\t\t\tsetBookInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tuserProgress: parseInt(pages),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst pageHeader = (\n\t\t<h1 className=\"book-quotes-page-header\">{`${bookTitle} Quotes`}</h1>\n\t);\n\n\tconst addToShelfButton =\n\t\tloaded && bookInfo.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tisShelfPopupHidden\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up reading\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>Update your reading progress:</b>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tI'm on page{' '}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupReadingInput}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tisShelfPopupBottomHidden\n\t\t\t\t\t\t\t\t\t\t\t? 'page-progress-input'\n\t\t\t\t\t\t\t\t\t\t\t: 'page-progress-input white-background'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(false);\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setShelfPopupReadingInput(e.target.value)}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\tof {bookInfo.pageCount}.{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tisShelfPopupBottomHidden\n\t\t\t\t\t\t\t\t\t? 'shelf-pop-up-bottom hidden'\n\t\t\t\t\t\t\t\t\t: 'shelf-pop-up-bottom'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tupdateProgress(shelfPopupReadingInput);\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-finished-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tchangeBookShelf('read');\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFinished book\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={removeBookSafely}\n\t\t\t\t></button>\n\t\t\t\t<span>Currently Reading</span>\n\t\t\t</div>\n\t\t) : loaded && bookInfo.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<div className=\"shelf-pop-up-wrapper\">\n\t\t\t\t\t<div className=\"shelf-pop-up read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\tbookInfo.id\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={removeBookSafely}\n\t\t\t\t></button>\n\t\t\t\t<span>Read</span>\n\t\t\t</div>\n\t\t) : loaded && bookInfo.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tisShelfPopupHidden\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up to-read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupToReadInput}\n\t\t\t\t\t\t\t\t\tclassName=\"shelf-pop-up-to-read-input\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => setShelfPopupToReadInput(e.target.value)}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(false);\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\ton your <b>To Read</b> shelf.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isShelfPopupBottomHidden ? (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tFirebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(shelfPopupToReadInput)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetBookInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\ttoReadBookPosition: parseInt(shelfPopupToReadInput),\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupHidden(true);\n\t\t\t\t\t\t\t\t\t\tsetIsShelfPopupBottomHidden(true);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={removeBookSafely}\n\t\t\t\t></button>\n\t\t\t\t<span>Want to Read</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf('to-read')}\n\t\t\t>\n\t\t\t\t{savingShelf ? '...saving' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\n\tconst bookOptionsDropdown = (\n\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t<div className=\"book-options-dropdown\">\n\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"dropdown-read-button\"\n\t\t\t\t\t\tonClick={() => changeBookShelf('read')}\n\t\t\t\t\t>\n\t\t\t\t\t\tRead\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"dropdown-currently-reading-button\"\n\t\t\t\t\t\tonClick={() => changeBookShelf('reading')}\n\t\t\t\t\t>\n\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"dropdown-want-to-read-button\"\n\t\t\t\t\t\tonClick={() => changeBookShelf('to-read')}\n\t\t\t\t\t>\n\t\t\t\t\t\tWant to Read\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"dropdown-add-shelf\"\n\t\t\t\t\t\tonClick={(_e) => setIsAddShelfInputSectionHidden(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t</button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tisAddShelfInputSectionHidden\n\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={addShelfInput}\n\t\t\t\t\t\t\tonChange={(e) => setAddShelfInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\tif (addShelfInput.length > 0) {\n\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\tbookInfo.rootBook,\n\t\t\t\t\t\t\t\t\t\taddShelfInput,\n\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetIsAddShelfInputSectionHidden(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst bookCard = loaded ? (\n\t\t<div className=\"book-quotes-page-book-card\">\n\t\t\t<div className=\"left-section\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"cover-wrapper\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(bookId, bookTitle)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tbookInfo.cover !== undefined\n\t\t\t\t\t\t\t\t? bookInfo.cover\n\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={bookTitle}\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t<div className=\"book-info\">\n\t\t\t\t\t<span className=\"book-title\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"book-title-bold\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(bookId, bookTitle)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{bookTitle}\n\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\tby{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"author-name\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\tbookInfo.authorId,\n\t\t\t\t\t\t\t\tbookInfo.authorName\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{bookInfo.authorName}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"numbers\">{`${bookInfo.numberOfRatings} ratings, ${bookInfo.averageRating} average rating, ${bookInfo.numberOfReviews} reviews`}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"right-section\">\n\t\t\t\t<div className=\"book-page-user-shelf-section\">\n\t\t\t\t\t<div className=\"add-to-shelf-buttons\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`want-to-read-button-and-options ${\n\t\t\t\t\t\t\t\tbookInfo.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t? bookInfo.userStatus\n\t\t\t\t\t\t\t\t\t: 'to-read'\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{addToShelfButton}\n\t\t\t\t\t\t\t{bookOptionsDropdown}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-page-rate-book\">\n\t\t\t\t\t{bookInfo.userRating === undefined ? null : (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"clear-rating-button\"\n\t\t\t\t\t\t\tonClick={() => rateBook(undefined)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClear rating\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\t\t\t\t\t{bookInfo.userRating === undefined ? (\n\t\t\t\t\t\t<span className=\"rate-this-book\">Rate this book</span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className=\"rate-this-book my-rating\">My rating:</span>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\texhibitedStarRating > 0\n\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(1)}\n\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => rateBook(1)}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\texhibitedStarRating > 1\n\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(2)}\n\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => rateBook(2)}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\texhibitedStarRating > 2\n\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(3)}\n\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => rateBook(3)}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\texhibitedStarRating > 3\n\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(4)}\n\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => rateBook(4)}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\texhibitedStarRating > 4\n\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(5)}\n\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\tsetExhibitedStarRating(\n\t\t\t\t\t\t\t\t\tbookInfo.userRating === undefined ? 0 : bookInfo.userRating\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => rateBook(5)}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst showingNumbersSpan = loaded ? (\n\t\t<span className=\"book-quotes-page-showing-numbers-span\">\n\t\t\t<span className=\"big-text\">{`${bookTitle} Quotes `}</span>\n\t\t\t<span className=\"small-text\">{`Showing ${(page - 1) * 30 + 1}-${\n\t\t\t\tpage === Math.ceil(bookInfo.quotes.length / 30)\n\t\t\t\t\t? bookInfo.quotes.length\n\t\t\t\t\t: page * 30\n\t\t\t} of ${bookInfo.quotes.length}`}</span>\n\t\t</span>\n\t) : null;\n\n\tconst quoteList = loaded ? (\n\t\t<div className=\"book-quotes-page-quote-list\">\n\t\t\t{bookInfo.quotes\n\t\t\t\t.filter(\n\t\t\t\t\t(_quote, index) => index >= (page - 1) * 30 && index <= page * 30\n\t\t\t\t)\n\t\t\t\t.map((quote, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"quote-card\" key={index}>\n\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t<span className=\"quote\">{`${quote.content}`}</span>\n\t\t\t\t\t\t\t\t<span className=\"quote-authorship\">\n\t\t\t\t\t\t\t\t\t<span className=\"dash\"> </span>\n\t\t\t\t\t\t\t\t\t{`${bookInfo.authorName}, ${bookTitle}`}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{quote.tags.length !== 0 ? (\n\t\t\t\t\t\t\t\t\t<span className=\"tag-list\">\n\t\t\t\t\t\t\t\t\t\t<span>tags: </span>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t{quote.tags.map((tag, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (i === quote.tags.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotesTagPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span key={i}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotesTagPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{', '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t{user.userUID === null ||\n\t\t\t\t\t\t\t\t!quote.usersWhoLiked.includes(user.userUID) ? (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"like-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\t\t\tawait Firebase.likeQuote(user.userUID, quote.id, history);\n\t\t\t\t\t\t\t\t\t\t\tsetBookInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\t\tquotes: previous.quotes.map((quote, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...quote,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tusersWhoLiked: quote.usersWhoLiked.concat(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn quote;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tsetUserLikedQuotes((previous) => previous.concat(index));\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tLike\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t) : userLikedQuotes.includes(index) ? (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"quote-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tView quote\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"quote-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tIn my quotes\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"number-of-likes-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>{`${quote.usersWhoLiked.length} likes`}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t{Math.ceil(bookInfo.quotes.length / 30) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(bookInfo.quotes.length / 30),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={page === Math.ceil(bookInfo.quotes.length / 30)}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst mainContentLeftSection = (\n\t\t<div className=\"book-quotes-page-main-content-left-section\">\n\t\t\t{pageHeader}\n\t\t\t{bookCard}\n\t\t\t{showingNumbersSpan}\n\t\t\t{quoteList}\n\t\t</div>\n\t);\n\n\tconst mainContentRightSection = (\n\t\t<div className=\"book-quotes-page-main-content-right-section\">\n\t\t\t<form className=\"top-section\">\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"search-quote input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Find quotes by keyword, author\"\n\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\tonChange={(e) => setSearchInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"search-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateQuotesSearchPage(searchInput)}\n\t\t\t\t>\n\t\t\t\t\tSearch\n\t\t\t\t</a>\n\t\t\t</form>\n\t\t\t<div className=\"bottom-section\">\n\t\t\t\t<span>\n\t\t\t\t\t<a href={Firebase.pageGenerator.generateQuotesPage()}>All Quotes</a> |{' '}\n\t\t\t\t\t<a href={Firebase.pageGenerator.generateAddQuotePage()}>\n\t\t\t\t\t\tAdd A Quote\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst mainContent = (\n\t\t<div className=\"book-quotes-page-main-content\">\n\t\t\t{mainContentLeftSection}\n\t\t\t{mainContentRightSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"book-quotes-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookQuotesPage;\n","import React, { useState, useEffect } from 'react';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Books/BookListsPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookListsPage = ({ match }) => {\n\tconst {\n\t\tparams: { bookId },\n\t} = match;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [page, setPage] = useState(1);\n\tconst [bookInfo, setBookInfo] = useState({});\n\tconst [searchInput, setSearchInput] = useState('');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getBookInfo = async () => {\n\t\t\tsetBookInfo(await trackPromise(Firebase.getBookInfoForListsPage(bookId)));\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetBookInfo();\n\t}, [bookId]);\n\n\tconst pageHeader = loaded ? (\n\t\t<h1 className=\"book-lists-page-header\">\n\t\t\t<a href={Firebase.pageGenerator.generateBookPage(bookId, bookInfo.title)}>\n\t\t\t\t{bookInfo.series === undefined\n\t\t\t\t\t? bookInfo.title\n\t\t\t\t\t: `${bookInfo.title} (${bookInfo.series}, #${bookInfo.seriesInstance})`}\n\t\t\t</a>\n\t\t\t{' > Lists'}\n\t\t</h1>\n\t) : null;\n\n\tconst authorshipSection = loaded ? (\n\t\t<span className=\"book-lists-page-authorship\">\n\t\t\tby{' '}\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\tbookInfo.authorId,\n\t\t\t\t\tbookInfo.authorName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{bookInfo.authorName}\n\t\t\t</a>\n\t\t\t{bookInfo.authorIsMember ? (\n\t\t\t\t<span className=\"goodreads-author-span\"> (Goodreads Author)</span>\n\t\t\t) : null}\n\t\t</span>\n\t) : null;\n\n\tconst bookCard = loaded ? (\n\t\t<div className=\"book-lists-page-book-card\">\n\t\t\t<a\n\t\t\t\tclassName=\"cover-wrapper\"\n\t\t\t\thref={Firebase.pageGenerator.generateBookPage(bookId, bookInfo.title)}\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tbookInfo.cover !== undefined\n\t\t\t\t\t\t\t? bookInfo.cover\n\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t}\n\t\t\t\t\talt={bookInfo.title}\n\t\t\t\t/>\n\t\t\t</a>\n\t\t\t<div className=\"right-section\">\n\t\t\t\t{pageHeader}\n\t\t\t\t{authorshipSection}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst listsList = loaded ? (\n\t\t<div className=\"book-lists-page-lists-list\">\n\t\t\t{bookInfo.lists\n\t\t\t\t.filter(\n\t\t\t\t\t(_list, index) => index >= (page - 1) * 30 && index <= page * 30 - 1\n\t\t\t\t)\n\t\t\t\t.map((list, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"book-list\" key={index}>\n\t\t\t\t\t\t\t<div className=\"covers\">\n\t\t\t\t\t\t\t\t{list.bookCovers.map((cover, i) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-cover-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateListPage(\n\t\t\t\t\t\t\t\t\t\t\t\tlist.id,\n\t\t\t\t\t\t\t\t\t\t\t\tlist.name\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\talt={`${list.name} book`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"list-name-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateListPage(\n\t\t\t\t\t\t\t\t\tlist.id,\n\t\t\t\t\t\t\t\t\tlist.name\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{list.name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span className=\"list-details-span\">{`${\n\t\t\t\t\t\t\t\tlist.bookPosition === 1\n\t\t\t\t\t\t\t\t\t? '1st'\n\t\t\t\t\t\t\t\t\t: list.bookPosition === 2\n\t\t\t\t\t\t\t\t\t? '2nd'\n\t\t\t\t\t\t\t\t\t: list.bookPosition === 3\n\t\t\t\t\t\t\t\t\t? '3rd'\n\t\t\t\t\t\t\t\t\t: `${list.bookPosition}th`\n\t\t\t\t\t\t\t} out of ${list.bookCovers.length} books  ${\n\t\t\t\t\t\t\t\tlist.voterCount\n\t\t\t\t\t\t\t} voters`}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t{Math.ceil(bookInfo.lists.length / 30) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(bookInfo.lists.length / 30),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={page === Math.ceil(bookInfo.lists.length / 30)}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst mainContentLeftSection = (\n\t\t<div className=\"book-lists-page-main-content-left-section\">\n\t\t\t{bookCard}\n\t\t\t{listsList}\n\t\t</div>\n\t);\n\n\tconst mainContentRightSection = (\n\t\t<div className=\"book-lists-page-main-content-right-section\">\n\t\t\t<form className=\"top-section\">\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"search-quote input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Search lists\"\n\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\tonChange={(e) => setSearchInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"search-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateQuotesSearchPage(searchInput)}\n\t\t\t\t>\n\t\t\t\t\tSearch\n\t\t\t\t</a>\n\t\t\t</form>\n\t\t\t<div className=\"bottom-section\">\n\t\t\t\t<a href={Firebase.pageGenerator.generateCreateListPage()}>\n\t\t\t\t\tCreate New List\n\t\t\t\t</a>\n\t\t\t\t<a href={Firebase.pageGenerator.generateListopiaPage()}>All Lists</a>\n\t\t\t\t<a\n\t\t\t\t\thref={\n\t\t\t\t\t\tuser.userUID !== null\n\t\t\t\t\t\t\t? Firebase.pageGenerator.generateListsCreatedByUserPage(\n\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tLists I Created\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\thref={\n\t\t\t\t\t\tuser.userUID !== null\n\t\t\t\t\t\t\t? Firebase.pageGenerator.generateListsVotedByUserPage(\n\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tLists I've Voted On\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\thref={\n\t\t\t\t\t\tuser.userUID !== null\n\t\t\t\t\t\t\t? Firebase.pageGenerator.generateListsLikedByUserPage(\n\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tLists I've Liked\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"listopia-home-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateListopiaPage()}\n\t\t\t\t>\n\t\t\t\t\tListopia Home\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst mainContent = (\n\t\t<div className=\"book-lists-page-main-content\">\n\t\t\t{mainContentLeftSection}\n\t\t\t{mainContentRightSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"book-lists-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookListsPage;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Authors/AuthorPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst AuthorPage = ({ match }) => {\n\tconst history = useHistory();\n\tconst {\n\t\tparams: { authorPageId },\n\t} = match;\n\tconst followAuthorDropdown = useRef();\n\tconst followAuthorDropdownTrigger = useRef();\n\tconst authorId = authorPageId.split('.')[0];\n\tconst authorName = authorPageId.split('.')[1].replace(/_/g, ' ');\n\tconst authorFirstName = authorName.split(' ')[0];\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [authorInfo, setAuthorInfo] = useState({});\n\tconst [savingShelves, setSavingShelves] = useState([]);\n\tconst [areShelfPopupsHidden, setAreShelfPopupsHidden] = useState([]);\n\tconst [areShelfPopupsBottomHidden, setAreShelfPopupsBottomHidden] = useState(\n\t\t[]\n\t);\n\tconst [shelfPopupReadingInputs, setShelfPopupReadingInputs] = useState([]);\n\tconst [shelfPopupToReadInputs, setShelfPopupToReadInputs] = useState([]);\n\tconst [\n\t\tareAddShelfInputSectionsHidden,\n\t\tsetAreAddShelfInputSectionsHidden,\n\t] = useState([]);\n\tconst [addShelfInputs, setAddShelfInputs] = useState([]);\n\tconst [exhibitedStarRatings, setExhibitedStarRatings] = useState([]);\n\tconst [nowAuthorInFavorites, setNowAuthorInFavorites] = useState(false);\n\tconst [nowAuthorNotInFavorites, setNowAuthorNotInFavorites] = useState(false);\n\tconst [\n\t\tfollowAuthorDropdownVisible,\n\t\tsetFollowAuthorDropdownVisible,\n\t] = useState(false);\n\tconst [isShowingAuthorRatingStats, setIsShowingAuthorRatingStats] = useState(\n\t\tfalse\n\t);\n\tconst [authorDescriptionShowMore, setAuthorDescriptionShowMore] = useState(\n\t\tfalse\n\t);\n\tconst [userLikedQuotes, setUserLikedQuotes] = useState([]);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getAuthorInfo = async () => {\n\t\t\tconst authorObject = await trackPromise(\n\t\t\t\tFirebase.getAuthorInfoForAuthorPage(user.userUID, authorId)\n\t\t\t);\n\t\t\tsetAuthorInfo(authorObject);\n\t\t\tsetSavingShelves(authorObject.booksByAuthor.map((_book) => false));\n\t\t\tsetAreAddShelfInputSectionsHidden(\n\t\t\t\tauthorObject.booksByAuthor.map((_book) => true)\n\t\t\t);\n\t\t\tsetAddShelfInputs(authorObject.booksByAuthor.map((_book) => ''));\n\t\t\tsetExhibitedStarRatings(\n\t\t\t\tauthorObject.booksByAuthor.map((book) =>\n\t\t\t\t\tbook.userRating !== undefined ? book.userRating : 0\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetAreShelfPopupsHidden(authorObject.booksByAuthor.map((_book) => true));\n\t\t\tsetAreShelfPopupsBottomHidden(\n\t\t\t\tauthorObject.booksByAuthor.map((_book) => true)\n\t\t\t);\n\t\t\tsetShelfPopupReadingInputs(authorObject.booksByAuthor.map((_book) => ''));\n\t\t\tsetShelfPopupToReadInputs(authorObject.booksByAuthor.map((_book) => ''));\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetAuthorInfo();\n\t}, [authorId, user.userUID]);\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('click', (event) => {\n\t\t\tif (\n\t\t\t\tfollowAuthorDropdown.current !== null &&\n\t\t\t\tfollowAuthorDropdown.current !== undefined &&\n\t\t\t\tfollowAuthorDropdownTrigger.current !== null &&\n\t\t\t\tfollowAuthorDropdownTrigger.current !== undefined &&\n\t\t\t\t!followAuthorDropdown.current.contains(event.target) &&\n\t\t\t\t!followAuthorDropdownTrigger.current.contains(event.target)\n\t\t\t) {\n\t\t\t\tsetFollowAuthorDropdownVisible(false);\n\t\t\t}\n\t\t});\n\t}, []);\n\n\tconst authorBooksAverageRating =\n\t\tloaded &&\n\t\tauthorInfo.booksByAuthor.filter((book) => book.averageRating !== 0).length >\n\t\t\t0\n\t\t\t? authorInfo.booksByAuthor\n\t\t\t\t\t.filter((book) => book.averageRating !== 0)\n\t\t\t\t\t.reduce(\n\t\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\t\tprevious +\n\t\t\t\t\t\t\tcurrent.averageRating /\n\t\t\t\t\t\t\t\tauthorInfo.booksByAuthor.filter(\n\t\t\t\t\t\t\t\t\t(book) => book.averageRating !== 0\n\t\t\t\t\t\t\t\t).length,\n\t\t\t\t\t\t0\n\t\t\t\t\t)\n\t\t\t: 0;\n\tconst authorBooksTotalRatings = loaded\n\t\t? authorInfo.booksByAuthor.reduce(\n\t\t\t\t(previous, current) => previous + current.ratings,\n\t\t\t\t0\n\t\t  )\n\t\t: 0;\n\tconst authorBooksNumberOfReviews = loaded\n\t\t? authorInfo.booksByAuthor.reduce(\n\t\t\t\t(previous, current) => previous + current.numberOfReviews,\n\t\t\t\t0\n\t\t  )\n\t\t: 0;\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = (bookObject, index) => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, bookObject.id);\n\t\t\tsetAuthorInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tbooksByAuthor: previous.booksByAuthor.map((book, i) => {\n\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn book;\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (bookObject, index, shelf) => {\n\t\tif (bookObject.id !== undefined) {\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t);\n\t\t\tawait Firebase.addBookToShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.id,\n\t\t\t\tshelf,\n\t\t\t\thistory\n\t\t\t);\n\t\t\tsetAuthorInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tbooksByAuthor: previous.booksByAuthor.map((book, i) => {\n\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn book;\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t});\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t);\n\t\t}\n\t};\n\n\tconst rateBook = async (bookObject, index, rating) => {\n\t\tif (bookObject.id !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, bookObject.id, rating, history);\n\t\t\tsetAuthorInfo((previous, i) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tbooksByAuthor: previous.booksByAuthor.map((book, i) => {\n\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\tbook.userStatus === undefined ? 'read' : book.userStatus,\n\t\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn book;\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateProgress = async (bookObject, index, pages) => {\n\t\tif (\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined &&\n\t\t\tbookObject.id !== undefined &&\n\t\t\tpages.length > 0\n\t\t) {\n\t\t\tawait Firebase.updateBookInShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.id,\n\t\t\t\tparseInt(pages)\n\t\t\t);\n\t\t\tsetAuthorInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tbooksByAuthor: previous.booksByAuthor.map((book, i) => {\n\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\tuserProgress: pages,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn book;\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst generateAddToShelfButton = (bookObject, index) => {\n\t\treturn loaded && bookObject.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up reading\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>Update your reading progress:</b>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tI'm on page{' '}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupReadingInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t\t\t? 'page-progress-input'\n\t\t\t\t\t\t\t\t\t\t\t: 'page-progress-input white-background'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupReadingInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\tof {bookObject.pageCount}.{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t? 'shelf-pop-up-bottom hidden'\n\t\t\t\t\t\t\t\t\t: 'shelf-pop-up-bottom'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tupdateProgress(\n\t\t\t\t\t\t\t\t\t\tbookObject,\n\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\tshelfPopupReadingInputs[index]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-finished-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tchangeBookShelf(bookObject, index, 'read');\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFinished book\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Currently Reading</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<div className=\"shelf-pop-up-wrapper\">\n\t\t\t\t\t<div className=\"shelf-pop-up read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\tbookObject.id\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Read</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up to-read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupToReadInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName=\"shelf-pop-up-to-read-input\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupToReadInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\ton your <b>To Read</b> shelf.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{areShelfPopupsBottomHidden[index] ? (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tFirebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.id,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(shelfPopupToReadInputs[index])\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAuthorInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\tbooksByAuthor: previous.booksByAuthor.map((book, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\ti === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoReadBookPosition: parseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelfPopupToReadInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Want to Read</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t>\n\t\t\t\t{savingShelves[index] ? '...saving' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst generateBookOptionsDropdown = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t\t<div className=\"book-options-dropdown\">\n\t\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRead\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-currently-reading-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'reading')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-want-to-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWant to Read\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf\"\n\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={addShelfInputs[index]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\tsetAddShelfInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? newValue : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (addShelfInputs[index].length > 0) {\n\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.rootBook,\n\t\t\t\t\t\t\t\t\t\t\taddShelfInputs[index],\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst generateRateBookSection = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-rate-book\">\n\t\t\t\t{bookObject.userRating === undefined ? null : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"clear-rating-button\"\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, undefined)}\n\t\t\t\t\t>\n\t\t\t\t\t\tClear rating\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{bookObject.userRating === undefined ? (\n\t\t\t\t\t<span className=\"rate-this-book\">Rate this book</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"rate-this-book my-rating\">My rating:</span>\n\t\t\t\t)}\n\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 0\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 1 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 1)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 1\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 2 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 2)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 2\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 3 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 3)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 3\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 4 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 4)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 4\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 5 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 5)}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst followButtonAndDropdown = loaded ? (\n\t\t<div className=\"follow-button-and-dropdown\">\n\t\t\t<button\n\t\t\t\tclassName=\"follow-author-button\"\n\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\tawait Firebase.followUnfollowAuthor(\n\t\t\t\t\t\tuser !== null ? user.userUID : null,\n\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\thistory\n\t\t\t\t\t);\n\t\t\t\t\tsetAuthorInfo((previous) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\tfollowers:\n\t\t\t\t\t\t\t\tuser !== null &&\n\t\t\t\t\t\t\t\tprevious.followers\n\t\t\t\t\t\t\t\t\t.map((follower) => follower.id)\n\t\t\t\t\t\t\t\t\t.includes(user.userUID)\n\t\t\t\t\t\t\t\t\t? previous.followers.filter(\n\t\t\t\t\t\t\t\t\t\t\t(follower) => follower.id !== user.userUID\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: user !== null\n\t\t\t\t\t\t\t\t\t? previous.followers.concat({\n\t\t\t\t\t\t\t\t\t\t\tid: user.userUID,\n\t\t\t\t\t\t\t\t\t\t\tname: user.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\tprofilePicture:\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.profilePicture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? user.userInfo.profilePicture\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png',\n\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t\t: previous.followers,\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonMouseOver={(_e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tuser !== null &&\n\t\t\t\t\t\tauthorInfo.followers\n\t\t\t\t\t\t\t.map((follower) => follower.id)\n\t\t\t\t\t\t\t.includes(user.userUID)\n\t\t\t\t\t) {\n\t\t\t\t\t\tdocument.getElementsByClassName(\n\t\t\t\t\t\t\t'follow-author-button'\n\t\t\t\t\t\t)[0].innerHTML = 'Unfollow';\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonMouseOut={(_e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tuser !== null &&\n\t\t\t\t\t\tauthorInfo.followers\n\t\t\t\t\t\t\t.map((follower) => follower.id)\n\t\t\t\t\t\t\t.includes(user.userUID)\n\t\t\t\t\t) {\n\t\t\t\t\t\tdocument.getElementsByClassName(\n\t\t\t\t\t\t\t'follow-author-button'\n\t\t\t\t\t\t)[0].innerHTML = 'Following';\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{user === null ||\n\t\t\t\tuser.userUID === undefined ||\n\t\t\t\t!authorInfo.followers\n\t\t\t\t\t.map((follower) => follower.id)\n\t\t\t\t\t.includes(user.userUID)\n\t\t\t\t\t? 'Follow Author'\n\t\t\t\t\t: 'Following'}\n\t\t\t</button>\n\t\t\t<div\n\t\t\t\tclassName=\"follow-author-dropdown-trigger\"\n\t\t\t\tonClick={(_e) => {\n\t\t\t\t\tsetFollowAuthorDropdownVisible((previous) => !previous);\n\t\t\t\t}}\n\t\t\t\tref={followAuthorDropdownTrigger}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tfollowAuthorDropdownVisible\n\t\t\t\t\t\t\t? 'follow-author-dropdown'\n\t\t\t\t\t\t\t: 'follow-author-dropdown hidden'\n\t\t\t\t\t}\n\t\t\t\t\tref={followAuthorDropdown}\n\t\t\t\t>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\t\tauthorId\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCompare books\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tawait Firebase.addRemoveAuthorToFavorites(\n\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tuser !== null &&\n\t\t\t\t\t\t\t\t\t\tauthorInfo.usersWhoHaveAsFavorite.includes(user.userUID)\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tsetAuthorInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\tusersWhoHaveAsFavorite: previous.usersWhoHaveAsFavorite.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(user) => user !== user.userUID\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tsetNowAuthorInFavorites(false);\n\t\t\t\t\t\t\t\t\t\tsetNowAuthorNotInFavorites(true);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (user !== null) {\n\t\t\t\t\t\t\t\t\t\t\tsetAuthorInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\t\tusersWhoHaveAsFavorite: previous.usersWhoHaveAsFavorite.concat(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tsetNowAuthorInFavorites(true);\n\t\t\t\t\t\t\t\t\t\t\tsetNowAuthorNotInFavorites(false);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{user === null ||\n\t\t\t\t\t\t\t\t!authorInfo.usersWhoHaveAsFavorite.includes(user.userUID)\n\t\t\t\t\t\t\t\t\t? 'Add to my favorite authors'\n\t\t\t\t\t\t\t\t\t: 'Remove from my favorite authors'}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateFavoriteAuthorsPage()}>\n\t\t\t\t\t\t\t\tEdit my favorite authors\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst photoAndStatsArea = loaded ? (\n\t\t<div className=\"author-page-photo-and-stats-area\">\n\t\t\t<div className=\"top-section\">\n\t\t\t\t<div className=\"profile-picture-section\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tauthorInfo.profilePicture !== undefined\n\t\t\t\t\t\t\t\t? authorInfo.profilePicture\n\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={authorName}\n\t\t\t\t\t/>\n\t\t\t\t\t{authorInfo.GRMember ? (\n\t\t\t\t\t\t<div className=\"author-stats\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserRatingsPage(authorId)}\n\t\t\t\t\t\t\t>{`${authorInfo.numberOfRatings} ratings`}</a>\n\t\t\t\t\t\t\t<span>|</span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserReviewsPage(authorId)}\n\t\t\t\t\t\t\t>{`${authorInfo.numberOfReviews} reviews`}</a>\n\t\t\t\t\t\t\t<span>|</span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={(_e) => setIsShowingAuthorRatingStats(true)}\n\t\t\t\t\t\t\t>{`avg rating:${Math.round(\n\t\t\t\t\t\t\t\tauthorInfo.averageRating,\n\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t)}`}</button>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tisShowingAuthorRatingStats\n\t\t\t\t\t\t\t\t\t\t? 'author-rating-stats'\n\t\t\t\t\t\t\t\t\t\t: 'author-rating-stats hidden'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/* Rating stats */}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t{followButtonAndDropdown}\n\t\t\t</div>\n\t\t\t<div className=\"bottom-section\">\n\t\t\t\t{authorInfo.mostFollowedPosition !== undefined ? (\n\t\t\t\t\t<span>{`#${authorInfo.mostFollowedPosition} most followed`}</span>\n\t\t\t\t) : null}\n\t\t\t\t{authorInfo.reviewerPosition !== undefined ? (\n\t\t\t\t\t<span>{`#${authorInfo.reviewerPosition} best reviewers`}</span>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst yearInBooksSection =\n\t\tloaded && authorInfo.GRMember ? (\n\t\t\t<div className=\"author-page-year-in-books-section\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"section-title\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\t\tnew Date().getFullYear(),\n\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\tauthorName\n\t\t\t\t\t)}\n\t\t\t\t>{`${authorFirstName.toUpperCase()}'S YEAR IN BOOKS`}</a>\n\t\t\t\t<div className=\"inner-content\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"image-wrapper\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\t\t\tnew Date().getFullYear(),\n\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\tauthorName\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t'https://s.gr-assets.com/assets/yyib/yearly/yyib_badge-58c13ce9eeb35da7dda8dcf63aba2962.jpg'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt=\"Year in books\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div className=\"year-in-books-right-section\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<b>{`${authorFirstName}'s ${new Date().getFullYear()} Year in Books`}</b>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>{`Take a look at ${authorFirstName}'s Year in Books. The long, the shortits all here.`}</span>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\t\t\t\tnew Date().getFullYear(),\n\t\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\t\tauthorName\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>{`See ${authorFirstName}'s ${new Date().getFullYear()} Year in Books`}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst followersSection = loaded ? (\n\t\t<div className=\"author-page-followers-section\">\n\t\t\t<span className=\"section-title\">{`${authorName.toUpperCase()}'S FOLLOWERS (${\n\t\t\t\tauthorInfo.followers.length\n\t\t\t})`}</span>\n\t\t\t{authorInfo.followers.length > 0 ? (\n\t\t\t\t<div className=\"follower-list\">\n\t\t\t\t\t{authorInfo.followers.map((follower, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\tfollower.id,\n\t\t\t\t\t\t\t\t\tfollower.name\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img src={follower.profilePicture} alt={follower.name} />\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<span className=\"no-followers-span\">None yet.</span>\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst bookshelvesSection =\n\t\tloaded && authorInfo.GRMember ? (\n\t\t\t<div className=\"author-page-bookshelves-section\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"section-title\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserBooksPage(authorId)}\n\t\t\t\t>{`${authorFirstName.toUpperCase()}'S BOOKSHELVES`}</a>\n\t\t\t\t<div className=\"shelf-list\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\tauthorFirstName,\n\t\t\t\t\t\t\t['read']\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`read (${authorInfo.numberOfReadBooks})`}</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\tauthorFirstName,\n\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`currently-reading (${authorInfo.numberOfReadingBooks})`}</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\tauthorFirstName,\n\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`to-read (${authorInfo.numberOfToReadBooks})`}</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\tauthorFirstName,\n\t\t\t\t\t\t\t['favorites']\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`favorites (${authorInfo.numberOfFavoriteBooks})`}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst friendsSection =\n\t\tloaded && authorInfo.GRMember && authorInfo.friends.length > 0 ? (\n\t\t\t<div className=\"author-page-friends-section\">\n\t\t\t\t<span className=\"section-title\">{`${authorFirstName.toUpperCase()}'S FRIENDS`}</span>\n\t\t\t\t<div className=\"friend-list\">\n\t\t\t\t\t{authorInfo.friends.map((friend, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"friend-card\" key={index}>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"profile-picture-wrapper\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\tfriend.name\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\tfriend.profilePicture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? friend.profilePicture\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={friend.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\t\tfriend.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{friend.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"friend-stats\">\n\t\t\t\t\t\t\t\t\t\t<span>{`${friend.numberOfBooks} books`}</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"separator\">|</span>\n\t\t\t\t\t\t\t\t\t\t<span>{`${friend.numberOfFriends} friends`}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContentLeftSection = (\n\t\t<div className=\"author-page-main-content-left-section\">\n\t\t\t{photoAndStatsArea}\n\t\t\t{yearInBooksSection}\n\t\t\t{followersSection}\n\t\t\t{bookshelvesSection}\n\t\t\t{friendsSection}\n\t\t</div>\n\t);\n\n\tconst authorNowInFavoritesMessage =\n\t\tloaded & (nowAuthorInFavorites || nowAuthorNotInFavorites) ? (\n\t\t\t<div className=\"author-now-in-favorites-message\">\n\t\t\t\t{nowAuthorInFavorites ? (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{`${authorName} is now on your `}\n\t\t\t\t\t\t<b>Favorite Authors</b> list\n\t\t\t\t\t</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{`${authorName} has been removed from your `}\n\t\t\t\t\t\t<b>Favorite Authors</b> list\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"close-button\"\n\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\tsetNowAuthorInFavorites(false);\n\t\t\t\t\t\tsetNowAuthorNotInFavorites(false);\n\t\t\t\t\t}}\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst authorMainInfoSection = loaded ? (\n\t\t<div className=\"author-page-author-main-info-section\">\n\t\t\t<div className=\"author-name-area\">\n\t\t\t\t<span className=\"author-name\">{authorName}</span>\n\t\t\t\t{authorInfo.GRMember ? (\n\t\t\t\t\t<div className=\"goodreads-seal-area\">\n\t\t\t\t\t\t<div className=\"goodreads-seal\"></div>\n\t\t\t\t\t\t<span>Goodreads Author</span>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t<table className=\"author-info-table\">\n\t\t\t\t<tbody>\n\t\t\t\t\t{authorInfo.placeOfBirth !== undefined ||\n\t\t\t\t\tauthorInfo.dateOfBirth !== undefined ? (\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Born</th>\n\t\t\t\t\t\t\t<td className=\"birth-info\">\n\t\t\t\t\t\t\t\t{authorInfo.placeOfBirth !== undefined ? (\n\t\t\t\t\t\t\t\t\t<td>{`in ${authorInfo.placeOfBirth}`}</td>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t{authorInfo.dateOfBirth !== undefined ? (\n\t\t\t\t\t\t\t\t\t<td>{`${format(\n\t\t\t\t\t\t\t\t\t\tauthorInfo.dateOfBirth,\n\t\t\t\t\t\t\t\t\t\t'MMMM dd, yyyy'\n\t\t\t\t\t\t\t\t\t)}`}</td>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{authorInfo.website !== undefined ? (\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Website</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<a href={authorInfo.website}>{authorInfo.website}</a>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{authorInfo.twitter !== undefined ? (\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Twitter</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<a href={`https://twitter.com/${authorInfo.twitter}`}>\n\t\t\t\t\t\t\t\t\t{authorInfo.twitter}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{authorInfo.genre !== undefined ? (\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Genre</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{authorInfo.genre.map((genre, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<span className=\"author-genre\" key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(genre)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{genre\n\t\t\t\t\t\t\t\t\t\t\t\t\t.split('-')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((string) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstring.length > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? string[0].toUpperCase() + string.slice(1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: string[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t{index !== authorInfo.genre.length - 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{', '}</span>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{authorInfo.influences !== undefined ? (\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Influences</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{authorInfo.influences.map((influence, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<span className=\"author-influence\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tinfluence.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tinfluence.name\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{influence.name}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t{index !== authorInfo.influences.length - 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{', '}</span>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{authorInfo.memberSince !== undefined ? (\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Member Since</th>\n\t\t\t\t\t\t\t<td>{format(authorInfo.memberSince, 'MMMM yyyy')}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) : null}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t{authorInfo.description !== undefined ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tauthorDescriptionShowMore\n\t\t\t\t\t\t\t? 'author-description-area more'\n\t\t\t\t\t\t\t: 'author-description-area'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<p>{authorInfo.description}</p>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"author-description-show-more-button\"\n\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\tsetAuthorDescriptionShowMore((previous) => !previous)\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{authorDescriptionShowMore ? '(less)' : '...more'}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst authorBooksSection = loaded ? (\n\t\t<div className=\"author-page-author-books-section\">\n\t\t\t<span className=\"section-title\">{`${authorName.toUpperCase()}'S BOOKS`}</span>\n\t\t\t<div className=\"author-books-stats\">\n\t\t\t\t<span>{`Average rating: ${authorBooksAverageRating.toFixed(2)}`}</span>\n\t\t\t\t<span className=\"separator\"></span>\n\t\t\t\t<span>{`${authorBooksTotalRatings} ratings`}</span>\n\t\t\t\t<span className=\"separator\"></span>\n\t\t\t\t<span>{`${authorBooksNumberOfReviews} reviews`}</span>\n\t\t\t</div>\n\t\t\t<div className=\"author-book-list\">\n\t\t\t\t{authorInfo.booksByAuthor\n\t\t\t\t\t.filter((_book, index) => index <= 9)\n\t\t\t\t\t.map((book, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"author-book-card\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-cover-wrapper\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"book-details-section\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{book.series === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? book.title\n\t\t\t\t\t\t\t\t\t\t\t\t: `${book.title} (${book.series}, #${book.seriesInstance})`}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span className=\"by-author-span\">\n\t\t\t\t\t\t\t\t\t\t\t<span>by </span>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"author-book-card-author-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tauthorName\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{authorName}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t{authorInfo.GRMember ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"book-card-goodreads-member-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t(Goodreads Author)\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<div className=\"author-book-card-stats\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"author-page-general-rating\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"author-page-general-rating-stars\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{`${book.averageRating.toFixed(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\t\t\t)} avg rating  ${book.ratings} ratings ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.publishedYear !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? ` published ${book.publishedYear}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t} `}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookEditionsPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{` ${book.editions} editions`}</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={`want-to-read-button-and-options ${\n\t\t\t\t\t\t\t\t\t\t\tbook.userStatus !== undefined ? book.userStatus : ''\n\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{generateAddToShelfButton(book, index)}\n\t\t\t\t\t\t\t\t\t\t{generateBookOptionsDropdown(book, index)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{generateRateBookSection(book, index)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst authorSeriesSection =\n\t\tloaded && authorInfo.seriesByAuthor.length > 0 ? (\n\t\t\t<div className=\"author-page-author-series-section\">\n\t\t\t\t<span className=\"title-span\">{`SERIES BY ${authorName.toUpperCase()}`}</span>\n\t\t\t\t<div className=\"series-list\">\n\t\t\t\t\t{authorInfo.seriesByAuthor\n\t\t\t\t\t\t.filter((_series, index) => index <= 4)\n\t\t\t\t\t\t.map((series, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"author-page-series-card\" key={index}>\n\t\t\t\t\t\t\t\t\t<div className=\"series-card-left-section\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"series-title\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"bold-title\">{series.title}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"number-of-books\">{` (${series.books.length} books)`}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"series-authorship\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"by-author-span\">\n\t\t\t\t\t\t\t\t\t\t\t\tby{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"author-series-card-author-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tauthorId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tauthorName\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{authorName}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t{authorInfo.GRMember ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"series-card-goodreads-member-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(Goodreads Author)\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"series-stats\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"author-page-general-rating-stars\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tseries.averageRating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tseries.averageRating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tseries.averageRating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tseries.averageRating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tseries.averageRating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: series.averageRating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"stats-span\">{`${series.averageRating} avg rating  ${series.numberOfRatings} ratings`}</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"series-card-right-section\">\n\t\t\t\t\t\t\t\t\t\t{series.books\n\t\t\t\t\t\t\t\t\t\t\t.sort((a, b) => a.seriesInstance - b.seriesInstance)\n\t\t\t\t\t\t\t\t\t\t\t.map((book, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"series-card-book-cover-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst relatedNewsSection =\n\t\tloaded && authorInfo.relatedNews.length > 0 ? (\n\t\t\t<div className=\"author-page-related-news-section\">\n\t\t\t\t<span className=\"section-title\">RELATED NEWS</span>\n\t\t\t\t<div className=\"news-list\">\n\t\t\t\t\t{authorInfo.relatedNews\n\t\t\t\t\t\t.filter((_article, index) => index <= 2)\n\t\t\t\t\t\t.map((article, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"related-news-card\" key={index}>\n\t\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"article-title\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{article.title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<p>{article.content}</p>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"article-read-more-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tRead more...\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span className=\"article-like-count\">{`${article.numberOfLikes} likes  ${article.numberOfComments} comments`}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{article.image !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"article-image-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={article.image} alt={article.title} />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst quotesSection =\n\t\tloaded && authorInfo.quotes.length > 0 ? (\n\t\t\t<div className=\"author-page-quotes-section\">\n\t\t\t\t<span className=\"section-title\">{`QUOTES BY ${authorName.toUpperCase()}`}</span>\n\t\t\t\t<div className=\"quote-list\">\n\t\t\t\t\t{authorInfo.quotes\n\t\t\t\t\t\t.filter((_quote, index) => index <= 2)\n\t\t\t\t\t\t.map((quote, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"quote-card\" key={index}>\n\t\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"quote\">{`${quote.content}`}</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"quote-authorship\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"dash\"> </span>\n\t\t\t\t\t\t\t\t\t\t\t{`${authorName}, ${quote.bookTitle}`}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t{quote.tags.length !== 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"tag-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span>tags: </span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{quote.tags.map((tag, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === quote.tags.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotesTagPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"tag-list-tag-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span key={i}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotesTagPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"tag-list-tag-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{', '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t{user.userUID === null ||\n\t\t\t\t\t\t\t\t\t\t!quote.usersWhoLiked.includes(user.userUID) ? (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"like-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.likeQuote(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAuthorInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquotes: previous.quotes.map((quote, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...quote,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tusersWhoLiked: quote.usersWhoLiked.concat(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn quote;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetUserLikedQuotes((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevious.concat(index)\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tLike\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t) : userLikedQuotes.includes(index) ? (\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"quote-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tView quote\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"quote-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tIn my quotes\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"number-of-likes-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>{`${quote.usersWhoLiked.length} likes`}</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst favoriteAuthorsSection =\n\t\tloaded &&\n\t\tauthorInfo.favoriteAuthors !== undefined &&\n\t\tauthorInfo.favoriteAuthors.length > 0 ? (\n\t\t\t<div className=\"author-page-favorite-authors-section\">\n\t\t\t\t<div className=\"section-title\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFavoriteAuthorsPage(\n\t\t\t\t\t\t\tauthorId\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tclassName=\"title\"\n\t\t\t\t\t>{`${authorName.toUpperCase()}'S FAVORITE AUTHORS`}</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"grey-small-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFavoriteAuthorsPage(\n\t\t\t\t\t\t\tauthorId\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`view all ${authorInfo.favoriteAuthors.length}`}</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"main-section\">\n\t\t\t\t\t{authorInfo.favoriteAuthors.map((author, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"favorite-author-card\" key={index}>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"author-image-wrapper\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\tauthor.image !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? author.image\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={author.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"author-name-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{author.name}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<span>author of</span>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"best-book-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tauthor.bestBookId,\n\t\t\t\t\t\t\t\t\t\tauthor.bestBookTitle\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{author.bestBookTitle}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFavoriteAuthorsPage(\n\t\t\t\t\t\t\tauthorId\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`More of ${authorName}'s favorite authors...`}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContentRightSection = (\n\t\t<div className=\"author-page-main-content-right-section\">\n\t\t\t{authorNowInFavoritesMessage}\n\t\t\t{authorMainInfoSection}\n\t\t\t{authorBooksSection}\n\t\t\t{authorSeriesSection}\n\t\t\t{relatedNewsSection}\n\t\t\t{quotesSection}\n\t\t\t{favoriteAuthorsSection}\n\t\t</div>\n\t);\n\n\tconst mainContent = (\n\t\t<div className=\"author-page-main-content\">\n\t\t\t{mainContentLeftSection}\n\t\t\t{mainContentRightSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"author-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default AuthorPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Authors/FavoriteAuthorsPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst FavoriteAuthorsPage = () => {\n\tconst history = useHistory();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [authors, setAuthors] = useState([]);\n\tconst [orderInputs, setOrderInputs] = useState([]);\n\tconst [isSaving, setIsSaving] = useState(false);\n\tconst [showingErrorMessage, setShowingErrorMessage] = useState(false);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getAuthorsInfo = async () => {\n\t\t\tconst authorArray = await trackPromise(\n\t\t\t\tFirebase.fetchUserFavoriteAuthors(user.userUID, history)\n\t\t\t);\n\t\t\tsetAuthors(authorArray);\n\t\t\tsetOrderInputs(\n\t\t\t\tauthorArray.map((_author, index) => (index + 1).toString())\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetAuthorsInfo();\n\t}, [user.userUID, history]);\n\n\tuseEffect(() => {\n\t\tconst saveFavoriteAuthorList = async () => {\n\t\t\tif (loaded) {\n\t\t\t\tsetIsSaving(true);\n\t\t\t\tawait Firebase.changeFavoriteAuthors(\n\t\t\t\t\tuser.userUID,\n\t\t\t\t\tauthors.map((author) => author.id)\n\t\t\t\t);\n\t\t\t\tsetIsSaving(false);\n\t\t\t}\n\t\t};\n\n\t\tsaveFavoriteAuthorList();\n\t}, [user.userUID, authors, loaded]);\n\n\tconst reorganizeFavoriteAuthorList = () => {\n\t\tif (\n\t\t\torderInputs.some(\n\t\t\t\t(input) => Number.isNaN(parseInt(input)) || parseInt(input) <= 0\n\t\t\t)\n\t\t) {\n\t\t\tsetShowingErrorMessage(true);\n\t\t\tsetOrderInputs((previous) =>\n\t\t\t\tprevious.map((_input, index) => (index + 1).toString())\n\t\t\t);\n\t\t} else {\n\t\t\tsetShowingErrorMessage(false);\n\t\t\tsetAuthors((previous) =>\n\t\t\t\tprevious\n\t\t\t\t\t.map((_author, index) => index)\n\t\t\t\t\t.sort((a, b) => orderInputs[a] - orderInputs[b])\n\t\t\t\t\t.map((index) => previous[index])\n\t\t\t);\n\t\t}\n\t};\n\n\tconst removeAuthor = (index) => {\n\t\tif (\n\t\t\twindow.confirm(\n\t\t\t\t`Are you sure you want remove ${authors[index].name} from your list of favorite authors?`\n\t\t\t)\n\t\t) {\n\t\t\tsetAuthors((previous) => previous.filter((_author, i) => i !== index));\n\t\t}\n\t};\n\n\tconst errorMessage = (\n\t\t<div className=\"error-message-container\">\n\t\t\t<span className=\"error-message\">\n\t\t\t\tPlease use positive whole numbers for positions.\n\t\t\t</span>\n\t\t\t<button\n\t\t\t\tclassName=\"close-message-button\"\n\t\t\t\tonClick={(_e) => setShowingErrorMessage(false)}\n\t\t\t/>\n\t\t</div>\n\t);\n\n\tconst pageHeader = (\n\t\t<h1 className=\"favorite-authors-page-header\">Your Favorite Authors</h1>\n\t);\n\n\tconst noAuthorsYetMessage = (\n\t\t<span className=\"no-authors-yet-message\">\n\t\t\tYou havent marked any author as your favorite.\n\t\t</span>\n\t);\n\n\tconst reorderInstructionMessage = (\n\t\t<span className=\"reorder-instruction-message\">\n\t\t\tTo re-order your favorite authors, you can drag and drop or manually enter\n\t\t\ta position number, then click \"Save position changes\".\n\t\t</span>\n\t);\n\n\tconst generateAuthorCard = (author, index) => {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"favorite-authors-page-author-card\"\n\t\t\t\tkey={index}\n\t\t\t\tdraggable=\"true\"\n\t\t\t\tonDragStart={(e) => {\n\t\t\t\t\te.dataTransfer.setData('index', index.toString());\n\t\t\t\t}}\n\t\t\t\tonDragOver={(e) => e.preventDefault()}\n\t\t\t\tonDrop={(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tconst newIndex = parseInt(e.dataTransfer.getData('index'));\n\t\t\t\t\tif (!Number.isNaN(newIndex)) {\n\t\t\t\t\t\tsetAuthors((previous) =>\n\t\t\t\t\t\t\tprevious.map((author, i) =>\n\t\t\t\t\t\t\t\ti === newIndex\n\t\t\t\t\t\t\t\t\t? previous[index]\n\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t? previous[newIndex]\n\t\t\t\t\t\t\t\t\t: author\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t{!isSaving ? (\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"order-input\"\n\t\t\t\t\t\t\tvalue={orderInputs[index]}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\tsetOrderInputs((previous) => {\n\t\t\t\t\t\t\t\t\treturn previous.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"loading-spinner\"\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t'https://s.gr-assets.com/assets/loading-45f04d682f1e9151cf1e6fb18a1bde21.gif'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt=\"Loading\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"author-details\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"author-profile-picture-wrapper\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tauthor.profilePicture !== undefined\n\t\t\t\t\t\t\t\t\t\t? author.profilePicture\n\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\talt={author.name}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div className=\"author-info\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"author-name-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{author.name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<span>author of </span>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tauthor.bestBookId,\n\t\t\t\t\t\t\t\t\t\tauthor.bestBookTitle\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{author.bestBookTitle}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>{`${author.numberOfBooks} books`}</a>\n\t\t\t\t\t\t\t<span>{`(${author.numberOfMemberReviews} member reviews)`}</span>\n\t\t\t\t\t\t\t{author.numberOfShelvedBooks !== undefined ? (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserReviewsPage(\n\t\t\t\t\t\t\t\t\t\tauthor.userId\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>{`${author.numberOfShelvedBooks} books shelved`}</a>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{author.numberOfFriends !== undefined ? (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFriendsPage(\n\t\t\t\t\t\t\t\t\t\tauthor.userId,\n\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>{`${author.numberOfFriends} friends`}</a>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"remove-author-button\"\n\t\t\t\t\t\tonClick={() => removeAuthor(index)}\n\t\t\t\t\t>\n\t\t\t\t\t\tRemove\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst favoriteAuthorsList = loaded ? (\n\t\t<div className=\"favorite-authors-list\">\n\t\t\t{reorderInstructionMessage}\n\t\t\t<div className=\"header\">\n\t\t\t\t<span>Order</span>\n\t\t\t\t<span>Author</span>\n\t\t\t</div>\n\t\t\t{authors.map((author, index) => generateAuthorCard(author, index))}\n\t\t\t<button\n\t\t\t\tclassName=\"save-positions-button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\treorganizeFavoriteAuthorList();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tSave Position Changes\n\t\t\t</button>\n\t\t</div>\n\t) : null;\n\n\tconst mainContentLeftSection = loaded ? (\n\t\t<div className=\"favorite-authors-page-main-content-left-section\">\n\t\t\t{pageHeader}\n\t\t\t{authors.length === 0 ? noAuthorsYetMessage : favoriteAuthorsList}\n\t\t</div>\n\t) : null;\n\n\tconst mainContentRightSection =\n\t\tloaded && user !== null ? (\n\t\t\t<div className=\"favorite-authors-page-main-content-right-section\">\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tYour profile \n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"favorite-authors-page-main-content\">\n\t\t\t{mainContentLeftSection}\n\t\t\t{mainContentRightSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"favorite-authors-page\">\n\t\t\t<TopBar />\n\t\t\t{showingErrorMessage ? errorMessage : null}\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default FavoriteAuthorsPage;\n","import React, { useState, useEffect } from 'react';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Authors/FavoriteAuthorsForUserPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst FavoriteAuthorsForUserPage = ({ match }) => {\n\tconst {\n\t\tparams: { userId },\n\t} = match;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [userInfo, setUserInfo] = useState({});\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getUserInfo = async () => {\n\t\t\tsetUserInfo(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getUserInfoForFavoriteAuthorsForUserPage(userId)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetUserInfo();\n\t}, [userId]);\n\n\tconst pageHeader = loaded ? (\n\t\t<h1 className=\"favorite-authors-for-user-page-header\">{`${\n\t\t\tuser !== null && user.userUID === userId\n\t\t\t\t? 'Your'\n\t\t\t\t: `${userInfo.firstName}'s`\n\t\t} Favorite Authors`}</h1>\n\t) : null;\n\n\tconst noAuthorsYetSpan = (\n\t\t<span className=\"no-authors-yet-span\">None yet.</span>\n\t);\n\n\tconst authorList = loaded ? (\n\t\t<div className=\"favorite-authors-page-author-list\">\n\t\t\t{userInfo.authors.map((author, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"favorite-author-card\" key={index}>\n\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t<div className=\"author-details\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"author-profile-picture-wrapper\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\tauthor.profilePicture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? author.profilePicture\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/nophoto/user/m_700x933._UX150_CR0,25,150,150_RO75,1,255,255,255,255,255,255,15_.png'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={author.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"author-info\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"author-name-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{author.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<span>Author of </span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.bestBookId,\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.bestBookTitle\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{author.bestBookTitle}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span> and </span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>{`${author.rootBookCount - 1} more books`}</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{author.numberOfShelvedBooks !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserReviewsPage(\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.userId\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>{`${author.numberOfShelvedBooks} books shelved`}</a>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t{author.numberOfFriends !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFriendsPage(\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.userId,\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>{`${author.numberOfFriends} friends`}</a>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t<span>{`${author.numberOfMemberReviews} member reviews`}</span>\n\t\t\t\t\t\t\t<span>{`${author.numberOfFollowers} followers`}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t) : null;\n\n\tconst mainContentLeftSection = (\n\t\t<div className=\"favorite-authors-for-user-page-main-content-left-section\">\n\t\t\t{pageHeader}\n\t\t\t{loaded && userInfo.authors.length === 0 ? noAuthorsYetSpan : authorList}\n\t\t</div>\n\t);\n\n\tconst mainContentRightSection = loaded ? (\n\t\t<div className=\"favorite-authors-for-user-page-main-content-right-section\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tuserId,\n\t\t\t\t\tuserInfo.firstName\n\t\t\t\t)}\n\t\t\t>{`${userInfo.firstName}'s profile`}</a>\n\t\t\t<a href={Firebase.pageGenerator.generateFavoriteAuthorsPage()}>\n\t\t\t\tManage your favorite authors \n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"favorite-authors-for-user-page-main-content\">\n\t\t\t{mainContentLeftSection}\n\t\t\t{mainContentRightSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"favorite-authors-for-user-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default FavoriteAuthorsForUserPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Dashboard/NotificationsPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst NotificationsPage = () => {\n\tconst history = useHistory();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [notifications, setNotifications] = useState([]);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst loadNotifications = async () => {\n\t\t\tsetNotifications(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getNotificationsForUser(user.userUID, history)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tloadNotifications();\n\t}, [user.userUID, history]);\n\n\tconst pageHeader = (\n\t\t<h1 className=\"notifications-page-header\">Notifications</h1>\n\t);\n\n\tconst notificationList = loaded ? (\n\t\t<div className=\"notification-list\">\n\t\t\t{notifications.map((notification, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"notification-card\" key={index}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={notification.anchorSrc}\n\t\t\t\t\t\t\tclassName=\"notification-image-wrapper\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img src={notification.image} alt={notification.name} />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t<span className=\"notification-span\">\n\t\t\t\t\t\t\t\t{notification.name !== user.userInfo.firstName ? (\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<strong>{notification.name}</strong>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t{` ${notification.nonAnchorContent} `}\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={notification.anchorSrc}\n\t\t\t\t\t\t\t\t\t\t\t>{` ${notification.content}`}</a>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={notification.anchorSrc}\n\t\t\t\t\t\t\t\t\t>{`${notification.content}`}</a>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"time-span\">\n\t\t\t\t\t\t\t\t{formatDistance(notification.time, new Date(), {\n\t\t\t\t\t\t\t\t\taddSuffix: true,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"notifications-page\">\n\t\t\t<TopBar />\n\t\t\t{pageHeader}\n\t\t\t{notificationList}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default NotificationsPage;\n","import React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Firebase from '../../Firebase';\nimport '../styles/Dashboard/ProfileSettings.css';\n\nconst ProfileSettings = (props) => {\n\tconst profilePictureFileInput = useRef();\n\tconst [firstNameInput, setFirstNameInput] = useState(props.firstName);\n\tconst [middleNameInput, setMiddleNameInput] = useState(props.middleName);\n\tconst [lastNameInput, setLastNameInput] = useState(props.lastName);\n\tconst [showLastNameToInput, setShowLastNameToInput] = useState(\n\t\tprops.showLastNameTo\n\t);\n\tconst [genderInput, setGenderInput] = useState(props.gender);\n\tconst [customGenderInput, setCustomGenderInput] = useState(\n\t\tprops.customGender\n\t);\n\tconst [pronounsInput, setPronounsInput] = useState(props.pronouns);\n\tconst [showGenderToInput, setShowGenderToInput] = useState(\n\t\tprops.showGenderTo\n\t);\n\tconst [zipCodeInput, setZipCodeInput] = useState(props.zipCode);\n\tconst [cityInput, setCityInput] = useState(props.city);\n\tconst [stateProvinceCodeInput, setStateProvidenceCodeInput] = useState(\n\t\tprops.stateProvinceCode\n\t);\n\tconst [countryInput, setCountryInput] = useState(props.country);\n\tconst [locationViewableByInput, setLocationViewableByInput] = useState(\n\t\tprops.locationViewableBy\n\t);\n\tconst [dateOfBirthInput, setDateOfBirthInput] = useState(props.dateOfBirth);\n\tconst [ageAndBirthdayPrivacyInput, setAgeAndBirthdayPrivacyInput] = useState(\n\t\tprops.ageAndBirthdayPrivacy\n\t);\n\tconst [websiteInput, setWebsiteInput] = useState(props.website);\n\tconst [interestsInput, setInterestsInput] = useState(props.interests);\n\tconst [typeOfBooksInput, setTypeOfBooksInput] = useState(props.typeOfBooks);\n\tconst [aboutMeInput, setAboutMeInput] = useState(props.aboutMe);\n\n\tconst countryList = [\n\t\t'United States',\n\t\t'Canada',\n\t\t'Afghanistan',\n\t\t'Albania',\n\t\t'Algeria',\n\t\t'American Samoa',\n\t\t'Andorra',\n\t\t'Angola',\n\t\t'Anguilla',\n\t\t'Antarctica',\n\t\t'Antigua and/or Barbuda',\n\t\t'Argentina',\n\t\t'Armenia',\n\t\t'Aruba',\n\t\t'Australia',\n\t\t'Austria',\n\t\t'Azerbaijan',\n\t\t'Bahamas',\n\t\t'Bahrain',\n\t\t'Bangladesh',\n\t\t'Barbados',\n\t\t'Belarus',\n\t\t'Belgium',\n\t\t'Belize',\n\t\t'Benin',\n\t\t'Bermuda',\n\t\t'Bhutan',\n\t\t'Bolivia',\n\t\t'Bosnia and Herzegovina',\n\t\t'Botswana',\n\t\t'Bouvet Island',\n\t\t'Brazil',\n\t\t'British Indian Ocean Territory',\n\t\t'Brunei Darussalam',\n\t\t'Bulgaria',\n\t\t'Burkina Faso',\n\t\t'Burundi',\n\t\t'Cambodia',\n\t\t'Cameroon',\n\t\t'Cape Verde',\n\t\t'Cayman Islands',\n\t\t'Central African Republic',\n\t\t'Chad',\n\t\t'Chile',\n\t\t'China',\n\t\t'Christmas Island',\n\t\t'Cocos (Keeling) Islands',\n\t\t'Colombia',\n\t\t'Comoros',\n\t\t'Congo',\n\t\t'Cook Islands',\n\t\t'Costa Rica',\n\t\t'Croatia (Hrvatska)',\n\t\t'Cuba',\n\t\t'Cyprus',\n\t\t'Czech Republic',\n\t\t'Denmark',\n\t\t'Djibouti',\n\t\t'Dominica',\n\t\t'Dominican Republic',\n\t\t'East Timor',\n\t\t'Ecudaor',\n\t\t'Egypt',\n\t\t'El Salvador',\n\t\t'Equatorial Guinea',\n\t\t'Eritrea',\n\t\t'Estonia',\n\t\t'Ethiopia',\n\t\t'Falkland Islands (Malvinas)',\n\t\t'Faroe Islands',\n\t\t'Fiji',\n\t\t'Finland',\n\t\t'France',\n\t\t'France, Metropolitan',\n\t\t'French Guiana',\n\t\t'French Polynesia',\n\t\t'French Southern Territories',\n\t\t'Gabon',\n\t\t'Gambia',\n\t\t'Georgia',\n\t\t'Germany',\n\t\t'Ghana',\n\t\t'Gibraltar',\n\t\t'Greece',\n\t\t'Greenland',\n\t\t'Grenada',\n\t\t'Guadeloupe',\n\t\t'Guam',\n\t\t'Guatemala',\n\t\t'Guinea',\n\t\t'Guinea-Bissau',\n\t\t'Guyana',\n\t\t'Haiti',\n\t\t'Heard and Mc Donald Islands',\n\t\t'Honduras',\n\t\t'Hong Kong',\n\t\t'Hungary',\n\t\t'Iceland',\n\t\t'India',\n\t\t'Indonesia',\n\t\t'Iran (Islamic Republic of)',\n\t\t'Iraq',\n\t\t'Ireland',\n\t\t'Israel',\n\t\t'Italy',\n\t\t'Ivory Coast',\n\t\t'Jamaica',\n\t\t'Japan',\n\t\t'Jordan',\n\t\t'Kazakhstan',\n\t\t'Kenya',\n\t\t'Kiribati',\n\t\t\"Korea, Democratic People's Republic of\",\n\t\t'Korea, Republic of',\n\t\t'Kosovo',\n\t\t'Kuwait',\n\t\t'Kyrgyzstan',\n\t\t\"Lao People's Democratic Republic\",\n\t\t'Latvia',\n\t\t'Lebanon',\n\t\t'Lesotho',\n\t\t'Liberia',\n\t\t'Libyan Arab Jamahiriya',\n\t\t'Liechtenstein',\n\t\t'Lithuania',\n\t\t'Luxembourg',\n\t\t'Macau',\n\t\t'Macedonia',\n\t\t'Madagascar',\n\t\t'Malawi',\n\t\t'Malaysia',\n\t\t'Maldives',\n\t\t'Mali',\n\t\t'Malta',\n\t\t'Marshall Islands',\n\t\t'Martinique',\n\t\t'Mauritania',\n\t\t'Mauritius',\n\t\t'Mayotte',\n\t\t'Mexico',\n\t\t'Micronesia, Federated States of',\n\t\t'Moldova, Republic of',\n\t\t'Monaco',\n\t\t'Mongolia',\n\t\t'Montserrat',\n\t\t'Morocco',\n\t\t'Mozambique',\n\t\t'Myanmar',\n\t\t'Namibia',\n\t\t'Nauru',\n\t\t'Nepal',\n\t\t'Netherlands',\n\t\t'Netherlands Antilles',\n\t\t'New Caledonia',\n\t\t'New Zealand',\n\t\t'Nicaragua',\n\t\t'Niger',\n\t\t'Nigeria',\n\t\t'Niue',\n\t\t'Norfork Island',\n\t\t'Northern Mariana Islands',\n\t\t'Norway',\n\t\t'Oman',\n\t\t'Pakistan',\n\t\t'Palau',\n\t\t'Panama',\n\t\t'Papua New Guinea',\n\t\t'Paraguay',\n\t\t'Peru',\n\t\t'Philippines',\n\t\t'Pitcairn',\n\t\t'Poland',\n\t\t'Portugal',\n\t\t'Puerto Rico',\n\t\t'Qatar',\n\t\t'Reunion',\n\t\t'Romania',\n\t\t'Russian Federation',\n\t\t'Rwanda',\n\t\t'Saint Kitts and Nevis',\n\t\t'Saint Lucia',\n\t\t'Saint Vincent and the Grenadines',\n\t\t'Samoa',\n\t\t'San Marino',\n\t\t'Sao Tome and Principe',\n\t\t'Saudi Arabia',\n\t\t'Senegal',\n\t\t'Seychelles',\n\t\t'Sierra Leone',\n\t\t'Singapore',\n\t\t'Slovakia',\n\t\t'Slovenia',\n\t\t'Solomon Islands',\n\t\t'Somalia',\n\t\t'South Africa',\n\t\t'South Georgia South Sandwich Islands',\n\t\t'South Sudan',\n\t\t'Spain',\n\t\t'Sri Lanka',\n\t\t'St. Helena',\n\t\t'St. Pierre and Miquelon',\n\t\t'Sudan',\n\t\t'Suriname',\n\t\t'Svalbarn and Jan Mayen Islands',\n\t\t'Swaziland',\n\t\t'Sweden',\n\t\t'Switzerland',\n\t\t'Syrian Arab Republic',\n\t\t'Taiwan',\n\t\t'Tajikistan',\n\t\t'Tanzania, United Republic of',\n\t\t'Thailand',\n\t\t'Togo',\n\t\t'Tokelau',\n\t\t'Tonga',\n\t\t'Trinidad and Tobago',\n\t\t'Tunisia',\n\t\t'Turkey',\n\t\t'Turkmenistan',\n\t\t'Turks and Caicos Islands',\n\t\t'Tuvalu',\n\t\t'Uganda',\n\t\t'Ukraine',\n\t\t'United Arab Emirates',\n\t\t'United Kingdom',\n\t\t'United States minor outlying islands',\n\t\t'Uruguay',\n\t\t'Uzbekistan',\n\t\t'Vanuatu',\n\t\t'Vatican City State',\n\t\t'Venezuela',\n\t\t'Vietnam',\n\t\t'Virigan Islands (British)',\n\t\t'Virgin Islands (U.S.)',\n\t\t'Wallis and Futuna Islands',\n\t\t'Western Sahara',\n\t\t'Yemen',\n\t\t'Yugoslavia',\n\t\t'Zaire',\n\t\t'Zambia',\n\t\t'Zimbabwe',\n\t];\n\tconst monthList = [\n\t\t'January',\n\t\t'February',\n\t\t'March',\n\t\t'April',\n\t\t'May',\n\t\t'June',\n\t\t'July',\n\t\t'August',\n\t\t'September',\n\t\t'October',\n\t\t'November',\n\t\t'December',\n\t];\n\n\treturn (\n\t\t<form className=\"profile-settings\">\n\t\t\t<div className=\"left-section\">\n\t\t\t\t<label htmlFor=\"first-name\">\n\t\t\t\t\tFirst Name <span className=\"red-asterisk\">*</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"first-name-input\"\n\t\t\t\t\tname=\"first-name\"\n\t\t\t\t\tvalue={firstNameInput}\n\t\t\t\t\tonChange={(e) => setFirstNameInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"middle-name\">Middle Name</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"middle-name-input\"\n\t\t\t\t\tname=\"middle-name\"\n\t\t\t\t\tvalue={middleNameInput}\n\t\t\t\t\tonChange={(e) => setMiddleNameInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"last-name\">Last Name</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"last-name-input\"\n\t\t\t\t\tname=\"last-name\"\n\t\t\t\t\tvalue={lastNameInput}\n\t\t\t\t\tonChange={(e) => setLastNameInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"show-last-name-preference\">Show my last name to:</label>\n\t\t\t\t<div className=\"show-last-name-preference\">\n\t\t\t\t\t<div className=\"anyone-input-and-label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"anyone-radio-input\"\n\t\t\t\t\t\t\tvalue=\"anyone\"\n\t\t\t\t\t\t\tchecked={showLastNameToInput === 'anyone'}\n\t\t\t\t\t\t\tonChange={(e) => setShowLastNameToInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"anyone-radio-input\">Anyone</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"friends-input-and-radio\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"friends-radio-input\"\n\t\t\t\t\t\t\tvalue=\"friends\"\n\t\t\t\t\t\t\tchecked={showLastNameToInput === 'friends'}\n\t\t\t\t\t\t\tonChange={(e) => setShowLastNameToInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"friends-radio-input\">Friends</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<label htmlFor=\"gender\">Gender</label>\n\t\t\t\t<select\n\t\t\t\t\tvalue={genderInput}\n\t\t\t\t\tname=\"gender\"\n\t\t\t\t\tclassName=\"gender-select\"\n\t\t\t\t\tonChange={(e) => setGenderInput(e.target.value)}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select</option>\n\t\t\t\t\t<option value=\"m\">Male</option>\n\t\t\t\t\t<option value=\"f\">Female</option>\n\t\t\t\t\t<option value=\"c\">Custom</option>\n\t\t\t\t</select>\n\t\t\t\t{genderInput === 'c' ? (\n\t\t\t\t\t<div className=\"custom-gender-section\">\n\t\t\t\t\t\t<label htmlFor=\"custom-gender\">Custom gender</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tname=\"custom-gender\"\n\t\t\t\t\t\t\tclassName=\"custom-gender-input\"\n\t\t\t\t\t\t\tvalue={customGenderInput}\n\t\t\t\t\t\t\tonChange={(e) => setCustomGenderInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"preferred-pronoun\">Preferred pronoun</label>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tvalue={pronounsInput}\n\t\t\t\t\t\t\tname=\"preferred-pronoun\"\n\t\t\t\t\t\t\tclassName=\"preferred-pronoun-select\"\n\t\t\t\t\t\t\tonChange={(e) => setPronounsInput(e.target.value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"neutral\">Neutral: \"Recommend them a book!\"</option>\n\t\t\t\t\t\t\t<option value=\"male\">Male: \"Recommend him a book!\"</option>\n\t\t\t\t\t\t\t<option value=\"female\">Female: \"Recommend her a book!\"</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t\t<label html=\"gender-privacy\">Gender Viewable By</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"gender-privacy\"\n\t\t\t\t\tvalue={showGenderToInput}\n\t\t\t\t\tonChange={(e) => setShowGenderToInput(e.target.value)}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"everyone\">Everyone</option>\n\t\t\t\t\t<option value=\"friends-only\">Friends Only</option>\n\t\t\t\t\t<option value=\"no-one\">No One</option>\n\t\t\t\t</select>\n\t\t\t\t<span className=\"gender-privacy-note\">\n\t\t\t\t\tNote: Pronouns (he/she/they) will be seen by everyone regardless of\n\t\t\t\t\tthis setting.\n\t\t\t\t</span>\n\t\t\t\t<label htmlFor=\"zip-code\">\n\t\t\t\t\tZIP Code <span className=\"small-text\">(US only)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"zip-code-input\"\n\t\t\t\t\tname=\"zip-code\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={zipCodeInput}\n\t\t\t\t\tonChange={(e) => setZipCodeInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"city\">City</label>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"city-input\"\n\t\t\t\t\tname=\"city\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={cityInput}\n\t\t\t\t\tonChange={(e) => setCityInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"state-province-code\">State/Providence Code</label>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"state-province-code-input\"\n\t\t\t\t\tname=\"state-province-code\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={stateProvinceCodeInput}\n\t\t\t\t\tonChange={(e) => setStateProvidenceCodeInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"country\">Country</label>\n\t\t\t\t<select\n\t\t\t\t\tvalue={countryInput}\n\t\t\t\t\tname=\"country\"\n\t\t\t\t\tclassName=\"country-select\"\n\t\t\t\t\tonChange={(e) => setCountryInput(e.target.value)}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\">Select</option>\n\t\t\t\t\t{countryList.map((country, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<option key={index} value={country}>\n\t\t\t\t\t\t\t\t{country}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t\t<label htmlFor=\"location-privacy\">Location Viewable By:</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"location-privacy\"\n\t\t\t\t\tclassName=\"location-privacy-select\"\n\t\t\t\t\tvalue={locationViewableByInput}\n\t\t\t\t\tonChange={(e) => setLocationViewableByInput(e.target.value)}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"everyone\">Everyone</option>\n\t\t\t\t\t<option value=\"friends-only\">Friends Only</option>\n\t\t\t\t\t<option value=\"no-one\">No One</option>\n\t\t\t\t</select>\n\t\t\t\t<label htmlFor=\"date-of-birth\">\n\t\t\t\t\t<span>Date of Birth</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"set-birthday-to-blank-button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tsetDateOfBirthInput(undefined);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t(set all to blank to remove)\n\t\t\t\t\t</button>\n\t\t\t\t</label>\n\t\t\t\t<div className=\"date-of-birth\">\n\t\t\t\t\t<select\n\t\t\t\t\t\tclassName=\"birth-year-select\"\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tdateOfBirthInput !== undefined && dateOfBirthInput !== null\n\t\t\t\t\t\t\t\t? dateOfBirthInput.getFullYear()\n\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\tsetDateOfBirthInput((previous) => {\n\t\t\t\t\t\t\t\treturn newValue === ''\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: new Date(\n\t\t\t\t\t\t\t\t\t\t\tparseInt(newValue),\n\t\t\t\t\t\t\t\t\t\t\tprevious !== undefined ? previous.getMonth() : 0,\n\t\t\t\t\t\t\t\t\t\t\tprevious !== undefined ? previous.getDate() : 1\n\t\t\t\t\t\t\t\t\t  );\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t{Array(88)\n\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t.map((_value, index) => new Date().getFullYear() - 87 + index)\n\t\t\t\t\t\t\t.map((year, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option value={year} key={index}>\n\t\t\t\t\t\t\t\t\t\t{year}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t\t<select\n\t\t\t\t\t\tclassName=\"birth-month-select\"\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tdateOfBirthInput !== undefined\n\t\t\t\t\t\t\t\t? monthList[dateOfBirthInput.getMonth()]\n\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\tsetDateOfBirthInput((previous) => {\n\t\t\t\t\t\t\t\treturn newValue === ''\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: new Date(\n\t\t\t\t\t\t\t\t\t\t\tprevious !== undefined ? previous.getFullYear() : '',\n\t\t\t\t\t\t\t\t\t\t\tmonthList.indexOf(newValue),\n\t\t\t\t\t\t\t\t\t\t\tprevious !== undefined ? previous.getDate() : undefined\n\t\t\t\t\t\t\t\t\t  );\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t{Array(12)\n\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t.map((_value, index) => monthList[index])\n\t\t\t\t\t\t\t.map((month, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option value={month} key={index}>\n\t\t\t\t\t\t\t\t\t\t{month}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t\t<select\n\t\t\t\t\t\tclassName=\"birth-day-select\"\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\tdateOfBirthInput !== undefined && dateOfBirthInput !== null\n\t\t\t\t\t\t\t\t? dateOfBirthInput.getDate()\n\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\tsetDateOfBirthInput((previous) => {\n\t\t\t\t\t\t\t\treturn newValue === ''\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: new Date(\n\t\t\t\t\t\t\t\t\t\t\tprevious !== undefined ? previous.getFullYear() : 1990,\n\t\t\t\t\t\t\t\t\t\t\tprevious !== undefined ? previous.getMonth() : 0,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(newValue)\n\t\t\t\t\t\t\t\t\t  );\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t{Array(31)\n\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t.map((_value, index) => (\n\t\t\t\t\t\t\t\t<option key={index} value={index + 1}>\n\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<label htmlFor=\"age-and-birthday-privacy\">\n\t\t\t\t\t{'Age & Birthday Privacy:'}\n\t\t\t\t</label>\n\t\t\t\t<select\n\t\t\t\t\tvalue={ageAndBirthdayPrivacyInput}\n\t\t\t\t\tname=\"age-and-birthday-privacy\"\n\t\t\t\t\tclassName=\"age-and-birthday-privacy-select\"\n\t\t\t\t\tonChange={(e) => setAgeAndBirthdayPrivacyInput(e.target.value)}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"age-members-birthday-members\">\n\t\t\t\t\t\t{'Age & Birthday to Goodreads members'}\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"age-members-birthday-friends\">\n\t\t\t\t\t\tAge to Goodreads members, Birthday to friends\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"age-members-birthday-no-one\">\n\t\t\t\t\t\tAge to Goodreads members, Birthday to no one\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"age-friends-birthday-friends\">\n\t\t\t\t\t\t{'Age & Birthday to friends'}\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"age-friends-birthday-no-one\">\n\t\t\t\t\t\tAge to friends, Birthday to no one\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"age-no-one-birthday-no-one\">\n\t\t\t\t\t\t{'Age & Birthday to no one'}\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"age-no-one-birthday-members\">\n\t\t\t\t\t\t{'Age to no one & Birthday to Goodreads members'}\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"age-no-one-birthday-friends\">\n\t\t\t\t\t\t{'Age to no one & Birthday to friends'}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t\t<label htmlFor=\"website\">\n\t\t\t\t\tMy Web Site\n\t\t\t\t\t<span className=\"small-text\"> (e.g. http://www.myblog.com)</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={websiteInput}\n\t\t\t\t\tname=\"website\"\n\t\t\t\t\tclassName=\"website-input\"\n\t\t\t\t\tonChange={(e) => setWebsiteInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"interests\">\n\t\t\t\t\tMy Interests  favorite subjects, or really anything you know a lot\n\t\t\t\t\tabout\n\t\t\t\t</label>\n\t\t\t\t<span className=\"interests-note\">\n\t\t\t\t\t<i>(in comma separated phrases, please)</i>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"interests\"\n\t\t\t\t\tclassName=\"interests-input\"\n\t\t\t\t\tvalue={interestsInput}\n\t\t\t\t\tonChange={(e) => setInterestsInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"type-of-books\">\n\t\t\t\t\tWhat Kind of Books Do You Like to Read?\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"type-of-books\"\n\t\t\t\t\tclassName=\"type-of-books-input\"\n\t\t\t\t\tvalue={typeOfBooksInput}\n\t\t\t\t\tonChange={(e) => setTypeOfBooksInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"about-me\">About Me</label>\n\t\t\t\t<textarea\n\t\t\t\t\tname=\"about-me\"\n\t\t\t\t\tclassName=\"about-me-input\"\n\t\t\t\t\tvalue={aboutMeInput}\n\t\t\t\t\tonChange={(e) => setAboutMeInput(e.target.value)}\n\t\t\t\t></textarea>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tclassName=\"submit-button\"\n\t\t\t\t\tvalue=\"Save Profile Settings\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tprops.saveProfileSettings({\n\t\t\t\t\t\t\tfirstName: firstNameInput,\n\t\t\t\t\t\t\tmiddleName: middleNameInput,\n\t\t\t\t\t\t\tlastName: lastNameInput,\n\t\t\t\t\t\t\tshowLastNameTo: showLastNameToInput,\n\t\t\t\t\t\t\tgender: genderInput,\n\t\t\t\t\t\t\tcustomGender: customGenderInput,\n\t\t\t\t\t\t\tpronouns: pronounsInput,\n\t\t\t\t\t\t\tshowGenderTo: showGenderToInput,\n\t\t\t\t\t\t\tzipCode: zipCodeInput,\n\t\t\t\t\t\t\tcity: cityInput,\n\t\t\t\t\t\t\tstateProvinceCode: stateProvinceCodeInput,\n\t\t\t\t\t\t\tcountry: countryInput,\n\t\t\t\t\t\t\tlocationViewableBy: locationViewableByInput,\n\t\t\t\t\t\t\tdateOfBirth: dateOfBirthInput,\n\t\t\t\t\t\t\tageAndBirthdayPrivacy: ageAndBirthdayPrivacyInput,\n\t\t\t\t\t\t\twebsite: websiteInput,\n\t\t\t\t\t\t\tinterests: interestsInput,\n\t\t\t\t\t\t\ttypeOfBooks: typeOfBooksInput,\n\t\t\t\t\t\t\taboutMe: aboutMeInput,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t></input>\n\t\t\t</div>\n\t\t\t<div className=\"right-section\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"profile-picture-wrapper\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPhotoPage(props.id)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tprops.profilePicture !== undefined\n\t\t\t\t\t\t\t\t? props.profilePicture\n\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/user/m_111x148-e08b4682eea7088f8cdfd67c131d51cd.png'\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={props.firstName}\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t{props.profilePicture !== undefined ? (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"delete-change-profile-picture-button\"\n\t\t\t\t\t\tonClick={(_e) => props.deleteProfilePicture()}\n\t\t\t\t\t>\n\t\t\t\t\t\tDelete/Change Photo\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"new-photo-section\">\n\t\t\t\t\t\t<input type=\"file\" ref={profilePictureFileInput}></input>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"upload-photo-button\"\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tprofilePictureFileInput.current !== undefined &&\n\t\t\t\t\t\t\t\t\tprofilePictureFileInput.current !== null\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tprops.saveProfilePicture(\n\t\t\t\t\t\t\t\t\t\tprofilePictureFileInput.current.files[0]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tUpload Photo\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"delete-account-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateDeleteAccountPage()}\n\t\t\t\t>\n\t\t\t\t\tDelete my account\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n\nProfileSettings.propTypes = {\n\tid: PropTypes.string,\n\tfirstName: PropTypes.string,\n\tmiddleName: PropTypes.string,\n\tlastName: PropTypes.string,\n\tshowLastNameTo: PropTypes.string,\n\tgender: PropTypes.string,\n\tcustomGender: PropTypes.string,\n\tpronouns: PropTypes.string,\n\tshowGenderTo: PropTypes.string,\n\tzipCode: PropTypes.string,\n\tcity: PropTypes.string,\n\tstateProvinceCode: PropTypes.string,\n\tcountry: PropTypes.string,\n\tlocationViewableBy: PropTypes.string,\n\tdateOfBirth: PropTypes.instanceOf(Date),\n\tageAndBirthdayPrivacy: PropTypes.string,\n\twebsite: PropTypes.string,\n\tinterests: PropTypes.string,\n\ttypeOfBooks: PropTypes.string,\n\taboutMe: PropTypes.string,\n\tprofilePicture: PropTypes.string,\n\tsaveProfileSettings: PropTypes.func,\n\tsaveProfilePicture: PropTypes.func,\n\tdeleteProfilePicture: PropTypes.func,\n};\n\nexport default ProfileSettings;\n","import React, { useState } from 'react';\nimport { format } from 'date-fns';\nimport PropTypes from 'prop-types';\nimport Firebase from '../../Firebase';\nimport '../styles/Dashboard/Settings.css';\n\nconst Settings = (props) => {\n\tconst [emailInput, setEmailInput] = useState(props.email);\n\tconst [whoCanViewMyProfileInput, setWhoCanViewMyProfileInput] = useState(\n\t\tprops.whoCanViewMyProfile\n\t);\n\tconst [emailAddressVisibleToInput, setEmailAddressVisibleToInput] = useState(\n\t\tprops.emailAddressVisibleTo\n\t);\n\tconst [\n\t\tfriendChallengeQuestionInput,\n\t\tsetFriendChallengeQuestionInput,\n\t] = useState(props.friendChallengeQuestion);\n\tconst [hasChallengeAnswer, setHasChallengeAnswer] = useState(\n\t\tprops.friendChallengeAnswer !== ''\n\t);\n\tconst [friendChallengeAnswerInput, setFriendChallengeAnswerInput] = useState(\n\t\tprops.friendChallengeAnswer\n\t);\n\n\treturn (\n\t\t<form className=\"settings\">\n\t\t\t<label htmlFor=\"email\">\n\t\t\t\tEmail Address <span className=\"red-asterisk\">*</span>\n\t\t\t\t<span className=\"small-text\">\n\t\t\t\t\t{props.emailVerifiedDate !== undefined\n\t\t\t\t\t\t? `(verified ${format(props.emailVerifiedDate, 'MM-dd-yyyy')})`\n\t\t\t\t\t\t: ''}\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"email\"\n\t\t\t\tvalue={emailInput}\n\t\t\t\tonChange={(e) => setEmailInput(e.target.value)}\n\t\t\t></input>\n\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t<span className=\"password\">\n\t\t\t\t<span>{Array(props.passwordLength).fill('*')}</span>\n\t\t\t\t<a href={Firebase.pageGenerator.generateChangePasswordPage()}>\n\t\t\t\t\tchange password\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t\t<div className=\"privacy-section\">\n\t\t\t\t<h2>Privacy</h2>\n\t\t\t\t<span className=\"privacy-info-span\">\n\t\t\t\t\tYou control who can see your profile. Your profile includes your\n\t\t\t\t\tinformation on the{' '}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"profile-tab-button\"\n\t\t\t\t\t\tonClick={props.moveToProfileTab}\n\t\t\t\t\t>\n\t\t\t\t\t\tprofile tab\n\t\t\t\t\t</button>\n\t\t\t\t\t, your bookshelves, and your friend list. Your profile image thumbnail\n\t\t\t\t\tand your name will always be visible in some areas of the site, but\n\t\t\t\t\tyou can hide your last name using the setting on the{' '}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"profile-tab-button\"\n\t\t\t\t\t\tonClick={props.moveToProfileTab}\n\t\t\t\t\t>\n\t\t\t\t\t\tprofile tab\n\t\t\t\t\t</button>\n\t\t\t\t\t. Book reviews are always public and will appear on book pages\n\t\t\t\t\tthroughout the site regardless of privacy setting.\n\t\t\t\t</span>\n\t\t\t\t<label htmlFor=\"who-can-view-my-profile\">\n\t\t\t\t\t<b>Who Can View My Profile:</b>\n\t\t\t\t</label>\n\t\t\t\t<div className=\"who-can-view-my-profile\">\n\t\t\t\t\t<div className=\"anyone-input-label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"anyone\"\n\t\t\t\t\t\t\tvalue=\"anyone\"\n\t\t\t\t\t\t\tchecked={whoCanViewMyProfileInput === 'anyone'}\n\t\t\t\t\t\t\tonChange={(e) => setWhoCanViewMyProfileInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"anyone\">anyone</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"goodreads-members-input-label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"goodreads-members\"\n\t\t\t\t\t\t\tvalue=\"goodreads-members\"\n\t\t\t\t\t\t\tchecked={whoCanViewMyProfileInput === 'goodreads-members'}\n\t\t\t\t\t\t\tonChange={(e) => setWhoCanViewMyProfileInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"goodreads-members\">Goodreads members</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"just-my-friends-input-label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"just-my-friends\"\n\t\t\t\t\t\t\tvalue=\"just-my-friends\"\n\t\t\t\t\t\t\tchecked={whoCanViewMyProfileInput === 'just-my-friends'}\n\t\t\t\t\t\t\tonChange={(e) => setWhoCanViewMyProfileInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"just-my-friends\">just-my-friends</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<label htmlFor=\"email-visible-to\">\n\t\t\t\t\tMake my email address visible to:\n\t\t\t\t</label>\n\t\t\t\t<div className=\"email-visible-to\">\n\t\t\t\t\t<div className=\"friends-friends-requests-input-label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"friends-friends-requests\"\n\t\t\t\t\t\t\tvalue=\"friends-friends-requests\"\n\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\temailAddressVisibleToInput === 'friends-friends-requests'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonChange={(e) => setEmailAddressVisibleToInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"friends-friends-requests\">\n\t\t\t\t\t\t\t{'Friends & friend requests'}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"no-one-input-label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"no-one\"\n\t\t\t\t\t\t\tvalue=\"no-one\"\n\t\t\t\t\t\t\tchecked={emailAddressVisibleToInput === 'no-one'}\n\t\t\t\t\t\t\tonChange={(e) => setEmailAddressVisibleToInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<label htmlFor=\"no-one\">No one</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"friends-requests-section\">\n\t\t\t\t<h2>Friend Requests</h2>\n\t\t\t\t<span className=\"friends-requests-info-span\">\n\t\t\t\t\tYou can require other Goodreads members to answer a challenge question\n\t\t\t\t\twhen sending you friend requests. Note that this doesn't apply to\n\t\t\t\t\tfriends who already know your email address.\n\t\t\t\t</span>\n\t\t\t\t<label htmlFor=\"challenge-question\">Challenge question</label>\n\t\t\t\t<span className=\"challenge-question-example-span\">\n\t\t\t\t\t{hasChallengeAnswer\n\t\t\t\t\t\t? 'Make it easy  eg. Where did I go to college? What kind of car do I drive? What is my last name?'\n\t\t\t\t\t\t: 'e.g., Why do you want to be my friend?'}\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"challenge-question\"\n\t\t\t\t\tvalue={friendChallengeQuestionInput}\n\t\t\t\t\tonChange={(e) => setFriendChallengeQuestionInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t{hasChallengeAnswer ? (\n\t\t\t\t\t<label htmlFor=\"challenge-answer\">\n\t\t\t\t\t\tChallenge Answer  your friends must guess this to friend you.\n\t\t\t\t\t</label>\n\t\t\t\t) : null}\n\t\t\t\t{hasChallengeAnswer ? (\n\t\t\t\t\t<span className=\"challenge-answer-span\">\n\t\t\t\t\t\tAnswers must be one word only.\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t\t{hasChallengeAnswer ? (\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"challenge-answer\"\n\t\t\t\t\t\tclassName=\"challenge-answer-input\"\n\t\t\t\t\t\tvalue={friendChallengeAnswerInput}\n\t\t\t\t\t\tonChange={(e) => setFriendChallengeAnswerInput(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t) : null}\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"require-challenge-answer-button\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tsetHasChallengeAnswer((previous) => !previous);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{hasChallengeAnswer\n\t\t\t\t\t\t? \"Don't require a challenge answer\"\n\t\t\t\t\t\t: 'Require a challenge answer'}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\ttype=\"submit\"\n\t\t\t\tclassName=\"submit-button\"\n\t\t\t\tvalue=\"Save account settings\"\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tprops.saveAccountSettings({\n\t\t\t\t\t\temail: emailInput,\n\t\t\t\t\t\twhoCanViewMyProfile: whoCanViewMyProfileInput,\n\t\t\t\t\t\temailAddressVisibleTo: emailAddressVisibleToInput,\n\t\t\t\t\t\tfriendChallengeQuestion: friendChallengeQuestionInput,\n\t\t\t\t\t\tfriendChallengeAnswer: friendChallengeAnswerInput,\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t></input>\n\t\t\t<a\n\t\t\t\tclassName=\"delete-account-a\"\n\t\t\t\thref={Firebase.pageGenerator.generateDeleteAccountPage()}\n\t\t\t>\n\t\t\t\tDelete my account\n\t\t\t</a>\n\t\t</form>\n\t);\n};\n\nSettings.propTypes = {\n\temail: PropTypes.string,\n\temailVerifiedDate: PropTypes.instanceOf(Date),\n\tpasswordLength: PropTypes.number,\n\twhoCanViewMyProfile: PropTypes.string,\n\temailAddressVisibleTo: PropTypes.string,\n\tfriendChallengeQuestion: PropTypes.string,\n\tfriendChallengeAnswer: PropTypes.string,\n\tsaveAccountSettings: PropTypes.func,\n\tmoveToProfileTab: PropTypes.func,\n};\n\nexport default Settings;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/Dashboard/FeedUpdateSettings.css';\n\nconst FeedUpdateSettings = (props) => {\n\tconst [addBookToShelvesInput, setAddBookToShelvesInput] = useState(\n\t\tprops.addBookToShelves\n\t);\n\tconst [addAFriendInput, setAddAFriendInput] = useState(props.addAFriend);\n\tconst [voteForABookReviewInput, setVoteForABookReviewInput] = useState(\n\t\tprops.voteForABookReview\n\t);\n\tconst [addAQuoteInput, setAddAQuoteInput] = useState(props.addAQuote);\n\tconst [recommendABookInput, setRecommendABookInput] = useState(\n\t\tprops.recommendABook\n\t);\n\tconst [addANewStatusToBookInput, setAddANewStatusToBookInput] = useState(\n\t\tprops.addANewStatusToBook\n\t);\n\tconst [followAnAuthorInput, setFollowAnAuthorInput] = useState(\n\t\tprops.followAnAuthor\n\t);\n\n\treturn (\n\t\t<form className=\"feed-update-settings\">\n\t\t\t<h2>Feed Update Settings</h2>\n\t\t\t<span>\n\t\t\t\tSome actions on Goodreads are published to your Update Feed. Your Update\n\t\t\t\tFeed is what shows up on your profile and your friends homepages.\n\t\t\t\tUpdates are published when you:\n\t\t\t</span>\n\t\t\t<div className=\"preference-list\">\n\t\t\t\t<div className=\"add-book-to-shelves-preference\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"add-book-to-shelves\"\n\t\t\t\t\t\tchecked={addBookToShelvesInput}\n\t\t\t\t\t\tonChange={(e) => setAddBookToShelvesInput(e.target.checked)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"add-book-to-shelves\">\n\t\t\t\t\t\tAdd a book to your shelves\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"add-a-friend-preference\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"add-a-friend\"\n\t\t\t\t\t\tchecked={addAFriendInput}\n\t\t\t\t\t\tonChange={(e) => setAddAFriendInput(e.target.checked)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"add-a-friend\">Add a friend</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"vote-for-a-book-review-preference\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"vote-for-a-book-review\"\n\t\t\t\t\t\tchecked={voteForABookReviewInput}\n\t\t\t\t\t\tonChange={(e) => setVoteForABookReviewInput(e.target.checked)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"vote-for-a-book-review\">Vote for a book review</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"add-a-quote-preference\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"add-a-quote\"\n\t\t\t\t\t\tchecked={addAQuoteInput}\n\t\t\t\t\t\tonChange={(e) => setAddAQuoteInput(e.target.checked)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"add-a-quote\">Add a quote</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"recommend-a-book\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"recommend-a-book\"\n\t\t\t\t\t\tchecked={recommendABookInput}\n\t\t\t\t\t\tonChange={(e) => setRecommendABookInput(e.target.checked)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"recommend-a-book\">Recommend a book</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"add-a-new-status-to-book-preference\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"add-a-new-status-to-book\"\n\t\t\t\t\t\tchecked={addANewStatusToBookInput}\n\t\t\t\t\t\tonChange={(e) => setAddANewStatusToBookInput(e.target.checked)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"add-a-new-status-to-book\">\n\t\t\t\t\t\tAdd a new status to a book I'm reading\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"follow-an-author\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"follow-an-author\"\n\t\t\t\t\t\tchecked={followAnAuthorInput}\n\t\t\t\t\t\tonChange={(e) => setFollowAnAuthorInput(e.target.checked)}\n\t\t\t\t\t></input>\n\t\t\t\t\t<label htmlFor=\"follow-an-author\">Follow an author</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\ttype=\"submit\"\n\t\t\t\tvalue=\"Save Feed Settings\"\n\t\t\t\tclassName=\"save-feed-settings-button\"\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tprops.saveFeedSettings({\n\t\t\t\t\t\taddBookToShelves: addBookToShelvesInput,\n\t\t\t\t\t\taddAFriend: addAFriendInput,\n\t\t\t\t\t\tvoteForABookReview: voteForABookReviewInput,\n\t\t\t\t\t\taddAQuote: addAQuoteInput,\n\t\t\t\t\t\trecommendABook: recommendABookInput,\n\t\t\t\t\t\taddANewStatusToBook: addANewStatusToBookInput,\n\t\t\t\t\t\tfollowAnAuthor: followAnAuthorInput,\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t></input>\n\t\t</form>\n\t);\n};\n\nFeedUpdateSettings.propTypes = {\n\taddBookToShelves: PropTypes.bool,\n\taddAFriend: PropTypes.bool,\n\tvoteForABookReview: PropTypes.bool,\n\taddAQuote: PropTypes.bool,\n\trecommendABook: PropTypes.bool,\n\taddANewStatusToBook: PropTypes.bool,\n\tfollowAnAuthor: PropTypes.bool,\n\tsaveFeedSettings: PropTypes.func,\n};\n\nexport default FeedUpdateSettings;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport ProfileSettings from './ProfileSettings';\nimport Settings from './Settings';\nimport FeedUpdateSettings from './FeedUpdateSettings';\nimport '../styles/Dashboard/AccountSettingsPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst AccountSettingsPage = () => {\n\tconst history = useHistory();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [userInfo, setUserInfo] = useState({});\n\tconst [tab, setTab] = useState('profile');\n\tconst [topMessage, setTopMessage] = useState('');\n\tconst [topMessageType, setTopMessageType] = useState('yellow');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getUserInfo = async () => {\n\t\t\tsetUserInfo(\n\t\t\t\tawait trackPromise(Firebase.getUserSettings(user.userUID, history))\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetUserInfo();\n\t}, [user.userUID, history]);\n\n\tconst saveProfileOrFeedSettings = async (settings) => {\n\t\tawait Firebase.saveUserSettings(user.userUID, settings);\n\t\tsetTopMessage('The changes to your profile have been saved.');\n\t\tsetTopMessageType('yellow');\n\t};\n\n\tconst saveAccountSettings = async (settings) => {\n\t\tif (\n\t\t\tsettings.friendChallengeAnswer.split(' ').length > 1 ||\n\t\t\tsettings.friendChallengeAnswer\n\t\t\t\t.split('')\n\t\t\t\t.some((character) =>\n\t\t\t\t\t[',', '.', ':', '\"', \"'\", '?', '!'].includes(character)\n\t\t\t\t)\n\t\t) {\n\t\t\tsetTopMessage(\n\t\t\t\t'Challenge answer must be one word and contain no spaces or punctuation.'\n\t\t\t);\n\t\t\tsetTopMessageType('red');\n\t\t} else {\n\t\t\tawait Firebase.saveUserSettings(user.userUID, settings);\n\t\t\tsetTopMessage('The changes to your profile have been saved.');\n\t\t\tsetTopMessageType('yellow');\n\t\t}\n\t};\n\n\tconst saveProfilePicture = async (file) => {\n\t\tif (file !== undefined) {\n\t\t\tconst objectURL = URL.createObjectURL(file);\n\t\t\tawait Firebase.saveUserSettings(user.userUID, {\n\t\t\t\tprofileImage: objectURL,\n\t\t\t});\n\t\t\tsetTopMessage('The changes to your profile have been saved.');\n\t\t\tsetTopMessageType('yellow');\n\t\t}\n\t};\n\n\tconst deleteProfilePicture = async () => {\n\t\tif (window.confirm('Are you sure?')) {\n\t\t\tawait Firebase.deleteProfilePicture(user.userUID);\n\t\t\tsetTopMessage('Your photo has been deleted.');\n\t\t\tsetTopMessageType('yellow');\n\t\t}\n\t};\n\n\tconst moveToProfileTab = () => {\n\t\tsetTab('profile');\n\t};\n\n\tconst topMessageDiv = (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\ttopMessageType === 'yellow'\n\t\t\t\t\t? 'account-settings-saved-message yellow'\n\t\t\t\t\t: 'account-settings-saved-message red'\n\t\t\t}\n\t\t>\n\t\t\t<span>{topMessage}</span>\n\t\t\t<button\n\t\t\t\tclassName=\"close-button\"\n\t\t\t\tonClick={(_e) => setTopMessage('')}\n\t\t\t></button>\n\t\t</div>\n\t);\n\n\tconst pageHeader = (\n\t\t<h1 className=\"account-settings-page-header\">Account Settings</h1>\n\t);\n\n\tconst mainContentTopSection =\n\t\tloaded && user !== null ? (\n\t\t\t<div className=\"account-settings-page-main-content-top-section\">\n\t\t\t\t{pageHeader}\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\tuserInfo.profile.firstName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tView My Profile\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst tabNavigationSection = (\n\t\t<div className=\"tab-navigation-section\">\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\ttab === 'profile'\n\t\t\t\t\t\t? 'tab-navigation-button selected'\n\t\t\t\t\t\t: 'tab-navigation-button'\n\t\t\t\t}\n\t\t\t\tonClick={(_e) => setTab('profile')}\n\t\t\t>\n\t\t\t\tProfile\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\ttab === 'settings'\n\t\t\t\t\t\t? 'tab-navigation-button selected'\n\t\t\t\t\t\t: 'tab-navigation-button'\n\t\t\t\t}\n\t\t\t\tonClick={(_e) => setTab('settings')}\n\t\t\t>\n\t\t\t\tSettings\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\ttab === 'feeds'\n\t\t\t\t\t\t? 'tab-navigation-button selected'\n\t\t\t\t\t\t: 'tab-navigation-button'\n\t\t\t\t}\n\t\t\t\tonClick={(_e) => setTab('feeds')}\n\t\t\t>\n\t\t\t\tFeeds\n\t\t\t</button>\n\t\t</div>\n\t);\n\n\tconst mainForm = loaded ? (\n\t\ttab === 'profile' ? (\n\t\t\t<ProfileSettings\n\t\t\t\t{...userInfo.profile}\n\t\t\t\tsaveProfileSettings={saveProfileOrFeedSettings}\n\t\t\t\tsaveProfilePicture={saveProfilePicture}\n\t\t\t\tdeleteProfilePicture={deleteProfilePicture}\n\t\t\t/>\n\t\t) : tab === 'settings' ? (\n\t\t\t<Settings\n\t\t\t\t{...userInfo.account}\n\t\t\t\tsaveAccountSettings={saveAccountSettings}\n\t\t\t\tmoveToProfileTab={moveToProfileTab}\n\t\t\t/>\n\t\t) : (\n\t\t\t<FeedUpdateSettings\n\t\t\t\t{...userInfo.feed}\n\t\t\t\tsaveFeedSettings={saveProfileOrFeedSettings}\n\t\t\t/>\n\t\t)\n\t) : null;\n\n\treturn (\n\t\t<div className=\"account-settings-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"account-settings-page-main-content\">\n\t\t\t\t{topMessage !== '' ? topMessageDiv : null}\n\t\t\t\t{mainContentTopSection}\n\t\t\t\t{tabNavigationSection}\n\t\t\t\t{mainForm}\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default AccountSettingsPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Dashboard/ChangePasswordPage.css';\n\nconst ChangePassswordPage = () => {\n\tconst history = useHistory();\n\tconst [errors, setErrors] = useState([]);\n\tconst [currentPasswordInput, setCurrentPasswordInput] = useState('');\n\tconst [newPasswordInput, setNewPasswordInput] = useState('');\n\tconst [confirmPasswordInput, setConfirmPasswordInput] = useState('');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tif (user.userUID === null || user.userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t}\n\t}, [user.userUID, history]);\n\n\tconst checkIfPasswordsMatch = async () => {\n\t\treturn await Firebase.checkIfPasswordsMatch(\n\t\t\tuser.userUID,\n\t\t\tcurrentPasswordInput\n\t\t);\n\t};\n\n\tconst changePassword = async () => {\n\t\tawait Firebase.changePassword(user.userUID, newPasswordInput, history);\n\t};\n\n\tconst pageHeader = (\n\t\t<h1 className=\"change-password-page-header\">Change Password</h1>\n\t);\n\n\tconst errorList = (\n\t\t<div className=\"change-password-page-error-list\">\n\t\t\t<span className=\"error-list-title\">\n\t\t\t\t{errors.length === 1\n\t\t\t\t\t? '1 error prohibited this book from being saved:'\n\t\t\t\t\t: `${errors.length} errors prohibited this book from being saved:`}\n\t\t\t</span>\n\t\t\t<ul>\n\t\t\t\t{errors.includes('matching') ? (\n\t\t\t\t\t<li>Password doesn't match the one in your account.</li>\n\t\t\t\t) : null}\n\t\t\t\t{errors.includes('short') ? (\n\t\t\t\t\t<li>Password is too short. (minimum is 6 characters)</li>\n\t\t\t\t) : null}\n\t\t\t\t{errors.includes('confirm') ? (\n\t\t\t\t\t<li>Password is invalid or doesn't match</li>\n\t\t\t\t) : null}\n\t\t\t</ul>\n\t\t</div>\n\t);\n\n\tconst mainContent = (\n\t\t<div className=\"change-password-page-main-content\">\n\t\t\t{pageHeader}\n\t\t\t{errors.length > 0 ? errorList : null}\n\t\t\t<div className=\"password-area\">\n\t\t\t\t<label htmlFor=\"current-password\">current password</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tname=\"current-password\"\n\t\t\t\t\tvalue={currentPasswordInput}\n\t\t\t\t\tonChange={(e) => setCurrentPasswordInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"new-password\">new password</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tname=\"new-password\"\n\t\t\t\t\tvalue={newPasswordInput}\n\t\t\t\t\tonChange={(e) => setNewPasswordInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"confirm-password\">confirm password</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tname=\"confirm-password\"\n\t\t\t\t\tvalue={confirmPasswordInput}\n\t\t\t\t\tonChange={(e) => setConfirmPasswordInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tvalue=\"save changes\"\n\t\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tconst passwordsMatch = await checkIfPasswordsMatch();\n\t\t\t\t\t\t\tif (!passwordsMatch) {\n\t\t\t\t\t\t\t\tsetErrors(['matching']);\n\t\t\t\t\t\t\t} else if (newPasswordInput !== confirmPasswordInput) {\n\t\t\t\t\t\t\t\tsetErrors(['confirm']);\n\t\t\t\t\t\t\t} else if (newPasswordInput.length < 6) {\n\t\t\t\t\t\t\t\tsetErrors(['short']);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchangePassword();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t></input>\n\t\t\t\t\t<a href={Firebase.pageGenerator.generateAccountSettingsPage()}>\n\t\t\t\t\t\tcancel\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"change-password-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default ChangePassswordPage;\n","import React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Dashboard/DeleteAccountPage.css';\n\nconst DeleteAccountPage = () => {\n\tconst history = useHistory();\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tif (user.userUID === null || user.userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t\tstate: { error: 'User not logged in' },\n\t\t\t});\n\t\t}\n\t}, [user.userUID, history]);\n\n\tconst deleteAccount = async () => {\n\t\tif (\n\t\t\twindow.confirm(\n\t\t\t\t'This will remove all your books and data from goodreads forever - are you sure?'\n\t\t\t)\n\t\t) {\n\t\t\tawait Firebase.deleteAccount(user.userUID, history);\n\t\t}\n\t};\n\n\tconst pageHeader = (\n\t\t<h1 className=\"delete-account-page-header\">Delete My Account</h1>\n\t);\n\n\tconst mainContentLeftSection = (\n\t\t<div className=\"delete-account-page-main-content-left-section\">\n\t\t\t{pageHeader}\n\t\t\t<span>\n\t\t\t\tThis will delete your account. The ratings and reviews you've posted,\n\t\t\t\tyour comments, writing, etc. will be removed from the site.\n\t\t\t</span>\n\t\t\t<div className=\"bottom-section\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tvalue=\"Delete My Account\"\n\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tawait deleteAccount();\n\t\t\t\t\t}}\n\t\t\t\t></input>\n\t\t\t\t<a href={Firebase.pageGenerator.generateAccountSettingsPage()}>\n\t\t\t\t\tcancel\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst mainContentRightSection = (\n\t\t<div className=\"delete-account-page-main-content-right-section\">\n\t\t\t<a href={Firebase.pageGenerator.generateAccountSettingsPage()}>\n\t\t\t\taccount settings\n\t\t\t</a>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"delete-account-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"delete-account-page-main-content\">\n\t\t\t\t{mainContentLeftSection}\n\t\t\t\t{mainContentRightSection}\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default DeleteAccountPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Dashboard/EditFavoriteGenresPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst EditFavoriteGenresPage = () => {\n\tconst history = useHistory();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [favoriteGenres, setFavoriteGenres] = useState([]);\n\tconst [allGenres, setAllGenres] = useState([]);\n\tconst [\n\t\tisShowingCustomGenresOption,\n\t\tsetIsShowingCustomGenresOption,\n\t] = useState(false);\n\tconst [customGenreInput, setCustomGenreInput] = useState('');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getFavoriteGenres = async () => {\n\t\t\tconst standardGenreList = [\n\t\t\t\t'contemporary',\n\t\t\t\t'fantasy',\n\t\t\t\t'fiction',\n\t\t\t\t'graphic-novels',\n\t\t\t\t'historical-fiction',\n\t\t\t\t'manga',\n\t\t\t\t'romance',\n\t\t\t\t'science-fiction',\n\t\t\t\t'thriller',\n\t\t\t\t'young-adult',\n\t\t\t\t'art',\n\t\t\t\t'biography',\n\t\t\t\t'business',\n\t\t\t\t'chick-lit',\n\t\t\t\t\"children's\",\n\t\t\t\t'christian',\n\t\t\t\t'classics',\n\t\t\t\t'comics',\n\t\t\t\t'cookbooks',\n\t\t\t\t'crime',\n\t\t\t\t'ebooks',\n\t\t\t\t'gay-and-lesbian',\n\t\t\t\t'history',\n\t\t\t\t'horror',\n\t\t\t\t'humor-and-comedy',\n\t\t\t\t'memoir',\n\t\t\t\t'music',\n\t\t\t\t'mystery',\n\t\t\t\t'non-fiction',\n\t\t\t\t'paranoia',\n\t\t\t\t'philosophy',\n\t\t\t\t'poetry',\n\t\t\t\t'psychology',\n\t\t\t\t'religion',\n\t\t\t\t'science',\n\t\t\t\t'self-help',\n\t\t\t\t'suspense',\n\t\t\t\t'spirituality',\n\t\t\t\t'sports',\n\t\t\t\t'travel',\n\t\t\t];\n\n\t\t\tconst userFavorites = await trackPromise(\n\t\t\t\tFirebase.getFavoriteGenresForUser(user.userUID, history)\n\t\t\t);\n\t\t\tsetFavoriteGenres(userFavorites);\n\t\t\tsetAllGenres(\n\t\t\t\tuserFavorites.concat(\n\t\t\t\t\tstandardGenreList.filter((genre) => !userFavorites.includes(genre))\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetFavoriteGenres();\n\t}, [user.userUID, history]);\n\n\tconst capitalizeAndSeparate = (string) => {\n\t\treturn string\n\t\t\t.split('-')\n\t\t\t.map((s) =>\n\t\t\t\ts.length === 1 ? s.toUpperCase() : s[0].toUpperCase() + s.slice(1)\n\t\t\t)\n\t\t\t.join(' ');\n\t};\n\n\tconst lowerCaseAndJoinCustomGenres = (string) => {\n\t\treturn string\n\t\t\t.split(',')\n\t\t\t.map((s) =>\n\t\t\t\ts[0] === ' '\n\t\t\t\t\t? s.slice(1).toLowerCase().split(' ').join('-')\n\t\t\t\t\t: s.toLowerCase().split(' ').join('-')\n\t\t\t);\n\t};\n\n\tconst pageHeader = (\n\t\t<h1 className=\"edit-favorite-genres-page-header\">\n\t\t\tFollow Your Favorite Genres\n\t\t</h1>\n\t);\n\n\tconst explanationBox = (\n\t\t<div className=\"edit-favorite-genres-page-explanation-box\">\n\t\t\t<span>\n\t\t\t\tWe use your favorite genres to make better book recommendations and\n\t\t\t\ttailor what you see in your Updates feed.\n\t\t\t</span>\n\t\t</div>\n\t);\n\n\tconst genreSelectionArea = loaded ? (\n\t\t<div className=\"edit-favorite-genres-page-genre-selection-area\">\n\t\t\t<div className=\"genre-boxes\">\n\t\t\t\t{allGenres.map((genre, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tfavoriteGenres.includes(genre)\n\t\t\t\t\t\t\t\t\t? 'genre-box selected'\n\t\t\t\t\t\t\t\t\t: 'genre-box'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tif (favoriteGenres.includes(genre)) {\n\t\t\t\t\t\t\t\t\tsetFavoriteGenres((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.filter((g) => g !== genre)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetFavoriteGenres((previous) => previous.concat(genre));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"genre-checkbox\"\n\t\t\t\t\t\t\t\tchecked={favoriteGenres.includes(genre)}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tif (favoriteGenres.includes(genre)) {\n\t\t\t\t\t\t\t\t\t\tsetFavoriteGenres((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.filter((g) => g !== genre)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetFavoriteGenres((previous) => previous.concat(genre));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\treadOnly={true}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"genre-checkbox\">\n\t\t\t\t\t\t\t\t{capitalizeAndSeparate(genre)}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t{!isShowingCustomGenresOption ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"custom-genres-button\"\n\t\t\t\t\tonClick={(_e) => setIsShowingCustomGenresOption(true)}\n\t\t\t\t>\n\t\t\t\t\tDont see your favorite genres here?\n\t\t\t\t</button>\n\t\t\t) : (\n\t\t\t\t<div className=\"custom-genre-section\">\n\t\t\t\t\t<label htmlFor=\"custom-genre\">\n\t\t\t\t\t\tEnter other favorite genres, separated by commas:{' '}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"custom-genre\"\n\t\t\t\t\t\tplaceholder=\"ex: Chess, Cooking, Hobbies\"\n\t\t\t\t\t\tvalue={customGenreInput}\n\t\t\t\t\t\tonChange={(e) => setCustomGenreInput(e.target.value)}\n\t\t\t\t\t></input>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"edit-favorite-genres-page-main-content\">\n\t\t\t{pageHeader}\n\t\t\t{explanationBox}\n\t\t\t{genreSelectionArea}\n\t\t\t<input\n\t\t\t\ttype=\"submit\"\n\t\t\t\tvalue=\"Continue\"\n\t\t\t\tonClick={async (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tconst newGenres =\n\t\t\t\t\t\tcustomGenreInput.length > 0\n\t\t\t\t\t\t\t? favoriteGenres.concat(\n\t\t\t\t\t\t\t\t\tlowerCaseAndJoinCustomGenres(customGenreInput)\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: favoriteGenres;\n\t\t\t\t\tawait Firebase.updateFavoriteGenresForUser(user.userUID, newGenres);\n\t\t\t\t\thistory.push({\n\t\t\t\t\t\tpathname: '/',\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t></input>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"edit-favorite-genres-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default EditFavoriteGenresPage;\n","import React, { useState, useEffect } from 'react';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/Dashboard/GenrePage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst GenrePage = ({ match }) => {\n\tconst {\n\t\tparams: { genre },\n\t} = match;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [genreInfo, setGenreInfo] = useState({});\n\tconst [descriptionShowingMore, setDescriptionShowingMore] = useState(false);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getGenreInfo = async () => {\n\t\t\tsetGenreInfo(\n\t\t\t\tawait trackPromise(Firebase.getGenreInfo(user.userUID, genre))\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetGenreInfo();\n\t}, [user.userUID, genre]);\n\n\tconst capitalizeAndSeparate = (string) => {\n\t\treturn string\n\t\t\t.split('-')\n\t\t\t.map((s) =>\n\t\t\t\ts.length === 1 ? s.toUpperCase() : s[0].toUpperCase() + s.slice(1)\n\t\t\t)\n\t\t\t.join(' ');\n\t};\n\n\tconst addGenreToFavorites = async () => {\n\t\tawait Firebase.updateFavoriteGenresForUser(\n\t\t\tuser.userUID,\n\t\t\tgenreInfo.userFavoriteGenres.concat(genre)\n\t\t);\n\t\tsetGenreInfo((previous) => {\n\t\t\treturn {\n\t\t\t\t...previous,\n\t\t\t\tuserFavoriteGenres: previous.userFavoriteGenres.concat(genre),\n\t\t\t};\n\t\t});\n\t};\n\n\tconst removeGenreFromFavorites = async () => {\n\t\tawait Firebase.updateFavoriteGenresForUser(\n\t\t\tuser.userUID,\n\t\t\tgenreInfo.userFavoriteGenres.filter((g) => g !== genre)\n\t\t);\n\t\tsetGenreInfo((previous) => {\n\t\t\treturn {\n\t\t\t\t...previous,\n\t\t\t\tuserFavoriteGenres: previous.userFavoriteGenres.filter(\n\t\t\t\t\t(g) => g !== genre\n\t\t\t\t),\n\t\t\t};\n\t\t});\n\t};\n\n\tconst pageHeader = loaded ? (\n\t\t<div className=\"genre-page-header\">\n\t\t\t<div className=\"page-indication\">\n\t\t\t\t<span>Genres</span>\n\t\t\t\t{genreInfo.parentGenre !== undefined ? <span>{'>'}</span> : null}\n\t\t\t\t{genreInfo.parentGenre !== undefined ? (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(\n\t\t\t\t\t\t\tgenreInfo.parentGenre\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{capitalizeAndSeparate(genreInfo.parentGenre)}\n\t\t\t\t\t</a>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t<h1>{capitalizeAndSeparate(genre)}</h1>\n\t\t\t{genreInfo.userFavoriteGenres !== undefined ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"user-favorite-button\"\n\t\t\t\t\tonMouseOver={(e) => {\n\t\t\t\t\t\tif (genreInfo.userFavoriteGenres.includes(genre)) {\n\t\t\t\t\t\t\te.target.innerHTML = 'Unfavorite this Genre';\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseLeave={(e) => {\n\t\t\t\t\t\tif (genreInfo.userFavoriteGenres.includes(genre)) {\n\t\t\t\t\t\t\te.target.innerHTML = 'Favorited';\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\tif (genreInfo.userFavoriteGenres.includes(genre)) {\n\t\t\t\t\t\t\tremoveGenreFromFavorites();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taddGenreToFavorites();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{genreInfo.userFavoriteGenres.includes(genre)\n\t\t\t\t\t\t? 'Favorited'\n\t\t\t\t\t\t: 'Add to Favorite Genres'}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst descriptionSection = loaded ? (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tdescriptionShowingMore\n\t\t\t\t\t? 'genre-page-description-section more'\n\t\t\t\t\t: 'genre-page-description-section'\n\t\t\t}\n\t\t>\n\t\t\t<p>{genreInfo.description}</p>\n\t\t\t<button\n\t\t\t\tclassName=\"genre-description-more-less-button\"\n\t\t\t\tonClick={(_e) => {\n\t\t\t\t\tsetDescriptionShowingMore((previous) => !previous);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{descriptionShowingMore ? '(less)' : '...more'}\n\t\t\t</button>\n\t\t</div>\n\t) : null;\n\n\tconst newReleasesSection =\n\t\tloaded && genreInfo.newReleases.length > 0 ? (\n\t\t\t<div className=\"genre-page-new-releases-section\">\n\t\t\t\t<span className=\"section-title\">{`NEW RELEASES TAGGED \"${genre.toUpperCase()}\"`}</span>\n\t\t\t\t<div className=\"book-list\">\n\t\t\t\t\t{genreInfo.newReleases.map((book, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tclassName=\"book-cover-wrapper\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mostReadThisWeekSection =\n\t\tloaded && genreInfo.mostReadThisWeek.length > 0 ? (\n\t\t\t<div className=\"genre-page-new-most-read-this-week-section\">\n\t\t\t\t<span className=\"section-title\">MOST READ THIS WEEK</span>\n\t\t\t\t<div className=\"book-list\">\n\t\t\t\t\t{genreInfo.mostReadThisWeek.map((book, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tclassName=\"book-cover-wrapper\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst listsSection =\n\t\tloaded && genreInfo.lists.length > 0 ? (\n\t\t\t<div className=\"genre-page-lists-section\">\n\t\t\t\t<span className=\"section-title\">LISTS</span>\n\t\t\t\t<div className=\"lists-list\">\n\t\t\t\t\t{genreInfo.lists.map((list, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"list-card\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"covers\">\n\t\t\t\t\t\t\t\t\t{list.bookCovers.map((cover, coverIndex) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"cover-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateListPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tlist.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tlist.title\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={coverIndex}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={cover} alt={'list book'} />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"list-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateListPage(\n\t\t\t\t\t\t\t\t\t\tlist.id,\n\t\t\t\t\t\t\t\t\t\tlist.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{list.title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<span className=\"list-numbers\">{`${list.numberOfBooks} books  ${list.numberOfVoters} voters`}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst genreBooksSection =\n\t\tloaded && genreInfo.genreBooks.length > 0 ? (\n\t\t\t<div className=\"genre-page-genre-books-section\">\n\t\t\t\t<span className=\"section-title\">{`${capitalizeAndSeparate(\n\t\t\t\t\tgenre\n\t\t\t\t).toUpperCase()} BOOKS`}</span>\n\t\t\t\t<div className=\"book-list\">\n\t\t\t\t\t{genreInfo.genreBooks.map((book, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tclassName=\"book-cover-wrapper\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContentLeftSection = (\n\t\t<div className=\"genre-page-main-content-left-section\">\n\t\t\t{pageHeader}\n\t\t\t{descriptionSection}\n\t\t\t{newReleasesSection}\n\t\t\t{mostReadThisWeekSection}\n\t\t\t{listsSection}\n\t\t\t{genreBooksSection}\n\t\t</div>\n\t);\n\n\tconst relatedGenresSection =\n\t\tloaded && genreInfo.relatedGenres.length > 0 ? (\n\t\t\t<div className=\"genre-page-related-genres-section\">\n\t\t\t\t<span className=\"section-title\">RELATED GENRES</span>\n\t\t\t\t<div className=\"related-genres-list\">\n\t\t\t\t\t{genreInfo.relatedGenres.map((relatedGenre, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(relatedGenre)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{capitalizeAndSeparate(relatedGenre)}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst relatedNewsSection =\n\t\tloaded && genreInfo.relatedNews.length > 0 ? (\n\t\t\t<div className=\"genre-page-related-news-section\">\n\t\t\t\t<span className=\"section-title\">RELATED NEWS</span>\n\t\t\t\t{genreInfo.relatedNews.map((article, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"article-preview\" key={index}>\n\t\t\t\t\t\t\t{article.image !== undefined ? (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"article-image-wrapper\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img src={article.image} alt={article.title} />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"article-title-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{article.title}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<p>{article.content}</p>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"article-read-more-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRead more...\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t) : null;\n\n\tconst quotesSection =\n\t\tloaded && genreInfo.quotesTagged.length > 0 ? (\n\t\t\t<div className=\"genre-page-quotes-section\">\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateQuotesTagPage(genre)}\n\t\t\t\t\tclassName=\"section-title\"\n\t\t\t\t>{`QUOTES TAGGED ${capitalizeAndSeparate(genre).toUpperCase()}`}</a>\n\t\t\t\t<div className=\"quotes-list\">\n\t\t\t\t\t{genreInfo.quotesTagged.map((quote, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"quote-card\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"quote-and-author-picture\">\n\t\t\t\t\t\t\t\t\t{quote.authorPicture !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\tquote.authorId,\n\t\t\t\t\t\t\t\t\t\t\t\tquote.authorName\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\tquote.authorPicture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? quote.authorPicture\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\talt={quote.authorName}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<div className=\"actual-quote\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"quote-content\">{` ${quote.content} `}</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"quote-authorship-span\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{' '}</span>\n\t\t\t\t\t\t\t\t\t\t\t<b>{`${quote.authorName}, ${quote.bookTitle}`}</b>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"quote-likes-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>{`${quote.numberOfLikes} likes`}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"more-quotes-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateQuotesTagPage(genre)}\n\t\t\t\t>\n\t\t\t\t\tMore quotes...\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContentRightSection = (\n\t\t<div className=\"genre-page-main-content-right-section\">\n\t\t\t{relatedGenresSection}\n\t\t\t{relatedNewsSection}\n\t\t\t{quotesSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"genre-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"genre-page-main-content\">\n\t\t\t\t{mainContentLeftSection}\n\t\t\t\t{mainContentRightSection}\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default GenrePage;\n","import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/News/NewsPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst NewsPage = () => {\n\tconst query = new URLSearchParams(useLocation().search);\n\tconst contentType = query.get('content_type');\n\tconst page = query.get('page') !== null ? parseInt(query.get('page')) : 1;\n\tconst link =\n\t\tcontentType === 'articles'\n\t\t\t? Firebase.pageGenerator.generateArticlesNewsPage() + '&'\n\t\t\t: contentType === 'interviews'\n\t\t\t? Firebase.pageGenerator.generateInterviewsNewsPage() + '&'\n\t\t\t: Firebase.pageGenerator.generateNewsPage() + '?';\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [news, setNews] = useState([]);\n\n\tuseEffect(() => {\n\t\tconst getNewsInfo = async () => {\n\t\t\tsetNews(await trackPromise(Firebase.getNews()));\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetNewsInfo();\n\t}, []);\n\n\tconst featuredArticle = loaded\n\t\t? news.filter(\n\t\t\t\t(article) =>\n\t\t\t\t\t!(contentType === 'articles' && article.type !== 'article') &&\n\t\t\t\t\t!(contentType === 'interviews' && article.type !== 'interview') &&\n\t\t\t\t\tarticle.featured\n\t\t  )[0]\n\t\t: null;\n\n\tconst pageHeader = (\n\t\t<a\n\t\t\tclassName=\"page-header-a\"\n\t\t\thref={Firebase.pageGenerator.generateNewsPage()}\n\t\t>\n\t\t\t<h1>News and Interviews</h1>\n\t\t</a>\n\t);\n\n\tconst browsingTypeContentArea = (\n\t\t<div className=\"browsing-type-content-area\">\n\t\t\t<a\n\t\t\t\tclassName={\n\t\t\t\t\tcontentType === 'all' || contentType === null\n\t\t\t\t\t\t? 'all-stories-a selected'\n\t\t\t\t\t\t: 'all-stories-a'\n\t\t\t\t}\n\t\t\t\thref={Firebase.pageGenerator.generateAllStoriesNewsPage()}\n\t\t\t>\n\t\t\t\tAll Stories\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\tclassName={\n\t\t\t\t\tcontentType === 'articles' ? 'articles-a selected' : 'articles-a'\n\t\t\t\t}\n\t\t\t\thref={Firebase.pageGenerator.generateArticlesNewsPage()}\n\t\t\t>\n\t\t\t\tArticles\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\tclassName={\n\t\t\t\t\tcontentType === 'interviews'\n\t\t\t\t\t\t? 'interviews-a selected'\n\t\t\t\t\t\t: 'interviews-a'\n\t\t\t\t}\n\t\t\t\thref={Firebase.pageGenerator.generateInterviewsNewsPage()}\n\t\t\t>\n\t\t\t\tInterviews\n\t\t\t</a>\n\t\t</div>\n\t);\n\n\tconst newsListSection = loaded ? (\n\t\t<div className=\"news-page-news-list-section\">\n\t\t\t{page === 1 ? (\n\t\t\t\t<div className=\"featured-article\">\n\t\t\t\t\t{featuredArticle.image !== undefined ? (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"article-image-wrapper\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\tfeaturedArticle.id,\n\t\t\t\t\t\t\t\tfeaturedArticle.title\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img src={featuredArticle.image} alt={featuredArticle.title} />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t\t<div className=\"type-and-date\">\n\t\t\t\t\t\t\t<span>{featuredArticle.type.toUpperCase()}</span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\tfeaturedArticle.id,\n\t\t\t\t\t\t\t\t\tfeaturedArticle.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{format(featuredArticle.date, 'MMM dd')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"title-and-content\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"article-title-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\tfeaturedArticle.id,\n\t\t\t\t\t\t\t\t\tfeaturedArticle.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{featuredArticle.title}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span className=\"article-content-preview\">\n\t\t\t\t\t\t\t\t{featuredArticle.content.slice(0, 137) + '...'}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"read-more-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\tfeaturedArticle.id,\n\t\t\t\t\t\t\t\t\tfeaturedArticle.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRead more\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"likes-area\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticleLikesPage(\n\t\t\t\t\t\t\t\t\tfeaturedArticle.id\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>{`${featuredArticle.numberOfLikes} likes`}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t\t<div className=\"other-articles\">\n\t\t\t\t{news\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(article, index) =>\n\t\t\t\t\t\t\tindex < page * 10 &&\n\t\t\t\t\t\t\tindex >= (page - 1) * 10 &&\n\t\t\t\t\t\t\tarticle !== featuredArticle &&\n\t\t\t\t\t\t\t!(contentType === 'articles' && article.type !== 'article') &&\n\t\t\t\t\t\t\t!(contentType === 'interviews' && article.type !== 'interview')\n\t\t\t\t\t)\n\t\t\t\t\t.map((article, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"article-card\" key={index}>\n\t\t\t\t\t\t\t\t{article.image !== undefined ? (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"article-image-wrapper\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img src={article.image} alt={article.title} />\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t\t\t\t\t<div className=\"type-and-date\">\n\t\t\t\t\t\t\t\t\t\t<span>{article.type.toUpperCase()}</span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{format(article.date, 'MMM dd')}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"title-and-content\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"article-title-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{article.title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span className=\"article-content-preview\">\n\t\t\t\t\t\t\t\t\t\t\t{article.content.slice(0, 107) + '...'}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"read-more-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tRead more\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"likes-area\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticleLikesPage(\n\t\t\t\t\t\t\t\t\t\t\t\tarticle.id\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>{`${article.numberOfLikes} likes`}</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t\t{Math.ceil(\n\t\t\t\tnews.filter(\n\t\t\t\t\t(article) =>\n\t\t\t\t\t\tarticle.type === contentType ||\n\t\t\t\t\t\tcontentType === 'all' ||\n\t\t\t\t\t\tcontentType === null\n\t\t\t\t).length / 10\n\t\t\t) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t{page === 1 ? (\n\t\t\t\t\t\t<span> previous</span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<a href={link + `page=${page - 1}`}> previous</a>\n\t\t\t\t\t)}\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(news.length / 10),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number, index) => {\n\t\t\t\t\t\tif (page === number) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<span key={index}>\n\t\t\t\t\t\t\t\t\t<em>{number}</em>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a key={index} href={link + `page=${number}`}>\n\t\t\t\t\t\t\t\t{number}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t{page ===\n\t\t\t\t\tMath.ceil(\n\t\t\t\t\t\tnews.filter(\n\t\t\t\t\t\t\t(article) =>\n\t\t\t\t\t\t\t\tarticle.type === contentType ||\n\t\t\t\t\t\t\t\tcontentType === 'all' ||\n\t\t\t\t\t\t\t\tcontentType === null\n\t\t\t\t\t\t).length / 10\n\t\t\t\t\t) ? (\n\t\t\t\t\t\t<span>next </span>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<a href={link + `page=${page + 1}`}>next </a>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"news-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"news-page-main-content\">\n\t\t\t\t{pageHeader}\n\t\t\t\t<div className=\"main-section\">\n\t\t\t\t\t{browsingTypeContentArea}\n\t\t\t\t\t{newsListSection}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default NewsPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/News/ArticlePage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst ArticlePage = ({ match }) => {\n\tconst history = useHistory();\n\tconst {\n\t\tparams: { articlePageId },\n\t} = match;\n\tconst articleId = articlePageId.split('-')[0];\n\tconst articleTitle = articlePageId\n\t\t.split('-')\n\t\t.slice(1)\n\t\t.map((string) =>\n\t\t\tstring.length === 1\n\t\t\t\t? string.toUpperCase()\n\t\t\t\t: string[0].toUpperCase() + string.slice(1)\n\t\t)\n\t\t.join(' ');\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [articleInfo, setArticleInfo] = useState({});\n\tconst [savingLike, setSavingLike] = useState(false);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getArticleInfo = async () => {\n\t\t\tsetArticleInfo(await trackPromise(Firebase.getInfoForArticle(articleId)));\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetArticleInfo();\n\t}, [articleId]);\n\n\tconst pageHeader = loaded ? (\n\t\t<div className=\"article-page-header\">\n\t\t\t<a\n\t\t\t\tclassName=\"news-and-interviews-a\"\n\t\t\t\thref={Firebase.pageGenerator.generateNewsPage()}\n\t\t\t>\n\t\t\t\t<span>News and Interviews</span>\n\t\t\t\t<div className=\"icon-side-arrow\"></div>\n\t\t\t</a>\n\t\t\t<h1>{articleTitle}</h1>\n\t\t\t<span className=\"authorship-and-date\">{`Posted by ${\n\t\t\t\tarticleInfo.authorName\n\t\t\t} on ${format(articleInfo.date, 'MMMM dd, yyyy')}`}</span>\n\t\t</div>\n\t) : null;\n\n\tconst topLikesArea = loaded ? (\n\t\t<div className=\"article-page-top-likes-area\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateArticleLikesPage(articleId)}\n\t\t\t>{`${articleInfo.likes.length} likes`}</a>\n\t\t</div>\n\t) : null;\n\n\tconst articleContentSection = loaded ? (\n\t\t<div className=\"article-page-article-content-section\">\n\t\t\t<img src={articleInfo.image} alt={articleTitle} />\n\t\t\t{articleInfo.content.split('\\\\n').map((paragraph, index) => {\n\t\t\t\treturn <p key={index}>{paragraph}</p>;\n\t\t\t})}\n\t\t</div>\n\t) : null;\n\n\tconst bottomLikesArea = loaded ? (\n\t\t<div className=\"article-page-bottom-likes-area\">\n\t\t\t{savingLike ? (\n\t\t\t\t<img\n\t\t\t\t\tclassName=\"loading-spinner\"\n\t\t\t\t\tsrc={\n\t\t\t\t\t\t'data:image/gif;base64,R0lGODlhEAAQAPMPAJmSa8XBq%2BLg1baxltPQwKihgJGJX%2FHw6724oPf39czIta%2BpiqCZddrYypKKYf%2F%2F%2FyH%2FC05FVFNDQVBFMi4wAwEAAAAh%2BQQFCgAPACwAAAAAEAAQAEAEcPDJlygadUq1OtFTIoqLoSSGMwxH1krH8RyF0BCHIlPaYTAJh6G1CyUahaIkE1IAFsrEQaCcBWSEz0PAnBwYLcOQ15MpTMJYd1ZyUDXSDGelBY0qIkFg%2FZoEGAQJCjoxDRRvIQMBD1kzgSAgAgKQDxEAIfkEBQoADwAsAAAAAA8AEAAABF3wyfkCkonOJZk8QKNJxcM4piGMEsEAhMFNA%2FwAhWUYWSYNj8JhIhiyZqxHAxEIrJIPwgCBeEI%2FhJFv0lgANYmDT7EQERqHtFGsQRwEjYRVE8jCJXMMIXN%2FGJNpIxEAIfkEBQoADwAsAAAAABAADwAABFrwyfmIolgiuVhKRSY5w9MlZZZUT9M10yFIQQEXi6KEh2IYBw0gJTkQfobZRIBYLQ0XiUBHCGKckkZgK%2Bq2vBiEAtslBGYCwecjcioO8MeBTCHM4glrBia3kiMAIfkEBQoADwAsAAAAABAAEAAABFzwySkJvTKkN5YcAvYUAech2CYBQheiySEpiLwEBOElFqAGpIfqIWCIHiWKrJbYEBoNEQIAcIByBNkFYegWKKHLYXxQHRSW40SQfYzVQklC0BweBbIm3C23w%2FUYEQAh%2BQQFCgAIACwAAAAAEAAOAAAERRDJiUKgWA5pDM%2Fc1iEAKAVeR5DYAAiIUVheNWrGhtUrpWOFyYFABBU6hpLlkgEga5IDRiDL9CjUjhSxNSEzXewvappEAAAh%2BQQFCgAOACwAAAAAEAAQAAAEa9DJ6YSg2KUmVZDBkSUBpyiOwojZgRznAaCU0IgKYQVFxSyShEAhSEwSh4GjwJIcOJTEgpCoIg8HI4YwGCwUWKyWQmAwAIgo5lAgYK6UpwQYzFolAEPSARhnGgZKDlBqEwwGFyNrBm4Zjn4RACH5BAUKAA8ALAAAAAAQABAAAARc8Mn5zqFYCkkIz9zVeMQCSkoyPkuDWcnTCBaBSMstHXSGAANM4oJBNBLIZCzTQCCCSlBjUSgETpPBcYndPBBcTADBeCRuhRPAoHhceaDEmkiMOwwXh%2BuUGBTCEhEAIfkEBQoADgAsAQABAA8ADwAABFnQySOFkE3qWq9A2%2BZdyOUkp3ZQThM4x6Ak9IGGQfFu96aYoaAgQMwENZ%2BB7ChJlIKJVfPAcOw2BoNCsagqHAufIcBgEBzf0CF7AAAShWPDcHGjGECVZnCMAAAh%2BQQFCgAPACwAAAAAEAAQAAAEXfDJ%2BVKiWN53jhQbdlwdR4RU4nWJ4mFWbAmNpBAZTCB4jhEvH%2BWgKAonh4Cy9mEIMK7hwmDoTRYAhcZhKHgYhAZi8SAwEBLC01Yo1HrBCSPRfgwcPse3ICHnNko5EQAh%2BQQFCgAOACwAAAEAEAAPAAAEWtDJ6VKSh2pppdha922ZdpTECE6NIlxUSakOAtwI2OxCYfwLEIHgSpwIAJmEsHK8JglEgSlh1BKMRcOhGDgHAUlDRhgsBIAtTFNwmB2B9kZgdSyCNeVGoQBFAAAh%2BQQFCgAPACwAAAEAEAAPAAAEWvDJSV%2BqeKZTD8fHRRmGkpyolAifQBrfdLBVYDSdKDF89gjAw8ABAAQywMYn0VhgcJWBJCZRIKCPwuO4GAAJCEmAIBFIyI0A4qD1AZzqB8EJoiMGp6PvTMZEAAAh%2BQQFCgAPACwAAAEADwAPAAAEWvBJAY68%2BArDspeD0XxS9xyG4R3JaRLjlbAY4QhZKynFsiie2eEQYBiBuSGrJRh4cLLAA%2BBpKKBOICIwbBBOsNMEIFBIEZaHTl1APMyPRmB9cb%2Bljy8pHsNEAAA7'\n\t\t\t\t\t}\n\t\t\t\t\talt=\"Loading\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<button\n\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\tsetSavingLike(true);\n\t\t\t\t\t\tawait Firebase.likeUnlikeArticle(user.userUID, articleId, history);\n\t\t\t\t\t\tsetSavingLike(false);\n\t\t\t\t\t\tsetArticleInfo((previous) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\tlikes: previous.likes.includes(user.userUID)\n\t\t\t\t\t\t\t\t\t? previous.likes.filter((user) => user !== user.userUID)\n\t\t\t\t\t\t\t\t\t: previous.likes.concat(user.userUID),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{articleInfo.likes.includes(user.userUID) ? 'Unlike' : 'Like'}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t\t<span className=\"separator\"></span>\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateArticleLikesPage(articleId)}\n\t\t\t>{`${articleInfo.likes.length} likes`}</a>\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"article-page-main-content\">\n\t\t\t{pageHeader}\n\t\t\t{topLikesArea}\n\t\t\t{articleContentSection}\n\t\t\t{bottomLikesArea}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"article-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default ArticlePage;\n","import React, { useState, useEffect } from 'react';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/News/ArticleLikedByPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst ArticleLikedByPage = ({ match }) => {\n\tconst {\n\t\tparams: { articleId },\n\t} = match;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [page, setPage] = useState(1);\n\tconst [title, setTitle] = useState(null);\n\tconst [users, setUsers] = useState([]);\n\n\tuseEffect(() => {\n\t\tconst getUsersAndTitle = async () => {\n\t\t\tsetTitle(await trackPromise(Firebase.getArticleTitle(articleId)));\n\t\t\tsetUsers(await trackPromise(Firebase.getUsersWhoLikedArticle(articleId)));\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetUsersAndTitle();\n\t}, [articleId]);\n\n\tuseEffect(() => {\n\t\tconsole.log(users);\n\t}, [users]);\n\n\tconst pageHeader = loaded ? (\n\t\t<h1 className=\"article-liked-by-page-header\">\n\t\t\t<a href={Firebase.pageGenerator.generateArticlePage(articleId, title)}>\n\t\t\t\t{title}\n\t\t\t</a>\n\t\t\t<span>{'> Liked By'}</span>\n\t\t</h1>\n\t) : null;\n\n\tconst userList = loaded ? (\n\t\t<div className=\"article-liked-by-page-user-list\">\n\t\t\t<span className=\"showing-numbers-span\">{`Showing ${\n\t\t\t\t(page - 1) * 100 + 1\n\t\t\t}-${\n\t\t\t\tpage === Math.ceil(users.length / 100) ? users.length : page * 100\n\t\t\t} of ${users.length}`}</span>\n\t\t\t<div className=\"list\">\n\t\t\t\t{users\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(_u, index) => index >= (page - 1) * 100 && index <= page * 100\n\t\t\t\t\t)\n\t\t\t\t\t.map((user, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"user-card\" key={index}>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"user-profile-picture-wrapper\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\tuser.id,\n\t\t\t\t\t\t\t\t\t\tuser.name\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\tuser.profilePicture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? user.profilePicture\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={user.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"user-name-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\tuser.id,\n\t\t\t\t\t\t\t\t\t\t\tuser.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{user.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<span>{`${user.numberOfBooks} books`}</span>\n\t\t\t\t\t\t\t\t\t<span>{`${user.numberOfFriends} friends`}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t\t{users.length > 100 ? (\n\t\t\t\t<div className=\"page-navigation-area\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(users.length / 100),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"page-number-button\"\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={page === Math.ceil(users.length / 100)}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"article-liked-by-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"article-liked-by-page-main-content\">\n\t\t\t\t{pageHeader}\n\t\t\t\t{userList}\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default ArticleLikedByPage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/User/RatingsChart.css';\n\nconst RatingsChart = (props) => {\n\tconst ratingCount = Math.max(\n\t\tprops.fiveRatings +\n\t\t\tprops.fourRatings +\n\t\t\tprops.threeRatings +\n\t\t\tprops.twoRatings +\n\t\t\tprops.oneRatings,\n\t\t1\n\t);\n\tconst mostFrequentRating = Math.max(\n\t\tprops.fiveRatings,\n\t\tprops.fourRatings,\n\t\tprops.threeRatings,\n\t\tprops.twoRatings,\n\t\tprops.oneRatings\n\t);\n\n\treturn (\n\t\t<div className=\"ratings-chart\">\n\t\t\t<button\n\t\t\t\tclassName=\"rating-chart-close-button\"\n\t\t\t\tonClick={(_e) => props.closeChart()}\n\t\t\t>\n\t\t\t\t[close]\n\t\t\t</button>\n\t\t\t<table className=\"rating-distribution\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t<span>5</span>\n\t\t\t\t\t\t\t<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t? (props.fiveRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t? Math.round((props.fiveRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t}% (${props.fiveRatings})`}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t<span>4</span>\n\t\t\t\t\t\t\t<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t? (props.fourRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t? Math.round((props.fourRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t}% (${props.fourRatings})`}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t<span>3</span>\n\t\t\t\t\t\t\t<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t? (props.threeRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t? Math.round((props.threeRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t}% (${props.threeRatings})`}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t<span>2</span>\n\t\t\t\t\t\t\t<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t? (props.twoRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t? Math.round((props.twoRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t}% (${props.threeRatings})`}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th width=\"25\" className=\"rating-and-star\">\n\t\t\t\t\t\t\t<span>1</span>\n\t\t\t\t\t\t\t<div className=\"static-star small full\"></div>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<td className=\"green-bar-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"green-bar\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t\t\t? (props.oneRatings * 350) / mostFrequentRating\n\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td width=\"90\" className=\"rating-percentage-and-absolute\">\n\t\t\t\t\t\t\t{`${\n\t\t\t\t\t\t\t\tratingCount !== 0\n\t\t\t\t\t\t\t\t\t? Math.round((props.oneRatings * 100) / ratingCount)\n\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t}% (${props.oneRatings})`}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n};\n\nRatingsChart.propTypes = {\n\tfiveRatings: PropTypes.number,\n\tfourRatings: PropTypes.number,\n\tthreeRatings: PropTypes.number,\n\ttwoRatings: PropTypes.number,\n\toneRatings: PropTypes.number,\n\tcloseChart: PropTypes.func,\n};\n\nexport default RatingsChart;\n","import React, { useState, useEffect, useLayoutEffect, useRef } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { format, differenceInYears } from 'date-fns';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/User/UserPage.css';\nimport RatingsChart from './RatingsChart';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst UserPage = ({ match }) => {\n\tconst {\n\t\tparams: { userPageId },\n\t} = match;\n\tconst history = useHistory();\n\tconst pageLocation = useLocation();\n\tconst moreDropdown = useRef();\n\tconst moreDropdownTrigger = useRef();\n\tconst userId = userPageId.split('-')[0];\n\tconst firstName =\n\t\tuserPageId.split('-')[1].length > 1\n\t\t\t? userPageId.split('-')[1][0].toUpperCase() +\n\t\t\t  userPageId.split('-')[1].slice(1)\n\t\t\t: userPageId.split('-')[1].toUpperCase();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [userInfo, setUserInfo] = useState({});\n\tconst [savingFollow, setSavingFollow] = useState(false);\n\tconst [showingMoreDropdown, setShowingMoreDropdown] = useState(false);\n\tconst [savingShelves, setSavingShelves] = useState([]);\n\tconst [areShelfPopupsHidden, setAreShelfPopupsHidden] = useState([]);\n\tconst [areShelfPopupsBottomHidden, setAreShelfPopupsBottomHidden] = useState(\n\t\t[]\n\t);\n\tconst [shelfPopupReadingInputs, setShelfPopupReadingInputs] = useState([]);\n\tconst [shelfPopupToReadInputs, setShelfPopupToReadInputs] = useState([]);\n\tconst [\n\t\tareAddShelfInputSectionsHidden,\n\t\tsetAreAddShelfInputSectionsHidden,\n\t] = useState([]);\n\tconst [addShelfInputs, setAddShelfInputs] = useState([]);\n\tconst [exhibitedStarRatings, setExhibitedStarRatings] = useState([]);\n\tconst [userLikedQuotes, setUserLikedQuotes] = useState([]);\n\tconst [unfollowModalVisible, setUnfollowModalVisible] = useState(false);\n\tconst [userRatingsChartVisible, setUserRatingsChartVisible] = useState(false);\n\tconst [updatesBeingDeleted, setUpdatesBeingDeleted] = useState([]);\n\tconst [topMessage, setTopMessage] = useState('');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseLayoutEffect(() => {\n\t\tdocument.addEventListener('click', (event) => {\n\t\t\tif (\n\t\t\t\t!(\n\t\t\t\t\t(moreDropdown.current !== null &&\n\t\t\t\t\t\tmoreDropdown.current !== undefined &&\n\t\t\t\t\t\tmoreDropdown.current.contains(event.target)) ||\n\t\t\t\t\t(moreDropdownTrigger.current !== null &&\n\t\t\t\t\t\tmoreDropdownTrigger.current !== undefined &&\n\t\t\t\t\t\tmoreDropdownTrigger.current.contains(event.target))\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tsetShowingMoreDropdown(false);\n\t\t\t}\n\t\t});\n\t});\n\n\tuseEffect(() => {\n\t\tif (pageLocation.state !== undefined && pageLocation.state.addedFriend) {\n\t\t\tsetTopMessage(\n\t\t\t\t'A friend request has been sent to Entien. After confirmation has been made, you will be notified by email.'\n\t\t\t);\n\t\t}\n\t}, [pageLocation.state]);\n\n\tuseEffect(() => {\n\t\tconst getUserInfo = async () => {\n\t\t\tconst userInfoObject = await trackPromise(\n\t\t\t\tFirebase.getUserInfoForUserPage(userId, user.userUID)\n\t\t\t);\n\t\t\tuserInfoObject.isUserFriend = true;\n\t\t\tsetUserInfo(userInfoObject);\n\t\t\tsetLoaded(true);\n\t\t\tconst numberOfInteractiveBookCards =\n\t\t\t\tuserInfoObject.currentlyReadingBooks.length +\n\t\t\t\tuserInfoObject.recentUpdates.filter(\n\t\t\t\t\t(update) =>\n\t\t\t\t\t\tupdate.type === 'add-book-to-read' ||\n\t\t\t\t\t\tupdate.type === 'add-book-read' ||\n\t\t\t\t\t\tupdate.type === 'add-book-reading' ||\n\t\t\t\t\t\tupdate.type === 'rate-book'\n\t\t\t\t).length;\n\t\t\tsetSavingShelves(Array(numberOfInteractiveBookCards).fill(false));\n\t\t\tsetAreShelfPopupsHidden(Array(numberOfInteractiveBookCards).fill(true));\n\t\t\tsetAreShelfPopupsBottomHidden(\n\t\t\t\tArray(numberOfInteractiveBookCards).fill(true)\n\t\t\t);\n\t\t\tsetShelfPopupReadingInputs(Array(numberOfInteractiveBookCards).fill(''));\n\t\t\tsetShelfPopupToReadInputs(Array(numberOfInteractiveBookCards).fill(''));\n\t\t\tsetAreAddShelfInputSectionsHidden(\n\t\t\t\tArray(numberOfInteractiveBookCards).fill(true)\n\t\t\t);\n\t\t\tsetAddShelfInputs(Array(numberOfInteractiveBookCards).fill(''));\n\t\t\tsetExhibitedStarRatings(\n\t\t\t\tuserInfoObject.currentlyReadingBooks\n\t\t\t\t\t.map((book) => (book.userRating === undefined ? 0 : book.userRating))\n\t\t\t\t\t.concat(\n\t\t\t\t\t\tuserInfoObject.recentUpdates\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\tupdate.type === 'add-book-to-read' ||\n\t\t\t\t\t\t\t\t\tupdate.type === 'add-book-read' ||\n\t\t\t\t\t\t\t\t\tupdate.type === 'add-book-reading' ||\n\t\t\t\t\t\t\t\t\tupdate.type === 'rate-book' ||\n\t\t\t\t\t\t\t\t\tupdate.type === 'recommend-book'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((update) =>\n\t\t\t\t\t\t\t\tupdate.bookInfo.userRating === undefined\n\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t: update.bookInfo.userRating\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t);\n\t\t\tsetUpdatesBeingDeleted(\n\t\t\t\tArray(userInfoObject.recentUpdates.length).fill(false)\n\t\t\t);\n\t\t};\n\t\tgetUserInfo();\n\t}, [user.userUID, userId]);\n\n\tconst location = loaded\n\t\t? userInfo.city !== undefined &&\n\t\t  userInfo.city !== '' &&\n\t\t  userInfo.stateProvinceCode !== undefined &&\n\t\t  userInfo.stateProvinceCode !== '' &&\n\t\t  userInfo.country !== undefined &&\n\t\t  userInfo.country !== ''\n\t\t\t? `${userInfo.city}, ${userInfo.stateProvinceCode}, ${userInfo.country}`\n\t\t\t: userInfo.city !== undefined &&\n\t\t\t  userInfo.city !== '' &&\n\t\t\t  userInfo.stateProvinceCode !== undefined &&\n\t\t\t  userInfo.stateProvinceCode !== ''\n\t\t\t? `${userInfo.city}, ${userInfo.stateProvinceCode}`\n\t\t\t: userInfo.city !== undefined &&\n\t\t\t  userInfo.city !== '' &&\n\t\t\t  userInfo.country !== undefined &&\n\t\t\t  userInfo.country !== ''\n\t\t\t? `${userInfo.city}, ${userInfo.country}`\n\t\t\t: userInfo.stateProvinceCode !== undefined &&\n\t\t\t  userInfo.stateProvinceCode !== '' &&\n\t\t\t  userInfo.country !== undefined &&\n\t\t\t  userInfo.country !== ''\n\t\t\t? `${userInfo.stateProvinceCode}, ${userInfo.country}`\n\t\t\t: userInfo.city !== undefined && userInfo.city !== ''\n\t\t\t? userInfo.city\n\t\t\t: userInfo.stateProvinceCode !== undefined &&\n\t\t\t  userInfo.stateProvinceCode !== ''\n\t\t\t? userInfo.stateProvinceCode\n\t\t\t: userInfo.country !== undefined && userInfo.country !== ''\n\t\t\t? userInfo.country\n\t\t\t: ''\n\t\t: '';\n\tconst isLoggedInUser = userId === user.userUID;\n\tconst showProfile =\n\t\tloaded &&\n\t\t(isLoggedInUser ||\n\t\t\tuserInfo.whoCanViewUserProfile === 'anyone' ||\n\t\t\t(userInfo.whoCanViewUserProfile === 'goodreads-members' &&\n\t\t\t\tuser.userUID !== null &&\n\t\t\t\tuser.userUID !== undefined) ||\n\t\t\t(userInfo.whoCanViewUserProfile === 'just-my-friends' &&\n\t\t\t\tuserInfo.isUserFriend));\n\tconst showLastName =\n\t\tloaded &&\n\t\tuserInfo.lastName !== '' &&\n\t\tuserInfo.lastName !== undefined &&\n\t\t(userInfo.showLastNameTo === 'anyone' ||\n\t\t\t(userInfo.showLastNameTo === 'friends' && userInfo.isUserFriend));\n\tconst showGender =\n\t\tloaded &&\n\t\tuserInfo.gender !== '' &&\n\t\t(userInfo.showGenderTo === 'everyone' ||\n\t\t\t(userInfo.showGenderTo === 'friendOnly' && userInfo.isUserFriend));\n\tconst showLocation =\n\t\tloaded &&\n\t\tlocation !== '' &&\n\t\t(userInfo.locationViewableBy === 'everyone' ||\n\t\t\t(userInfo.locationViewableBy === 'friendOnly' && userInfo.isUserFriend));\n\tconst showAge =\n\t\tloaded &&\n\t\tuserInfo.birthday !== undefined &&\n\t\t(([\n\t\t\t'age-members-birthday-members',\n\t\t\t'age-members-birthday-no-one',\n\t\t\t'age-members-birthday-friends',\n\t\t].includes(userInfo.ageAndBirthdayPrivacy) &&\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined) ||\n\t\t\t(['age-friends-birthday-friends', 'age-friends-birthday-no-one'].includes(\n\t\t\t\tuserInfo.ageAndBirthdayPrivacy\n\t\t\t) &&\n\t\t\t\tuserInfo.isUserFriend));\n\tconst showBirthday =\n\t\tloaded &&\n\t\tuserInfo.birthday !== undefined &&\n\t\t((['age-members-birthday-members', 'age-no-one-birthday-members'].includes(\n\t\t\tuserInfo.ageAndBirthdayPrivacy\n\t\t) &&\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined) ||\n\t\t\t([\n\t\t\t\t'age-members-birthday-friends',\n\t\t\t\t'age-friends-birthday-friends',\n\t\t\t\t'age-no-one-birthday-friends',\n\t\t\t].includes(userInfo.ageAndBirthdayPrivacy) &&\n\t\t\t\tuserInfo.isUserFriend));\n\n\tconst userAge =\n\t\tloaded && userInfo.birthday !== undefined\n\t\t\t? differenceInYears(new Date(), userInfo.birthday)\n\t\t\t: 0;\n\n\tconst capitalizeAndSeparate = (string) => {\n\t\treturn string\n\t\t\t.split('-')\n\t\t\t.map((s) =>\n\t\t\t\ts.length === 1 ? s.toUpperCase() : s[0].toUpperCase() + s.slice(1)\n\t\t\t)\n\t\t\t.join(' ');\n\t};\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = (bookObject, index) => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, bookObject.id);\n\t\t\tsetUserInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tcurrentlyReadingBooks:\n\t\t\t\t\t\tindex >= previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t? previous.currentlyReadingBooks\n\t\t\t\t\t\t\t: previous.currentlyReadingBooks.map((book, i) => {\n\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn book;\n\t\t\t\t\t\t\t  }),\n\t\t\t\t\trecentUpdates:\n\t\t\t\t\t\tindex < previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t? previous.recentUpdates\n\t\t\t\t\t\t\t: previous.recentUpdates.map((update, i) => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!update.type.includes('add-book') &&\n\t\t\t\t\t\t\t\t\t\tupdate.type !== 'rate-book' &&\n\t\t\t\t\t\t\t\t\t\tupdate.type !== 'recommend-book'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tprevious.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(recentUpdate) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'rate-book' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type.includes('add-book') ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'recommend-book'\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.indexOf(update) +\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.currentlyReadingBooks.length ===\n\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...update,\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...update.bookInfo,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t  }),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (bookObject, index, shelf) => {\n\t\tif (bookObject.id !== undefined) {\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t);\n\t\t\tawait Firebase.addBookToShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.id,\n\t\t\t\tshelf,\n\t\t\t\thistory\n\t\t\t);\n\t\t\tsetUserInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tcurrentlyReadingBooks:\n\t\t\t\t\t\tindex >= previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t? previous.currentlyReadingBooks\n\t\t\t\t\t\t\t: previous.currentlyReadingBooks.map((book, i) => {\n\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn book;\n\t\t\t\t\t\t\t  }),\n\t\t\t\t\trecentUpdates:\n\t\t\t\t\t\tindex < previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t? previous.recentUpdates\n\t\t\t\t\t\t\t: previous.recentUpdates.map((update, i) => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!update.type.includes('add-book') &&\n\t\t\t\t\t\t\t\t\t\tupdate.type !== 'rate-book' &&\n\t\t\t\t\t\t\t\t\t\tupdate.type !== 'recommend-book'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tprevious.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(recentUpdate) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'rate-book' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type.includes('add-book') ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'recommend-book'\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.indexOf(update) +\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.currentlyReadingBooks.length ===\n\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...update,\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...update.bookInfo,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t  }),\n\t\t\t\t};\n\t\t\t});\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t);\n\t\t}\n\t};\n\n\tconst rateBook = async (bookObject, index, rating) => {\n\t\tif (bookObject.id !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, bookObject.id, rating, history);\n\t\t\tsetUserInfo((previous, i) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tcurrentlyReadingBooks:\n\t\t\t\t\t\tindex >= previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t? previous.currentlyReadingBooks\n\t\t\t\t\t\t\t: previous.currentlyReadingBooks.map((book, i) => {\n\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\t\t\t\tbook.userStatus === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'read'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: book.userStatus,\n\t\t\t\t\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn book;\n\t\t\t\t\t\t\t  }),\n\t\t\t\t\trecentUpdates:\n\t\t\t\t\t\tindex < previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t? previous.recentUpdates\n\t\t\t\t\t\t\t: previous.recentUpdates.map((update, i) => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!update.type.includes('add-book') &&\n\t\t\t\t\t\t\t\t\t\tupdate.type !== 'rate-book' &&\n\t\t\t\t\t\t\t\t\t\tupdate.type !== 'recommend-book'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tprevious.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(recentUpdate) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'rate-book' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type.includes('add-book') ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'recommend-book'\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.indexOf(update) +\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.currentlyReadingBooks.length ===\n\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...update,\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...update.bookInfo,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.userStatus === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'read'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: update.bookInfo.userStatus,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t  }),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateProgress = async (bookObject, index, pages) => {\n\t\tif (\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined &&\n\t\t\tbookObject.id !== undefined &&\n\t\t\tpages.length > 0\n\t\t) {\n\t\t\tawait Firebase.updateBookInShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.id,\n\t\t\t\tparseInt(pages)\n\t\t\t);\n\t\t\tsetUserInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tcurrentlyReadingBooks:\n\t\t\t\t\t\tindex >= previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t? previous.currentlyReadingBooks\n\t\t\t\t\t\t\t: previous.currentlyReadingBooks.map((book, i) => {\n\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\t\t\t\tuserProgress: pages,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn book;\n\t\t\t\t\t\t\t  }),\n\t\t\t\t\trecentUpdates:\n\t\t\t\t\t\tindex < previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t? previous.recentUpdates\n\t\t\t\t\t\t\t: previous.recentUpdates.map((update, i) => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!update.type.includes('add-book') &&\n\t\t\t\t\t\t\t\t\t\tupdate.type !== 'rate-book' &&\n\t\t\t\t\t\t\t\t\t\tupdate.type !== 'recommend-book'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tprevious.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(recentUpdate) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'rate-book' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type.includes('add-book') ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'recommend-book'\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.indexOf(update) +\n\t\t\t\t\t\t\t\t\t\t\t\tprevious.currentlyReadingBooks.length ===\n\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...update,\n\t\t\t\t\t\t\t\t\t\t\t\tbookInfo: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...update.bookInfo,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserProgress: pages,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t  }),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst generateAddToShelfButton = (bookObject, index) => {\n\t\treturn loaded && bookObject.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up reading\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>Update your reading progress:</b>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tI'm on page{' '}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupReadingInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t\t\t? 'page-progress-input'\n\t\t\t\t\t\t\t\t\t\t\t: 'page-progress-input white-background'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupReadingInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\tof {bookObject.pageCount}.{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t? 'shelf-pop-up-bottom hidden'\n\t\t\t\t\t\t\t\t\t: 'shelf-pop-up-bottom'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tupdateProgress(\n\t\t\t\t\t\t\t\t\t\tbookObject,\n\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\tshelfPopupReadingInputs[index]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-finished-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tchangeBookShelf(bookObject, index, 'read');\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFinished book\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Currently Reading</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<div className=\"shelf-pop-up-wrapper\">\n\t\t\t\t\t<div className=\"shelf-pop-up read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\tbookObject.id\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Read</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up to-read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupToReadInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName=\"shelf-pop-up-to-read-input\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupToReadInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\ton your <b>To Read</b> shelf.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{areShelfPopupsBottomHidden[index] ? (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tFirebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.id,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(shelfPopupToReadInputs[index])\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentlyReadingBooks:\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex >= previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? previous.currentlyReadingBooks\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: previous.currentlyReadingBooks.map((book, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...book,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserToReadPosition: parseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelfPopupToReadInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn book;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }),\n\t\t\t\t\t\t\t\t\t\t\t\trecentUpdates:\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex < previous.currentlyReadingBooks.length\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? previous.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: previous.recentUpdates.map((update, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!update.type.includes('add-book') &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdate.type !== 'rate-book' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdate.type !== 'recommend-book'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevious.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(recentUpdate) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'rate-book' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecentUpdate.type === 'recommend-book'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.indexOf(update) +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevious.currentlyReadingBooks.length ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...update,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookInfo: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...update.bookInfo,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserToReadPosition: parseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelfPopupToReadInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }),\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Want to Read</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t>\n\t\t\t\t{savingShelves[index] ? '...saving' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst generateBookOptionsDropdown = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t\t<div className=\"book-options-dropdown\">\n\t\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRead\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-currently-reading-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'reading')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-want-to-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWant to Read\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf\"\n\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\taddShelfInputs[index] !== undefined\n\t\t\t\t\t\t\t\t\t\t? addShelfInputs[index]\n\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\tsetAddShelfInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? newValue : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (addShelfInputs[index].length > 0) {\n\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.rootBook,\n\t\t\t\t\t\t\t\t\t\t\taddShelfInputs[index],\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst generateRateBookSection = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-rate-book\">\n\t\t\t\t{bookObject.userRating === undefined ? null : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"clear-rating-button\"\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, undefined)}\n\t\t\t\t\t>\n\t\t\t\t\t\tClear rating\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{bookObject.userRating === undefined ? (\n\t\t\t\t\t<span className=\"rate-this-book\">Rate this book</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"rate-this-book my-rating\">My rating:</span>\n\t\t\t\t)}\n\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 0\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 1 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 1)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 1\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 2 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 2)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 2\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 3 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 3)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 3\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 4 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 4)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 4\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 5 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 5)}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst topMessageSection =\n\t\tloaded && topMessage.length > 0 ? (\n\t\t\t<div className=\"top-message-div yellow\">\n\t\t\t\t<span>{topMessage}</span>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"close-button\"\n\t\t\t\t\tonClick={(_e) => setTopMessage('')}\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst introduction = loaded ? (\n\t\t<div className=\"user-page-introduction\">\n\t\t\t<div className=\"left-section\">\n\t\t\t\t{userInfo.profilePicture !== undefined ? (\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"user-photo-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPhotoPage(userId)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img src={userInfo.profilePicture} alt={firstName} />\n\t\t\t\t\t</a>\n\t\t\t\t) : (\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t'https://s.gr-assets.com/assets/nophoto/user/u_225x300-c928cbb998d4ac6dd1f0f66f31f74b81.png'\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={firstName}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<span className=\"ratings-stats\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserRatingsPage(userId)}\n\t\t\t\t\t>{`${userInfo.numberOfRatings} ratings`}</a>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"show-stats-window-button\"\n\t\t\t\t\t\tonClick={(_e) => setUserRatingsChartVisible(true)}\n\t\t\t\t\t>{`(${userInfo.averageRating.toFixed(2)} avg)`}</button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tuserRatingsChartVisible\n\t\t\t\t\t\t\t\t? 'user-ratings-chart visible'\n\t\t\t\t\t\t\t\t: 'user-ratings-chart'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RatingsChart\n\t\t\t\t\t\t\tfiveRatings={userInfo.fiveRatings}\n\t\t\t\t\t\t\tfourRatings={userInfo.fourRatings}\n\t\t\t\t\t\t\tthreeRatings={userInfo.threeRatings}\n\t\t\t\t\t\t\ttwoRatings={userInfo.twoRatings}\n\t\t\t\t\t\t\toneRatings={userInfo.oneRatings}\n\t\t\t\t\t\t\tcloseChart={() => setUserRatingsChartVisible(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"number-of-reviews-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserReviewsPage(userId)}\n\t\t\t\t>{`${userInfo.numberOfReviews} reviews`}</a>\n\t\t\t</div>\n\t\t\t<div className=\"right-section\">\n\t\t\t\t<h1>\n\t\t\t\t\t{showLastName ? firstName + ' ' + userInfo.lastName : firstName}\n\t\t\t\t\t{isLoggedInUser ? (\n\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateAccountSettingsPage()}>\n\t\t\t\t\t\t\t(edit profile)\n\t\t\t\t\t\t</a>\n\t\t\t\t\t) : null}\n\t\t\t\t</h1>\n\t\t\t\t{!savingFollow && !isLoggedInUser ? (\n\t\t\t\t\t<div className=\"follow-friends-buttons\">\n\t\t\t\t\t\t{!userInfo.isUserFriend ? (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tuserInfo.isFollowedByUser\n\t\t\t\t\t\t\t\t\t\t? 'follow-button following'\n\t\t\t\t\t\t\t\t\t\t: 'follow-button'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonMouseOver={(_e) => {\n\t\t\t\t\t\t\t\t\tif (userInfo.isFollowedByUser) {\n\t\t\t\t\t\t\t\t\t\tconst outerSpan = document.querySelector(\n\t\t\t\t\t\t\t\t\t\t\t'span.followed-by-user-span'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\touterSpan.innerHTML = 'Unfollow';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseOut={(_e) => {\n\t\t\t\t\t\t\t\t\tif (userInfo.isFollowedByUser) {\n\t\t\t\t\t\t\t\t\t\tconst checkmark = document.createElement('div');\n\t\t\t\t\t\t\t\t\t\tcheckmark.classList.add('following-checkmark');\n\t\t\t\t\t\t\t\t\t\tconst span = document.createElement('span');\n\t\t\t\t\t\t\t\t\t\tspan.innerHTML = 'Following';\n\t\t\t\t\t\t\t\t\t\tconst outerSpan = document.querySelector(\n\t\t\t\t\t\t\t\t\t\t\t'span.followed-by-user-span'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\touterSpan.innerHTML = '';\n\t\t\t\t\t\t\t\t\t\touterSpan.appendChild(checkmark);\n\t\t\t\t\t\t\t\t\t\touterSpan.appendChild(span);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (userInfo.isFollowedByUser) {\n\t\t\t\t\t\t\t\t\t\tsetUnfollowModalVisible(true);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetSavingFollow(true);\n\t\t\t\t\t\t\t\t\t\tawait Firebase.followUser(user.userUID, userId, history);\n\t\t\t\t\t\t\t\t\t\tsetSavingFollow(false);\n\t\t\t\t\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\tisFollowedByUser: true,\n\t\t\t\t\t\t\t\t\t\t\t\tnumberOfFollowers: previous.numberOfFollowers + 1,\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{userInfo.isFollowedByUser ? (\n\t\t\t\t\t\t\t\t\t<span className=\"followed-by-user-span\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"following-checkmark\"></div>\n\t\t\t\t\t\t\t\t\t\t<span>Following</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<span>Follow</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tuserInfo.hasPendingFriendRequestFromUser\n\t\t\t\t\t\t\t\t\t? 'add-as-friend-a pending'\n\t\t\t\t\t\t\t\t\t: 'add-as-friend-a'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={userInfo.hasPendingFriendRequestFromUser}\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAddAsFriendPage(userId)}\n\t\t\t\t\t\t\tonMouseOver={(_e) => {\n\t\t\t\t\t\t\t\tif (userInfo.isUserFriend) {\n\t\t\t\t\t\t\t\t\tconst outerSpan = document.querySelector(\n\t\t\t\t\t\t\t\t\t\t'span.friends-with-user-span'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\touterSpan.innerHTML = 'Unfriend';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonMouseOut={(_e) => {\n\t\t\t\t\t\t\t\tif (userInfo.isUserFriend) {\n\t\t\t\t\t\t\t\t\tconst checkmark = document.createElement('div');\n\t\t\t\t\t\t\t\t\tcheckmark.classList.add('following-checkmark');\n\t\t\t\t\t\t\t\t\tconst span = document.createElement('span');\n\t\t\t\t\t\t\t\t\tspan.innerHTML = 'Friends';\n\t\t\t\t\t\t\t\t\tconst outerSpan = document.querySelector(\n\t\t\t\t\t\t\t\t\t\t'span.friends-with-user-span'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\touterSpan.innerHTML = '';\n\t\t\t\t\t\t\t\t\touterSpan.appendChild(checkmark);\n\t\t\t\t\t\t\t\t\touterSpan.appendChild(span);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tif (userInfo.isUserFriend) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tsetUnfollowModalVisible(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{userInfo.isUserFriend ? (\n\t\t\t\t\t\t\t\t<span className=\"friends-with-user-span\">\n\t\t\t\t\t\t\t\t\t<div className=\"following-checkmark\"></div>\n\t\t\t\t\t\t\t\t\t<span>Friends</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : userInfo.hasPendingFriendRequestFromUser ? (\n\t\t\t\t\t\t\t\t<span className=\"pending-span\">Pending</span>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span>Add friend</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tref={moreDropdownTrigger}\n\t\t\t\t\t\t\tclassName=\"more-dropdown-trigger\"\n\t\t\t\t\t\t\tonClick={(_e) => setShowingMoreDropdown((previous) => !previous)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>More</span>\n\t\t\t\t\t\t\t<div className=\"downwards-arrow\"></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref={moreDropdown}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tshowingMoreDropdown ? 'more-dropdown' : 'more-dropdown hidden'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"compare-books-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuserId\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tCompare books\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t) : savingFollow ? (\n\t\t\t\t\t<div id=\"loadingSpinner\">\n\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t<div></div>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t\t<table className=\"user-misc\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Details</th>\n\t\t\t\t\t\t\t{showGender || showLocation || showAge ? (\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{showAge && showGender && showLocation\n\t\t\t\t\t\t\t\t\t\t? `Age ${userAge}, ${\n\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.gender[0].toUpperCase() +\n\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.gender.slice(1)\n\t\t\t\t\t\t\t\t\t\t  }, ${location}`\n\t\t\t\t\t\t\t\t\t\t: showAge && showGender\n\t\t\t\t\t\t\t\t\t\t? `Age ${userAge}, ${\n\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.gender[0].toUpperCase() +\n\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.gender.slice(1)\n\t\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t\t: showAge && showLocation\n\t\t\t\t\t\t\t\t\t\t? `Age ${userAge}, ${location}`\n\t\t\t\t\t\t\t\t\t\t: showAge\n\t\t\t\t\t\t\t\t\t\t? `Age ${userAge}`\n\t\t\t\t\t\t\t\t\t\t: showGender && showLocation\n\t\t\t\t\t\t\t\t\t\t? `${\n\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.gender[0].toUpperCase() +\n\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.gender.slice(1)\n\t\t\t\t\t\t\t\t\t\t  }, ${location}`\n\t\t\t\t\t\t\t\t\t\t: showGender\n\t\t\t\t\t\t\t\t\t\t? userInfo.gender[0].toUpperCase() +\n\t\t\t\t\t\t\t\t\t\t  userInfo.gender.slice(1)\n\t\t\t\t\t\t\t\t\t\t: location}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<td>{`${firstName} hasn't added any details yet`}</td>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{showBirthday ? (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Birthday</th>\n\t\t\t\t\t\t\t\t<td>{format(userInfo.birthday, 'MMMM dd, yyyy')}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{userInfo.website !== undefined && userInfo.website.length > 0 ? (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Website</th>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<a href={userInfo.website}>{userInfo.website}</a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Activity</th>\n\t\t\t\t\t\t\t<td>{`Joined in ${format(\n\t\t\t\t\t\t\t\tuserInfo.joinedDate,\n\t\t\t\t\t\t\t\t'MMMM yyyy'\n\t\t\t\t\t\t\t)}, last active ${\n\t\t\t\t\t\t\t\tuserInfo.lastActiveDate.getFullYear() ===\n\t\t\t\t\t\t\t\t\tnew Date().getFullYear() &&\n\t\t\t\t\t\t\t\tuserInfo.lastActiveDate.getMonth() === new Date().getMonth()\n\t\t\t\t\t\t\t\t\t? 'this month'\n\t\t\t\t\t\t\t\t\t: (userInfo.lastActiveDate.getFullYear() ===\n\t\t\t\t\t\t\t\t\t\t\tnew Date().getFullYear() &&\n\t\t\t\t\t\t\t\t\t\t\tuserInfo.lastActiveDate.getMonth() ===\n\t\t\t\t\t\t\t\t\t\t\t\tnew Date().getMonth() - 1) ||\n\t\t\t\t\t\t\t\t\t  (userInfo.lastActiveDate.getFullYear() ===\n\t\t\t\t\t\t\t\t\t\t\tnew Date().getFullYear() - 1 &&\n\t\t\t\t\t\t\t\t\t\t\tuserInfo.lastActiveDate.getMonth() === 11 &&\n\t\t\t\t\t\t\t\t\t\t\tnew Date().getMonth() === 0)\n\t\t\t\t\t\t\t\t\t? 'last month'\n\t\t\t\t\t\t\t\t\t: userInfo.lastActiveDate.getFullYear() ===\n\t\t\t\t\t\t\t\t\t  new Date().getFullYear()\n\t\t\t\t\t\t\t\t\t? 'this year'\n\t\t\t\t\t\t\t\t\t: `in ${format(userInfo.lastActiveDate, 'MMMM yyyy')}`\n\t\t\t\t\t\t\t}`}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{userInfo.interests !== undefined &&\n\t\t\t\t\t\tuserInfo.interests.length > 0 ? (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Interests</th>\n\t\t\t\t\t\t\t\t<td>{userInfo.interests}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{userInfo.favoriteBooks !== undefined &&\n\t\t\t\t\t\tuserInfo.favoriteBooks.length > 0 ? (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Favorite Books</th>\n\t\t\t\t\t\t\t\t<td>{userInfo.favoriteBooks}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{userInfo.about !== undefined && userInfo.about.length > 0 ? (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>About</th>\n\t\t\t\t\t\t\t\t<td>{userInfo.about}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst userToReadShelfSection = loaded ? (\n\t\t<div className=\"user-page-to-read-shelf-section\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(userId, firstName, [\n\t\t\t\t\t'to-read',\n\t\t\t\t])}\n\t\t\t\tclassName=\"section-title\"\n\t\t\t>{`${firstName.toUpperCase()}'S TO-READ SHELF`}</a>\n\t\t\t<div className=\"book-list\">\n\t\t\t\t{userInfo.toReadBooks\n\t\t\t\t\t.filter((_b, index) => index < 11)\n\t\t\t\t\t.map((book, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"book-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\tclassName=\"more-books-a\"\n\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(userId, firstName, [\n\t\t\t\t\t'to-read',\n\t\t\t\t])}\n\t\t\t>\n\t\t\t\tMore...\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst userBookshelvesSection = loaded ? (\n\t\t<div className=\"user-page-bookshelves-section\">\n\t\t\t<a\n\t\t\t\tclassName=\"section-title\"\n\t\t\t\thref={Firebase.pageGenerator.generateUserBooksPage()}\n\t\t\t>{`${firstName.toUpperCase()}'S BOOKSHELVES`}</a>\n\t\t\t<div className=\"bookshelves-list\">\n\t\t\t\t{userInfo.bookshelves.map((shelf, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\t\t\t[shelf.name]\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>{`${shelf.name} (${shelf.numberOfBooks})`}</a>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\tclassName=\"more-a\"\n\t\t\t\thref={Firebase.pageGenerator.generateUserBooksPage()}\n\t\t\t>\n\t\t\t\tMore...\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst userCurrentlyReadingSection =\n\t\tloaded && userInfo.currentlyReadingBooks.length > 0 ? (\n\t\t\t<div className=\"user-page-currently-reading-section\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"section-title\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\t['reading']\n\t\t\t\t\t)}\n\t\t\t\t>{`${firstName.toUpperCase()} IS CURRENTLY READING`}</a>\n\t\t\t\t<div className=\"currently-reading-list\">\n\t\t\t\t\t{userInfo.currentlyReadingBooks.map((book, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"book-update\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-cover-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"book-update-info\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"currently-reading-span\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfirstName\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>{`${\n\t\t\t\t\t\t\t\t\t\t\t\tshowLastName\n\t\t\t\t\t\t\t\t\t\t\t\t\t? firstName + ' ' + userInfo.lastName\n\t\t\t\t\t\t\t\t\t\t\t\t\t: firstName\n\t\t\t\t\t\t\t\t\t\t\t}`}</a>\n\t\t\t\t\t\t\t\t\t\t\t<span> is currently reading</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{book.title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span className=\"book-authorship-span\">\n\t\t\t\t\t\t\t\t\t\t\t<span>by </span>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.mainAuthorId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.mainAuthorName\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{book.mainAuthorName}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t{book.mainAuthorIsMember ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"goodreads-member-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t(Goodreads Author)\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"bookshelves-span\">\n\t\t\t\t\t\t\t\t\t\t\t<span>bookshelves: </span>\n\t\t\t\t\t\t\t\t\t\t\t{book.bookshelves.map((shelf, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span key={i}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[shelf]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{shelf}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{i !== book.bookshelves.length - 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>, </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"update-date-span\">\n\t\t\t\t\t\t\t\t\t\t\t{format(book.updateDate, 'MMM dd, yyyy HH:mma')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t<div className=\"add-to-shelf-button-and-dropdown\">\n\t\t\t\t\t\t\t\t\t\t{generateAddToShelfButton(book, index)}\n\t\t\t\t\t\t\t\t\t\t{generateBookOptionsDropdown(book, index)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{generateRateBookSection(book, index)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst userRecentUpdatesSection = loaded ? (\n\t\t<div className=\"user-recent-updates-section\">\n\t\t\t<span className=\"section-title\">{`${firstName.toUpperCase()}'S RECENT UPDATES`}</span>\n\t\t\t{userInfo.recentUpdates.map((update, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tindex === userInfo.recentUpdates.length - 1\n\t\t\t\t\t\t\t\t? 'update-card'\n\t\t\t\t\t\t\t\t: 'update-card bordered'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"update-description\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\tfirstName\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{showLastName ? firstName + ' ' + userInfo.lastName : firstName}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span> </span>\n\t\t\t\t\t\t\t{update.type === 'rate-book' ? (\n\t\t\t\t\t\t\t\t<span className=\"rated-book-span\">\n\t\t\t\t\t\t\t\t\trated a book{' '}\n\t\t\t\t\t\t\t\t\t<div className=\"rating-stars\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.rating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.rating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.rating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.rating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.rating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: update.rating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : update.type === 'add-book-to-read' ? (\n\t\t\t\t\t\t\t\t<span>wants to read</span>\n\t\t\t\t\t\t\t) : update.type === 'add-book-read' ? (\n\t\t\t\t\t\t\t\t<span>finished reading</span>\n\t\t\t\t\t\t\t) : update.type === 'add-book-reading' ? (\n\t\t\t\t\t\t\t\t<span>started reading</span>\n\t\t\t\t\t\t\t) : update.type === 'add-friend' ? (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<span>is now friends with </span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\tupdate.userInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tupdate.userInfo.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{update.userInfo.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : update.type === 'vote-for-book-review' ? (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<span>{`and ${\n\t\t\t\t\t\t\t\t\t\tupdate.numberOfReviewVoters - 1\n\t\t\t\t\t\t\t\t\t} other people liked `}</span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\tupdate.userInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tupdate.userInfo.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>{`${update.userInfo.name}'s`}</a>\n\t\t\t\t\t\t\t\t\t<span> review of </span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{update.bookInfo.title}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : update.type === 'add-quote' ? (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<span>liked a </span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\tupdate.quoteId,\n\t\t\t\t\t\t\t\t\t\t\tupdate.quoteContent\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tquote\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : update.type === 'recommend-book' ? (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<span> recommended</span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t{update.bookInfo.title}{' '}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<span>to </span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\tupdate.userInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tupdate.userInfo.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{update.userInfo.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span> is now following</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{update.type === 'add-book-to-read' ||\n\t\t\t\t\t\tupdate.type === 'add-book-reading' ||\n\t\t\t\t\t\tupdate.type === 'add-book-read' ||\n\t\t\t\t\t\tupdate.type === 'rate-book' ||\n\t\t\t\t\t\tupdate.type === 'recommend-book' ? (\n\t\t\t\t\t\t\t<div className=\"update-book-section\">\n\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-cover-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\talt={update.bookInfo.title}\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? update.bookInfo.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"book-update-info\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.id,\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{update.bookInfo.title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span className=\"book-authorship-span\">\n\t\t\t\t\t\t\t\t\t\t\t<span>by </span>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.name\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{update.authorInfo.name}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t{update.authorInfo.isMember ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"goodreads-member-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t(Goodreads Author)\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t<div className=\"add-to-shelf-button-and-dropdown\">\n\t\t\t\t\t\t\t\t\t\t{generateAddToShelfButton(\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo,\n\t\t\t\t\t\t\t\t\t\t\tuserInfo.currentlyReadingBooks.length +\n\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((update) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-to-read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-reading',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'recommend-book',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'rate-book',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(update.type)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.indexOf(update)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{generateBookOptionsDropdown(\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo,\n\t\t\t\t\t\t\t\t\t\t\tuserInfo.currentlyReadingBooks.length +\n\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((update) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-to-read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-reading',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'recommend-book',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'rate-book',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(update.type)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.indexOf(update)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{generateRateBookSection(\n\t\t\t\t\t\t\t\t\t\tupdate.bookInfo,\n\t\t\t\t\t\t\t\t\t\tuserInfo.currentlyReadingBooks.length +\n\t\t\t\t\t\t\t\t\t\t\tuserInfo.recentUpdates\n\t\t\t\t\t\t\t\t\t\t\t\t.filter((update) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-to-read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'add-book-reading',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'recommend-book',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'rate-book',\n\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(update.type)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.indexOf(update)\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{update.type === 'add-friend' ? (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"friend-profile-picture-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\tupdate.userInfo.id,\n\t\t\t\t\t\t\t\t\tupdate.userInfo.name\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tupdate.userInfo.picture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? update.userInfo.picture\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={update.userInfo.name}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{update.type === 'vote-for-book-review' ? (\n\t\t\t\t\t\t\t<div className=\"book-review-preview\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.id,\n\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? update.bookInfo.cover\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={update.bookInfo.title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<span className=\"review-text-span\">{`\"${update.reviewText.slice(\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t250\n\t\t\t\t\t\t\t\t)}\"`}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{update.type === 'add-quote' ? (\n\t\t\t\t\t\t\t<div className=\"quote-area\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.id,\n\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\tupdate.bookInfo.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? update.bookInfo.cover\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={update.bookInfo.title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"quote-content-and-authorship\">\n\t\t\t\t\t\t\t\t\t<span>{`${update.quoteContent}`}</span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.id,\n\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{update.authorInfo.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{update.type === 'follow-author' ? (\n\t\t\t\t\t\t\t<div className=\"author-info-section\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"author-profile-picture-wrapper\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.id,\n\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.name\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.picture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? update.authorInfo.picture\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={update.authorInfo.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"author-actual-info-section\">\n\t\t\t\t\t\t\t\t\t<span className=\"author-name-span\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.id,\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.name\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{update.authorInfo.name}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t{update.authorInfo.isMember ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"goodreads-badge\"></div>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"author-best-book-span\">\n\t\t\t\t\t\t\t\t\t\t<span>Author of </span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.bestBookId,\n\t\t\t\t\t\t\t\t\t\t\t\tupdate.authorInfo.bestBookTitle\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{update.authorInfo.bestBookSeries === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? update.authorInfo.bestBookTitle\n\t\t\t\t\t\t\t\t\t\t\t\t: `${update.authorInfo.bestBookTitle} (${update.authorInfo.bestBookSeries}, #${update.authorInfo.bestBookSeriesInstance})`}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"follow-author-button\"\n\t\t\t\t\t\t\t\t\t\t\tonMouseOver={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (update.authorInfo.userIsFollowing) {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.innerHTML = 'Unfollow';\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonMouseOut={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (update.authorInfo.userIsFollowing) {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.innerHTML = 'Following';\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{update.authorInfo.userIsFollowing\n\t\t\t\t\t\t\t\t\t\t\t\t? 'Following'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'Follow Author'}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{updatesBeingDeleted[index] ? (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif\"\n\t\t\t\t\t\t\t\talt=\"Loading\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<span className=\"update-date-span\">\n\t\t\t\t\t\t\t{format(update.date, 'MMM dd, yyyy HH:mma')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"delete-update-button\"\n\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\twindow.confirm(\n\t\t\t\t\t\t\t\t\t\t\"This will hide this item from your updates feed so that it no longer appears on your profile or your friends' home pages. The item itself will not be deleted. Are you sure?\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tsetUpdatesBeingDeleted((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => {\n\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tawait Firebase.deleteUpdate(update.id);\n\t\t\t\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\trecentUpdates: previous.recentUpdates.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t(u, i) => i !== index\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tsetUpdatesBeingDeleted((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => {\n\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t) : null;\n\n\tconst userQuotesSection =\n\t\tloaded && userInfo.quotes.length > 0 ? (\n\t\t\t<div className=\"user-page-quotes-section\">\n\t\t\t\t<span className=\"section-title\">{`${firstName.toUpperCase()}'S QUOTES`}</span>\n\t\t\t\t{userInfo.quotes\n\t\t\t\t\t.filter((_q, index) => index < 5)\n\t\t\t\t\t.map((quote, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"user-page-quote-card\" key={index}>\n\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\tquote.authorId,\n\t\t\t\t\t\t\t\t\t\t\tquote.authorName\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tquote.authorProfilePicture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? quote.authorProfilePicture\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\talt={quote.authorName}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"actual-quote-section\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"quote\">{`${quote.content}`}</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"quote-authorship\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"dash\"> </span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{`${quote.authorName}, `}</span>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAddBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tquote.bookId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tquote.bookTitle\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{quote.bookTitle}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t{user.userUID === null || !quote.likedByUser ? (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.likeQuote(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tquotes: previous.quotes.map((q, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...quote,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlikedByUser: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn quote;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserLikedQuotes((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tprevious.concat(index)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tLike\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t) : userLikedQuotes.includes(index) ? (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"quote-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tView quote\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"quote-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tIn my quotes\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"number-of-likes-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateQuotePage(\n\t\t\t\t\t\t\t\t\t\t\tquote.id,\n\t\t\t\t\t\t\t\t\t\t\tquote.content\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>{`${quote.numberOfLikes} likes`}</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContentLeftSection = (\n\t\t<div className=\"user-page-main-content-left-section\">\n\t\t\t{topMessageSection}\n\t\t\t{introduction}\n\t\t\t{userToReadShelfSection}\n\t\t\t{userBookshelvesSection}\n\t\t\t{userCurrentlyReadingSection}\n\t\t\t{userRecentUpdatesSection}\n\t\t\t{userQuotesSection}\n\t\t</div>\n\t);\n\n\tconst userYearInBooksSection = (\n\t\t<div className=\"user-page-year-in-books-section\">\n\t\t\t<a\n\t\t\t\tclassName=\"section-title\"\n\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\tnew Date().getFullYear(),\n\t\t\t\t\tuserId,\n\t\t\t\t\tfirstName\n\t\t\t\t)}\n\t\t\t>{`${firstName.toUpperCase()}'S YEAR IN BOOKS`}</a>\n\t\t\t<div className=\"inner-content\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"image-wrapper\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\t\tnew Date().getFullYear(),\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tfirstName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t'https://s.gr-assets.com/assets/yyib/yearly/yyib_badge-58c13ce9eeb35da7dda8dcf63aba2962.jpg'\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt=\"Year in books\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t<div className=\"year-in-books-right-section\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<b>{`${\n\t\t\t\t\t\t\tisLoggedInUser ? 'Your' : `${firstName}'s`\n\t\t\t\t\t\t} ${new Date().getFullYear()} Year in Books`}</b>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>{`Take a look at ${\n\t\t\t\t\t\tisLoggedInUser ? 'Your' : `${firstName}'s`\n\t\t\t\t\t} Year in Books. The long, the shortits all here.`}</span>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\t\t\tnew Date().getFullYear(),\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\tfirstName\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`See ${\n\t\t\t\t\t\tisLoggedInUser ? 'Your' : `${firstName}'s`\n\t\t\t\t\t} ${new Date().getFullYear()} Year in Books`}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst userFriendsSection =\n\t\tloaded && userInfo.friends.length > 0 ? (\n\t\t\t<div className=\"user-page-friends-section\">\n\t\t\t\t<span className=\"section-title\">{`${firstName.toUpperCase()}'S FRIENDS (${\n\t\t\t\t\tuserInfo.friends.length\n\t\t\t\t})`}</span>\n\t\t\t\t<div className=\"friend-list\">\n\t\t\t\t\t{userInfo.friends\n\t\t\t\t\t\t.filter((_f, index) => index < 8)\n\t\t\t\t\t\t.map((friend, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"friend-card\" key={index}>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"profile-picture-wrapper\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\t\tfriend.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tfriend.picture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? friend.picture\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\talt={friend.name}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\t\t\tfriend.name\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{friend.name}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<div className=\"friend-stats\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{`${friend.numberOfBooks} books`}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"separator\">|</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{`${friend.numberOfFriends} friends`}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst userFollowingSection =\n\t\tloaded && userInfo.following.length > 0 ? (\n\t\t\t<div className=\"user-page-following-section\">\n\t\t\t\t<span className=\"section-title\">{`PEOPLE ${firstName.toUpperCase()} IS FOLLOWING`}</span>\n\t\t\t\t<div className=\"following-list\">\n\t\t\t\t\t{userInfo.following.map((followingUser, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\tfollowingUser.id,\n\t\t\t\t\t\t\t\t\tfollowingUser.name\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tfollowingUser.picture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? followingUser.picture\n\t\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={followingUser.name}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<span className=\"number-of-followers-span\">{`${userInfo.numberOfFollowers} people are following ${firstName}`}</span>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst userFavoriteAuthorsSection =\n\t\tloaded && userInfo.favoriteAuthors.length > 0 ? (\n\t\t\t<div className=\"user-page-favorite-authors-section\">\n\t\t\t\t<span className=\"section-title\">\n\t\t\t\t\t{`${firstName.toUpperCase()}'S FAVORITE AUTHORS`}\n\t\t\t\t\t{isLoggedInUser ? (\n\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateFavoriteAuthorsPage()}>\n\t\t\t\t\t\t\tedit\n\t\t\t\t\t\t</a>\n\t\t\t\t\t) : null}\n\t\t\t\t</span>\n\t\t\t\t<div className=\"favorite-author-list\">\n\t\t\t\t\t{userInfo.favoriteAuthors\n\t\t\t\t\t\t.filter((_a, index) => index < 6)\n\t\t\t\t\t\t.map((author, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"favorite-author-card\" key={index}>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"favorite-author-picture-wrapper\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.picture !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? author.picture\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\talt={author.name}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"author-name-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.id,\n\t\t\t\t\t\t\t\t\t\t\t\tauthor.name\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{author.name}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<span>author of: </span>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"favorite-author-best-book-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tauthor.bestBookId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tauthor.bestBookTitle\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{author.bestBookTitle}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst userListopiaSection =\n\t\tloaded && userInfo.votedLists.length > 0 ? (\n\t\t\t<div className=\"user-page-listopia-section\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"section-title\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateListsVotedByUserPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tfirstName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tLISTOPIA VOTES\n\t\t\t\t</a>\n\t\t\t\t<div className=\"lists-list\">\n\t\t\t\t\t{userInfo.votedLists\n\t\t\t\t\t\t.filter((_l, index) => index < 2)\n\t\t\t\t\t\t.map((list, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"list-card\" key={index}>\n\t\t\t\t\t\t\t\t\t<div className=\"covers\">\n\t\t\t\t\t\t\t\t\t\t{list.bookCovers.map((cover, i) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"list-book-cover-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateListPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlist.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlist.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={cover} alt={list.title} />\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"list-title-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateListPage(\n\t\t\t\t\t\t\t\t\t\t\tlist.id,\n\t\t\t\t\t\t\t\t\t\t\tlist.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{list.title}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<span className=\"list-stats-span\">{`${list.numberOfBooks} books  ${list.numberOfVoters} voters`}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"more-lists-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateListsVotedByUserPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tfirstName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tMore...\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst userFavoriteGenresSection =\n\t\tloaded && userInfo.favoriteGenres.length > 0 ? (\n\t\t\t<div className=\"user-page-favorite-genres-section\">\n\t\t\t\t<span className=\"section-title\">\n\t\t\t\t\tFAVORITE GENRES\n\t\t\t\t\t{isLoggedInUser ? (\n\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateEditFavoriteGenresPage()}>\n\t\t\t\t\t\t\tedit\n\t\t\t\t\t\t</a>\n\t\t\t\t\t) : null}\n\t\t\t\t</span>\n\t\t\t\t<span className=\"favorite-genres-span\">\n\t\t\t\t\t{userInfo.favoriteGenres.map((genre, index) => {\n\t\t\t\t\t\tif (index === userInfo.favoriteGenres.length - 1) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(genre)}\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{capitalizeAndSeparate(genre)}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else if (index === userInfo.favoriteGenres.length - 2) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<span key={index}>\n\t\t\t\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateGenrePage(genre)}>\n\t\t\t\t\t\t\t\t\t\t{capitalizeAndSeparate(genre)}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<span>{', and '}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<span key={index}>\n\t\t\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateGenrePage(genre)}>\n\t\t\t\t\t\t\t\t\t{capitalizeAndSeparate(genre)}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<span>, </span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContentRightSectionBottomLinks = (\n\t\t<div className=\"user-page-main-content-right-section-bottom-links\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateListsLikedByUserPage(\n\t\t\t\t\tuserId,\n\t\t\t\t\tfirstName\n\t\t\t\t)}\n\t\t\t>{`Lists liked by ${firstName}`}</a>\n\t\t</div>\n\t);\n\n\tconst mainContentRightSection = (\n\t\t<div className=\"user-page-main-content-right-section\">\n\t\t\t{userYearInBooksSection}\n\t\t\t{userFriendsSection}\n\t\t\t{userFollowingSection}\n\t\t\t{userFavoriteAuthorsSection}\n\t\t\t{userListopiaSection}\n\t\t\t{userFavoriteGenresSection}\n\t\t\t{mainContentRightSectionBottomLinks}\n\t\t</div>\n\t);\n\n\tconst unfollowUserModal = loaded ? (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tunfollowModalVisible\n\t\t\t\t\t? 'user-page-unfollow-user-modal visible'\n\t\t\t\t\t: 'user-page-unfollow-user-modal'\n\t\t\t}\n\t\t>\n\t\t\t<button\n\t\t\t\tclassName=\"close-button\"\n\t\t\t\tonClick={(_e) => setUnfollowModalVisible(false)}\n\t\t\t></button>\n\t\t\t<h1>{`${userInfo.isUserFriend ? 'Unfollow' : 'Unfriend'} ${\n\t\t\t\tshowLastName ? firstName + ' ' + userInfo.lastName : firstName\n\t\t\t}?`}</h1>\n\t\t\t<span>\n\t\t\t\t{userInfo.isUserFriend\n\t\t\t\t\t? `This will remove ${firstName}'s activity from your updates feed, and your own activity will stop appearing in their updates feed. ${firstName} will not be notified.`\n\t\t\t\t\t: `This will remove ${firstName}'s activity from your updates feed.`}\n\t\t\t</span>\n\t\t\t<div className=\"buttons\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"confirm-button\"\n\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\tsetUnfollowModalVisible(false);\n\t\t\t\t\t\tsetSavingFollow(true);\n\t\t\t\t\t\tif (userInfo.isUserFriend) {\n\t\t\t\t\t\t\tawait Firebase.unfriendUser(user.userUID, userId, history);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tawait Firebase.unfollowUser(user.userUID, userId, history);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetSavingFollow(false);\n\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\tisFollowedByUser: false,\n\t\t\t\t\t\t\t\tnumberOfFollowers: previous.numberOfFollowers - 1,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tConfirm\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"cancel-button\"\n\t\t\t\t\tonClick={(_e) => setUnfollowModalVisible(false)}\n\t\t\t\t>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst privateProfileSection = loaded ? (\n\t\t<div className=\"private-profile\">\n\t\t\t<h1>{`${firstName}'s profile`}</h1>\n\t\t\t<div className=\"main-section\">\n\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/nophoto/user/u_225x300-c928cbb998d4ac6dd1f0f66f31f74b81.png\"\n\t\t\t\t\t\talt=\"Private profile\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span>{`${userInfo.numberOfRatings} ratings | ${userInfo.numberOfReviews} reviews`}</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"show-stats-window-button\"\n\t\t\t\t\t\tonClick={(_e) => setUserRatingsChartVisible(true)}\n\t\t\t\t\t>{`avg rating: ${userInfo.averageRating.toFixed(2)}`}</button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tuserRatingsChartVisible\n\t\t\t\t\t\t\t\t? 'user-ratings-chart visible'\n\t\t\t\t\t\t\t\t: 'user-ratings-chart'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RatingsChart\n\t\t\t\t\t\t\tfiveRatings={userInfo.fiveRatings}\n\t\t\t\t\t\t\tfourRatings={userInfo.fourRatings}\n\t\t\t\t\t\t\tthreeRatings={userInfo.threeRatings}\n\t\t\t\t\t\t\ttwoRatings={userInfo.twoRatings}\n\t\t\t\t\t\t\toneRatings={userInfo.oneRatings}\n\t\t\t\t\t\t\tcloseChart={() => setUserRatingsChartVisible(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t<span className=\"introduction-span\">{`${firstName}'s profile data is set to private.`}</span>\n\t\t\t\t\t<span>You can view profiles for:</span>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>direct friends (if you are signed in)</li>\n\t\t\t\t\t\t<li>users who have made their profile public</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName=\"add-as-friend-a\"\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateAddAsFriendPage(userId)}\n\t\t\t\t\t>\n\t\t\t\t\t\tAdd friend\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst mainContent =\n\t\tloaded && showProfile ? (\n\t\t\t<div className=\"user-page-main-content\">\n\t\t\t\t{mainContentLeftSection}\n\t\t\t\t{mainContentRightSection}\n\t\t\t\t{unfollowUserModal}\n\t\t\t</div>\n\t\t) : (\n\t\t\tprivateProfileSection\n\t\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tunfollowModalVisible ? 'user-page disabled-scrolling' : 'user-page'\n\t\t\t}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tunfollowModalVisible ? 'dark-page-cover visible' : 'dark-page-cover'\n\t\t\t\t}\n\t\t\t></div>\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default UserPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/User/UserCompareBooksPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst UserCompareBooksPage = ({ match }) => {\n\tconst {\n\t\tparams: { userId },\n\t} = match;\n\tconst history = useHistory();\n\tconst query = new URLSearchParams(useLocation().search);\n\tconst sortFilter = query.get('sort') === 'rating' ? 'rating' : 'popularity';\n\tconst shelf = query.get('shelf') !== null ? query.get('shelf') : 'all';\n\tconst userShelf =\n\t\tquery.get('user_shelf') !== null ? query.get('user_shelf') : shelf;\n\tconst friendShelf =\n\t\tquery.get('friend_shelf') !== null ? query.get('friend_shelf') : shelf;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [userBooksInfo, setUserBooksInfo] = useState({});\n\tconst [sortExplanationPopupHidden, setSortExplanationPopupHidden] = useState(\n\t\ttrue\n\t);\n\tconst [otherUserUnratedBooksIndex, setOtherUserUnratedBooksIndex] = useState(\n\t\t0\n\t);\n\tconst [unratedBookRating, setUnratedBookRating] = useState(0);\n\tconst [reviewShowMore, setReviewShowMore] = useState(false);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getUserBooksInfo = async () => {\n\t\t\tif (user.userUID === userId) {\n\t\t\t\thistory.push({\n\t\t\t\t\tpathname: Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t\t),\n\t\t\t\t\tstate: \"You can't compare books with yourself\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst userBooksObject = await trackPromise(\n\t\t\t\t\tFirebase.getInfoForCompareBooksPage(user.userUID, userId, history)\n\t\t\t\t);\n\t\t\t\tsetUserBooksInfo(userBooksObject);\n\t\t\t\tsetLoaded(true);\n\t\t\t}\n\t\t};\n\t\tgetUserBooksInfo();\n\t}, [user.userUID, userId, history, user.userInfo.firstName]);\n\n\tuseEffect(() => {\n\t\tif (userBooksInfo.loggedInUserBooks !== undefined) {\n\t\t\tconst otherUserUnratedBooks = userBooksInfo.otherUserBooks.filter(\n\t\t\t\t(book, index) =>\n\t\t\t\t\tindex < 20 &&\n\t\t\t\t\t!userBooksInfo.loggedInUserBooks.some(\n\t\t\t\t\t\t(b) => b.rootId === book.rootId\n\t\t\t\t\t) &&\n\t\t\t\t\tbook.rating !== 0 &&\n\t\t\t\t\tbook.rating !== undefined\n\t\t\t);\n\t\t\tif (otherUserUnratedBooksIndex < otherUserUnratedBooks.length) {\n\t\t\t\tsetUnratedBookRating(\n\t\t\t\t\totherUserUnratedBooks[otherUserUnratedBooksIndex].rating\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}, [otherUserUnratedBooksIndex, userBooksInfo]);\n\n\tconst loggedInUserBookshelves = loaded\n\t\t? userBooksInfo.loggedInUserBooks.reduce((previous, current) => {\n\t\t\t\tcurrent.bookshelves.forEach((bookshelf) => {\n\t\t\t\t\tif (!previous.includes(bookshelf)) {\n\t\t\t\t\t\tprevious.push(bookshelf);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn previous;\n\t\t  }, [])\n\t\t: [];\n\tconst otherUserBookshelves = loaded\n\t\t? userBooksInfo.otherUserBooks.reduce((previous, current) => {\n\t\t\t\tcurrent.bookshelves.forEach((bookshelf) => {\n\t\t\t\t\tif (!previous.includes(bookshelf)) {\n\t\t\t\t\t\tprevious.push(bookshelf);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn previous;\n\t\t  }, [])\n\t\t: [];\n\tconst commonShelves = loggedInUserBookshelves.filter((bookshelf) =>\n\t\totherUserBookshelves.includes(bookshelf)\n\t);\n\n\tconst otherUserFilteredBooks = loaded\n\t\t? userBooksInfo.otherUserBooks.filter(\n\t\t\t\t(book) =>\n\t\t\t\t\tfriendShelf === 'all' ||\n\t\t\t\t\tbook.bookshelves.includes(friendShelf) ||\n\t\t\t\t\tbook.status === friendShelf\n\t\t  )\n\t\t: [];\n\tconst loggedInUserFilteredBooks = loaded\n\t\t? userBooksInfo.loggedInUserBooks.filter(\n\t\t\t\t(book) =>\n\t\t\t\t\tuserShelf === 'all' ||\n\t\t\t\t\tbook.bookshelves.includes(userShelf) ||\n\t\t\t\t\tbook.status === userShelf\n\t\t  )\n\t\t: [];\n\n\tconst otherUserNumberOfBooks = loaded ? otherUserFilteredBooks.length : 0;\n\tconst otherUserNumberOfUniqueBooks = loaded\n\t\t? otherUserFilteredBooks.filter(\n\t\t\t\t(book) =>\n\t\t\t\t\t!loggedInUserFilteredBooks.some(\n\t\t\t\t\t\t(loggedInUserBook) => loggedInUserBook.rootId === book.rootId\n\t\t\t\t\t)\n\t\t  ).length\n\t\t: 0;\n\tconst numberOfBooksInCommon =\n\t\totherUserNumberOfBooks - otherUserNumberOfUniqueBooks;\n\tconst loggedInUserNumberOfBooks = loaded\n\t\t? loggedInUserFilteredBooks.length\n\t\t: 0;\n\tconst loggedInUserNumberOfUniqueBooks =\n\t\tloggedInUserNumberOfBooks - numberOfBooksInCommon;\n\tconst percentageOfLoggedInUserBooksInCommon =\n\t\tloggedInUserNumberOfBooks !== 0\n\t\t\t? numberOfBooksInCommon / loggedInUserNumberOfBooks\n\t\t\t: 0;\n\tconst percentageOfOtherUserBooksInCommon =\n\t\totherUserNumberOfBooks !== 0\n\t\t\t? numberOfBooksInCommon / otherUserNumberOfBooks\n\t\t\t: 0;\n\n\tconst allBooksInCommon = loaded\n\t\t? otherUserFilteredBooks\n\t\t\t\t.filter((book) =>\n\t\t\t\t\tloggedInUserFilteredBooks.some(\n\t\t\t\t\t\t(loggedInUserBook) => loggedInUserBook.rootId === book.rootId\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.map((book) => book.rootId)\n\t\t: [];\n\tconst ratedBooksInCommon = allBooksInCommon.filter((rootId) => {\n\t\tconst loggedInBookObject = loggedInUserFilteredBooks.filter(\n\t\t\t(loggedInUserBook) => loggedInUserBook.rootId === rootId\n\t\t)[0];\n\t\tconst otherUserBookObject = otherUserFilteredBooks.filter(\n\t\t\t(loggedInUserBook) => loggedInUserBook.rootId === rootId\n\t\t)[0];\n\t\treturn (\n\t\t\tloggedInBookObject.rating !== undefined &&\n\t\t\tloggedInBookObject.rating !== 0 &&\n\t\t\totherUserBookObject.rating !== undefined &&\n\t\t\totherUserBookObject.rating !== 0\n\t\t);\n\t});\n\tconst similarityOfTastesIndex = loaded\n\t\t? ratedBooksInCommon\n\t\t\t\t.map((rootId) => {\n\t\t\t\t\tconst loggedInUserBook = loggedInUserFilteredBooks.filter(\n\t\t\t\t\t\t(b) => b.rootId === rootId\n\t\t\t\t\t)[0];\n\t\t\t\t\tconst otherUserBook = otherUserFilteredBooks.filter(\n\t\t\t\t\t\t(b) => b.rootId === rootId\n\t\t\t\t\t)[0];\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t100 - Math.abs(loggedInUserBook.rating - otherUserBook.rating) * 25\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.reduce(\n\t\t\t\t\t(previous, current) => previous + current / ratedBooksInCommon.length,\n\t\t\t\t\t0\n\t\t\t\t)\n\t\t: 0;\n\tconst unratedBooksFromOtherUser = loaded\n\t\t? otherUserFilteredBooks.filter(\n\t\t\t\t(book, index) =>\n\t\t\t\t\tindex < 20 &&\n\t\t\t\t\t!allBooksInCommon.includes(book.rootId) &&\n\t\t\t\t\tbook.rating !== 0 &&\n\t\t\t\t\tbook.rating !== undefined\n\t\t  )\n\t\t: [];\n\n\tconst rateBook = async (bookObject, rating) => {\n\t\tif (bookObject.id !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, bookObject.id, rating, history);\n\t\t\tsetUserBooksInfo((previous) => {\n\t\t\t\treturn {\n\t\t\t\t\t...previous,\n\t\t\t\t\tloggedInUserBooks: previous.loggedInUserBooks.concat({\n\t\t\t\t\t\t...bookObject,\n\t\t\t\t\t\trating,\n\t\t\t\t\t\tstatus: 'read',\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n\n\tconst pageHeader = loaded ? (\n\t\t<h1 className=\"user-compare-books-page-header\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tuserId,\n\t\t\t\t\tuserBooksInfo.otherUserFirstName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{userBooksInfo.otherUserLastName !== undefined\n\t\t\t\t\t? userBooksInfo.otherUserFirstName +\n\t\t\t\t\t  ' ' +\n\t\t\t\t\t  userBooksInfo.otherUserLastName\n\t\t\t\t\t: userBooksInfo.otherUserFirstName}\n\t\t\t</a>\n\t\t\t<span>{' > Compare Books'}</span>\n\t\t</h1>\n\t) : null;\n\n\tconst comparisonChartSection = loaded ? (\n\t\t<div className=\"user-compare-books-page-comparison-chart-section\">\n\t\t\t<div className=\"top-section\">\n\t\t\t\t<img\n\t\t\t\t\tsrc={`https://chart.googleapis.com/chart?cht=v&chs=200x100&chd=t:${otherUserNumberOfBooks},${loggedInUserNumberOfBooks},0,${numberOfBooksInCommon}&chds=0,${Math.max(\n\t\t\t\t\t\totherUserNumberOfBooks,\n\t\t\t\t\t\tloggedInUserNumberOfBooks\n\t\t\t\t\t)}&chco=66bb66,6666bb`}\n\t\t\t\t\talt=\"Comparison Chart\"\n\t\t\t\t/>\n\t\t\t\t<div className=\"chart-explanation-area\">\n\t\t\t\t\t<div className=\"other-user\">\n\t\t\t\t\t\t<div className=\"other-user-chart-color-block\"></div>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<span>{`${userBooksInfo.otherUserFirstName}'s books: ${otherUserNumberOfBooks} (`}</span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserReviewsPage(userId)}\n\t\t\t\t\t\t\t>{`${otherUserNumberOfUniqueBooks} `}</a>\n\t\t\t\t\t\t\t<span>not in common)</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t{numberOfBooksInCommon !== 0 ? (\n\t\t\t\t\t\t<div className=\"books-in-common\">\n\t\t\t\t\t\t\t<div className=\"books-in-common-chart-color-block\"></div>\n\t\t\t\t\t\t\t<span>{`Books in common: ${numberOfBooksInCommon} (${(\n\t\t\t\t\t\t\t\tpercentageOfLoggedInUserBooksInCommon * 100\n\t\t\t\t\t\t\t).toFixed(0)}% of your library and ${(\n\t\t\t\t\t\t\t\tpercentageOfOtherUserBooksInCommon * 100\n\t\t\t\t\t\t\t).toFixed(0)}% of ${\n\t\t\t\t\t\t\t\tuserBooksInfo.otherUserPronouns\n\t\t\t\t\t\t\t} library)`}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<div className=\"logged-in-user\">\n\t\t\t\t\t\t<div className=\"logged-in-user-chart-color-block\"></div>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<span>{`My books: ${loggedInUserNumberOfBooks} (`}</span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserReviewsPage(\n\t\t\t\t\t\t\t\t\tuser.userUID\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>{`${loggedInUserNumberOfUniqueBooks} `}</a>\n\t\t\t\t\t\t\t<span>not in common)</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{numberOfBooksInCommon !== 0 ? (\n\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t<span>{`Your tastes are ${similarityOfTastesIndex}% similar for the books you both rated.`}</span>\n\t\t\t\t\t<div className=\"sort-area\">\n\t\t\t\t\t\t<label htmlFor=\"sort\">sort</label>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tname=\"sort\"\n\t\t\t\t\t\t\tvalue={sortFilter}\n\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\tpathname: Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\t\t\tuserId\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tsearch: `?sort=${e.target.value}&user_shelf=${userShelf}&friend_shelf=${friendShelf}`,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option>inverse popularity</option>\n\t\t\t\t\t\t\t<option>rating</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\tsetSortExplanationPopupHidden((previous) => !previous)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t(?)\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tsortExplanationPopupHidden\n\t\t\t\t\t\t\t\t\t? 'sort-explanation-popup hidden'\n\t\t\t\t\t\t\t\t\t: 'sort-explanation-popup'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"left-tip\"></div>\n\t\t\t\t\t\t\t<div className=\"title-area\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<b>about sorts</b>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"close-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => setSortExplanationPopupHidden(true)}\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"explanation\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<b>inverse popularity</b>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tSort by the number of times the book has been added by people\n\t\t\t\t\t\t\t\t\ton Goodreads in descending order. Seeing the uncommon books\n\t\t\t\t\t\t\t\t\tyou have in common with someone can be revealing!\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<b>rating</b>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<p>Sort by the other person's rating in descending order.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst booksInCommonTable = loaded ? (\n\t\tallBooksInCommon.length === 0 ? (\n\t\t\t<span className=\"no-books-in-common-span\">{`You and ${userBooksInfo.otherUserFirstName} don't have any books in common.`}</span>\n\t\t) : (\n\t\t\t<table className=\"books-in-common-table\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr className=\"top-row\">\n\t\t\t\t\t\t<th width=\"70%\">book title</th>\n\t\t\t\t\t\t<th width=\"15%\">{`${userBooksInfo.otherUserFirstName}'s rating`}</th>\n\t\t\t\t\t\t<th width=\"15%\">my rating</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{allBooksInCommon\n\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\tconst otherUserBookObjectA = otherUserFilteredBooks.filter(\n\t\t\t\t\t\t\t\t(book) => book.rootId === a\n\t\t\t\t\t\t\t)[0];\n\t\t\t\t\t\t\tconst otherUserBookObjectB = otherUserFilteredBooks.filter(\n\t\t\t\t\t\t\t\t(book) => book.rootId === b\n\t\t\t\t\t\t\t)[0];\n\t\t\t\t\t\t\tif (sortFilter === 'rating') {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\totherUserBookObjectA.rating === undefined ||\n\t\t\t\t\t\t\t\t\totherUserBookObjectA.rating === 0\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn b;\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\totherUserBookObjectB.rating === undefined ||\n\t\t\t\t\t\t\t\t\totherUserBookObjectB.rating === 0\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\totherUserBookObjectB.rating - otherUserBookObjectA.rating\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\totherUserBookObjectB.popularityScore -\n\t\t\t\t\t\t\t\t\totherUserBookObjectA.popularityScore\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map((rootId, index) => {\n\t\t\t\t\t\t\tconst loggedInUserBook = userBooksInfo.loggedInUserBooks.filter(\n\t\t\t\t\t\t\t\t(book) => book.rootId === rootId\n\t\t\t\t\t\t\t)[0];\n\t\t\t\t\t\t\tconst otherUserBook = userBooksInfo.otherUserBooks.filter(\n\t\t\t\t\t\t\t\t(book) => book.rootId === rootId\n\t\t\t\t\t\t\t)[0];\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr className=\"book-info-row\" key={index}>\n\t\t\t\t\t\t\t\t\t<td width=\"70%\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"book-title-area\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-cover-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.title\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? loggedInUserBook.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={loggedInUserBook.title}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"book-title-and-authorship\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{loggedInUserBook.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"authorship-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>by </span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-author-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.authorId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.authorName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{loggedInUserBook.authorName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width=\"15%\">\n\t\t\t\t\t\t\t\t\t\t{otherUserBook.rating !== 0 &&\n\t\t\t\t\t\t\t\t\t\totherUserBook.rating !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"rating-stars\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserBook.rating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserBook.rating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserBook.rating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserBook.rating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserBook.rating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: otherUserBook.rating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"status-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t{otherUserBook.status}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width=\"15%\">\n\t\t\t\t\t\t\t\t\t\t{loggedInUserBook.rating !== 0 &&\n\t\t\t\t\t\t\t\t\t\tloggedInUserBook.rating !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"rating-stars\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.rating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.rating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.rating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.rating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook.rating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserBook.rating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"status-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t{loggedInUserBook.status}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t)\n\t) : null;\n\n\tconst rateOtherBooksArea =\n\t\tloaded &&\n\t\tpercentageOfOtherUserBooksInCommon < 100 &&\n\t\tunratedBooksFromOtherUser.length > 0 ? (\n\t\t\t<div className=\"user-compare-books-page-rate-other-books-area\">\n\t\t\t\t<span className=\"rate-other-books-explanation-span\">\n\t\t\t\t\t{`See what other books you have in common with ${userBooksInfo.otherUserFirstName}. Rate each book you've read, or click \"skip\".`}\n\t\t\t\t</span>\n\t\t\t\t{otherUserUnratedBooksIndex < unratedBooksFromOtherUser.length ? (\n\t\t\t\t\t<div className=\"rating-section\">\n\t\t\t\t\t\t<span className=\"rate-this-book-title\">\n\t\t\t\t\t\t\t<span>{`#${\n\t\t\t\t\t\t\t\totherUserUnratedBooksIndex + 1\n\t\t\t\t\t\t\t}. rate this book: `}</span>\n\t\t\t\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tunratedBookRating > 0\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) => setUnratedBookRating(1)}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetUnratedBookRating(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t.rating\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\trateBook(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex],\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tunratedBookRating > 1\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) => setUnratedBookRating(2)}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetUnratedBookRating(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t.rating\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\trateBook(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex],\n\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tunratedBookRating > 2\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) => setUnratedBookRating(3)}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetUnratedBookRating(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t.rating\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\trateBook(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex],\n\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tunratedBookRating > 3\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) => setUnratedBookRating(4)}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetUnratedBookRating(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t.rating\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\trateBook(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex],\n\t\t\t\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tunratedBookRating > 4\n\t\t\t\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\t\t\t\tonMouseOver={(_e) => setUnratedBookRating(5)}\n\t\t\t\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\t\t\t\tsetUnratedBookRating(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t.rating\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\trateBook(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex],\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span className=\"or-span\"> or </span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"skip-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\t\tsetOtherUserUnratedBooksIndex((previous) => previous + 1)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tskip\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div className=\"book-card\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"book-cover-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex].id,\n\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex].title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? unratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.cover\n\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex].title\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex].id,\n\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex].title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{unratedBooksFromOtherUser[otherUserUnratedBooksIndex].title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<span className=\"authorship-span\">\n\t\t\t\t\t\t\t\t\t<span>by </span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-author-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t.authorId,\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t.authorName\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t.authorName\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"user-rated-span\">\n\t\t\t\t\t\t\t\t\t<span>{`${userBooksInfo.otherUserFirstName} rated it: `}</span>\n\t\t\t\t\t\t\t\t\t<div className=\"rating-stars\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.rating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.rating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.rating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.rating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.rating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t\t\t\t\t  ].rating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"bookshelves-span\">\n\t\t\t\t\t\t\t\t\t<span>bookshelves: </span>\n\t\t\t\t\t\t\t\t\t{unratedBooksFromOtherUser[\n\t\t\t\t\t\t\t\t\t\totherUserUnratedBooksIndex\n\t\t\t\t\t\t\t\t\t].bookshelves.map((bookshelf, index) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bookshelf-span\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t>{`${bookshelf}, `}</span>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{unratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t.review !== undefined ? (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\treviewShowMore ? 'book-review show-more' : 'book-review'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span className=\"review-span\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.review\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t{unratedBooksFromOtherUser[otherUserUnratedBooksIndex]\n\t\t\t\t\t\t\t\t\t\t\t.review.length > 500 ? (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"more-less-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetReviewShowMore((previous) => !previous)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{reviewShowMore ? '(less)' : '...more'}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book-index-section\">\n\t\t\t\t\t\t\t\t<span>{`book ${otherUserUnratedBooksIndex + 1} of ${\n\t\t\t\t\t\t\t\t\tunratedBooksFromOtherUser.length\n\t\t\t\t\t\t\t\t}`}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"finished-rating-area\">\n\t\t\t\t\t\t<span>{`You have ${numberOfBooksInCommon} books in common with ${userBooksInfo.otherUserFirstName}. Based on these ratings your tastes are ${similarityOfTastesIndex}% similar.`}</span>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserBooksInfo.otherUserFirstName\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>{`back to ${userBooksInfo.otherUserFirstName}'s profile`}</a>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContentLeftSection = loaded ? (\n\t\t<div className=\"user-compare-books-page-main-content-left-section\">\n\t\t\t{pageHeader}\n\t\t\t{userBooksInfo.otherUserBooks.length > 0 ? (\n\t\t\t\t<div className=\"comparisons-and-ratings\">\n\t\t\t\t\t{comparisonChartSection}\n\t\t\t\t\t{booksInCommonTable}\n\t\t\t\t\t{rateOtherBooksArea}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<span className=\"no-books-added-span\">{`${userBooksInfo.otherUserFirstName} hasn't added any books.`}</span>\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst mainContentRightSection = loaded ? (\n\t\t<div className=\"user-compare-books-page-main-content-right-section\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tuserId,\n\t\t\t\t\tuserBooksInfo.otherUserFirstName\n\t\t\t\t)}\n\t\t\t>{`back to ${userBooksInfo.otherUserFirstName}'s profile `}</a>\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateBookCompatibilityTestPage(\n\t\t\t\t\tuserId,\n\t\t\t\t\tuserBooksInfo.otherUserFirstName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\tbook compatibility test\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateGiveRecommendationToUserPage(\n\t\t\t\t\tuserId\n\t\t\t\t)}\n\t\t\t>{`recommend a book to ${userBooksInfo.otherUserFirstName}`}</a>\n\t\t\t<div className=\"common-shelves-area\">\n\t\t\t\t<label htmlFor=\"common-shelves\">common shelves</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"common-shelves\"\n\t\t\t\t\tvalue={shelf}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\tpathname: Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\tuserId\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tsearch: `?sort=${sortFilter}&shelf=${e.target.value}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option>all</option>\n\t\t\t\t\t<option>read</option>\n\t\t\t\t\t<option>currently-reading</option>\n\t\t\t\t\t<option>to-read</option>\n\t\t\t\t\t{commonShelves.map((shelf, index) => {\n\t\t\t\t\t\treturn <option key={index}>{shelf}</option>;\n\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"your-shelves-area\">\n\t\t\t\t<label htmlFor=\"your-shelves\">your shelves</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"your-shelves\"\n\t\t\t\t\tvalue={userShelf}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\tpathname: Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\tuserId\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tsearch: `?sort=${sortFilter}&user_shelf=${e.target.value}&friend_shelf=${friendShelf}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option>all</option>\n\t\t\t\t\t<option>read</option>\n\t\t\t\t\t<option>currently-reading</option>\n\t\t\t\t\t<option>to-read</option>\n\t\t\t\t\t{loggedInUserBookshelves.map((shelf, index) => {\n\t\t\t\t\t\treturn <option key={index}>{shelf}</option>;\n\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"their-shelves-area\">\n\t\t\t\t<label htmlFor=\"their-shelves\">their shelves</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"their-shelves\"\n\t\t\t\t\tvalue={friendShelf}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\tpathname: Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\tuserId\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tsearch: `?sort=${sortFilter}&user_shelf=${userShelf}&friend_shelf=${e.target.value}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option>all</option>\n\t\t\t\t\t<option>read</option>\n\t\t\t\t\t<option>currently-reading</option>\n\t\t\t\t\t<option>to-read</option>\n\t\t\t\t\t{otherUserBookshelves.map((shelf, index) => {\n\t\t\t\t\t\treturn <option key={index}>{shelf}</option>;\n\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"user-compare-books-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"user-compare-books-page-main-content\">\n\t\t\t\t{mainContentLeftSection}\n\t\t\t\t{mainContentRightSection}\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default UserCompareBooksPage;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/User/BookCompatibilityTestPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst BookCompatibilityTestPage = () => {\n\tconst history = useHistory();\n\tconst query = new URLSearchParams(useLocation().search);\n\tconst pageId = query.get('id');\n\tconst userId = pageId !== null ? pageId.split('-')[0] : null;\n\tconst userName =\n\t\tpageId !== null\n\t\t\t? pageId\n\t\t\t\t\t.split('-')\n\t\t\t\t\t.slice(1)\n\t\t\t\t\t.map((name) => name[0].toUpperCase() + name.slice(1))\n\t\t\t\t\t.join(' ')\n\t\t\t: null;\n\tconst userFirstName = userName !== null ? userName.split(' ')[0] : null;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [usersInfo, setUsersInfo] = useState({});\n\tconst [booksInfo, setBooksInfo] = useState({});\n\tconst [friendSelectInput, setFriendSelectInput] = useState(0);\n\n\tconst popularBooksIds = useMemo(\n\t\t() => [\n\t\t\t'JdE1oE1zeZYOVU8PYyy7',\n\t\t\t'Fctu87S2XLy2RA5Wcr6H',\n\t\t\t'0Ahlt0lmj06b0rKaD7qJ',\n\t\t\t'24P8kxLmS4LmtcDSPkvl',\n\t\t],\n\t\t[]\n\t);\n\tconst classicsBooksIds = useMemo(\n\t\t() => [\n\t\t\t'6490z4ij4qsGAIBoeBMK',\n\t\t\t'Djx2P7Egc9cJgfdwwF37',\n\t\t\t'H1xRvYEIDyk54H68QssS',\n\t\t\t'HfkmwYPOfQ4MtpLnLNlq',\n\t\t],\n\t\t[]\n\t);\n\tconst popularFictionBooksIds = useMemo(\n\t\t() => ['JQBwpf6G3ND5pKXDYNlx', 'JdE1oE1zeZYOVU8PYyy7'],\n\t\t[]\n\t);\n\tconst thrillersBooksIds = useMemo(\n\t\t() => [\n\t\t\t'VYSVKcKAKYwDq2PhV2cJ',\n\t\t\t'VncumXL1QTrVaGdhvM4O',\n\t\t\t'aJSCUT07kmUQqUlTegRv',\n\t\t],\n\t\t[]\n\t);\n\tconst nonFictionBooksIds = useMemo(\n\t\t() => [\n\t\t\t'aJy9OMGHhUQ8GPZGRn6C',\n\t\t\t'bzRUzMqsdgjKD75Jxosn',\n\t\t\t'dDSxgc4Af87DFYEsiTxq',\n\t\t\t'e7wTYJTr4dSkJLaEXWEO',\n\t\t],\n\t\t[]\n\t);\n\tconst fantasyBooksIds = useMemo(\n\t\t() => [\n\t\t\t'hx124Fx58u2xRqWUaxlv',\n\t\t\t'ljpqnZKAKgZSjbmrO6sF',\n\t\t\t'nSpJeOPwkgFKg45uc164',\n\t\t\t'oJ2euLQwJOn944VBu1tl',\n\t\t],\n\t\t[]\n\t);\n\tconst romanceBooksIds = useMemo(\n\t\t() => ['pe83n32WlbIWRmYwyLiD', 'pttjrCHmNS16f2lhOU9e'],\n\t\t[]\n\t);\n\tconst scienceFictionBooksIds = useMemo(\n\t\t() => [\n\t\t\t'qNejPAmYF2xlTdbnhH41',\n\t\t\t'qUe7SD2Jba5MbybZNUj5',\n\t\t\t'sBVe4XtgS9K0HldzfRBN',\n\t\t],\n\t\t[]\n\t);\n\tconst womensFictionBooksIds = useMemo(\n\t\t() => [\n\t\t\t't8AF9o4IHodXuusb62ws',\n\t\t\t'uBI55trKgMJpRohAtxry',\n\t\t\t'unRbEhtsd1vcMxpSvDKI',\n\t\t\t'zCikj4mmQyZlyVNyP7cF',\n\t\t],\n\t\t[]\n\t);\n\n\tconst noPictureImageUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png';\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getInfo = async () => {\n\t\t\tsetBooksInfo(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getBooksInfoForBookCompatibilityTestPage(\n\t\t\t\t\t\tpopularBooksIds,\n\t\t\t\t\t\tclassicsBooksIds,\n\t\t\t\t\t\tpopularFictionBooksIds,\n\t\t\t\t\t\tthrillersBooksIds,\n\t\t\t\t\t\tnonFictionBooksIds,\n\t\t\t\t\t\tfantasyBooksIds,\n\t\t\t\t\t\tromanceBooksIds,\n\t\t\t\t\t\tscienceFictionBooksIds,\n\t\t\t\t\t\twomensFictionBooksIds\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetUsersInfo(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getUsersInfoForCompatibilityTestPage(\n\t\t\t\t\t\tpopularBooksIds,\n\t\t\t\t\t\tclassicsBooksIds,\n\t\t\t\t\t\tpopularFictionBooksIds,\n\t\t\t\t\t\tthrillersBooksIds,\n\t\t\t\t\t\tnonFictionBooksIds,\n\t\t\t\t\t\tfantasyBooksIds,\n\t\t\t\t\t\tromanceBooksIds,\n\t\t\t\t\t\tscienceFictionBooksIds,\n\t\t\t\t\t\twomensFictionBooksIds,\n\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\thistory\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetInfo();\n\t}, [\n\t\tclassicsBooksIds,\n\t\tpopularFictionBooksIds,\n\t\tpopularBooksIds,\n\t\tthrillersBooksIds,\n\t\tfantasyBooksIds,\n\t\twomensFictionBooksIds,\n\t\tscienceFictionBooksIds,\n\t\tnonFictionBooksIds,\n\t\tromanceBooksIds,\n\t\tuser.userUID,\n\t\tuserId,\n\t\thistory,\n\t]);\n\n\tconst calculateMatchForCategory = (\n\t\tgeneralCategoryIdArray,\n\t\tuser1BookArray,\n\t\tuser2BookArray\n\t) => {\n\t\tconst ratedBooksInCommon = generalCategoryIdArray.filter(\n\t\t\t(rootId) =>\n\t\t\t\tuser1BookArray.some(\n\t\t\t\t\t(book) =>\n\t\t\t\t\t\tbook.rootId === rootId &&\n\t\t\t\t\t\tbook.rating !== undefined &&\n\t\t\t\t\t\tbook.rating > 0\n\t\t\t\t) &&\n\t\t\t\tuser2BookArray.some(\n\t\t\t\t\t(book) =>\n\t\t\t\t\t\tbook.rootId === rootId &&\n\t\t\t\t\t\tbook.rating !== undefined &&\n\t\t\t\t\t\tbook.rating > 0\n\t\t\t\t)\n\t\t);\n\t\tif (ratedBooksInCommon.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn ratedBooksInCommon.reduce(\n\t\t\t(previous, current) =>\n\t\t\t\tprevious +\n\t\t\t\t(5 -\n\t\t\t\t\tMath.abs(\n\t\t\t\t\t\tuser1BookArray.filter((book) => book.rootId === current)[0].rating -\n\t\t\t\t\t\t\tuser2BookArray.filter((book) => book.rootId === current)[0].rating\n\t\t\t\t\t)) /\n\t\t\t\t\t5 /\n\t\t\t\t\tratedBooksInCommon.length,\n\t\t\t0\n\t\t);\n\t};\n\n\tconst popularMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\tpopularBooksIds,\n\t\t\t\tusersInfo.loggedInUser.popularBooks,\n\t\t\t\tusersInfo.otherUser.popularBooks\n\t\t  )\n\t\t: 0;\n\tconst classicsMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\tclassicsBooksIds,\n\t\t\t\tusersInfo.loggedInUser.classicsBooks,\n\t\t\t\tusersInfo.otherUser.classicsBooks\n\t\t  )\n\t\t: 0;\n\tconst popularFictionMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\tpopularFictionBooksIds,\n\t\t\t\tusersInfo.loggedInUser.popularFictionBooks,\n\t\t\t\tusersInfo.otherUser.popularFictionBooks\n\t\t  )\n\t\t: 0;\n\tconst thrillersMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\tthrillersBooksIds,\n\t\t\t\tusersInfo.loggedInUser.thrillersBooks,\n\t\t\t\tusersInfo.otherUser.thrillersBooks\n\t\t  )\n\t\t: 0;\n\tconst nonFictionMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\tnonFictionBooksIds,\n\t\t\t\tusersInfo.loggedInUser.nonFictionBooks,\n\t\t\t\tusersInfo.otherUser.nonFictionBooks\n\t\t  )\n\t\t: 0;\n\tconst fantasyMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\tfantasyBooksIds,\n\t\t\t\tusersInfo.loggedInUser.fantasyBooks,\n\t\t\t\tusersInfo.otherUser.fantasyBooks\n\t\t  )\n\t\t: 0;\n\tconst romanceMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\tromanceBooksIds,\n\t\t\t\tusersInfo.loggedInUser.romanceBooks,\n\t\t\t\tusersInfo.otherUser.romanceBooks\n\t\t  )\n\t\t: 0;\n\tconst scienceFictionMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\tscienceFictionBooksIds,\n\t\t\t\tusersInfo.loggedInUser.scienceFictionBooks,\n\t\t\t\tusersInfo.otherUser.scienceFictionBooks\n\t\t  )\n\t\t: 0;\n\tconst womensFictionMatch = loaded\n\t\t? calculateMatchForCategory(\n\t\t\t\twomensFictionBooksIds,\n\t\t\t\tusersInfo.loggedInUser.womensFictionBooks,\n\t\t\t\tusersInfo.otherUser.womensFictionBooks\n\t\t  )\n\t\t: 0;\n\tconst matchesArray = [\n\t\tpopularMatch,\n\t\tclassicsMatch,\n\t\tpopularFictionMatch,\n\t\tthrillersMatch,\n\t\tnonFictionMatch,\n\t\tfantasyMatch,\n\t\tromanceMatch,\n\t\tscienceFictionMatch,\n\t\twomensFictionMatch,\n\t];\n\tconst generalMatch = matchesArray\n\t\t.filter((match) => match !== -1)\n\t\t.reduce(\n\t\t\t(previous, current) =>\n\t\t\t\tprevious +\n\t\t\t\tcurrent / matchesArray.filter((match) => match !== -1).length,\n\t\t\t0\n\t\t);\n\n\tconst pageHeader = (\n\t\t<h1 className=\"book-compatibility-test-page-header\">\n\t\t\tBook Compatibility Test Results\n\t\t</h1>\n\t);\n\n\tconst generalCompatibilitySection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-general-compatibility-section\">\n\t\t\t<a\n\t\t\t\tclassName=\"user-profile-picture-wrapper\"\n\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tuser.userUID,\n\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tusersInfo.loggedInUser.profilePicture !== undefined\n\t\t\t\t\t\t\t? usersInfo.loggedInUser.profilePicture\n\t\t\t\t\t\t\t: noPictureImageUrl\n\t\t\t\t\t}\n\t\t\t\t\talt={user.userInfo.firstName}\n\t\t\t\t/>\n\t\t\t</a>\n\t\t\t<span>\n\t\t\t\t<span>{`Your compatibility with `}</span>\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tuserName.split(' ')[0]\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{userName}\n\t\t\t\t</a>\n\t\t\t\t<span>{` is ${(generalMatch * 100).toFixed(0)}%.`}</span>\n\t\t\t</span>\n\t\t\t<a\n\t\t\t\tclassName=\"user-profile-picture-wrapper\"\n\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tuser.userUID,\n\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tusersInfo.otherUser.profilePicture !== undefined\n\t\t\t\t\t\t\t? usersInfo.otherUser.profilePicture\n\t\t\t\t\t\t\t: noPictureImageUrl\n\t\t\t\t\t}\n\t\t\t\t\talt={user.userInfo.firstName}\n\t\t\t\t/>\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst categoryCompatibilitySection = loaded ? (\n\t\t<table className=\"book-compatibility-test-page-category-compatibility-section\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Category</th>\n\t\t\t\t\t<th>Score</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{[\n\t\t\t\t\t'popular',\n\t\t\t\t\t'classics',\n\t\t\t\t\t'popular fiction',\n\t\t\t\t\t'thrillers',\n\t\t\t\t\t'nonfiction',\n\t\t\t\t\t'fantasy',\n\t\t\t\t\t'romance',\n\t\t\t\t\t'science fiction',\n\t\t\t\t\t\"women's fiction\",\n\t\t\t\t].map((genre, index) => {\n\t\t\t\t\tconst matchValue =\n\t\t\t\t\t\tmatchesArray[index] === -1 ? 0 : matchesArray[index];\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={index} className={index === 8 ? 'last-row' : ''}>\n\t\t\t\t\t\t\t<td className=\"category-td\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(\n\t\t\t\t\t\t\t\t\t\tgenre.split(' ').join('-')\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{genre}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td className=\"score-td\">\n\t\t\t\t\t\t\t\t<span>{matchValue * 100}</span>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={'green-bar-' + (matchValue * 100).toString()}\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t</table>\n\t) : null;\n\n\tconst generateSpecificCategoryCompatibilitySection = (\n\t\tcategoryName,\n\t\tbookIdsArray,\n\t\tbooksInfoObject,\n\t\tloggedInUserInfoObject,\n\t\totherUserInfoObject,\n\t\tindex\n\t) => {\n\t\tconst generateTableEntryForBook = (bookObjectArray) => {\n\t\t\tif (bookObjectArray.length > 0) {\n\t\t\t\tif (\n\t\t\t\t\tbookObjectArray[0].rating !== undefined &&\n\t\t\t\t\tbookObjectArray[0].rating !== 0\n\t\t\t\t) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"rating-stars\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tbookObjectArray[0].rating >= 1\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating >= 0.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating > 0\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tbookObjectArray[0].rating >= 2\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating >= 1.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating > 1\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tbookObjectArray[0].rating >= 3\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating >= 2.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating > 2\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tbookObjectArray[0].rating >= 4\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating >= 3.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating > 3\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tbookObjectArray[0].rating >= 5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating >= 4.5\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t: bookObjectArray[0].rating > 4\n\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<span className=\"status-span\">{bookObjectArray[0].status}</span>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn <span className=\"nothing-span\">--</span>;\n\t\t};\n\n\t\treturn (\n\t\t\t<table className=\"specific-category-table\" key={index}>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{categoryName + ' Books'}</th>\n\t\t\t\t\t\t<th>My Rating</th>\n\t\t\t\t\t\t<th>{`${userFirstName}'s Rating`}</th>\n\t\t\t\t\t\t<th>Match</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{bookIdsArray.map((bookRootId, i) => {\n\t\t\t\t\t\tconst loggedInUserBook = loggedInUserInfoObject.filter(\n\t\t\t\t\t\t\t(book) => book.rootId === bookRootId\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst otherUserBook = otherUserInfoObject.filter(\n\t\t\t\t\t\t\t(book) => book.rootId === bookRootId\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\tclassName={i === bookIdsArray.length - 1 ? 'last-row' : ''}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\tbooksInfoObject[i].id,\n\t\t\t\t\t\t\t\t\t\t\t\tbooksInfoObject[i].title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{booksInfoObject[i].title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span> by </span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\tbooksInfoObject[i].authorId,\n\t\t\t\t\t\t\t\t\t\t\t\tbooksInfoObject[i].authorName\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{booksInfoObject[i].authorName}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>{generateTableEntryForBook(loggedInUserBook)}</td>\n\t\t\t\t\t\t\t\t<td>{generateTableEntryForBook(otherUserBook)}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{loggedInUserBook.length > 0 &&\n\t\t\t\t\t\t\t\t\tloggedInUserBook[0].rating !== undefined &&\n\t\t\t\t\t\t\t\t\tloggedInUserBook[0].rating !== 0 &&\n\t\t\t\t\t\t\t\t\totherUserBook.length > 0 &&\n\t\t\t\t\t\t\t\t\totherUserBook[0].rating !== undefined &&\n\t\t\t\t\t\t\t\t\totherUserBook[0].rating !== 0 ? (\n\t\t\t\t\t\t\t\t\t\tMath.abs(\n\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook[0].rating - otherUserBook[0].rating\n\t\t\t\t\t\t\t\t\t\t) === 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"excellent\">excellent</span>\n\t\t\t\t\t\t\t\t\t\t) : Math.abs(\n\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook[0].rating - otherUserBook[0].rating\n\t\t\t\t\t\t\t\t\t\t  ) === 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"good\">good</span>\n\t\t\t\t\t\t\t\t\t\t) : Math.abs(\n\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook[0].rating - otherUserBook[0].rating\n\t\t\t\t\t\t\t\t\t\t  ) === 2 ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"ok\">ok</span>\n\t\t\t\t\t\t\t\t\t\t) : Math.abs(\n\t\t\t\t\t\t\t\t\t\t\t\tloggedInUserBook[0].rating - otherUserBook[0].rating\n\t\t\t\t\t\t\t\t\t\t  ) === 3 ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"not-good\">not good</span>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"very-bad\">very bad</span>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t);\n\t};\n\n\tconst popularSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-popular-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t'popular',\n\t\t\t\tpopularBooksIds,\n\t\t\t\tbooksInfo.popularBooks,\n\t\t\t\tusersInfo.loggedInUser.popularBooks,\n\t\t\t\tusersInfo.otherUser.popularBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst classicsSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-classics-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t'classics',\n\t\t\t\tclassicsBooksIds,\n\t\t\t\tbooksInfo.classicsBooks,\n\t\t\t\tusersInfo.loggedInUser.classicsBooks,\n\t\t\t\tusersInfo.otherUser.classicsBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst popularFictionSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-popular-fiction-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t'popular fiction',\n\t\t\t\tpopularFictionBooksIds,\n\t\t\t\tbooksInfo.popularFictionBooks,\n\t\t\t\tusersInfo.loggedInUser.popularFictionBooks,\n\t\t\t\tusersInfo.otherUser.popularFictionBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst thrillersSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-thrillers-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t'thrillers',\n\t\t\t\tthrillersBooksIds,\n\t\t\t\tbooksInfo.thrillersBooks,\n\t\t\t\tusersInfo.loggedInUser.thrillersBooks,\n\t\t\t\tusersInfo.otherUser.thrillersBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst nonFictionSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-nonfiction-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t'nonfiction',\n\t\t\t\tnonFictionBooksIds,\n\t\t\t\tbooksInfo.nonFictionBooks,\n\t\t\t\tusersInfo.loggedInUser.nonFictionBooks,\n\t\t\t\tusersInfo.otherUser.nonFictionBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst fantasySection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-fantasy-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t'fantasy',\n\t\t\t\tfantasyBooksIds,\n\t\t\t\tbooksInfo.fantasyBooks,\n\t\t\t\tusersInfo.loggedInUser.fantasyBooks,\n\t\t\t\tusersInfo.otherUser.fantasyBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst romanceSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-romance-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t'romance',\n\t\t\t\tromanceBooksIds,\n\t\t\t\tbooksInfo.romanceBooks,\n\t\t\t\tusersInfo.loggedInUser.romanceBooks,\n\t\t\t\tusersInfo.otherUser.romanceBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst scienceFictionSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-science-fiction-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t'science fiction',\n\t\t\t\tscienceFictionBooksIds,\n\t\t\t\tbooksInfo.scienceFictionBooks,\n\t\t\t\tusersInfo.loggedInUser.scienceFictionBooks,\n\t\t\t\tusersInfo.otherUser.scienceFictionBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst womensFictionSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-womens-fiction-section\">\n\t\t\t{generateSpecificCategoryCompatibilitySection(\n\t\t\t\t\"women's fiction\",\n\t\t\t\twomensFictionBooksIds,\n\t\t\t\tbooksInfo.womensFictionBooks,\n\t\t\t\tusersInfo.loggedInUser.womensFictionBooks,\n\t\t\t\tusersInfo.otherUser.womensFictionBooks,\n\t\t\t\t0\n\t\t\t)}\n\t\t</div>\n\t) : null;\n\n\tconst mainContentLeftSection = (\n\t\t<div className=\"book-compatibility-test-page-main-content-left-section\">\n\t\t\t{pageHeader}\n\t\t\t{generalCompatibilitySection}\n\t\t\t{categoryCompatibilitySection}\n\t\t\t{popularSection}\n\t\t\t{classicsSection}\n\t\t\t{popularFictionSection}\n\t\t\t{thrillersSection}\n\t\t\t{nonFictionSection}\n\t\t\t{fantasySection}\n\t\t\t{romanceSection}\n\t\t\t{scienceFictionSection}\n\t\t\t{womensFictionSection}\n\t\t</div>\n\t);\n\n\tconst mainContentRightSection = loaded ? (\n\t\t<div className=\"book-compatibility-test-page-main-content-right-section\">\n\t\t\t<div className=\"top-links\">\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateBookEditCompatibilityTestAnswersPage(\n\t\t\t\t\t\tuserId\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tedit my answers\n\t\t\t\t</a>\n\t\t\t\t<a href={Firebase.pageGenerator.generateUserCompareBooksPage(userId)}>\n\t\t\t\t\tcompare books\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div className=\"compare-with-friends-section\">\n\t\t\t\t<h2>Compare with Friends</h2>\n\t\t\t\t<select\n\t\t\t\t\tvalue={friendSelectInput}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tconst newFriendIndex = e.target.value;\n\t\t\t\t\t\tsetFriendSelectInput(newFriendIndex);\n\n\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\tpathname: Firebase.pageGenerator.generateBookCompatibilityTestPage(\n\t\t\t\t\t\t\t\tusersInfo.loggedInUser.friends[newFriendIndex - 1].id,\n\t\t\t\t\t\t\t\tusersInfo.loggedInUser.friends[newFriendIndex - 1].name\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option className=\"no-display-option\" value={0}></option>\n\t\t\t\t\t{usersInfo.loggedInUser.friends.map((friend, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<option key={index} value={index + 1}>\n\t\t\t\t\t\t\t\t{friend.name}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"book-compatibility-test-page-main-content\">\n\t\t\t{mainContentLeftSection}\n\t\t\t{mainContentRightSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"book-compatibility-test-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default BookCompatibilityTestPage;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/User/InteractiveStarRating.css';\n\nconst InteractiveStarRating = (props) => {\n\tconst [exhibitedStarRating, setExhibitedStarRating] = useState(props.rating);\n\tconst [saving, setSaving] = useState(false);\n\n\tconst rateBook = async (rating) => {\n\t\tsetSaving(true);\n\t\tprops.saveRating(rating);\n\t\tsetSaving(false);\n\t};\n\n\treturn !saving ? (\n\t\t<div className=\"user-book-page-rate-book-star-rating\">\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\texhibitedStarRating > 0\n\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t}\n\t\t\t\ttitle=\"did not like it\"\n\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(1)}\n\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\tsetExhibitedStarRating(props.rating === undefined ? 0 : props.rating)\n\t\t\t\t}\n\t\t\t\tonClick={() => rateBook(1)}\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\texhibitedStarRating > 1\n\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t}\n\t\t\t\ttitle=\"it was ok\"\n\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(2)}\n\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\tsetExhibitedStarRating(props.rating === undefined ? 0 : props.rating)\n\t\t\t\t}\n\t\t\t\tonClick={() => rateBook(2)}\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\texhibitedStarRating > 2\n\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t}\n\t\t\t\ttitle=\"liked it\"\n\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(3)}\n\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\tsetExhibitedStarRating(props.rating === undefined ? 0 : props.rating)\n\t\t\t\t}\n\t\t\t\tonClick={() => rateBook(3)}\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\texhibitedStarRating > 3\n\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t}\n\t\t\t\ttitle=\"really liked it\"\n\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(4)}\n\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\tsetExhibitedStarRating(props.rating === undefined ? 0 : props.rating)\n\t\t\t\t}\n\t\t\t\tonClick={() => rateBook(4)}\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\texhibitedStarRating > 4\n\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t}\n\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\tonMouseOver={(_e) => setExhibitedStarRating(5)}\n\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\tsetExhibitedStarRating(props.rating === undefined ? 0 : props.rating)\n\t\t\t\t}\n\t\t\t\tonClick={() => rateBook(5)}\n\t\t\t></div>\n\t\t</div>\n\t) : (\n\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t<span className=\"saving-span\">saving</span>\n\t\t</div>\n\t);\n};\n\nInteractiveStarRating.propTypes = {\n\trating: PropTypes.number,\n\tsaveRating: PropTypes.func,\n};\n\nexport default InteractiveStarRating;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/User/WantToReadButton.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst WantToReadButton = (props) => {\n\tconst [saving, setSaving] = useState(false);\n\n\tconst addBook = async () => {\n\t\tsetSaving(true);\n\t\tawait trackPromise(props.addToShelf());\n\t\tsetSaving(false);\n\t};\n\n\tconst removeBook = async () => {\n\t\tsetSaving(true);\n\t\tawait trackPromise(props.removeFromShelf());\n\t\tsetSaving(false);\n\t};\n\n\treturn (\n\t\t<button\n\t\t\tclassName={\n\t\t\t\tprops.wantToRead\n\t\t\t\t\t? 'user-want-to-read-button remove'\n\t\t\t\t\t: 'user-want-to-read-button add'\n\t\t\t}\n\t\t\tonClick={(_e) => {\n\t\t\t\tif (props.wantToRead) {\n\t\t\t\t\tremoveBook();\n\t\t\t\t} else {\n\t\t\t\t\taddBook();\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t<span>\n\t\t\t\t{!saving ? (\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"check-img\"\n\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/green_check-101ac6f308922bc4fd60437500d7b60a.png\"\n\t\t\t\t\t\talt=\"Green check\"\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t<span>{saving ? '...saving' : 'Want to Read'}</span>\n\t\t\t</span>\n\t\t</button>\n\t);\n};\n\nWantToReadButton.propTypes = {\n\twantToRead: PropTypes.bool,\n\taddToShelf: PropTypes.func,\n\tremoveFromShelf: PropTypes.func,\n};\n\nexport default WantToReadButton;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport InteractiveStarRating from './InteractiveStarRating';\nimport Firebase from '../../Firebase';\nimport WantToReadButton from './WantToReadButton';\nimport '../styles/User/EditCompatibilityTestAnswersPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst EditCompatibilityTestAnswersPage = () => {\n\tconst history = useHistory();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [booksInfo, setBooksInfo] = useState({});\n\tconst [ratedBooks, setRatedBooks] = useState([]);\n\tconst [wantToReadBooks, setWantToReadBooks] = useState([]);\n\tconst query = new URLSearchParams(useLocation().search);\n\tconst userId = query.get('id');\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tconst noCoverUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\n\tconst categoryTitles = [\n\t\t'POPULAR BOOKS',\n\t\t'CLASSICS BOOKS',\n\t\t'POPULAR FICTION BOOKS',\n\t\t'THRILLERS BOOKS',\n\t\t'NONFICTION BOOKS',\n\t\t'FANTASY BOOKS',\n\t\t'ROMANCE BOOKS',\n\t\t'SCIENCE FICTION BOOKS',\n\t\t\"WOMEN'S FICTION BOOKS\",\n\t];\n\n\tconst popularBooksIds = useMemo(\n\t\t() => [\n\t\t\t'JdE1oE1zeZYOVU8PYyy7',\n\t\t\t'Fctu87S2XLy2RA5Wcr6H',\n\t\t\t'0Ahlt0lmj06b0rKaD7qJ',\n\t\t\t'24P8kxLmS4LmtcDSPkvl',\n\t\t\t'4uhaVEO0ZZvDCvT8FgEM',\n\t\t\t'AsA2JWdwSzRg6vTJ7adi',\n\t\t],\n\t\t[]\n\t);\n\tconst classicsBooksIds = useMemo(\n\t\t() => [\n\t\t\t'6490z4ij4qsGAIBoeBMK',\n\t\t\t'Djx2P7Egc9cJgfdwwF37',\n\t\t\t'H1xRvYEIDyk54H68QssS',\n\t\t\t'HfkmwYPOfQ4MtpLnLNlq',\n\t\t],\n\t\t[]\n\t);\n\tconst popularFictionBooksIds = useMemo(\n\t\t() => ['JQBwpf6G3ND5pKXDYNlx', 'JdE1oE1zeZYOVU8PYyy7'],\n\t\t[]\n\t);\n\tconst thrillersBooksIds = useMemo(\n\t\t() => [\n\t\t\t'VYSVKcKAKYwDq2PhV2cJ',\n\t\t\t'VncumXL1QTrVaGdhvM4O',\n\t\t\t'aJSCUT07kmUQqUlTegRv',\n\t\t],\n\t\t[]\n\t);\n\tconst nonFictionBooksIds = useMemo(\n\t\t() => [\n\t\t\t'aJy9OMGHhUQ8GPZGRn6C',\n\t\t\t'bzRUzMqsdgjKD75Jxosn',\n\t\t\t'dDSxgc4Af87DFYEsiTxq',\n\t\t\t'e7wTYJTr4dSkJLaEXWEO',\n\t\t],\n\t\t[]\n\t);\n\tconst fantasyBooksIds = useMemo(\n\t\t() => [\n\t\t\t'hx124Fx58u2xRqWUaxlv',\n\t\t\t'ljpqnZKAKgZSjbmrO6sF',\n\t\t\t'nSpJeOPwkgFKg45uc164',\n\t\t\t'oJ2euLQwJOn944VBu1tl',\n\t\t],\n\t\t[]\n\t);\n\tconst romanceBooksIds = useMemo(\n\t\t() => ['pe83n32WlbIWRmYwyLiD', 'pttjrCHmNS16f2lhOU9e'],\n\t\t[]\n\t);\n\tconst scienceFictionBooksIds = useMemo(\n\t\t() => [\n\t\t\t'qNejPAmYF2xlTdbnhH41',\n\t\t\t'qUe7SD2Jba5MbybZNUj5',\n\t\t\t'sBVe4XtgS9K0HldzfRBN',\n\t\t],\n\t\t[]\n\t);\n\tconst womensFictionBooksIds = useMemo(\n\t\t() => [\n\t\t\t't8AF9o4IHodXuusb62ws',\n\t\t\t'uBI55trKgMJpRohAtxry',\n\t\t\t'unRbEhtsd1vcMxpSvDKI',\n\t\t\t'zCikj4mmQyZlyVNyP7cF',\n\t\t],\n\t\t[]\n\t);\n\n\tuseEffect(() => {\n\t\tconst getBooksInfo = async () => {\n\t\t\tsetBooksInfo(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getBooksInfoForBookCompatibilityTestPage(\n\t\t\t\t\t\tpopularBooksIds,\n\t\t\t\t\t\tclassicsBooksIds,\n\t\t\t\t\t\tpopularFictionBooksIds,\n\t\t\t\t\t\tthrillersBooksIds,\n\t\t\t\t\t\tnonFictionBooksIds,\n\t\t\t\t\t\tfantasyBooksIds,\n\t\t\t\t\t\tromanceBooksIds,\n\t\t\t\t\t\tscienceFictionBooksIds,\n\t\t\t\t\t\twomensFictionBooksIds\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tif (user.userUID === null || user.userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t});\n\t\t} else {\n\t\t\tgetBooksInfo();\n\t\t}\n\t}, [\n\t\tpopularBooksIds,\n\t\tclassicsBooksIds,\n\t\tpopularFictionBooksIds,\n\t\tthrillersBooksIds,\n\t\tnonFictionBooksIds,\n\t\tfantasyBooksIds,\n\t\tromanceBooksIds,\n\t\tscienceFictionBooksIds,\n\t\twomensFictionBooksIds,\n\t\tuser.userUID,\n\t\thistory,\n\t]);\n\n\tconst moveBookToWantToReadShelf = async (id) => {\n\t\tawait trackPromise(\n\t\t\tFirebase.addBookToShelf(user.userUID, id, 'to-read', history)\n\t\t);\n\t\tsetWantToReadBooks((previous) => previous.concat(id));\n\t};\n\n\tconst removeBookFromWantToReadShelf = async (id) => {\n\t\tawait trackPromise(Firebase.removeBookFromShelf(user.userUID, id));\n\t\tsetWantToReadBooks((previous) =>\n\t\t\tprevious.filter((bookId) => bookId !== id)\n\t\t);\n\t};\n\n\tconst rateBook = async (id, rating) => {\n\t\tawait trackPromise(Firebase.rateBook(user.userUID, id, rating, history));\n\t\tsetRatedBooks((previous) =>\n\t\t\tprevious.concat({\n\t\t\t\tid,\n\t\t\t\trating,\n\t\t\t})\n\t\t);\n\t};\n\n\tconst topSection = (\n\t\t<div className=\"edit-compatibility-test-answers-page-main-content-top-section\">\n\t\t\t<h1>Book Compatibility Test</h1>\n\t\t\t<span>Rate the books below and then click to get your report.</span>\n\t\t\t<a\n\t\t\t\thref={\n\t\t\t\t\tuserId !== null\n\t\t\t\t\t\t? Firebase.pageGenerator.generateBookCompatibilityTestPage(userId)\n\t\t\t\t\t\t: Firebase.pageGenerator.generateInviteFriendsPage()\n\t\t\t\t}\n\t\t\t>\n\t\t\t\tCompare Results\n\t\t\t</a>\n\t\t</div>\n\t);\n\n\tconst categoriesSection = loaded ? (\n\t\t<div className=\"edit-compatibility-test-answers-page-main-content-categories-section\">\n\t\t\t<div className=\"categories\">\n\t\t\t\t{Object.keys(booksInfo).map((key, index) => {\n\t\t\t\t\tconst generateBookRow = (startingIndex) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"book-row\">\n\t\t\t\t\t\t\t\t{booksInfo[key]\n\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t(_book, i) => i >= startingIndex && i < startingIndex + 5\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.map((book, i) => {\n\t\t\t\t\t\t\t\t\t\tconst ratedBook = ratedBooks.filter(\n\t\t\t\t\t\t\t\t\t\t\t(ratedBook) => ratedBook.id === book.id\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"book-card\" key={i}>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined ? book.cover : noCoverUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<WantToReadButton\n\t\t\t\t\t\t\t\t\t\t\t\t\twantToRead={wantToReadBooks.includes(book.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\taddToShelf={() => moveBookToWantToReadShelf(book.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tremoveFromShelf={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tremoveBookFromWantToReadShelf(book.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<InteractiveStarRating\n\t\t\t\t\t\t\t\t\t\t\t\t\trating={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tratedBook.length > 0 ? ratedBook[0].rating : 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsaveRating={(rating) => rateBook(book.id, rating)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"category-books-list\" key={index}>\n\t\t\t\t\t\t\t<span className=\"section-title\">{categoryTitles[index]}</span>\n\t\t\t\t\t\t\t{generateBookRow(0)}\n\t\t\t\t\t\t\t{booksInfo[key].length > 5 ? (\n\t\t\t\t\t\t\t\t<div className=\"divider\"></div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{booksInfo[key].length > 5 ? generateBookRow(5) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\thref={\n\t\t\t\t\tuserId !== null\n\t\t\t\t\t\t? Firebase.pageGenerator.generateBookCompatibilityTestPage(userId)\n\t\t\t\t\t\t: Firebase.pageGenerator.generateInviteFriendsPage()\n\t\t\t\t}\n\t\t\t>\n\t\t\t\tCompare Results\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"edit-compatibility-test-answers-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"edit-compatibility-test-answers-page-main-section\">\n\t\t\t\t{topSection}\n\t\t\t\t{categoriesSection}\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default EditCompatibilityTestAnswersPage;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport Firebase from '../../Firebase';\nimport '../styles/User/UserAddAsFriendPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst UserAddAsFriendPage = ({ match }) => {\n\tconst history = useHistory();\n\tconst {\n\t\tparams: { newFriendId },\n\t} = match;\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [userInfo, setUserInfo] = useState({});\n\tconst [isShowingMessageArea, setIsShowingMessageArea] = useState(false);\n\tconst [message, setMessage] = useState('');\n\tconst [isRequestSent, setIsRequestSent] = useState(false);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst getUserInfo = async () => {\n\t\t\tsetUserInfo(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getUserInfoForAddAsFriendPage(\n\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\tnewFriendId,\n\t\t\t\t\t\thistory\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tif (user.userUID === newFriendId) {\n\t\t\thistory.push({\n\t\t\t\tpathname: Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tnewFriendId,\n\t\t\t\t\tuser.userInfo.firstName\n\t\t\t\t),\n\t\t\t\tstate: \"You can't be friends with yourself.\",\n\t\t\t});\n\t\t} else if (user.userUID === null || user.userUID === undefined) {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/user/sign_in',\n\t\t\t});\n\t\t} else {\n\t\t\tgetUserInfo();\n\t\t}\n\t}, [user.userUID, newFriendId, user.userInfo.firstName, history]);\n\n\tconst pageHeader = loaded ? (\n\t\t<h1 className=\"user-add-as-friend-page-header\">\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tnewFriendId,\n\t\t\t\t\tuserInfo.firstName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{userInfo.firstName}\n\t\t\t</a>\n\t\t\t<span>{' > Add as a Friend'}</span>\n\t\t</h1>\n\t) : null;\n\n\tconst requestSentArea = loaded ? (\n\t\t<div className=\"user-add-as-friend-page-request-sent-area\">\n\t\t\t<span>{`A friend request has been sent to ${userInfo.firstName}.`}</span>\n\t\t\t<span>\n\t\t\t\tAfter confirmation has been made, you will be notified by email.\n\t\t\t</span>\n\t\t\t<a\n\t\t\t\tclassName=\"ok-a\"\n\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tnewFriendId,\n\t\t\t\t\tuserInfo.firstName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\tOk\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst explanationSection = loaded ? (\n\t\t<div className=\"user-add-as-friend-page-explanation-section\">\n\t\t\t<span className=\"black-span\">\n\t\t\t\tPlease only add people who you are genuinely interested in being friends\n\t\t\t\twith!\n\t\t\t</span>\n\t\t\t<span className=\"black-span\">{`We will ask ${userInfo.firstName} to confirm you as a friend before the connection is made.`}</span>\n\t\t\t<button\n\t\t\t\tclassName=\"add-message-button\"\n\t\t\t\tonClick={(_e) => setIsShowingMessageArea((previous) => !previous)}\n\t\t\t>\n\t\t\t\tadd a message (optional) {' '}\n\t\t\t</button>\n\t\t\t<textarea\n\t\t\t\tclassName={isShowingMessageArea ? 'message' : 'message hidden'}\n\t\t\t\tvalue={message}\n\t\t\t\tonChange={(e) => setMessage(e.target.value)}\n\t\t\t></textarea>\n\t\t\t<span className=\"grey-span\">{`Submitting a friend request will cause you to start following ${userInfo.firstName} right away. You will see ${userInfo.pronouns} reviews and status updates on your home page, even before they accept your friend request.`}</span>\n\t\t</div>\n\t) : null;\n\n\tconst bottomSection = loaded ? (\n\t\t<div className=\"user-add-as-friend-page-bottom-section\">\n\t\t\t<button\n\t\t\t\tclassName=\"add-friend-button\"\n\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\tawait Firebase.sendFriendRequest(\n\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\tnewFriendId,\n\t\t\t\t\t\tmessage.length > 0 ? message : undefined\n\t\t\t\t\t);\n\t\t\t\t\tsetIsRequestSent(true);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tAdd as a Friend\n\t\t\t</button>\n\t\t\t<a\n\t\t\t\tclassName=\"cancel-a\"\n\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\tnewFriendId,\n\t\t\t\t\tuserInfo.firstName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\tcancel\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"user-add-as-friend-page-main-content\">\n\t\t\t{pageHeader}\n\t\t\t{!isRequestSent ? explanationSection : requestSentArea}\n\t\t\t{!isRequestSent ? bottomSection : null}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"user-add-as-friend-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default UserAddAsFriendPage;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/User/AddToShelvesPopup.css';\n\nconst AddToShelvesPopup = (props) => {\n\tconst [selectedShelves, setSelectedShelves] = useState(\n\t\tprops.shelvesBookBelongsTo\n\t);\n\tconst [searchShelfInput, setSearchShelfInput] = useState('');\n\tconst [isAddShelfSectionVisible, setIsAddShelfSectionVisible] = useState(\n\t\tfalse\n\t);\n\tconst [addShelfInput, setAddShelfInput] = useState('');\n\n\tuseEffect(() => {\n\t\tsetSelectedShelves(props.shelvesBookBelongsTo);\n\t}, [props.shelvesBookBelongsTo]);\n\n\treturn (\n\t\t<div className=\"user-bookshelf-page-add-to-shelves-popup\">\n\t\t\t<div className=\"popup-top-section\">\n\t\t\t\t<div className=\"popup-topmost-section\">\n\t\t\t\t\t<button className=\"choose-shelves-button\">choose shelves...</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"close-popup-button\"\n\t\t\t\t\t\tonClick={(_e) => props.close()}\n\t\t\t\t\t>\n\t\t\t\t\t\tclose\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"search-shelf-input\"\n\t\t\t\t\tvalue={searchShelfInput}\n\t\t\t\t\tonChange={(e) => setSearchShelfInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t</div>\n\t\t\t<div className=\"popup-middle-section\">\n\t\t\t\t{props.shelves\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(shelf) =>\n\t\t\t\t\t\t\tsearchShelfInput.length === 0 ||\n\t\t\t\t\t\t\tshelf.includes(searchShelfInput.toLowerCase())\n\t\t\t\t\t)\n\t\t\t\t\t.map((shelf, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tshelf === 'read'\n\t\t\t\t\t\t\t\t\t\t? selectedShelves.includes(shelf)\n\t\t\t\t\t\t\t\t\t\t\t? 'marked selected popup-shelf'\n\t\t\t\t\t\t\t\t\t\t\t: 'marked popup-shelf'\n\t\t\t\t\t\t\t\t\t\t: selectedShelves.includes(shelf)\n\t\t\t\t\t\t\t\t\t\t? 'selected popup-shelf'\n\t\t\t\t\t\t\t\t\t\t: 'popup-shelf'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (!selectedShelves.includes(shelf)) {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t['read', 'to-read', 'currently-reading'].includes(shelf)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tif (!selectedShelves.includes(shelf)) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedShelves((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tprevious\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(s) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t![\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'to-read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'currently-reading',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(s)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.concat(shelf)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tawait props.changeBookStatus(shelf);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else if (!selectedShelves.includes(shelf)) {\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedShelves((previous) => previous.concat(shelf));\n\t\t\t\t\t\t\t\t\t\t\tawait props.addBookToShelf(shelf);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>{shelf}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<div className=\"popup-bottom-section\">\n\t\t\t\t{!isAddShelfSectionVisible || searchShelfInput.length > 0 ? (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"add-new-shelf-button\"\n\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsearchShelfInput.length === 0 ||\n\t\t\t\t\t\t\t\tprops.shelves.includes(searchShelfInput)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetIsAddShelfSectionVisible(true);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tawait props.addBookToShelf(searchShelfInput);\n\t\t\t\t\t\t\t\tsetSearchShelfInput('');\n\t\t\t\t\t\t\t\tsetIsAddShelfSectionVisible(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{searchShelfInput.length === 0 ||\n\t\t\t\t\t\tprops.shelves.includes(searchShelfInput) ? (\n\t\t\t\t\t\t\t<span className=\"add-new-shelf-span\">Add new shelf</span>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{`Add `}\n\t\t\t\t\t\t\t\t<b>{`\"${searchShelfInput}\"`}</b>\n\t\t\t\t\t\t\t\t{` shelf`}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"add-new-shelf-container\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={addShelfInput}\n\t\t\t\t\t\t\tonChange={(e) => setAddShelfInput(e.target.value)}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"add-new-shelf-with-input-button\"\n\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\tawait props.addBookToShelf(addShelfInput);\n\t\t\t\t\t\t\t\tsetAddShelfInput('');\n\t\t\t\t\t\t\t\tsetIsAddShelfSectionVisible(false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nAddToShelvesPopup.propTypes = {\n\tshelves: PropTypes.arrayOf(PropTypes.string),\n\tshelvesBookBelongsTo: PropTypes.arrayOf(PropTypes.string),\n\taddBookToShelf: PropTypes.func,\n\tchangeBookStatus: PropTypes.func,\n\tclose: PropTypes.func,\n};\n\nexport default AddToShelvesPopup;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/User/UserReviewSection.css';\n\nconst UserReviewSection = (props) => {\n\tconst [isExpanded, setIsExpanded] = useState(false);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisExpanded\n\t\t\t\t\t? 'user-bookshelf-page-user-review-section showing-all'\n\t\t\t\t\t: 'user-bookshelf-page-user-review-section'\n\t\t\t}\n\t\t>\n\t\t\t<span className={props.reviewText === undefined ? 'no-review-span' : ''}>\n\t\t\t\t{props.reviewText !== undefined\n\t\t\t\t\t? props.reviewText.slice(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tisExpanded ? props.reviewText.length : 150\n\t\t\t\t\t  )\n\t\t\t\t\t: 'None'}\n\t\t\t</span>\n\t\t\t{props.reviewText !== undefined && props.reviewText.length > 150 ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"review-more-less-button\"\n\t\t\t\t\tonClick={(_e) => setIsExpanded((previous) => !previous)}\n\t\t\t\t>\n\t\t\t\t\t{isExpanded ? '(less)' : '...more'}\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nUserReviewSection.propTypes = {\n\treviewText: PropTypes.string,\n};\n\nexport default UserReviewSection;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/Global/TopAlertMessage.css';\n\nconst TopAlertMessage = (props) => {\n\tconst [isVisible, setIsVisible] = useState(true);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`top-message-div ${props.color} ${!isVisible ? 'hidden' : ''}`}\n\t\t>\n\t\t\t<span>{props.content}</span>\n\t\t\t<button\n\t\t\t\tclassName=\"close-button\"\n\t\t\t\tonClick={(_e) => setIsVisible(false)}\n\t\t\t></button>\n\t\t</div>\n\t);\n};\n\nTopAlertMessage.propTypes = {\n\tcolor: PropTypes.string,\n\tcontent: PropTypes.string,\n};\n\nexport default TopAlertMessage;\n","import React, { useState } from 'react';\nimport { format } from 'date-fns';\nimport PropTypes from 'prop-types';\nimport '../styles/User/EditableBookshelfDateField.css';\n\nconst EditableBookshelfDateField = (props) => {\n\tconst [year, setYear] = useState(\n\t\tprops.initialDate !== undefined\n\t\t\t? props.initialDate.getFullYear().toString()\n\t\t\t: ''\n\t);\n\tconst [month, setMonth] = useState(\n\t\tprops.initialDate !== undefined\n\t\t\t? props.initialDate.getMonth().toString()\n\t\t\t: ''\n\t);\n\tconst [day, setDay] = useState(\n\t\tprops.initialDate !== undefined\n\t\t\t? props.initialDate.getDate().toString()\n\t\t\t: ''\n\t);\n\tconst [isPopupVisible, setIsPopupVisible] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tconst setDateToToday = () => {\n\t\tsetYear(new Date().getFullYear().toString());\n\t\tsetMonth(new Date().getMonth().toString());\n\t\tsetDay(new Date().getDate().toString());\n\t};\n\n\treturn (\n\t\t<div className=\"editable-bookshelf-date-field\">\n\t\t\t<span className={props.initialDate === undefined ? 'no-date-span' : ''}>\n\t\t\t\t{props.initialDate !== undefined\n\t\t\t\t\t? format(props.initialDate, 'MMM dd, yyyy')\n\t\t\t\t\t: 'not set'}\n\t\t\t</span>\n\t\t\t<button\n\t\t\t\tclassName=\"edit-button\"\n\t\t\t\tonClick={(_e) => setIsPopupVisible((previous) => !previous)}\n\t\t\t>\n\t\t\t\t[edit]\n\t\t\t</button>\n\t\t\t{!isLoading ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tisPopupVisible ? 'set-date-popup' : 'set-date-popup hidden'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"popup-top-section\">\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tclassName=\"year-select\"\n\t\t\t\t\t\t\tvalue={year}\n\t\t\t\t\t\t\tonChange={(e) => setYear(e.target.value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t\t{Array(101)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((_value, index) =>\n\t\t\t\t\t\t\t\t\t(new Date().getFullYear() - 100 + (100 - index)).toString()\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.map((year, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<option value={year} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t{year}\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tclassName=\"month-select\"\n\t\t\t\t\t\t\tvalue={month}\n\t\t\t\t\t\t\tonChange={(e) => setMonth(e.target.value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t\t<option value=\"0\">January</option>\n\t\t\t\t\t\t\t<option value=\"1\">February</option>\n\t\t\t\t\t\t\t<option value=\"2\">March</option>\n\t\t\t\t\t\t\t<option value=\"3\">April</option>\n\t\t\t\t\t\t\t<option value=\"4\">May</option>\n\t\t\t\t\t\t\t<option value=\"5\">June</option>\n\t\t\t\t\t\t\t<option value=\"6\">July</option>\n\t\t\t\t\t\t\t<option value=\"7\">August</option>\n\t\t\t\t\t\t\t<option value=\"8\">September</option>\n\t\t\t\t\t\t\t<option value=\"9\">October</option>\n\t\t\t\t\t\t\t<option value=\"10\">November</option>\n\t\t\t\t\t\t\t<option value=\"11\">December</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tclassName=\"day-select\"\n\t\t\t\t\t\t\tvalue={day}\n\t\t\t\t\t\t\tonChange={(e) => setDay(e.target.value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"\"></option>\n\t\t\t\t\t\t\t{Array(31)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((_value, index) => (\n\t\t\t\t\t\t\t\t\t<option key={index} value={(index + 1).toString()}>\n\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"set-to-today-button\"\n\t\t\t\t\t\t\tonClick={(_e) => setDateToToday()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tset to today\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"popup-bottom-section\">\n\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"save-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetIsLoading(true);\n\t\t\t\t\t\t\t\t\tif (year.length > 0 && month.length > 0 && day.length > 0) {\n\t\t\t\t\t\t\t\t\t\tprops.save(\n\t\t\t\t\t\t\t\t\t\t\tnew Date(parseInt(year), parseInt(month), parseInt(day))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => setIsPopupVisible(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tcancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"cancel-button\"\n\t\t\t\t\t\t\tonClick={(_e) => setIsPopupVisible(false)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tclose\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className=\"editable-bookshelf-date-field\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"saving-date-spinner\"\n\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif\"\n\t\t\t\t\t\talt=\"loading\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"saving-span\">saving...</span>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nEditableBookshelfDateField.propTypes = {\n\tinitialDate: PropTypes.objectOf(Date),\n\tsave: PropTypes.func,\n};\n\nexport default EditableBookshelfDateField;\n","import React, { useState, useEffect, useLayoutEffect, useRef } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport InteractiveStarRating from './InteractiveStarRating';\nimport Firebase from '../../Firebase';\nimport '../styles/User/UserBookshelfPage.css';\nimport AddToShelvesPopup from './AddToShelvesPopup';\nimport UserReviewSection from './UserReviewSection';\nimport TopAlertMessage from '../Global/TopAlertMessage';\nimport EditableBookshelfDateField from './EditableBookshelfDateField';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst UserBookshelfPage = ({ match }) => {\n\tconst openAddShelvesPopup = useRef();\n\tconst history = useHistory();\n\tconst {\n\t\tparams: { pageId },\n\t} = match;\n\tconst userId = pageId.split('-')[0];\n\tconst userFirstName =\n\t\tpageId.split('-')[1][0].toUpperCase() + pageId.split('-')[1].slice(1);\n\tconst query = new URLSearchParams(useLocation().search);\n\tconst shelves =\n\t\tquery.get('shelf') !== null && query.get('shelf') !== undefined\n\t\t\t? query.get('shelf').split(',')\n\t\t\t: ['all'];\n\tconst order =\n\t\tquery.get('order') !== null && query.get('order') !== undefined\n\t\t\t? query.get('order') === 'd'\n\t\t\t\t? 'descending'\n\t\t\t\t: 'ascending'\n\t\t\t: 'descending';\n\tconst sort =\n\t\tquery.get('sort') !== null && query.get('sort') !== undefined\n\t\t\t? query.get('sort')\n\t\t\t: 'date-added';\n\tconst perPage =\n\t\tquery.get('per_page') !== null && query.get('per_page') !== undefined\n\t\t\t? query.get('per_page')\n\t\t\t: 20;\n\tconst page =\n\t\tquery.get('page') !== null && query.get('page') !== undefined\n\t\t\t? parseInt(query.get('page'))\n\t\t\t: 1;\n\tconst view =\n\t\tquery.get('view') !== null && query.get('view') !== undefined\n\t\t\t? query.get('view')\n\t\t\t: 'table';\n\tconst searchQuery =\n\t\tquery.get('search_query') !== null &&\n\t\tquery.get('search_query') !== undefined\n\t\t\t? query.get('search_query')\n\t\t\t: '';\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [userInfo, setUserInfo] = useState({});\n\tconst [loggedInUserShelves, setLoggedInUserShelves] = useState([]);\n\n\tconst topMessage = useLocation().state;\n\n\tconst [searchInputText, setSearchInputText] = useState(searchQuery);\n\tconst [isSettingsTabOpen, setIsSettingsTabOpen] = useState(false);\n\tconst [isAuthorColumnVisible, setIsAuthorColumnVisible] = useState(true);\n\tconst [isAvgRatingColumnVisible, setIsAvgRatingColumnVisible] = useState(\n\t\ttrue\n\t);\n\tconst [isCoverColumnVisible, setIsCoverColumnVisible] = useState(true);\n\tconst [isDateAddedColumnVisible, setIsDateAddedColumnVisible] = useState(\n\t\ttrue\n\t);\n\tconst [\n\t\tisDatePublicationColumnVisible,\n\t\tsetIsDatePublicationColumnVisible,\n\t] = useState(false);\n\tconst [\n\t\tisDatePublicationEditionColumnVisible,\n\t\tsetIsDatePublicationEditionColumnVisible,\n\t] = useState(false);\n\tconst [isDateReadColumnVisible, setIsDateReadColumnVisible] = useState(true);\n\tconst [isDateStartedColumnVisible, setIsDateStartedColumnVisible] = useState(\n\t\tfalse\n\t);\n\tconst [isFormatColumnVisible, setIsFormatColumnVisible] = useState(false);\n\tconst [isIsbnColumnVisible, setIsIsbnColumnVisible] = useState(false);\n\tconst [isNumPagesColumnVisible, setIsNumPagesColumnVisible] = useState(false);\n\tconst [isNumRatingsColumnVisible, setIsNumRatingsColumnVisible] = useState(\n\t\tfalse\n\t);\n\tconst [isPositionColumnVisible, setIsPositionColumnVisible] = useState(false);\n\tconst [isRatingColumnVisible, setIsRatingColumnVisible] = useState(true);\n\tconst [isReviewColumnVisible, setIsReviewColumnVisible] = useState(true);\n\tconst [isShelvesColumnVisible, setIsShelvesColumnVisible] = useState(true);\n\tconst [isTitleColumnVisible, setIsTitleColumnVisible] = useState(false);\n\tconst [isSelectingMultipleShelves, setIsSelectingMultipleShelves] = useState(\n\t\tfalse\n\t);\n\tconst [selectedColumnSetButton, setSelectedColumnSetButton] = useState('');\n\tconst [tableSortColumn, setTableSortColumn] = useState(sort);\n\tconst [tableSortOrder, setTableSortOrder] = useState(order);\n\tconst [visibleAddToShelvesPopup, setVisibleAddToShelvesPopup] = useState(\n\t\tnull\n\t);\n\tconst [\n\t\tisShowingLoggedInUserAddShelfArea,\n\t\tsetIsShowingLoggedInUserAddShelfArea,\n\t] = useState(false);\n\tconst [loggedInUserAddShelfInput, setLoggedInUserAddShelfInput] = useState(\n\t\t''\n\t);\n\tconst [batchEditSelectedShelf, setBatchEditSelectedShelf] = useState('read');\n\tconst [isShowingBatchEdit, setIsShowingBatchEdit] = useState(false);\n\tconst [booksChecked, setBooksChecked] = useState([]);\n\tconst [batchEditLoadingButton, setBatchEditLoadingButton] = useState(null);\n\tconst [\n\t\twantToReadBooksPositionInputs,\n\t\tsetWantToReadBooksPositionInputs,\n\t] = useState([]);\n\tconst [\n\t\tsavePositionChangesVisiblePopup,\n\t\tsetSavePositionChangesVisiblePopup,\n\t] = useState(null);\n\tconst [savingPositions, setSavingPositions] = useState(false);\n\n\tconst user =\n\t\tJSON.parse(localStorage.getItem('userState')) !== null\n\t\t\t? JSON.parse(localStorage.getItem('userState'))\n\t\t\t: { userUID: null };\n\n\tuseLayoutEffect(() => {\n\t\tdocument.addEventListener('click', (event) => {\n\t\t\tif (\n\t\t\t\t!(\n\t\t\t\t\topenAddShelvesPopup.current === null ||\n\t\t\t\t\t(openAddShelvesPopup.current !== null &&\n\t\t\t\t\t\topenAddShelvesPopup.current !== undefined &&\n\t\t\t\t\t\topenAddShelvesPopup.current.contains(event.target))\n\t\t\t\t) &&\n\t\t\t\tevent.target.className !== 'add-new-shelf-span'\n\t\t\t) {\n\t\t\t\tsetVisibleAddToShelvesPopup(null);\n\t\t\t}\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst getUsersInfo = async () => {\n\t\t\tconst newUserInfo = await trackPromise(\n\t\t\t\tFirebase.queryUserInfoForUserBookshelfPage(userId, user.userUID)\n\t\t\t);\n\t\t\tsetUserInfo(newUserInfo);\n\t\t\tsetLoggedInUserShelves(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.queryLoggedInUserInfoForUserBookshelfPage(user.userUID)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetWantToReadBooksPositionInputs(\n\t\t\t\tnewUserInfo.shelves\n\t\t\t\t\t.filter((shelf) => shelf.name === 'want-to-read')[0]\n\t\t\t\t\t.books.map((book) => book.position)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tgetUsersInfo();\n\t}, [userId, user.userUID]);\n\n\tconst rateBook = async (bookId, rating) => {\n\t\tif (user.userUID === undefined || user.userUID === null) {\n\t\t\thistory.push('/user/sign_in');\n\t\t} else {\n\t\t\tawait Firebase.rateBook(user.userUID, bookId, rating, history);\n\t\t}\n\t};\n\n\tconst addShelf = async (shelfName) => {\n\t\tif (user.userUID !== undefined && user.userUID !== null) {\n\t\t\tawait Firebase.addNewUserShelf(user.userUID, shelfName, history);\n\t\t\thistory.go(0);\n\t\t}\n\t};\n\n\tconst setAllColumns = (\n\t\tauthor,\n\t\tavgRating,\n\t\tcover,\n\t\tdateAdded,\n\t\tdatePublished,\n\t\tdatePublishedEdition,\n\t\tdateRead,\n\t\tdateStarted,\n\t\tformat,\n\t\tisbn,\n\t\tnumPages,\n\t\tnumRatings,\n\t\tposition,\n\t\trating,\n\t\treview,\n\t\tshelves,\n\t\ttitle\n\t) => {\n\t\tsetIsAuthorColumnVisible(author);\n\t\tsetIsAvgRatingColumnVisible(avgRating);\n\t\tsetIsCoverColumnVisible(cover);\n\t\tsetIsDateAddedColumnVisible(dateAdded);\n\t\tsetIsDatePublicationColumnVisible(datePublished);\n\t\tsetIsDatePublicationEditionColumnVisible(datePublishedEdition);\n\t\tsetIsDateReadColumnVisible(dateRead);\n\t\tsetIsDateStartedColumnVisible(dateStarted);\n\t\tsetIsFormatColumnVisible(format);\n\t\tsetIsIsbnColumnVisible(isbn);\n\t\tsetIsNumPagesColumnVisible(numPages);\n\t\tsetIsNumRatingsColumnVisible(numRatings);\n\t\tsetIsPositionColumnVisible(position);\n\t\tsetIsRatingColumnVisible(rating);\n\t\tsetIsReviewColumnVisible(review);\n\t\tsetIsShelvesColumnVisible(shelves);\n\t\tsetIsTitleColumnVisible(title);\n\t};\n\n\tconst noPictureImageUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png';\n\n\tconst noCoverUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\n\tconst currentUserShelves = loaded\n\t\t? searchQuery.length > 0\n\t\t\t? userInfo.shelves.filter((shelf) => shelf.name === 'all')\n\t\t\t: shelves\n\t\t\t\t\t.map((shelf) => {\n\t\t\t\t\t\treturn userInfo.shelves.filter(\n\t\t\t\t\t\t\t(bookshelf) => bookshelf.name === shelf\n\t\t\t\t\t\t).length > 0\n\t\t\t\t\t\t\t? userInfo.shelves.filter(\n\t\t\t\t\t\t\t\t\t(bookshelf) => bookshelf.name === shelf\n\t\t\t\t\t\t\t  )[0]\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((obj) => obj !== null)\n\t\t: [];\n\n\tconst booksToBeShown =\n\t\tsearchQuery.length > 0\n\t\t\t? currentUserShelves.reduce((previous, current) => {\n\t\t\t\t\tcurrent.books.forEach((book) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!previous.includes(book) &&\n\t\t\t\t\t\t\t(book.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n\t\t\t\t\t\t\t\tbook.authorName\n\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t.includes(searchQuery.toLowerCase()))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tprevious.push(book);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn previous;\n\t\t\t  }, [])\n\t\t\t: currentUserShelves.length > 0\n\t\t\t? currentUserShelves.reduce((previous, current) => {\n\t\t\t\t\tcurrent.books.forEach((shelfBook) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!previous.map((book) => book.id).includes(shelfBook.id) &&\n\t\t\t\t\t\t\tcurrentUserShelves.every((shelf) =>\n\t\t\t\t\t\t\t\tshelf.books.some((b) => b.id === shelfBook.id)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tprevious.push(shelfBook);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn previous;\n\t\t\t  }, [])\n\t\t\t: loaded\n\t\t\t? userInfo.shelves.reduce((previous, current) => {\n\t\t\t\t\tcurrent.books.forEach((shelfBook) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!previous.map((book) => book.id).includes(shelfBook.id) &&\n\t\t\t\t\t\t\t(shelfBook.title\n\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t.includes(searchQuery.toLowerCase()) ||\n\t\t\t\t\t\t\t\tshelfBook.authorName\n\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t.includes(searchQuery.toLowerCase()))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tprevious.push(shelfBook);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn previous;\n\t\t\t  }, [])\n\t\t\t: [];\n\n\tconst alertMessage = <TopAlertMessage color=\"yellow\" content={topMessage} />;\n\n\tconst shelvesTopBarLeftSection = (\n\t\t<div className=\"left-section\">\n\t\t\t<h1>\n\t\t\t\t<a\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tuserId === user.userUID\n\t\t\t\t\t\t\t? 'profile-picture-a hidden'\n\t\t\t\t\t\t\t: 'profile-picture-a'\n\t\t\t\t\t}\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(userId, userFirstName)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tuserInfo.profilePicture !== undefined\n\t\t\t\t\t\t\t\t? userInfo.profilePicture\n\t\t\t\t\t\t\t\t: noPictureImageUrl\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={userFirstName}\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tuserId === user.userUID ? 'first-name-a hidden' : 'first-name-a'\n\t\t\t\t\t}\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(userId, userFirstName)}\n\t\t\t\t>\n\t\t\t\t\t{userFirstName}\n\t\t\t\t</a>\n\t\t\t\t<span\n\t\t\t\t\tclassName={userId === user.userUID ? 'separator hidden' : 'separator'}\n\t\t\t\t>\n\t\t\t\t\t{' > '}\n\t\t\t\t</span>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"books-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t['all']\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{userId === user.userUID ? 'My Books' : 'Books'}\n\t\t\t\t</a>\n\t\t\t\t{currentUserShelves.length > 0 &&\n\t\t\t\tcurrentUserShelves[0].name !== 'all' ? (\n\t\t\t\t\t<span className=\"colon-span\">:</span>\n\t\t\t\t) : null}\n\t\t\t\t{currentUserShelves.length > 0 && currentUserShelves[0].name !== 'all'\n\t\t\t\t\t? currentUserShelves.map((shelf, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"shelf-selection-indicator-wrapper\" key={index}>\n\t\t\t\t\t\t\t\t\t<div className=\"shelf-selection-indicator\">\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"shelf-name-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t{['read', 'want-to-read', 'currently-reading'].includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? shelf.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split('-')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(portion) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tportion[0].toUpperCase() + portion.slice(1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join(' ')\n\t\t\t\t\t\t\t\t\t\t\t\t\t: shelf.name}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"shelf-number-span\">{` (${shelf.books.length}) `}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"deselect-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t\t\t\tshelves.filter((bookshelf) => bookshelf !== shelf.name),\n\t\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\t\t'table',\n\t\t\t\t\t\t\t\t\t\t\t\t20,\n\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/layout/delete-small-d4ae0181ae7f3438c6eb1f1c658e6002.png\"\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"Remove shelf filter\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{index !== currentUserShelves.length - 1 ? (\n\t\t\t\t\t\t\t\t\t\t<span className=\"shelf-separator-span\">{'&'}</span>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t  })\n\t\t\t\t\t: null}\n\t\t\t</h1>\n\t\t</div>\n\t);\n\n\tconst shelvesTopBarRightSection = (\n\t\t<div className=\"right-section\">\n\t\t\t<div className=\"search-bar-container\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"search-bar\"\n\t\t\t\t\tplaceholder=\"Search and add books\"\n\t\t\t\t\tvalue={searchInputText}\n\t\t\t\t\tonChange={(e) => setSearchInputText(e.target.value)}\n\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\tconsole.log(e.keyCode);\n\t\t\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\t\t\thistory.push(\n\t\t\t\t\t\t\t\tFirebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t['all'],\n\t\t\t\t\t\t\t\t\tsearchInputText,\n\t\t\t\t\t\t\t\t\t'table',\n\t\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t></input>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"search-magnifying-glass-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t['all'],\n\t\t\t\t\t\tsearchInputText,\n\t\t\t\t\t\t'table',\n\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\talt=\"search\"\n\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/layout/magnifying_glass-a2d7514d50bcee1a0061f1ece7821750.png\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t{userId !== user.userUID ? (\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"compare-books-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserCompareBooksPage(userId)}\n\t\t\t\t>\n\t\t\t\t\tCompare Books\n\t\t\t\t</a>\n\t\t\t) : null}\n\t\t\t{userId === user.userUID ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tisShowingBatchEdit\n\t\t\t\t\t\t\t? 'batch-edit-toggle-button toggled'\n\t\t\t\t\t\t\t: 'batch-edit-toggle-button'\n\t\t\t\t\t}\n\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\tsetIsSettingsTabOpen(false);\n\t\t\t\t\t\tsetIsShowingBatchEdit((previous) => !previous);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tBatch Edit\n\t\t\t\t</button>\n\t\t\t) : null}\n\t\t\t<button\n\t\t\t\tclassName={\n\t\t\t\t\tisSettingsTabOpen\n\t\t\t\t\t\t? 'settings-toggle-button toggled'\n\t\t\t\t\t\t: 'settings-toggle-button'\n\t\t\t\t}\n\t\t\t\tonClick={(_e) => {\n\t\t\t\t\tsetIsShowingBatchEdit(false);\n\t\t\t\t\tsetIsSettingsTabOpen((previous) => !previous);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tSettings\n\t\t\t</button>\n\t\t\t<span className=\"separator\">|</span>\n\t\t\t<a\n\t\t\t\tclassName=\"view-type-a\"\n\t\t\t\thref={\n\t\t\t\t\tsearchQuery !== ''\n\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t['all'],\n\t\t\t\t\t\t\t\tsearchQuery,\n\t\t\t\t\t\t\t\t'table',\n\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\tshelves,\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t'table',\n\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t  )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tonMouseOver={(e) => {\n\t\t\t\t\t\te.target.src =\n\t\t\t\t\t\t\t'https://s.gr-assets.com/assets/layout/list_selected.png';\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseOut={(e) => {\n\t\t\t\t\t\tif (view === 'cover') {\n\t\t\t\t\t\t\te.target.src =\n\t\t\t\t\t\t\t\t'https://s.gr-assets.com/assets/layout/list-fe412c89a6a612c841b5b58681660b82.png';\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\talt=\"Table View\"\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tview === 'table'\n\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/layout/list_selected.png'\n\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/layout/list-fe412c89a6a612c841b5b58681660b82.png'\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\tclassName=\"view-type-a\"\n\t\t\t\thref={\n\t\t\t\t\tsearchQuery !== ''\n\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t['all'],\n\t\t\t\t\t\t\t\tsearchQuery,\n\t\t\t\t\t\t\t\t'cover',\n\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\tshelves,\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t'cover',\n\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t  )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tonMouseOver={(e) => {\n\t\t\t\t\t\te.target.src =\n\t\t\t\t\t\t\t'https://s.gr-assets.com/assets/layout/grid_selected.png';\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseOut={(e) => {\n\t\t\t\t\t\tif (view === 'table') {\n\t\t\t\t\t\t\te.target.src =\n\t\t\t\t\t\t\t\t'https://s.gr-assets.com/assets/layout/grid-2c030bffe1065f73ddca41540e8a267d.png';\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\talt=\"Cover View\"\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tview === 'cover'\n\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/layout/grid_selected.png'\n\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/layout/grid-2c030bffe1065f73ddca41540e8a267d.png'\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</a>\n\t\t</div>\n\t);\n\n\tconst shelvesTopBar = loaded ? (\n\t\t<div className=\"user-bookshelf-page-shelves-top-bar\">\n\t\t\t{shelvesTopBarLeftSection}\n\t\t\t{shelvesTopBarRightSection}\n\t\t</div>\n\t) : null;\n\n\tconst yourReadingActivitySession =\n\t\tuserId === user.userUID ? (\n\t\t\t<div className=\"your-reading-activity-section\">\n\t\t\t\t<span>\n\t\t\t\t\t<b>Your reading activity</b>\n\t\t\t\t</span>\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\t\tnew Date().getFullYear(),\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tuserFirstName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tYear in Books\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst addBooksSection =\n\t\tuserId === user.userUID ? (\n\t\t\t<div className=\"add-books-section\">\n\t\t\t\t<span>\n\t\t\t\t\t<b>Add books</b>\n\t\t\t\t</span>\n\t\t\t\t<a href={Firebase.pageGenerator.generateRecommendationsPage()}>\n\t\t\t\t\tRecommendations\n\t\t\t\t</a>\n\t\t\t\t<a href={Firebase.pageGenerator.generateExplorePage()}>Explore</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst addShelfInputArea = isShowingLoggedInUserAddShelfArea ? (\n\t\t<div className=\"logged-in-user-add-shelf-input-area\">\n\t\t\t<label htmlFor=\"logged-in-user-add-shelf-input\">Add a Shelf:</label>\n\t\t\t<div className=\"input-and-button\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={loggedInUserAddShelfInput}\n\t\t\t\t\tonChange={(e) => setLoggedInUserAddShelfInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"add-button\"\n\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\tif (loggedInUserAddShelfInput.length > 0) {\n\t\t\t\t\t\t\taddShelf(loggedInUserAddShelfInput);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tadd\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t) : (\n\t\t<button\n\t\t\tclassName=\"logged-in-user-add-shelf-button\"\n\t\t\tonClick={(_e) => setIsShowingLoggedInUserAddShelfArea(true)}\n\t\t>\n\t\t\tAdd shelf\n\t\t</button>\n\t);\n\n\tconst addShelfArea = userId === user.userUID ? addShelfInputArea : null;\n\n\tconst bookshelfNavigationSection = loaded ? (\n\t\t<div className=\"user-bookshelf-page-bookshelf-navigation-section\">\n\t\t\t<div className=\"general-shelves-section\">\n\t\t\t\t<span className=\"title-span\">\n\t\t\t\t\t<b>Bookshelves</b>\n\t\t\t\t</span>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tshelves.length === 0 || shelves[0] === 'all'\n\t\t\t\t\t\t\t\t\t? 'general-shelf-a selected-shelf'\n\t\t\t\t\t\t\t\t\t: 'general-shelf-a'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t['all'],\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>{`All (${\n\t\t\t\t\t\t\tuserInfo.shelves.filter((shelf) => shelf.name === 'all')[0].books\n\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t})`}</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tshelves.includes('read')\n\t\t\t\t\t\t\t\t\t? 'general-shelf-a selected-shelf'\n\t\t\t\t\t\t\t\t\t: 'general-shelf-a'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t['read'],\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>{`Read (${\n\t\t\t\t\t\t\tuserInfo.shelves.filter((shelf) => shelf.name === 'read')[0].books\n\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t})`}</a>\n\t\t\t\t\t\t{isSelectingMultipleShelves ? (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"add-shelf-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t!shelves.includes('read')\n\t\t\t\t\t\t\t\t\t\t? shelves.concat('read')\n\t\t\t\t\t\t\t\t\t\t: shelves.filter((shelf) => shelf !== 'read'),\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!shelves.includes('read') ? '+' : ''}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tshelves.includes('want-to-read')\n\t\t\t\t\t\t\t\t\t? 'general-shelf-a selected-shelf'\n\t\t\t\t\t\t\t\t\t: 'general-shelf-a'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t['want-to-read'],\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>{`Want To Read (${\n\t\t\t\t\t\t\tuserInfo.shelves.filter(\n\t\t\t\t\t\t\t\t(shelf) => shelf.name === 'want-to-read'\n\t\t\t\t\t\t\t)[0].books.length\n\t\t\t\t\t\t})`}</a>\n\t\t\t\t\t\t{isSelectingMultipleShelves ? (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"add-shelf-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t!shelves.includes('want-to-read')\n\t\t\t\t\t\t\t\t\t\t? shelves.concat('want-to-read')\n\t\t\t\t\t\t\t\t\t\t: shelves.filter((shelf) => shelf !== 'want-to-read'),\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!shelves.includes('want-to-read') ? '+' : ''}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div className=\"shelf-group-separator\"></div>\n\t\t\t<div className=\"other-shelves-section\">\n\t\t\t\t<ul>\n\t\t\t\t\t{userInfo.shelves\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(shelf) =>\n\t\t\t\t\t\t\t\t!['read', 'want-to-read', 'currently-reading', 'all'].includes(\n\t\t\t\t\t\t\t\t\tshelf.name\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((shelf, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tshelves.includes(shelf.name)\n\t\t\t\t\t\t\t\t\t\t\t\t? 'general-shelf-a selected-shelf'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'general-shelf-a'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t\t\t[shelf.name],\n\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>{`${shelf.name} (${shelf.books.length})`}</a>\n\t\t\t\t\t\t\t\t\t{isSelectingMultipleShelves ? (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"add-shelf-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t\t\t\t!shelves.includes(shelf.name)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? shelves.concat(shelf.name)\n\t\t\t\t\t\t\t\t\t\t\t\t\t: shelves.filter((shelf) => shelf !== shelf.name),\n\t\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{!shelves.includes(shelf.name) ? '+' : ''}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t\t{currentUserShelves.length > 0 &&\n\t\t\t\tcurrentUserShelves[0].name !== 'all' ? (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"select-multiple-shelves-button\"\n\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\tsetIsSelectingMultipleShelves((previous) => !previous)\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\tselect multiple\n\t\t\t\t\t</button>\n\t\t\t\t) : null}\n\t\t\t\t{addShelfArea}\n\t\t\t</div>\n\t\t\t{userInfo.shelves.filter(\n\t\t\t\t(shelf) =>\n\t\t\t\t\t!['read', 'want-to-read', 'currently-reading', 'all'].includes(\n\t\t\t\t\t\tshelf.name\n\t\t\t\t\t)\n\t\t\t).length > 0 ? (\n\t\t\t\t<div className=\"shelf-group-separator\"></div>\n\t\t\t) : null}\n\t\t\t{yourReadingActivitySession}\n\t\t\t{addBooksSection}\n\t\t</div>\n\t) : null;\n\n\tconst batchEditTab = loaded ? (\n\t\t<div className=\"user-bookshelf-page-batch-edit-tab\">\n\t\t\t<div className=\"top-section\">\n\t\t\t\t<label htmlFor=\"batch-edit-shelf-select\">Shelf:</label>\n\t\t\t\t<select\n\t\t\t\t\tclassName=\"batch-edit-shelf-select\"\n\t\t\t\t\tvalue={batchEditSelectedShelf}\n\t\t\t\t\tonChange={(e) => setBatchEditSelectedShelf(e.target.value)}\n\t\t\t\t>\n\t\t\t\t\t{userInfo.shelves\n\t\t\t\t\t\t.filter((shelf) => shelf.name !== 'all')\n\t\t\t\t\t\t.map((shelf) =>\n\t\t\t\t\t\t\tshelf.name === 'want-to-read' ? 'to-read' : shelf.name\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((shelfName, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<option key={index} value={shelfName}>\n\t\t\t\t\t\t\t\t\t{shelfName}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t\t<div className=\"add-remove-books-buttons\">\n\t\t\t\t\t{batchEditLoadingButton !== 'add' ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"add-books-to-this-shelf-button\"\n\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\tsetBatchEditLoadingButton('add');\n\t\t\t\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\t\t\t\tbooksChecked.map(async (index) => {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t['to-read', 'currently-reading', 'read'].includes(\n\t\t\t\t\t\t\t\t\t\t\t\tbatchEditSelectedShelf\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToShelf(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tbooksToBeShown[index].id,\n\t\t\t\t\t\t\t\t\t\t\t\tbatchEditSelectedShelf,\n\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\t\tshelves: previous.shelves.map((shelf) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name === batchEditSelectedShelf ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelf.name === 'want-to-read' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbatchEditSelectedShelf === 'to-read')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...shelf,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks: shelf.books.concat(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooksToBeShown[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'want-to-read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'read',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'currently-reading',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(shelf.name)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...shelf,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks: shelf.books.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(book) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rootId !== booksToBeShown[index].rootId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn shelf;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tbooksToBeShown[index].rootId,\n\t\t\t\t\t\t\t\t\t\t\t\tbatchEditSelectedShelf,\n\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\t\tshelves: previous.shelves.map((shelf) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (shelf.name === batchEditSelectedShelf) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...shelf,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks: shelf.books.concat(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooksToBeShown[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn shelf;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsetBatchEditLoadingButton(null);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tadd books to this shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif\"\n\t\t\t\t\t\t\talt=\"loading\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<span className=\"separator\">|</span>\n\t\t\t\t\t{batchEditLoadingButton !== 'remove' ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"remove-books-from-this-shelf-button\"\n\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\tsetBatchEditLoadingButton('remove');\n\t\t\t\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\t\t\t\tbooksChecked.map(async (index) => {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t['to-read', 'currently-reading', 'read'].includes(\n\t\t\t\t\t\t\t\t\t\t\t\tbatchEditSelectedShelf\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t\t\t\t\t\t`${batchEditSelectedShelf} is an exclusive shelf. You cannot remove a book from its exclusive shelf, but you can move it to a different one, such as to-read.`\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tawait Firebase.removeBookFromUserShelf(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tbooksToBeShown[index].rootId,\n\t\t\t\t\t\t\t\t\t\t\t\tbatchEditSelectedShelf,\n\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\t\t\tshelves: previous.shelves.map((shelf) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (shelf.name === batchEditSelectedShelf) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...shelf,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks: shelf.books.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(book) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rootId !== booksToBeShown[index].rootId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn shelf;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsetBatchEditLoadingButton(null);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tremove books from this shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif\"\n\t\t\t\t\t\t\talt=\"loading\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<span className=\"separator\">|</span>\n\t\t\t\t\t{batchEditLoadingButton !== 'remove-all' ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"remove-books-from-all-shelves-button\"\n\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\tsetBatchEditLoadingButton('remove-all');\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\twindow.confirm(\n\t\t\t\t\t\t\t\t\t\t'This will completely remove the selected books from your shelves.'\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tconst booksToBeRemovedRootIds = booksChecked.map(\n\t\t\t\t\t\t\t\t\t\t(index) => booksToBeShown[index].rootId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\t\t\t\t\tuserInfo.shelves.map(async (shelf) => {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t!['to-read', 'currently-reading', 'read'].includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.books\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((book) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooksChecked.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(index) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooksToBeShown[index].rootId === book.rootId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(async (book) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.removeBookFromShelf(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.books\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((book) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooksChecked.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(index) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooksToBeShown[index].rootId === book.rootId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(async (book) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.removeBookFromUserShelf(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rootId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetUserInfo((previous) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t...previous,\n\t\t\t\t\t\t\t\t\t\t\tshelves: previous.shelves.map((shelf) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...shelf,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbooks: shelf.books.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(book) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!booksToBeRemovedRootIds.includes(book.rootId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetBatchEditLoadingButton(null);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tremove books from all shelves\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif\"\n\t\t\t\t\t\t\talt=\"loading\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"bottom-section\">\n\t\t\t\t<div className=\"bottom-section-left-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"select-all-button\"\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tsetBooksChecked(booksToBeShown.map((_b, index) => index));\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tselect all\n\t\t\t\t\t</button>\n\t\t\t\t\t<span className=\"separator\">|</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"select-none-button\"\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tsetBooksChecked([]);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tselect none\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom-section-right-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"close-batch-edit-tab-button\"\n\t\t\t\t\t\tonClick={(_e) => setIsShowingBatchEdit(false)}\n\t\t\t\t\t>\n\t\t\t\t\t\tclose\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst settingsTab = (\n\t\t<div className=\"user-bookshelf-page-settings-tab\">\n\t\t\t<div className=\"top-section\">\n\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t<div className=\"settings-title\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<b>visible columns</b>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\tsetAllColumns(\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tselect all\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"gray-settings-message\">\n\t\t\t\t\t\tThese settings only apply to table view.\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"column-checkboxes\">\n\t\t\t\t\t\t<div className=\"author-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"author\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isAuthorColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsAuthorColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"author\">author</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"avg-rating-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"avg-rating\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isAvgRatingColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsAvgRatingColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"avg-rating\">avg rating</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"cover-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"cover\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isCoverColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsCoverColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"cover\">cover</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"date-added-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"date-added\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isDateAddedColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsDateAddedColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"date-added\">date added</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"date-publication-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"date-publication\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isDatePublicationColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsDatePublicationColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"date-publication\">date pub</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"date-publication-edition-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"date-publication-edition\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isDatePublicationEditionColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsDatePublicationEditionColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"date-publication-edition\">date pub (ed.)</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"date-read-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"date-read\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isDateReadColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsDateReadColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"date-read\">date read</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"date-started-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"date-started\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isDateStartedColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsDateStartedColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"date-started\">date started</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"format-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"format\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isFormatColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsFormatColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"format\">format</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"isbn-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"isbn\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isIsbnColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsIsbnColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"isbn\">isbn</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"number-of-pages-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"number-of-pages\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isNumPagesColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsNumPagesColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"number-of-pages\">num pages</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"number-of-ratings-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"number-of-ratings\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isNumRatingsColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsNumRatingsColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"number-of-ratings\">num ratings</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"position-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"position\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isPositionColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsPositionColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"position\">position</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"rating-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"rating\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isRatingColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsRatingColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"rating\">rating</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"review-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"review\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isReviewColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsReviewColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"review\">review</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"shelves-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"shelves\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isShelvesColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsShelvesColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"shelves\">shelves</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"title-column-selection\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={isTitleColumnVisible}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSelectedColumnSetButton('');\n\t\t\t\t\t\t\t\t\tsetIsTitleColumnVisible(e.target.checked);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor=\"title\">title</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t<span className=\"column-sets-title\">\n\t\t\t\t\t\t<b>column sets</b>\n\t\t\t\t\t</span>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tselectedColumnSetButton === 'main'\n\t\t\t\t\t\t\t\t? 'column-set-button selected'\n\t\t\t\t\t\t\t\t: 'column-set-button'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tsetSelectedColumnSetButton('main');\n\t\t\t\t\t\t\tsetAllColumns(\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tmain\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tselectedColumnSetButton === 'reading'\n\t\t\t\t\t\t\t\t? 'column-set-button selected'\n\t\t\t\t\t\t\t\t: 'column-set-button'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tsetSelectedColumnSetButton('reading');\n\t\t\t\t\t\t\tsetAllColumns(\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\treading\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tselectedColumnSetButton === 'list'\n\t\t\t\t\t\t\t\t? 'column-set-button selected'\n\t\t\t\t\t\t\t\t: 'column-set-button'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tsetSelectedColumnSetButton('list');\n\t\t\t\t\t\t\tsetAllColumns(\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tlist\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tselectedColumnSetButton === 'review'\n\t\t\t\t\t\t\t\t? 'column-set-button selected'\n\t\t\t\t\t\t\t\t: 'column-set-button'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\tsetSelectedColumnSetButton('review');\n\t\t\t\t\t\t\tsetAllColumns(\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\treview\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"bottom-section\">\n\t\t\t\t{userId === user.userUID ? (\n\t\t\t\t\t<div className=\"other-section\">\n\t\t\t\t\t\t<h3>other</h3>\n\t\t\t\t\t\t<div className=\"parameters-section\">\n\t\t\t\t\t\t\t<div className=\"per-page-parameter\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"per-page\">Per page</label>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tname=\"per-page\"\n\t\t\t\t\t\t\t\t\tvalue={perPage}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newPageValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\thistory.push(\n\t\t\t\t\t\t\t\t\t\t\tFirebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t\t\t\tshelves,\n\t\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\t\t\t\t\tnewPageValue,\n\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t\t\t\t\t\t<option value=\"20\">20</option>\n\t\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\n\t\t\t\t\t\t\t\t\t<option value=\"40\">40</option>\n\t\t\t\t\t\t\t\t\t<option value=\"50\">50</option>\n\t\t\t\t\t\t\t\t\t<option value=\"75\">75</option>\n\t\t\t\t\t\t\t\t\t<option value=\"100\">100</option>\n\t\t\t\t\t\t\t\t\t<option value=\"infinite-scroll\">infinite scroll</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"sort-parameter\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"sort\">Sort</label>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tname=\"sort\"\n\t\t\t\t\t\t\t\t\tvalue={tableSortColumn}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setTableSortColumn(e.target.value)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"author\">Author</option>\n\t\t\t\t\t\t\t\t\t<option value=\"avg-rating\">Avg rating</option>\n\t\t\t\t\t\t\t\t\t<option value=\"cover\">Cover</option>\n\t\t\t\t\t\t\t\t\t<option value=\"date-added\">Date added</option>\n\t\t\t\t\t\t\t\t\t<option value=\"date-pub\">Date pub</option>\n\t\t\t\t\t\t\t\t\t<option value=\"date-pub-edition\">Date pub edition</option>\n\t\t\t\t\t\t\t\t\t<option value=\"date-read\">Date read</option>\n\t\t\t\t\t\t\t\t\t<option value=\"date-started\">Date started</option>\n\t\t\t\t\t\t\t\t\t<option value=\"format\">Format</option>\n\t\t\t\t\t\t\t\t\t<option value=\"isbn\">Isbn</option>\n\t\t\t\t\t\t\t\t\t<option value=\"num-pages\">Num pages</option>\n\t\t\t\t\t\t\t\t\t<option value=\"num-ratings\">Num ratings</option>\n\t\t\t\t\t\t\t\t\t<option value=\"position\">Position</option>\n\t\t\t\t\t\t\t\t\t<option value=\"random\">Random</option>\n\t\t\t\t\t\t\t\t\t<option value=\"rating\">Rating</option>\n\t\t\t\t\t\t\t\t\t<option value=\"review\">Review</option>\n\t\t\t\t\t\t\t\t\t<option value=\"title\">Title</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"sort-order-parameter\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\tchecked={tableSortOrder === 'ascending'}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.target.checked) {\n\t\t\t\t\t\t\t\t\t\t\tsetTableSortOrder('ascending');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname=\"asc\"\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t\t<label htmlFor=\"asc\">ascending</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\tchecked={tableSortOrder === 'descending'}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.target.checked) {\n\t\t\t\t\t\t\t\t\t\t\tsetTableSortOrder('descending');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname=\"desc\"\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t\t<label htmlFor=\"desc\">descending</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclassName=\"settings-tab-close-button\"\n\t\t\t\tonClick={(_e) => setIsSettingsTabOpen(false)}\n\t\t\t>\n\t\t\t\tclose\n\t\t\t</button>\n\t\t</div>\n\t);\n\n\tconst pageNavigationSection =\n\t\tbooksToBeShown.length > perPage ? (\n\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\tshelves,\n\t\t\t\t\t\tsearchQuery,\n\t\t\t\t\t\tview,\n\t\t\t\t\t\tperPage,\n\t\t\t\t\t\tpage - 1\n\t\t\t\t\t)}\n\t\t\t\t\tclassName={page === 1 ? 'disabled' : ''}\n\t\t\t\t>\n\t\t\t\t\t previous\n\t\t\t\t</a>\n\t\t\t\t{Array.from(\n\t\t\t\t\t{\n\t\t\t\t\t\tlength: Math.ceil(booksToBeShown.length / perPage),\n\t\t\t\t\t},\n\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t).map((number) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\tshelves,\n\t\t\t\t\t\t\t\tsearchQuery,\n\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\tperPage,\n\t\t\t\t\t\t\t\tnumber\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tclassName={page === number ? 'disabled' : ''}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\tshelves,\n\t\t\t\t\t\tsearchQuery,\n\t\t\t\t\t\tview,\n\t\t\t\t\t\tperPage,\n\t\t\t\t\t\tpage + 1\n\t\t\t\t\t)}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tpage === Math.ceil(booksToBeShown.length / perPage)\n\t\t\t\t\t\t\t? 'disabled'\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tnext \n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst noMatchingItemsSpan = (\n\t\t<span className=\"no-matching-items-span\">\n\t\t\t{userId !== user.userUID ? (\n\t\t\t\t'No matching items!'\n\t\t\t) : (\n\t\t\t\t<span>\n\t\t\t\t\tYou have no books matching <b>{`\"${searchInputText}\"`}</b>\n\t\t\t\t</span>\n\t\t\t)}\n\t\t</span>\n\t);\n\n\tconst booksTable =\n\t\tloaded && view === 'cover' ? (\n\t\t\t<div className=\"user-bookshelf-page-books-cover-view\">\n\t\t\t\t{booksToBeShown.length === 0\n\t\t\t\t\t? { noMatchingItemsSpan }\n\t\t\t\t\t: booksToBeShown\n\t\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\t\tconst compare = (value1, value2) => {\n\t\t\t\t\t\t\t\t\treturn tableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t? value1 < value2\n\t\t\t\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t\t\t\t: 1\n\t\t\t\t\t\t\t\t\t\t: value2 < value1\n\t\t\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t\t\t: 1;\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tswitch (tableSortColumn) {\n\t\t\t\t\t\t\t\t\tcase 'author':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.authorName, b.authorName);\n\t\t\t\t\t\t\t\t\tcase 'avg-rating':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.averageRating, b.averageRating);\n\t\t\t\t\t\t\t\t\tcase 'cover':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.cover, b.cover);\n\t\t\t\t\t\t\t\t\tcase 'date-added':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.dateAdded, b.dateAdded);\n\t\t\t\t\t\t\t\t\tcase 'date-pub':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.datePublished, b.datePublished);\n\t\t\t\t\t\t\t\t\tcase 'date-pub-ed':\n\t\t\t\t\t\t\t\t\t\treturn compare(\n\t\t\t\t\t\t\t\t\t\t\ta.datePublishedEdition,\n\t\t\t\t\t\t\t\t\t\t\tb.datePublishedEdition\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tcase 'date-read':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.dateRead, b.dateRead);\n\t\t\t\t\t\t\t\t\tcase 'date-started':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.dateStarted, b.dateStarted);\n\t\t\t\t\t\t\t\t\tcase 'format':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.format, b.format);\n\t\t\t\t\t\t\t\t\tcase 'isbn':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.isbn, b.isbn);\n\t\t\t\t\t\t\t\t\tcase 'num-pages':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.numberOfPages, b.numberOfPages);\n\t\t\t\t\t\t\t\t\tcase 'num-ratings':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.numberOfRatings, b.numberOfRatings);\n\t\t\t\t\t\t\t\t\tcase 'position':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.position, b.position);\n\t\t\t\t\t\t\t\t\tcase 'rating':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.rating, b.rating);\n\t\t\t\t\t\t\t\t\tcase 'review':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.review, b.review);\n\t\t\t\t\t\t\t\t\tcase 'title':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.title, b.title);\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\treturn Math.random() > 0.5 ? a : b;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(_book, index) =>\n\t\t\t\t\t\t\t\t\tindex >= (page - 1) * perPage && index < page * perPage\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((book, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"book-cover-view-cover-wrapper\"\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? book.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t: noPictureImageUrl\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t</div>\n\t\t) : loaded ? (\n\t\t\t<table className=\"user-bookshelf-page-books-table\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{isPositionColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'position') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('position');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>#</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'position' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isCoverColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'cover') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('cover');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>cover</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'cover' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isTitleColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'title') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('title');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>title</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'title' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isAuthorColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'author') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('author');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>author</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'author' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isIsbnColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'isbn') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('isbn');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>isbn</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'isbn' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isNumPagesColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'num-pages') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('num-pages');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>num pages</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'num-pages' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isAvgRatingColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'avg-rating') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('avg-rating');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>avg rating</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'avg-rating' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isNumRatingsColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'num-ratings') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('num-ratings');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>num ratings</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'num-ratings' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isDatePublicationColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'date-pub') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('date-pub');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>date pub</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'date-pub' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isDatePublicationEditionColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'date-pub-ed') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('date-pub-ed');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>date pub (ed.)</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'date-pub-ed' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isRatingColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'rating') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('rating');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>rating</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'rating' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isShelvesColumnVisible ? (\n\t\t\t\t\t\t\t<th className=\"my-rating-th\">\n\t\t\t\t\t\t\t\t{user.userUID !== userId ? 'my rating' : 'shelves'}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isReviewColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'review') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('review');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>review</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'review' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isDateStartedColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'date-started') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('date-started');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>date started</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'date-started' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isDateReadColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'date-read') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('date-read');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>date read</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'date-read' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isDateAddedColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'date-added') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('date-added');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>date added</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'date-added' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{isFormatColumnVisible ? (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tif (tableSortColumn === 'format') {\n\t\t\t\t\t\t\t\t\t\tsetTableSortOrder((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious === 'ascending' ? 'descending' : 'ascending'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetTableSortColumn('format');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>format</span>\n\t\t\t\t\t\t\t\t{tableSortColumn === 'format' ? (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\ttableSortOrder === 'ascending' ? 'Up arrow' : 'Down arrow'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{userId === user.userUID ? <th>{''}</th> : null}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{booksToBeShown.length === 0 ? (\n\t\t\t\t\t\t<tr className=\"no-matching-items-tr\">\n\t\t\t\t\t\t\t<td colSpan=\"20\">{noMatchingItemsSpan}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tbooksToBeShown\n\t\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\t\tconst compare = (value1, value2) => {\n\t\t\t\t\t\t\t\t\treturn tableSortOrder === 'ascending'\n\t\t\t\t\t\t\t\t\t\t? value1 < value2\n\t\t\t\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t\t\t\t: 1\n\t\t\t\t\t\t\t\t\t\t: value2 < value1\n\t\t\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t\t\t: 1;\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tswitch (tableSortColumn) {\n\t\t\t\t\t\t\t\t\tcase 'author':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.authorName, b.authorName);\n\t\t\t\t\t\t\t\t\tcase 'avg-rating':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.averageRating, b.averageRating);\n\t\t\t\t\t\t\t\t\tcase 'cover':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.cover, b.cover);\n\t\t\t\t\t\t\t\t\tcase 'date-added':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.dateAdded, b.dateAdded);\n\t\t\t\t\t\t\t\t\tcase 'date-pub':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.datePublished, b.datePublished);\n\t\t\t\t\t\t\t\t\tcase 'date-pub-ed':\n\t\t\t\t\t\t\t\t\t\treturn compare(\n\t\t\t\t\t\t\t\t\t\t\ta.datePublishedEdition,\n\t\t\t\t\t\t\t\t\t\t\tb.datePublishedEdition\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tcase 'date-read':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.dateRead, b.dateRead);\n\t\t\t\t\t\t\t\t\tcase 'date-started':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.dateStarted, b.dateStarted);\n\t\t\t\t\t\t\t\t\tcase 'format':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.format, b.format);\n\t\t\t\t\t\t\t\t\tcase 'isbn':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.isbn, b.isbn);\n\t\t\t\t\t\t\t\t\tcase 'num-pages':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.numberOfPages, b.numberOfPages);\n\t\t\t\t\t\t\t\t\tcase 'num-ratings':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.numberOfRatings, b.numberOfRatings);\n\t\t\t\t\t\t\t\t\tcase 'position':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.position, b.position);\n\t\t\t\t\t\t\t\t\tcase 'rating':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.rating, b.rating);\n\t\t\t\t\t\t\t\t\tcase 'review':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.review, b.review);\n\t\t\t\t\t\t\t\t\tcase 'title':\n\t\t\t\t\t\t\t\t\t\treturn compare(a.title, b.title);\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\treturn Math.random() > 0.5 ? a : b;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(_book, index) =>\n\t\t\t\t\t\t\t\t\tindex >= (page - 1) * perPage && index < page * perPage\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((book, index) => {\n\t\t\t\t\t\t\t\tconst authorName =\n\t\t\t\t\t\t\t\t\tbook.authorName !== undefined &&\n\t\t\t\t\t\t\t\t\tbook.authorName.split(' ').length > 1\n\t\t\t\t\t\t\t\t\t\t? book.authorName.split(' ').slice(1).join(' ') +\n\t\t\t\t\t\t\t\t\t\t  ', ' +\n\t\t\t\t\t\t\t\t\t\t  book.authorName.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t: book.authorName;\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tbooksChecked.includes((page - 1) * perPage + index)\n\t\t\t\t\t\t\t\t\t\t\t\t? 'selected'\n\t\t\t\t\t\t\t\t\t\t\t\t: isShowingBatchEdit\n\t\t\t\t\t\t\t\t\t\t\t\t? 'selecting'\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\t\tif (isShowingBatchEdit) {\n\t\t\t\t\t\t\t\t\t\t\t\tsetBooksChecked((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tprevious.includes((page - 1) * perPage + index)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? previous.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(i) => i !== (page - 1) * perPage + index\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: previous.concat((page - 1) * perPage + index)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{isShowingBatchEdit ? (\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={booksChecked.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(page - 1) * perPage + index\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isPositionColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{userId !== user.userUID ||\n\t\t\t\t\t\t\t\t\t\t\t\t!shelves.includes('want-to-read') ||\n\t\t\t\t\t\t\t\t\t\t\t\tshelves.length !== 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{book.position !== undefined ? book.position : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t) : !savingPositions ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"want-to-read-position-input-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={wantToReadBooksPositionInputs[index]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst newPosition = e.target.value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetWantToReadBooksPositionInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((v, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newPosition : v\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSavePositionChangesVisiblePopup(index)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsavePositionChangesVisiblePopup === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'save-position-changes-popup'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'save-position-changes-popup hidden'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"popup-point\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"save-position-changes-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst oldPosition = userInfo.shelves.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelf) => shelf.name === 'want-to-read'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)[0].books[index].position;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst newPosition =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisNaN(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twantToReadBooksPositionInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twantToReadBooksPositionInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) <= 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: parseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twantToReadBooksPositionInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSavingPositions(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewPosition\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetWantToReadBooksPositionInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn newPosition;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (newPosition < oldPosition) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue >= newPosition &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue < oldPosition\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value + 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (newPosition > oldPosition) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue <= newPosition &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue > oldPosition\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value - 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSavePositionChangesVisiblePopup(null);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSavingPositions(false);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSave position changes\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"close-popup-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSavePositionChangesVisiblePopup(null)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclose\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-position-loading\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"loading\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isCoverColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-cover-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.cover !== undefined ? book.cover : noCoverUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isTitleColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"book-title-proper\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{book.seriesName !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"book-series-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{` (${book.seriesName}, #${book.seriesInstance})`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isAuthorColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"author-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.authorId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.authorName\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{authorName !== undefined ? authorName : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isIsbnColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{book.isbn !== undefined ? book.isbn : ''}</span>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isNumPagesColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{book.numberOfPages !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"num-pages-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"black\">{book.numberOfPages}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"gray\"> pp</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isAvgRatingColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{book.averageRating.toFixed(2)}</span>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isNumRatingsColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{book.numberOfRatings}</span>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isDatePublicationColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{book.datePublished !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? format(book.datePublished, 'MMM dd, yyyy')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isDatePublicationEditionColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{book.datePublishedEdition !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? format(book.datePublishedEdition, 'MMM dd, yyyy')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isRatingColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{userId !== user.userUID ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"rating-stars\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.rating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InteractiveStarRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trating={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.loggedInUserRating !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? book.loggedInUserRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsaveRating={(rating) => rateBook(book.id, rating)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isShelvesColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{userId !== user.userUID ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InteractiveStarRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trating={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.loggedInUserRating !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? book.loggedInUserRating\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsaveRating={(rating) => rateBook(book.id, rating)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"user-own-shelf-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo.shelves.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name === 'read' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.books.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelfBook) => shelfBook.id === book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t['read'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'table',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t20,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: userInfo.shelves.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name === 'currently-reading' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.books.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelfBook) => shelfBook.id === book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t['currently-reading'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'table',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t20,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t['want-to-read'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'table',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t20,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{userInfo.shelves.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name === 'read' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.books.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelfBook) => shelfBook.id === book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'read'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: userInfo.shelves.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name === 'currently-reading' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.books.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelfBook) => shelfBook.id === book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'currently-reading'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'to-read'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"add-to-shelves-button-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex === visibleAddToShelvesPopup\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? openAddShelvesPopup\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"table-add-to-shelves-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (user.userUID !== null) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (visibleAddToShelvesPopup === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetVisibleAddToShelvesPopup(null);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetVisibleAddToShelvesPopup(index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push('/user/sign_up');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{userId === user.userUID\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '[edit]'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: loggedInUserShelves.some((shelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.books\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((loggedInBook) => loggedInBook.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(book.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'edit shelves'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'add to shelves'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisibleAddToShelvesPopup === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'add-to-shelves-popup-wrapper visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'add-to-shelves-popup-wrapper'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AddToShelvesPopup\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelves={loggedInUserShelves\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((shelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name !== 'want-to-read'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? shelf.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'to-read'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((shelf) => shelf !== 'all')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelvesBookBelongsTo={loggedInUserShelves\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name !== 'all' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.books.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(shelfBook) => shelfBook.id === book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((shelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelf.name !== 'want-to-read'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? shelf.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'to-read'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taddBookToShelf={async (shelfName) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.rootId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelfName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetLoggedInUserShelves((previous) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!previous.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(previousShelf) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviousShelf.name === shelfName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? previous.concat({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: shelfName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ id: book.id, rootId: book.rootId },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: previous.map((previousShelf) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (previousShelf.name === shelfName) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: shelfName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks: previousShelf.books.concat({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trootId: book.rootId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn previousShelf;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeBookStatus={async (status) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToShelf(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclose={() => setVisibleAddToShelvesPopup(null)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isReviewColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<UserReviewSection reviewText={book.review} />\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isDateStartedColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{userId !== user.userUID ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.dateStarted === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'no-date-span'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{book.dateStarted !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? format(book.dateStarted, 'MMM dd, yyyy')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'not set'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<EditableBookshelfDateField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitialDate={book.dateStarted}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsave={(date) => {}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isDateReadColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{userId !== user.userUID ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.dateRead === undefined ? 'no-date-span' : ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{book.dateRead !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? format(book.dateRead, 'MMM dd, yyyy')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'not set'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<EditableBookshelfDateField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitialDate={book.dateStarted}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsave={(date) => {}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isDateAddedColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{book.dateAdded !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? format(book.dateAdded, 'MMM dd, yyyy')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{isFormatColumnVisible ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{book.format}</span>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t{userId === user.userUID ? (\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"remove-book-from-shelves-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twindow.confirm(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Are you sure you want to remove ${book.title} from your books? This will permanently remove this book from your shelves, including any review, or rating you have added. To change the shelf this book appears on please edit the shelves.`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Firebase.removeBookFromShelf(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpathname: Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelves,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'table',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t20,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate: `${book.title} was removed from your books.`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t)}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t) : null;\n\n\tconst tableParametersSection = (\n\t\t<div className=\"user-bookshelf-page-table-parameters-section\">\n\t\t\t<div className=\"per-page-parameter\">\n\t\t\t\t<label htmlFor=\"per-page\">per page</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"per-page\"\n\t\t\t\t\tvalue={perPage}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tconst newPageValue = e.target.value;\n\t\t\t\t\t\thistory.push(\n\t\t\t\t\t\t\tFirebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\tshelves,\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\tview,\n\t\t\t\t\t\t\t\tnewPageValue,\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t\t<option value=\"20\">20</option>\n\t\t\t\t\t<option value=\"30\">30</option>\n\t\t\t\t\t<option value=\"40\">40</option>\n\t\t\t\t\t<option value=\"50\">50</option>\n\t\t\t\t\t<option value=\"75\">75</option>\n\t\t\t\t\t<option value=\"100\">100</option>\n\t\t\t\t\t<option value=\"infinite-scroll\">infinite scroll</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"sort-parameter\">\n\t\t\t\t<label htmlFor=\"sort\">sort</label>\n\t\t\t\t<select\n\t\t\t\t\tname=\"sort\"\n\t\t\t\t\tvalue={tableSortColumn}\n\t\t\t\t\tonChange={(e) => setTableSortColumn(e.target.value)}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"author\">Author</option>\n\t\t\t\t\t<option value=\"avg-rating\">Avg rating</option>\n\t\t\t\t\t<option value=\"cover\">Cover</option>\n\t\t\t\t\t<option value=\"date-added\">Date added</option>\n\t\t\t\t\t<option value=\"date-pub\">Date pub</option>\n\t\t\t\t\t<option value=\"date-pub-edition\">Date pub edition</option>\n\t\t\t\t\t<option value=\"date-read\">Date read</option>\n\t\t\t\t\t<option value=\"date-started\">Date started</option>\n\t\t\t\t\t<option value=\"format\">Format</option>\n\t\t\t\t\t<option value=\"isbn\">Isbn</option>\n\t\t\t\t\t<option value=\"num-pages\">Num pages</option>\n\t\t\t\t\t<option value=\"num-ratings\">Num ratings</option>\n\t\t\t\t\t<option value=\"position\">Position</option>\n\t\t\t\t\t<option value=\"random\">Random</option>\n\t\t\t\t\t<option value=\"rating\">Rating</option>\n\t\t\t\t\t<option value=\"review\">Review</option>\n\t\t\t\t\t<option value=\"title\">Title</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"sort-order-parameter\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tchecked={tableSortOrder === 'ascending'}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tif (e.target.checked) {\n\t\t\t\t\t\t\tsetTableSortOrder('ascending');\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tname=\"asc\"\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"asc\">asc.</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tchecked={tableSortOrder === 'descending'}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tif (e.target.checked) {\n\t\t\t\t\t\t\tsetTableSortOrder('descending');\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tname=\"desc\"\n\t\t\t\t></input>\n\t\t\t\t<label htmlFor=\"desc\">desc.</label>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst mainInfoContainer = (\n\t\t<div className=\"user-bookshelf-page-main-info-container\">\n\t\t\t{isSettingsTabOpen ? settingsTab : null}\n\t\t\t{isShowingBatchEdit ? batchEditTab : null}\n\t\t\t<div className=\"top-page-navigation-section-wrapper\">\n\t\t\t\t{pageNavigationSection}\n\t\t\t</div>\n\t\t\t{booksTable}\n\t\t\t{tableParametersSection}\n\t\t\t<div className=\"bottom-page-navigation-section-wrapper\">\n\t\t\t\t{pageNavigationSection}\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tconst mainContent = (\n\t\t<div className=\"user-bookshelf-page-main-content\">\n\t\t\t<div className=\"user-bookshelf-page-main-content-top-section\">\n\t\t\t\t{topMessage !== undefined ? alertMessage : null}\n\t\t\t\t{shelvesTopBar}\n\t\t\t</div>\n\t\t\t<div className=\"user-bookshelf-page-main-content-bottom-section\">\n\t\t\t\t{bookshelfNavigationSection}\n\t\t\t\t{mainInfoContainer}\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"user-bookshelf-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default UserBookshelfPage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/User/UserPhotoPage.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nconst UserPhotoPage = ({ match }) => {\n\tconst {\n\t\tparams: { userPhotoPageId },\n\t} = match;\n\tconst userId = userPhotoPageId.split('-')[0];\n\tconst firstName =\n\t\tuserPhotoPageId.split('-')[1].length > 1\n\t\t\t? userPhotoPageId.split('-')[1][0].toUpperCase() +\n\t\t\t  userPhotoPageId.split('-')[1].slice(1)\n\t\t\t: userPhotoPageId.split('-')[1].toUpperCase();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [photoInfo, setPhotoInfo] = useState(null);\n\n\tconst loggedInUser = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst loadInfo = async () => {\n\t\t\tconst userObj = await trackPromise(\n\t\t\t\tFirebase.getUserInfoForUserPage(userId, loggedInUser.userUID)\n\t\t\t);\n\t\t\tsetPhotoInfo(userObj.profilePicture);\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tloadInfo();\n\t}, [userId, loggedInUser.userUID]);\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"user-photo-page-main-content\">\n\t\t\t<span className=\"user-photo-page-title\">\n\t\t\t\t<a href={Firebase.pageGenerator.generateUserPage(userId, firstName)}>\n\t\t\t\t\t{firstName}\n\t\t\t\t</a>\n\t\t\t\t<span>{'>'}</span>\n\t\t\t\t<span>Photos</span>\n\t\t\t\t<span>{'>'}</span>\n\t\t\t\t<span>Profile Photo</span>\n\t\t\t</span>\n\t\t\t<a\n\t\t\t\thref={Firebase.pageGenerator.generateUserPhotoPage(userId)}\n\t\t\t\tclassName=\"small-photo-a\"\n\t\t\t>\n\t\t\t\t<img src={photoInfo} alt=\"Profile\" />\n\t\t\t</a>\n\t\t\t<div className=\"main-photo-section\">\n\t\t\t\t<a className=\"largest-size-a\" href={photoInfo}>\n\t\t\t\t\tlargest size\n\t\t\t\t</a>\n\t\t\t\t<img src={photoInfo} alt=\"Profile\" />\n\t\t\t</div>\n\t\t\t<span className=\"description-span\">Profile photo.</span>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"user-photo-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default UserPhotoPage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport { trackPromise } from 'react-promise-tracker';\nimport '../styles/User/UserYearInBooksPage.css';\n\nconst UserYearInBooksPage = ({ match }) => {\n\tconst {\n\t\tparams: { year, pageId },\n\t} = match;\n\tconst userId = pageId.split('-')[0];\n\tconst userFirstName =\n\t\tpageId.split('-')[1].charAt(0).toUpperCase() +\n\t\tpageId.split('-')[1].slice(1);\n\tconst numberYear = Number.parseInt(year);\n\tconst isCurrentYear = new Date().getFullYear() === numberYear;\n\tconst [books, setBooks] = useState([]);\n\tconst [userProfilePicture, setUserProfilePicture] = useState(null);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tuseEffect(() => {\n\t\tconst loadInfo = async () => {\n\t\t\tsetBooks(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getUserInfoForYearInBooksPage(userId, numberYear)\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetUserProfilePicture(\n\t\t\t\tawait trackPromise(Firebase.getUserProfilePicture(userId))\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tloadInfo();\n\t}, [userId, numberYear]);\n\n\tconst shortestBook = books.reduce(\n\t\t(previous, current) =>\n\t\t\tprevious === null || previous.pageCount > current.pageCount\n\t\t\t\t? current\n\t\t\t\t: previous,\n\t\tnull\n\t);\n\tconst longestBook = books.reduce(\n\t\t(previous, current) =>\n\t\t\tprevious === null || previous.pageCount < current.pageCount\n\t\t\t\t? current\n\t\t\t\t: previous,\n\t\tnull\n\t);\n\tconst averageLength = Math.round(\n\t\tbooks.reduce(\n\t\t\t(previous, current) =>\n\t\t\t\tbooks.length === 0 ? 0 : previous + current.pageCount / books.length,\n\t\t\t0\n\t\t)\n\t);\n\n\tconst mostPopularBook = books.reduce(\n\t\t(previous, current) =>\n\t\t\tprevious === null || previous.numberShelved < current.numberShelved\n\t\t\t\t? current\n\t\t\t\t: previous,\n\t\tnull\n\t);\n\tconst leastPopularBook = books.reduce(\n\t\t(previous, current) =>\n\t\t\tprevious === null || previous.numberShelved > current.numberShelved\n\t\t\t\t? current\n\t\t\t\t: previous,\n\t\tnull\n\t);\n\n\tconst userAverageRating = books\n\t\t.reduce(\n\t\t\t(previous, current) =>\n\t\t\t\tbooks.length === 0\n\t\t\t\t\t? 0\n\t\t\t\t\t: current.userRating === undefined\n\t\t\t\t\t? previous\n\t\t\t\t\t: previous +\n\t\t\t\t\t  current.userRating /\n\t\t\t\t\t\t\tbooks.filter((book) => book.userRating !== undefined).length,\n\t\t\t0\n\t\t)\n\t\t.toFixed(1);\n\n\tconst highestRatedBook = books.reduce(\n\t\t(previous, current) =>\n\t\t\tprevious === null || previous.averageRating < current.averageRating\n\t\t\t\t? current\n\t\t\t\t: previous,\n\t\tnull\n\t);\n\n\tconst booksSortedByRating = books.sort((a, b) =>\n\t\ta.userRating > b.userRating ? -1 : 1\n\t);\n\n\tconst overallStatsSection = loaded ? (\n\t\t<div className=\"user-year-in-books-overall-stats\">\n\t\t\t<div className=\"user-year-in-books-overall-stats-top\">\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\t\tnumberYear - 1,\n\t\t\t\t\t\tuserId,\n\t\t\t\t\t\tuserFirstName\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tGo to previous year\n\t\t\t\t</a>\n\t\t\t\t{!isCurrentYear ? (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserYearInBooksPage(\n\t\t\t\t\t\t\tnumberYear + 1,\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\tuserFirstName\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tGo to next year\n\t\t\t\t\t</a>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t<div className=\"user-year-in-books-image-and-title\">\n\t\t\t\t<span className=\"year-span\">{year}</span>\n\t\t\t\t<img\n\t\t\t\t\tsrc=\"https://s.gr-assets.com/assets/yyib/hero_desktop_2021@2x-2075d93f13d7007160228ce5e23000a7.png\"\n\t\t\t\t\talt=\"Open book\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"bottom-section\">\n\t\t\t\t<div className=\"top-half\">\n\t\t\t\t\t<span className=\"stat\">\n\t\t\t\t\t\t<span className=\"number\">\n\t\t\t\t\t\t\t{books.reduce(\n\t\t\t\t\t\t\t\t(previous, current) => previous + current.pageCount,\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\tpages read\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"profile-info\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"profile-a\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName !== undefined ? userFirstName : ''\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\tuserProfilePicture !== undefined &&\n\t\t\t\t\t\t\t\t\tuserProfilePicture !== null\n\t\t\t\t\t\t\t\t\t\t? userProfilePicture\n\t\t\t\t\t\t\t\t\t\t: 'https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></img>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t{userFirstName !== undefined ? (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"profile-name-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t\tuserFirstName\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{userFirstName}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"stat\">\n\t\t\t\t\t\t<span className=\"number\">{books.length}</span> books read\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t{books.length !== 0 ? (\n\t\t\t\t\t<div className=\"bottom-half\">\n\t\t\t\t\t\t<div className=\"longest-shortest-section book-and-info-wrapper\">\n\t\t\t\t\t\t\t<div className=\"book-and-info\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-and-info-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tshortestBook.bookId,\n\t\t\t\t\t\t\t\t\t\tshortestBook.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img src={shortestBook.cover} alt={shortestBook.title} />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"info\">\n\t\t\t\t\t\t\t\t\t<span className=\"small-text\">Shortest Book</span>\n\t\t\t\t\t\t\t\t\t<span className=\"big-text\">{shortestBook.pageCount}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"medium-text\">pages</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book-and-info\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-and-info-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tlongestBook.bookId,\n\t\t\t\t\t\t\t\t\t\tlongestBook.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img src={longestBook.cover} alt={longestBook.title} />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"info\">\n\t\t\t\t\t\t\t\t\t<span className=\"small-text\">Shortest Book</span>\n\t\t\t\t\t\t\t\t\t<span className=\"big-text\">{longestBook.pageCount}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"medium-text\">pages</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"book-length-section\">\n\t\t\t\t\t\t\t<span className=\"average-length-span\">\n\t\t\t\t\t\t\t\tAverage book length in {year}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"number-pages\">\n\t\t\t\t\t\t\t\t<span className=\"number\">{averageLength}</span>\n\t\t\t\t\t\t\t\t<span className=\"pages\">pages</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"most-least-popular-section book-and-info-wrapper\">\n\t\t\t\t\t\t\t<div className=\"book-and-info\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-and-info-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tmostPopularBook.bookId,\n\t\t\t\t\t\t\t\t\t\tmostPopularBook.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={mostPopularBook.cover}\n\t\t\t\t\t\t\t\t\t\talt={mostPopularBook.title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"info\">\n\t\t\t\t\t\t\t\t\t<span className=\"small-text\">Most Popular</span>\n\t\t\t\t\t\t\t\t\t<span className=\"big-text\">\n\t\t\t\t\t\t\t\t\t\t{mostPopularBook.numberShelved - 1}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"medium-text\">people also shelved</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"book-and-info\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-and-info-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tleastPopularBook.bookId,\n\t\t\t\t\t\t\t\t\t\tleastPopularBook.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={leastPopularBook.cover}\n\t\t\t\t\t\t\t\t\t\talt={leastPopularBook.title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"info\">\n\t\t\t\t\t\t\t\t\t<span className=\"small-text\">Least Popular</span>\n\t\t\t\t\t\t\t\t\t<span className=\"big-text\">\n\t\t\t\t\t\t\t\t\t\t{leastPopularBook.numberShelved - 1}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span className=\"medium-text\">people also shelved</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"average-rating-section\">\n\t\t\t\t\t\t\t<span className=\"average-rating-span\">\n\t\t\t\t\t\t\t\t{user.userUID === userId ? 'My' : `${userFirstName}'s`} average\n\t\t\t\t\t\t\t\trating for {year}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"stars-rating\">\n\t\t\t\t\t\t\t\t<div className=\"rating-stars\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tuserAverageRating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tuserAverageRating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tuserAverageRating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tuserAverageRating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tuserAverageRating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t: userAverageRating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span className=\"rating\">{userAverageRating}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"highest-rated-section\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"book-and-info-a\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\thighestRatedBook.bookId,\n\t\t\t\t\t\t\t\t\thighestRatedBook.title\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={highestRatedBook.cover}\n\t\t\t\t\t\t\t\t\talt={highestRatedBook.title}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div className=\"highest-rated-info\">\n\t\t\t\t\t\t\t\t<span className=\"highest-rated-span\">\n\t\t\t\t\t\t\t\t\tHighest Rated on Goodreads\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"stars-rating\">\n\t\t\t\t\t\t\t\t\t<div className=\"rating-stars\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\thighestRatedBook.averageRating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\thighestRatedBook.averageRating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\thighestRatedBook.averageRating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\thighestRatedBook.averageRating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\thighestRatedBook.averageRating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: highestRatedBook.averageRating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star large almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star large empty'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span className=\"rating-average\">\n\t\t\t\t\t\t\t\t\t\t{highestRatedBook.averageRating.toFixed(2)} average\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"all-books-section\">\n\t\t\t\t\t\t\t<span className=\"my-books-span\">{`My ${year} Books`}</span>\n\t\t\t\t\t\t\t<div className=\"top-section\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-and-info-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tbooksSortedByRating[0].bookId,\n\t\t\t\t\t\t\t\t\t\tbooksSortedByRating[0].title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={booksSortedByRating[0].cover}\n\t\t\t\t\t\t\t\t\t\talt={booksSortedByRating[0].title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{booksSortedByRating.length > 1 ? (\n\t\t\t\t\t\t\t\t\t<div className=\"other-top-books\">\n\t\t\t\t\t\t\t\t\t\t{booksSortedByRating.slice(1, 5).map((book) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={book.bookId}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-and-info-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.bookId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={book.cover} alt={book.title} />\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{booksSortedByRating.length > 5 ? (\n\t\t\t\t\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t\t\t\t\t{booksSortedByRating.slice(5).map((book) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-and-info-a\"\n\t\t\t\t\t\t\t\t\t\t\t\tkey={book.bookId}\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.bookId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={book.cover} alt={book.title} />\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t\t{userId === user.userUID ? (\n\t\t\t\t\t<div className=\"missing-books-section\">\n\t\t\t\t\t\t<span className=\"missing-books-span\">Missing books?</span>\n\t\t\t\t\t\t<span className=\"missing-books-message\">\n\t\t\t\t\t\t\tYou can easily add books to this list by setting{' '}\n\t\t\t\t\t\t\t<strong>Date Read</strong> for each book to any time in{' '}\n\t\t\t\t\t\t\t<strong>{year}</strong>. Are you re-reading? That counts too!\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"missing-books-a\"\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\tuserFirstName,\n\t\t\t\t\t\t\t\t['all']\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tGo to My Books\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst bookStatsSection = <div></div>;\n\n\tconst myBooks = <div></div>;\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"user-year-in-books-page-main-content\">\n\t\t\t{overallStatsSection}\n\t\t\t{bookStatsSection}\n\t\t\t{myBooks}\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"user-year-in-books-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default UserYearInBooksPage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport { trackPromise } from 'react-promise-tracker';\nimport { useHistory } from 'react-router-dom';\nimport '../styles/Recommendations/RecommendationsFromUsersPage.css';\n\nconst RecommendationsFromUsersPage = () => {\n\tconst history = useHistory();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [recommendations, setRecommendations] = useState([]);\n\n\tconst [savingShelves, setSavingShelves] = useState([]);\n\tconst [\n\t\tareAddShelfInputSectionsHidden,\n\t\tsetAreAddShelfInputSectionsHidden,\n\t] = useState([]);\n\tconst [addShelfInputs, setAddShelfInputs] = useState([]);\n\tconst [exhibitedStarRatings, setExhibitedStarRatings] = useState([]);\n\tconst [areShelfPopupsHidden, setAreShelfPopupsHidden] = useState([]);\n\tconst [areShelfPopupsBottomHidden, setAreShelfPopupsBottomHidden] = useState(\n\t\t[]\n\t);\n\tconst [shelfPopupReadingInputs, setShelfPopupReadingInputs] = useState([]);\n\tconst [shelfPopupToReadInputs, setShelfPopupToReadInputs] = useState([]);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tconst genericBookCover =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\n\tuseEffect(() => {\n\t\tconst loadRecommendations = async () => {\n\t\t\tconst recommendationsArray = await trackPromise(\n\t\t\t\tFirebase.getRecommendationsToFromUser(user.userUID, true)\n\t\t\t);\n\t\t\tsetRecommendations(recommendationsArray);\n\t\t\tsetSavingShelves(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => false)\n\t\t\t);\n\t\t\tsetAreAddShelfInputSectionsHidden(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => true)\n\t\t\t);\n\t\t\tsetAddShelfInputs(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => '')\n\t\t\t);\n\t\t\tsetExhibitedStarRatings(\n\t\t\t\trecommendationsArray\n\t\t\t\t\t.map((rec) => rec.book)\n\t\t\t\t\t.map((edition) =>\n\t\t\t\t\t\tedition.userRating !== undefined ? edition.userRating : 0\n\t\t\t\t\t)\n\t\t\t);\n\t\t\tsetAreShelfPopupsHidden(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => true)\n\t\t\t);\n\t\t\tsetAreShelfPopupsBottomHidden(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => true)\n\t\t\t);\n\t\t\tsetShelfPopupReadingInputs(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => '')\n\t\t\t);\n\t\t\tsetShelfPopupToReadInputs(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => '')\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tloadRecommendations();\n\t}, [user.userUID]);\n\n\tconst ignoreRecommendation = async (id) => {\n\t\tawait Firebase.deleteRecommendation(id);\n\t\tsetRecommendations((previous) => previous.filter((rec) => rec.id !== id));\n\t};\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = (bookObject, index) => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, bookObject.bookId);\n\t\t\tsetRecommendations((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (bookObject, index, shelf) => {\n\t\tif (bookObject.bookId !== undefined) {\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t);\n\t\t\tawait Firebase.addBookToShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.bookId,\n\t\t\t\tshelf,\n\t\t\t\thistory\n\t\t\t);\n\t\t\tsetRecommendations((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t);\n\t\t}\n\t};\n\n\tconst rateBook = async (bookObject, index, rating) => {\n\t\tif (bookObject.bookId !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, bookObject.bookId, rating, history);\n\t\t\tsetRecommendations((previous, i) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\t\tpreviousObject.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? previousObject.userStatus\n\t\t\t\t\t\t\t\t\t\t\t: 'read',\n\t\t\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateProgress = async (bookObject, index, pages) => {\n\t\tif (\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined &&\n\t\t\tbookObject.bookId !== undefined &&\n\t\t\tpages.length > 0\n\t\t) {\n\t\t\tawait Firebase.updateBookInShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.bookId,\n\t\t\t\tparseInt(pages)\n\t\t\t);\n\t\t\tsetRecommendations((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tbook: { ...previousObject.book, userProgress: pages },\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst generateAddToShelfButton = (bookObject, index) => {\n\t\treturn loaded && bookObject.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up reading\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>Update your reading progress:</b>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tI'm on page{' '}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupReadingInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t\t\t? 'page-progress-input'\n\t\t\t\t\t\t\t\t\t\t\t: 'page-progress-input white-background'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupReadingInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\tof {bookObject.pageCount}.{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t? 'shelf-pop-up-bottom hidden'\n\t\t\t\t\t\t\t\t\t: 'shelf-pop-up-bottom'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tupdateProgress(\n\t\t\t\t\t\t\t\t\t\tbookObject,\n\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\tshelfPopupReadingInputs[index]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-finished-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tchangeBookShelf(bookObject, index, 'read');\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFinished book\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Currently Reading</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<div className=\"shelf-pop-up-wrapper\">\n\t\t\t\t\t<div className=\"shelf-pop-up read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\tbookObject.bookId\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Read</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up to-read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupToReadInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName=\"shelf-pop-up-to-read-input\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupToReadInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\ton your <b>To Read</b> shelf.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{areShelfPopupsBottomHidden[index] ? (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tFirebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.bookId,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(shelfPopupToReadInputs[index])\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetRecommendations((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((previousObject, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoReadBookPosition: parseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelfPopupToReadInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t: previousObject\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Want to Read</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t>\n\t\t\t\t{savingShelves[index] ? '...saving' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst generateBookOptionsDropdown = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t\t<div className=\"book-options-dropdown\">\n\t\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRead\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-currently-reading-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'reading')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-want-to-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWant to Read\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf\"\n\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={addShelfInputs[index]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\tsetAddShelfInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? newValue : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (addShelfInputs[index].length > 0) {\n\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.rootBook,\n\t\t\t\t\t\t\t\t\t\t\taddShelfInputs[index],\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst generateRateBookSection = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-rate-book\">\n\t\t\t\t{bookObject.userRating === undefined ? null : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"clear-rating-button\"\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, undefined)}\n\t\t\t\t\t>\n\t\t\t\t\t\tClear rating\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{bookObject.userRating === undefined ? (\n\t\t\t\t\t<span className=\"rate-this-book\">Rate this book</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"rate-this-book my-rating\">My rating:</span>\n\t\t\t\t)}\n\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 0\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 1 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 1)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 1\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 2 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 2)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 2\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 3 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 3)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 3\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 4 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 4)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 4\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 5 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 5)}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div className=\"recommendations-from-users-page recommendation-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"recommendations-main-content\">\n\t\t\t\t<span className=\"recommendations-page-indicator\">\n\t\t\t\t\tRecommendations {'>'} From Users\n\t\t\t\t</span>\n\t\t\t\t{recommendations.length > 0 ? (\n\t\t\t\t\t<span className=\"recommendations-total-span\">\n\t\t\t\t\t\t{`Showing 1-${recommendations.length} of ${recommendations.length}`}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t\t<div className=\"main-content\">\n\t\t\t\t\t{recommendations.length > 0 ? (\n\t\t\t\t\t\t<div className=\"recommendation-list\">\n\t\t\t\t\t\t\t{recommendations.map((recommendation, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"recommendation-card\" key={recommendation.id}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"top-section\">\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.otherUser.userId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.otherUser.firstName\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.otherUser.firstName}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\t\t\t\t\t\t\trecommended:\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ignore-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => ignoreRecommendation(recommendation.id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tignore\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"cover-wrapper-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.bookId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.cover !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.cover !== null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? recommendation.book.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: genericBookCover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={recommendation.book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"book-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.bookId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"authorship-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tby{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"author-name-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.authorId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.authorName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.book.authorName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.message !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.message !== null &&\n\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.message.length > 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"rec-message-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.otherUser.userId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.otherUser.firstName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthey\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsaid: \" {recommendation.message} \"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`want-to-read-button-and-options ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? recommendation.book.userStatus\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{generateAddToShelfButton(recommendation.book, index)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{generateBookOptionsDropdown(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{generateRateBookSection(recommendation.book, index)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className=\"no-pending-recommendations-span\">\n\t\t\t\t\t\t\tYou don't have any pending recommendations.\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"more-actions-box\">\n\t\t\t\t\t\t<span className=\"more-actions-title\">More Actions</span>\n\t\t\t\t\t\t<div className=\"anchors-list\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"selected\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateRecommendationsPage(true)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRecommendations from Users\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateRecommendationsPage(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRecommendations from You\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default RecommendationsFromUsersPage;\n","import React, { useState, useEffect } from 'react';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport { trackPromise } from 'react-promise-tracker';\nimport { useHistory } from 'react-router-dom';\nimport '../styles/Recommendations/RecommendationsFromYouPage.css';\n\nconst RecommendationsFromYouPage = () => {\n\tconst history = useHistory();\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [recommendations, setRecommendations] = useState([]);\n\n\tconst [savingShelves, setSavingShelves] = useState([]);\n\tconst [\n\t\tareAddShelfInputSectionsHidden,\n\t\tsetAreAddShelfInputSectionsHidden,\n\t] = useState([]);\n\tconst [addShelfInputs, setAddShelfInputs] = useState([]);\n\tconst [exhibitedStarRatings, setExhibitedStarRatings] = useState([]);\n\tconst [areShelfPopupsHidden, setAreShelfPopupsHidden] = useState([]);\n\tconst [areShelfPopupsBottomHidden, setAreShelfPopupsBottomHidden] = useState(\n\t\t[]\n\t);\n\tconst [shelfPopupReadingInputs, setShelfPopupReadingInputs] = useState([]);\n\tconst [shelfPopupToReadInputs, setShelfPopupToReadInputs] = useState([]);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tconst genericBookCover =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\n\tuseEffect(() => {\n\t\tconst loadRecommendations = async () => {\n\t\t\tconst recommendationsArray = await trackPromise(\n\t\t\t\tFirebase.getRecommendationsToFromUser(user.userUID, false)\n\t\t\t);\n\t\t\tsetRecommendations(recommendationsArray);\n\t\t\tsetSavingShelves(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => false)\n\t\t\t);\n\t\t\tsetAreAddShelfInputSectionsHidden(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => true)\n\t\t\t);\n\t\t\tsetAddShelfInputs(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => '')\n\t\t\t);\n\t\t\tsetExhibitedStarRatings(\n\t\t\t\trecommendationsArray\n\t\t\t\t\t.map((rec) => rec.book)\n\t\t\t\t\t.map((edition) =>\n\t\t\t\t\t\tedition.userRating !== undefined ? edition.userRating : 0\n\t\t\t\t\t)\n\t\t\t);\n\t\t\tsetAreShelfPopupsHidden(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => true)\n\t\t\t);\n\t\t\tsetAreShelfPopupsBottomHidden(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => true)\n\t\t\t);\n\t\t\tsetShelfPopupReadingInputs(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => '')\n\t\t\t);\n\t\t\tsetShelfPopupToReadInputs(\n\t\t\t\trecommendationsArray.map((rec) => rec.book).map((_book) => '')\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tloadRecommendations();\n\t}, [user.userUID]);\n\n\tconst ignoreRecommendation = async (id) => {\n\t\tif (window.confirm('Do you want to delete this recommendation?')) {\n\t\t\tawait Firebase.deleteRecommendation(id);\n\t\t\tsetRecommendations((previous) => previous.filter((rec) => rec.id !== id));\n\t\t}\n\t};\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = (bookObject, index) => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, bookObject.bookId);\n\t\t\tsetRecommendations((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (bookObject, index, shelf) => {\n\t\tif (bookObject.bookId !== undefined) {\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t);\n\t\t\tawait Firebase.addBookToShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.bookId,\n\t\t\t\tshelf,\n\t\t\t\thistory\n\t\t\t);\n\t\t\tsetRecommendations((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t);\n\t\t}\n\t};\n\n\tconst rateBook = async (bookObject, index, rating) => {\n\t\tif (bookObject.bookId !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, bookObject.bookId, rating, history);\n\t\t\tsetRecommendations((previous, i) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\t\tpreviousObject.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t\t\t? previousObject.userStatus\n\t\t\t\t\t\t\t\t\t\t\t: 'read',\n\t\t\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateProgress = async (bookObject, index, pages) => {\n\t\tif (\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined &&\n\t\t\tbookObject.bookId !== undefined &&\n\t\t\tpages.length > 0\n\t\t) {\n\t\t\tawait Firebase.updateBookInShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.bookId,\n\t\t\t\tparseInt(pages)\n\t\t\t);\n\t\t\tsetRecommendations((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tbook: { ...previousObject.book, userProgress: pages },\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst generateAddToShelfButton = (bookObject, index) => {\n\t\treturn loaded && bookObject.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up reading\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>Update your reading progress:</b>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tI'm on page{' '}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupReadingInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t\t\t? 'page-progress-input'\n\t\t\t\t\t\t\t\t\t\t\t: 'page-progress-input white-background'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupReadingInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\tof {bookObject.pageCount}.{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t? 'shelf-pop-up-bottom hidden'\n\t\t\t\t\t\t\t\t\t: 'shelf-pop-up-bottom'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tupdateProgress(\n\t\t\t\t\t\t\t\t\t\tbookObject,\n\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\tshelfPopupReadingInputs[index]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-finished-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tchangeBookShelf(bookObject, index, 'read');\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFinished book\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Currently Reading</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<div className=\"shelf-pop-up-wrapper\">\n\t\t\t\t\t<div className=\"shelf-pop-up read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\tbookObject.bookId\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Read</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up to-read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupToReadInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName=\"shelf-pop-up-to-read-input\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupToReadInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\ton your <b>To Read</b> shelf.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{areShelfPopupsBottomHidden[index] ? (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tFirebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.bookId,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(shelfPopupToReadInputs[index])\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetRecommendations((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((previousObject, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoReadBookPosition: parseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelfPopupToReadInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t: previousObject\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Want to Read</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t>\n\t\t\t\t{savingShelves[index] ? '...saving' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst generateBookOptionsDropdown = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t\t<div className=\"book-options-dropdown\">\n\t\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRead\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-currently-reading-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'reading')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-want-to-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWant to Read\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf\"\n\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={addShelfInputs[index]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\tsetAddShelfInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? newValue : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (addShelfInputs[index].length > 0) {\n\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.rootBook,\n\t\t\t\t\t\t\t\t\t\t\taddShelfInputs[index],\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst generateRateBookSection = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-rate-book\">\n\t\t\t\t{bookObject.userRating === undefined ? null : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"clear-rating-button\"\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, undefined)}\n\t\t\t\t\t>\n\t\t\t\t\t\tClear rating\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{bookObject.userRating === undefined ? (\n\t\t\t\t\t<span className=\"rate-this-book\">Rate this book</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"rate-this-book my-rating\">My rating:</span>\n\t\t\t\t)}\n\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 0\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 1 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 1)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 1\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 2 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 2)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 2\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 3 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 3)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 3\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 4 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 4)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 4\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 5 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 5)}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div className=\"recommendations-from-you-page recommendation-page\">\n\t\t\t<TopBar />\n\t\t\t<div className=\"recommendations-main-content\">\n\t\t\t\t<span className=\"recommendations-page-indicator\">\n\t\t\t\t\tRecommendations {'>'} From You to Users\n\t\t\t\t</span>\n\t\t\t\t{recommendations.length > 0 ? (\n\t\t\t\t\t<span className=\"recommendations-total-span\">\n\t\t\t\t\t\t{`Showing 1-${recommendations.length} of ${recommendations.length}`}\n\t\t\t\t\t</span>\n\t\t\t\t) : null}\n\t\t\t\t<div className=\"main-content\">\n\t\t\t\t\t{recommendations.length > 0 ? (\n\t\t\t\t\t\t<div className=\"recommendation-list\">\n\t\t\t\t\t\t\t{recommendations.map((recommendation, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"recommendation-card\" key={recommendation.id}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"top-section\">\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo !== null &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName !== null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? user.userInfo.firstName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'Someone'\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tyou\n\t\t\t\t\t\t\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\t\t\t\t\t\t\tsent a recommendation to{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"other-user-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.otherUser.userId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.otherUser.firstName\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.otherUser.firstName}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ignore-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => ignoreRecommendation(recommendation.id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tdelete\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"bottom-section\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"cover-wrapper-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.bookId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.cover !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.cover !== null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? recommendation.book.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: genericBookCover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={recommendation.book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"book-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.bookId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"authorship-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tby{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"author-name-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.authorId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.authorName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.book.authorName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{recommendation.message !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.message !== null &&\n\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.message.length > 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"rec-message-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo !== null &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName !== null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? user.userInfo.firstName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'Someone'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tyou\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsaid: \" {recommendation.message} \"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`want-to-read-button-and-options ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? recommendation.book.userStatus\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{generateAddToShelfButton(recommendation.book, index)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{generateBookOptionsDropdown(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecommendation.book,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{generateRateBookSection(recommendation.book, index)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className=\"no-pending-recommendations-span\">\n\t\t\t\t\t\t\tYou haven't made any recommendations yet.\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"more-actions-box\">\n\t\t\t\t\t\t<span className=\"more-actions-title\">More Actions</span>\n\t\t\t\t\t\t<div className=\"anchors-list\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateRecommendationsPage(true)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRecommendations from Users\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"selected\"\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateRecommendationsPage(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRecommendations from You\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default RecommendationsFromYouPage;\n","import React, { useState, useEffect } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport Firebase from '../../Firebase';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport TopBar from '../Global/TopBar';\nimport '../styles/Friends/FollowersPage.css';\n\nconst FollowersPage = ({ match }) => {\n\tconst {\n\t\tparams: { pageId },\n\t} = match;\n\tconst userId = pageId.split('-')[0];\n\tconst userFirstName =\n\t\tpageId.split('-')[1].charAt(0).toUpperCase() +\n\t\tpageId.split('-')[1].slice(1);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [followers, setFollowers] = useState([]);\n\tconst [page, setPage] = useState(1);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tconst noPictureImage =\n\t\t'https://s.gr-assets.com/assets/nophoto/user/u_50x66-632230dc9882b4352d753eedf9396530.png';\n\tconst noCoverUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\n\tuseEffect(() => {\n\t\tconst loadFollowers = async () => {\n\t\t\tsetFollowers(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getInfoForFollowPage(userId, user.userUID, 'followers')\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tloadFollowers();\n\t}, [user.userUID, userId]);\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"follow-page-main-content\">\n\t\t\t<span className=\"follow-page-page-indicator\">\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(userId, userFirstName)}\n\t\t\t\t>\n\t\t\t\t\t{userFirstName}\n\t\t\t\t</a>\n\t\t\t\t{' > Followers'}\n\t\t\t</span>\n\t\t\t{Math.ceil(followers.length / 30) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(followers.length / 30),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={page === Math.ceil(followers.length / 30)}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t\t<div className=\"follow-list\">\n\t\t\t\t{followers.length > 0 ? (\n\t\t\t\t\tfollowers\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(_follower, index) =>\n\t\t\t\t\t\t\t\tindex >= (page - 1) * 30 && index <= page * 30 - 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((follower) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"follow-card\" key={follower.id}>\n\t\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"picture-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\tfollower.id,\n\t\t\t\t\t\t\t\t\t\t\t\tfollower.name.split(' ').join('-')\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.profilePicture === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? noPictureImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: follower.profilePicture\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\talt={follower.name}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<div className=\"user-info\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"name-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.name.split(' ').join('-')\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{follower.name}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"books-and-friends-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>{`${follower.numberOfBooks} books`}</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{' | '}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFriendsPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>{`${follower.numberOfFriends} friends`}</a>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"location-span\">{follower.location}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{follower.currentlyReadingBook !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"middle-section\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"cover-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.currentlyReadingBook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.currentlyReadingBook.title\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.currentlyReadingBook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? follower.currentlyReadingBook.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: noCoverUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={follower.currentlyReadingBook.title}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"book-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"currently-reading-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tCurrently reading:\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.currentlyReadingBook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollower.currentlyReadingBook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{follower.currentlyReadingBook.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tfollower.isFriend\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'hidden add-friend-a'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'add-friend-a'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAddAsFriendPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuserId\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tAdd as Friend\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\t\t\t\t\tfollower.id\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tcompare books\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"no-follow-span\">No followers.</span>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"followers-page follow-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default FollowersPage;\n","import React, { useState, useEffect } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport Firebase from '../../Firebase';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport TopBar from '../Global/TopBar';\nimport '../styles/Friends/PeopleFollowingPage.css';\n\nconst PeopleFollowingPage = ({ match }) => {\n\tconst {\n\t\tparams: { pageId },\n\t} = match;\n\tconst userId = pageId.split('-')[0];\n\tconst userFirstName =\n\t\tpageId.split('-')[1].charAt(0).toUpperCase() +\n\t\tpageId.split('-')[1].slice(1);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [followings, setFollowings] = useState([]);\n\tconst [page, setPage] = useState(1);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tconst noPictureImage =\n\t\t'https://s.gr-assets.com/assets/nophoto/user/u_50x66-632230dc9882b4352d753eedf9396530.png';\n\tconst noCoverUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\n\tuseEffect(() => {\n\t\tconst loadFollowings = async () => {\n\t\t\tsetFollowings(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getInfoForFollowPage(userId, user.userUID, 'following')\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tloadFollowings();\n\t}, [user.userUID, userId]);\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"follow-page-main-content\">\n\t\t\t<span className=\"follow-page-page-indicator\">\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(userId, userFirstName)}\n\t\t\t\t>\n\t\t\t\t\t{userFirstName}\n\t\t\t\t</a>\n\t\t\t\t{userId === user.userUID\n\t\t\t\t\t? ` > People You're Following`\n\t\t\t\t\t: ` > People ${userFirstName} is Following`}\n\t\t\t</span>\n\t\t\t{Math.ceil(followings.length / 30) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(followings.length / 30),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={page === Math.ceil(followings.length / 30)}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t\t<div className=\"follow-list-and-links\">\n\t\t\t\t<div className=\"follow-list\">\n\t\t\t\t\t{followings.length > 0 ? (\n\t\t\t\t\t\tfollowings\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(_following, index) =>\n\t\t\t\t\t\t\t\t\tindex >= (page - 1) * 30 && index <= page * 30 - 1\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((following) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"follow-card\" key={following.id}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"picture-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.name.split(' ').join('-')\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.profilePicture === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? noPictureImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: following.profilePicture\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={following.name}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"user-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"name-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.name.split(' ').join('-')\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{following.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"books-and-friends-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{`${following.numberOfBooks} books`}</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{' | '}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFriendsPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{`${following.numberOfFriends} friends`}</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"location-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{following.location}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{following.currentlyReadingBook !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"middle-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"cover-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.currentlyReadingBook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.currentlyReadingBook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.currentlyReadingBook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? following.currentlyReadingBook.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: noCoverUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={following.currentlyReadingBook.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"book-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"currently-reading-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCurrently reading:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.currentlyReadingBook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.currentlyReadingBook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{following.currentlyReadingBook.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.isFriend\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'hidden add-friend-a'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'add-friend-a'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAddAsFriendPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserId\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tAdd as Friend\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfollowing.id\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tcompare books\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className=\"no-follow-span\">\n\t\t\t\t\t\t\t{userId !== user.userUID\n\t\t\t\t\t\t\t\t? `${userFirstName} is not following anyone.`\n\t\t\t\t\t\t\t\t: `You aren't following anyone.`}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"links\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\tuserFirstName\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`${\n\t\t\t\t\t\tuserId === user.userUID ? 'My' : `${userFirstName}'s`\n\t\t\t\t\t} profile `}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"people-following-page follow-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default PeopleFollowingPage;\n","import React, { useState, useEffect } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport Firebase from '../../Firebase';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport TopBar from '../Global/TopBar';\nimport '../styles/Friends/FriendsPage.css';\n\nconst FriendsPage = ({ match }) => {\n\tconst {\n\t\tparams: { pageId },\n\t} = match;\n\tconst userId = pageId.split('-')[0];\n\tconst userFirstName =\n\t\tpageId.split('-')[1].charAt(0).toUpperCase() +\n\t\tpageId.split('-')[1].slice(1);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [friends, setFriends] = useState([]);\n\tconst [userProfilePicture, setUserProfilePicture] = useState(null);\n\tconst [page, setPage] = useState(1);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tconst noPictureImage =\n\t\t'https://s.gr-assets.com/assets/nophoto/user/u_50x66-632230dc9882b4352d753eedf9396530.png';\n\tconst noCoverUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\n\tuseEffect(() => {\n\t\tconst loadFriends = async () => {\n\t\t\tsetUserProfilePicture(\n\t\t\t\tawait trackPromise(Firebase.getUserProfilePicture(userId))\n\t\t\t);\n\t\t\tsetFriends(\n\t\t\t\tawait trackPromise(\n\t\t\t\t\tFirebase.getInfoForFollowPage(userId, user.userUID, 'friends')\n\t\t\t\t)\n\t\t\t);\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tloadFriends();\n\t}, [user.userUID, userId]);\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"follow-page-main-content\">\n\t\t\t<span className=\"follow-page-page-indicator\">\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(userId, userFirstName)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tuserProfilePicture === undefined\n\t\t\t\t\t\t\t\t? noPictureImage\n\t\t\t\t\t\t\t\t: userProfilePicture\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={userFirstName}\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t{userId === user.userUID\n\t\t\t\t\t? `Your Friends`\n\t\t\t\t\t: `${userFirstName}'s Friends`}\n\t\t\t\t<span className=\"showing-page-span\">{`Showing ${\n\t\t\t\t\tfriends.length === 0 ? 0 : (page - 1) * 30 + 1\n\t\t\t\t}-${\n\t\t\t\t\tpage * 30 - 1 <= friends.length ? page * 30 - 1 : friends.length\n\t\t\t\t} of ${friends.length}`}</span>\n\t\t\t</span>\n\t\t\t{Math.ceil(friends.length / 30) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(friends.length / 30),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={page === Math.ceil(friends.length / 30)}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t\t<div className=\"follow-list-and-links\">\n\t\t\t\t<div className=\"follow-list\">\n\t\t\t\t\t{friends.length > 0 ? (\n\t\t\t\t\t\tfriends\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(_friend, index) =>\n\t\t\t\t\t\t\t\t\tindex >= (page - 1) * 30 && index <= page * 30 - 1\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((friend) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"follow-card\" key={friend.id}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"left-section\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"picture-a\"\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.name.split(' ').join('-')\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.profilePicture === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? noPictureImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: friend.profilePicture\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={friend.name}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"user-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"name-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.name.split(' ').join('-')\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{friend.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"books-and-friends-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{`${friend.numberOfBooks} books`}</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{' | '}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFriendsPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{`${friend.numberOfFriends} friends`}</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"location-span\">{friend.location}</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{friend.currentlyReadingBook !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"middle-section\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"cover-a\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.currentlyReadingBook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.currentlyReadingBook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.currentlyReadingBook.cover !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? friend.currentlyReadingBook.cover\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: noCoverUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={friend.currentlyReadingBook.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"book-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"currently-reading-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCurrently reading:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.currentlyReadingBook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.currentlyReadingBook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{friend.currentlyReadingBook.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.isFriend\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'hidden add-friend-a'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'add-friend-a'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAddAsFriendPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserId\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tAdd as Friend\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserCompareBooksPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfriend.id\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tcompare books\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className=\"no-follow-span\">\n\t\t\t\t\t\t\t{userId !== user.userUID\n\t\t\t\t\t\t\t\t? `${userFirstName} doesn't have any friends.`\n\t\t\t\t\t\t\t\t: `You don't have any friends.`}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"links\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\tuserFirstName\n\t\t\t\t\t\t)}\n\t\t\t\t\t>{`${\n\t\t\t\t\t\tuserId === user.userUID ? 'My' : `${userFirstName}'s`\n\t\t\t\t\t} profile `}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"friends-page follow-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default FriendsPage;\n","import React, { useState, useEffect } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport Firebase from '../../Firebase';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport TopBar from '../Global/TopBar';\nimport '../styles/Explore/ExplorePage.css';\n\nconst ExplorePage = () => {\n\tconst [info, setInfo] = useState(null);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [enjoyedBookSectionSequence, setEnjoyedBookSectionSequence] = useState(\n\t\t1\n\t);\n\tconst [readingBookSectionSequence, setReadingBookSectionSequence] = useState(\n\t\t1\n\t);\n\tconst [\n\t\ttrendingBooksSectionSequence,\n\t\tsetTrendingBooksSectionSequence,\n\t] = useState(1);\n\tconst [articlesSequence, setArticlesSequence] = useState(1);\n\n\tconst booksPerSequence = 4;\n\tconst articlesPerSequence = 2;\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tconst noCoverUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\n\tuseEffect(() => {\n\t\tconst loadInfo = async () => {\n\t\t\tsetInfo(await trackPromise(Firebase.getInfoForExplorePage(user.userUID)));\n\t\t\tsetLoaded(true);\n\t\t};\n\n\t\tloadInfo();\n\t}, [user.userUID]);\n\n\tuseEffect(() => {\n\t\tconsole.log(info);\n\t}, [info]);\n\n\tconst topNewsAndInterviewsSection =\n\t\tloaded && info.articles.length > 0 ? (\n\t\t\t<div className=\"top-news-and-interviews-section\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"featured-article-card\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\tinfo.articles[0].id,\n\t\t\t\t\t\tinfo.articles[0].title\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<img src={info.articles[0].image} alt={info.articles[0].title} />\n\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t<span className=\"article-title-span\">{info.articles[0].title}</span>\n\t\t\t\t\t\t<span className=\"comments-likes-span\">\n\t\t\t\t\t\t\t{`${info.articles[0].numberOfLikes} likes  ${info.articles[0].numberOfComments} comments`}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"see-all-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateNewsPage()}\n\t\t\t\t>\n\t\t\t\t\t<span>{'More news & interviews'}</span>\n\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst enjoyedBookSection =\n\t\tloaded &&\n\t\tinfo.enjoyedBook !== undefined &&\n\t\tinfo.enjoyedBook.similarBooks.length > 0 ? (\n\t\t\t<div className=\"similar-books-section\">\n\t\t\t\t<div className=\"similar-books-section-header explore-page-section-header\">\n\t\t\t\t\t<span className=\"title-span\">\n\t\t\t\t\t\tBecause you enjoyed{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\tinfo.enjoyedBook.id,\n\t\t\t\t\t\t\t\tinfo.enjoyedBook.title\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i>{info.enjoyedBook.title}</i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"back-forward-arrows\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"arrow-back-button\"\n\t\t\t\t\t\t\tdisabled={enjoyedBookSectionSequence === 1}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tsetEnjoyedBookSectionSequence((previous) => previous - 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"arrow-forward-button\"\n\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\tenjoyedBookSectionSequence ===\n\t\t\t\t\t\t\t\tMath.ceil(\n\t\t\t\t\t\t\t\t\tinfo.enjoyedBook.similarBooks.length / booksPerSequence\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tsetEnjoyedBookSectionSequence((previous) => previous + 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"similar-books-list\">\n\t\t\t\t\t{info.enjoyedBook.similarBooks\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(_book, index) =>\n\t\t\t\t\t\t\t\tindex >= (enjoyedBookSectionSequence - 1) * booksPerSequence &&\n\t\t\t\t\t\t\t\tindex <= enjoyedBookSectionSequence * booksPerSequence - 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((book, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-card\"\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={book.cover === undefined ? noCoverUrl : book.cover}\n\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span className=\"title-span\">{book.title}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"author-name-span\">{book.authorName}</span>\n\t\t\t\t\t\t\t\t\t<div className=\"rating-section\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"star\">\n\t\t\t\t\t\t\t\t\t\t\t<svg viewBox=\"0 0 24 24\" role=\"presentation\">\n\t\t\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"RatingStar__fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M12.4770229,1.34326985 L15.0891563,9.1315756 L23.4968842,9.1315756 C23.7747474,9.1315756 24,9.35682823 24,9.63469143 C24,9.79809886 23.9206399,9.95132779 23.7871766,10.0456121 L16.9959586,14.8432273 L19.5982827,22.6117477 C19.6865419,22.8752212 19.5445026,23.1603569 19.2810291,23.2486161 C19.1293386,23.2994298 18.9625235,23.2750752 18.8316924,23.1830139 L12.0000207,18.3758025 L5.1685337,23.1876292 C4.94136559,23.3476374 4.62749722,23.2931935 4.46748907,23.0660254 C4.37533831,22.9351963 4.35092131,22.7683321 4.4017231,22.616585 L7.00408269,14.8432273 L0.212864685,10.0456121 C-0.0140805533,9.88528803 -0.0680876559,9.57134421 0.0922364448,9.34439897 C0.186520784,9.21093568 0.339749724,9.1315756 0.503157148,9.1315756 L8.910885,9.1315756 L11.5230185,1.34326985 C11.6113744,1.0798288 11.8965622,0.937894292 12.1600033,1.02625024 C12.3095218,1.07639751 12.4268756,1.19375135 12.4770229,1.34326985 Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<span className=\"rating-span\">\n\t\t\t\t\t\t\t\t\t\t\t{book.rating.toFixed(2)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"number-of-ratings-span\">{` ${book.numberOfRatings}`}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"see-all-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateSimilarBooksPage(\n\t\t\t\t\t\tinfo.enjoyedBook.id,\n\t\t\t\t\t\tinfo.enjoyedBook.title\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<span>See all</span>\n\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst readingBookSection =\n\t\tloaded &&\n\t\tinfo.readingBook !== undefined &&\n\t\tinfo.readingBook.similarBooks.length > 0 ? (\n\t\t\t<div className=\"similar-books-section\">\n\t\t\t\t<div className=\"similar-books-section-header explore-page-section-header\">\n\t\t\t\t\t<span className=\"title-span\">\n\t\t\t\t\t\tBecause you're reading{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\tinfo.readingBook.id,\n\t\t\t\t\t\t\t\tinfo.readingBook.title\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i>{info.readingBook.title}</i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"back-forward-arrows\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"arrow-back-button\"\n\t\t\t\t\t\t\tdisabled={readingBookSectionSequence === 1}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tsetReadingBookSectionSequence((previous) => previous - 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"arrow-forward-button\"\n\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\treadingBookSectionSequence ===\n\t\t\t\t\t\t\t\tMath.ceil(\n\t\t\t\t\t\t\t\t\tinfo.readingBook.similarBooks.length / booksPerSequence\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tsetReadingBookSectionSequence((previous) => previous + 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"similar-books-list\">\n\t\t\t\t\t{info.readingBook.similarBooks\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(_book, index) =>\n\t\t\t\t\t\t\t\tindex >= (readingBookSectionSequence - 1) * booksPerSequence &&\n\t\t\t\t\t\t\t\tindex <= readingBookSectionSequence * booksPerSequence - 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((book, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-card\"\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={book.cover === undefined ? noCoverUrl : book.cover}\n\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span className=\"title-span\">{book.title}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"author-name-span\">{book.authorName}</span>\n\t\t\t\t\t\t\t\t\t<div className=\"rating-section\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"star\">\n\t\t\t\t\t\t\t\t\t\t\t<svg viewBox=\"0 0 24 24\" role=\"presentation\">\n\t\t\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"RatingStar__fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M12.4770229,1.34326985 L15.0891563,9.1315756 L23.4968842,9.1315756 C23.7747474,9.1315756 24,9.35682823 24,9.63469143 C24,9.79809886 23.9206399,9.95132779 23.7871766,10.0456121 L16.9959586,14.8432273 L19.5982827,22.6117477 C19.6865419,22.8752212 19.5445026,23.1603569 19.2810291,23.2486161 C19.1293386,23.2994298 18.9625235,23.2750752 18.8316924,23.1830139 L12.0000207,18.3758025 L5.1685337,23.1876292 C4.94136559,23.3476374 4.62749722,23.2931935 4.46748907,23.0660254 C4.37533831,22.9351963 4.35092131,22.7683321 4.4017231,22.616585 L7.00408269,14.8432273 L0.212864685,10.0456121 C-0.0140805533,9.88528803 -0.0680876559,9.57134421 0.0922364448,9.34439897 C0.186520784,9.21093568 0.339749724,9.1315756 0.503157148,9.1315756 L8.910885,9.1315756 L11.5230185,1.34326985 C11.6113744,1.0798288 11.8965622,0.937894292 12.1600033,1.02625024 C12.3095218,1.07639751 12.4268756,1.19375135 12.4770229,1.34326985 Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<span className=\"rating-span\">\n\t\t\t\t\t\t\t\t\t\t\t{book.rating.toFixed(2)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"number-of-ratings-span\">{` ${book.numberOfRatings}`}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"see-all-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateSimilarBooksPage(\n\t\t\t\t\t\tinfo.readingBook.id,\n\t\t\t\t\t\tinfo.readingBook.title\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<span>See all</span>\n\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst trendingBooksSection =\n\t\tloaded &&\n\t\tinfo.trendingBooks !== undefined &&\n\t\tinfo.trendingBooks.length > 0 ? (\n\t\t\t<div className=\"similar-books-section\">\n\t\t\t\t<div className=\"similar-books-section-header explore-page-section-header\">\n\t\t\t\t\t<span className=\"title-span\">Trending with Goodreads members</span>\n\t\t\t\t\t<div className=\"back-forward-arrows\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"arrow-back-button\"\n\t\t\t\t\t\t\tdisabled={trendingBooksSectionSequence === 1}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tsetTrendingBooksSectionSequence((previous) => previous - 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"arrow-forward-button\"\n\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\ttrendingBooksSectionSequence ===\n\t\t\t\t\t\t\t\tMath.ceil(info.trendingBooks.length / booksPerSequence)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tsetTrendingBooksSectionSequence((previous) => previous + 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"similar-books-list\">\n\t\t\t\t\t{info.trendingBooks\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(_book, index) =>\n\t\t\t\t\t\t\t\tindex >=\n\t\t\t\t\t\t\t\t\t(trendingBooksSectionSequence - 1) * booksPerSequence &&\n\t\t\t\t\t\t\t\tindex <= trendingBooksSectionSequence * booksPerSequence - 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((book, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"book-card\"\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={book.cover === undefined ? noCoverUrl : book.cover}\n\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span className=\"title-span\">{book.title}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"author-name-span\">{book.authorName}</span>\n\t\t\t\t\t\t\t\t\t<div className=\"rating-section\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"star\">\n\t\t\t\t\t\t\t\t\t\t\t<svg viewBox=\"0 0 24 24\" role=\"presentation\">\n\t\t\t\t\t\t\t\t\t\t\t\t<g\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"RatingStar__fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M12.4770229,1.34326985 L15.0891563,9.1315756 L23.4968842,9.1315756 C23.7747474,9.1315756 24,9.35682823 24,9.63469143 C24,9.79809886 23.9206399,9.95132779 23.7871766,10.0456121 L16.9959586,14.8432273 L19.5982827,22.6117477 C19.6865419,22.8752212 19.5445026,23.1603569 19.2810291,23.2486161 C19.1293386,23.2994298 18.9625235,23.2750752 18.8316924,23.1830139 L12.0000207,18.3758025 L5.1685337,23.1876292 C4.94136559,23.3476374 4.62749722,23.2931935 4.46748907,23.0660254 C4.37533831,22.9351963 4.35092131,22.7683321 4.4017231,22.616585 L7.00408269,14.8432273 L0.212864685,10.0456121 C-0.0140805533,9.88528803 -0.0680876559,9.57134421 0.0922364448,9.34439897 C0.186520784,9.21093568 0.339749724,9.1315756 0.503157148,9.1315756 L8.910885,9.1315756 L11.5230185,1.34326985 C11.6113744,1.0798288 11.8965622,0.937894292 12.1600033,1.02625024 C12.3095218,1.07639751 12.4268756,1.19375135 12.4770229,1.34326985 Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<span className=\"rating-span\">\n\t\t\t\t\t\t\t\t\t\t\t{book.rating.toFixed(2)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=\"number-of-ratings-span\">{` ${book.numberOfRatings}`}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst bottomNewsAndInterviewsSection =\n\t\tloaded && info.articles.length > 1 ? (\n\t\t\t<div className=\"bottom-news-and-interviews-section\">\n\t\t\t\t<div className=\"bottom-news-and-interviews-section-header explore-page-section-header\">\n\t\t\t\t\t<span className=\"title-span\">News and interviews</span>\n\t\t\t\t\t<div className=\"back-forward-arrows\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"arrow-back-button\"\n\t\t\t\t\t\t\tdisabled={articlesSequence === 1}\n\t\t\t\t\t\t\tonClick={() => setArticlesSequence((previous) => previous - 1)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"arrow-forward-button\"\n\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\tarticlesSequence ===\n\t\t\t\t\t\t\t\tMath.ceil((info.articles.length - 1) / articlesPerSequence)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() => setArticlesSequence((previous) => previous + 1)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"articles-list\">\n\t\t\t\t\t{info.articles\n\t\t\t\t\t\t.slice(1)\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(_article, index) =>\n\t\t\t\t\t\t\t\tindex >= (articlesSequence - 1) * articlesPerSequence &&\n\t\t\t\t\t\t\t\tindex <= articlesSequence * articlesPerSequence - 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((article, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"bottom-article-card\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateArticlePage(\n\t\t\t\t\t\t\t\t\t\tarticle.id,\n\t\t\t\t\t\t\t\t\t\tarticle.title\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"image-container\">\n\t\t\t\t\t\t\t\t\t\t<img src={article.image} alt={article.title} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span className=\"article-title-span\">{article.title}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"see-all-a\"\n\t\t\t\t\thref={Firebase.pageGenerator.generateNewsPage()}\n\t\t\t\t>\n\t\t\t\t\t<span>{'More news & interviews'}</span>\n\t\t\t\t\t<span className=\"chevron-span\"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst mainContent = (\n\t\t<div className=\"explore-page-main-content\">\n\t\t\t{topNewsAndInterviewsSection}\n\t\t\t{enjoyedBookSection}\n\t\t\t{readingBookSection}\n\t\t\t{trendingBooksSection}\n\t\t\t{bottomNewsAndInterviewsSection}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className=\"explore-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default ExplorePage;\n","import React, { useState, useEffect } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { trackPromise } from 'react-promise-tracker';\nimport Firebase from '../../Firebase';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Explore/SearchPage.css';\n\nconst SearchPage = () => {\n\tconst history = useHistory();\n\tconst query = new URLSearchParams(useLocation().search);\n\tconst q =\n\t\tquery.get('q') !== null && query.get('q') !== undefined\n\t\t\t? query.get('q')\n\t\t\t: '';\n\tconst searchType =\n\t\tquery.get('search_type') !== null && query.get('search_type') !== undefined\n\t\t\t? query.get('search_type')\n\t\t\t: 'books';\n\tconst searchField =\n\t\tquery.get('search_field') !== null &&\n\t\tquery.get('search_field') !== undefined\n\t\t\t? query.get('search_field')\n\t\t\t: 'all';\n\tconst [savingShelves, setSavingShelves] = useState([]);\n\tconst [\n\t\tareAddShelfInputSectionsHidden,\n\t\tsetAreAddShelfInputSectionsHidden,\n\t] = useState([]);\n\tconst [addShelfInputs, setAddShelfInputs] = useState([]);\n\tconst [exhibitedStarRatings, setExhibitedStarRatings] = useState([]);\n\tconst [areShelfPopupsHidden, setAreShelfPopupsHidden] = useState([]);\n\tconst [areShelfPopupsBottomHidden, setAreShelfPopupsBottomHidden] = useState(\n\t\t[]\n\t);\n\tconst [shelfPopupReadingInputs, setShelfPopupReadingInputs] = useState([]);\n\tconst [shelfPopupToReadInputs, setShelfPopupToReadInputs] = useState([]);\n\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [searchInput, setSearchInput] = useState(q);\n\tconst [searchFieldInput, setSearchFieldInput] = useState(\n\t\tsearchType === 'people' ? 'author' : searchField\n\t);\n\tconst [books, setBooks] = useState([]);\n\tconst [people, setPeople] = useState([]);\n\tconst [genre, setGenre] = useState(null);\n\tconst [page, setPage] = useState(1);\n\n\tconst user = JSON.parse(localStorage.getItem('userState'));\n\n\tconst noPictureImage =\n\t\t'https://s.gr-assets.com/assets/nophoto/user/u_50x66-632230dc9882b4352d753eedf9396530.png';\n\tconst noCoverUrl =\n\t\t'https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png';\n\tconst resultsPerPage = 20;\n\n\tuseEffect(() => {\n\t\tconst loadInfo = async () => {\n\t\t\tconst info = await trackPromise(\n\t\t\t\tFirebase.getInfoForSearchPage(user.userUID, q, searchType, searchField)\n\t\t\t);\n\t\t\tif (q.length === 0) {\n\t\t\t\tsetBooks([]);\n\t\t\t\tsetPeople([]);\n\t\t\t\tsetGenre(null);\n\t\t\t} else if (searchField === 'genre') {\n\t\t\t\tsetGenre(info);\n\t\t\t} else if (searchType === 'books') {\n\t\t\t\tsetSavingShelves(info.map((_book) => false));\n\t\t\t\tsetAreAddShelfInputSectionsHidden(info.map((_book) => true));\n\t\t\t\tsetAddShelfInputs(info.map((_book) => ''));\n\t\t\t\tsetExhibitedStarRatings(\n\t\t\t\t\tinfo.map((book) =>\n\t\t\t\t\t\tbook.userRating !== undefined ? book.userRating : 0\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetAreShelfPopupsHidden(info.map((_book) => true));\n\t\t\t\tsetAreShelfPopupsBottomHidden(info.map((_book) => true));\n\t\t\t\tsetShelfPopupReadingInputs(info.map((_book) => ''));\n\t\t\t\tsetShelfPopupToReadInputs(info.map((_book) => ''));\n\t\t\t\tsetBooks(info);\n\t\t\t} else {\n\t\t\t\tsetPeople(info);\n\t\t\t}\n\t\t\tsetLoaded(true);\n\t\t};\n\t\tloadInfo();\n\t}, [q, searchType, searchField, user.userUID]);\n\n\tconst displayRemoveBookConfirm = () => {\n\t\treturn window.confirm(\n\t\t\t'Removing a book deletes your rating, review, etc. Remove this book from all your shelves?'\n\t\t);\n\t};\n\n\tconst removeBookSafely = (bookObject, index) => {\n\t\tif (displayRemoveBookConfirm()) {\n\t\t\tFirebase.removeBookFromShelf(user.userUID, bookObject.bookId);\n\t\t\tsetBooks((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tuserStatus: undefined,\n\t\t\t\t\t\t\t\tuserProgress: undefined,\n\t\t\t\t\t\t\t\tuserRating: undefined,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst changeBookShelf = async (bookObject, index, shelf) => {\n\t\tif (bookObject.bookId !== undefined) {\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t);\n\t\t\tawait Firebase.addBookToShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.bookId,\n\t\t\t\tshelf,\n\t\t\t\thistory\n\t\t\t);\n\t\t\tsetBooks((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tuserStatus: shelf,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t\tsetSavingShelves((previous) =>\n\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t);\n\t\t}\n\t};\n\n\tconst rateBook = async (bookObject, index, rating) => {\n\t\tif (bookObject.bookId !== undefined) {\n\t\t\tawait Firebase.rateBook(user.userUID, bookObject.bookId, rating, history);\n\t\t\tsetBooks((previous, i) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tuserStatus:\n\t\t\t\t\t\t\t\t\tpreviousObject.userStatus !== undefined\n\t\t\t\t\t\t\t\t\t\t? previousObject.userStatus\n\t\t\t\t\t\t\t\t\t\t: 'read',\n\t\t\t\t\t\t\t\tuserRating: rating,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst updateProgress = async (bookObject, index, pages) => {\n\t\tif (\n\t\t\tuser.userUID !== null &&\n\t\t\tuser.userUID !== undefined &&\n\t\t\tbookObject.bookId !== undefined &&\n\t\t\tpages.length > 0\n\t\t) {\n\t\t\tawait Firebase.updateBookInShelf(\n\t\t\t\tuser.userUID,\n\t\t\t\tbookObject.bookId,\n\t\t\t\tparseInt(pages)\n\t\t\t);\n\t\t\tsetBooks((previous) => {\n\t\t\t\treturn previous.map((previousObject, i) =>\n\t\t\t\t\ti === index\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\tuserProgress: pages,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: previousObject\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst generateAddToShelfButton = (bookObject, index) => {\n\t\treturn loaded && bookObject.userStatus === 'reading' ? (\n\t\t\t<div className=\"book-on-reading-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up reading\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>Update your reading progress:</b>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tI'm on page{' '}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupReadingInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t\t\t? 'page-progress-input'\n\t\t\t\t\t\t\t\t\t\t\t: 'page-progress-input white-background'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupReadingInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\tof {bookObject.pageCount}.{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['reading']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareShelfPopupsBottomHidden[index]\n\t\t\t\t\t\t\t\t\t? 'shelf-pop-up-bottom hidden'\n\t\t\t\t\t\t\t\t\t: 'shelf-pop-up-bottom'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tupdateProgress(\n\t\t\t\t\t\t\t\t\t\tbookObject,\n\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\tshelfPopupReadingInputs[index]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"progress-finished-button\"\n\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\tchangeBookShelf(bookObject, index, 'read');\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFinished book\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf reading\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Currently Reading</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'read' ? (\n\t\t\t<div className=\"book-on-read-shelf\">\n\t\t\t\t<div className=\"shelf-pop-up-wrapper\">\n\t\t\t\t\t<div className=\"shelf-pop-up read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateWriteReviewPageForBook(\n\t\t\t\t\t\t\t\t\tbookObject.bookId\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWrite a review\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Read</span>\n\t\t\t</div>\n\t\t) : loaded && bookObject.userStatus === 'to-read' ? (\n\t\t\t<div className=\"book-on-to-read-shelf\">\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tareShelfPopupsHidden[index]\n\t\t\t\t\t\t\t? 'shelf-pop-up-wrapper'\n\t\t\t\t\t\t\t: 'shelf-pop-up-wrapper always-visible'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"shelf-pop-up to-read\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-top\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={shelfPopupToReadInputs[index]}\n\t\t\t\t\t\t\t\t\tclassName=\"shelf-pop-up-to-read-input\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\t\tsetShelfPopupToReadInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index ? newValue : value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\ton your <b>To Read</b> shelf.\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{areShelfPopupsBottomHidden[index] ? (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tuser.userUID !== undefined && user.userUID !== null\n\t\t\t\t\t\t\t\t\t\t\t? Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.userInfo.firstName,\n\t\t\t\t\t\t\t\t\t\t\t\t\t['to-read']\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: '/user/sign_in'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tView shelf\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"shelf-pop-up-bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-submit-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tFirebase.changeBookPosition(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.bookId,\n\t\t\t\t\t\t\t\t\t\t\tparseInt(shelfPopupToReadInputs[index])\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetBooks((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((previousObject, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\ti === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previousObject,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...previousObject.book,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoReadBookPosition: parseInt(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshelfPopupToReadInputs[index]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t: previousObject\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"progress-cancel-button\"\n\t\t\t\t\t\t\t\t\tonClick={(_e) => {\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsBottomHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreShelfPopupsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"shelf-pop-up-arrow-grey\">\n\t\t\t\t\t\t<div className=\"shelf-pop-up-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"remove-book-from-shelf to-read\"\n\t\t\t\t\tonClick={(_e) => removeBookSafely(bookObject, index)}\n\t\t\t\t></button>\n\t\t\t\t<span>Want to Read</span>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclassName=\"book-page-want-to-read-button\"\n\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t>\n\t\t\t\t{savingShelves[index] ? '...saving' : 'Want to Read'}\n\t\t\t</button>\n\t\t);\n\t};\n\n\tconst generateBookOptionsDropdown = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-book-option-dropdown-trigger\">\n\t\t\t\t<div className=\"book-options-dropdown\">\n\t\t\t\t\t<div className=\"book-options-dropdown-top\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRead\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-currently-reading-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'reading')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCurrently Reading\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-want-to-read-button\"\n\t\t\t\t\t\t\tonClick={() => changeBookShelf(bookObject, index, 'to-read')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWant to Read\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"book-options-dropdown-bottom\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf\"\n\t\t\t\t\t\t\tonClick={(_e) =>\n\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? false : value))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd Shelf\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tareAddShelfInputSectionsHidden[index]\n\t\t\t\t\t\t\t\t\t? 'dropdown-add-shelf-input-section hidden'\n\t\t\t\t\t\t\t\t\t: 'dropdown-add-shelf-input-section'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={addShelfInputs[index]}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst newValue = e.target.value;\n\t\t\t\t\t\t\t\t\tsetAddShelfInputs((previous) =>\n\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? newValue : value))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"dropdown-add-shelf-add-button\"\n\t\t\t\t\t\t\t\tonClick={async (_e) => {\n\t\t\t\t\t\t\t\t\tif (addShelfInputs[index].length > 0) {\n\t\t\t\t\t\t\t\t\t\tawait Firebase.addBookToUserShelf(\n\t\t\t\t\t\t\t\t\t\t\tuser.userUID,\n\t\t\t\t\t\t\t\t\t\t\tbookObject.rootBook,\n\t\t\t\t\t\t\t\t\t\t\taddShelfInputs[index],\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\thistory\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tsetAreAddShelfInputSectionsHidden((previous) =>\n\t\t\t\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? true : value))\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst generateRateBookSection = (bookObject, index) => {\n\t\treturn (\n\t\t\t<div className=\"book-page-rate-book\">\n\t\t\t\t{bookObject.userRating === undefined ? null : (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"clear-rating-button\"\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, undefined)}\n\t\t\t\t\t>\n\t\t\t\t\t\tClear rating\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{bookObject.userRating === undefined ? (\n\t\t\t\t\t<span className=\"rate-this-book\">Rate this book</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span className=\"rate-this-book my-rating\">My rating:</span>\n\t\t\t\t)}\n\t\t\t\t<div className=\"book-page-rate-book-star-rating\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 0\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"did not like it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 1 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 1)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 1\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was ok\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 2 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 2)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 2\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 3 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 3)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 3\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"really liked it\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 4 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 4)}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\texhibitedStarRatings[index] > 4\n\t\t\t\t\t\t\t\t? 'interactive-star small on'\n\t\t\t\t\t\t\t\t: 'interactive-star small'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle=\"it was amazing\"\n\t\t\t\t\t\tonMouseOver={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) => (i === index ? 5 : value))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseLeave={(_e) =>\n\t\t\t\t\t\t\tsetExhibitedStarRatings((previous) =>\n\t\t\t\t\t\t\t\tprevious.map((value, i) =>\n\t\t\t\t\t\t\t\t\ti === index && bookObject.userRating !== undefined\n\t\t\t\t\t\t\t\t\t\t? bookObject.userRating\n\t\t\t\t\t\t\t\t\t\t: i === index\n\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => rateBook(bookObject, index, 5)}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst searchArea = loaded ? (\n\t\t<div className=\"search-area\">\n\t\t\t<div className=\"input-and-button\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={searchInput}\n\t\t\t\t\tonChange={(e) => setSearchInput(e.target.value)}\n\t\t\t\t></input>\n\t\t\t\t<a\n\t\t\t\t\thref={Firebase.pageGenerator.generateSearchPage(\n\t\t\t\t\t\tsearchInput,\n\t\t\t\t\t\tsearchType,\n\t\t\t\t\t\tsearchFieldInput\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\tSearch\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div className=\"radio-inputs\">\n\t\t\t\t{['all', 'title', 'author', 'genre'].map((field, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"input-wrapper\" key={index}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tid={field}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tchecked={searchFieldInput === field}\n\t\t\t\t\t\t\t\tvalue={field}\n\t\t\t\t\t\t\t\tonChange={(_e) => setSearchFieldInput(field)}\n\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t<label htmlFor={field}>{field}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t) : null;\n\n\tconst navigationTabsSection = loaded ? (\n\t\t<div className=\"search-page-navigation-tabs-section\">\n\t\t\t<a\n\t\t\t\tclassName={searchType === 'books' ? 'disabled' : ''}\n\t\t\t\thref={Firebase.pageGenerator.generateSearchPage(\n\t\t\t\t\tq,\n\t\t\t\t\t'books',\n\t\t\t\t\tsearchField\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\tBooks\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\tclassName={searchType === 'people' ? 'disabled' : ''}\n\t\t\t\thref={Firebase.pageGenerator.generateSearchPage(\n\t\t\t\t\tq,\n\t\t\t\t\t'people',\n\t\t\t\t\tsearchField\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\tPeople\n\t\t\t</a>\n\t\t</div>\n\t) : null;\n\n\tconst bookResultsSection =\n\t\tloaded && searchField !== 'genre' ? (\n\t\t\t<div className=\"book-results-section\">\n\t\t\t\t{books.length > 0 ? (\n\t\t\t\t\t<span className=\"total-results-span\">{`Page ${page} of about ${books.length} results`}</span>\n\t\t\t\t) : null}\n\t\t\t\t<div className=\"book-list\">\n\t\t\t\t\t{books\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(_book, index) =>\n\t\t\t\t\t\t\t\tindex >= (page - 1) * 20 && index <= page * 20 - 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((book, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"book-result-card\" key={index}>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"cover-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={book.cover !== undefined ? book.cover : noCoverUrl}\n\t\t\t\t\t\t\t\t\t\t\talt={book.title}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"book-title-a\"\n\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookPage(\n\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{book.title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span className=\"authorship-span\">\n\t\t\t\t\t\t\t\t\t\t\t{'by '}\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateAuthorPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.authorId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.authorName\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{book.authorName}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t{book.authorIsMember ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"goodreads-member-span\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{' (Goodreads Author)'}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<div className=\"other-info-section\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"search-page-general-rating-stars\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 0.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 1.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 2.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 3.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.averageRating >= 5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating >= 4.5\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-full'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: book.averageRating > 4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'static-star small almost-empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'static-star small empty'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{`${book.averageRating.toFixed(2)} avg rating  ${\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.numberOfRatings\n\t\t\t\t\t\t\t\t\t\t\t\t} ratings ${\n\t\t\t\t\t\t\t\t\t\t\t\t\tbook.publishedYear !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? ` published ${book.publishedYear}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t\t\t} `}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateBookEditionsPage(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.title\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t>{` ${book.numberOfEditions} editions`}</a>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"read-buy-section\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"shelves-rating\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`want-to-read-button-and-options ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.userStatus !== undefined ? book.userStatus : ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{generateAddToShelfButton(book, index)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{generateBookOptionsDropdown(book, index)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{generateRateBookSection(book, index)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{book.amazonLink !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<a className=\"get-a-copy-a\" href={book.amazonLink}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tGet a copy\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t\t{Math.ceil(books.length / resultsPerPage) > 1 ? (\n\t\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t previous\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlength: Math.ceil(books.length / resultsPerPage),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\t\tdisabled={page === Math.ceil(books.length / resultsPerPage)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tnext \n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t) : loaded && searchField === 'genre' ? (\n\t\t\t<div className=\"book-results-section\">\n\t\t\t\t{genre !== null ? (\n\t\t\t\t\t<div className=\"genre-result\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tGenre:{' '}\n\t\t\t\t\t\t\t{genre.parentGenre !== undefined ? (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(\n\t\t\t\t\t\t\t\t\t\t\tgenre.parentGenre\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{genre.parentGenre}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t{' > '}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<a href={Firebase.pageGenerator.generateGenrePage(genre.name)}>\n\t\t\t\t\t\t\t\t{genre.name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t\t<div className=\"search-unavailable-section\">\n\t\t\t\t\t<span>Search is temporarily unavailable.</span>\n\t\t\t\t\t<span>Use this time to read a book!</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\n\tconst peopleResultsSection = loaded ? (\n\t\t<div className=\"people-results-section\">\n\t\t\t{people.length > 0 ? (\n\t\t\t\t<span className=\"total-results-span\">{`Page ${page} of about ${people.length} results`}</span>\n\t\t\t) : null}\n\t\t\t<div className=\"people-list\">\n\t\t\t\t{people\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(_person, index) =>\n\t\t\t\t\t\t\tindex >= (page - 1) * 20 && index <= page * 20 - 1\n\t\t\t\t\t)\n\t\t\t\t\t.map((person, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className=\"person-result-card\" key={index}>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"person-image-a\"\n\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\tperson.id,\n\t\t\t\t\t\t\t\t\t\tperson.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\t\tperson.profilePicture === undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? noPictureImage\n\t\t\t\t\t\t\t\t\t\t\t\t: person.profilePicture\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\talt={person.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div className=\"right-section\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"person-name-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserPage(\n\t\t\t\t\t\t\t\t\t\t\tperson.id,\n\t\t\t\t\t\t\t\t\t\t\tperson.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{person.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t{person.location !== undefined ? (\n\t\t\t\t\t\t\t\t\t\t<span className=\"location-span\">{person.location}</span>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"person-friends-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserFriendsPage(\n\t\t\t\t\t\t\t\t\t\t\tperson.id,\n\t\t\t\t\t\t\t\t\t\t\tperson.name\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{person.numberOfFriends === 1\n\t\t\t\t\t\t\t\t\t\t\t? '1 friend'\n\t\t\t\t\t\t\t\t\t\t\t: `${person.numberOfFriends} friends`}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName=\"person-shelves-a\"\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateUserShelfPage(\n\t\t\t\t\t\t\t\t\t\t\tperson.id,\n\t\t\t\t\t\t\t\t\t\t\tperson.name.split(' ')[0]\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{person.numberOfBooks === 1\n\t\t\t\t\t\t\t\t\t\t\t? '1 book'\n\t\t\t\t\t\t\t\t\t\t\t: `${person.numberOfBooks} books`}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\t\t\t{Math.ceil(people.length / resultsPerPage) > 1 ? (\n\t\t\t\t<div className=\"page-navigation-section\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous - 1)}\n\t\t\t\t\t\tdisabled={page === 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t previous\n\t\t\t\t\t</button>\n\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlength: Math.ceil(people.length / resultsPerPage),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(_x, i) => i + 1\n\t\t\t\t\t).map((number) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\tonClick={(_e) => setPage(number)}\n\t\t\t\t\t\t\t\tdisabled={page === number}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{page !== number ? number : <i>{number}</i>}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(_e) => setPage((previous) => previous + 1)}\n\t\t\t\t\t\tdisabled={page === Math.ceil(people.length / resultsPerPage)}\n\t\t\t\t\t>\n\t\t\t\t\t\tnext \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst mainContentLeftSection = loaded ? (\n\t\t<div className=\"search-page-main-content-left-section\">\n\t\t\t<span className=\"page-title-span\">Search</span>\n\t\t\t{searchArea}\n\t\t\t{navigationTabsSection}\n\t\t\t{searchType === 'books' ? bookResultsSection : peopleResultsSection}\n\t\t</div>\n\t) : null;\n\n\tconst mainContentRightSection = loaded ? (\n\t\t<div className=\"search-page-main-content-right-section\">\n\t\t\t<div className=\"top-anchors\">\n\t\t\t\t<a href={Firebase.pageGenerator.generateAddBookPage()}>\n\t\t\t\t\tManually add a book\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t{searchType === 'books' && searchField !== 'genre' ? (\n\t\t\t\t<div className=\"top-shelves-area\">\n\t\t\t\t\t<span className=\"top-shelves-area-title\">Related Shelves</span>\n\t\t\t\t\t{books\n\t\t\t\t\t\t.map((book) => book.genreShelves)\n\t\t\t\t\t\t.reduce(\n\t\t\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\t\t\tprevious.concat(\n\t\t\t\t\t\t\t\t\tcurrent.filter(\n\t\t\t\t\t\t\t\t\t\t(genreShelf) =>\n\t\t\t\t\t\t\t\t\t\t\t!previous.map((p) => p.name).includes(genreShelf.name)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map((shelf, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<span className=\"genre-shelf-span\" key={index}>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={Firebase.pageGenerator.generateGenrePage(shelf.name)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{shelf.name}\n\t\t\t\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\t\t\t\t<span className=\"number-of-books-span\">\n\t\t\t\t\t\t\t\t\t\t({shelf.numberOfBooks})\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t) : null;\n\n\tconst mainContent = loaded ? (\n\t\t<div className=\"search-page-main-content\">\n\t\t\t{mainContentLeftSection}\n\t\t\t{mainContentRightSection}\n\t\t</div>\n\t) : null;\n\n\treturn (\n\t\t<div className=\"search-page\">\n\t\t\t<TopBar />\n\t\t\t{mainContent}\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default SearchPage;\n","import React from 'react';\nimport TopBar from '../Global/TopBar';\nimport HomePageFootBar from '../Authentication/HomePageFootBar';\nimport '../styles/Error/ErrorPage.css';\n\nconst ErrorPage = () => {\n\tconst templates = [\n\t\t{\n\t\t\tmessage: 'Were sorry, you seem to have stumbled on a bad link.',\n\t\t\tquote:\n\t\t\t\t'Two links diverged from a yellow page,\\nAnd sorry I could not travel both\\nAnd be one traveler, long I stood\\nAnd looked down one as far as I could\\nTo where it broke in the understroke;\\n\\nThen took the other, as just as fair\\nAnd having perhaps the better claim,\\nBecause it was grassy and wanted wear;\\nThough as for that the passing there\\nMay wear them really about the same,\\n\\nAnd both that page-load equally lay\\nIn bits no click had colored black.',\n\t\t\tbook: {\n\t\t\t\tcover:\n\t\t\t\t\t'https://s.gr-assets.com/assets/error_pages/not_found/frost_book-63a7b8d45d1a90d855083d4dea811026.png',\n\t\t\t\ttitle: 'The Road Not Taken',\n\t\t\t},\n\t\t\tauthor: {\n\t\t\t\tphoto:\n\t\t\t\t\t'https://s.gr-assets.com/assets/error_pages/not_found/frost_author-5ca4ea23d1c35dd6db39c432abcff0cf.png',\n\t\t\t\tname: 'Robert Frost',\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tmessage:\n\t\t\t\t'Yarr, the page you requested cant be charted on any known map.',\n\t\t\tquote:\n\t\t\t\t'It would be a lot quicker than that if we could just sail straight there, but I was looking at the nautical charts, and theres a dirty great sea serpent right in the middle of the ocean!\\n\\nFitzRoy frowned. I think they just draw those on maps to add a bit of decoration. It doesnt actually mean theres a sea serpent there.\\n\\nThe galley went rather quiet. A few of the pirate crew stared intently out of the portholes, embarrassed at their Captains mistake. But to everyones relief, instead of running somebody through, the Pirate Captain just narrowed his eyes thoughtfully.\\n\\nThat explains a lot, he said. I suppose its also why weve never glimpsed that giant compass in the corner of the Atlantic. I have to say, Im a little disappointed.',\n\t\t\tbook: {\n\t\t\t\tcover:\n\t\t\t\t\t'https://s.gr-assets.com/assets/error_pages/not_found/pirates_book-ca3112b76cf166f6cf97f2ce19429386.png',\n\t\t\t\ttitle: 'The Pirates! In an Adventure with Scientists',\n\t\t\t},\n\t\t\tauthor: {\n\t\t\t\tphoto:\n\t\t\t\t\t'https://s.gr-assets.com/assets/error_pages/not_found/pirates_author-9027bd4f549b8d0b01e23c2368fa42b3.png',\n\t\t\t\tname: 'Gideon Defoe',\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tmessage: \"You've hit a bad link, but don't panic!\",\n\t\t\tquote:\n\t\t\t\t'\"I dont know what Im looking for.\\n\"Why not?\"\\n\"Because...because...I think it might be because if I knew\\nI wouldnt be able to look for them.',\n\t\t\tbook: {\n\t\t\t\tcover:\n\t\t\t\t\t'https://s.gr-assets.com/assets/error_pages/not_found/hitchhikers_book-0909ea93cabdeba89c38901ab3eadbf5.png',\n\t\t\t\ttitle: \"The Hitchhiker's Guide to the Galaxy\",\n\t\t\t},\n\t\t\tauthor: {\n\t\t\t\tphoto:\n\t\t\t\t\t'https://s.gr-assets.com/assets/error_pages/not_found/hitchhikers_author-0cc7d6798db276033042fd2a1dd1b4ef.png',\n\t\t\t\tname: 'Douglas Adams',\n\t\t\t},\n\t\t},\n\t];\n\tconst template = templates[Math.floor(Math.random() * 2)];\n\n\treturn (\n\t\t<div className=\"error-page\">\n\t\t\t<TopBar />\n\t\t\t<span className=\"error-page-message\">{template.message}</span>\n\t\t\t<div className=\"middle-section\">\n\t\t\t\t<div className=\"quote-section\">\n\t\t\t\t\t<span className=\"quote-span\">{template.quote}</span>\n\t\t\t\t\t<span className=\"quote-authorship-span\">\n\t\t\t\t\t\t{` ${template.author.name}, `}\n\t\t\t\t\t\t<i>{template.book.title}</i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"book-and-author-section\">\n\t\t\t\t\t<img src={template.book.cover} alt=\"Book\" />\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"author-picture\"\n\t\t\t\t\t\tsrc={template.author.photo}\n\t\t\t\t\t\talt={template.author.name}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<a className=\"back-to-homepage-a goodreads-button\" href=\"/\">\n\t\t\t\tBack to the Goodreads homepage\n\t\t\t</a>\n\t\t\t<HomePageFootBar />\n\t\t</div>\n\t);\n};\n\nexport default ErrorPage;\n","import React from 'react';\nimport ErrorPage from './components/Error/ErrorPage';\n\nexport default class ErrorBoundary extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { hasError: false, error: '', info: '', stack: '' };\n\t}\n\n\tstatic getDerivedStateFromError(error) {\n\t\treturn { hasError: true };\n\t}\n\n\tcomponentDidCatch(error, errorInfo) {\n\t\tthis.setState({ error, info: errorInfo, stack: error.stack });\n\t}\n\n\trender() {\n\t\tif (this.state.hasError) {\n\t\t\treturn <ErrorPage></ErrorPage>;\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Switch, Route, useLocation } from 'react-router-dom';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport reducer from './reducers/reducer';\nimport App from './App';\nimport SignInPage from './components/Authentication/SignInPage';\nimport SignUpPage from './components/Authentication/SignUpPage';\nimport SignOutPage from './components/Authentication/SignOutPage';\nimport BookPage from './components/Books/BookPage';\nimport ForgotPasswordPage from './components/Authentication/ForgotPasswordPage';\nimport BookStatsForEditionPage from './components/Books/BookStatsForEditionPage';\nimport BookAllStatsPage from './components/Books/BookAllStatsPage';\nimport SimilarBooksPage from './components/Books/SimilarBooksPage';\nimport BookEditionsPage from './components/Books/BookEditionsPage';\nimport BookCoverPage from './components/Books/BookCoverPage';\nimport BookPhotoPage from './components/Books/BookPhotoPage';\nimport AddNewBookPage from './components/Books/AddNewBookPage';\nimport BookTopShelvesPage from './components/Books/BookTopShelvesPage';\nimport BookGenreShelfPage from './components/Books/BookGenreShelfPage';\nimport BookTriviaPage from './components/Books/BookTriviaPage';\nimport BookQuotesPage from './components/Books/BookQuotesPage';\nimport BookListsPage from './components/Books/BookListsPage';\nimport AuthorPage from './components/Authors/AuthorPage';\nimport FavoriteAuthorsPage from './components/Authors/FavoriteAuthorsPage';\nimport FavoriteAuthorsForUserPage from './components/Authors/FavoriteAuthorsForUserPage';\nimport NotificationsPage from './components/Dashboard/NotificationsPage';\nimport AccountSettingsPage from './components/Dashboard/AccountSettingsPage';\nimport ChangePassswordPage from './components/Dashboard/ChangePasswordPage';\nimport DeleteAccountPage from './components/Dashboard/DeleteAccountPage';\nimport EditFavoriteGenresPage from './components/Dashboard/EditFavoriteGenresPage';\nimport GenrePage from './components/Dashboard/GenrePage';\nimport NewsPage from './components/News/NewsPage';\nimport ArticlePage from './components/News/ArticlePage';\nimport ArticleLikedByPage from './components/News/ArticleLikedByPage';\nimport UserPage from './components/User/UserPage';\nimport UserCompareBooksPage from './components/User/UserCompareBooksPage';\nimport BookCompatibilityTestPage from './components/User/BookCompatibilityTestPage';\nimport EditCompatibilityTestAnswersPage from './components/User/EditCompatibilityTestAnswersPage';\nimport UserAddAsFriendPage from './components/User/UserAddAsFriendPage';\nimport UserBookshelfPage from './components/User/UserBookshelfPage';\nimport UserPhotoPage from './components/User/UserPhotoPage';\nimport UserYearInBooksPage from './components/User/UserYearInBooksPage';\nimport RecommendationsFromUsersPage from './components/Recommendations/RecommendationsFromUsersPage';\nimport RecommendationsFromYouPage from './components/Recommendations/RecommendationsFromYouPage';\nimport FollowersPage from './components/Friends/FollowersPage';\nimport PeopleFollowingPage from './components/Friends/PeopleFollowingPage';\nimport FriendsPage from './components/Friends/FriendsPage';\nimport ExplorePage from './components/Explore/ExplorePage';\nimport SearchPage from './components/Explore/SearchPage';\nimport ErrorPage from './components/Error/ErrorPage';\nimport ErrorBoundary from './ErrorBoundary';\nimport { TailSpin } from 'react-loader-spinner';\nimport { usePromiseTracker } from 'react-promise-tracker';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst store = createStore(reducer.userReducer);\n\nconst Stats = () => {\n\tconst query = new URLSearchParams(useLocation().search);\n\n\treturn query.get('just_this_edition') === 'yep' ? (\n\t\t<BookStatsForEditionPage bookId={query.get('id')} />\n\t) : (\n\t\t<BookAllStatsPage bookId={query.get('id')} />\n\t);\n};\n\nconst LoadingIndicator = (_props) => {\n\tconst { promiseInProgress } = usePromiseTracker();\n\n\treturn (\n\t\tpromiseInProgress && (\n\t\t\t<div className=\"tailspin-loader-container\">\n\t\t\t\t<TailSpin color=\"#382110\" height={100} width={100} />\n\t\t\t</div>\n\t\t)\n\t);\n};\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<React.StrictMode>\n\t\t\t<BrowserRouter>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/\"\n\t\t\t\t\t\texact\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<App {...routerProps}></App>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/forgot_password\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<ForgotPasswordPage {...routerProps}></ForgotPasswordPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/sign_out\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<SignOutPage {...routerProps}></SignOutPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/sign_up\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<SignUpPage {...routerProps}></SignUpPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/sign_in\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<SignInPage {...routerProps}></SignInPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/book/show/:bookPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookPage {...routerProps}></BookPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/book/stats\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<Stats {...routerProps}></Stats>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/book/new\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<AddNewBookPage {...routerProps}></AddNewBookPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/work/shelves/:bookId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookTopShelvesPage {...routerProps}></BookTopShelvesPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/book/similar/:similarBooksPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<SimilarBooksPage {...routerProps}></SimilarBooksPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/work/editions/:bookEditionsPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookEditionsPage {...routerProps}></BookEditionsPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/book/photo/:bookCoverPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookCoverPage {...routerProps}></BookCoverPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/photo/work/:bookPhotoPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookPhotoPage {...routerProps}></BookPhotoPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/shelf/users/:bookGenreShelfPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookGenreShelfPage {...routerProps}></BookGenreShelfPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/trivia/work/:bookTriviaPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookTriviaPage {...routerProps}></BookTriviaPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/work/quotes/:bookQuotesPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookQuotesPage {...routerProps}></BookQuotesPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/list/book/:bookId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookListsPage {...routerProps}></BookListsPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/author/show/:authorPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<AuthorPage {...routerProps}></AuthorPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/favorite_authors\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<FavoriteAuthorsPage {...routerProps}></FavoriteAuthorsPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/:userId/favorite_authors\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<FavoriteAuthorsForUserPage\n\t\t\t\t\t\t\t\t\t{...routerProps}\n\t\t\t\t\t\t\t\t></FavoriteAuthorsForUserPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/notifications\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<NotificationsPage {...routerProps}></NotificationsPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/edit\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<AccountSettingsPage {...routerProps}></AccountSettingsPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/change_password\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<ChangePassswordPage {...routerProps}></ChangePassswordPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/destroy\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<DeleteAccountPage {...routerProps}></DeleteAccountPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/photo/user/:userPhotoPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<UserPhotoPage {...routerProps}></UserPhotoPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/edit_fav_genres\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<EditFavoriteGenresPage\n\t\t\t\t\t\t\t\t\t{...routerProps}\n\t\t\t\t\t\t\t\t></EditFavoriteGenresPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/genres/:genre\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<GenrePage {...routerProps}></GenrePage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/news\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<NewsPage {...routerProps}></NewsPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/blog/show/:articlePageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<ArticlePage {...routerProps}></ArticlePage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/rating/voters/:articleId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<ArticleLikedByPage {...routerProps}></ArticleLikedByPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/show/:userPageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<UserPage {...routerProps}></UserPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/year_in_books/:year/:pageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<UserYearInBooksPage {...routerProps}></UserYearInBooksPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/compare/:userId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<UserCompareBooksPage {...routerProps}></UserCompareBooksPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/book/compatibility_results\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<BookCompatibilityTestPage\n\t\t\t\t\t\t\t\t\t{...routerProps}\n\t\t\t\t\t\t\t\t></BookCompatibilityTestPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/book/compatibility_test\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<EditCompatibilityTestAnswersPage\n\t\t\t\t\t\t\t\t\t{...routerProps}\n\t\t\t\t\t\t\t\t></EditCompatibilityTestAnswersPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/friend/add_as_friend/:newFriendId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<UserAddAsFriendPage {...routerProps}></UserAddAsFriendPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/review/list/:pageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<UserBookshelfPage {...routerProps}></UserBookshelfPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/recommendations/to_me\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<RecommendationsFromUsersPage\n\t\t\t\t\t\t\t\t\t{...routerProps}\n\t\t\t\t\t\t\t\t></RecommendationsFromUsersPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/recommendations/from_me\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<RecommendationsFromYouPage\n\t\t\t\t\t\t\t\t\t{...routerProps}\n\t\t\t\t\t\t\t\t></RecommendationsFromYouPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/:pageId/followers\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<FollowersPage {...routerProps}></FollowersPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/user/:pageId/following\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<PeopleFollowingPage {...routerProps}></PeopleFollowingPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/friend/user/:pageId\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<FriendsPage {...routerProps}></FriendsPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/search\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<SearchPage {...routerProps}></SearchPage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/explore\"\n\t\t\t\t\t\trender={(routerProps) => (\n\t\t\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t\t\t<ExplorePage {...routerProps}></ExplorePage>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route component={ErrorPage} />\n\t\t\t\t</Switch>\n\t\t\t\t<LoadingIndicator />\n\t\t\t</BrowserRouter>\n\t\t</React.StrictMode>\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}