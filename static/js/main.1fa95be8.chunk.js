(this["webpackJsonpgoodreads-copy"]=this["webpackJsonpgoodreads-copy"]||[]).push([[0],Array(69).concat([function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),s=a.n(o),c=a(13),l=a(8),i=a(29),u=a(26),m=a(4),d=function(){var e=function(){return{type:"SIGN_OUT"}};return{userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("userState",JSON.stringify(Object(m.a)({},t.data))),Object(m.a)({},t.data);case"SIGN_OUT":return localStorage.setItem("userState",JSON.stringify({userUID:null,userInfo:{}})),{userUID:null,userInfo:{}};default:return e}},login:function(t,a){return void 0===t||void 0===a?e():{type:"LOGIN",data:{userUID:t,userInfo:a}}},signOut:e}}(),p=d,f=a(1),g=a.n(f),h=a(3),b=a(2),v=a(10),E=a.n(v),k=(a(43),a(65),a(162)),w=a(156),y=a(157),N=function(){E.a.initializeApp({apiKey:"AIzaSyCgUVtCN8iWCzV7N3_zptMhvSdw-Z2gJ7c",authDomain:"goodreads-copy.firebaseapp.com",databaseURL:"https://goodreads-copy.firebaseio.com",projectId:"goodreads-copy",storageBucket:"goodreads-copy.appspot.com",messagingSenderId:"76297927706",appId:"1:76297927706:web:fba0aae0bdb5c9bf21e5a3"});var e=E.a.firestore(),t={generateHomePage:function(){return"/goodreads-copy/"},generateSignInPage:function(){return"/goodreads-copy/user/sign_in"},generateSignOutPage:function(){return"/goodreads-copy/user/sign_out"},generateSignUpPage:function(){return"/goodreads-copy/user/sign_up"},generateForgotPasswordPage:function(){return"/goodreads-copy/user/forgot_password"},generateExplorePage:function(){return"/goodreads-copy/explore"},generateSearchPage:function(e,t,a){return"/goodreads-copy/search?q="+e+"&search_type="+t+"&search_field="+a},generateBookPage:function(e,t){return"/goodreads-copy/book/show/"+e+"."+t.replace(/ /g,"_")},generateAddBookPage:function(){return"/goodreads-copy/book/new"},generateBookCoverPage:function(e,t){return"/goodreads-copy/book/photo/"+e+"."+t.replace(/ /g,"_")},generateBookPhotoPage:function(e,t,a){return"/goodreads-copy/photo/work/"+e+"."+t.replace(/ /g,"_")+"?photo="+a},generateBookEditionsPage:function(e,t){return"/goodreads-copy/work/editions/"+e+"."+t.replace(/ /g,"_")},generateBookListsPage:function(e){return"/goodreads-copy/list/book"+e},generateSeriesPage:function(e,t){return"/series/".concat(e,"-").concat(t.toLowerCase().replace(/ /g,"-"))},generateAuthorPage:function(e,t){return"/goodreads-copy/author/show/"+e+"."+t.replace(/ /g,"_")},generateListopiaPage:function(){return"/goodreads-copy/list"},generateCreateListPage:function(){return"/goodreads-copy/list/new"},generateListsCreatedByUserPage:function(e,t){return"/goodreads-copy/list/created/"+e+"-"+t.toLowerCase()},generateListsVotedByUserPage:function(e,t){return"/goodreads-copy/list/user_votes/"+e+"-"+t.toLowerCase()},generateListsLikedByUserPage:function(e,t){return"/goodreads-copy/list/liked/"+e+"-"+t.toLowerCase()},generateListPage:function(e,t){return"/goodreads-copy/list/show/"+e+"."+t.replace(/ /g,"_")},generateUserPage:function(e,t){return"/goodreads-copy/user/show/"+e+"-"+t.toLowerCase()},generateUserPhotoPage:function(e){return"/goodreads-copy/photo/user/"+e},generateUserBooksPage:function(e){return"/goodreads-copy/review/list/"+e},generateUserRatingsPage:function(e){return"/goodreads-copy/review/list/"+e+"?sort=rating&view=reviews"},generateUserReviewsPage:function(e){return"/goodreads-copy/review/list/"+e+"?sort=review&view=reviews"},generateUserShelfPage:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["all"],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"table",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"20",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"1",c=void 0===r?"table":r,l=0===a.length?["all"]:a;return"/goodreads-copy/review/list/"+e+"-"+t.toLowerCase()+"?shelf="+l.join(",")+"&view="+c+"&search_query="+n+"&per_page="+o+"&page="+s},generateReviewPage:function(e){return"/goodreads-copy/review/show/"+e},generateReviewLikesPage:function(e){return"/goodreads-copy/rating/voters/"+e+"?resource_type=Review"},generateBookGenreShelfPage:function(e,t,a){return"/goodreads-copy/shelf/users/"+e+"."+t.replace(/ /g,"_")+"?shelf="+a.toLowerCase().replace(/ /g,"-")},generateBookTopShelvesPage:function(e){return"/goodreads-copy/work/shelves/"+e},generateBookStatsPage:function(e){return"/goodreads-copy/book/stats?id="+e},generateBookStatsPageForEdition:function(e){return"/goodreads-copy/book/stats?id="+e+"&just_this_edition=yep"},generateSimilarBooksPage:function(e,t){return"/goodreads-copy/book/similar/"+e+"."+t.replace(/ /g,"_")},generateGenrePage:function(e){return"/goodreads-copy/genres/"+e.toLowerCase().replace(/ /g,"-")},generateBooksByAuthorPage:function(e,t){return"/goodreads-copy/author/list/"+e+"."+t.replace(/ /g,"_")},generateArticlePage:function(e,t){return"/goodreads-copy/blog/show/"+e+"-"+t.toLowerCase().replace(/ /g,"-")},generateBookTriviaPage:function(e,t){return"/goodreads-copy/trivia/work/"+e+"."+t.replace(/ /g,"_")},generateQuizzesPage:function(){return"/goodreads-copy/quizzes"},generateQuizPage:function(e,t){return"/goodreads-copy/quizzes/"+e+"-"+t.toLowerCase().replace(/ /g,"-")},generateCreateQuizPage:function(){return"/goodreads-copy/quizzes/new"},generateQuotesPage:function(){return"/goodreads-copy/quotes"},generateBookQuotesPage:function(e,t){return"/goodreads-copy/work/quotes/"+e+"-"+t.toLowerCase().replace(/ /g,"-")},generateQuotePage:function(e,t){return"/goodreads-copy/quotes/"+e+"-"+t.slice(0,50).toLowerCase().replace(/ /g,"-")},generateAddQuotePage:function(){return"/goodreads-copy/quotes/new"},generateQuotesTagPage:function(e){return"/goodreads-copy/quotes/tag/"+e},generateQuotesSearchPage:function(e){return"/goodreads-copy/quotes/search?q="+e},generateWriteReviewPageForBook:function(e){return"/goodreads-copy/review/edit"+e},generateUserCompareBooksPage:function(e){return"/goodreads-copy/user/compare/"+e},generateFavoriteAuthorsPage:function(){return"/goodreads-copy/favorite_authors"},generateUserFavoriteAuthorsPage:function(e){return"/goodreads-copy/user/"+e+"/goodreads-copy/favorite_authors"},generateUserYearInBooksPage:function(e,t,a){return"/goodreads-copy/user/year_in_books/"+e+"/"+t+"-"+a.toLowerCase().replace(/ /g,"-")},generateUserFriendsPage:function(e,t){return"/goodreads-copy/friend/user/"+e+"-"+t.toLowerCase().replace(/ /g,"-")},generateInviteFriendsPage:function(){return"/goodreads-copy/friend/invite"},generateAccountSettingsPage:function(){return"/goodreads-copy/user/edit"},generateChangePasswordPage:function(){return"/goodreads-copy/user/change_password"},generateDeleteAccountPage:function(){return"/goodreads-copy/user/destroy"},generateEditFavoriteGenresPage:function(){return"/goodreads-copy/user/edit_fav_genres"},generateNewsPage:function(){return"/goodreads-copy/news"},generateAllStoriesNewsPage:function(){return"/goodreads-copy/news?content_type=all"},generateArticlesNewsPage:function(){return"/goodreads-copy/news?content_type=articles"},generateInterviewsNewsPage:function(){return"/goodreads-copy/news?content_type=interviews"},generateArticleLikesPage:function(e){return"/goodreads-copy/rating/voters/"+e+"?resource_type=Article"},generateAddAsFriendPage:function(e){return"/goodreads-copy/friend/add_as_friend/"+e},generateRecommendationsPage:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return"/recommendations/".concat(e?"to_me":"from_me")},generateGiveRecommendationPage:function(){return"/goodreads-copy/recommendations/new"},generateGiveRecommendationToUserPage:function(e){return"/goodreads-copy/recommendation/new?recommendation%5Bto_user_id%5D="+e},generateBookCompatibilityTestPage:function(e,t){return"/goodreads-copy/book/compatibility_results?id="+e+"-"+t.toLowerCase().replace(/ /g,"-")},generateBookEditCompatibilityTestAnswersPage:function(e){return"/goodreads-copy/book/compatibility_test?id="+e}},a=function(){var a=Object(h.a)(g.a.mark((function a(n,r){var o,s,c,l;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.collection("rootBooks").doc(n).get();case 2:if(o=a.sent,s={},void 0===o.data().series){a.next=16;break}return s.seriesInstance=o.data().seriesInstance,a.next=8,e.collection("series").doc(o.data().series).get();case 8:return c=a.sent,s.series={name:c.data().name},s.series.page=t.generateSeriesPage(c.id,s.series.name),a.next=13,e.collection("books").where("series","==",s.series.name).where("title","!=",r).get();case 13:l=a.sent,s.series.otherBooksIds=l.docs.map((function(e){return e.id})),s.series.otherBooksCovers=l.docs.map((function(e){return e.data().cover}));case 16:return a.abrupt("return",s);case 17:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),n=function(){var a=Object(h.a)(g.a.mark((function a(n,r){var o,s,c;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.collection("rootBooks").doc(n).get();case 2:return o=a.sent,a.next=5,e.collection("authors").doc(o.data().authorId).get();case 5:return s=a.sent,(c={}).mainAuthorId=o.data().authorId,c.authorNames=[],c.authorPages=[],c.authorNames.push(s.data().name),c.authorPages.push(t.generateAuthorPage(o.data().authorId,s.data().name)),c.authorIsMember=s.data().GRMember,c.authorFollowerCount=void 0!==s.data().followersIds?s.data().followersIds.length:0,c.userIsFollowingAuthor=void 0!==s.data().followersIds&&s.data().followersIds.includes(r),c.booksByAuthorPage=t.generateBooksByAuthorPage(o.data().authorId,s.data().name),void 0!==s.data().about&&(c.mainAuthorAbout=s.data().about),void 0!==s.data().picture&&(c.mainAuthorPicture=s.data().picture),a.abrupt("return",c);case 19:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),r=function(){var a=Object(h.a)(g.a.mark((function a(n,r,o,s){var c,l,i;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0===n){a.next=6;break}return a.next=3,Promise.all(n.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("authors").doc(a.id).get();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:a.t0=a.sent,a.next=7;break;case 6:a.t0=null;case 7:if(c=a.t0,null!==(l=null!==c?c.map((function(e){return e.data()})):null))for(i=0;i<l.length;i++)r.push(l[i].name),o.push(t.generateAuthorPage(n[i].id,l[i].name)),s.push(n[i].role);case 10:case"end":return a.stop()}}),a)})));return function(e,t,n,r){return a.apply(this,arguments)}}(),o=function(){var a=Object(h.a)(g.a.mark((function a(n,r){var o,s,c,l,i,u,m,d,p;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o={},null===n||void 0===n){a.next=7;break}return a.next=4,e.collection("userBooksInstances").where("userId","==",n).where("bookId","==",r).get();case 4:s=a.sent,(c=s.docs.map((function(e){return e.data()}))).length>0&&(o.userStatus=c[0].status,void 0!==c[0].progress&&(o.userProgress=c[0].progress),void 0!==c[0].rating&&(o.userRating=c[0].rating),void 0!==c[0].position&&(o.toReadBookPosition=c[0].position));case 7:return a.next=9,e.collection("userBooksInstances").get();case 9:return l=a.sent,o.thisEditionRatings=0,o.thisEditionRating=0,o.thisEditionAddedBy=0,o.fiveRatings=0,o.fourRatings=0,o.threeRatings=0,o.twoRatings=0,o.oneRatings=0,o.addedBy=0,o.toReads=0,a.next=22,e.collection("books").doc(r).get();case 22:return i=a.sent,u=i.data().rootBook,a.next=26,e.collection("books").where("rootBook","==",u).get();case 26:return m=a.sent,d=m.docs.filter((function(e){return e.id!==r})).map((function(e){return e.id})),o.otherEditionsTitles=m.docs.filter((function(e){return e.id!==r})).map((function(e){return e.data().title})),o.otherEditionsISBNs=m.docs.filter((function(e){return e.id!==r})).map((function(e){return e.data().ISBN})),o.otherEditionsCovers=m.docs.filter((function(e){return e.id!==r})).map((function(e){return e.data().cover})),o.otherEditionsPages=m.docs.filter((function(e){return e.id!==r})).map((function(e){return t.generateBookPage(e.id,e.data().title)})),o.otherEditionsAddedBy=m.docs.filter((function(e){return e.id!==r})).map((function(e){return 0})),p=m.docs.map((function(e){return e.id})),l.docs.forEach((function(e){if(p.includes(e.data().bookId))switch(e.data().bookId===r&&void 0!==e.data().rating?(o.thisEditionRatings++,o.thisEditionRating+=e.data().rating,o.thisEditionAddedBy++):e.data().bookId===r?o.thisEditionAddedBy++:o.otherEditionsAddedBy[d.indexOf(e.data().bookId)]++,o.addedBy++,"to-read"===e.data().status&&o.toReads++,e.data().rating){case 5:o.fiveRatings++;break;case 4:o.fourRatings++;break;case 3:o.threeRatings++;break;case 2:o.twoRatings++;break;case 1:o.oneRatings++}})),o.thisEditionRating=0!==o.thisEditionRatings?o.thisEditionRating/o.thisEditionRatings:0,a.abrupt("return",o);case 37:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),s=function(){var a=Object(h.a)(g.a.mark((function a(n,r,o){var s,c,l,i,u;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.collection("books").doc(n).get();case 2:return s=a.sent,c=s.data().rootBook,a.next=6,e.collection("reviews").get();case 6:return l=a.sent,i=[],a.next=10,Promise.all(l.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookEdition).get();case 2:t.sent.data().rootBook===c&&i.push(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 10:return u={},a.next=13,Promise.all(i.map(function(){var a=Object(h.a)(g.a.mark((function a(s){var c,l,i;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(c={}).user=s.data().user,a.next=4,e.collection("userBooksInstances").where("bookId","==",n).where("userId","==",c.user).get();case 4:return void 0!==(l=a.sent).docs[0].data().rating?c.rating=l.docs[0].data().rating:c.rating=0,a.next=8,e.collection("users").doc(c.user).get();case 8:return i=a.sent,c.userName=i.data().firstName,void 0!==i.data().lastName&&(c.userName=c.userName+" "+i.data().lastName),void 0!==i.data().profileImage&&(c.profileImage=i.data().profileImage),void 0!==i.data().shelves&&(c.shelves=s.data().shelves),c.id=s.id,c.date=s.data().date.toDate(),c.edition=s.data().bookEdition,c.editionLink=t.generateBookPage(c.edition,r),c.text=s.data().text,c.numberOfLikes=s.data().usersWhoLiked.length,c.likedByUser=s.data().usersWhoLiked.includes(o),void 0!==s.data().recommendsItFor&&(c.recommendsItFor=s.data().recommendsItFor),a.abrupt("return",c);case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()));case 13:return u.reviews=a.sent,a.abrupt("return",u);case 15:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),c=function(e){var t={};return void 0!==e.preSynopsis&&(t.preSynopsis=e.preSynopsis),void 0!==e.synopsis&&(t.synopsis=e.synopsis),void 0!==e.amazonLink&&(t.amazonLink=e.amazonLink),void 0!==e.type&&(t.type=e.type),void 0!==e.publisher&&(t.publisher=e.publisher),void 0!==e.pageCount&&(t.pageCount=e.pageCount),void 0!==e.publishedDate&&(t.editionPublishedDate=e.publishedDate.toDate()),void 0!==e.ISBN&&(t.ISBN=e.ISBN),void 0!==e.language&&(t.language=e.language),t},l=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,e.collection("books").where("rootBook","==",a).orderBy("publishedDate").limit(1).get();case 3:return r=t.sent,n.firstEditionPublishedYear=r.docs[0].data().publishedDate.toDate().getFullYear(),n.originalId=r.docs[0].id,n.originalTitle=r.docs[0].data().title,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("lists").where("books","array-contains",a).get();case 2:return n=t.sent,t.next=5,Promise.all(n.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n={}).id=a.id,n.title=a.data().title,n.bookIds=a.data().books,n.voterCount=a.data().userVotes.length,n.bookTitles=[],n.bookCovers=[],t.next=9,Promise.all(n.bookIds.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:r=t.sent,n.bookTitles.push(r.data().title),n.bookCovers.push(r.data().cover);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("shelves").where("rootBooks","array-contains",a).where("genre","!=",null).get();case 2:return n=t.sent,r={},t.next=6,Promise.all(n.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("genres").doc(a.data().genre).get();case 2:n=t.sent,void 0===r[n.data().name]?r[n.data().name]=1:r[n.data().name]+=1;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return o=Object.keys(r).map((function(e,t){return{genre:e,userCount:r[e]}})),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("rootBooks").doc(a).get();case 2:return n=t.sent,r=n.data().authorId,t.next=6,e.collection("rootBooks").where("authorId","==",r).get();case 6:return o=t.sent,t.next=9,Promise.all(o.docs.filter((function(e){return e.id!==a})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",a.id).where("mainEdition","==",!0).get();case 2:return n=t.sent,t.abrupt("return",{id:n.docs[0].id,cover:n.docs[0].data().cover,page:N.pageGenerator.generateBookPage(n.docs[0].id,n.docs[0].data().title)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("rootBooks").doc(a).get();case 2:if(void 0!==(n=t.sent).data().alsoEnjoyed){t.next=5;break}return t.abrupt("return",[]);case 5:return t.next=7,Promise.all(n.data().alsoEnjoyed.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",a).where("mainEdition","==",!0).get();case 2:return n=t.sent,t.abrupt("return",{id:n.docs[0].id,title:n.docs[0].data().title,cover:n.docs[0].data().cover});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var s,c,l,i,u,m,d,p,f;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n,r){t.next=6;break}return t.next=4,e.collection("books").where("rootBook","==",n).where("mainEdition","==",!0).get();case 4:c=t.sent,s=c.docs[0].id;case 6:return l={id:s},t.next=9,e.collection("books").doc(s).get();case 9:return i=t.sent,l.title=i.data().title,l.cover=i.data().cover,l.rootBook=i.data().rootBook,void 0!==i.data().preSynopsis&&(l.preSynopsis=i.data().preSynopsis),void 0!==i.data().synopsis&&(l.synopsis=i.data().synopsis),u=i.data().rootBook,t.next=18,e.collection("rootBooks").doc(u).get();case 18:return m=t.sent,t.next=21,e.collection("authors").doc(m.data().authorId).get();case 21:if(d=t.sent,l.authorName=d.data().name,l.authorId=m.data().authorId,l.authorIsMember=d.data().GRMember,void 0===m.data().series){t.next=31;break}return t.next=28,e.collection("series").doc(m.data().series).get();case 28:p=t.sent,l.series=p.data().name,l.seriesInstance=m.data().seriesInstance;case 31:return t.next=33,o(a,s);case 33:return f=t.sent,Object.assign(l,f),t.abrupt("return",l);case 36:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),b=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},t.next=3,f(a,n,!0);case 3:return r.mainBook=t.sent,t.next=6,e.collection("books").doc(n).get();case 6:return o=t.sent,t.next=9,e.collection("rootBooks").doc(o.data().rootBook).get();case 9:if(void 0!==(s=t.sent).data().alsoEnjoyed){t.next=12;break}return t.abrupt("return",r);case 12:if(r.alsoEnjoyedBooks=[],void 0===s.data().alsoEnjoyed){t.next=16;break}return t.next=16,Promise.all(s.data().alsoEnjoyed.map(function(){var e=Object(h.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(a,t,!1);case 2:n=e.sent,r.alsoEnjoyedBooks.push(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 16:return t.abrupt("return",r);case 17:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),v=function(){var a=Object(h.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=[],a.next=3,e.collection("quizzes").where("books","array-contains",n).get();case 3:return a.sent.docs.forEach((function(e){e.data().questions.forEach((function(a){var n={quizId:e.id,quizTitle:e.data().title,quizDescription:e.data().description,quizPage:t.generateQuizPage(e.id,e.data().title)};n.question=a.mainQuestion,n.options=a.answers,r.push(n)}))})),a.abrupt("return",r);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),O=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("articles").where("featuredBooks","array-contains",a).get();case 2:return n=t.sent,t.abrupt("return",n.docs.map((function(e){return{id:e.id,title:e.data().title,image:e.data().image,content:e.data().content,likeCount:e.data().usersWhoLiked.length,commentCount:e.data().comments.length}})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var a=Object(h.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.collection("books").where("rootBook","==",n).where("mainEdition","==",!0).get();case 2:return r=a.sent,a.abrupt("return",{quotesPage:t.generateBookQuotesPage(r.docs[0].id,r.docs[0].data().title)});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),j=function(){var a=Object(h.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.collection("quotes").where("rootBook","==",n).limit(2).get();case 2:return r=a.sent,a.abrupt("return",r.docs.map((function(e){return{id:e.id,text:e.data().text,page:t.generateQuotePage(e.id,e.data().text),likeCount:e.data().usersWhoLiked.length}})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),I=function(){var t=Object(h.a)(g.a.mark((function t(m,f){var h,b,E,k,w,y,N,I;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.collection("books").doc(f).get();case 3:return h=t.sent,b={},E=h.data(),b.id=h.id,b.title=E.title,b.cover=E.cover,b.rootBook=E.rootBook,Object.assign(b,c(E)),t.next=13,a(E.rootBook,b.title);case 13:return k=t.sent,Object.assign(b,k),t.next=17,n(E.rootBook);case 17:return w=t.sent,Object.assign(b,w),b.authorFunctions=[],t.next=22,r(E.otherAuthors,b.authorNames,b.authorPages,b.authorFunctions);case 22:return t.next=24,o(m,b.id);case 24:return y=t.sent,Object.assign(b,y),t.next=28,s(b.id,b.title,m);case 28:return N=t.sent,Object.assign(b,N),t.next=32,l(E.rootBook);case 32:return I=t.sent,Object.assign(b,I),t.next=36,i(b.id);case 36:return b.lists=t.sent,t.next=39,u(E.rootBook);case 39:return b.genres=t.sent,t.next=42,d(E.rootBook);case 42:return b.publishedBooksByAuthor=t.sent,t.next=45,p(E.rootBook);case 45:return b.alsoEnjoyedBooks=t.sent,t.next=48,O(E.rootBook);case 48:return b.articles=t.sent,t.next=51,v(E.rootBook);case 51:return b.quizQuestions=t.sent,t.next=54,x(E.rootBook);case 54:return b.quotesPage=t.sent,t.next=57,j(E.rootBook);case 57:return b.quotes=t.sent,t.abrupt("return",b);case 61:t.prev=61,t.t0=t.catch(0),console.log(t.t0);case 64:case"end":return t.stop()}}),t,null,[[0,61]])})));return function(e,a){return t.apply(this,arguments)}}(),S=function(){var t=Object(h.a)(g.a.mark((function t(){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").get();case 2:return r=t.sent,t.next=5,Promise.all(r.docs.map(function(){var e=Object(h.a)(g.a.mark((function e(t){var r,o,s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},o=t.data(),r.id=t.id,r.title=o.title,r.cover=o.cover,e.next=7,a(o.rootBook,r.title);case 7:return s=e.sent,Object.assign(r,s),e.next=11,n(o.rootBook);case 11:return c=e.sent,Object.assign(r,c),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=Object(h.a)(g.a.mark((function t(a,s){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",s).get();case 2:return c=t.sent,t.next=5,Promise.all(c.docs.map(function(){var e=Object(h.a)(g.a.mark((function e(t){var c,l,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={title:t.data().title,cover:t.data().cover,id:t.id,type:t.data().type,publisher:t.data().publisher,language:t.data().language,pageCount:t.data().pageCount,publishedDate:t.data().publishedDate.toDate(),isMainEdition:t.data().mainEdition},e.next=3,n(s);case 3:return l=e.sent,Object.assign(c,l),c.authorFunctions=["Writer"],e.next=8,r(t.data().otherAuthors,c.authorNames,c.authorPages,c.authorFunctions);case 8:return e.next=10,o(a,t.id);case 10:return i=e.sent,Object.assign(c,i),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:return a=e.sent,e.abrupt("return",a.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.authorNames[0].toLowerCase().includes(t.toLowerCase())})));case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var a=Object(h.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.collection("books").get();case 3:return r=a.sent,a.next=6,Promise.all(r.docs.filter((function(e){return e.data().title.toLowerCase().includes(n.toLowerCase())})).map(function(){var a=Object(h.a)(g.a.mark((function a(n){var r,o;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.collection("rootBooks").doc(n.data().rootBook).get();case 2:if(void 0!==(r=a.sent).data().series){a.next=7;break}return a.abrupt("return",{title:n.data().title,link:t.generateBookPage(n.id,n.data().title)});case 7:return a.next=9,e.collection("series").doc(r.data().series).get();case 9:return o=a.sent,a.abrupt("return",{title:"".concat(n.data().title," (").concat(o.data().name," ").concat(r.data().seriesInstance,")"),link:t.generateBookPage(n.id,n.data().title)});case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()));case 6:return a.abrupt("return",a.sent);case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}(),A=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.collection("users").doc(a).get();case 3:if(void 0!==(r=t.sent).data().friends){t.next=6;break}return t.abrupt("return",[]);case 6:return t.next=8,Promise.all(r.data().friends.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return n=t.sent,t.abrupt("return",{id:a,firstName:n.data().firstName,profileImage:n.data().profileImage});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:return t.abrupt("return",t.sent);case 11:return t.prev=11,t.t0=t.catch(0),n.push({pathname:"/user/sign_in",state:{error:t.t0.message}}),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}(),U=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(r.map(function(){var t=Object(h.a)(g.a.mark((function t(r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("recommendations").where("sender","==",a).where("bookId","==",n).where("receiver","==",r).get();case 2:return o=t.sent,t.abrupt("return",o.docs.length>0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),o.push({pathname:"/user/sign_in",state:{error:t.t0.message}});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a,n,r){return t.apply(this,arguments)}}(),R=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return n=t.sent,r=n.data().rootBook,t.next=6,e.collection("books").where("rootBook","==",r).get();case 6:return o=t.sent,s=o.docs.map((function(e){return e.id})),t.next=10,e.collection("userBooksUpdates").where("book","in",s).get();case 10:return c=t.sent,t.abrupt("return",c.docs.map((function(e){return e.data()})));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksUpdates").where("book","==",a).get();case 2:return n=t.sent,t.abrupt("return",n.docs.map((function(e){return e.data()})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.auth().signOut();case 3:localStorage.userInfo=null,t.push({pathname:"/goodreads-copy/user/sign_out"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.auth().sendPasswordResetEmail(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(h.a)(g.a.mark((function e(t,a,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.auth().signInWithEmailAndPassword(t,a);case 3:n&&(localStorage.user=t,localStorage.password=a),r.push({pathname:"/goodreads-copy/"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:e.t0.message}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),L=function(){var t=Object(h.a)(g.a.mark((function t(){var a,n,r,o,s,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new E.a.auth.FacebookAuthProvider,t.prev=1,t.next=4,E.a.auth().signInWithPopup(a);case 4:return n=t.sent,r=n.user,o=r.uid,s=r.displayName.split(" ")[0],c=r.email,l=r.photoURL,t.next=12,e.collection("users").doc(o).get();case 12:if(t.sent.exists){t.next=15;break}return t.next=15,e.collection("users").doc(o).set({firstName:s,email:c,profileImage:l,membershipDate:E.a.firestore.Timestamp.fromDate(new Date),favoriteAuthors:[],friends:[],newFriendsRequests:[],aboutMe:"",addAFriend:!0,addANewStatusToBook:!0,addAQuote:!0,addBookToShelves:!0,ageAndBirthdayPrivacy:"age-members-birthday-friends",city:"",country:"",customGender:"",dateOfBirth:null,emailAddressVisibleTo:"no-one",favoriteGenres:[],followAnAuthor:!0,followers:[],friendChallengeAnswer:"",friendChallengeQuestion:"",gender:"",interests:"",locationViewableBy:"everyone",middleName:"",notifications:[],pronouns:["male","female"][Math.round(1*Math.random())],recommendABook:!0,showGenderTo:"everyone",showLastNameTo:"anyone",stateProvinceCode:"",typeOfBooks:"",updateContent:"book-only",updatesPeople:"friends-following",voteForABookReview:!0,website:"",whoCanViewMyProfile:"anyone",zipCode:""});case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0.code);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=Object(h.a)(g.a.mark((function t(){var a,n,r,o,s,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new E.a.auth.TwitterAuthProvider,t.prev=1,t.next=4,E.a.auth().signInWithPopup(a);case 4:return n=t.sent,r=n.user,o=r.uid,s=r.displayName.split(" ")[0],c=r.email,l=r.photoURL,t.next=12,e.collection("users").doc(o).get();case 12:if(t.sent.exists){t.next=15;break}return t.next=15,e.collection("users").doc(o).set({firstName:s,email:c,profileImage:l,membershipDate:E.a.firestore.Timestamp.fromDate(new Date),favoriteAuthors:[],friends:[],newFriendsRequests:[],aboutMe:"",addAFriend:!0,addANewStatusToBook:!0,addAQuote:!0,addBookToShelves:!0,ageAndBirthdayPrivacy:"age-members-birthday-friends",city:"",country:"",customGender:"",dateOfBirth:null,emailAddressVisibleTo:"no-one",favoriteGenres:[],followAnAuthor:!0,followers:[],friendChallengeAnswer:"",friendChallengeQuestion:"",gender:"",interests:"",locationViewableBy:"everyone",middleName:"",notifications:[],pronouns:["male","female"][Math.round(1*Math.random())],recommendABook:!0,showGenderTo:"everyone",showLastNameTo:"anyone",stateProvinceCode:"",typeOfBooks:"",updateContent:"book-only",updatesPeople:"friends-following",voteForABookReview:!0,website:"",whoCanViewMyProfile:"anyone",zipCode:""});case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0),console.log(t.t0.code);case 21:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(){return t.apply(this,arguments)}}(),W=function(){var t=Object(h.a)(g.a.mark((function t(){var a,n,r,o,s,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new E.a.auth.GoogleAuthProvider,t.prev=1,t.next=4,E.a.auth().signInWithPopup(a);case 4:return n=t.sent,r=n.user,o=r.uid,s=r.displayName.split(" ")[0],c=r.email,l=r.photoURL,t.next=12,e.collection("users").doc(o).get();case 12:if(t.sent.exists){t.next=15;break}return t.next=15,e.collection("users").doc(o).set({firstName:s,email:c,profileImage:l,membershipDate:E.a.firestore.Timestamp.fromDate(new Date),favoriteAuthors:[],friends:[],newFriendsRequests:[],aboutMe:"",addAFriend:!0,addANewStatusToBook:!0,addAQuote:!0,addBookToShelves:!0,ageAndBirthdayPrivacy:"age-members-birthday-friends",city:"",country:"",customGender:"",dateOfBirth:null,emailAddressVisibleTo:"no-one",favoriteGenres:[],followAnAuthor:!0,followers:[],friendChallengeAnswer:"",friendChallengeQuestion:"",gender:"",interests:"",locationViewableBy:"everyone",middleName:"",notifications:[],pronouns:["male","female"][Math.round(1*Math.random())],recommendABook:!0,showGenderTo:"everyone",showLastNameTo:"anyone",stateProvinceCode:"",typeOfBooks:"",updateContent:"book-only",updatesPeople:"friends-following",voteForABookReview:!0,website:"",whoCanViewMyProfile:"anyone",zipCode:""});case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0.code);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var a=Object(h.a)(g.a.mark((function a(n){var r,o,s,c,l,i,u,m,d;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=[],o=[],s=0;case 3:if(!(s<n.length)){a.next=30;break}return c={},a.next=7,e.collection("books").doc(n[s].bookId).get();case 7:if(l=a.sent,i=l.data(),c.title=i.title,c.cover=i.cover,c.page=t.generateBookPage(n[s].bookId,i.title),"to-read"!==n[s].status){a.next=16;break}r.push(c),a.next=27;break;case 16:return a.next=18,e.collection("rootBooks").doc(i.rootBook).get();case 18:return u=a.sent,a.next=21,e.collection("authors").doc(u.data().authorId).get();case 21:m=a.sent,d=m.data(),c.author=d.name,c.authorPage=t.generateAuthorPage(u.data().authorId,d.name),c.authorHasBadge=d.GRMember,o.push(c);case 27:s++,a.next=3;break;case 30:return a.abrupt("return",[r,o]);case 31:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),q=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o){var s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,0!==r.length){t.next=3;break}throw new Error("name");case 3:if(0!==a.length){t.next=5;break}throw new Error("email-missing");case 5:return console.log("Creating user with email ".concat(a," and password ").concat(n,"...")),t.next=8,E.a.auth().createUserWithEmailAndPassword(a,n);case 8:return s=t.sent,c=s.user.uid,t.next=12,e.collection("users").doc(c).get();case 12:if(t.sent.exists){t.next=15;break}return t.next=15,e.collection("users").doc(c).set({firstName:r.split(" ")[0],lastName:r.split(" ").length>1?r.split(" ").slice(1).join(" "):"",email:a,membershipDate:E.a.firestore.Timestamp.fromDate(new Date),favoriteAuthors:[],friends:[],newFriendsRequests:[],aboutMe:"",addAFriend:!0,addANewStatusToBook:!0,addAQuote:!0,addBookToShelves:!0,ageAndBirthdayPrivacy:"age-members-birthday-friends",city:"",country:"",customGender:"",dateOfBirth:null,emailAddressVisibleTo:"no-one",favoriteGenres:[],followAnAuthor:!0,followers:[],friendChallengeAnswer:"",friendChallengeQuestion:"",gender:"",interests:"",locationViewableBy:"everyone",middleName:"",notifications:[],pronouns:["male","female"][Math.round(1*Math.random())],recommendABook:!0,showGenderTo:"everyone",showLastNameTo:"anyone",stateProvinceCode:"",typeOfBooks:"",updateContent:"book-only",updatesPeople:"friends-following",voteForABookReview:!0,website:"",whoCanViewMyProfile:"anyone",zipCode:""});case 15:o.push({pathname:"/goodreads-copy/"}),t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(0),o.push({pathname:"/goodreads-copy/user/sign_up",state:{error:t.t0.message}}),t.abrupt("return",t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,a,n,r){return t.apply(this,arguments)}}(),z=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a){t.next=2;break}return t.abrupt("return",{});case 2:return n={},t.prev=3,t.next=6,e.collection("users").doc(a).get();case 6:return r=t.sent,o=r.data(),n=Object(m.a)({},o),t.next=11,e.collection("userBooksInstances").where("userId","==",a).get();case 11:return s=t.sent,c=s.docs.map((function(e){return e.data()})),n.numberOfReadBooks=c.filter((function(e){return"read"===e.status})).length,t.next=16,_(c.filter((function(e){return"read"!==e.status})));case 16:return l=t.sent,n.wantToReadBooks=l[0],n.readingBooks=l[1],t.abrupt("return",n);case 22:t.prev=22,t.t0=t.catch(3),console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[3,22]])})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o){var s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a){t.next=4;break}o.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=37;break;case 4:return t.next=6,e.collection("userBooksInstances").where("userId","==",a).where("bookId","==",n).get();case 6:if(!((s=t.sent).docs.length>0)){t.next=28;break}if("to-read"!==s.docs[0].data().status){t.next=11;break}return t.next=11,K(a,n,1e4);case 11:if("to-read"!==r){t.next=24;break}return t.next=14,e.collection("userBooksInstances").where("userId","==",a).orderBy("position","desc").limit(1).get();case 14:if(!((c=t.sent).docs.length>0)){t.next=20;break}return t.next=18,e.collection("userBooksInstances").doc(s.docs[0].id).set({status:r,position:c.docs[0].data().position+1},{merge:!0});case 18:t.next=22;break;case 20:return t.next=22,e.collection("userBooksInstances").doc(s.docs[0].id).set({status:r,position:1},{merge:!0});case 22:t.next=26;break;case 24:return t.next=26,e.collection("userBooksInstances").doc(s.docs[0].id).set({status:r},{merge:!0});case 26:t.next=35;break;case 28:if("to-read"!==r){t.next=33;break}return t.next=31,e.collection("userBooksInstances").add({bookId:n,userId:a,status:r,position:1});case 31:t.next=35;break;case 33:return t.next=35,e.collection("userBooksInstances").add({bookId:n,userId:a,status:r});case 35:return t.next=37,e.collection("userBooksUpdates").add({user:a,book:n,shelf:r,action:"add-book",date:E.a.firestore.Timestamp.fromDate(new Date)});case 37:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),V=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").where("userId","==",a).where("bookId","==",n).get();case 2:if(!((r=t.sent).docs.length>0)){t.next=9;break}if("to-read"!==r.docs[0].data().status){t.next=7;break}return t.next=7,K(a,n,1e4);case 7:return t.next=9,e.collection("userBooksInstances").doc(r.docs[0].id).delete();case 9:return t.next=11,e.collection("reviews").where("user","==",a).where("bookEdition","==",n).get();case 11:if(!((o=t.sent).docs.length>0)){t.next=15;break}return t.next=15,e.collection("reviews").doc(o.docs[0].id).delete();case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),H=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o){var s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a){t.next=4;break}o.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=22;break;case 4:return t.next=6,e.collection("userBooksInstances").where("userId","==",a).where("bookId","==",n).get();case 6:if(!((s=t.sent).docs.length>0)){t.next=17;break}if(void 0===r){t.next=13;break}return t.next=11,e.collection("userBooksInstances").doc(s.docs[0].id).set({rating:r},{merge:!0});case 11:t.next=15;break;case 13:return t.next=15,e.collection("userBooksInstances").doc(s.docs[0].id).update({rating:E.a.firestore.FieldValue.delete()});case 15:t.next=19;break;case 17:return t.next=19,e.collection("userBooksInstances").add({bookId:n,userId:a,status:"read",rating:r});case 19:if(void 0===r){t.next=22;break}return t.next=22,e.collection("userBooksUpdates").add({user:a,book:n,action:"rate-book",date:E.a.firestore.Timestamp.fromDate(new Date)});case 22:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),J=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").where("userId","==",a).where("bookId","==",n).get();case 2:if(!((o=t.sent).docs.length>0)){t.next=6;break}return t.next=6,e.collection("userBooksInstances").doc(o.docs[0].id).set({progress:r},{merge:!0});case 6:return t.next=8,e.collection("userBooksUpdates").add({user:a,book:n,action:"progress-book",progress:r,date:E.a.firestore.Timestamp.fromDate(new Date)});case 8:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),K=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").where("userId","==",a).where("bookId","==",n).get();case 2:if(!((o=t.sent).docs.length>0&&"to-read"===o.docs[0].data().status)){t.next=19;break}if(s=o.docs[0].data().position,!(r<s)){t.next=11;break}return t.next=8,e.collection("userBooksInstances").where("userId","==",a).where("position",">=",r).where("position","<",s).get();case 8:return c=t.sent,t.next=11,Promise.all(c.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").doc(a.id).set({position:a.data().position+1},{merge:!0});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:if(!(r>s)){t.next=17;break}return t.next=14,e.collection("userBooksInstances").where("userId","==",a).where("position","<=",r).where("position",">",s).get();case 14:return l=t.sent,t.next=17,Promise.all(l.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").doc(a.id).set({position:a.data().position-1},{merge:!0});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:return t.next=19,e.collection("userBooksInstances").doc(o.docs[0].id).set({position:r},{merge:!0});case 19:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Z=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=25;break;case 4:return t.next=6,e.collection("genres").doc(n).get();case 6:if((o=t.sent).exists){t.next=13;break}return t.next=10,e.collection("shelves").where("name","==",n).where("user","==",a).get();case 10:t.t0=t.sent,t.next=16;break;case 13:return t.next=15,e.collection("shelves").where("genre","==",n).where("user","==",a).get();case 15:t.t0=t.sent;case 16:if(0!==t.t0.docs.length){t.next=25;break}if(o.exists){t.next=23;break}return t.next=21,e.collection("shelves").add({name:n,user:a,rootBooks:[],genre:null});case 21:t.next=25;break;case 23:return t.next=25,e.collection("shelves").add({genre:n,user:a,rootBooks:[]});case 25:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),X=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s,c,l,i,u=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=u.length>3&&void 0!==u[3]?u[3]:null,s=u.length>4?u[4]:void 0,void 0!==a&&null!==a){t.next=6;break}s.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=29;break;case 6:return t.next=8,e.collection("books").where("rootBook","==",n).get();case 8:return c=t.sent.docs.map((function(e){return e.id})),t.next=11,e.collection("books").where("rootBook","==",n).where("mainEdition","==",!0).get();case 11:return l=t.sent.docs[0].id,t.next=14,e.collection("userBooksInstances").where("userId","==",a).where("bookId","in",c).get();case 14:if(0!==t.sent.docs.length){t.next=18;break}return t.next=18,Q(a,l,"read",s);case 18:return t.next=20,e.collection("shelves").where("user","==",a).where("name","==",r).get();case 20:if(0!==(i=t.sent).docs.length){t.next=26;break}return t.next=24,e.collection("shelves").add({user:a,rootBooks:[n],genre:o,name:r});case 24:t.next=29;break;case 26:if(i.docs[0].data().rootBooks.includes(n)){t.next=29;break}return t.next=29,e.collection("shelves").doc(i.docs[0].id).set({rootBooks:i.docs[0].data().rootBooks.concat([n])},{merge:!0});case 29:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),$=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o){var s,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a){t.next=4;break}o.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=12;break;case 4:return t.next=6,e.collection("shelves").where("user","==",a).get();case 6:if(s=t.sent,!((c=s.docs.filter((function(e){return e.data().name===r||e.data().genre===r}))).length>0&&c[0].data().rootBooks.includes(n))){t.next=12;break}return l=e.collection("shelves").doc(c[0].id),t.next=12,l.update({rootBooks:c[0].data().rootBooks.filter((function(e){return e!==n}))});case 12:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),ee=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=15;break;case 4:return o=e.collection("reviews").doc(n),t.next=7,o.get();case 7:if((s=t.sent).data().usersWhoLiked.includes(a)){t.next=13;break}return t.next=11,o.set({usersWhoLiked:s.data().usersWhoLiked.concat([a])},{merge:!0});case 11:t.next=15;break;case 13:return t.next=15,o.set({usersWhoLiked:s.data().usersWhoLiked.filter((function(e){return e!==a}))},{merge:!0});case 15:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),te=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=15;break;case 4:return o=e.collection("authors").doc(n),t.next=7,o.get();case 7:if((s=t.sent).data().followerIds.includes(a)){t.next=13;break}return t.next=11,o.set({followerIds:s.data().followerIds.concat([a])},{merge:!0});case 11:t.next=15;break;case 13:return t.next=15,o.set({followerIds:s.data().followerIds.filter((function(e){return e!==a}))},{merge:!0});case 15:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ae=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o){var s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("recommendations").add({sender:a,receiver:n,bookId:r});case 2:s=t.sent,o.length>0&&s.set({message:o},{merge:!0});case 4:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),ne=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("reviews").where("bookEdition","==",n).where("user","==",a).get();case 2:if(!((o=t.sent).docs.length>0)){t.next=6;break}return t.next=6,e.collection("reviews").doc(o.docs[0].id).set({bookEdition:r},{merge:!0});case 6:return t.next=8,e.collection("userBooksInstances").where("bookId","==",n).where("userId","==",a).get();case 8:if(!((s=t.sent).docs.length>0)){t.next=12;break}return t.next=12,e.collection("userBooksInstances").doc(s.docs[0].id).set({bookId:r},{merge:!0});case 12:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),re=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return n=t.sent,r=n.data().rootBook,t.next=6,e.collection("bookPhotos").where("rootBook","==",r).get();case 6:return o=t.sent,t.abrupt("return",{cover:n.data().cover,photos:o.docs.map((function(e){return{id:e.id,url:e.data().url,type:e.data().type}}))});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),oe=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("bookPhotos").doc(n).get();case 2:if(r=t.sent,null===a||r.data().usersWhoViewed.includes(a)){t.next=6;break}return t.next=6,e.collection("bookPhotos").doc(n).set({usersWhoViewed:r.data().usersWhoViewed.concat(a)},{merge:!0});case 6:return t.abrupt("return",r.data());case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),se=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.collection("books").doc(a).get();case 3:return n=t.sent,t.abrupt("return",{preSynopsis:void 0!==n.data().preSynopsis?n.data().preSynopsis:null,synopsis:void 0!==n.data().synopsis?n.data().synopsis:null});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{preSynopsis:null,synopsis:null});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),ce=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l,i,u,m,d,p,f,b,v,k,w,y,N,O,x,j,I,S,B,P,C,A,U,R,M,D,F,G,L,T,W,_,q,z,Y,Q;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.title,r=a.authorNames,o=a.authorRoles,s=a.isbn,c=a.publisher,l=a.publishedYear,i=a.publishedMonth,u=a.publishedDay,m=a.numberOfPages,d=a.format,p=a.amazonLink,f=a.description,b=a.editionLanguage,v=a.originalTitle,k=a.originalPublicationYear,w=a.originalPublicationMonth,y=a.originalPublicationDay,N=a.coverImage,O=a.history,t.prev=1,x={},j=n.match(/[(][\w\d\s]+,[ ]*#\d[)]/g),I=null!==j?j[0].split(",")[0].splice(1).join(""):"",S=null!==j?parseInt(j[0].split("#")[1].split(")")[0]):NaN,x.title=null===j?n:n.split("(")[0],b.length>0&&(x.language=b),s.length>0&&(x.ISBN=s),d.length>0&&(x.type=d),p.length>0&&p.includes("amazon.co")&&(x.amazonLink=p),m.length>0&&(x.pageCount=m),l.length>0&&(B=new Date(parseInt(l),i.length>0?parseInt(i):0,u.length>0?parseInt(u):1),x.publishedDate=E.a.firestore.Timestamp.fromDate(B)),c.length>0&&(x.publisher=c),""!==N&&(x.cover=N),f.length>0&&(void 0!==f.split("\n")[1]?(x.preSynopsis=f.split("\n")[0],x.synopsis=f.split("\n").slice(1).join("")):x.synopsis=f),!(r.length>1)){t.next=20;break}return t.next=19,Promise.all(r.slice(1).map(function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.split(" ").map((function(e){return e.length>1?e[0].toUpperCase()+e.slice(1).toLowerCase():e[0].toUpperCase()})).join(" "),t.next=3,e.collection("authors").where("name","==",r).get();case 3:if(!((s=t.sent).docs.length>0)){t.next=8;break}return t.abrupt("return",{id:s.docs[0].id,role:o[n]});case 8:return t.next=10,e.collection("authors").add({name:r,GRMember:!1});case 10:return c=t.sent,t.abrupt("return",{id:c.id,role:o[n]});case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 19:x.otherAuthors=t.sent;case 20:return P=r[0].split(" ").map((function(e){return e.length>1?e[0].toUpperCase()+e.slice(1).toLowerCase():e[0].toUpperCase()})).join(" "),t.next=23,e.collection("authors").where("name","==",P).get();case 23:if(C=t.sent,A="",0!==C.docs.length){t.next=43;break}return t.next=28,e.collection("authors").add({name:P,GRMember:!1});case 28:return U=t.sent,A=U.id,t.next=32,e.collection("rootBooks").add({authorId:A});case 32:if(R=t.sent,x.rootBook=R.id,x.mainEdition=!0,!(I.length>0)||Number.isNaN(S)){t.next=41;break}return M=I.split(" ").map((function(e){return e.length>1?e[0].toUpperCase()+e.slice(1).toLowerCase():e[0].toUpperCase()})).join(" "),t.next=39,e.collection("series").add({name:M});case 39:D=t.sent,R.set({series:D.id,seriesInstance:S},{merge:!0});case 41:t.next=86;break;case 43:if(A=C.docs[0].id,!(v.length>0)){t.next=64;break}return F=k.length>0?new Date(parseInt(k),w.length>0?parseInt(w):0,y.length>0?parseInt(y):1):null,t.next=48,e.collection("books").where("title","==",v).where("mainEdition","==",!0).get();case 48:return G=t.sent,t.next=51,Promise.all(G.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("rootBooks").doc(a.data().rootBook).get();case 2:return n=t.sent,t.next=5,e.collection("authors").doc(n.data().authorId).get();case 5:if(r=t.sent,void 0===n.data().series){t.next=12;break}return t.next=9,e.collection("series").doc(n.data().series).get();case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=null;case 13:if(o=t.t0,null===F){t.next=20;break}if(s=E.a.firestore.Timestamp.fromDate(F),C.docs[0].data().name!==r.data().name||a.data().publishedDate!==s||!(null===o&&0===I.length||I.toLowerCase()===o.data().name.toLowerCase()&&S===n.data().seriesInstance)){t.next=18;break}return t.abrupt("return",a);case 18:t.next=22;break;case 20:if(C.docs[0].data().name!==r.data().name||!(null===o&&0===I.length||I.toLowerCase()===o.data().name.toLowerCase()&&S===n.data().seriesInstance)){t.next=22;break}return t.abrupt("return",a);case 22:return t.abrupt("return",null);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 51:if(0===(L=t.sent.filter((function(e){return null!==e}))).length){t.next=57;break}x.rootBook=L[0].data().rootBook,x.mainEdition=!1,t.next=62;break;case 57:return t.next=59,e.collection("rootBooks").add({authorId:A});case 59:T=t.sent,x.rootBook=T.id,x.mainEdition=!0;case 62:t.next=86;break;case 64:return t.next=66,e.collection("books").where("title","==",n).where("mainEdition","==",!0).get();case 66:return W=t.sent,t.next=69,Promise.all(W.docs.filter(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("rootBooks").doc(a.data().rootBook).get();case 2:return n=t.sent,t.next=5,e.collection("authors").doc(n.data().authorId).get();case 5:if(r=t.sent,void 0===n.data().series){t.next=12;break}return t.next=9,e.collection("series").doc(n.data().series).get();case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=null;case 13:if(o=t.t0,C.docs[0].data().name!==r.data().name||!(null===o&&0===I.length||I.toLowerCase()===o.data().name.toLowerCase()&&S===n.data().seriesInstance)){t.next=16;break}return t.abrupt("return",a);case 16:return t.abrupt("return",null);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).filter((function(e){return null!==e}));case 69:if(0===(_=t.sent).length){t.next=75;break}x.rootBook=_[0].data().rootBook,x.mainEdition=!1,t.next=86;break;case 75:return t.next=77,e.collection("rootBooks").add({authorId:A});case 77:if(q=t.sent,x.rootBook=q.id,x.mainEdition=!0,!(I.length>0)||Number.isNaN(S)){t.next=86;break}return z=I.split(" ").map((function(e){return e.length>1?e[0].toUpperCase()+e.slice(1).toLowerCase():e[0].toUpperCase()})).join(" "),t.next=84,e.collection("series").add({name:z});case 84:Y=t.sent,q.set({series:Y.id,seriesInstance:S},{merge:!0});case 86:return t.next=88,e.collection("books").add(x);case 88:Q=t.sent,O.push({pathname:"/goodreads-copy"+"/review/new/".concat(Q.id,"?newBook=yes"),state:{addedNewBook:!0}}),t.next=95;break;case 92:t.prev=92,t.t0=t.catch(1),console.log(t.t0);case 95:case"end":return t.stop()}}),t,null,[[1,92]])})));return function(e){return t.apply(this,arguments)}}(),le=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.collection("books").doc(a).get();case 3:return n=t.sent,t.next=6,u(n.data().rootBook);case 6:return r=t.sent,t.abrupt("return",{title:n.data().title,genres:r.map((function(e){return{name:e.genre,userCount:e.userCount}}))});case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),ie=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c,l,i,u,m,d,p;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return r=t.sent,t.next=5,e.collection("rootBooks").doc(r.data().rootBook).get();case 5:if(void 0!==(o=t.sent).data().series){t.next=10;break}t.t0=void 0,t.next=13;break;case 10:return t.next=12,e.collection("series").doc(o.data().series).get();case 12:t.t0=t.sent.data().name;case 13:return s=t.t0,c=o.data().seriesInstance,t.next=17,e.collection("shelves").where("name","==",n).where("rootBooks","array-contains",r.data().rootBook).get();case 17:return l=t.sent,t.next=20,Promise.all(l.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l,i,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.data().user,t.next=3,e.collection("users").doc(n).get();case 3:return r=t.sent,o=r.data().firstName,s=r.data().profileImage,c=r.data().friends.length,t.next=9,e.collection("userBooksInstances").where("userId","==",n).get();case 9:return l=t.sent,i=l.docs.length,u=a.data().rootBooks.length,t.abrupt("return",{id:n,firstName:o,picture:s,numberOfBooks:i,numberOfFriends:c,numberOfBooksOnShelf:u});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:return i=t.sent,u=l.docs.map((function(e){return e.data().rootBooks})).reduce((function(e,t){return e.concat(t)}),[]),m=u.reduce((function(e,t){return void 0===e[t]?e[t]=1:e[t]=e[t]+1,e}),{}),(d=Object.keys(m).sort((function(e,t){return m[t]-m[e]}))).length=Math.min(d.length,5),t.next=27,Promise.all(d.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",a).where("mainEdition","==",!0).get();case 2:return n=t.sent,t.abrupt("return",{id:n.docs[0].id,title:n.docs[0].data().title,cover:n.docs[0].data().cover});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 27:return p=t.sent,t.abrupt("return",{series:s,seriesInstance:c,users:i,popularBooksOnShelf:p});case 29:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ue=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return n=t.sent,t.next=5,e.collection("rootBooks").doc(n.data().rootBook).get();case 5:if(void 0!==(r=t.sent).data().series){t.next=10;break}t.t0=void 0,t.next=13;break;case 10:return t.next=12,e.collection("series").doc(r.data().series).get();case 12:t.t0=t.sent.data().name;case 13:return o=t.t0,s=r.data().seriesInstance,t.next=17,e.collection("quizzes").where("books","array-contains",n.data().rootBook).get();case 17:return c=t.sent,t.next=20,Promise.all(c.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l,i,u,m,d,p;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.id,r=a.data().title,o=a.data().creator,t.next=5,e.collection("users").doc(o).get();case 5:if(s=t.sent,c=s.data().firstName,l=a.data().questions[0].mainQuestion,void 0!==(i=a.data().questions[0].rootBook)){t.next=13;break}t.t0=void 0,t.next=16;break;case 13:return t.next=15,e.collection("books").where("rootBook","==",i).where("mainEdition","==",!0).get();case 15:t.t0=t.sent.data().title;case 16:return u=t.t0,m=a.data().usersWhoTook.length,d=a.data().questions.length,p=a.data().rating,t.abrupt("return",{quizId:n,quizName:r,creatorId:o,creatorFirstName:c,question:l,book:u,numberOfUsersWhoTookQuiz:m,numberOfQuestions:d,rating:p});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:return l=t.sent,t.abrupt("return",{series:o,seriesInstance:s,quizQuestions:l});case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),me=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=10;break;case 4:return t.next=6,e.collection("quotes").doc(n).get();case 6:if((o=t.sent).data().usersWhoLiked.includes(a)){t.next=10;break}return t.next=10,e.collection("quotes").doc(n).set({usersWhoLiked:o.data().usersWhoLiked.concat(a)},{merge:!0});case 10:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),de=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c,l,i,u,m,d,p,f,h,b,v,E,k,w,y,N,O,x;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(n).get();case 2:return r=t.sent,o=r.data().pageCount,s=r.data().cover,t.next=7,e.collection("rootBooks").doc(r.data().rootBook).get();case 7:return c=t.sent,l=c.data().authorId,t.next=11,e.collection("authors").doc(l).get();case 11:return i=t.sent,u=i.data().name,t.next=15,e.collection("userBooksInstances").where("rating",">",0).get();case 15:return m=t.sent,d=m.docs.length,p=m.docs.map((function(e){return e.data().rating})),f=0===m.docs.lengh?0:p.reduce((function(e,t){return e+t/d}),0),t.next=21,e.collection("books").where("rootBook","==",r.data().rootBook).get();case 21:return h=t.sent,b=h.docs.map((function(e){return e.id})),t.next=25,e.collection("reviews").where("bookEdition","in",b).get();case 25:if(v=t.sent,E=v.docs.length,null!==a&&void 0!==a){t.next=31;break}t.t0=null,t.next=34;break;case 31:return t.next=33,e.collection("userBooksInstances").where("userId","==",a).where("bookId","==",n).get();case 33:t.t0=t.sent;case 34:return k=t.t0,w=null===k||0===k.docs.length?void 0:k.docs[0].data().status,y=null===k||0===k.docs.length?void 0:k.docs[0].data().rating,N=null===k||0===k.docs.length?void 0:k.docs[0].data().progress,O=null===k||0===k.docs.length?void 0:k.docs[0].data().position,t.next=41,e.collection("quotes").where("rootBook","==",r.data().rootBook).get();case 41:return x=t.sent.docs.map((function(e){return{id:e.id,content:e.data().text,tags:e.data().tags,usersWhoLiked:e.data().usersWhoLiked}})),t.abrupt("return",{pageCount:o,cover:s,authorId:l,authorName:u,numberOfRatings:d,averageRating:f,numberOfReviews:E,userStatus:w,userRating:y,userProgress:N,toReadBookPosition:O,quotes:x});case 43:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),pe=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l,i,u,m,d,p,f,b;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return n=t.sent,r=n.data().title,o=n.data().cover,t.next=7,e.collection("rootBooks").doc(n.data().rootBook).get();case 7:return s=t.sent,t.next=10,e.collection("series").doc(s.data().series).get();case 10:return c=t.sent,l=c.data().name,i=s.data().seriesInstance,u=s.data().authorId,t.next=16,e.collection("authors").doc(u).get();case 16:return m=t.sent,d=m.data().name,p=m.data().GRMember,t.next=21,e.collection("lists").where("books","array-contains",a).get();case 21:return f=t.sent,t.next=24,Promise.all(f.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n.id,t.t1=n.data().title,t.t2=n.data().books.indexOf(a)+1,t.next=5,Promise.all(n.data().books.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return t.abrupt("return",t.sent.data().cover);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:return t.t3=t.sent,t.t4=n.data().userVotes.length,t.abrupt("return",{id:t.t0,name:t.t1,bookPosition:t.t2,bookCovers:t.t3,voterCount:t.t4});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 24:return b=t.sent,t.abrupt("return",{title:r,cover:o,series:l,seriesInstance:i,authorId:u,authorName:d,authorIsMember:p,lists:b});case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fe=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=14;break;case 4:return t.next=6,e.collection("users").doc(a).get();case 6:if(void 0===(o=t.sent).data().favoriteAuthors||!o.data().favoriteAuthors.includes(n)){t.next=12;break}return t.next=10,e.collection("users").doc(a).set({favoriteAuthors:o.data().favoriteAuthors.filter((function(e){return e!==n}))},{merge:!0});case 10:t.next=14;break;case 12:return t.next=14,e.collection("users").doc(a).set({favoriteAuthors:o.data().favoriteAuthors.concat(n)},{merge:!0});case 14:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ge=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Promise,t.next=3,e.collection("rootBooks").where("authorId","==",a).get();case 3:return t.t1=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",a.id).get();case 2:return t.abrupt("return",t.sent.docs.map((function(e){return e.id})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=6,t.t0.all.call(t.t0,t.t1);case 6:return n=t.sent.reduce((function(e,t){return e.concat(t)}),[]),t.next=9,Promise.all(n.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").where("bookId","==",a).get();case 2:return n=t.sent,t.abrupt("return",{id:a,totalInstances:n.docs.length});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 9:return t.abrupt("return",t.sent.reduce((function(e,t){return t.totalInstances>=e.totalInstances?t:e}),{id:"",totalInstances:0}).id);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),he=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c,l,i,u,m,d,p,f,b,v,E,k,w,y,N,O,x,j,I,S,B,P,C,A,U,R,M,D,F,G,L;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("authors").doc(n).get();case 2:if(r=t.sent,o=r.data().GRMember,s=r.data().placeOfBirth,c=null!==r.data().dateOfBirth&&void 0!==r.data().dateOfBirth?r.data().dateOfBirth.toDate():void 0,void 0===r.data().influences){t.next=12;break}return t.next=9,Promise.all(r.data().influences.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,e.collection("authors").doc(a).get();case 3:return t.t1=t.sent.data().name,t.abrupt("return",{id:t.t0,name:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=void 0;case 13:if(l=t.t0,i=r.data().website,u=r.data().twitter,m=r.data().genre,void 0===r.data().user){t.next=23;break}return t.next=20,e.collection("users").doc(r.data().user).get();case 20:t.t1=t.sent,t.next=24;break;case 23:t.t1=void 0;case 24:if(d=t.t1,p=void 0!==d?d.data().membershipDate.toDate():void 0,f=void 0!==r.data().about?r.data().about.replace(/\\n/g,"\n"):void 0,b=r.data().picture,void 0===d){t.next=34;break}return t.next=31,e.collection("userBooksInstances").where("userId","==",d.id).get();case 31:t.t2=t.sent,t.next=35;break;case 34:t.t2=void 0;case 35:if(v=t.t2,void 0===d){t.next=42;break}return t.next=39,e.collection("userBooksInstances").where("userId","==",d.id).where("rating",">",0).get();case 39:t.t3=t.sent,t.next=43;break;case 42:t.t3=void 0;case 43:if(E=t.t3,k=void 0!==E?E.docs.length:void 0,void 0===d){t.next=51;break}return t.next=48,e.collection("reviews").where("user","==",d.id).get();case 48:t.t4=t.sent.docs.length,t.next=52;break;case 51:t.t4=void 0;case 52:if(w=t.t4,y=void 0!==E?E.docs.reduce((function(e,t){return e+t/E.docs.length}),0):void 0,void 0===r.data().followers){t.next=60;break}return t.next=57,Promise.all(r.data().followers.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,e.collection("users").doc(a).get();case 3:return t.t1=t.sent.data().firstName,t.next=6,e.collection("users").doc(a).get();case 6:return t.t2=t.sent.data().profileImage,t.abrupt("return",{id:t.t0,name:t.t1,profilePicture:t.t2});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 57:t.t5=t.sent,t.next=61;break;case 60:t.t5=[];case 61:return N=t.t5,t.next=64,e.collection("authors").get();case 64:return O=t.sent.docs.sort((function(e,t){return void 0===e.data().followers||void 0===t.data().followers?t:t.data().followers.length-e.data().followers.length})),x=O.map((function(e){return e.id})).indexOf(n)+1,t.t6=Promise,t.next=69,e.collection("users").get();case 69:return t.t7=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.id,t.next=3,e.collection("reviews").where("user","==",a.id).where("rating",">",0).get();case 3:return t.t1=t.sent.docs.map((function(e){return e.data().rating})).reduce((function(e,t){return e+t}),0),t.abrupt("return",{id:t.t0,score:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).sort((function(e,t){return t.score-e.score})),t.next=72,t.t6.all.call(t.t6,t.t7);case 72:return j=t.sent,I=-1!==j.map((function(e){return e.id})).indexOf(n)?j.map((function(e){return e.id})).indexOf(n)+1:void 0,t.next=76,e.collection("users").where("favoriteAuthors","array-contains",n).get();case 76:if(S=t.sent.docs.map((function(e){return e.id})),B=void 0!==v?v.docs.filter((function(e){return"read"===e.data().status})).length:void 0,P=void 0!==v?v.docs.filter((function(e){return"to-read"===e.data().status})).length:null,C=void 0!==v?v.docs.filter((function(e){return"reading"===e.data().status})).length:null,A=void 0!==v?v.docs.filter((function(e){return e.data().favorite})).length:null,void 0===d){t.next=87;break}return t.next=84,Promise.all(d.data().friends.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return n=t.sent,t.t0=a,t.t1=void 0!==n.data().lastName?n.data().firstName+" "+n.data().lastName:n.data().firstName,t.t2=n.data().profileImage,t.next=8,e.collection("userBooksInstances").where("userId","==",a).get();case 8:return t.t3=t.sent.docs.length,t.t4=n.data().friends.length,t.abrupt("return",{id:t.t0,name:t.t1,profilePicture:t.t2,numberOfBooks:t.t3,numberOfFriends:t.t4});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 84:t.t8=t.sent,t.next=88;break;case 87:t.t8=void 0;case 88:return U=t.t8,t.next=91,e.collection("rootBooks").where("authorId","==",n).get();case 91:return R=t.sent,t.next=94,Promise.all(R.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(n){var r,o,s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",n.id).get();case 2:return r=t.sent.docs.map((function(e){return e.id})),t.next=5,e.collection("books").where("rootBook","==",n.id).where("mainEdition","==",!0).get();case 5:if(o=t.sent.docs[0],void 0===a||null===a){t.next=12;break}return t.next=9,e.collection("userBooksInstances").where("userId","==",a).get();case 9:t.t0=t.sent.docs.filter((function(e){return r.includes(e.data().bookId)})),t.next=13;break;case 12:t.t0=void 0;case 13:return s=t.t0,t.next=16,e.collection("userBooksInstances").where("bookId","in",r).get();case 16:if(c=t.sent.docs.filter((function(e){return void 0!==e.data().rating})),t.t1=o.id,t.t2=o.data().title,t.t3=n.data().series,void 0===n.data().series){t.next=26;break}return t.next=23,e.collection("series").doc(n.data().series).get();case 23:t.t4=t.sent.data().name,t.next=27;break;case 26:t.t4=void 0;case 27:return t.t5=t.t4,t.t6=n.data().seriesInstance,t.t7=o.data().cover,t.t8=void 0!==s&&s.length>0?s[0].data().status:void 0,t.t9=void 0!==s&&s.length>0?s[0].data().rating:void 0,t.t10=c.map((function(e){return e.data().rating})).reduce((function(e,t){return 0!==c.length?e+t/c.length:0}),0),t.t11=c.length,t.t12=void 0!==o.data().publishedDate?o.data().publishedDate.toDate().getFullYear():void 0,t.t13=r.length,t.next=38,e.collection("reviews").where("bookEdition","in",r).get();case 38:return t.t14=t.sent.docs.length,t.abrupt("return",{id:t.t1,title:t.t2,seriesId:t.t3,series:t.t5,seriesInstance:t.t6,cover:t.t7,userStatus:t.t8,userRating:t.t9,averageRating:t.t10,ratings:t.t11,publishedYear:t.t12,editions:t.t13,numberOfReviews:t.t14});case 40:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 94:return M=t.sent,t.t9=Promise,t.next=98,e.collection("rootBooks").where("authorId","==",n).get();case 98:return t.t10=t.sent.docs.filter((function(e){return void 0!==e.data().series})).map((function(e){return e.data().series})).reduce((function(e,t){return e.includes(t)?e:e.concat(t)}),[]).map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("series").doc(a).get();case 2:return n=t.sent,t.next=5,e.collection("rootBooks").where("series","==",a).get();case 5:return r=t.sent,o=M.filter((function(e){return e.seriesId===a})).reduce((function(e,t){return e+t.ratings}),0),t.t0=n.data().name,t.next=10,Promise.all(r.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",a.id).where("mainEdition","==",!0).get();case 2:return n=t.sent,t.abrupt("return",{id:n.docs[0].id,title:n.docs[0].data().title,seriesInstance:a.data().seriesInstance,cover:n.docs[0].data().cover});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 10:return t.t1=t.sent,t.t2=M.filter((function(e){return e.seriesId===a})).reduce((function(e,t){return 0!==o?e+t.averageRating*t.ratings/o:0}),0),t.t3=o,t.abrupt("return",{title:t.t0,books:t.t1,averageRating:t.t2,numberOfRatings:t.t3});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=101,t.t9.all.call(t.t9,t.t10);case 101:return D=t.sent,t.next=104,e.collection("articles").where("featuredBooks","array-contains-any",R.docs.map((function(e){return e.id}))).get();case 104:return F=t.sent.docs.map((function(e){return{id:e.id,title:e.data().title,content:e.data().content,numberOfLikes:e.data().usersWhoLiked.length,numberOfComments:e.data().comments.length,image:e.data().image}})),t.t11=Promise,t.next=108,e.collection("quotes").where("authorId","==",n).get();case 108:return t.t12=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.id,t.t1=a.data().text,t.next=4,e.collection("books").where("rootBook","==",a.data().rootBook).where("mainEdition","==",!0).get();case 4:return t.t2=t.sent.docs[0].data().title,t.t3=a.data().tags,t.t4=a.data().usersWhoLiked,t.abrupt("return",{id:t.t0,content:t.t1,bookTitle:t.t2,tags:t.t3,usersWhoLiked:t.t4});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=111,t.t11.all.call(t.t11,t.t12);case 111:if(G=t.sent,void 0===d){t.next=118;break}return t.next=115,Promise.all(d.data().favoriteAuthors.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("authors").doc(a).get();case 2:return n=t.sent,t.next=5,ge(a);case 5:return r=t.sent,t.t0=a,t.t1=n.data().name,t.t2=n.data().picture,t.t3=r,t.next=12,e.collection("books").doc(r).get();case 12:return t.t4=t.sent.data().title,t.abrupt("return",{id:t.t0,name:t.t1,image:t.t2,bestBookId:t.t3,bestBookTitle:t.t4});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 115:t.t13=t.sent,t.next=119;break;case 118:t.t13=void 0;case 119:return L=t.t13,t.abrupt("return",{GRMember:o,placeOfBirth:s,dateOfBirth:c,influences:l,website:i,twitter:u,genre:m,memberSince:p,description:f,profilePicture:b,numberOfRatings:k,numberOfReviews:w,averageRating:y,followers:N,mostFollowedPosition:x,reviewerPosition:I,usersWhoHaveAsFavorite:S,numberOfReadBooks:B,numberOfToReadBooks:P,numberOfReadingBooks:C,numberOfFavoriteBooks:A,friends:U,booksByAuthor:M,seriesByAuthor:D,relatedNews:F,quotes:G,favoriteAuthors:L});case 121:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),be=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===a||void 0===a){t.next=9;break}return t.prev=1,t.next=4,e.collection("users").doc(a).set({favoriteAuthors:n},{merge:!0});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,a){return t.apply(this,arguments)}}(),ve=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=5;break}return n.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.abrupt("return",[]);case 5:return t.t0=Promise,t.next=8,e.collection("users").doc(a).get();case 8:return t.t1=t.sent.data().favoriteAuthors.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("authors").doc(a).get();case 2:return n=t.sent,t.next=5,ge(a);case 5:return r=t.sent,t.next=8,e.collection("rootBooks").where("authorId","==",a).get();case 8:return o=t.sent.docs.map((function(e){return e.id})),t.next=11,e.collection("books").where("rootBook","in",o).get();case 11:return s=t.sent.docs.map((function(e){return e.id})),t.t0=a,t.t1=n.data().name,t.t2=n.data().user,t.t3=r,t.next=18,e.collection("books").doc(r).get();case 18:if(t.t4=t.sent.data().title,t.t5=n.data().picture,t.t6=s.length,void 0!==n.data().user){t.next=25;break}t.t7=void 0,t.next=28;break;case 25:return t.next=27,e.collection("userBooksInstances").where("userId","==",n.data().user).get();case 27:t.t7=t.sent.docs.length;case 28:return t.t8=t.t7,t.next=31,e.collection("reviews").where("bookEdition","in",s).get();case 31:if(t.t9=t.sent.docs.length,void 0!==n.data().user){t.next=36;break}t.t10=void 0,t.next=39;break;case 36:return t.next=38,e.collection("users").doc(n.data().user).get();case 38:t.t10=t.sent.data().friends.length;case 39:return t.t11=t.t10,t.t12=void 0===n.data().followers?0:n.data().followers.length,t.abrupt("return",{id:t.t0,name:t.t1,userId:t.t2,bestBookId:t.t3,bestBookTitle:t.t4,profilePicture:t.t5,numberOfBooks:t.t6,numberOfShelvedBooks:t.t8,numberOfMemberReviews:t.t9,numberOfFriends:t.t11,numberOfFollowers:t.t12});case 42:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=11,t.t0.all.call(t.t0,t.t1);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ee=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return n=t.sent,t.t0=n.data().firstName,t.next=6,ve(a,null);case 6:return t.t1=t.sent,t.abrupt("return",{firstName:t.t0,authors:t.t1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ke=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=5;break}return n.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.abrupt("return",[]);case 5:return t.next=7,e.collection("users").doc(a).get();case 7:return r=t.sent,t.abrupt("return",r.data().notifications.map((function(e){return{anchorSrc:e.anchorSrc,content:e.content,image:e.image,name:e.name,nonAnchorContent:e.nonAnchorContent,time:e.time.toDate()}})));case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),we=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).set(n,{merge:!0});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ye=function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).update({profileImage:E.a.firestore.FieldValue.delete()});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ne=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=5;break}return n.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.abrupt("return",{});case 5:return t.next=7,e.collection("users").doc(a).get();case 7:return r=t.sent.data(),o=function(e){return void 0!==e?e:""},t.abrupt("return",{profile:{firstName:o(r.firstName),middleName:o(r.middleName),lastName:o(r.lastName),showLastNameTo:r.showLastNameTo,gender:o(r.gender),customGender:o(r.customGender),pronouns:r.pronouns,showGenderTo:r.showGenderTo,zipCode:o(r.zipCode),city:o(r.city),stateProvinceCode:o(r.stateProvinceCode),country:o(r.country),locationViewableBy:r.locationViewableBy,dateOfBirth:null===r.dateOfBirth?void 0:r.dateOfBirth.toDate(),ageAndBirthdayPrivacy:r.ageAndBirthdayPrivacy,profilePicture:r.profileImage,website:o(r.website),interests:o(r.interests),typeOfBooks:o(r.typeOfBooks),aboutMe:o(r.aboutMe)},account:{email:o(r.email),emailVerifiedDate:r.emailVerifiedDate,passwordLength:o(r.password).length,whoCanViewMyProfile:r.whoCanViewMyProfile,emailAddressVisibleTo:r.emailAddressVisibleTo,friendChallengeQuestion:o(r.friendChallengeQuestion),friendChallengeAnswer:o(r.friendChallengeAnswer)},feed:{addBookToShelves:r.addBookToShelves,addAFriend:r.addAFriend,voteForABookReview:r.voteForABookReview,addAQuote:r.addAQuote,recommendABook:r.recommendABook,addANewStatusToBook:r.addANewStatusToBook,followAnAuthor:r.followAnAuthor}});case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Oe=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return t.t0=t.sent.data().password,t.t1=n,t.abrupt("return",t.t0===t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),xe=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).set({password:n},{merge:!0});case 2:r.push({pathname:"/goodreads-copy/user/sign_in",state:{message:"Your password has been updated."}});case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),je=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").where("userId","==",a).get();case 2:return t.sent.docs.map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=6,e.collection("reviews").where("user","==",a).get();case 6:return t.sent.docs.map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=10,e.collection("users").doc(a).delete();case 10:n.push({pathname:"/goodreads-copy/",state:{message:"Your account will be permanently deleted."}});case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ie=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=5;break}return n.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.abrupt("return",[]);case 5:return t.next=7,e.collection("users").doc(a).get();case 7:return t.abrupt("return",t.sent.data().favoriteGenres);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Se=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).set({favoriteGenres:n},{merge:!0});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Be=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c,l,i,u,m,d,p,f,b,v,E,w;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a||null===a){t.next=6;break}return t.next=3,e.collection("users").doc(a).get();case 3:t.t0=t.sent.data().favoriteGenres,t.next=7;break;case 6:t.t0=void 0;case 7:return r=t.t0,t.next=10,e.collection("genres").doc(n).get();case 10:return o=t.sent,s=o.data().description,c=o.data().relatedGenres,l=o.data().parentGenre,t.next=16,e.collection("shelves").where("genre","==",n).get();case 16:return i=t.sent,u=i.docs.reduce((function(e,t){var a=e;return t.data().rootBooks.forEach((function(e){a.includes(e)||a.push(e)})),a}),[]),t.t1=[].concat,t.t2=[],t.next=22,Promise.all(u.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",a).get();case 2:return t.abrupt("return",t.sent.docs);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 22:return t.t3=t.sent,m=t.t1.apply.call(t.t1,t.t2,t.t3),(d=m.sort((function(e,t){return void 0===e.data().publishedDate?t:void 0===t.data().publishedDate?e:t.data().publishedDate.toDate()-e.data().publishedDate.toDate()})).map((function(e){return{id:e.id,cover:e.data().cover,title:e.data().title}}))).length=Math.min(d.length,15),t.next=28,e.collection("userBooksUpdates").get();case 28:return p=t.sent,t.next=31,Promise.all(Object.entries(p.docs.filter((function(e){return Object(k.a)(new Date,e.data().date.toDate())<=7&&m.map((function(e){return e.id})).includes(e.data().book)&&"add-book"===e.data().action&&("read"===e.data().shelf||"reading"===e.data().shelf)})).reduce((function(e,t){return void 0===e[t.data().book]?e[t.data().book]=1:e[t.data().book]+=1,e}),{})).sort((function(e,t){return t[1]-e[1]})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a[0]).get();case 2:return n=t.sent,t.abrupt("return",{id:a[0],cover:n.data().cover,title:n.data().cover});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 31:return(f=t.sent).length=Math.min(f.length,15),t.t4=Promise,t.next=36,e.collection("lists").where("tags","array-contains",n).get();case 36:return t.t5=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.id,t.t1=a.data().title,t.next=4,Promise.all(a.data().books.filter((function(e,t){return t<5})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return n=t.sent.data().cover,t.abrupt("return",void 0!==n?n:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return t.t2=t.sent,t.t3=a.data().books.length,t.t4=a.data().userVotes.length,t.abrupt("return",{id:t.t0,title:t.t1,bookCovers:t.t2,numberOfBooks:t.t3,numberOfVoters:t.t4});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=39,t.t4.all.call(t.t4,t.t5);case 39:return b=t.sent,v=m.filter((function(e,t){return t<15})).map((function(e){return{id:e.id,cover:e.data().cover,title:e.data().title}})),t.next=43,e.collection("articles").get();case 43:return(E=t.sent.docs.filter((function(e){return void 0!==e.data().featuredBooks&&e.data().featuredBooks.some((function(e){return u.includes(e)}))})).sort((function(e,t){return t.data().datePublished.toDate()-e.data().datePublished.toDate()})).map((function(e){return{id:e.id,image:e.data().image,title:e.data().title,content:e.data().content}}))).length=Math.min(E.length,1),t.t6=Promise,t.next=48,e.collection("quotes").where("tags","array-contains",n).get();case 48:return t.t7=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("authors").doc(a.data().authorId).get();case 2:return n=t.sent,t.next=5,e.collection("books").where("rootBook","==",a.data().rootBook).where("mainEdition","==",!0).get();case 5:return r=t.sent,t.abrupt("return",{id:a.id,content:a.data().text,numberOfLikes:a.data().usersWhoLiked.length,authorId:a.data().authorId,authorName:n.data().name,authorPicture:n.data().picture,bookTitle:r.docs[0].data().title});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=51,t.t6.all.call(t.t6,t.t7);case 51:return w=t.sent,t.abrupt("return",{userFavoriteGenres:r,description:s,relatedGenres:c,parentGenre:l,newReleases:d,mostReadThisWeek:f,lists:b,genreBooks:v,relatedNews:E,quotesTagged:w});case 53:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Pe=function(){var t=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("articles").orderBy("datePublished","desc").get();case 2:return a=t.sent,t.abrupt("return",a.docs.map((function(e){return{id:e.id,image:e.data().image,type:e.data().type,title:e.data().title,date:e.data().datePublished.toDate(),numberOfLikes:e.data().usersWhoLiked.length,content:e.data().content,featured:e.data().isFeatured}})));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ce=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=14;break;case 4:return t.next=6,e.collection("articles").doc(n).get();case 6:if(!(o=t.sent).data().usersWhoLiked.includes(a)){t.next=12;break}return t.next=10,e.collection("articles").doc(n).set({usersWhoLiked:o.data().usersWhoLiked.filter((function(e){return e!==a}))},{merge:!0});case 10:t.next=14;break;case 12:return t.next=14,e.collection("articles").doc(n).set({usersWhoLiked:o.data().usersWhoLiked.concat(a)},{merge:!0});case 14:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Ae=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("articles").doc(a).get();case 2:return n=t.sent,t.abrupt("return",{authorName:n.data().authorName,date:n.data().datePublished.toDate(),likes:n.data().usersWhoLiked,image:n.data().image,content:n.data().content});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ue=function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("articles").doc(a).get();case 2:return t.abrupt("return",t.sent.data().title);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Re=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("articles").doc(a).get();case 2:return n=t.sent,t.next=5,Promise.all(n.data().usersWhoLiked.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return n=t.sent,t.t0=n.id,t.t1=n.data().firstName,t.t2=n.data().profileImage,t.next=8,e.collection("userBooksInstances").where("userId","==",a).get();case 8:return t.t3=t.sent.docs.length,t.t4=n.data().friends.length,t.abrupt("return",{id:t.t0,name:t.t1,profilePicture:t.t2,numberOfBooks:t.t3,numberOfFriends:t.t4});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Me=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return r=t.sent,t.next=5,e.collection("userBooksUpdates").where("user","==",a).get();case 5:return o=t.sent,t.next=8,e.collection("userBooksInstances").where("userId","==",a).get();case 8:return s=t.sent,t.next=11,e.collection("reviews").where("user","==",a).get();case 11:return c=t.sent,t.t0=r.data().whoCanViewMyProfile,t.t1=void 0!==r.data().followers&&r.data().followers.includes(n),t.t2=r.data().friends.includes(n),t.t3=r.data().newFriendsRequests.filter((function(e){return e.sender===n})).length>0,t.t4=r.data().lastName,t.t5=r.data().showLastNameTo,t.t6=r.data().showGenderTo,t.t7="m"===r.data().gender?"Male":"f"===r.data().gender?"Female":"c"===r.data().gender?r.data().customGender:"",t.t8=r.data().locationViewableBy,t.t9=r.data().country,t.t10=r.data().stateProvinceCode,t.t11=r.data().city,t.t12=r.data().ageAndBirthdayPrivacy,t.t13=null===r.data().dateOfBirth?void 0:r.data().dateOfBirth.toDate(),t.t14=r.data().website,t.t15=o.docs.length>0?o.docs.sort((function(e,t){return t.data().date.toDate()-e.data().date.toDate()}))[0].data().date.toDate():r.data().membershipDate.toDate(),t.t16=r.data().membershipDate.toDate(),t.t17=r.data().interests,t.t18=r.data().typeOfBooks,t.t19=r.data().aboutMe,t.t20=r.data().profileImage,t.t21=s.docs.filter((function(e){return void 0!==e.data().rating&&0!==e.data().rating})).length,t.t22=s.docs.filter((function(e){return void 0!==e.data().rating&&5===e.data().rating})).length,t.t23=s.docs.filter((function(e){return void 0!==e.data().rating&&4===e.data().rating})).length,t.t24=s.docs.filter((function(e){return void 0!==e.data().rating&&3===e.data().rating})).length,t.t25=s.docs.filter((function(e){return void 0!==e.data().rating&&2===e.data().rating})).length,t.t26=s.docs.filter((function(e){return void 0!==e.data().rating&&1===e.data().rating})).length,t.t27=s.docs.filter((function(e){return void 0!==e.data().rating&&0!==e.data().rating})).reduce((function(e,t){return e+t.data().rating/s.docs.filter((function(e){return void 0!==e.data().rating&&0!==e.data().rating})).length}),0),t.t28=c.docs.length,t.next=43,e.collection("shelves").where("user","==",a).get();case 43:return t.t29=t.sent.docs.map((function(e){return{name:void 0!==e.data().name?e.data().name:e.data().genre,numberOfBooks:e.data().rootBooks.length}})),t.next=46,Promise.all(s.docs.filter((function(e){return"to-read"===e.data().status})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return n=t.sent,t.abrupt("return",{id:a.data().bookId,title:n.data().title,cover:n.data().cover});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 46:return t.t30=t.sent,t.next=49,Promise.all(s.docs.filter((function(e){return"reading"===e.data().status&&o.docs.some((function(t){return t.data().book===e.data().bookId&&"add-book"===t.data().action}))})).map(function(){var t=Object(h.a)(g.a.mark((function t(r){var s,c,l,i,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(r.data().bookId).get();case 2:return s=t.sent,t.next=5,e.collection("rootBooks").doc(s.data().rootBook).get();case 5:return c=t.sent,t.next=8,e.collection("authors").doc(c.data().authorId).get();case 8:return l=t.sent,t.next=11,e.collection("shelves").where("user","==",a).where("rootBooks","array-contains",s.data().rootBook).get();case 11:return i=t.sent,t.next=14,e.collection("userBooksInstances").where("userId","==",n).where("bookId","==",r.data().bookId).get();case 14:return u=t.sent,t.abrupt("return",{id:r.data().bookId,title:s.data().title,cover:s.data().cover,mainAuthorId:c.data().authorId,mainAuthorName:l.data().name,mainAuthorIsMember:l.data().GRMember,bookshelves:i.docs.map((function(e){return void 0!==e.data().name?e.data().name:e.data().genre})),updateDate:o.docs.filter((function(e){return e.data().book===r.data().bookId})).sort((function(e,t){return t.data().date.toDate()-e.data().date.toDate()}))[0].data().date.toDate(),userStatus:0===u.docs.length?void 0:u.docs[0].data().status,userRating:0===u.docs.length?void 0:u.docs[0].data().rating,userProgress:0===u.docs.length?void 0:u.docs[0].data().progress,userToReadPosition:0===u.docs.length?void 0:u.docs[0].data().position});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 49:return t.t31=t.sent,t.next=52,Promise.all(o.docs.filter((function(e){return r.data().addBookToShelves&&"add-book"===e.data().action&&!["reading","to-read","read"].includes(e.data().shelf)||r.data().addAFriend&&"add-friend"===e.data().action||r.data().voteForABookReview&&"vote-for-book-review"===e.data().action||r.data().addAQuote&&"add-quote"===e.data().action||r.data().recommendABook&&"recommend-book"===e.data().action||r.data().addANewStatusToBook&&("add-book"===e.data().action&&["read","reading","to-read"].includes(e.data().shelf)||"rate-book"===e.data().action)||r.data().followAnAuthor&&"follow-author"===e.data().action})).sort((function(e,t){return t.data().date.toDate()-e.data().date.toDate()})).filter((function(e,t){return t<10})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){var r,o,s,c,l,i,u,m,d,p,f;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("vote-for-book-review"!==a.data().action){t.next=6;break}return t.next=3,e.collection("reviews").doc(a.data().review).get();case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=null;case 7:if(r=t.t0,void 0===a.data().book){t.next=14;break}return t.next=11,e.collection("books").doc(a.data().book).get();case 11:t.t1=t.sent,t.next=15;break;case 14:t.t1=void 0;case 15:if(o=t.t1,void 0===a.data().book){t.next=22;break}return t.next=19,e.collection("userBooksInstances").where("userId","==",n).where("bookId","==",a.data().book).get();case 19:t.t2=t.sent,t.next=23;break;case 22:t.t2={docs:[]};case 23:if(s=t.t2,void 0===o){t.next=30;break}return t.next=27,e.collection("rootBooks").doc(o.data().rootBook).get();case 27:t.t3=t.sent,t.next=31;break;case 30:t.t3=void 0;case 31:if(c=t.t3,void 0===(l="follow-author"===a.data().action?a.data().author:"add-book"===a.data().action||"recommend-book"===a.data().action||"rate-book"===a.data().action?c.data().authorId:void 0)){t.next=39;break}return t.next=36,e.collection("authors").doc(l).get();case 36:t.t4=t.sent,t.next=40;break;case 39:t.t4=void 0;case 40:if(i=t.t4,void 0===(u="add-friend"===a.data().action?a.data().newFriendId:"vote-for-book-review"===a.data().action?r.data().user:void 0)){t.next=48;break}return t.next=45,e.collection("users").doc(u).get();case 45:t.t5=t.sent,t.next=49;break;case 48:t.t5=void 0;case 49:if(m=t.t5,void 0===l){t.next=56;break}return t.next=53,ge(l);case 53:t.t6=t.sent,t.next=57;break;case 56:t.t6=void 0;case 57:if(void 0===(d=t.t6)){t.next=64;break}return t.next=61,e.collection("books").doc(d).get();case 61:t.t7=t.sent,t.next=65;break;case 64:t.t7=void 0;case 65:if(void 0===(p=t.t7)){t.next=72;break}return t.next=69,e.collection("rootBooks").doc(p.data().rootBook).get();case 69:t.t8=t.sent,t.next=73;break;case 72:t.t8=void 0;case 73:if(f=t.t8,t.t9=a.id,t.t10="add-book"!==a.data().action?a.data().action:"add-book-"+a.data().shelf,t.t11=a.data().date.toDate(),t.t12=void 0===a.data().rating?0:a.data().rating,t.t13=a.data().newFriendId,t.t14=null!==r?r.data().usersWhoLiked.length:void 0,t.t15=null!==r?r.data().text:void 0,t.t16=a.data().quote,void 0===a.data().quote){t.next=88;break}return t.next=85,e.collection("quotes").doc(a.data().quote).get();case 85:t.t17=t.sent.data().text,t.next=89;break;case 88:t.t17=void 0;case 89:if(t.t18=t.t17,t.t19=void 0!==m?{id:m.id,name:m.data().firstName,picture:m.data().profileImage}:void 0,void 0===i){t.next=104;break}return t.t21=l,t.t22=i.data().name,t.t23=i.data().GRMember,t.t24=d,t.t25=p.data().title,t.next=99,e.collection("series").doc(f.data().series).get();case 99:t.t26=t.sent.name,t.t27=f.data().seriesInstance,t.t20={id:t.t21,name:t.t22,isMember:t.t23,bestBookId:t.t24,bestBookTitle:t.t25,bestBookSeries:t.t26,bestBookSeriesInstance:t.t27},t.next=105;break;case 104:t.t20=void 0;case 105:return t.t28=t.t20,t.t29=void 0!==o?{id:o.id,title:o.data().title,cover:o.data().cover,userStatus:0===s.docs.length?void 0:s.docs[0].data().status,userRating:0===s.docs.length?void 0:s.docs[0].data().rating,userProgress:0===s.docs.length?void 0:s.docs[0].data().progress,userToReadPosition:0===s.docs.length?void 0:s.docs[0].data().position}:void 0,t.abrupt("return",{id:t.t9,type:t.t10,date:t.t11,rating:t.t12,newFriendId:t.t13,numberOfReviewVoters:t.t14,reviewText:t.t15,quoteId:t.t16,quoteContent:t.t18,userInfo:t.t19,authorInfo:t.t28,bookInfo:t.t29});case 108:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 52:return t.t32=t.sent,t.t33=Promise,t.next=56,e.collection("quotes").where("usersWhoLiked","array-contains",a).get();case 56:return t.t34=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("authors").doc(a.data().authorId).get();case 2:return r=t.sent,t.next=5,e.collection("books").where("rootBook","==",a.data().rootBook).where("mainEdition","==",!0).get();case 5:return o=t.sent.docs[0],t.abrupt("return",{id:a.id,content:a.data().text,authorId:a.data().authorId,authorName:r.data().name,authorProfilePicture:r.data().picture,bookId:o.id,bookTitle:o.data().title,numberOfLikes:a.data().usersWhoLiked.length,likedByUser:a.data().usersWhoLiked.includes(n)});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=59,t.t33.all.call(t.t33,t.t34);case 59:return t.t35=t.sent,t.next=62,Promise.all(r.data().friends.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return n=t.sent,t.t0=a,t.t1=n.data().firstName,t.t2=n.data().profileImage,t.next=8,e.collection("userBooksInstances").where("userId","==",a).get();case 8:return t.t3=t.sent.docs.length,t.t4=n.data().friends.length,t.abrupt("return",{id:t.t0,name:t.t1,picture:t.t2,numberOfBooks:t.t3,numberOfFriends:t.t4});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 62:return t.t36=t.sent,t.next=65,e.collection("users").where("followers","array-contains",a).get();case 65:return t.t37=t.sent.docs.map((function(e){return{id:e.id,picture:e.data().profileImage,name:e.data().firstName}})),t.t38=void 0===r.data().followers?0:r.data().followers.length,t.next=69,Promise.all(r.data().favoriteAuthors.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("authors").doc(a).get();case 2:return n=t.sent,t.next=5,ge(a);case 5:return r=t.sent,t.t0=a,t.t1=n.data().name,t.t2=n.data().picture,t.t3=r,t.next=12,e.collection("books").doc(r).get();case 12:return t.t4=t.sent.data().title,t.abrupt("return",{id:t.t0,name:t.t1,picture:t.t2,bestBookId:t.t3,bestBookTitle:t.t4});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 69:return t.t39=t.sent,t.t40=Promise,t.next=73,e.collection("lists").get();case 73:return t.t41=t.sent.docs.filter((function(e){return e.data().userVotes.some((function(e){return e.user===a}))})).map(function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n.id,t.t1=n.data().title,t.next=4,Promise.all(n.data().userVotes.filter((function(e){return e.user===a}))[0].books.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return t.abrupt("return",t.sent.data().cover);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return t.t2=t.sent,t.t3=n.data().books.length,t.t4=n.data().userVotes.length,t.abrupt("return",{id:t.t0,title:t.t1,bookCovers:t.t2,numberOfBooks:t.t3,numberOfVoters:t.t4});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=76,t.t40.all.call(t.t40,t.t41);case 76:return t.t42=t.sent,t.t43=r.data().favoriteGenres,t.abrupt("return",{whoCanViewUserProfile:t.t0,isFollowedByUser:t.t1,isUserFriend:t.t2,hasPendingFriendResquestFromUser:t.t3,lastName:t.t4,showLastNameTo:t.t5,showGenderTo:t.t6,gender:t.t7,locationViewableBy:t.t8,country:t.t9,stateProvinceCode:t.t10,city:t.t11,ageAndBirthdayPrivacy:t.t12,birthday:t.t13,website:t.t14,lastActiveDate:t.t15,joinedDate:t.t16,interests:t.t17,favoriteBooks:t.t18,about:t.t19,profilePicture:t.t20,numberOfRatings:t.t21,fiveRatings:t.t22,fourRatings:t.t23,threeRatings:t.t24,twoRatings:t.t25,oneRatings:t.t26,averageRating:t.t27,numberOfReviews:t.t28,bookshelves:t.t29,toReadBooks:t.t30,currentlyReadingBooks:t.t31,recentUpdates:t.t32,quotes:t.t35,friends:t.t36,following:t.t37,numberOfFollowers:t.t38,favoriteAuthors:t.t39,votedLists:t.t42,favoriteGenres:t.t43});case 79:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),De=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=9;break;case 4:return t.next=6,e.collection("users").doc(n).get();case 6:return o=t.sent,t.next=9,e.collection("users").doc(n).set({followers:void 0===o.data().followers?[a]:o.data().followers.concat(a)},{merge:!0});case 9:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Fe=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=9;break;case 4:return t.next=6,e.collection("users").doc(n).get();case 6:return o=t.sent,t.next=9,e.collection("users").doc(n).set({followers:o.data().followers.filter((function(e){return e!==a}))},{merge:!0});case 9:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Ge=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a&&void 0!==a){t.next=4;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=14;break;case 4:return t.next=6,e.collection("users").doc(a).get();case 6:return o=t.sent,t.next=9,e.collection("users").doc(n).get();case 9:return s=t.sent,t.next=12,e.collection("users").doc(a).set({friends:o.data().friends.filter((function(e){return e!==n}))},{merge:!0});case 12:return t.next=14,e.collection("users").doc(n).set({friends:s.data().friends.filter((function(e){return e!==a}))},{merge:!0});case 14:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Le=function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksUpdates").doc(a).delete();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Te=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Promise,t.next=3,e.collection("userBooksInstances").where("userId","==",a).get();case 3:return t.t1=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(n){var r,o,s,c,l,i,u,m;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(n.data().bookId).get();case 2:return r=t.sent,t.next=5,e.collection("rootBooks").doc(r.data().rootBook).get();case 5:return o=t.sent,t.next=8,e.collection("books").where("rootBook","==",o.id).get();case 8:return s=t.sent.docs.map((function(e){return e.id})),t.next=11,e.collection("authors").doc(o.data().authorId).get();case 11:return c=t.sent,t.next=14,e.collection("userBooksInstances").where("bookId","in",s).get();case 14:return l=t.sent,i=l.docs.filter((function(e){return void 0!==e.data().rating&&0!==e.data().rating})),t.next=18,e.collection("shelves").where("rootBooks","array-contains",o.id).where("user","==",a).get();case 18:return u=t.sent,t.next=21,e.collection("reviews").where("bookEdition","==",r.id).where("user","==",a).get();case 21:return m=t.sent,t.t0=n.data().bookId,t.t1=r.data().rootBook,t.t2=r.data().title,t.t3=r.data().cover,t.t4=n.data().status,t.t5=n.data().rating,t.t6=l.docs.length,t.next=31,e.collection("userBooksInstances").get();case 31:return t.t7=t.sent.docs.length,t.t8=t.t6/t.t7,t.t9=100*t.t8,t.t10=100-t.t9,t.t11=i.reduce((function(e,t){return void 0===t.data().rating||0===t.data().rating?e:e+t.data().rating/i.length}),0),t.t12=o.data().authorId,t.t13=c.data().name,t.t14=u.docs.map((function(e){return null!==e.data().genre&&void 0!==e.data().genre?e.data().genre:e.data().name})),t.t15=m.docs.length>0?m.docs[0].data().text:void 0,t.abrupt("return",{id:t.t0,rootId:t.t1,title:t.t2,cover:t.t3,status:t.t4,rating:t.t5,popularityScore:t.t10,averageRating:t.t11,authorId:t.t12,authorName:t.t13,bookshelves:t.t14,review:t.t15});case 41:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=6,t.t0.all.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),null!==a&&void 0!==a){t.next=5;break}r.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=18;break;case 5:return t.next=7,e.collection("users").doc(n).get();case 7:return s=t.sent,t.t0=s.data().firstName,t.t1="anyone"===s.data().showLastNameTo||"friends"===s.data().showLastNameTo&&s.data().friends.includes(a)?s.data().lastName:void 0,t.t2="male"===s.data().pronouns?"his":"female"===s.data().pronouns?"her":"their",t.next=13,o(a);case 13:return t.t3=t.sent,t.next=16,o(n);case 16:return t.t4=t.sent,t.abrupt("return",{otherUserFirstName:t.t0,otherUserLastName:t.t1,otherUserPronouns:t.t2,loggedInUserBooks:t.t3,otherUserBooks:t.t4});case 18:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),We=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o,s,c,l,i,u){var m;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m=function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(a.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("rootBooks").doc(a).get();case 2:return n=t.sent,t.next=5,e.collection("authors").doc(n.data().authorId).get();case 5:return r=t.sent,t.next=8,e.collection("books").where("rootBook","==",a).where("mainEdition","==",!0).get();case 8:return o=t.sent,t.abrupt("return",{id:o.docs[0].id,title:o.docs[0].data().title,cover:o.docs[0].data().cover,authorId:n.data().authorId,authorName:r.data().name});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=3,m(a);case 3:return t.t0=t.sent,t.next=6,m(n);case 6:return t.t1=t.sent,t.next=9,m(r);case 9:return t.t2=t.sent,t.next=12,m(o);case 12:return t.t3=t.sent,t.next=15,m(s);case 15:return t.t4=t.sent,t.next=18,m(c);case 18:return t.t5=t.sent,t.next=21,m(l);case 21:return t.t6=t.sent,t.next=24,m(i);case 24:return t.t7=t.sent,t.next=27,m(u);case 27:return t.t8=t.sent,t.abrupt("return",{popularBooks:t.t0,classicsBooks:t.t1,popularFictionBooks:t.t2,thrillersBooks:t.t3,nonFictionBooks:t.t4,fantasyBooks:t.t5,romanceBooks:t.t6,scienceFictionBooks:t.t7,womensFictionBooks:t.t8});case 29:case"end":return t.stop()}}),t)})));return function(e,a,n,r,o,s,c,l,i){return t.apply(this,arguments)}}(),_e=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o,s,c,l,i,u,m,d,p){var f,b,v,E,k;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==m&&void 0!==m){t.next=4;break}p.push({pathname:"/goodreads-copy/user/sign_in",state:{error:"User not logged in"}}),t.next=79;break;case 4:return f=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map(function(){var t=Object(h.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(n.data().bookId).get();case 2:return r=t.sent,t.abrupt("return",a.includes(r.data().rootBook)?{rootId:r.data().rootBook,status:n.data().status,rating:n.data().rating}:null);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent.filter((function(e){return null!==e})));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),t.next=7,e.collection("users").doc(m).get();case 7:return b=t.sent,t.next=10,e.collection("users").doc(d).get();case 10:return v=t.sent,t.next=13,e.collection("userBooksInstances").where("userId","==",m).get();case 13:return E=t.sent.docs,t.next=16,e.collection("userBooksInstances").where("userId","==",d).get();case 16:return k=t.sent.docs,t.t0=b.data().profileImage,t.next=20,Promise.all(b.data().friends.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,e.collection("users").doc(a).get();case 3:return t.t1=t.sent.data().firstName,t.abrupt("return",{id:t.t0,name:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:return t.t1=t.sent,t.next=23,f(a,E);case 23:return t.t2=t.sent,t.next=26,f(n,E);case 26:return t.t3=t.sent,t.next=29,f(r,E);case 29:return t.t4=t.sent,t.next=32,f(o,E);case 32:return t.t5=t.sent,t.next=35,f(s,E);case 35:return t.t6=t.sent,t.next=38,f(c,E);case 38:return t.t7=t.sent,t.next=41,f(l,E);case 41:return t.t8=t.sent,t.next=44,f(i,E);case 44:return t.t9=t.sent,t.next=47,f(u,E);case 47:return t.t10=t.sent,t.t11={profilePicture:t.t0,friends:t.t1,popularBooks:t.t2,classicsBooks:t.t3,popularFictionBooks:t.t4,thrillersBooks:t.t5,nonFictionBooks:t.t6,fantasyBooks:t.t7,romanceBooks:t.t8,scienceFictionBooks:t.t9,womensFictionBooks:t.t10},t.t12=v.data().profileImage,t.next=52,f(a,k);case 52:return t.t13=t.sent,t.next=55,f(n,k);case 55:return t.t14=t.sent,t.next=58,f(r,k);case 58:return t.t15=t.sent,t.next=61,f(o,k);case 61:return t.t16=t.sent,t.next=64,f(s,k);case 64:return t.t17=t.sent,t.next=67,f(c,k);case 67:return t.t18=t.sent,t.next=70,f(l,k);case 70:return t.t19=t.sent,t.next=73,f(i,k);case 73:return t.t20=t.sent,t.next=76,f(u,k);case 76:return t.t21=t.sent,t.t22={profilePicture:t.t12,popularBooks:t.t13,classicsBooks:t.t14,popularFictionBooks:t.t15,thrillersBooks:t.t16,nonFictionBooks:t.t17,fantasyBooks:t.t18,romanceBooks:t.t19,scienceFictionBooks:t.t20,womensFictionBooks:t.t21},t.abrupt("return",{loggedInUser:t.t11,otherUser:t.t22});case 79:case"end":return t.stop()}}),t)})));return function(e,a,n,r,o,s,c,l,i,u,m,d){return t.apply(this,arguments)}}(),qe=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(n).get();case 2:return o=t.sent,t.next=5,e.collection("users").doc(n).set({newFriendsRequests:o.data().newFriendsRequests.concat({id:a,message:r})},{merge:!0});case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ze=function(){var a=Object(h.a)(g.a.mark((function a(n,r,o){var s;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.collection("users").doc(r).get();case 2:if(!(s=a.sent).data().newFriendsRequests.some((function(e){return e.id===n}))){a.next=7;break}o.push({pathname:t.generateUserPage(r,s.data().firstName),state:"You have already sent a friend request to this person."}),a.next=8;break;case 7:return a.abrupt("return",{firstName:s.data().firstName,pronouns:"male"===s.data().pronouns?"his":"female"===s.data().pronouns?"her":"their"});case 8:return a.abrupt("return",null);case 9:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}();return{pageGenerator:t,getAlsoEnjoyedBooksDetailsForBook:b,queryBookById:I,getEditionDetailsForBook:B,queryBooks:P,queryBooksForBookCreation:C,getFriendsInfo:A,queryBookRecommendedToFriendsStatus:U,queryStatusUpdatesForRootBook:R,queryStatusUpdatesForBook:M,signOut:D,resetPassword:F,passwordSignIn:G,facebookSignIn:L,twitterSignIn:T,googleSignIn:W,queryBookInstanceDetails:_,signUp:q,modifyUserInfo:Y,addBookToShelf:Q,removeBookFromShelf:V,rateBook:H,updateBookInShelf:J,changeBookPosition:K,addNewUserShelf:Z,addBookToUserShelf:X,removeBookFromUserShelf:$,likeUnlikeReview:ee,followUnfollowAuthor:te,recommendBook:ae,switchBookEditionForUser:ne,getBookPhotos:re,getPhotoDetails:oe,getSynopsisAndPreSynopsisForBook:se,createNewBook:ce,getBookInfoForTopShelvesPage:le,getBookInfoForGenreShelfPage:ie,getBookInfoForTriviaPage:ue,likeQuote:me,getBookInfoForQuotesPage:de,getBookInfoForListsPage:pe,addRemoveAuthorToFavorites:fe,getAuthorInfoForAuthorPage:he,changeFavoriteAuthors:be,fetchUserFavoriteAuthors:ve,getUserInfoForFavoriteAuthorsForUserPage:Ee,getNotificationsForUser:ke,saveUserSettings:we,deleteProfilePicture:ye,getUserSettings:Ne,checkIfPasswordsMatch:Oe,changePassword:xe,deleteAccount:je,getFavoriteGenresForUser:Ie,updateFavoriteGenresForUser:Se,getGenreInfo:Be,getNews:Pe,likeUnlikeArticle:Ce,getInfoForArticle:Ae,getArticleTitle:Ue,getUsersWhoLikedArticle:Re,getUserInfoForUserPage:Me,followUser:De,unfollowUser:Fe,unfriendUser:Ge,deleteUpdate:Le,getInfoForCompareBooksPage:Te,getBooksInfoForBookCompatibilityTestPage:We,getUsersInfoForCompatibilityTestPage:_e,sendFriendRequest:qe,getUserInfoForAddAsFriendPage:ze,addNewBookshelf:function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("shelves").where("user","==",a).where("name","==",n).get();case 2:if(0!==t.sent.docs.length){t.next=6;break}return t.next=6,e.collection("shelves").add({user:a,name:n,rootBooks:[]});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),queryUserInfoForUserBookshelfPage:function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c,l,i,u,m;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return r=t.sent,t.next=5,e.collection("shelves").where("user","==",a).get();case 5:return o=t.sent,t.next=8,e.collection("userBooksInstances").where("userId","==",a).get();case 8:return s=t.sent,t.next=11,Promise.all(s.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return t.abrupt("return",t.sent.data().rootBook);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:return c=t.sent,t.next=14,Promise.all(s.docs.filter((function(e){return"to-read"===e.data().status})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return t.abrupt("return",t.sent.data().rootBook);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 14:return l=t.sent,t.next=17,Promise.all(s.docs.filter((function(e){return"reading"===e.data().status})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return t.abrupt("return",t.sent.data().rootBook);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:return i=t.sent,t.next=20,Promise.all(s.docs.filter((function(e){return"read"===e.data().status})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return t.abrupt("return",t.sent.data().rootBook);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:return u=t.sent,m=function(){var t=Object(h.a)(g.a.mark((function t(r){var o,s,c,l,i,u,m,d,p,f,h,b;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("rootBooks").doc(r).get();case 2:if(void 0===(o=t.sent).data().series){t.next=9;break}return t.next=6,e.collection("series").doc(o.data().series).get();case 6:t.t0=t.sent.data().name,t.next=10;break;case 9:t.t0=void 0;case 10:if(s=t.t0,null===o||void 0===o){t.next=17;break}return t.next=14,e.collection("authors").doc(o.data().authorId).get();case 14:t.t1=t.sent,t.next=18;break;case 17:t.t1=void 0;case 18:return c=t.t1,t.next=21,e.collection("books").where("rootBook","==",r).get();case 21:return l=t.sent.docs.map((function(e){return e.id})),t.next=24,e.collection("userBooksInstances").where("bookId","in",l).where("userId","==",a).get();case 24:return i=t.sent,t.next=27,e.collection("books").doc(i.docs[0].data().bookId).get();case 27:return u=t.sent,t.next=30,e.collection("userBooksInstances").where("bookId","in",l).get();case 30:return m=t.sent.docs.filter((function(e){return void 0!==e.data().rating&&0!==e.data().rating})),d=m.reduce((function(e,t){return e+t.data().rating/m.length}),0),t.next=34,e.collection("userBooksUpdates").where("user","==",a).where("book","in",l).get();case 34:return p=t.sent,f=0===p.docs.filter((function(e){return"add-book"===e.data().action&&"read"===e.data().shelf})).length?void 0:p.docs.filter((function(e){return"add-book"===e.data().action&&"read"===e.data().shelf}))[0].data().date.toDate(),t.next=38,e.collection("reviews").where("bookEdition","in",l).where("user","==",a).get();case 38:if(h=t.sent,void 0===n||null===n){t.next=45;break}return t.next=42,e.collection("userBooksInstances").where("bookId","in",l).where("userId","==",n).get();case 42:t.t2=t.sent,t.next=46;break;case 45:t.t2=void 0;case 46:return b=t.t2,t.t3=i.docs[0].data().bookId,t.t4=r,t.t5=u.data().cover,t.t6=u.data().title,t.t7=s,t.t8=o.data().seriesInstance,t.t9=o.data().authorId,t.t10=c.data().name,t.t11=d,t.t12=0===p.docs.length?void 0:p.docs.sort((function(e,t){return e.data().date.toDate()-t.data().date.toDate()}))[0].data().date.toDate(),t.next=59,e.collection("books").where("rootBook","==",r).get();case 59:return t.t13=t.sent.docs.sort((function(e,t){return e.data().publishedDate.toDate()-t.data().publishedDate.toDate()}))[0].data().publishedDate.toDate(),t.t14=u.data().publishedDate.toDate(),t.t15=f,t.t16=0===p.docs.filter((function(e){return"add-book"===e.data().action&&"reading"===e.data().shelf})).length?f:p.docs.filter((function(e){return"add-book"===e.data().action&&"reading"===e.data().shelf}))[0].data().date.toDate(),t.t17=u.data().format,t.t18=u.data().ISBN,t.t19=u.data().pageCount,t.t20=m.length,t.t21=i.docs[0].data().position,t.t22=i.docs[0].data().rating,t.t23=h.docs.length>0?h.docs[0].data().text:void 0,t.t24=void 0===b||0===b.docs.length?void 0:b.docs[0].data().rating,t.abrupt("return",{id:t.t3,rootId:t.t4,cover:t.t5,title:t.t6,seriesName:t.t7,seriesInstance:t.t8,authorId:t.t9,authorName:t.t10,averageRating:t.t11,dateAdded:t.t12,datePublished:t.t13,datePublishedEdtion:t.t14,dateRead:t.t15,dateStarted:t.t16,format:t.t17,isbn:t.t18,numberOfPages:t.t19,numberOfRatings:t.t20,position:t.t21,rating:t.t22,review:t.t23,loggedInUserRating:t.t24});case 72:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.t0=r.data().profileImage,t.next=25,Promise.all(o.docs.map((function(e){return e.data()})).concat([{name:"all",rootBooks:c},{name:"read",rootBooks:u},{name:"want-to-read",rootBooks:l},{name:"currently-reading",rootBooks:i}]).map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=null!==t.genre&&void 0!==t.genre?t.genre:t.name,e.next=3,Promise.all(t.rootBooks.map(m));case 3:return e.t1=e.sent,e.abrupt("return",{name:e.t0,books:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 25:return t.t1=t.sent,t.abrupt("return",{profilePicture:t.t0,shelves:t.t1});case 27:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),queryLoggedInUserInfoForUserBookshelfPage:function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a&&null!==a){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,e.collection("shelves").where("user","==",a).get();case 4:return n=t.sent,t.next=7,e.collection("userBooksInstances").where("userId","==",a).get();case 7:return r=t.sent,t.next=10,Promise.all(r.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return t.abrupt("return",t.sent.data().rootBook);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 10:return o=t.sent,t.next=13,Promise.all(r.docs.filter((function(e){return"to-read"===e.data().status})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return t.abrupt("return",t.sent.data().rootBook);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 13:return s=t.sent,t.next=16,Promise.all(r.docs.filter((function(e){return"reading"===e.data().status})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return t.abrupt("return",t.sent.data().rootBook);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 16:return c=t.sent,t.next=19,Promise.all(r.docs.filter((function(e){return"read"===e.data().status})).map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a.data().bookId).get();case 2:return t.abrupt("return",t.sent.data().rootBook);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 19:return l=t.sent,i=function(){var t=Object(h.a)(g.a.mark((function t(n){var r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").where("rootBook","==",n).get();case 2:return r=t.sent.docs.map((function(e){return e.id})),t.next=5,e.collection("userBooksInstances").where("bookId","in",r).where("userId","==",a).get();case 5:return o=t.sent,t.abrupt("return",{id:o.docs[0].data().bookId,rootId:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=23,Promise.all(n.docs.map((function(e){return e.data()})).concat([{name:"all",rootBooks:o},{name:"read",rootBooks:l},{name:"want-to-read",rootBooks:s},{name:"currently-reading",rootBooks:c}]).map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=null!==t.genre&&void 0!==t.genre?t.genre:t.name,e.next=3,Promise.all(t.rootBooks.map(i));case 3:return e.t1=e.sent,e.abrupt("return",{name:e.t0,books:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getUserInfoForYearInBooksPage:function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").where("userId","==",a).where("status","==","read").get();case 2:return r=t.sent.docs,t.next=5,e.collection("userBooksUpdates").where("user","==",a).where("action","==","add-book").where("shelf","==","read").get();case 5:return o=t.sent.docs.filter((function(e){return e.data().date>E.a.firestore.Timestamp.fromDate(Object(w.a)(new Date(n,0)))&&e.data().date<E.a.firestore.Timestamp.fromDate(Object(y.a)(new Date(n,0)))})),s=r.filter((function(e){return o.map((function(e){return e.data().book})).includes(e.data().bookId)})),t.abrupt("return",Promise.all(s.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l,i,u,m,d,p,f;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.data().bookId,t.next=3,e.collection("books").doc(n).get();case 3:return r=t.sent,o=r.data().pageCount,s=r.data().cover,c=r.data().title,t.next=9,e.collection("userBooksInstances").where("bookId","==",n).get();case 9:return l=t.sent,i=l.docs.length,t.next=13,e.collection("userBooksInstances").where("bookId","==",n).where("rating",">",0).get();case 13:return u=t.sent,m=u.docs.length,d=u.docs.map((function(e){return e.data().rating})),p=0===u.docs.lengh?0:d.reduce((function(e,t){return e+t/m}),0),f=a.data().rating,t.abrupt("return",{bookId:n,title:c,pageCount:o,cover:s,numberShelved:i,numberOfRatings:m,averageRating:p,userRating:f});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),getUserProfilePicture:function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return t.abrupt("return",t.sent.data().profileImage);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getRecommendationsToFromUser:function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("recommendations").where(n?"receiver":"sender","==",a).get();case 2:return r=t.sent.docs,t.next=5,Promise.all(r.map(function(){var t=Object(h.a)(g.a.mark((function t(r){var o,s,c,l,i,u,m,d,p,f;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.id,s=r.data().message,c=r.data().bookId,t.next=5,e.collection("books").doc(c).get();case 5:return l=t.sent,t.next=8,e.collection("rootBooks").doc(l.data().rootBook).get();case 8:return i=t.sent,t.next=11,e.collection("authors").doc(i.data().authorId).get();case 11:return u=t.sent,t.next=14,e.collection("userBooksInstances").where("bookId","==",c).where("userId","==",a).get();case 14:return m=t.sent.docs,d={bookId:c,title:l.data().title,cover:l.data().cover,authorId:u.id,authorName:u.data().name,userStatus:m.length>0?m[0].data().status:void 0,userRating:m.length>0?m[0].data().rating:void 0,userProgress:m.length>0?m[0].data().progress:void 0,toReadBookPosition:m.length>0?m[0].data().position:void 0,pageCount:l.data().pageCount},p=n?r.data().sender:r.data().receiver,t.t0=p,t.next=20,e.collection("users").doc(p).get();case 20:return t.t1=t.sent.data().firstName,f={userId:t.t0,firstName:t.t1},t.abrupt("return",{id:o,message:s,book:d,otherUser:f});case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),deleteRecommendation:function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("recommendations").doc(a).delete();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getInfoForFollowPage:function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("followers"!==r){t.next=6;break}return t.next=3,e.collection("users").doc(a).get();case 3:t.t0=t.sent.data().followers,t.next=16;break;case 6:if("friends"!==r){t.next=12;break}return t.next=9,e.collection("users").doc(a).get();case 9:t.t1=t.sent.data().friends,t.next=15;break;case 12:return t.next=14,e.collection("users").where("followers","array-contains",a).get();case 14:t.t1=t.sent.docs.map((function(e){return e.id}));case 15:t.t0=t.t1;case 16:return o=t.t0,t.next=19,Promise.all(o.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var r,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(a).get();case 2:return r=t.sent,t.next=5,e.collection("userBooksInstances").where("userId","==",a).get();case 5:if(o=t.sent,s=o.docs.filter((function(e){return"reading"===e.data().status})),t.t0=a,t.t1=void 0===r.data().lastName?r.data().firstName:r.data().firstName+" "+r.data().lastName,t.t2=o.docs.length,t.t3=void 0===r.data().friends?0:r.data().friends.length,t.t4=void 0===r.data().country?"":r.data().country,t.t5=r.data().profileImage,0!==s.length){t.next=17;break}t.t6=void 0,t.next=25;break;case 17:return t.t7=s[0].data().bookId,t.next=20,e.collection("books").doc(s[0].data().bookId).get();case 20:return t.t8=t.sent.data().title,t.next=23,e.collection("books").doc(s[0].data().bookId).get();case 23:t.t9=t.sent.data().cover,t.t6={id:t.t7,title:t.t8,cover:t.t9};case 25:return t.t10=t.t6,t.t11=r.data().friends.includes(n),t.abrupt("return",{id:t.t0,name:t.t1,numberOfBooks:t.t2,numberOfFriends:t.t3,location:t.t4,profilePicture:t.t5,currentlyReadingBook:t.t10,isFriend:t.t11});case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),getInfoForExplorePage:function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,l,i,u,d;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:return n=t.sent,t.next=5,e.collection("rootBooks").doc(n.data().rootBook).get();case 5:return r=t.sent,t.next=8,e.collection("authors").doc(r.data().authorId).get();case 8:return o=t.sent,t.next=11,e.collection("userBooksInstances").where("bookId","==",a).where("rating",">",0).get();case 11:return s=t.sent.docs,t.abrupt("return",{title:n.data().title,id:a,cover:n.data().cover,authorName:o.data().name,rating:0===s.length?0:s.reduce((function(e,t){return e+t/s.length}),0),numberOfRatings:s.length});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(h.a)(g.a.mark((function t(a){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("books").doc(a).get();case 2:if(void 0!==(r=t.sent.data().similarBooks)){t.next=5;break}return t.abrupt("return",[]);case 5:return t.next=7,Promise.all(r.map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=4,e.collection("articles").orderBy("datePublished","desc").limit(15).get();case 4:return o=t.sent.docs,t.next=7,e.collection("userBooksInstances").where("userId","==",a).where("rating",">=",3).get();case 7:return s=t.sent.docs,c=0===s.length?void 0:s[Math.round(Math.random()*(s.length-1))].data().bookId,t.next=11,e.collection("userBooksInstances").where("userId","==",a).where("status","==","reading").get();case 11:return l=t.sent.docs,i=0===l.length?void 0:l[Math.round(Math.random()*(l.length-1))].data().bookId,t.next=15,e.collection("userBooksUpdates").orderBy("date","desc").limit(1e3).get();case 15:if(u=t.sent.docs,d=u.reduce((function(e,t){return 0===e.map((function(e){return e.id===t.data().book})).length?e.concat({id:t.data().book,count:0}):e.map((function(e){return e.id===t.data().book?Object(m.a)(Object(m.a)({},e),{},{count:e.count+1}):e}))}),[]).sort((function(e,t){return e.count>t.count?-1:1})).slice(0,25).map((function(e){return e.id})),t.t0=o.map((function(e){return{id:e.id,datePublished:e.data().datePublished,numberOfLikes:void 0!==e.data().usersWhoLiked?e.data().usersWhoLiked.length:0,numberOfComments:void 0!==e.data().comments?e.data().comments.length:0,title:e.data().title,image:e.data().image}})),void 0!==c){t.next=22;break}t.t1=void 0,t.next=30;break;case 22:return t.t2=c,t.next=25,e.collection("books").doc(c).get();case 25:return t.t3=t.sent.data().title,t.next=28,r(c);case 28:t.t4=t.sent,t.t1={id:t.t2,title:t.t3,similarBooks:t.t4};case 30:if(t.t5=t.t1,void 0!==i){t.next=35;break}t.t6=void 0,t.next=43;break;case 35:return t.t7=i,t.next=38,e.collection("books").doc(i).get();case 38:return t.t8=t.sent.data().title,t.next=41,r(i);case 41:t.t9=t.sent,t.t6={id:t.t7,title:t.t8,similarBooks:t.t9};case 43:return t.t10=t.t6,t.next=46,Promise.all(d.map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.t11=t.sent,t.abrupt("return",{articles:t.t0,enjoyedBook:t.t5,readingBook:t.t10,trendingBooks:t.t11});case 48:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getInfoForSearchPage:function(){var t=Object(h.a)(g.a.mark((function t(a,n,r,o){var s,c,l,i,u,m;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.toLowerCase(),"genre"!==o){t.next=8;break}return t.next=4,e.collection("genres").get();case 4:return c=t.sent.docs,t.abrupt("return",c.filter((function(e){return e.data().name.toLowerCase().includes(s)})).map((function(e){return{name:e.data().name,parentGenre:e.data().parentGenre}})));case 8:if("books"!==r){t.next=22;break}return t.t0=Promise,t.next=12,e.collection("books").get();case 12:return t.t1=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("rootBooks").doc(a.data().rootBook).get();case 2:return n=t.sent,t.next=5,e.collection("authors").doc(n.data().authorId).get();case 5:return r=t.sent,t.abrupt("return",{id:a.id,rootBookId:n.id,amazonLink:a.data().amazonLink,title:a.data().title,cover:a.data().cover,authorId:r.id,authorName:r.data().name,authorIsMember:r.data().GRMember,publishedYear:a.data().publishedDate.toDate().getFullYear(),pageCount:a.data().pageCount});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=15,t.t0.all.call(t.t0,t.t1);case 15:return l=t.sent,i=l.filter((function(e){return"all"===o?e.title.toLowerCase().includes(s)||e.authorName.toLowerCase().includes(s):"author"===o?e.authorName.toLowerCase().includes(s):e.title.toLowerCase().includes(s)})),t.next=19,Promise.all(i.map(function(){var t=Object(h.a)(g.a.mark((function t(n){var r,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("userBooksInstances").where("bookId","==",n.id).where("rating",">",0).get();case 2:if(r=t.sent.docs,void 0===a){t.next=9;break}return t.next=6,e.collection("userBooksInstances").where("bookId","==",n.id).where("userId","==",a).get();case 6:t.t0=t.sent.docs,t.next=10;break;case 9:t.t0=void 0;case 10:return o=t.t0,t.next=13,e.collection("books").where("rootBook","==",n.rootBookId).get();case 13:return s=t.sent.docs,t.t1=n.id,t.t2=n.amazonLink,t.t3=n.title,t.t4=n.cover,t.t5=n.authorId,t.t6=n.authorName,t.t7=n.authorIsMember,t.t8=r.length>0?r.reduce((function(e,t){return e+t.data().rating/r.docs.length}),0):0,t.t9=void 0===r?0:r.length,t.t10=n.publishedYear,t.t11=s.length,t.t12=void 0===o||0===o.length?void 0:o[0].data().status,t.t13=void 0===o||0===o.length?void 0:o[0].data().rating,t.t14=void 0===o||0===o.length?void 0:o[0].data().progress,t.t15=void 0===o||0===o.length?void 0:o[0].data().position,t.t16=n.pageCount,t.t17=Promise,t.next=33,e.collection("shelves").where("genre","!=",null).where("rootBooks","array-contains",n.rootBookId).get();case 33:return t.t18=t.sent.docs.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.data().genre,t.next=3,e.collection("genres").doc(a.data().genre).get();case 3:return t.t1=t.sent.data().parentGenre,t.abrupt("return",{name:t.t0,parentGenre:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=36,t.t17.all.call(t.t17,t.t18);case 36:return t.t19=t.sent,t.abrupt("return",{id:t.t1,amazonLink:t.t2,title:t.t3,cover:t.t4,authorId:t.t5,authorName:t.t6,authorIsMember:t.t7,averageRating:t.t8,numberOfRatings:t.t9,publishedYear:t.t10,numberOfEditions:t.t11,userStatus:t.t12,userRating:t.t13,userProgress:t.t14,toReadBookPosition:t.t15,pageCount:t.t16,genreShelves:t.t19});case 38:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 19:return t.abrupt("return",t.sent);case 22:return t.next=24,e.collection("users").get();case 24:return u=t.sent.docs,m=u.filter((function(e){return(e.data().firstName+(void 0!==e.data().lastName?" "+e.data().lastName:"")).toLowerCase().includes(s)})),t.next=28,Promise.all(m.map(function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.id,t.t1=void 0!==a.data().lastName?a.data().firstName+" "+a.data().lastName:a.data().firstName,t.t2=a.data().profileImage,t.t3=void 0===a.data().country?"":a.data().country,t.t4=a.data().friends.length,t.next=7,e.collection("userBooksInstances").where("userId","==",a.id).get();case 7:return t.t5=t.sent.docs.length,t.abrupt("return",{id:t.t0,name:t.t1,profilePicture:t.t2,location:t.t3,numberOfFriends:t.t4,numberOfBooks:t.t5});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 28:return t.abrupt("return",t.sent);case 29:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}()}}(),O=N,x=(a(69),function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(""),l=Object(b.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(c.f)();return r.a.createElement("div",{id:"home-page-top-bar"},r.a.createElement("div",{id:"home-page-top-bar-left"},r.a.createElement("a",{id:"goodreads-home-link",href:O.pageGenerator.generateHomePage()},r.a.createElement("img",{src:"https://www.goodreads.com/assets/home/header_logo-8d96d7078a3d63f9f31d92282fd67cf4.png",alt:"Goodreads logo"}))),r.a.createElement("div",{id:"home-page-top-bar-right"},r.a.createElement("form",{id:"signin-form"},r.a.createElement("div",{id:"form-email"},r.a.createElement("input",{type:"email",value:a,onChange:function(e){return o(e.target.value)},placeholder:"Email address"}),r.a.createElement("div",null,r.a.createElement("input",{id:"remember-me",type:"checkbox",value:p,onChange:function(){return f(!p)}}),r.a.createElement("label",{htmlFor:"remember-me"},"Remember me"))),r.a.createElement("div",{id:"form-password"},r.a.createElement("input",{type:"password",value:i,onChange:function(e){return u(e.target.value)},placeholder:"Password"}),r.a.createElement("a",{id:"forgot-password-a",href:O.pageGenerator.generateChangePasswordPage()},"Forgot it?")),r.a.createElement("button",{id:"sign-in-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.length>0&&i.length>0)){e.next=6;break}return e.next=4,O.passwordSignIn(a,i,p,v);case 4:e.next=7;break;case 6:v.push({pathname:"/user/sign_in"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Sign In"))))}),j=(a(71),function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(""),l=Object(b.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)(""),d=Object(b.a)(m,2),p=d[0],f=d[1],g=Object(c.f)();return r.a.createElement("div",{id:"homepage-top-section"},r.a.createElement(x,null),r.a.createElement("div",{id:"new-user-presentation"},r.a.createElement("div",{id:"headline"},r.a.createElement("img",{src:"https://www.goodreads.com/assets/home/headline-e2cd420e71737ff2815d09af5b65c4e4.png",alt:"Meet your next favorite book."})),r.a.createElement("div",{id:"new-account-section"},r.a.createElement("div",{id:"create-new-account"},r.a.createElement("span",null,"New here? Create a free account!"),r.a.createElement("input",{placeholder:"Name",type:"text",value:a,onChange:function(e){return o(e.target.value)}}),r.a.createElement("input",{placeholder:"Email address",type:"email",value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{placeholder:"Password",type:"password",value:p,onChange:function(e){return f(e.target.value)}}),r.a.createElement("div",{id:"sign-up-confirmation"},r.a.createElement("button",{id:"sign-up-button",onClick:function(){return O.signUp(i,p,a,g)}},"Sign up"),r.a.createElement("span",null,"By clicking \u201cSign up\u201d I confirm that I am at least 13 years old."))),r.a.createElement("div",{id:"sign-in-sms"},r.a.createElement("span",null,"or sign in using"),r.a.createElement("button",{id:"facebook-button",onClick:O.facebookSignIn},r.a.createElement("span",null)),r.a.createElement("button",{id:"twitter-button",onClick:O.twitterSignIn},r.a.createElement("span",null)),r.a.createElement("button",{id:"google-button",onClick:O.googleSignIn},r.a.createElement("span",null))))))}),I=(a(72),function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),o=a[0],s=a[1];return r.a.createElement("div",{id:"homepage-bottom-section"},r.a.createElement("div",{id:"homepage-bottom-section-main"},r.a.createElement("div",{className:"intro"},r.a.createElement("div",{className:"left-section"},r.a.createElement("h2",null,"Deciding what to read next?"),r.a.createElement("span",null,"You\u2019re in the right place. Tell us what titles or genres you\u2019ve enjoyed in the past, and we\u2019ll give you surprisingly insightful recommendations.")),r.a.createElement("div",{className:"right-section"},r.a.createElement("h2",null,"What are your friends reading?"),r.a.createElement("span",null,"Chances are your friends are discussing their favorite (and least favorite) books on Goodreads."))),r.a.createElement("div",{className:"discovery-box"},r.a.createElement("h2",null,"What will ",r.a.createElement("i",null,"you")," discover?"),r.a.createElement("div",{className:"discovery"},r.a.createElement("div",{className:"discovery-left-section"},r.a.createElement("span",null,"Because ",e.recExample1.userName," liked..."),r.a.createElement("div",{className:"book-recs"},e.recExample1.bookList.map((function(t,a){return r.a.createElement("a",{href:e.recExample1.bookLinkList[a],key:a},r.a.createElement("img",{src:e.recExample1.bookCoverList[a],alt:t}))})))),r.a.createElement("img",{className:"rec-arrow",src:"https://www.goodreads.com/assets/home/discovery_arrow.png",alt:"Arrow"}),r.a.createElement("div",{className:"discovery-right-section"},r.a.createElement("span",null,"m"===e.recExample1.gender?"He":"f"===e.recExample1.gender?"She":"They"," ","discovered:"),r.a.createElement("div",{className:"book-rec-and-source"},r.a.createElement("a",{href:e.recExample1.recBookLink},r.a.createElement("img",{src:e.recExample1.recBookCover,alt:e.recExample1.recBook}))))),r.a.createElement("div",{className:"discovery"},r.a.createElement("div",{className:"discovery-left-section"},r.a.createElement("span",null,"Because ",e.recExample2.userName," liked..."),r.a.createElement("div",{className:"book-recs"},e.recExample2.bookList.map((function(t,a){return r.a.createElement("a",{href:e.recExample2.bookLinkList[a],key:a},r.a.createElement("img",{src:e.recExample2.bookCoverList[a],alt:t}))})))),r.a.createElement("img",{className:"rec-arrow",src:"https://www.goodreads.com/assets/home/discovery_arrow.png",alt:"Arrow"}),r.a.createElement("div",{className:"discovery-right-section"},r.a.createElement("span",null,"m"===e.recExample2.gender?"He":"f"===e.recExample2.gender?"She":"They"," ","discovered:"),r.a.createElement("div",{className:"book-rec-and-source"},r.a.createElement("a",{href:e.recExample2.recBookLink},r.a.createElement("img",{src:e.recExample2.recBookCover,alt:e.recExample2.recBook})))))),r.a.createElement("div",{className:"homepage-search-section"},r.a.createElement("h2",null,"Search and browse books"),r.a.createElement("input",{type:"text",placeholder:"Title / Author / ISBN",value:o,onChange:function(e){s(e.target.value)}}),r.a.createElement("a",{href:O.pageGenerator.generateSignInPage(),id:"search-a"},r.a.createElement("img",{id:"magnifying-glass-img",src:"https://www.goodreads.com/assets/layout/magnifying_glass-a2d7514d50bcee1a0061f1ece7821750.png",alt:"Magnifying glass"})),r.a.createElement("div",{id:"genre-list"},["Art","Biography","Business","Children's","Christian","Classics","Comics","Cookbooks","Ebooks","Fantasy","Fiction","Graphic Novels","Historical Fiction","History","Horror","Memoir","Music","Mystery","Nonfiction","Poetry","Psychology","Romance","Science","Science Fiction","Self Help","Sports","Thriller","Travel","Young Adult"].map((function(e){return r.a.createElement("a",{href:O.pageGenerator.generateSignInPage(),key:e},e)}))))),r.a.createElement("div",{id:"homepage-bottom-section-right"}))}),S=(a(73),function(){return r.a.createElement("div",{id:"homepage-footbar"},r.a.createElement("div",{className:"left-section"},r.a.createElement("span",{id:"connect-span"},"CONNECT"),r.a.createElement("div",{className:"social-media-links"},r.a.createElement("a",{className:"facebook-a",href:"https://www.facebook.com/Goodreads/"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/site_footer/footer_facebook-ea4ab848f8e86c5f5c98311bc9495a1b.svg",alt:"Facebook logo"})),r.a.createElement("a",{className:"twitter-a",href:"https://twitter.com/goodreads"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/site_footer/footer_twitter-126b3ee80481a763f7fccb06ca03053c.svg",alt:"Twitter logo"})),r.a.createElement("a",{className:"instagram-a",href:"https://www.instagram.com/goodreads/"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/site_footer/footer_instagram-d59e3887020f12bcdb12e6c539579d85.svg",alt:"Instagram logo"})),r.a.createElement("a",{className:"linkedin-a",href:"https://www.linkedin.com/company/goodreads-com/"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/site_footer/footer_linkedin-5b820f4703eff965672594ef4d10e33c.svg",alt:"Linkedin logo"})))),r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"right-section-links"},r.a.createElement("a",{className:"iOS-a",href:"https://itunes.apple.com/app/apple-store/id355833469?pt=325668&ct=mw_footer&mt=8"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/app/badge-ios-desktop-homepage-6ac7ae16eabce57f6c855361656a7540.svg",alt:"Download on the App Store"})),r.a.createElement("a",{className:"Android-a",href:"https://play.google.com/store/apps/details?id=com.goodreads&utm_source=mw_footer&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/app/badge-android-desktop-home-2x-e31514e1fb4dddecf9293aa526a64cfe.png",alt:"Get it on Google Play"}))),r.a.createElement("span",null,"Goodreads")))}),B=(a(74),function(){return r.a.createElement("div",{id:"homepage"},r.a.createElement(j,null),r.a.createElement(I,{recExample1:{userName:"Shomeret",gender:"f",bookList:["Animals in Translation","Animals Make Us Human","Some We Love, Some We Hate, Some We Eat"],bookLinkList:["/book/show/7366.Animals_in_Translation","/book/show/4386485-animals-make-us-human","/book/show/6953508-some-we-love-some-we-hate-some-we-eat"],bookCoverList:["https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1442375726l/7366._SX98_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1348264535l/4386485._SX98_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1369453733l/6953508._SX98_.jpg"],recBook:"Next of Kin",recBookLink:"/book/show/325779.Next_of_Kin",recBookCover:"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1348810069l/325779._SX98_.jpg",source:"Psychology, Animals, Science, Nature"},recExample2:{userName:"\u2665Meagan\u2665",gender:"f",bookList:["Memoirs of a Geisha","The Guernsey Literary and Potato Peel Pie Society","Water for Elephants","The Help"],bookLinkList:["/book/show/929.Memoirs_of_a_Geisha","/book/show/39832183-the-guernsey-literary-and-potato-peel-pie-society","/book/show/43641.Water_for_Elephants","/book/show/4667024-the-help"],bookCoverList:["https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1409595968l/929._SX98_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1529026760l/39832183._SX98_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1494428973l/43641._SX98_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1572940430l/4667024._SX98_.jpg"],recBook:"Moloka'i",recBookLink:"/book/show/3273.Moloka_i",recBookCover:"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1441920261l/3273._SX98_.jpg",source:"Historical Fiction, Book Club"},popularLists:[{title:"Best Crime & Mystery Books",link:"/list/show/11.Best_Crime_Mystery_Books",bookQuantity:6010,voterQuantity:14187,topBookNames:["The Girl with the Dragon Tattoo","And Then There Were None","Angels & Demons","Rebecca"],topBookCovers:["https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1327868566l/2429135._SX50_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1391120695l/16299._SY75_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1558711679l/960._SY75_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1386605169l/17899948._SX50_.jpg"],topBookLinks:["/book/show/2429135.The_Girl_with_the_Dragon_Tattoo","/book/show/16299.And_Then_There_Were_None","/book/show/960.Angels_Demons","/book/show/17899948-rebecca"]},{title:"Best for Book Clubs",link:"/list/show/19.Best_for_Book_Clubs",bookQuantity:6922,voterQuantity:12713,topBookNames:["The Help","The Kite Runner","Water for Elephants","The Book Thief"],topBookCovers:["https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1572940430l/4667024._SY75_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1579036753l/77203._SY75_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1494428973l/43641._SY75_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1522157426l/19063._SY75_.jpg"],topBookLinks:["/book/show/4667024-the-help","/book/show/77203.The_Kite_Runner","/book/show/43641.Water_for_Elephants","/book/show/19063.The_Book_Thief"]},{title:"Best Books of the 20th Century",link:"/list/show/6.Best_Books_of_the_20th_Century",bookQuantity:7550,voterQuantity:49369,topBookNames:["To Kill a Mockingbird","1984","Harry Potter and the Sorcerer's Stone","The Great Gatsby"],topBookCovers:["https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1553383690l/2657._SY75_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1532714506l/40961427._SX50_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1474154022l/3._SY75_.jpg","https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1490528560l/4671._SY75_.jpg"],topBookLinks:["/book/show/2657.To_Kill_a_Mockingbird","/book/show/40961427-1984","book/show/3.Harry_Potter_and_the_Sorcerer_s_Stone","/book/show/4671.The_Great_Gatsby"]}]}),r.a.createElement(S,null))}),P=a(161),C=(a(75),function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(null),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(b.a)(m,2),p=d[0],f=d[1];Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==o&&f(!0),!(o.length>0)){e.next=7;break}return e.next=4,O.queryBooks(o);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:return t=e.t0,e.abrupt("return",r.a.createElement("div",{id:"search-books-results"},r.a.createElement("div",{id:"search-books-results-top-section"},t.map((function(e,t){return t>4?null:r.a.createElement("a",{className:"search-result-book-card",href:O.pageGenerator.generateBookPage(e.id,e.title),key:t},r.a.createElement("div",{className:"search-results-book-card-cover-section"},r.a.createElement("img",{src:e.cover,alt:"cover art"})),r.a.createElement("div",{className:"search-results-book-card-title-section"},r.a.createElement("span",{className:"results-card-book-title"},r.a.createElement("strong",null,void 0===e.series?e.title:"".concat(e.title," (").concat(e.series.name,", #").concat(e.seriesInstance,")"))),r.a.createElement("div",{className:"search-results-book-card-author"},r.a.createElement("span",null,"by ".concat(e.authorNames[0])),e.authorIsMember?r.a.createElement("span",{className:"results-author-badge"}):null)))}))),r.a.createElement("div",{id:"search-books-results-bottom-section"},r.a.createElement("a",{className:"see-more-results",href:O.pageGenerator.generateSearchPage(o,"books","all")},'See all results for "'.concat(o,'"')))));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var t=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:a=t.sent,f(!1),u(""!==o?a:null);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[u,e,o]);var v=p?r.a.createElement("div",{id:"loadingSpinner"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)):r.a.createElement("a",{id:"search-magnifiying-glass",href:O.pageGenerator.generateSearchPage(o,"books","all")},r.a.createElement("span",null));return r.a.createElement("div",{id:"top-bar-search-bar-container"},r.a.createElement("div",{id:"top-bar-search-bar"},r.a.createElement("input",{type:"text",id:"search-books-input",placeholder:"Search books",value:o,onChange:function(e){s(e.target.value)}}),v),i)}),A=(a(76),function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(!1),l=Object(b.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(null),E=Object(b.a)(v,2),k=E[0],w=E[1],y=Object(n.useState)(0),N=Object(b.a)(y,2),x=N[0],j=N[1],I=Object(n.useState)(0),S=Object(b.a)(I,2),B=S[0],A=S[1],U=Object(n.useRef)(null),R=Object(n.useRef)(null),M=Object(n.useRef)(null),D=Object(c.f)(),F=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===F||0,A(0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();document.addEventListener("click",(function(e){null===U||null===U.current||void 0===U.current||U.current.contains(e.target)||o(!1),null===R||null===R.current||void 0===R.current||R.current.contains(e.target)||u(!1),null===M||null===M.current||void 0===M.current||M.current.contains(e.target)||f(!1)})),e(),t()}));var G=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w([]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=r.a.createElement("div",{id:"loadingSpinner"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),T=null===F||void 0===F.userUID||null===F.userUID?r.a.createElement("div",{id:"top-bar-right-section"},r.a.createElement("div",{id:"top-bar-sign-in-link-container"},r.a.createElement("a",{id:"top-bar-sign-in-link",href:O.pageGenerator.generateSignInPage()},"Sign In")),r.a.createElement("div",{id:"top-bar-join-link-container"},r.a.createElement("a",{id:"top-bar-join-link",href:O.pageGenerator.generateSignUpPage()},"Join"))):r.a.createElement("div",{id:"top-bar-right-section"},r.a.createElement("div",{id:"notifications-button-container",ref:M},r.a.createElement("button",{id:"notifications-button",onClick:function(){x>0&&j(0),f(!p),G()},className:p?"clicked":""},x>0?r.a.createElement("span",null,x):null),r.a.createElement("div",{id:"notifications-drop-down",className:p?"visible":"hidden"},null!==k&&k.length>0?r.a.createElement("div",{id:"notifications-drop-down-top-section"},r.a.createElement("a",{id:"notifications-a",href:O.pageGenerator.generateHomePage()},"NOTIFICATIONS"),r.a.createElement("a",{id:"view-all-notifications-a",href:O.pageGenerator.generateHomePage()},"View all notifications")):null!==k?r.a.createElement("span",{id:"no-notifications-span"},"No notifications"):L,r.a.createElement("div",{id:"notifications-drop-down-bottom-section"},null===k?null:k.map((function(e){return r.a.createElement("div",{className:"notification-card"},r.a.createElement("div",{className:"notification-card-left-section"},r.a.createElement("img",{src:e.image,alt:"notification user"})),r.a.createElement("div",{className:"notification-card-right-section"},r.a.createElement("span",null,r.a.createElement("strong",null,e.name),","," ",void 0!==e.nonAnchorContent?e.nonAnchorContent:""," ",r.a.createElement("a",{href:e.anchorSrc},e.content)),r.a.createElement("br",null),r.a.createElement("span",{className:"date-distance-span"},Object(P.a)(e.time.toDate(),new Date,{addSuffix:!0}))))}))))),r.a.createElement("div",{id:"friends-link-container"},r.a.createElement("button",{id:"friends-link",onClick:Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(0),document.location.href=O.pageGenerator.generateUserFriendsPage(F.userUID,F.userInfo.firstName);case 2:case"end":return e.stop()}}),e)})))},B>0?r.a.createElement("span",null,B):null)),r.a.createElement("div",{id:"profile-button-container",ref:R},r.a.createElement("button",{id:"profile-button",onClick:function(){return u(!i)},className:i?"clicked":""},r.a.createElement("img",{alt:"profile",src:void 0!==F.userInfo&&void 0!==F.userInfo.profileImage?F.userInfo.profileImage:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png"})),r.a.createElement("div",{id:"profile-drop-down",className:i?"visible":"hidden"},r.a.createElement("div",{id:"profile-drop-down-top-section"},r.a.createElement("span",null,void 0!==F.userInfo&&void 0!==F.userInfo.firstName?F.userInfo.firstName.toUpperCase():""),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateUserPage(F.userUID,F.userInfo.firstName)},"Profile")),r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateUserFriendsPage(F.userUID,F.userInfo.firstName)},"Friends")),r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateEditFavoriteGenresPage()},"Favorite genres")),r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateRecommendationsPage(!0)},"Friends' recommendations")))),r.a.createElement("div",{id:"profile-drop-down-bottom-section"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateAccountSettingsPage()},"Account settings")),r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateHomePage(),onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O.signOut(D);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Sign out"))))))),W=null===F||void 0===F.userUID||null===F.userUID?r.a.createElement("div",{id:"browse-drop-down-right-section"},r.a.createElement("span",null,"GENRES"),r.a.createElement("ul",null,["Art","Biography","Business","Children's","Christian","Classics","Comics","Cookbooks","Ebooks","Fantasy","Fiction","Graphic Novels","Historical Fiction","History","Horror","Memoir","Music","Mystery","Nonfiction","Poetry","Psychology","Romance","Science","Science Fiction","Self Help","Sports","Thriller","Travel","Young Adult","More Genres"].map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("a",{href:O.pageGenerator.generateHomePage()},e))})))):r.a.createElement("div",{id:"browse-drop-down-right-section"},r.a.createElement("span",null,"FAVORITE GENRES"),r.a.createElement("ul",null,void 0!==F.userInfo&&void 0!==F.userInfo.favoriteGenres?F.userInfo.favoriteGenres.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("a",{href:O.pageGenerator.generateHomePage()},e))})):null),r.a.createElement("a",{href:O.pageGenerator.generateEditFavoriteGenresPage(),id:"all-genres-a"},"All Genres")),_=r.a.createElement("div",{id:"browse-drop-down",className:a?"visible":"hidden"},r.a.createElement("div",{id:"browse-drop-down-left-section"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateRecommendationsPage()},"Recommendations")),r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateExplorePage()},"Explore")),r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateNewsPage()},"News & Interviews")))),W);return r.a.createElement("div",{id:"top-bar"},r.a.createElement("div",{id:"logo-link-container"},r.a.createElement("a",{id:"logo-home-link",href:O.pageGenerator.generateHomePage()},r.a.createElement("span",null,"GH"))),r.a.createElement("div",{id:"top-bar-left-section"},r.a.createElement("div",{id:"home-link-container"},r.a.createElement("a",{id:"home-link",href:O.pageGenerator.generateHomePage()},"Home")),null===F||void 0===F.userUID||null===F.userUID?null:r.a.createElement("div",{id:"my-books-link-container"},r.a.createElement("a",{id:"my-books-link",href:O.pageGenerator.generateUserShelfPage(F.userUID,F.userInfo.firstName)},"My Books")),r.a.createElement("div",{id:"browse-button-container",ref:U},r.a.createElement("button",{id:"browse-button",onClick:function(){return o(!a)},className:a?"clicked":""},"Browse \u25be"),_)),r.a.createElement(C,{userUID:null===F?F:F.userUID}),T)}),U=(a(77),function(){var e=JSON.parse(localStorage.getItem("userState"));return r.a.createElement("div",{id:"user-home"},r.a.createElement(A,null),r.a.createElement("div",{id:"dashboard"},r.a.createElement("div",{id:"dashboard-shelf"},r.a.createElement("div",{id:"dashboard-shelf-currently-reading"},r.a.createElement("h2",{id:"dashboard-shelf-currently-reading-h2"},"CURRENTLY READING"),void 0!==e.userInfo&&void 0!==e.userInfo.readingBooks?e.userInfo.readingBooks.map((function(e,t){return t>1?null:r.a.createElement("div",{className:"dashboard-shelf-reading-book-card",key:t},r.a.createElement("a",{href:e.page,className:"dashboard-shelf-reading-book-card-cover-a"},r.a.createElement("img",{className:"dashboard-shelf-reading-book-card-cover",src:e.cover,alt:e.title})),r.a.createElement("div",{className:"dashboard-shelf-reading-book-card-details"},r.a.createElement("a",{className:"dashboard-shelf-book-title-a",href:e.page},e.title),r.a.createElement("span",null,"by ",r.a.createElement("a",{href:e.authorPage},e.author)," ",e.authorHasBadge?r.a.createElement("span",{className:"author-badge-wrapper"},r.a.createElement("span",{className:"author-badge"})):null),r.a.createElement("button",{className:"dashboard-update-progress"},"Update progress")))})):null,r.a.createElement("span",{id:"dashboard-shelf-currently-reading-bottom"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.userUID,e.userInfo.firstName,["reading"])},"View all books"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{id:"add-a-book"},"Add a book"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{id:"general-update"},"General update"))),r.a.createElement("div",{id:"dashboard-shelf-want-to-read"},r.a.createElement("h2",{id:"dashboard-shelf-want-to-read-h2"},"WANT TO READ"),r.a.createElement("div",{id:"dashboard-shelf-want-to-read-grid"},void 0!==e.userInfo&&void 0!==e.userInfo.wantToReadBooks?e.userInfo.wantToReadBooks.map((function(e,t){return t>5?null:r.a.createElement("a",{key:t,className:"dashboard-shelf-want-to-read-book",href:e.page},r.a.createElement("img",{src:e.cover,alt:e.title}))})):null),r.a.createElement("a",{id:"view-all-to-read",href:O.pageGenerator.generateUserShelfPage(e.userUID,e.userInfo.firstName,["to-read"])},"View all books")),r.a.createElement("div",{id:"dashboard-shelf-bookshelves"},r.a.createElement("h2",{id:"bookshelves-h2"},"BOOKSHELVES"),r.a.createElement("div",{id:"dashboard-shelf-bookshelves-bottom"},r.a.createElement("div",{id:"dashboard-shelf-bookshelves-numbers"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.userUID,e.userInfo.firstName,["to-read"])},void 0!==e.userInfo&&void 0!==e.userInfo.wantToReadBooks?e.userInfo.wantToReadBooks.length:null),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.userUID,e.userInfo.firstName,["reading"])},void 0!==e.userInfo&&void 0!==e.userInfo.readingBooks?e.userInfo.readingBooks.length:null),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.userUID,e.userInfo.firstName,["read"])},void 0!==e.userInfo&&void 0!==e.userInfo.numberOfReadBooks?e.userInfo.numberOfReadBooks:null)),r.a.createElement("div",{id:"dashboard-shelf-bookshelves-titles"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.userUID,e.userInfo.firstName,["reading"])},"Want to Read"),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.userUID,e.userInfo.firstName,["to-read"])},"Currently Reading"),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.userUID,e.userInfo.firstName,["read"])},"Read"))))),r.a.createElement("div",{id:"dashboard-right-section"},r.a.createElement("div",{id:"dashboard-bottom"},r.a.createElement("div",{className:"top-section"},r.a.createElement("h2",{className:"connect-h2"},"CONNECT"),r.a.createElement("div",{className:"social-media-links"},r.a.createElement("a",{className:"facebook-a",href:"https://www.facebook.com/Goodreads/"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/site_footer/footer_facebook-ea4ab848f8e86c5f5c98311bc9495a1b.svg",alt:"Facebook logo"})),r.a.createElement("a",{className:"twitter-a",href:"https://twitter.com/goodreads"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/site_footer/footer_twitter-126b3ee80481a763f7fccb06ca03053c.svg",alt:"Twitter logo"})),r.a.createElement("a",{className:"instagram-a",href:"https://www.instagram.com/goodreads/"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/site_footer/footer_instagram-d59e3887020f12bcdb12e6c539579d85.svg",alt:"Instagram logo"})),r.a.createElement("a",{className:"linkedin-a",href:"https://www.linkedin.com/company/goodreads-com/"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/site_footer/footer_linkedin-5b820f4703eff965672594ef4d10e33c.svg",alt:"Linkedin logo"})))),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"bottom-section-links"},r.a.createElement("a",{className:"iOS-a",href:"https://itunes.apple.com/app/apple-store/id355833469?pt=325668&ct=mw_footer&mt=8"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/app/badge-ios-desktop-homepage-6ac7ae16eabce57f6c855361656a7540.svg",alt:"Download on the App Store"})),r.a.createElement("a",{className:"Android-a",href:"https://play.google.com/store/apps/details?id=com.goodreads&utm_source=mw_footer&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/app/badge-android-desktop-home-2x-e31514e1fb4dddecf9293aa526a64cfe.png",alt:"Get it on Google Play"}))),r.a.createElement("span",null,"Goodreads"))))))}),R=(a(78),a(5)),M=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})),a=Object(n.useState)(!0),o=Object(b.a)(a,2),s=o[0],c=o[1];Object(n.useEffect)((function(){var a=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.trackPromise)(O.modifyUserInfo(a));case 2:r=t.sent,e(p.login(a,Object(m.a)(Object(m.a)({},r),{},{firstName:null!==n?n.split(" ")[0]:""}))),c(!1);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),n=function(){var t=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(p.signOut());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();E.a.auth().onAuthStateChanged((function(e){null!==e&&t.userUID!==e.uid?a(e.uid,e.displayName):null===e&&null!==t.userUID&&n()}))}),[e,t.userUID]);var l=function(e){return e.isLoggedIn&&!e.loading?r.a.createElement(U,null):r.a.createElement(B,null)};return r.a.createElement("div",{className:"App"},r.a.createElement(l,{isLoggedIn:null!==t.userUID,loading:s}))},D=(a(82),function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)(""),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(!1),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(c.f)(),k=Object(c.g)(),w=void 0!==k.state&&void 0!==k.state.error?r.a.createElement("div",{id:"wrong-email-password-message"},r.a.createElement("span",null,"Sorry, that email or password isn't right. You can"," ",r.a.createElement("a",{href:O.pageGenerator.generateForgotPasswordPage()},"reset your password."))):null;return r.a.createElement("div",{className:"sign-in-up-page",id:"sign-in-page"},r.a.createElement("a",{className:"sign-in-up-page-home-link",href:O.pageGenerator.generateHomePage()},r.a.createElement("img",{src:"https://www.goodreads.com/assets/layout/goodreads_logo_324-a908b923dc3ed9b7a13f3da4d1ffb2df.png",alt:"Goodreads"})),r.a.createElement("div",{className:"sign-in-up-page-main-card"},r.a.createElement("div",{className:"sign-in-up-page-main-card-top"},r.a.createElement("h1",null,"Sign in to Goodreads"),r.a.createElement("button",{id:"continue-with-facebook",onClick:Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.facebookSignIn();case 2:E.push({pathname:"/"});case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("span",{className:"facebook-icon"}),r.a.createElement("span",{className:"continue-with-facebook-label"},"Continue with Facebook")),r.a.createElement("div",{className:"smaller-buttons"},r.a.createElement("button",{id:"sign-in-with-twitter",onClick:Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.twitterSignIn();case 2:E.push({pathname:"/"});case 3:case"end":return e.stop()}}),e)})))},"Sign in with Twitter"),r.a.createElement("button",{id:"sign-in-with-google",onClick:Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.googleSignIn();case 2:E.push({pathname:"/"});case 3:case"end":return e.stop()}}),e)})))},"Sign in with Google"))),r.a.createElement("p",{className:"or-container"},r.a.createElement("span",{className:"or-span"},"or")),w,r.a.createElement("form",{className:"sign-in-up-page-main-card-center"},r.a.createElement("label",{htmlFor:"sign-in-page-email"},"Email address"),r.a.createElement("input",{type:"email",className:"sign-in-up-page-email",id:"sign-in-page-email",placeholder:"you@yours.com",value:o,onChange:function(e){return s(e.target.value)}}),r.a.createElement("label",{htmlFor:"sign-in-page-password"},"Password"),r.a.createElement("input",{type:"password",className:"sign-in-up-page-password",id:"sign-in-page-password",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement("div",{className:"sign-in-up-page-checkbox-and-label"},r.a.createElement("input",{type:"checkbox",className:"sign-in-up-page-keep-in",id:"sign-in-page-keep-in",value:f,onChange:function(){return v(!f)}}),r.a.createElement("label",{htmlFor:"sign-in-page-keep-in"},"Keep me signed in")),r.a.createElement("div",{className:"sign-in-up-page-main-card-center-bottom-buttons"},r.a.createElement("button",{className:"sign-in-up-page-sign-in",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O.passwordSignIn(o,u,f,E);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Sign in"),r.a.createElement("a",{className:"sign-in-up-page-forgot-password",href:O.pageGenerator.generateForgotPasswordPage()},"Forgot password"))),r.a.createElement("div",{className:"sign-in-up-page-main-card-bottom"},r.a.createElement("span",null,"Not a member?"),r.a.createElement("a",{href:O.pageGenerator.generateSignUpPage()},"Sign up"))),r.a.createElement("div",{className:"sign-in-up-page-bottom-section"}))}),F=(a(83),function(e){var t=Object(c.f)(),a=Object(c.g)(),o=Object(n.useState)(""),s=Object(b.a)(o,2),l=s[0],i=s[1],u=Object(n.useState)(""),m=Object(b.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(""),v=Object(b.a)(f,2),E=v[0],k=v[1],w=void 0!==a.state&&"name"===a.state.error?r.a.createElement("span",null,"Sorry, you must enter a name to sign up for Goodreads."):void 0!==a.state&&"email-missing"===a.state.error?r.a.createElement("span",null,"Sorry, you must enter an email address to sign up for Goodreads."):void 0!==a.state&&"email-exists"===a.state.error?r.a.createElement("span",null,"Sorry, that email has already been used to sign up for Goodreads."," ",r.a.createElement("a",{href:O.pageGenerator.generateSignInPage()},"Sign in")):null;return r.a.createElement("div",{className:"sign-in-up-page",id:"sign-up-page"},r.a.createElement("a",{className:"sign-in-up-page-home-link",href:O.pageGenerator.generateHomePage()},r.a.createElement("img",{src:"https://www.goodreads.com/assets/layout/goodreads_logo_324-a908b923dc3ed9b7a13f3da4d1ffb2df.png",alt:"Goodreads"})),r.a.createElement("div",{className:"sign-in-up-page-main-card"},r.a.createElement("div",{className:"sign-in-up-page-main-card-top"},r.a.createElement("h1",null,"Sign up for Goodreads"),r.a.createElement("span",null,"Sign up to see what your friends are reading, get book recommendations, and join the world\u2019s largest community of readers."),r.a.createElement("button",{id:"continue-with-facebook",onClick:Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.facebookSignIn();case 2:t.push({pathname:"/"});case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("span",{className:"facebook-icon"}),r.a.createElement("span",{className:"continue-with-facebook-label"},"Continue with Facebook")),r.a.createElement("div",{className:"smaller-buttons"},r.a.createElement("button",{id:"sign-in-with-twitter",onClick:Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.twitterSignIn();case 2:t.push({pathname:"/"});case 3:case"end":return e.stop()}}),e)})))},"Sign in with Twitter"),r.a.createElement("button",{id:"sign-in-with-google",onClick:Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.googleSignIn();case 2:t.push({pathname:"/"});case 3:case"end":return e.stop()}}),e)})))},"Sign in with Google"))),r.a.createElement("p",{className:"or-container",id:"sign-up-or-container"},r.a.createElement("span",{className:"or-span"},"or")),r.a.createElement("h2",{className:"sign-up-with-email"},"Sign Up with Email"),null!==w?r.a.createElement("div",{id:"wrong-email-password-message",className:"sign-up-error"},w):null,r.a.createElement("form",{className:"sign-in-up-page-main-card-center"},r.a.createElement("label",{htmlFor:"sign-up-page-name"},"Name"),r.a.createElement("input",{type:"text",className:"sign-in-up-page-email",id:"sign-up-page-name",placeholder:"Name",value:E,onChange:function(e){return k(e.target.value)}}),r.a.createElement("label",{htmlFor:"sign-in-page-email"},"Email address"),r.a.createElement("input",{type:"email",className:"sign-in-up-page-email",id:"sign-in-page-email",placeholder:"you@yours.com",value:l,onChange:function(e){return i(e.target.value)}}),r.a.createElement("label",{htmlFor:"sign-in-page-password"},"Password"),r.a.createElement("input",{type:"password",className:"sign-in-up-page-password",id:"sign-in-page-password",value:d,onChange:function(e){return p(e.target.value)}}),r.a.createElement("div",{className:"sign-in-up-page-main-card-center-bottom-buttons",id:"sign-up-card-bottom-buttons"},r.a.createElement("button",{className:"sign-in-up-page-sign-in",onClick:function(){var e=Object(h.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,O.signUp(l,d,E,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Sign up"),r.a.createElement("div",{className:"sign-in-up-page-main-card-bottom",id:"sign-up-page-already-member"},r.a.createElement("span",null,"Already a member?"),r.a.createElement("a",{href:O.pageGenerator.generateSignInPage()},"Sign in"))),r.a.createElement("div",{id:"sign-up-page-main-card-bottom"},r.a.createElement("span",null,"By clicking \u201cSign up\u201d I confirm that I am at least 13 years of age.")))),r.a.createElement("div",{className:"sign-in-up-page-bottom-section"}))}),G=(a(84),function(){return r.a.createElement("div",{className:"sign-in-up-page",id:"sign-out-page"},r.a.createElement("a",{className:"sign-in-up-page-home-link",href:O.pageGenerator.generateHomePage()},r.a.createElement("img",{src:"https://www.goodreads.com/assets/layout/goodreads_logo_324-a908b923dc3ed9b7a13f3da4d1ffb2df.png",alt:"Goodreads"})),r.a.createElement("div",{className:"sign-in-up-page-main-card"},r.a.createElement("div",{className:"sign-in-up-page-main-card-top",id:"sign-out-main-card-top"},r.a.createElement("span",null,"You've been signed out."),r.a.createElement("a",{href:O.pageGenerator.generateHomePage()},"Goodreads Home")),r.a.createElement("p",{className:"or-container",id:"sign-out-or-container"},r.a.createElement("span",{className:"or-span"},"or")),r.a.createElement("div",{id:"sign-out-page-bottom"},r.a.createElement("a",{href:O.pageGenerator.generateSignInPage()},"Sign in again"))),r.a.createElement("div",{className:"sign-in-up-page-bottom-section"}))}),L=a(160),T=(a(85),function(e){var t=e.match,a=Object(c.f)(),o=t.params.bookPageId,s=Object(n.useRef)(),l=Object(n.useRef)(),i=Object(n.useRef)(),u=Object(n.useRef)(),d=Object(n.useRef)(),p=Object(n.useRef)(),f=Object(n.useState)(0),v=Object(b.a)(f,2),E=v[0],k=v[1],w=Object(n.useState)(0),y=Object(b.a)(w,2),N=y[0],x=y[1],j=Object(n.useState)({title:"",cover:""}),I=Object(b.a)(j,2),B=I[0],P=I[1],C=Object(n.useState)(!1),U=Object(b.a)(C,2),M=U[0],D=U[1],F=Object(n.useState)(!1),G=Object(b.a)(F,2),T=G[0],W=G[1],_=Object(n.useState)(-1),q=Object(b.a)(_,2),z=q[0],Y=q[1],Q=Object(n.useState)(!1),V=Object(b.a)(Q,2),H=V[0],J=V[1],K=Object(n.useState)(!1),Z=Object(b.a)(K,2),X=Z[0],$=Z[1],ee=Object(n.useState)(0),te=Object(b.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),oe=Object(b.a)(re,2),se=oe[0],ce=oe[1],le=Object(n.useState)(!0),ie=Object(b.a)(le,2),ue=ie[0],me=ie[1],de=Object(n.useState)(!0),pe=Object(b.a)(de,2),fe=pe[0],ge=pe[1],he=Object(n.useState)(!0),be=Object(b.a)(he,2),ve=be[0],Ee=be[1],ke=Object(n.useState)(""),we=Object(b.a)(ke,2),ye=we[0],Ne=we[1],Oe=Object(n.useState)(""),xe=Object(b.a)(Oe,2),je=xe[0],Ie=xe[1],Se=Object(n.useState)(""),Be=Object(b.a)(Se,2),Pe=Be[0],Ce=Be[1],Ae=Object(n.useState)(0),Ue=Object(b.a)(Ae,2),Re=Ue[0],Me=Ue[1],De=Object(n.useState)(""),Fe=Object(b.a)(De,2),Ge=Fe[0],Le=Fe[1],Te=Object(n.useState)([]),We=Object(b.a)(Te,2),_e=We[0],qe=We[1],ze=Object(n.useState)([]),Ye=Object(b.a)(ze,2),Qe=Ye[0],Ve=Ye[1],He=Object(n.useState)(!1),Je=Object(b.a)(He,2),Ke=Je[0],Ze=Je[1],Xe=Object(n.useState)(!1),$e=Object(b.a)(Xe,2),et=$e[0],tt=$e[1],at=Object(n.useState)(0),nt=Object(b.a)(at,2),rt=nt[0],ot=nt[1],st=Object(n.useState)(!0),ct=Object(b.a)(st,2),lt=ct[0],it=ct[1],ut=Object(n.useState)("default"),mt=Object(b.a)(ut,2),dt=mt[0],pt=mt[1],ft=Object(n.useState)(""),gt=Object(b.a)(ft,2),ht=gt[0],bt=gt[1],vt=Object(n.useState)(!1),Et=Object(b.a)(vt,2),kt=Et[0],wt=Et[1],yt=Object(n.useState)(!1),Nt=Object(b.a)(yt,2),Ot=Nt[0],xt=Nt[1],jt=Object(n.useState)(!1),It=Object(b.a)(jt,2),St=It[0],Bt=It[1],Pt=Object(n.useState)(""),Ct=Object(b.a)(Pt,2),At=Ct[0],Ut=Ct[1],Rt=Object(n.useState)(!1),Mt=Object(b.a)(Rt,2),Dt=Mt[0],Ft=Mt[1],Gt=Object(n.useState)([]),Lt=Object(b.a)(Gt,2),Tt=Lt[0],Wt=Lt[1],_t=Object(n.useState)([]),qt=Object(b.a)(_t,2),zt=qt[0],Yt=qt[1],Qt=Object(n.useState)([]),Vt=Object(b.a)(Qt,2),Ht=Vt[0],Jt=Vt[1],Kt=Object(n.useState)([]),Zt=Object(b.a)(Kt,2),Xt=Zt[0],$t=Zt[1],ea=Object(n.useState)(!0),ta=Object(b.a)(ea,2),aa=ta[0],na=ta[1],ra=Object(n.useState)(!0),oa=Object(b.a)(ra,2),sa=oa[0],ca=oa[1],la=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="",a=0;case 2:if(!(a<o.length)){e.next=11;break}if("."===o[a]){e.next=7;break}t+=o[a],e.next=8;break;case 7:return e.abrupt("break",11);case 8:a++,e.next=2;break;case 11:return e.next=13,Object(R.trackPromise)(O.queryBookById(la.userUID,t));case 13:n=e.sent,localStorage.setItem("".concat(t,"Obj"),JSON.stringify(n)),P(n),void 0!==n.userRating&&Me(n.userRating),D(!0);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,la.userUID,t]),Object(n.useEffect)((function(){document.addEventListener("click",(function(e){void 0!==i.current&&null!==i.current&&(!Ot||i.current.contains(e.target)||u.current.contains(e.target)||xt(!1))})),document.addEventListener("click",(function(e){void 0!==d.current&&null!==d.current&&(!St||d.current.contains(e.target)||p.current.contains(e.target)||Bt(!1))}))})),Object(n.useEffect)((function(){void 0!==B.userRating?Me(B.userRating):Me(0),void 0!==B.userProgress?Ie("".concat(B.userProgress)):Ie(""),void 0!==B.toReadBookPosition?Ce("".concat(B.toReadBookPosition)):Ce("")}),[B]),Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getFriendsInfo(la.userUID,a));case 2:return t=e.sent,Wt(t),Yt(t.map((function(e){return!1}))),Jt(t.map((function(e){return""}))),e.next=8,Object(R.trackPromise)(O.queryBookRecommendedToFriendsStatus(la.userUID,B.id,t.map((function(e){return e.id})),a));case 8:n=e.sent,$t(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Ft(!1),Dt&&e()}),[Dt,la.userUID,B.id,a]),Object(n.useLayoutEffect)((function(){void 0!==s.current&&x(s.current.scrollHeight),void 0!==l.current&&k(l.current.scrollHeight);var e=document.getElementsByClassName("book-page-review-main-body");if(e.length>0){var t=[];qe(Array.from(e).map((function(e){return!1}))),Array.from(e).forEach((function(e){e.scrollHeight<=292?t.push(!1):t.push(!0)})),Ve(t)}}),[M]);var ia=M?B.fiveRatings+B.fourRatings+B.threeRatings+B.twoRatings+B.oneRatings:1,ua=M?((5*B.fiveRatings+4*B.fourRatings+3*B.threeRatings+2*B.twoRatings+B.oneRatings)/ia).toFixed(2):0,ma=M?Math.max(B.fiveRatings,B.fourRatings,B.threeRatings,B.twoRatings,B.oneRatings):0,da=function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(la.userUID,B.id),P((function(e){return Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0,userProgress:void 0,userRating:void 0})})))},pa=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.id){e.next=6;break}return W(!0),e.next=4,O.addBookToShelf(la.userUID,B.id,t,a);case 4:P((function(e){return Object(m.a)(Object(m.a)({},e),{},{userStatus:t})})),W(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fa=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===B.id){e.next=4;break}return e.next=3,O.rateBook(la.userUID,B.id,t,a);case 3:P((function(e){return Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0!==e.userStatus?e.userStatus:"read",userRating:t})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ga=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==la.userUID&&void 0!==la.userUID&&void 0!==B.id&&t.length>0)){e.next=4;break}return e.next=3,O.updateBookInShelf(la.userUID,B.id,parseInt(t));case 3:P((function(e){return Object(m.a)(Object(m.a)({},e),{},{userProgress:parseInt(t)})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ha=M&&"reading"===B.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("div",{className:ue?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up reading"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,r.a.createElement("b",null,"Update your reading progress:")),r.a.createElement("span",null,"I'm on page"," ",r.a.createElement("input",{type:"text",value:je,className:fe?"page-progress-input":"page-progress-input white-background",onClick:function(e){ge(!1),me(!1)},onChange:function(e){return Ie(e.target.value)}})," ","of ",B.pageCount,"."," ",r.a.createElement("a",{href:void 0!==la.userUID&&null!==la.userUID?O.pageGenerator.generateUserShelfPage(la.userUID,la.userInfo.firstName,["reading"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:fe?"shelf-pop-up-bottom hidden":"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(e){ga(je),me(!0),ge(!0)}},"Submit"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){me(!0),ge(!0)}},"Cancel"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{className:"progress-finished-button",onClick:function(e){pa("read"),me(!0),ge(!0)}},"Finished book"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:da}),r.a.createElement("span",null,"Currently Reading")):M&&"read"===B.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("div",{className:"shelf-pop-up-wrapper"},r.a.createElement("div",{className:"shelf-pop-up read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("a",{href:O.pageGenerator.generateWriteReviewPageForBook(B.id)},"Write a review"),r.a.createElement("span",null,"\xb7"),r.a.createElement("a",{href:void 0!==la.userUID&&null!==la.userUID?O.pageGenerator.generateUserShelfPage(la.userUID,la.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:da}),r.a.createElement("span",null,"Read")):M&&"to-read"===B.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("div",{className:ue?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up to-read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,"#",r.a.createElement("input",{type:"text",value:Pe,className:"shelf-pop-up-to-read-input",onChange:function(e){return Ce(e.target.value)},onClick:function(e){me(!1),ge(!1)}})," ","on your ",r.a.createElement("b",null,"To Read")," shelf.")),fe?r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("a",{href:void 0!==la.userUID&&null!==la.userUID?O.pageGenerator.generateUserShelfPage(la.userUID,la.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf")):r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(e){O.changeBookPosition(la.userUID,B.id,parseInt(Pe)),P((function(e){return Object(m.a)(Object(m.a)({},e),{},{toReadBookPosition:parseInt(Pe)})})),me(!0),ge(!0)}},"Save"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){me(!0),ge(!0)}},"Cancel"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:da}),r.a.createElement("span",null,"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return pa("to-read")}},T?"...saving":"Want to Read"),ba=r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:"book-options-dropdown"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"dropdown-read-button",onClick:function(){return pa("read")}},"Read"),r.a.createElement("button",{className:"dropdown-currently-reading-button",onClick:function(){return pa("reading")}},"Currently Reading"),r.a.createElement("button",{className:"dropdown-want-to-read-button",onClick:function(){return pa("to-read")}},"Want to Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:"dropdown-add-shelf",onClick:function(e){return Ee(!1)}},"Add Shelf"),r.a.createElement("div",{className:ve?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",value:ye,onChange:function(e){return Ne(e.target.value)}}),r.a.createElement("button",{className:"dropdown-add-shelf-add-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ye.length>0)){e.next=4;break}return e.next=3,O.addBookToUserShelf(la.userUID,B.rootBook,ye,null,a);case 3:Ee(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Add"))))),va=M?r.a.createElement("div",{className:"book-page-book-info-left"},r.a.createElement("div",{className:"book-page-book-info-cover-wrap"},r.a.createElement("a",{className:"book-cover-page-anchor",href:O.pageGenerator.generateBookCoverPage(B.id,B.title)},r.a.createElement("img",{src:void 0!==B.cover?B.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:B.title,className:"book-info-book-cover"})),r.a.createElement("div",{className:"cover-options"},r.a.createElement("a",{className:"book-other-editions-anchor",href:O.pageGenerator.generateBookEditionsPage(B.originalId,B.originalTitle)},"Other editions"),void 0!==B.cover?r.a.createElement("button",{className:"book-page-enlarge-cover",onClick:function(){return xt((function(e){return!e}))},ref:u},"Enlarge cover"):null)),r.a.createElement("div",{className:"book-page-user-shelf-section"},r.a.createElement("div",{className:"add-to-shelf-buttons"},r.a.createElement("div",{className:"want-to-read-button-and-options ".concat(void 0!==B.userStatus?B.userStatus:"")},ha,ba))),r.a.createElement("div",{className:"book-page-rate-book"},void 0===B.userRating?null:r.a.createElement("button",{className:"clear-rating-button",onClick:function(){return fa(void 0)}},"Clear rating"),void 0===B.userRating?r.a.createElement("span",{className:"rate-this-book"},"Rate this book"):r.a.createElement("span",{className:"rate-this-book my-rating"},"My rating:"),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:Re>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return Me(1)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(1)}}),r.a.createElement("div",{className:Re>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return Me(2)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(2)}}),r.a.createElement("div",{className:Re>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return Me(3)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(3)}}),r.a.createElement("div",{className:Re>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return Me(4)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(4)}}),r.a.createElement("div",{className:Re>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return Me(5)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(5)}})))):null,Ea=M?r.a.createElement("div",{className:"book-page-title-area"},r.a.createElement("h1",{className:"book-page-book-title"},B.title),void 0!==B.series?r.a.createElement("a",{className:"book-page-book-title-series-a",href:B.series.page},"(".concat(B.series.name," #").concat(B.seriesInstance,")")):"",r.a.createElement("span",{className:"book-page-author-name"},"by"," ",r.a.createElement("a",{className:"book-page-author-name-a",href:B.authorPages[0]},B.authorNames[0]),B.authorIsMember?r.a.createElement("span",null,r.a.createElement("span",{className:"book-page-goodreads-author"}," ","(Goodreads Author)"),B.authorNames.length>1?",":""):null),B.authorNames.slice(1).map((function(e,t){return r.a.createElement("span",{key:t},r.a.createElement("a",{className:"book-page-other-author-name-a",href:B.authorPages[t]},e),r.a.createElement("span",{className:"book-page-goodreads-other-author"}," ","(",B.authorFunctions[t],")"),t===B.authorNames.length-1?",":"")}))):null,ka=function(e){return M?r.a.createElement("div",{className:e?"book-page-ratings-area top":"book-page-ratings-area bottom"},r.a.createElement("div",{className:"book-page-general-rating"},r.a.createElement("div",{className:"book-page-general-rating-stars"},r.a.createElement("div",{className:ua>=1?"static-star small full":ua>=.5?"static-star small almost-full":ua>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:ua>=2?"static-star small full":ua>=1.5?"static-star small almost-full":ua>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:ua>=3?"static-star small full":ua>=2.5?"static-star small almost-full":ua>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:ua>=4?"static-star small full":ua>=3.5?"static-star small almost-full":ua>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:ua>=5?"static-star small full":ua>=4.5?"static-star small almost-full":ua>4?"static-star small almost-empty":"static-star small empty"})),r.a.createElement("span",null,isNaN(ua)?"":ua)),r.a.createElement("span",{className:"book-page-ratings-dot"},"\xb7"),r.a.createElement("div",{className:"rating-details",onMouseOver:function(t){e||ca(!1)},onMouseLeave:function(t){!e&&(t.clientX>974||t.clientX<375||t.clientY>308||t.clientY<80)&&ca(!0)}},r.a.createElement("div",{className:"svg-container"},r.a.createElement("svg",{width:"12",height:"11"},r.a.createElement("rect",{width:0!==ia?16*B.fiveRatings/ia:0,height:"2",y:"0",fill:"rgb(33,86,37)"}),r.a.createElement("rect",{width:0!==ia?16*B.fourRatings/ia:0,height:"2",y:"3",fill:"rgb(33,86,37)"}),r.a.createElement("rect",{width:0!==ia?16*B.threeRatings/ia:0,height:"2",y:"6",fill:"rgb(33,86,37)"}),r.a.createElement("rect",{width:0!==ia?16*B.twoRatings/ia:0,height:"2",y:"9",fill:"rgb(33,86,37)"}),r.a.createElement("rect",{width:0!==ia?16*B.oneRatings/ia:0,height:"2",y:"12",fill:"rgb(33,86,37)"}))),r.a.createElement("span",{onClick:function(t){e&&na(!1)}},"Rating details"),r.a.createElement("div",{className:e&&!aa||!e&&!sa?"rating-details-popup":"rating-details-popup hidden"},r.a.createElement("div",{className:"rating-details-popup-tip"}),r.a.createElement("span",{className:"rating-details-top-title"},e?"Rating details":"book data"),e?r.a.createElement("button",{className:"rating-details-top-close-button",onClick:function(e){return na(!0)}}):null,r.a.createElement("table",{className:"rating-distribution"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},"5",r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==ia?350*B.fiveRatings/ma:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==ia?Math.round(100*B.fiveRatings/ia):0,"% (").concat(B.fiveRatings,")"))),r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},"4",r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==ia?350*B.fourRatings/ma:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==ia?Math.round(100*B.fourRatings/ia):0,"% (").concat(B.fourRatings,")"))),r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},"3",r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==ia?350*B.threeRatings/ma:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==ia?Math.round(100*B.threeRatings/ia):0,"% (").concat(B.threeRatings,")"))),r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},"2",r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==ia?350*B.twoRatings/ma:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==ia?Math.round(100*B.twoRatings/ia):0,"% (").concat(B.threeRatings,")"))),r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},"1",r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==ia?350*B.oneRatings/ma:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==ia?Math.round(100*B.oneRatings/ia):0,"% (").concat(B.oneRatings,")"))))),r.a.createElement("span",{className:"percent-of-people-who-liked"},r.a.createElement("span",{className:"number"},0!==ia?Math.round(100*(B.fiveRatings+B.fourRatings+B.threeRatings)/ia):0),"% of people liked it"),r.a.createElement("span",{className:"all-editions-info"},r.a.createElement("span",{className:"title"},"All editions: "),r.a.createElement("span",{className:"number"},ua)," average rating,"," ",r.a.createElement("span",{className:"number"},ia)," ratings,"," ",r.a.createElement("span",{className:"number"},B.reviews.length)," reviews, added by ",r.a.createElement("span",{className:"number"},B.addedBy)," ","people, ",r.a.createElement("span",{className:"number"},B.toReads)," ","to-reads"),r.a.createElement("span",{className:"this-edition-info"},r.a.createElement("span",{className:"title"},"This edition: "),r.a.createElement("span",{className:"number"},B.thisEditionRating)," ","average rating,"," ",r.a.createElement("span",{className:"number"},B.thisEditionRatings)," ","ratings,"," ",r.a.createElement("span",{className:"number"},B.reviews.filter((function(e){return e.edition===B.id})).length)," ","reviews, added by"," ",r.a.createElement("span",{className:"number"},B.thisEditionAddedBy)," ","people"))),r.a.createElement("span",{className:"book-page-ratings-dot"},"\xb7"),r.a.createElement("a",{className:"book-page-ratings-count",href:"".concat(o,"#other-reviews")},"".concat(ia," ratings")),r.a.createElement("span",{className:"book-page-ratings-dot"},"\xb7"),r.a.createElement("a",{className:"book-page-reviews-count",href:"".concat(o,"#other-reviews")},"".concat(B.reviews.length," ").concat(1===B.reviews.length?"review":"reviews"))):null},wa=M?r.a.createElement("div",{className:"book-page-synopsis-wrapper"},r.a.createElement("div",{className:H?"book-page-synopsis-area-full":"book-page-synopsis-area"},void 0!==B.preSynopsis?r.a.createElement("p",{className:"pre-synopsis"},r.a.createElement("b",null,B.preSynopsis)):null,r.a.createElement("p",{className:"synopsis",ref:l},B.synopsis)),E>105?r.a.createElement("button",{className:"synopsis-show-more",onClick:function(e){J((function(e){return!e}))}},H?"(less)":"...more"):null):null,ya=M?r.a.createElement("div",{className:"book-page-get-a-copy"},r.a.createElement("span",null,"GET A COPY"),r.a.createElement("a",{href:B.amazonLink},"Amazon")):null,Na=M?r.a.createElement("div",{className:"book-page-book-info-details-expanded"},r.a.createElement("div",{className:"book-page-book-info-details-expanded-left"},r.a.createElement("span",null,"Original Title"),void 0!==B.ISBN?r.a.createElement("span",null,"ISBN"):null,void 0!==B.language?r.a.createElement("span",null,"Edition Language"):null,void 0!==B.series?r.a.createElement("span",null,"Series"):null,r.a.createElement("a",{href:O.pageGenerator.generateBookEditionsPage(B.rootBook,B.originalTitle)},"Other Editions (".concat(B.otherEditionsPages.length,")"))),r.a.createElement("div",{className:"book-page-book-info-details-expanded-right"},r.a.createElement("span",null,B.originalTitle),void 0!==B.ISBN?r.a.createElement("span",null,B.ISBN):null,void 0!==B.language?r.a.createElement("span",null,B.language):null,void 0!==B.series?r.a.createElement("a",{href:B.series.page,className:"book-page-details-series-a"},"".concat(B.series.name," #").concat(B.seriesInstance)):null,r.a.createElement("div",{className:"book-page-details-editions"},r.a.createElement("div",{className:"book-page-details-other-editions"},B.otherEditionsPages.length>0?B.otherEditionsPages.map((function(e,t){return r.a.createElement("a",{href:e,key:t,className:"book-page-details-other-editions-a"},r.a.createElement("img",{src:void 0!==B.otherEditionsCovers[t]?B.otherEditionsCovers[t]:"bookInfo.otherEditionsCovers[index]",alt:B.title}))})):r.a.createElement("span",{className:"no-other-editions-found-span"},"None found")),r.a.createElement("div",{className:"book-page-details-editions-bottom"},r.a.createElement("a",{href:O.pageGenerator.generateBookEditionsPage(B.rootBook,B.originalTitle)},"All Editions"),r.a.createElement("span",null,"|"),r.a.createElement("a",{href:O.pageGenerator.generateAddBookPage()},"Add a New Edition"))))):null,Oa=M?r.a.createElement("div",{className:"book-page-book-info-details"},r.a.createElement("span",{className:"book-type-and-pages"},void 0!==B.type?"".concat(B.type,", ").concat(B.pageCount," pages"):"".concat(B.pageCount," pages")),r.a.createElement("span",{className:"book-publication"},void 0!==B.editionPublishedDate?"Published ".concat(Object(L.a)(B.editionPublishedDate,"MMMM do yyyy")," by ").concat(B.publisher):null,B.firstEditionPublishedYear!==B.editionPublishedDate.getYear()&&void 0!==B.firstEditionPublishedYear?r.a.createElement("span",{className:"book-publication-original-year"}," (first published ".concat(B.firstEditionPublishedYear,")")):null),X?Na:null,r.a.createElement("div",{className:"book-page-book-info-bottom"},r.a.createElement("button",{className:"show-more-book-info-details-button",onClick:function(e){$((function(e){return!e}))}},X?"...Less Detail":"More Details..."))):null,xa=r.a.createElement("div",{className:"book-page-book-info-right"},Ea,ka(!0),wa,ya,Oa),ja=r.a.createElement("div",{className:"book-page-book-info"},va,xa),Ia=M&&void 0!==B.lists?r.a.createElement("div",{className:"book-page-lists-with-book"},r.a.createElement("div",{className:"book-page-lists-with-book-top"},r.a.createElement("a",{className:"lists-with-book-a",href:O.pageGenerator.generateBookListsPage(B.id)},"LISTS WITH THIS BOOK")),r.a.createElement("div",{className:"book-page-lists-with-book-bottom"},B.lists.map((function(e){return r.a.createElement("div",{className:"book-page-lists-with-book-pv",key:e.id},r.a.createElement("div",{className:"book-page-lists-with-book-pv-top"},e.bookIds.map((function(t,a){return r.a.createElement("a",{className:"book-page-lists-book-pv",href:O.pageGenerator.generateListPage(e.id,e.title),key:a},r.a.createElement("img",{src:void 0!==e.bookCovers[a]?e.bookCovers[a]:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.bookTitles[a]}))}))),r.a.createElement("div",{className:"book-page-lists-with-book-pv-bottom"},r.a.createElement("a",{className:"book-page-lists-with-book-pv-title",href:O.pageGenerator.generateListPage(e.id,e.title)},e.title),r.a.createElement("span",{className:"book-page-lists-with-book-pv-stats"},"".concat(e.bookIds.length," books \u2013 ").concat(e.voterCount," voters"))))}))),r.a.createElement("div",{className:"book-page-lists-with-book-more"},r.a.createElement("a",{className:"more-lists-with-book-a",href:O.pageGenerator.generateBookListsPage(B.id)},"More lists with this book..."))):M?r.a.createElement("div",{className:"book-page-lists-with-book"},r.a.createElement("div",{className:"book-page-lists-with-book-top"},r.a.createElement("a",{className:"lists-with-book-a",href:O.pageGenerator.generateBookListsPage(B.id)},"LISTS WITH THIS BOOK")),r.a.createElement("div",{className:"not-featured-listopia"},r.a.createElement("span",null,"This book is not yet featured on Listopia."," ",r.a.createElement("a",{href:O.pageGenerator.generateListPage()},"Add this book to your favorite list \xbb")))):null,Sa=M&&void 0!==la.userInfo?r.a.createElement("div",{className:"start-your-review-section"},r.a.createElement("div",{className:"start-your-review-profile-picture"},r.a.createElement("img",{alt:"profile",src:void 0!==la.userInfo.profileImage?la.userInfo.profileImage:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png"})),r.a.createElement("div",{className:"start-your-review-section-right"},void 0!==la.userUID&&null!==la.userUID?r.a.createElement("span",null,r.a.createElement("a",{href:void 0!==la.userUID&&null!==la.userUID?O.pageGenerator.generateUserPage(la.userUID,la.userInfo.firstName):"/user/sign_in"},la.userInfo.firstName,",")," ","start your review of ".concat(B.title," ").concat(void 0!==B.series?"(".concat(B.series.name," #").concat(B.seriesInstance,")"):null)):r.a.createElement("span",null,"Start your review of ".concat(B.title," ").concat(void 0!==B.series?"(".concat(B.series.name," #").concat(B.seriesInstance,")"):null)),r.a.createElement("div",{className:"start-your-review-section-right-stars-write"},r.a.createElement("div",{className:"start-your-review-section-right-stars"},r.a.createElement("div",{className:Re>0?"interactive-star big on":"interactive-star big",title:"did not like it",onMouseOver:function(e){return Me(1)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(1)}}),r.a.createElement("div",{className:Re>1?"interactive-star big on":"interactive-star big",title:"it was ok",onMouseOver:function(e){return Me(2)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(2)}}),r.a.createElement("div",{className:Re>2?"interactive-star big on":"interactive-star big",title:"liked it",onMouseOver:function(e){return Me(3)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(3)}}),r.a.createElement("div",{className:Re>3?"interactive-star big on":"interactive-star big",title:"really liked it",onMouseOver:function(e){return Me(4)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(4)}}),r.a.createElement("div",{className:Re>4?"interactive-star big on":"interactive-star big",title:"it was amazing",onMouseOver:function(e){return Me(5)},onMouseLeave:function(e){return Me(void 0===B.userRating?0:B.userRating)},onClick:function(){return fa(5)}})),r.a.createElement("a",{href:void 0!==la.userUID&&null!==la.userUID?O.pageGenerator.generateWriteReviewPageForBook(B.id):"/user/sign_in",className:"write-review-button"},"Write a review")))):null,Ba=M?B.reviews.filter((function(e){return 0!==rt?e.rating===rt:lt?!(ht.length>0)||e.text.includes(ht):e.edition===B.id})).sort((function(e,t){return"oldest"===dt?e.date-t.date:"newest"===dt?t.date-e.date:0})).map((function(e,t){return r.a.createElement("div",{className:"book-page-review-instance",key:t},r.a.createElement("img",{className:"book-page-review-instance-profile-image",src:void 0!==e.profileImage?e.profileImage:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.userName}),r.a.createElement("div",{className:"book-page-review-instance-right"},r.a.createElement("div",{className:"book-page-review-instance-right-top-line"},r.a.createElement("span",{className:"book-page-review-instance-user-rated"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(e.user,e.userName.split(" ")[0])},e.userName),r.a.createElement("span",null,"\xa0rated it"),r.a.createElement("div",{className:"review-instance-stars"},r.a.createElement("div",{className:e.rating>=1?"static-star small full":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=2?"static-star small full":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=3?"static-star small full":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=4?"static-star small full":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=5?"static-star small full":"static-star small empty"}))),r.a.createElement("a",{className:"book-page-review-instance-date",href:O.pageGenerator.generateReviewPage(e.id)},Object(L.a)(e.date,"MMM dd, yyyy"))),void 0!==e.recommendsItFor?r.a.createElement("span",{className:"recommends-it-for"},"Recommends it for:"," ",r.a.createElement("span",{className:"recommends-it-for-answer"},e.recommendsItFor)):null,void 0!==e.shelves?r.a.createElement("span",{className:"book-page-review-instance-shelves"},"Shelves:"," ",r.a.createElement("span",{className:"book-page-review-instance-shelves-answer"},e.shelves.map((function(t,a){return r.a.createElement("span",{key:a},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.user,e.userName.split(" ")[0],[t])},t),a!==e.shelves.length-1?", ":null)})))):null,r.a.createElement("div",{className:"review-main-body-container"},r.a.createElement("p",{className:_e.includes(t)?"book-page-review-main-body full":"book-page-review-main-body"},e.text),Qe[t]?r.a.createElement("button",{className:"review-show-more",onClick:function(e){qe((function(e){return e.includes(t)?e.filter((function(e){return e!==t})):e.concat([t])}))}},_e.includes(t)?"(less)":"...more"):null),r.a.createElement("div",{className:"book-page-review-bottom"},e.numberOfLikes>0?r.a.createElement("a",{className:"book-page-review-likes",href:O.pageGenerator.generateReviewLikesPage(e.id)},e.numberOfLikes," likes"):null,e.numberOfLikes>0?r.a.createElement("span",{className:"black-dot"},"\xb7"):null,r.a.createElement("button",{className:"book-page-review-like-button",onClick:function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.likeUnlikeReview(la.userUID,e.id,a);case 2:P((function(t){return Object(m.a)(Object(m.a)({},t),{},{reviews:t.reviews.map((function(t){return t.id!==e.id?t:Object(m.a)(Object(m.a)({},t),{},{likedByUser:!t.likedByUser})}))})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},e.likedByUser?"Unlike":"Like"),r.a.createElement("span",{className:"black-dot"},"\xb7"),r.a.createElement("a",{className:"book-page-review-see-review",href:O.pageGenerator.generateReviewPage(e.id)},"see review"))))})):null,Pa=M?r.a.createElement("div",{className:"book-page-community-reviews"},r.a.createElement("div",{className:"book-page-community-reviews-top"},r.a.createElement("span",{className:"book-page-community-reviews-title"},"COMMUNITY REVIEWS"),r.a.createElement("span",{className:"book-page-community-reviews-showing"},0===B.reviews.length?"Showing 0-0":B.reviews.length<30?"Showing 1-".concat(B.reviews.length):"Showing 1-30")),r.a.createElement("div",{className:"ratings-section"},r.a.createElement("div",{className:"ratings-section-top"},ka(!1)),r.a.createElement("div",{className:"ratings-section-bottom"},r.a.createElement("div",{className:"ratings-section-bottom-left"},r.a.createElement("div",{className:"ratings-section-bottom-left-wrapper",onMouseOver:function(e){Ze(!0),tt(!1)},onMouseLeave:function(e){(e.clientX>document.getElementsByClassName("ratings-section-bottom-left-wrapper")[0].getBoundingClientRect().left+400||e.clientY>document.getElementsByClassName("ratings-section-bottom-left-wrapper")[0].getBoundingClientRect().bottom+15)&&Ze(!1)}},r.a.createElement("span",{className:"ratings-section-bottom-left-filters-title"},"Filters"),r.a.createElement("div",{className:Ke?"reviews-filter-dialog-box":"reviews-filter-dialog-box hidden"},r.a.createElement("div",{className:"dialog-box-tip"}),r.a.createElement("div",{className:"rating-filters"},r.a.createElement("button",{className:"all-filter",onClick:function(e){return ot(0)}},"all (".concat(B.reviews.length,")")),r.a.createElement("span",{className:"filter-separator"},"|"),r.a.createElement("button",{className:"five-star-filter",onClick:function(e){return ot(5)}},r.a.createElement("span",null,r.a.createElement("span",{className:"filter-button-stars"},"5 stars "),r.a.createElement("span",{className:"filter-button-amount"},"(".concat(B.reviews.filter((function(e){return 5===e.rating})).length,")")))),r.a.createElement("span",{className:"filter-separator"},"|"),r.a.createElement("button",{className:"four-star-filter",onClick:function(e){return ot(4)}},r.a.createElement("span",null,r.a.createElement("span",{className:"filter-button-stars"},"4 stars "),r.a.createElement("span",{className:"filter-button-amount"},"(".concat(B.reviews.filter((function(e){return 4===e.rating})).length,")")))),r.a.createElement("span",{className:"filter-separator"},"|"),r.a.createElement("button",{className:"three-star-filter",onClick:function(e){return ot(3)}},r.a.createElement("span",null,r.a.createElement("span",{className:"filter-button-stars"},"3 stars "),r.a.createElement("span",{className:"filter-button-amount"},"(".concat(B.reviews.filter((function(e){return 3===e.rating})).length,")")))),r.a.createElement("span",{className:"filter-separator"},"|"),r.a.createElement("button",{className:"two-star-filter",onClick:function(e){return ot(2)}},r.a.createElement("span",null,r.a.createElement("span",{className:"filter-button-stars"},"2 stars "),r.a.createElement("span",{className:"filter-button-amount"},"(".concat(B.reviews.filter((function(e){return 2===e.rating})).length,")")))),r.a.createElement("span",{className:"filter-separator"},"|"),r.a.createElement("button",{className:"one-star-filter",onClick:function(e){return ot(1)}},r.a.createElement("span",null,r.a.createElement("span",{className:"filter-button-stars"},"1 star "),r.a.createElement("span",{className:"filter-button-amount"},"(".concat(B.reviews.filter((function(e){return 1===e.rating})).length,")"))))),r.a.createElement("div",{className:"edition-filters"},r.a.createElement("span",{className:"edition-filters-title"},"editions:"),r.a.createElement("button",{className:"all-editions-filter",onClick:function(e){return it(!0)}},"all"),r.a.createElement("span",{className:"filter-separator"},"|"),r.a.createElement("button",{className:"this-edition-filter",onClick:function(e){return it(!1)}},"this edition")))),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("div",{onMouseOver:function(e){tt(!0),Ze(!1)},onMouseLeave:function(e){(e.clientX>document.getElementsByClassName("ratings-section-bottom-left-wrapper-two")[0].getBoundingClientRect().right+10||e.clientY>document.getElementsByClassName("ratings-section-bottom-left-wrapper")[0].getBoundingClientRect().bottom+10)&&tt(!1)},className:"ratings-section-bottom-left-wrapper-two"},r.a.createElement("span",{className:"ratings-section-bottom-left-sort-title"},"Sort order"),r.a.createElement("div",{className:et?"reviews-sort-dialog-box":"reviews-sort-dialog-box hidden"},r.a.createElement("div",{className:"dialog-box-tip"}),r.a.createElement("button",{className:"sort-review-default-button",onClick:function(e){return pt("default")}},"Default"),r.a.createElement("span",{className:"filter-separator"},"|"),r.a.createElement("button",{className:"sort-review-newest-button",onClick:function(e){return pt("newest")}},"Newest"),r.a.createElement("span",{className:"filter-separator"},"|"),r.a.createElement("button",{className:"sort-review-oldest-button",onClick:function(e){return pt("oldest")}},"Oldest")))),r.a.createElement("div",{className:"ratings-section-bottom-right"},r.a.createElement("input",{className:"book-page-review-search-box",type:"text",value:Ge,onChange:function(e){return Le(e.target.value)},placeholder:"Search review text",disabled:rt>0||!lt,onKeyDown:function(e){13===e.keyCode&&Ge.length>0&&bt(Ge)}}),r.a.createElement("button",{className:"review-search-box-magnifying-glass",onClick:function(e){Ge.length>0&&bt(Ge)}})))),r.a.createElement("div",{className:"reviews-section"},B.reviews.filter((function(e){return void 0!==la.UID&&e.user===la.UID})).length>0?null:Sa,r.a.createElement("div",{className:"book-page-reviews-section-review-list"},rt>0||!lt||ht.length>0?rt>0&&0===Ba.length?r.a.createElement("span",{className:"review-filter-message"},r.a.createElement("span",null,"There are 0 reviews rated ",r.a.createElement("b",null,rt," stars"),"."," "),r.a.createElement("button",{className:"clear-review-filters-button",onClick:function(e){ot(0),it(!0),bt("")}},"Clear filters")):rt>0?r.a.createElement("span",{className:"review-filter-message"},r.a.createElement("span",null,"Displaying 1-",Ba.length>=30?30:Ba.length," of"," ",Ba.length," reviews rated ",r.a.createElement("b",null,rt," stars"),", sorted by"," ",r.a.createElement("b",null,dt.charAt(0).toUpperCase()+dt.slice(1)),"."," "),r.a.createElement("button",{className:"clear-review-filters-button",onClick:function(e){ot(0),it(!0),bt("")}},"Clear filters")):lt||0!==Ba.length?lt?ht.length>0&&0===Ba.length?r.a.createElement("span",{className:"review-filter-message"},r.a.createElement("span",null,"There are 0 reviews that mention ",r.a.createElement("b",null,'"',ht,'"'),"."," "),r.a.createElement("button",{className:"clear-review-filters-button",onClick:function(e){ot(0),it(!0),bt("")}},"Clear filters")):r.a.createElement("span",{className:"review-filter-message"},r.a.createElement("span",null,"Displaying 1-",Ba.length>=30?30:Ba.length," of"," ",Ba.length," reviews that mention"," "),r.a.createElement("b",null,'"',ht,'"'),", sorted by"," ",r.a.createElement("b",null,dt.charAt(0).toUpperCase()+dt.slice(1)),"."," ",r.a.createElement("button",{className:"clear-review-filters-button",onClick:function(e){ot(0),it(!0),bt("")}},"Clear filters")):r.a.createElement("span",{className:"review-filter-message"},r.a.createElement("span",null,"Displaying 1-",Ba.length>=30?30:Ba.length," of"," ",Ba.length," reviews for ",r.a.createElement("b",null,"this edition"),", sorted by"," ",r.a.createElement("b",null,dt.charAt(0).toUpperCase()+dt.slice(1)),"."," "),r.a.createElement("button",{className:"clear-review-filters-button",onClick:function(e){ot(0),it(!0),bt("")}},"Clear filters")):r.a.createElement("span",{className:"review-filter-message"},r.a.createElement("span",null,"There are 0 reviews for ",r.a.createElement("b",null,"this edition"),"."," "),r.a.createElement("button",{className:"clear-review-filters-button",onClick:function(e){ot(0),it(!0),bt("")}},"Clear filters")):null,Ba.length>0?Ba:r.a.createElement("div",{className:"no-matching-reviews"},r.a.createElement("span",null,"No matching reviews."))))):null,Ca=r.a.createElement("div",{className:"book-page-main-content-left"},ja,Ia,Pa),Aa=M?r.a.createElement("div",{className:"book-page-main-content-right-top"},r.a.createElement("button",{className:"recommend-book-button",onClick:function(e){Ft(!0),Bt(!0)},ref:p},"Recommend it"),r.a.createElement("span",{className:"book-page-main-content-right-top-separator"},"|"),r.a.createElement("a",{href:O.pageGenerator.generateBookStatsPage(B.id),className:"book-page-book-stats-a"},"Stats")):null,Ua=M&&B.alsoEnjoyedBooks.length>0?r.a.createElement("div",{className:"book-page-readers-also-enjoyed"},r.a.createElement("div",{className:"book-page-readers-also-enjoyed-main"},r.a.createElement("span",null,"READERS ALSO ENJOYED"),r.a.createElement("div",{className:"book-page-readers-also-enjoyed-selection"},r.a.createElement("div",{className:"book-page-readers-also-enjoyed-main-list"},r.a.createElement("div",{className:"book-page-readers-also-enjoyed-main-list-contents",style:{transform:"translate(".concat(ae,"px)")}},B.alsoEnjoyedBooks.map((function(e,t){return r.a.createElement("a",{key:t,className:"book-page-also-enjoyed-book-a",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))})))),r.a.createElement("button",{className:ae<0?"book-page-readers-also-enjoyed-back-button":"book-page-readers-also-enjoyed-back-button hidden",onClick:function(e){ne((function(e){var t=document.getElementsByClassName("book-page-readers-also-enjoyed-forward-button")[0];return e<-250?(t.classList.remove("hidden"),e+250):0}))}}),r.a.createElement("button",{className:"book-page-readers-also-enjoyed-forward-button",onClick:function(e){ne((function(e){var t=document.getElementsByClassName("book-page-readers-also-enjoyed-forward-button")[0],a=document.getElementsByClassName("book-page-readers-also-enjoyed-main-list")[0].offsetWidth,n=document.getElementsByClassName("book-page-readers-also-enjoyed-main-list-contents")[0].scrollWidth;return 0===e||e>250-n+a?e-250:(t.classList.add("hidden"),-n+a)}))}}))),r.a.createElement("a",{className:"book-page-readers-also-enjoyed-similar-books-a",href:O.pageGenerator.generateSimilarBooksPage(B.id,B.title)},"See similar books...")):null,Ra=M?r.a.createElement("div",{className:"book-page-genres"},r.a.createElement("div",{className:"book-page-genres-main"},r.a.createElement("div",{className:"book-page-genres-title-area"},r.a.createElement("a",{className:"book-page-genres-title-a",href:O.pageGenerator.generateBookTopShelvesPage(B.id)},"GENRES")),r.a.createElement("div",{className:"book-page-genres-list"},B.genres.map((function(e,t){return r.a.createElement("div",{className:t===B.genres.length-1?"book-page-genres-list-cell last":"book-page-genres-list-cell",key:t},r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(e.genre),className:"genre-name"},e.genre.charAt(0).toUpperCase()+e.genre.slice(1)),r.a.createElement("a",{href:O.pageGenerator.generateBookGenreShelfPage(B.id,B.title,e.genre),className:"user-count"},e.userCount," users"))})))),r.a.createElement("a",{className:"book-page-genres-see-top-shelves",href:O.pageGenerator.generateBookTopShelvesPage(B.id)},"See top shelves...")):null,Ma=M?r.a.createElement("div",{className:"author-about-section"},r.a.createElement("div",{className:"author-about-section-title-area"},r.a.createElement("a",{className:"author-about-section-title-a",href:B.authorPages[0]},"ABOUT ".concat(B.authorNames[0].toUpperCase()))),r.a.createElement("div",{className:"author-about-section-preview"},r.a.createElement("div",{className:"author-about-section-preview-top"},r.a.createElement("a",{href:B.authorPages[0]},r.a.createElement("img",{src:void 0!==B.mainAuthorPicture?B.mainAuthorPicture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:B.authorNames[0]})),r.a.createElement("div",{className:"author-about-section-preview-right"},r.a.createElement("div",{className:"author-about-section-preview-name"},r.a.createElement("a",{href:B.authorPages[0]},B.authorNames[0]),B.authorIsMember?r.a.createElement("div",{className:"goodreads-seal"}):null),r.a.createElement("span",{className:"author-about-section-preview-follower-count"},B.authorFollowerCount," followers"),r.a.createElement("button",{className:kt?"book-page-follow-author-button loading":"book-page-follow-author-button",onMouseOver:function(e){B.userIsFollowingAuthor&&(document.getElementsByClassName("book-page-follow-author-button")[0].innerHTML="Unfollow")},onMouseOut:function(e){B.userIsFollowingAuthor&&(document.getElementsByClassName("book-page-follow-author-button")[0].innerHTML="Following")},onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wt(!0),e.next=3,O.followUnfollowAuthor(la.userUID,B.mainAuthorId,a);case 3:wt(!1),P((function(e){return Object(m.a)(Object(m.a)({},e),{},{userIsFollowingAuthor:!e.userIsFollowingAuthor})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B.userIsFollowingAuthor?"Following":"Follow Author"))),r.a.createElement("div",{className:"author-about-section-about-wrapper"},void 0!==B.mainAuthorAbout?r.a.createElement("div",{className:se?"author-about-section-about-full":"author-about-section-about"},r.a.createElement("p",{className:"main-author-about-p",ref:s},B.mainAuthorAbout)):null,N>162?r.a.createElement("button",{className:"author-about-show-more",onClick:function(e){ce((function(e){return!e}))}},se?"(less)":"...more"):null))):null,Da=M?r.a.createElement("div",{className:"book-page-books-by-author"},r.a.createElement("div",{className:"book-page-books-by-author-main"},r.a.createElement("div",{className:"book-page-books-by-author-main-title-area"},r.a.createElement("a",{className:"book-page-books-by-author-a",href:B.booksByAuthorPage},"BOOKS BY ".concat(B.authorNames[0].toUpperCase()))),r.a.createElement("div",{className:"book-page-books-by-author-main-list"},B.publishedBooksByAuthor.map((function(e,t){return r.a.createElement("a",{key:t,href:e.page},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.id}))})))),r.a.createElement("a",{className:"book-page-books-by-author-more",href:B.booksByAuthorPage},"More...")):null,Fa=M&&B.articles.length>0?r.a.createElement("div",{className:"book-page-articles"},r.a.createElement("div",{className:"book-page-articles-title-area"},r.a.createElement("span",{className:"book-page-articles-title"},"ARTICLES FEATURING THIS BOOK")),r.a.createElement("div",{className:"book-page-articles-article"},void 0!==B.articles[0].image?r.a.createElement("img",{className:"book-page-article-image",src:B.articles[0].image,alt:B.articles[0].title}):null,r.a.createElement("a",{className:"book-page-article-title-a",href:O.pageGenerator.generateArticlePage(B.articles[0].id,B.articles[0].title)},B.articles[0].title),r.a.createElement("p",{className:"book-page-article-content"},B.articles[0].content),r.a.createElement("a",{className:"book-page-article-read-more-a",href:O.pageGenerator.generateArticlePage(B.articles[0].id,B.articles[0].title)},"Read more..."),r.a.createElement("div",{className:"book-page-articles-article-bottom"},r.a.createElement("span",null,"".concat(B.articles[0].likeCount," likes")),r.a.createElement("span",null,"\xb7"),r.a.createElement("span",null,"".concat(B.articles[0].commentCount," comments"))))):null,Ga=M?Math.floor(Math.random()*B.quizQuestions.length):-1,La=M?B.quizQuestions.length>0?r.a.createElement("div",{className:"book-page-quiz-section"},r.a.createElement("div",{className:"book-page-quiz-section-title-area"},r.a.createElement("a",{className:"book-page-quiz-question-a",href:O.pageGenerator.generateBookTriviaPage(B.id,B.title)},"QUIZ QUESTION")),r.a.createElement("div",{className:"book-page-quiz-question-main"},r.a.createElement("a",{className:"book-page-quiz-title-a",href:B.quizQuestions[Ga].quizPage},B.quizQuestions[Ga].quizTitle),r.a.createElement("span",{className:"book-page-quiz-description"},B.quizQuestions[Ga].quizDescription),r.a.createElement("div",{className:"book-page-quiz-question-main-actual-question"},r.a.createElement("span",null,B.quizQuestions[Ga].question),B.quizQuestions[Ga].options.map((function(e,t){return r.a.createElement("div",{className:"book-page-quiz-answer",key:t},r.a.createElement("input",{id:"quiz-radio-".concat(t),type:"radio",checked:z===t,value:e,onChange:function(e){Y(t)}}),r.a.createElement("label",{htmlFor:"quiz-radio-".concat(t)},e))})))),r.a.createElement("a",{className:"book-page-quiz-question-take",href:B.quizQuestions[Ga].quizPage},"Take this quizz...")):r.a.createElement("div",{className:"book-page-quiz-section"},r.a.createElement("div",{className:"book-page-quiz-section-title-area"},r.a.createElement("a",{className:"book-page-quiz-question-a",href:O.pageGenerator.generateBookTriviaPage(B.id,B.title)},"QUIZZES ABOUT ".concat(B.title.toUpperCase(),":..."))),r.a.createElement("span",{className:"book-page-no-quizzes-yet-span"},"No quizzes yet."," ",r.a.createElement("a",{className:"book-page-add-quizzes-now-a",href:O.pageGenerator.generateBookTriviaPage(B.id,B.title)},"Add some now \xbb"))):null,Ta=M&&B.quotes.length>0?r.a.createElement("div",{className:"book-page-quotes-section"},r.a.createElement("div",{className:"book-page-quotes-section-title-area"},r.a.createElement("a",{className:"book-page-quotes-section-a",href:B.quotesPage},"QUOTES FROM ".concat(B.title.toUpperCase(),":..."))),r.a.createElement("div",{className:"book-info-quotes-section-main"},B.quotes.map((function(e,t){return r.a.createElement("span",{className:"book-page-quotes-section-quote",key:t},'"'.concat(e.text,'" \u2013 '),r.a.createElement("a",{href:e.page},"".concat(e.likeCount," likes")))}))),r.a.createElement("a",{className:"book-info-quotes-more-quotes",href:B.quotesPage},"More quotes...")):null,Wa=r.a.createElement("div",{className:"book-page-main-content-right"},Aa,Ua,Ra,Ma,Da,Fa,La,Ta),_a=M?r.a.createElement("div",{className:"book-page-main-content"},Ca,Wa):null,qa=M?r.a.createElement("div",{className:Ot?"cover-picture-box":"cover-picture-box hidden",ref:i},r.a.createElement("button",{className:"window-close-button",onClick:function(e){return xt(!1)}}),r.a.createElement("img",{src:B.cover,alt:B.title,className:"book-info-book-cover-enlarged"})):null,za=M?r.a.createElement("div",{className:St?"recommend-window":"recommend-window hidden",ref:d},r.a.createElement("button",{className:"window-close-button",onClick:function(e){return Bt(!1)}}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"recommend-window-top-area"},r.a.createElement("div",{className:"recommend-window-top-area-left"},r.a.createElement("span",null,"Recommend ",r.a.createElement("i",null,B.title)," to your friends"),r.a.createElement("div",{className:"searchbox-area"},r.a.createElement("input",{type:"search",placeholder:"Search by name",value:At,onChange:function(e){return Ut(e.target.value)}}),r.a.createElement("button",{className:At.length>0?"clear-button":"clear-button hidden",onClick:function(e){Ut("")}}))),r.a.createElement("div",{className:"recommend-window-top-area-right"},r.a.createElement("img",{src:void 0!==B.cover?B.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:B.title}))),r.a.createElement("div",{className:"recommend-window-bottom-area"},Dt?r.a.createElement("img",{className:"loading-spinner",src:"https://s.gr-assets.com/assets/spinner.gif",alt:"Loading"}):Tt.filter((function(e){return e.firstName.includes(At)})).map((function(e,t){return r.a.createElement("div",{className:"recommend-window-friend-info",key:t},r.a.createElement("div",{className:"recommend-window-friend-info-left"},r.a.createElement("img",{src:void 0!==e.profileImage?e.profileImage:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.firstName})),r.a.createElement("div",{className:"recommend-window-friend-info-right"},r.a.createElement("div",{className:"recommend-window-friend-info-right-top"},!zt[t]||Xt[t]?r.a.createElement("span",{className:"friend-name-span"},e.firstName):r.a.createElement("textarea",{type:"text",className:"friend-recommend-message-input",placeholder:"".concat(e.firstName," would like this book because..."),value:Ht[t],onChange:function(e){var a=e.target.value;Jt((function(e){return e.map((function(e,n){return n===t?a:e}))}))}})),r.a.createElement("div",{className:"recommend-window-friend-info-right-bottom"},r.a.createElement("button",{className:"recommend-to-friend-button",onClick:function(){var a=Object(h.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(Xt[t]){a.next=4;break}return a.next=3,O.recommendBook(la.userUID,e.id,B.id,Ht[t]);case 3:$t((function(e){return e.map((function(e,a){return a===t?!e:e}))}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},"Recommend"),Xt[t]?null:r.a.createElement("button",{className:"clear-message-button",onClick:function(e){return Yt((function(e){return e.map((function(e,a){return a===t?!e:e}))}))}},zt[t]?"clear message":"add message")),Xt[t]?r.a.createElement("div",{className:"recommended-message-area"},r.a.createElement("div",{className:"check-banner"}),r.a.createElement("span",null,"Recommended")):null))}))))):null;return r.a.createElement("div",{className:"book-page"},r.a.createElement(A,null),_a,qa,za,r.a.createElement(S,null),r.a.createElement("div",{className:Ot||St?"page-mask":"page-mask hidden"}))}),W=(a(86),function(e){var t=Object(c.f)(),a=Object(n.useState)(""),o=Object(b.a)(a,2),s=o[0],l=o[1];return r.a.createElement("div",{className:"sign-in-up-page",id:"forgot-password-page"},r.a.createElement("a",{className:"sign-in-up-page-home-link",href:O.pageGenerator.generateHomePage()},r.a.createElement("img",{src:"https://www.goodreads.com/assets/layout/goodreads_logo_324-a908b923dc3ed9b7a13f3da4d1ffb2df.png",alt:"Goodreads"})),r.a.createElement("div",{className:"sign-in-up-page-main-card"},r.a.createElement("div",{className:"sign-in-up-page-main-card-top"},r.a.createElement("h2",null,"Reset your password.")),r.a.createElement("form",{className:"sign-in-up-page-main-card-center"},r.a.createElement("label",{htmlFor:"sign-in-page-email"},"Email address"),r.a.createElement("input",{type:"email",className:"sign-in-up-page-email",id:"sign-in-page-email",placeholder:"you@yours.com",value:s,onChange:function(e){return l(e.target.value)}}),r.a.createElement("div",{className:"sign-in-up-page-main-card-center-bottom-buttons"},r.a.createElement("button",{className:"sign-in-up-page-sign-in",onClick:Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.resetPassword(s);case 2:t.push({pathname:"/user/sign_in"});case 3:case"end":return e.stop()}}),e)})))},"Reset password"),r.a.createElement("a",{className:"sign-in-up-page-forgot-password",href:O.pageGenerator.generateSignInPage()},"Cancel")))),r.a.createElement("div",{id:"forgot-password-not-a-member"},r.a.createElement("span",null,"Not a member?"),r.a.createElement("a",{className:"sign-in-up-page-sign-in",href:O.pageGenerator.generateSignUpPage()},"Sign up")),r.a.createElement("div",{className:"sign-in-up-page-bottom-section"}))}),_=a(11),q=a(163),z=a(158),Y=a(159),Q=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(null),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(null),E=Object(b.a)(v,2),k=E[0],w=E[1],y=Object(n.useState)(null),N=Object(b.a)(y,2),x=N[0],j=N[1],I=Object(n.useState)(!1),S=Object(b.a)(I,2),B=S[0],P=S[1],C=Object(n.useState)(!1),A=Object(b.a)(C,2),U=A[0],M=A[1],D=Object(n.useState)(!1),F=Object(b.a)(D,2),G=F[0],T=F[1],W=Object(n.useState)(!1),Q=Object(b.a)(W,2),V=Q[0],H=Q[1],J=Object(n.useState)(!1),K=Object(b.a)(J,2),Z=K[0],X=K[1];Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.allEditions){t.next=6;break}return t.next=3,Object(R.trackPromise)(O.queryStatusUpdatesForRootBook(e.bookId));case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,Object(R.trackPromise)(O.queryStatusUpdatesForBook(e.bookId));case 8:t.t0=t.sent;case 9:a=t.t0,s(a),u(!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.bookId,e.allEditions]);var $={start:Object(q.a)(new Date,170),end:new Date},ee=i?Object(z.a)($).map((function(e){return o.filter((function(t){return"add-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],te=i?Object(z.a)($).map((function(e){return o.filter((function(t){return"rate-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],ae=i?Object(z.a)($).map((function(e){return o.filter((function(t){return"review-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],ne=i?Object(z.a)($).map((function(e){return o.filter((function(t){return"add-book"===t.action&&"to-read"===t.shelf&&Object(Y.a)(t.date.toDate(),e)})).length})):[],re=i?Math.max(Math.max.apply(Math,Object(_.a)(ee)),Math.max.apply(Math,Object(_.a)(te)),Math.max.apply(Math,Object(_.a)(ae)),Math.max.apply(Math,Object(_.a)(ne))):0,oe=0!==re?279/re:0,se=i?Object(z.a)($).map((function(e,t){var a=o.filter((function(t){return"add-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-oe*a]})):[],ce=i?Object(z.a)($).map((function(e,t){var a=o.filter((function(t){return"rate-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-oe*a]})):[],le=i?Object(z.a)($).map((function(e,t){var a=o.filter((function(t){return"review-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-oe*a]})):[],ie=i?Object(z.a)($).map((function(e,t){var a=o.filter((function(t){return"add-book"===t.action&&"to-read"===t.shelf&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-oe*a]})):[],ue=se.reduce((function(e,t,a){return 0===a?"M "+t[0]+", "+t[1]+"\n":e+"L "+t[0]+", "+t[1]+"\n"}),""),me=ce.reduce((function(e,t,a){return 0===a?"M "+t[0]+", "+t[1]+"\n":e+"L "+t[0]+", "+t[1]+"\n"}),""),de=le.reduce((function(e,t,a){return 0===a?"M "+t[0]+", "+t[1]+"\n":e+"L "+t[0]+", "+t[1]+"\n"}),""),pe=ie.reduce((function(e,t,a){return 0===a?"M "+t[0]+", "+t[1]+"\n":e+"L "+t[0]+", "+t[1]+"\n"}),""),fe=r.a.createElement("svg",{width:"620",height:"400",onMouseOver:function(e){var t=document.querySelector("svg").createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=t.matrixTransform(document.querySelector("svg").getScreenCTM().inverse()),n=se.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),o=ce.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),s=le.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),c=ie.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5}));if(null!==p&&Math.abs(document.getElementsByClassName("click-circle-inside")[0].getAttribute("cx")-a.x)<=5&&Math.abs(document.getElementsByClassName("click-circle-inside")[0].getAttribute("cy")-a.y)||!(n.length>0||o.length>0||s.length>0||c.length>0))w(null),j(null);else{var l=n.length>0?"added":o.length>0?"ratings":s.length>0?"reviews":"to-read",i=n.length>0?"#3366cc":o.length>0?"#dc3912":s.length>0?"#ff9900":"#109618",u=n.length>0?n:o.length>0?o:s.length>0?s:c,m=Object(z.a)($)[Math.round((u[0][0]-57.1)/3.2)],d=n.length>0?ee[Math.round((u[0][0]-57.1)/3.2)]:o.length>0?te[Math.round((u[0][0]-57.1)/3.2)]:s.length>0?ae[Math.round((u[0][0]-57.1)/3.2)]:ne[Math.round((u[0][0]-57.1)/3.2)],f=r.a.createElement("g",null,r.a.createElement("circle",{cx:u[0][0],cy:u[0][1],r:"4.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.25",fillOpacity:"1",fill:"none"}),r.a.createElement("circle",{cx:u[0][0],cy:u[0][1],r:"5.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("circle",{cx:u[0][0],cy:u[0][1],r:"6.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"}),r.a.createElement("circle",{cx:u[0][0],cy:u[0][1],r:"4",stroke:"none",strokeWidth:"0",fill:i}));w(f);var g=r.a.createElement("g",{className:"chart-tooltip"},r.a.createElement("path",{d:u[0][0]+54.13<606&&u[0][1]-59.5>9?"\n\t\t\t\t\t\t\tM ".concat(u[0][0]-27.87,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-28.87,", ").concat(u[0][1]-14.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-28.87,", ").concat(u[0][1]-58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-27.87,", ").concat(u[0][1]-59.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+53.13,", ").concat(u[0][1]-59.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+54.13,", ").concat(u[0][1]-58.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+54.13,", ").concat(u[0][1]-14.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+53.13,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+25.13,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0],", ").concat(u[0][1],"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+12.13,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"):u[0][0]+54.13<606?"\n\t\t\t\t\t\t\tM ".concat(u[0][0]-32.26,", ").concat(u[0][1]+85.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-33.26,", ").concat(u[0][1]+84.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-33.26,", ").concat(u[0][1]+40.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-32.26,", ").concat(u[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+12.74,", ").concat(u[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0],", ").concat(u[0][1],"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+25.74,", ").concat(u[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+58.74,", ").concat(u[0][1]+39.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+59.74,", ").concat(u[0][1]+40.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+59.74,", ").concat(u[0][1]+84.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+58.74,", ").concat(u[0][1]+85.73,"\n\t\t\t\t\t\t\tZ\t\n\t\t\t\t\t\t"):u[0][1]-59.5>9?"\n\t\t\t\t\t\t\tM ".concat(u[0][0]-62.612,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-63.612,", ").concat(u[0][1]-14.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-63.612,", ").concat(u[0][1]-58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-62.612,", ").concat(u[0][1]-59.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+18.388,", ").concat(u[0][1]-59.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+19.388,", ").concat(u[0][1]-58.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+19.388,", ").concat(u[0][1]-14.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+18.388,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-26.312,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0],", ").concat(u[0][1],"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-13.742,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"):"\n\t\t\t\t\t\t\tM ".concat(u[0][0]-53.34,", ").concat(u[0][1]+58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-54.34,", ").concat(u[0][1]+57.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-54.34,", ").concat(u[0][1]+13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-53.34,", ").concat(u[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-26.34,", ").concat(u[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0],", ").concat(u[0][1],"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-13.34,", ").concat(u[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+27.66,", ").concat(u[0][1]+12.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+28.66,", ").concat(u[0][1]+13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+28.66,", ").concat(u[0][1]+57.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+27.66,", ").concat(u[0][1]+58.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"),stroke:"#cccccc",strokeWidth:"1",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:u[0][0]+54.13<606?u[0][0]-21.37:u[0][1]-59.5>9?u[0][0]-56.612:u[0][0]-46.84,y:u[0][1]-59.5>9?u[0][1]-40.95:u[0][0]+54.13<606?u[0][1]+58.73:u[0][1]+31.05,fontFamily:"Arial",fontSize:"13",fontWeight:"bold",stroke:"none",strokeWidth:"0",fill:"#000000"},Object(L.a)(m,"yyyy-MM-dd"))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:u[0][0]+54.13<606?u[0][0]-21.37:u[0][1]-59.5>9?u[0][0]-56.612:u[0][0]-46.84,y:u[0][1]-59.5>9?u[0][1]-23.95:u[0][0]+54.13<606?u[0][1]+75.73:u[0][1]+48.05,fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#000000"},"".concat(l,":")),r.a.createElement("text",{textAnchor:"start",x:u[0][0]+54.13<606?u[0][0]+27.63:u[0][1]-59.5>9?u[0][0]-7.112:u[0][0]+3.34,y:u[0][1]-59.5>9?u[0][1]-23.95:u[0][0]+54.13<606?u[0][1]+75.73:u[0][1]+48.05,fontFamily:"Arial",fontSize:"13",fontWeight:"bold",stroke:"none",strokeWidth:"0",fill:"#000000"},d)));j(g)}},onClick:function(e){var t=document.querySelector("svg").createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=t.matrixTransform(document.querySelector("svg").getScreenCTM().inverse()),n=se.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),o=ce.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),s=le.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),c=ie.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5}));if(n.length>0||o.length>0||s.length>0||c.length>0){var l=n.length>0?"#3366cc":o.length>0?"#dc3912":s.length>0?"#ff9900":"#109618",i=n.length>0?n:o.length>0?o:s.length>0?s:c,u=r.a.createElement("g",null,r.a.createElement("circle",{cx:i[0][0],cy:i[0][1],r:"6.5",stroke:l,strokeWidth:"1",fill:"#ffffff"}),r.a.createElement("circle",{className:"click-circle-inside",cx:i[0][0],cy:i[0][1],r:"4",stroke:"none",strokeWidth:"0",fill:l}));w(null),f(u)}}},r.a.createElement("defs",{id:"abstract-renderer-id-0"},r.a.createElement("clipPath",{id:"abstract-renderer-id-1"},r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"280"})),r.a.createElement("filter",{id:"abstract-renderer-id-2"},r.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),r.a.createElement("feOffset",{dx:"1",dy:"1"}),r.a.createElement("feComponentTransfer",null,r.a.createElement("feFuncA",{type:"linear",slope:"0.1"})),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",null),r.a.createElement("feMergeNode",{in:"SourceGraphic"})))),r.a.createElement("rect",{x:"0",y:"0",width:"620",height:"400",stroke:"none",strokeWidth:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("rect",{x:"156",y:"365",width:"347",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",{onMouseOver:function(e){return P(!0)},onMouseLeave:function(e){return P(!1)}},r.a.createElement("rect",{x:"156",y:"365",width:"67",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"187",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"added")),r.a.createElement("path",{d:"M156,371.5L182,371.5",stroke:"#3366cc",strokeWidth:"2",fillOpacity:"1",fill:"none"})),r.a.createElement("g",{onMouseOver:function(e){return M(!0)},onMouseLeave:function(e){return M(!1)}},r.a.createElement("rect",{x:"244",y:"365",width:"70",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"275",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"ratings")),r.a.createElement("path",{d:"M244,371.5L270,371.5",stroke:"#dc3912",strokeWidth:"2",fillOpacity:"1",fill:"none"})),r.a.createElement("g",{onMouseOver:function(e){return T(!0)},onMouseLeave:function(e){return T(!1)}},r.a.createElement("rect",{x:"335",y:"365",width:"75",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"366",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"reviews")),r.a.createElement("path",{d:"M335,371.5L361,371.5",stroke:"#ff9900",strokeWidth:"2",fillOpacity:"1",fill:"none"})),r.a.createElement("g",{onMouseOver:function(e){return H(!0)},onMouseLeave:function(e){return H(!1)}},r.a.createElement("rect",{x:"431",y:"365",width:"72",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"462",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"to-read")),r.a.createElement("path",{d:"M431,371.5L457,371.5",stroke:"#109618",strokeWidth:"2",fillOpacity:"1",fill:"none"}))),r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"280",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",{clipPath:"url(/book/stats?id=".concat(e.bookId,"#abstract-renderer-id-1)")},r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"289",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"233",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"177",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"122",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"66",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"261",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"205",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"150",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"94",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"38",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"})),r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"289",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#333333"})),r.a.createElement("g",null,B?r.a.createElement("g",null,r.a.createElement("path",{d:ue,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:ue,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:ue,stroke:"#3366cc",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"added-path"})):r.a.createElement("path",{d:ue,stroke:"#3366cc",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"added-path"}),U?r.a.createElement("g",null,r.a.createElement("path",{d:me,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:me,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:me,stroke:"#dc3912",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"ratings-path"})):r.a.createElement("path",{d:me,stroke:"#dc3912",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"ratings-path"}),G?r.a.createElement("g",null,r.a.createElement("path",{d:de,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:de,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:de,stroke:"#ff9900",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"reviews-path"})):r.a.createElement("path",{d:de,stroke:"#ff9900",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"reviews-path"}),V?r.a.createElement("g",null,r.a.createElement("path",{d:pe,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:pe,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:pe,stroke:"#109618",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"to-read-path"})):r.a.createElement("path",{d:pe,stroke:"#109618",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"to-read-path"}))),r.a.createElement("g",null,p,k),r.a.createElement("g",null,Object(z.a)($).filter((function(e,t){return t%10===0})).map((function(e,t){return r.a.createElement("g",{key:t},r.a.createElement("text",{textAnchor:"end",x:59.38+32.1*t,y:"308.44",fontFamily:"Arial",fontSize:"13",transform:"rotate(-30 ".concat(59.38+32.1*t," 308.44)"),stroke:"none",strokeWidth:"0",fill:"#222222"},Object(L.a)(e,"yyyy-MM-dd")))})),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"294.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},"0")),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"238.25",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==re?Math.round(re/5):Math.round(re/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"182.45",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==re?Math.round(2*re/5):Math.round(2*re/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"126.65",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==re?Math.round(3*re/5):Math.round(3*re/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"70.85",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==re?Math.round(4*re/5):Math.round(4*re/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"15.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},re)))),r.a.createElement("g",null,x)),ge=r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"books added")),r.a.createElement("tr",null,r.a.createElement("th",null,"date"),r.a.createElement("th",null,"added"),r.a.createElement("th",null,"ratings"),r.a.createElement("th",null,"reviews"),r.a.createElement("th",null,"to-read"))),r.a.createElement("tbody",null,Object(z.a)($).map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,Object(L.a)(e,"yyyy-MM-dd")),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-book"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"rate-book"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-review"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-book"===t.action&&"to-read"===t.shelf})).length))})))),he=i?r.a.createElement("div",{className:"book-stats-page-bottom-section"},r.a.createElement("button",{className:"stats-breakdown-button",onClick:function(e){return X((function(e){return!e}))}},"Click here for breakdown"),r.a.createElement("div",{className:"chart-table"},Z?ge:null),r.a.createElement("span",null,"Note: This data corresponds to the date users most recently updated this book in their shelves.")):null;return i?r.a.createElement("div",{className:"chart"},fe,he):null},V=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(null),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(Array(171).fill(!1)),E=Object(b.a)(v,2),k=E[0],w=E[1],y=Object(n.useState)(Array(171).fill(!1)),N=Object(b.a)(y,2),x=N[0],j=N[1],I=Object(n.useState)(Array(171).fill(!1)),S=Object(b.a)(I,2),B=S[0],P=S[1],C=Object(n.useState)(Array(171).fill(!1)),A=Object(b.a)(C,2),U=A[0],M=A[1],D=Object(n.useState)(!1),F=Object(b.a)(D,2),G=F[0],T=F[1],W={start:Object(q.a)(new Date,170),end:new Date};Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.allEditions){t.next=6;break}return t.next=3,Object(R.trackPromise)(O.queryStatusUpdatesForRootBook(e.bookId));case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,Object(R.trackPromise)(O.queryStatusUpdatesForBook(e.bookId));case 8:t.t0=t.sent;case 9:a=t.t0,s(a),u(!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.bookId,e.allEditions]);var Q=i?Object(z.a)(W).map((function(e){return o.filter((function(t){return"add-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],V=i?Object(z.a)(W).map((function(e){return o.filter((function(t){return"rate-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],H=i?Object(z.a)(W).map((function(e){return o.filter((function(t){return"review-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],J=i?Object(z.a)(W).map((function(e){return o.filter((function(t){return"add-book"===t.action&&"to-read"===t.shelf&&Object(Y.a)(t.date.toDate(),e)})).length})):[],K=i?Math.max(Math.max.apply(Math,Object(_.a)(Q)),Math.max.apply(Math,Object(_.a)(V)),Math.max.apply(Math,Object(_.a)(H)),Math.max.apply(Math,Object(_.a)(J))):0,Z=0!==K?279/K:0,X=i?Object(z.a)(W).map((function(e,t){var a=o.filter((function(t){return"add-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-Z*a]})):[],$=i?Object(z.a)(W).map((function(e,t){var a=o.filter((function(t){return"rate-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[58.1+3.2*t,289.5-Z*a]})):[],ee=i?Object(z.a)(W).map((function(e,t){var a=o.filter((function(t){return"review-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[59.1+3.2*t,289.5-Z*a]})):[],te=i?Object(z.a)(W).map((function(e,t){var a=o.filter((function(t){return"add-book"===t.action&&"to-read"===t.shelf&&Object(Y.a)(t.date.toDate(),e)})).length;return[60.1+3.2*t,289.5-Z*a]})):[],ae=r.a.createElement("svg",{width:"620",height:"400",onMouseOver:function(e){var t=document.querySelector("svg").createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=t.matrixTransform(document.querySelector("svg").getScreenCTM().inverse()),n=X.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),o=$.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),s=ee.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),c=te.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5}));if(n.length>0||o.length>0||s.length>0||c.length>0){var l=n.length>0?"added":o.length>0?"ratings":s.length>0?"reviews":"to-read",i=n.length>0?n:o.length>0?o:s.length>0?s:c,u=Object(z.a)(W)[Math.round((i[0][0]-57.1)/3.2)],m=n.length>0?Q[Math.round((i[0][0]-57.1)/3.2)]:o.length>0?V[Math.round((i[0][0]-57.1)/3.2)]:s.length>0?H[Math.round((i[0][0]-57.1)/3.2)]:J[Math.round((i[0][0]-57.1)/3.2)],d=r.a.createElement("g",{className:"chart-tooltip"},r.a.createElement("path",{d:i[0][0]+54.13<606&&i[0][1]-59.5>9?"\n\t\t\t\t\t\t\tM ".concat(i[0][0]-27.87,", ").concat(i[0][1]-13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]-28.87,", ").concat(i[0][1]-14.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]-28.87,", ").concat(i[0][1]-58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]-27.87,", ").concat(i[0][1]-59.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+53.13,", ").concat(i[0][1]-59.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]+54.13,", ").concat(i[0][1]-58.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+54.13,", ").concat(i[0][1]-14.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]+53.13,", ").concat(i[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+25.13,", ").concat(i[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0],", ").concat(i[0][1],"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+12.13,", ").concat(i[0][1]-13.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"):i[0][0]+54.13<606?"\n\t\t\t\t\t\t\tM ".concat(i[0][0]-32.26,", ").concat(i[0][1]+85.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]-33.26,", ").concat(i[0][1]+84.73,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]-33.26,", ").concat(i[0][1]+40.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]-32.26,", ").concat(i[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+12.74,", ").concat(i[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(i[0][0],", ").concat(i[0][1],"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+25.74,", ").concat(i[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+58.74,", ").concat(i[0][1]+39.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]+59.74,", ").concat(i[0][1]+40.73,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+59.74,", ").concat(i[0][1]+84.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]+58.74,", ").concat(i[0][1]+85.73,"\n\t\t\t\t\t\t\tZ\t\n\t\t\t\t\t\t"):i[0][1]-59.5>9?"\n\t\t\t\t\t\t\tM ".concat(i[0][0]-62.612,", ").concat(i[0][1]-13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]-63.612,", ").concat(i[0][1]-14.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]-63.612,", ").concat(i[0][1]-58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]-62.612,", ").concat(i[0][1]-59.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+18.388,", ").concat(i[0][1]-59.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]+19.388,", ").concat(i[0][1]-58.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+19.388,", ").concat(i[0][1]-14.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]+18.388,", ").concat(i[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]-26.312,", ").concat(i[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0],", ").concat(i[0][1],"\n\t\t\t\t\t\t\tL ").concat(i[0][0]-13.742,", ").concat(i[0][1]-13.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"):"\n\t\t\t\t\t\t\tM ".concat(i[0][0]-53.34,", ").concat(i[0][1]+58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]-54.34,", ").concat(i[0][1]+57.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]-54.34,", ").concat(i[0][1]+13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]-53.34,", ").concat(i[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]-26.34,", ").concat(i[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0],", ").concat(i[0][1],"\n\t\t\t\t\t\t\tL ").concat(i[0][0]-13.34,", ").concat(i[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+27.66,", ").concat(i[0][1]+12.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]+28.66,", ").concat(i[0][1]+13.5,"\n\t\t\t\t\t\t\tL ").concat(i[0][0]+28.66,", ").concat(i[0][1]+57.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(i[0][0]+27.66,", ").concat(i[0][1]+58.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"),stroke:"#cccccc",strokeWidth:"1",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:i[0][0]+54.13<606?i[0][0]-21.37:i[0][1]-59.5>9?i[0][0]-56.612:i[0][0]-46.84,y:i[0][1]-59.5>9?i[0][1]-40.95:i[0][0]+54.13<606?i[0][1]+58.73:i[0][1]+31.05,fontFamily:"Arial",fontSize:"13",fontWeight:"bold",stroke:"none",strokeWidth:"0",fill:"#000000"},Object(L.a)(u,"yyyy-MM-dd"))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:i[0][0]+54.13<606?i[0][0]-21.37:i[0][1]-59.5>9?i[0][0]-56.612:i[0][0]-46.84,y:i[0][1]-59.5>9?i[0][1]-23.95:i[0][0]+54.13<606?i[0][1]+75.73:i[0][1]+48.05,fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#000000"},"".concat(l,":")),r.a.createElement("text",{textAnchor:"start",x:i[0][0]+54.13<606?i[0][0]+27.63:i[0][1]-59.5>9?i[0][0]-7.112:i[0][0]+3.34,y:i[0][1]-59.5>9?i[0][1]-23.95:i[0][0]+54.13<606?i[0][1]+75.73:i[0][1]+48.05,fontFamily:"Arial",fontSize:"13",fontWeight:"bold",stroke:"none",strokeWidth:"0",fill:"#000000"},m)));f(d)}else f(null)}},r.a.createElement("defs",{id:"abstract-renderer-id-0"},r.a.createElement("clipPath",{id:"abstract-renderer-id-1"},r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"280"})),r.a.createElement("filter",{id:"abstract-renderer-id-2"},r.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),r.a.createElement("feOffset",{dx:"1",dy:"1"}),r.a.createElement("feComponentTransfer",null,r.a.createElement("feFuncA",{type:"linear",slope:"0.1"})),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",null),r.a.createElement("feMergeNode",{in:"SourceGraphic"})))),r.a.createElement("rect",{x:"0",y:"0",width:"620",height:"400",stroke:"none",strokeWidth:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("rect",{x:"156",y:"365",width:"347",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",{onMouseOver:function(e){return w((function(e){return e.map((function(e,t){return!0}))}))},onMouseLeave:function(e){return w((function(e){return e.map((function(e,t){return!1}))}))}},r.a.createElement("rect",{x:"156",y:"365",width:"67",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"187",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"added")),r.a.createElement("rect",{x:"156",y:"365",width:"26",height:"13",stroke:"none",strokeWidth:"0",fill:"#3366cc"})),r.a.createElement("g",{onMouseOver:function(e){return j((function(e){return e.map((function(e,t){return!0}))}))},onMouseLeave:function(e){return j((function(e){return e.map((function(e,t){return!1}))}))}},r.a.createElement("rect",{x:"244",y:"365",width:"70",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"275",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"ratings")),r.a.createElement("rect",{x:"244",y:"365",width:"26",height:"13",stroke:"none",strokeWidth:"0",fill:"#dc3912"})),r.a.createElement("g",{onMouseOver:function(e){return P((function(e){return e.map((function(e,t){return!0}))}))},onMouseLeave:function(e){return P((function(e){return e.map((function(e,t){return!1}))}))}},r.a.createElement("rect",{x:"335",y:"365",width:"75",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"366",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"reviews")),r.a.createElement("rect",{x:"335",y:"365",width:"26",height:"13",stroke:"none",strokeWidth:"0",fill:"#ff9900"})),r.a.createElement("g",{onMouseOver:function(e){return M((function(e){return e.map((function(e,t){return!0}))}))},onMouseLeave:function(e){return M((function(e){return e.map((function(e,t){return!1}))}))}},r.a.createElement("rect",{x:"431",y:"365",width:"72",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"462",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"to-read")),r.a.createElement("rect",{x:"431",y:"365",width:"26",height:"13",stroke:"none",strokeWidth:"0",fill:"#109618"}))),r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"280",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",{clipPath:"url(/book/stats?id=".concat(e.bookId,"#abstract-renderer-id-1)")},r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"289",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"233",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"177",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"122",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"66",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"261",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"205",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"150",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"94",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"38",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"})),r.a.createElement("g",null,Q.map((function(e,t){return k[t]?r.a.createElement("g",{onMouseLeave:function(e){return w((function(e){return e.map((function(e,a){return a!==t&&e}))}))},key:t},r.a.createElement("rect",{x:57.5+3.2*t,y:289.5-e*Z,width:"0.5",height:e*Z,stroke:"none",strokeWidth:"0",fill:"#3366cc"}),r.a.createElement("rect",{x:57+3.2*t,y:289-e*Z,width:"1.5",height:e*Z+1,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:56+3.2*t,y:288-e*Z,width:"3.5",height:e*Z+3,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.15",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:55+3.2*t,y:287-e*Z,width:"5.5",height:e*Z+5,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"})):r.a.createElement("rect",{onMouseOver:function(e){return w((function(e){return e.map((function(e,a){return a===t}))}))},x:57.5+3.2*t,y:289.5-e*Z,width:"0.5",height:e*Z,stroke:"none",strokeWidth:"0",fill:"#3366cc",key:t})})),V.map((function(e,t){return x[t]?r.a.createElement("g",{onMouseLeave:function(e){return j((function(e){return e.map((function(e,a){return a!==t&&e}))}))},key:2*t},r.a.createElement("rect",{x:58.5+3.2*t,y:289.5-e*Z,width:"0.5",height:e*Z,stroke:"none",strokeWidth:"0",fill:"#dc3912"}),r.a.createElement("rect",{x:58+3.2*t,y:289-e*Z,width:"1.5",height:e*Z+1,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:57+3.2*t,y:288-e*Z,width:"3.5",height:e*Z+3,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.15",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:56+3.2*t,y:287-e*Z,width:"5.5",height:e*Z+5,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"})):r.a.createElement("rect",{onMouseOver:function(e){return j((function(e){return e.map((function(e,a){return a===t}))}))},x:58.5+3.2*t,y:289.5-e*Z,width:"0.5",height:e*Z,stroke:"none",strokeWidth:"0",fill:"#dc3912",key:2*t})})),H.map((function(e,t){return B[t]?r.a.createElement("g",{onMouseLeave:function(e){return P((function(e){return e.map((function(e,a){return a!==t&&e}))}))},key:3*t},r.a.createElement("rect",{x:59.5+3.2*t,y:289.5-e*Z,width:"0.5",height:e*Z,stroke:"none",strokeWidth:"0",fill:"#ff9900"}),r.a.createElement("rect",{x:59+3.2*t,y:289-e*Z,width:"1.5",height:e*Z+1,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:58+3.2*t,y:288-e*Z,width:"3.5",height:e*Z+3,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.15",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:57+3.2*t,y:287-e*Z,width:"5.5",height:e*Z+5,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"})):r.a.createElement("rect",{onMouseOver:function(e){return P((function(e){return e.map((function(e,a){return a===t}))}))},x:59.5+3.2*t,y:289.5-e*Z,width:"0.5",height:e*Z,stroke:"none",strokeWidth:"0",fill:"#ff9900",key:3*t})})),J.map((function(e,t){return U[t]?r.a.createElement("g",{onMouseLeave:function(e){return M((function(e){return e.map((function(e,a){return a!==t&&e}))}))},key:4*t},r.a.createElement("rect",{x:60.5+3.2*t,y:289.5-e*Z,width:"0.5",height:e*Z,stroke:"none",strokeWidth:"0",fill:"#109618"}),r.a.createElement("rect",{x:60+3.2*t,y:289-e*Z,width:"1.5",height:e*Z+1,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:59+3.2*t,y:288-e*Z,width:"3.5",height:e*Z+3,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.15",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:58+3.2*t,y:287-e*Z,width:"5.5",height:e*Z+5,stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"})):r.a.createElement("rect",{onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t}))}))},x:60.5+3.2*t,y:289.5-e*Z,width:"0.5",height:e*Z,stroke:"none",strokeWidth:"0",fill:"#109618",key:4*t})}))),r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"289",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#333333"}))),r.a.createElement("g",null),r.a.createElement("g",null,Object(z.a)(W).filter((function(e,t){return t%10===0})).map((function(e,t){return r.a.createElement("g",{key:t},r.a.createElement("text",{textAnchor:"end",x:59.38+32.1*t,y:"308.44",fontFamily:"Arial",fontSize:"13",transform:"rotate(-30 ".concat(59.38+32.1*t," 308.44)"),stroke:"none",strokeWidth:"0",fill:"#222222"},Object(L.a)(e,"yyyy-MM-dd")))})),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"294.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},"0")),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"238.25",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(K/5):Math.round(K/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"182.45",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(2*K/5):Math.round(2*K/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"126.65",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(3*K/5):Math.round(3*K/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"70.85",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(4*K/5):Math.round(4*K/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"15.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},K)))),r.a.createElement("g",null,p)),ne=r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"books added")),r.a.createElement("tr",null,r.a.createElement("th",null,"date"),r.a.createElement("th",null,"added"),r.a.createElement("th",null,"ratings"),r.a.createElement("th",null,"reviews"),r.a.createElement("th",null,"to-read"))),r.a.createElement("tbody",null,Object(z.a)(W).map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,Object(L.a)(e,"yyyy-MM-dd")),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-book"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"rate-book"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-review"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-book"===t.action&&"to-read"===t.shelf})).length))})))),re=i?r.a.createElement("div",{className:"book-stats-page-bottom-section"},r.a.createElement("button",{className:"stats-breakdown-button",onClick:function(e){return T((function(e){return!e}))}},"Click here for breakdown"),r.a.createElement("div",{className:"chart-table"},G?ne:null),r.a.createElement("span",null,"Note: This data corresponds to the date users most recently updated this book in their shelves.")):null;return i?r.a.createElement("div",{className:"chart"},ae,re):null},H=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(null),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(null),E=Object(b.a)(v,2),k=E[0],w=E[1],y=Object(n.useState)(null),N=Object(b.a)(y,2),x=N[0],j=N[1],I=Object(n.useState)(!1),S=Object(b.a)(I,2),B=S[0],P=S[1],C=Object(n.useState)(!1),A=Object(b.a)(C,2),U=A[0],M=A[1],D=Object(n.useState)(!1),F=Object(b.a)(D,2),G=F[0],T=F[1],W=Object(n.useState)(!1),Q=Object(b.a)(W,2),V=Q[0],H=Q[1],J=Object(n.useState)(!1),K=Object(b.a)(J,2),Z=K[0],X=K[1];Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.allEditions){t.next=6;break}return t.next=3,Object(R.trackPromise)(O.queryStatusUpdatesForRootBook(e.bookId));case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,Object(R.trackPromise)(O.queryStatusUpdatesForBook(e.bookId));case 8:t.t0=t.sent;case 9:a=t.t0,s(a),u(!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.bookId,e.allEditions]);var $={start:Object(q.a)(new Date,170),end:new Date},ee=i?Object(z.a)($).map((function(e){return o.filter((function(t){return"add-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],te=i?Object(z.a)($).map((function(e){return o.filter((function(t){return"rate-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],ae=i?Object(z.a)($).map((function(e){return o.filter((function(t){return"review-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],ne=i?Object(z.a)($).map((function(e){return o.filter((function(t){return"add-book"===t.action&&"to-read"===t.shelf&&Object(Y.a)(t.date.toDate(),e)})).length})):[],re=i?Math.max(Math.max.apply(Math,Object(_.a)(ee)),Math.max.apply(Math,Object(_.a)(te)),Math.max.apply(Math,Object(_.a)(ae)),Math.max.apply(Math,Object(_.a)(ne))):0,oe=0!==re?279/re:0,se=i?Object(z.a)($).map((function(e,t){var a=o.filter((function(t){return"add-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-oe*a]})):[],ce=i?Object(z.a)($).map((function(e,t){var a=o.filter((function(t){return"rate-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-oe*a]})):[],le=i?Object(z.a)($).map((function(e,t){var a=o.filter((function(t){return"review-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-oe*a]})):[],ie=i?Object(z.a)($).map((function(e,t){var a=o.filter((function(t){return"add-book"===t.action&&"to-read"===t.shelf&&Object(Y.a)(t.date.toDate(),e)})).length;return[57.1+3.2*t,289.5-oe*a]})):[],ue=se.reduce((function(e,t,a){return 0===a?"M "+t[0]+", "+t[1]+"\n":e+"L "+t[0]+", "+t[1]+"\n"}),""),me=ce.reduce((function(e,t,a){return 0===a?"M "+t[0]+", "+t[1]+"\n":e+"L "+t[0]+", "+t[1]+"\n"}),""),de=le.reduce((function(e,t,a){return 0===a?"M "+t[0]+", "+t[1]+"\n":e+"L "+t[0]+", "+t[1]+"\n"}),""),pe=ie.reduce((function(e,t,a){return 0===a?"M "+t[0]+", "+t[1]+"\n":e+"L "+t[0]+", "+t[1]+"\n"}),""),fe=r.a.createElement("svg",{width:"620",height:"400",onMouseOver:function(e){var t=document.querySelector("svg").createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=t.matrixTransform(document.querySelector("svg").getScreenCTM().inverse()),n=se.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),o=ce.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),s=le.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),c=ie.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5}));if(null!==p&&Math.abs(document.getElementsByClassName("click-circle-inside")[0].getAttribute("cx")-a.x)<=5&&Math.abs(document.getElementsByClassName("click-circle-inside")[0].getAttribute("cy")-a.y)||!(n.length>0||o.length>0||s.length>0||c.length>0))w(null),j(null);else{var l=n.length>0?"added":o.length>0?"ratings":s.length>0?"reviews":"to-read",i=n.length>0?"#3366cc":o.length>0?"#dc3912":s.length>0?"#ff9900":"#109618",u=n.length>0?n:o.length>0?o:s.length>0?s:c,m=Object(z.a)($)[Math.round((u[0][0]-57.1)/3.2)],d=n.length>0?ee[Math.round((u[0][0]-57.1)/3.2)]:o.length>0?te[Math.round((u[0][0]-57.1)/3.2)]:s.length>0?ae[Math.round((u[0][0]-57.1)/3.2)]:ne[Math.round((u[0][0]-57.1)/3.2)],f=r.a.createElement("g",null,r.a.createElement("circle",{cx:u[0][0],cy:u[0][1],r:"4.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.25",fillOpacity:"1",fill:"none"}),r.a.createElement("circle",{cx:u[0][0],cy:u[0][1],r:"5.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("circle",{cx:u[0][0],cy:u[0][1],r:"6.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"}),r.a.createElement("circle",{cx:u[0][0],cy:u[0][1],r:"4",stroke:"none",strokeWidth:"0",fill:i}));w(f);var g=r.a.createElement("g",{className:"chart-tooltip"},r.a.createElement("path",{d:u[0][0]+54.13<606&&u[0][1]-59.5>9?"\n\t\t\t\t\t\t\tM ".concat(u[0][0]-27.87,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-28.87,", ").concat(u[0][1]-14.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-28.87,", ").concat(u[0][1]-58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-27.87,", ").concat(u[0][1]-59.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+53.13,", ").concat(u[0][1]-59.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+54.13,", ").concat(u[0][1]-58.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+54.13,", ").concat(u[0][1]-14.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+53.13,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+25.13,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0],", ").concat(u[0][1],"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+12.13,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"):u[0][0]+54.13<606?"\n\t\t\t\t\t\t\tM ".concat(u[0][0]-32.26,", ").concat(u[0][1]+85.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-33.26,", ").concat(u[0][1]+84.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-33.26,", ").concat(u[0][1]+40.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-32.26,", ").concat(u[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+12.74,", ").concat(u[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0],", ").concat(u[0][1],"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+25.74,", ").concat(u[0][1]+39.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+58.74,", ").concat(u[0][1]+39.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+59.74,", ").concat(u[0][1]+40.73,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+59.74,", ").concat(u[0][1]+84.73,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+58.74,", ").concat(u[0][1]+85.73,"\n\t\t\t\t\t\t\tZ\t\n\t\t\t\t\t\t"):u[0][1]-59.5>9?"\n\t\t\t\t\t\t\tM ".concat(u[0][0]-62.612,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-63.612,", ").concat(u[0][1]-14.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-63.612,", ").concat(u[0][1]-58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-62.612,", ").concat(u[0][1]-59.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+18.388,", ").concat(u[0][1]-59.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+19.388,", ").concat(u[0][1]-58.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+19.388,", ").concat(u[0][1]-14.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+18.388,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-26.312,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0],", ").concat(u[0][1],"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-13.742,", ").concat(u[0][1]-13.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"):"\n\t\t\t\t\t\t\tM ".concat(u[0][0]-53.34,", ").concat(u[0][1]+58.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-54.34,", ").concat(u[0][1]+57.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-54.34,", ").concat(u[0][1]+13.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]-53.34,", ").concat(u[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-26.34,", ").concat(u[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0],", ").concat(u[0][1],"\n\t\t\t\t\t\t\tL ").concat(u[0][0]-13.34,", ").concat(u[0][1]+12.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+27.66,", ").concat(u[0][1]+12.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+28.66,", ").concat(u[0][1]+13.5,"\n\t\t\t\t\t\t\tL ").concat(u[0][0]+28.66,", ").concat(u[0][1]+57.5,"\n\t\t\t\t\t\t\tA 1, 1, 0, 0, 1, ").concat(u[0][0]+27.66,", ").concat(u[0][1]+58.5,"\n\t\t\t\t\t\t\tZ\n\t\t\t\t\t\t"),stroke:"#cccccc",strokeWidth:"1",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:u[0][0]+54.13<606?u[0][0]-21.37:u[0][1]-59.5>9?u[0][0]-56.612:u[0][0]-46.84,y:u[0][1]-59.5>9?u[0][1]-40.95:u[0][0]+54.13<606?u[0][1]+58.73:u[0][1]+31.05,fontFamily:"Arial",fontSize:"13",fontWeight:"bold",stroke:"none",strokeWidth:"0",fill:"#000000"},Object(L.a)(m,"yyyy-MM-dd"))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:u[0][0]+54.13<606?u[0][0]-21.37:u[0][1]-59.5>9?u[0][0]-56.612:u[0][0]-46.84,y:u[0][1]-59.5>9?u[0][1]-23.95:u[0][0]+54.13<606?u[0][1]+75.73:u[0][1]+48.05,fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#000000"},"".concat(l,":")),r.a.createElement("text",{textAnchor:"start",x:u[0][0]+54.13<606?u[0][0]+27.63:u[0][1]-59.5>9?u[0][0]-7.112:u[0][0]+3.34,y:u[0][1]-59.5>9?u[0][1]-23.95:u[0][0]+54.13<606?u[0][1]+75.73:u[0][1]+48.05,fontFamily:"Arial",fontSize:"13",fontWeight:"bold",stroke:"none",strokeWidth:"0",fill:"#000000"},d)));j(g)}},onClick:function(e){var t=document.querySelector("svg").createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=t.matrixTransform(document.querySelector("svg").getScreenCTM().inverse()),n=se.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),o=ce.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),s=le.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),c=ie.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5}));if(n.length>0||o.length>0||s.length>0||c.length>0){var l=n.length>0?"#3366cc":o.length>0?"#dc3912":s.length>0?"#ff9900":"#109618",i=n.length>0?n:o.length>0?o:s.length>0?s:c,u=r.a.createElement("g",null,r.a.createElement("circle",{cx:i[0][0],cy:i[0][1],r:"6.5",stroke:l,strokeWidth:"1",fill:"#ffffff"}),r.a.createElement("circle",{className:"click-circle-inside",cx:i[0][0],cy:i[0][1],r:"4",stroke:"none",strokeWidth:"0",fill:l}));w(null),f(u)}}},r.a.createElement("defs",{id:"abstract-renderer-id-0"},r.a.createElement("clipPath",{id:"abstract-renderer-id-1"},r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"280"})),r.a.createElement("filter",{id:"abstract-renderer-id-2"},r.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),r.a.createElement("feOffset",{dx:"1",dy:"1"}),r.a.createElement("feComponentTransfer",null,r.a.createElement("feFuncA",{type:"linear",slope:"0.1"})),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",null),r.a.createElement("feMergeNode",{in:"SourceGraphic"})))),r.a.createElement("rect",{x:"0",y:"0",width:"620",height:"400",stroke:"none",strokeWidth:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("rect",{x:"156",y:"365",width:"347",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",{onMouseOver:function(e){return P(!0)},onMouseLeave:function(e){return P(!1)}},r.a.createElement("rect",{x:"156",y:"365",width:"67",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"187",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"added")),r.a.createElement("rect",{x:"156",y:"371.5",width:"26",height:"6.5",stroke:"none",strokeWidth:"0","fill-opacity":"0.3",fill:"#3366cc"}),r.a.createElement("path",{d:"M156,371.5L182,371.5",stroke:"#3366cc",strokeWidth:"2",fillOpacity:"1",fill:"none"})),r.a.createElement("g",{onMouseOver:function(e){return M(!0)},onMouseLeave:function(e){return M(!1)}},r.a.createElement("rect",{x:"244",y:"365",width:"70",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"275",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"ratings")),r.a.createElement("rect",{x:"244",y:"371.5",width:"26",height:"6.5",stroke:"none",strokeWidth:"0","fill-opacity":"0.3",fill:"#dc3912"}),r.a.createElement("path",{d:"M244,371.5L270,371.5",stroke:"#dc3912",strokeWidth:"2",fillOpacity:"1",fill:"none"})),r.a.createElement("g",{onMouseOver:function(e){return T(!0)},onMouseLeave:function(e){return T(!1)}},r.a.createElement("rect",{x:"335",y:"365",width:"75",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"366",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"reviews")),r.a.createElement("rect",{x:"335",y:"371.5",width:"26",height:"6.5",stroke:"none",strokeWidth:"0","fill-opacity":"0.3",fill:"#ff9900"}),r.a.createElement("path",{d:"M335,371.5L361,371.5",stroke:"#ff9900",strokeWidth:"2",fillOpacity:"1",fill:"none"})),r.a.createElement("g",{onMouseOver:function(e){return H(!0)},onMouseLeave:function(e){return H(!1)}},r.a.createElement("rect",{x:"431",y:"365",width:"72",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"462",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"to-read")),r.a.createElement("rect",{x:"431",y:"371.5",width:"26",height:"6.5",stroke:"none",strokeWidth:"0","fill-opacity":"0.3",fill:"#109618"}),r.a.createElement("path",{d:"M431,371.5L457,371.5",stroke:"#109618",strokeWidth:"2",fillOpacity:"1",fill:"none"}))),r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"280",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",{clipPath:"url(/book/stats?id=".concat(e.bookId,"#abstract-renderer-id-1)")},r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"289",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"233",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"177",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"122",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"66",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"55",y:"261",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"205",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"150",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"94",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"55",y:"38",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#ebebeb"})),r.a.createElement("g",null,B?r.a.createElement("g",null,r.a.createElement("path",{d:ue,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:ue,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:ue,stroke:"#3366cc",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"added-path"})):r.a.createElement("path",{d:ue,stroke:"#3366cc",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"added-path"}),U?r.a.createElement("g",null,r.a.createElement("path",{d:me,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:me,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:me,stroke:"#dc3912",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"ratings-path"})):r.a.createElement("path",{d:me,stroke:"#dc3912",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"ratings-path"}),G?r.a.createElement("g",null,r.a.createElement("path",{d:de,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:de,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:de,stroke:"#ff9900",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"reviews-path"})):r.a.createElement("path",{d:de,stroke:"#ff9900",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"reviews-path"}),V?r.a.createElement("g",null,r.a.createElement("path",{d:pe,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:pe,stroke:"#000000",strokeWidth:"4",strokeOpacity:"0.1",fillOpacity:"1",fill:"none"}),r.a.createElement("path",{d:pe,stroke:"#109618",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"to-read-path"})):r.a.createElement("path",{d:pe,stroke:"#109618",strokeWidth:"2",fillOpacity:"1",fill:"none",className:"to-read-path"})),r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"289",width:"550",height:"1",stroke:"none",strokeWidth:"0",fill:"#333333"})),r.a.createElement("g",null,r.a.createElement("path",{d:ue,stroke:"none",strokeWidth:"0",fillOpacity:"0.3",fill:"#3366cc",className:"added-path"}),r.a.createElement("path",{d:me,stroke:"none",strokeWidth:"0",fillOpacity:"0.3",fill:"#dc3912",className:"ratings-path"}),r.a.createElement("path",{d:de,stroke:"none",strokeWidth:"0",fillOpacity:"0.3",fill:"ff9900",className:"reviews-path"}),r.a.createElement("path",{d:pe,stroke:"none",strokeWidth:"0",fillOpacity:"0.3",fill:"#109618",className:"to-read-path"}))),r.a.createElement("g",null,p,k),r.a.createElement("g",null,Object(z.a)($).filter((function(e,t){return t%10===0})).map((function(e,t){return r.a.createElement("g",{key:t},r.a.createElement("text",{textAnchor:"end",x:59.38+32.1*t,y:"308.44",fontFamily:"Arial",fontSize:"13",transform:"rotate(-30 ".concat(59.38+32.1*t," 308.44)"),stroke:"none",strokeWidth:"0",fill:"#222222"},Object(L.a)(e,"yyyy-MM-dd")))})),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"294.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},"0")),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"238.25",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==re?Math.round(re/5):Math.round(re/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"182.45",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==re?Math.round(2*re/5):Math.round(2*re/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"126.65",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==re?Math.round(3*re/5):Math.round(3*re/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"70.85",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==re?Math.round(4*re/5):Math.round(4*re/5,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"end",x:"42",y:"15.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},re)))),r.a.createElement("g",null,x)),ge=r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"books added")),r.a.createElement("tr",null,r.a.createElement("th",null,"date"),r.a.createElement("th",null,"added"),r.a.createElement("th",null,"ratings"),r.a.createElement("th",null,"reviews"),r.a.createElement("th",null,"to-read"))),r.a.createElement("tbody",null,Object(z.a)($).map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,Object(L.a)(e,"yyyy-MM-dd")),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-book"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"rate-book"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-review"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-book"===t.action&&"to-read"===t.shelf})).length))})))),he=i?r.a.createElement("div",{className:"book-stats-page-bottom-section"},r.a.createElement("button",{className:"stats-breakdown-button",onClick:function(e){return X((function(e){return!e}))}},"Click here for breakdown"),r.a.createElement("div",{className:"chart-table"},Z?ge:null),r.a.createElement("span",null,"Note: This data corresponds to the date users most recently updated this book in their shelves.")):null;return i?r.a.createElement("div",{className:"chart"},fe,he):null},J=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(null),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(Array(171).fill(!1)),E=Object(b.a)(v,2),k=E[0],w=E[1],y=Object(n.useState)(Array(171).fill(!1)),N=Object(b.a)(y,2),x=N[0],j=N[1],I=Object(n.useState)(Array(171).fill(!1)),S=Object(b.a)(I,2),B=S[0],P=S[1],C=Object(n.useState)(Array(171).fill(!1)),A=Object(b.a)(C,2),U=A[0],M=A[1],D=Object(n.useState)(!1),F=Object(b.a)(D,2),G=F[0],T=F[1],W={start:Object(q.a)(new Date,170),end:new Date};Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.allEditions){t.next=6;break}return t.next=3,Object(R.trackPromise)(O.queryStatusUpdatesForRootBook(e.bookId));case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,Object(R.trackPromise)(O.queryStatusUpdatesForBook(e.bookId));case 8:t.t0=t.sent;case 9:a=t.t0,s(a),u(!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.bookId,e.allEditions]);var Q=i?Object(z.a)(W).map((function(e){return o.filter((function(t){return"add-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],V=i?Object(z.a)(W).map((function(e){return o.filter((function(t){return"rate-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],H=i?Object(z.a)(W).map((function(e){return o.filter((function(t){return"review-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length})):[],J=i?Object(z.a)(W).map((function(e){return o.filter((function(t){return"add-book"===t.action&&"to-read"===t.shelf&&Object(Y.a)(t.date.toDate(),e)})).length})):[],K=i?Math.max(Math.max.apply(Math,Object(_.a)(Q)),Math.max.apply(Math,Object(_.a)(V)),Math.max.apply(Math,Object(_.a)(H)),Math.max.apply(Math,Object(_.a)(J))):0,Z=0!==K?608/K:0,X=i?Object(z.a)(W).map((function(e,t){var a=o.filter((function(t){return"add-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[56+Z*a,10.5+2*t]})):[],$=i?Object(z.a)(W).map((function(e,t){var a=o.filter((function(t){return"rate-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[56+Z*a,11.5+2*t]})):[],ee=i?Object(z.a)(W).map((function(e,t){var a=o.filter((function(t){return"review-book"===t.action&&Object(Y.a)(t.date.toDate(),e)})).length;return[56+Z*a,12.5+2*t]})):[],te=i?Object(z.a)(W).map((function(e,t){var a=o.filter((function(t){return"add-book"===t.action&&"to-read"===t.shelf&&Object(Y.a)(t.date.toDate(),e)})).length;return[56+Z*a,13.5+2*t]})):[],ae=r.a.createElement("svg",{width:"620",height:"400",onMouseOver:function(e){var t=document.querySelector("svg").createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=t.matrixTransform(document.querySelector("svg").getScreenCTM().inverse()),n=X.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),o=$.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),s=ee.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5})),c=te.filter((function(e){return Math.abs(e[0]-a.x)<=5&&Math.abs(e[1]-a.y)<=5}));if(n.length>0||o.length>0||s.length>0||c.length>0){var l=n.length>0?"added":o.length>0?"ratings":s.length>0?"reviews":"to-read",i=n.length>0?n:o.length>0?o:s.length>0?s:c,u=n.length>0?10.5:o.length>0?11.5:s.length>0?12.5:13.5,m=Object(z.a)(W)[Math.round((i[0][1]-u)/2)],d=n.length>0?Q[Math.round((i[0][1]-u)/2)]:o.length>0?V[Math.round((i[0][1]-u)/2)]:s.length>0?H[Math.round((i[0][1]-u)/2)]:J[Math.round((i[0][1]-u)/2)],p=r.a.createElement("g",{className:"chart-tooltip"},r.a.createElement("path",{d:i[0][0]+54.13<606&&i[0][1]-59.5>9?"\n                            M ".concat(i[0][0]-27.87,", ").concat(i[0][1]-13.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]-28.87,", ").concat(i[0][1]-14.5,"\n                            L ").concat(i[0][0]-28.87,", ").concat(i[0][1]-58.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]-27.87,", ").concat(i[0][1]-59.5,"\n                            L ").concat(i[0][0]+53.13,", ").concat(i[0][1]-59.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]+54.13,", ").concat(i[0][1]-58.5,"\n                            L ").concat(i[0][0]+54.13,", ").concat(i[0][1]-14.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]+53.13,", ").concat(i[0][1]-13.5,"\n                            L ").concat(i[0][0]+25.13,", ").concat(i[0][1]-13.5,"\n                            L ").concat(i[0][0],", ").concat(i[0][1],"\n                            L ").concat(i[0][0]+12.13,", ").concat(i[0][1]-13.5,"\n                            Z\n                        "):i[0][0]+54.13<606?"\n                            M ".concat(i[0][0]-32.26,", ").concat(i[0][1]+85.73,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]-33.26,", ").concat(i[0][1]+84.73,"\n                            L ").concat(i[0][0]-33.26,", ").concat(i[0][1]+40.73,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]-32.26,", ").concat(i[0][1]+39.73,"\n                            L ").concat(i[0][0]+12.74,", ").concat(i[0][1]+39.73,"\n                            L ").concat(i[0][0],", ").concat(i[0][1],"\n                            L ").concat(i[0][0]+25.74,", ").concat(i[0][1]+39.73,"\n                            L ").concat(i[0][0]+58.74,", ").concat(i[0][1]+39.73,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]+59.74,", ").concat(i[0][1]+40.73,"\n                            L ").concat(i[0][0]+59.74,", ").concat(i[0][1]+84.73,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]+58.74,", ").concat(i[0][1]+85.73,"\n                            Z\t\n                        "):i[0][1]-59.5>9?"\n                            M ".concat(i[0][0]-62.612,", ").concat(i[0][1]-13.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]-63.612,", ").concat(i[0][1]-14.5,"\n                            L ").concat(i[0][0]-63.612,", ").concat(i[0][1]-58.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]-62.612,", ").concat(i[0][1]-59.5,"\n                            L ").concat(i[0][0]+18.388,", ").concat(i[0][1]-59.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]+19.388,", ").concat(i[0][1]-58.5,"\n                            L ").concat(i[0][0]+19.388,", ").concat(i[0][1]-14.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]+18.388,", ").concat(i[0][1]-13.5,"\n                            L ").concat(i[0][0]-26.312,", ").concat(i[0][1]-13.5,"\n                            L ").concat(i[0][0],", ").concat(i[0][1],"\n                            L ").concat(i[0][0]-13.742,", ").concat(i[0][1]-13.5,"\n                            Z\n                        "):"\n                            M ".concat(i[0][0]-53.34,", ").concat(i[0][1]+58.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]-54.34,", ").concat(i[0][1]+57.5,"\n                            L ").concat(i[0][0]-54.34,", ").concat(i[0][1]+13.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]-53.34,", ").concat(i[0][1]+12.5,"\n                            L ").concat(i[0][0]-26.34,", ").concat(i[0][1]+12.5,"\n                            L ").concat(i[0][0],", ").concat(i[0][1],"\n                            L ").concat(i[0][0]-13.34,", ").concat(i[0][1]+12.5,"\n                            L ").concat(i[0][0]+27.66,", ").concat(i[0][1]+12.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]+28.66,", ").concat(i[0][1]+13.5,"\n                            L ").concat(i[0][0]+28.66,", ").concat(i[0][1]+57.5,"\n                            A 1, 1, 0, 0, 1, ").concat(i[0][0]+27.66,", ").concat(i[0][1]+58.5,"\n                            Z\n                        "),stroke:"#cccccc",strokeWidth:"1",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:i[0][0]+54.13<606?i[0][0]-21.37:i[0][1]-59.5>9?i[0][0]-56.612:i[0][0]-46.84,y:i[0][1]-59.5>9?i[0][1]-40.95:i[0][0]+54.13<606?i[0][1]+58.73:i[0][1]+31.05,fontFamily:"Arial",fontSize:"13",fontWeight:"bold",stroke:"none",strokeWidth:"0",fill:"#000000"},Object(L.a)(m,"yyyy-MM-dd"))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:i[0][0]+54.13<606?i[0][0]-21.37:i[0][1]-59.5>9?i[0][0]-56.612:i[0][0]-46.84,y:i[0][1]-59.5>9?i[0][1]-23.95:i[0][0]+54.13<606?i[0][1]+75.73:i[0][1]+48.05,fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#000000"},"".concat(l,":")),r.a.createElement("text",{textAnchor:"start",x:i[0][0]+54.13<606?i[0][0]+27.63:i[0][1]-59.5>9?i[0][0]-7.112:i[0][0]+3.34,y:i[0][1]-59.5>9?i[0][1]-23.95:i[0][0]+54.13<606?i[0][1]+75.73:i[0][1]+48.05,fontFamily:"Arial",fontSize:"13",fontWeight:"bold",stroke:"none",strokeWidth:"0",fill:"#000000"},d)));f(p)}else f(null)}},r.a.createElement("defs",{id:"abstract-renderer-id-0"},r.a.createElement("clipPath",{id:"abstract-renderer-id-1"},r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"280"})),r.a.createElement("filter",{id:"abstract-renderer-id-2"},r.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),r.a.createElement("feOffset",{dx:"1",dy:"1"}),r.a.createElement("feComponentTransfer",null,r.a.createElement("feFuncA",{type:"linear",slope:"0.1"})),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",null),r.a.createElement("feMergeNode",{in:"SourceGraphic"})))),r.a.createElement("rect",{x:"0",y:"0",width:"620",height:"400",stroke:"none",strokeWidth:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("rect",{x:"156",y:"365",width:"347",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",{onMouseOver:function(e){return w((function(e){return e.map((function(e,t){return!0}))}))},onMouseLeave:function(e){return w((function(e){return e.map((function(e,t){return!1}))}))}},r.a.createElement("rect",{x:"156",y:"365",width:"67",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"187",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"added")),r.a.createElement("rect",{x:"156",y:"365",width:"26",height:"13",stroke:"none",strokeWidth:"0",fill:"#3366cc"})),r.a.createElement("g",{onMouseOver:function(e){return j((function(e){return e.map((function(e,t){return!0}))}))},onMouseLeave:function(e){return j((function(e){return e.map((function(e,t){return!1}))}))}},r.a.createElement("rect",{x:"244",y:"365",width:"70",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"275",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"ratings")),r.a.createElement("rect",{x:"244",y:"365",width:"26",height:"13",stroke:"none",strokeWidth:"0",fill:"#dc3912"})),r.a.createElement("g",{onMouseOver:function(e){return P((function(e){return e.map((function(e,t){return!0}))}))},onMouseLeave:function(e){return P((function(e){return e.map((function(e,t){return!1}))}))}},r.a.createElement("rect",{x:"335",y:"365",width:"75",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"366",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"reviews")),r.a.createElement("rect",{x:"335",y:"365",width:"26",height:"13",stroke:"none",strokeWidth:"0",fill:"#ff9900"})),r.a.createElement("g",{onMouseOver:function(e){return M((function(e){return e.map((function(e,t){return!0}))}))},onMouseLeave:function(e){return M((function(e){return e.map((function(e,t){return!1}))}))}},r.a.createElement("rect",{x:"431",y:"365",width:"72",height:"13",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"start",x:"462",y:"376.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#222222"},"to-read")),r.a.createElement("rect",{x:"431",y:"365",width:"26",height:"13",stroke:"none",strokeWidth:"0",fill:"#109618"}))),r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"10",width:"550",height:"280",stroke:"none",strokeWidth:"0",fillOpacity:"0",fill:"#ffffff"}),r.a.createElement("g",{clipPath:"url(/book/stats?id=".concat(e.bookId,"#abstract-renderer-id-1)")},r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"147",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"238",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"330",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"421",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"513",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"604",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#cccccc"}),r.a.createElement("rect",{x:"101",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"192",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"284",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"375",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"467",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#ebebeb"}),r.a.createElement("rect",{x:"558",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#ebebeb"})),r.a.createElement("g",null,Q.map((function(e,t){return k[t]?r.a.createElement("g",{onMouseLeave:function(e){return w((function(e){return e.map((function(e,a){return a!==t&&e}))}))},key:t},r.a.createElement("rect",{x:"56",y:10.5+2*t,width:e*Z,height:"0.5",stroke:"none",strokeWidth:"0",fill:"#3366cc"}),r.a.createElement("rect",{x:"55.5",y:10+2*t,width:e*Z+1,height:"1.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:"54.5",y:9+2*t,width:e*Z+3,height:"3.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.15",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:"53.5",y:8+2*t,width:e*Z+5,height:"5.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"})):r.a.createElement("rect",{onMouseOver:function(e){return w((function(e){return e.map((function(e,a){return a===t}))}))},x:"56",y:10.5+2*t,width:e*Z,height:"0.5",stroke:"none",strokeWidth:"0",fill:"#3366cc",key:t})})),V.map((function(e,t){return x[t]?r.a.createElement("g",{onMouseLeave:function(e){return j((function(e){return e.map((function(e,a){return a!==t&&e}))}))},key:2*t},r.a.createElement("rect",{x:"56",y:11.5+2*t,width:e*Z,height:"0.5",stroke:"none",strokeWidth:"0",fill:"#dc3912"}),r.a.createElement("rect",{x:"55.5",y:11+2*t,width:e*Z+1,height:"1.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:"54.5",y:10+2*t,width:e*Z+3,height:"3.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.15",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:"53.5",y:9+2*t,width:e*Z+5,height:"5.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"})):r.a.createElement("rect",{onMouseOver:function(e){return j((function(e){return e.map((function(e,a){return a===t}))}))},x:"56",y:11.5+2*t,width:e*Z,height:"0.5",stroke:"none",strokeWidth:"0",fill:"#dc3912",key:2*t})})),H.map((function(e,t){return B[t]?r.a.createElement("g",{onMouseLeave:function(e){return P((function(e){return e.map((function(e,a){return a!==t&&e}))}))},key:3*t},r.a.createElement("rect",{x:"56",y:12.5+2*t,width:e*Z,height:"0.5",stroke:"none",strokeWidth:"0",fill:"#ff9900"}),r.a.createElement("rect",{x:"55.5",y:12+2*t,width:e*Z+1,height:"1.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:"54.5",y:11+2*t,width:e*Z+3,height:"3.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.15",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:"53.5",y:10+2*t,width:e*Z+5,height:"5.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"})):r.a.createElement("rect",{onMouseOver:function(e){return P((function(e){return e.map((function(e,a){return a===t}))}))},x:"56",y:12.5+2*t,width:e*Z,height:"0.5",stroke:"none",strokeWidth:"0",fill:"#ff9900",key:3*t})})),J.map((function(e,t){return U[t]?r.a.createElement("g",{onMouseLeave:function(e){return M((function(e){return e.map((function(e,a){return a!==t&&e}))}))},key:4*t},r.a.createElement("rect",{x:"56",y:13.5+2*t,width:e*Z,height:"0.5",stroke:"none",strokeWidth:"0",fill:"#109618"}),r.a.createElement("rect",{x:"55.5",y:13+2*t,width:e*Z+1,height:"1.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.3",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:"54.5",y:12+2*t,width:e*Z+3,height:"3.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.15",fillOpacity:"1",fill:"none"}),r.a.createElement("rect",{x:"53.5",y:11+2*t,width:e*Z+5,height:"5.5",stroke:"#000000",strokeWidth:"1",strokeOpacity:"0.05",fillOpacity:"1",fill:"none"})):r.a.createElement("rect",{onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t}))}))},x:"56",y:13.5+2*t,width:e*Z,height:"0.5",stroke:"none",strokeWidth:"0",fill:"#109618",key:4*t})}))),r.a.createElement("g",null,r.a.createElement("rect",{x:"55",y:"10",width:"1",height:"280",stroke:"none",strokeWidth:"0",fill:"#333333"}))),r.a.createElement("g",null),r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"middle",x:"55.5",y:"309.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},"0")),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"middle",x:"147",y:"309.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(K/6):Math.round(K/6,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"middle",x:"238.5",y:"309.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(2*K/6):Math.round(2*K/6,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"middle",x:"330",y:"309.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(3*K/6):Math.round(3*K/6,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"middle",x:"421.5",y:"309.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(4*K/6):Math.round(4*K/6,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"middle",x:"513",y:"309.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},1!==K?Math.round(5*K/6):Math.round(5*K/6,1))),r.a.createElement("g",null,r.a.createElement("text",{textAnchor:"middle",x:"604.5",y:"309.05",fontFamily:"Arial",fontSize:"13",stroke:"none",strokeWidth:"0",fill:"#444444"},K)))),r.a.createElement("g",null,p)),ne=r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"books added")),r.a.createElement("tr",null,r.a.createElement("th",null,"date"),r.a.createElement("th",null,"added"),r.a.createElement("th",null,"ratings"),r.a.createElement("th",null,"reviews"),r.a.createElement("th",null,"to-read"))),r.a.createElement("tbody",null,Object(z.a)(W).map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,Object(L.a)(e,"yyyy-MM-dd")),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-book"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"rate-book"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-review"===t.action})).length),r.a.createElement("td",null,o.filter((function(t){return Object(Y.a)(t.date.toDate(),e)&&"add-book"===t.action&&"to-read"===t.shelf})).length))})))),re=i?r.a.createElement("div",{className:"book-stats-page-bottom-section"},r.a.createElement("button",{className:"stats-breakdown-button",onClick:function(e){return T((function(e){return!e}))}},"Click here for breakdown"),r.a.createElement("div",{className:"chart-table"},G?ne:null),r.a.createElement("span",null,"Note: This data corresponds to the date users most recently updated this book in their shelves.")):null;return i?r.a.createElement("div",{className:"chart"},ae,re):null},K=(a(87),function(e){var t=e.bookId,a=Object(n.useState)({title:"",cover:""}),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)(!1),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)("LineChart"),p=Object(b.a)(d,2),f=p[0],v=p[1],E=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.queryBookById(E.userUID,t));case 2:a=e.sent,c(a),m(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,E.userUID]);var k=u?r.a.createElement("span",{className:"book-stats-for-edition-page-title"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(t,s.title)},void 0!==s.series?"".concat(s.title," (").concat(s.series.name,", #").concat(s.seriesInstance,")"):"".concat(s.title))," > Stats"):null,w=u?r.a.createElement("div",{className:"page-selection-area"},r.a.createElement("a",{className:"all-editions-page-a",href:O.pageGenerator.generateBookStatsPage(t)},"All ".concat(s.otherEditionsPages.length+1," Editions")),r.a.createElement("span",{className:"just-this-edition-page-span"},"Just This Editon ".concat(void 0!==s.ISBN?"ISBN ".concat(s.ISBN):""))):null,y=u?r.a.createElement("div",{className:"edition-description-area"},r.a.createElement("img",{src:void 0!==s.cover?s.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:s.title}),r.a.createElement("span",null,r.a.createElement("span",null,"Stats for: "),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(t,s.title)},"".concat(s.title).concat(void 0!==s.series?" (".concat(s.series.name,", #").concat(s.seriesInstance,")"):"")),r.a.createElement("span",null,"".concat(void 0!==s.type?" (".concat(s.type,")"):"").concat(void 0!==s.ISBN?" - ".concat(s.ISBN):"")))):null,N=u?r.a.createElement("div",{className:"chart-area"},r.a.createElement("form",{className:"chart-type-form"},r.a.createElement("label",{htmlFor:"chart-type"},"Chart type"),r.a.createElement("select",{name:"chart-type",className:"chart-type-select",value:f,onChange:function(e){v(e.target.value)}},r.a.createElement("option",{value:"ColumnChart"},"ColumnChart"),r.a.createElement("option",{value:"LineChart"},"LineChart"),r.a.createElement("option",{value:"AreaChart"},"AreaChart"),r.a.createElement("option",{value:"BarChart"},"BarChart"))),"ColumnChart"===f?r.a.createElement(V,{bookId:t}):"AreaChart"===f?r.a.createElement(H,{bookId:t}):"BarChart"===f?r.a.createElement(J,{bookId:t}):r.a.createElement(Q,{bookId:t})):null,x=r.a.createElement("div",{className:"book-stats-for-edition-page-left-section"},k,w,y,N),j=u?r.a.createElement("div",{className:"book-stats-for-edition-page-right-section"},r.a.createElement("span",null,"STATS FOR OTHER EDITIONS"),r.a.createElement("div",{className:"edition-list"},s.otherEditionsPages.map((function(e,t){return r.a.createElement("div",{className:"edition-card",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("img",{src:void 0!==s.otherEditionsCovers[t]?s.otherEditionsCovers[t]:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:s.otherEditionsTitles[t]}),r.a.createElement("div",{className:"middle-section"},r.a.createElement("a",{href:e},"".concat(s.otherEditionsTitles[t]).concat(void 0!==s.series?" (".concat(s.series.name,", #").concat(s.seriesInstance,")"):"")),r.a.createElement("span",null,"ISBN: ".concat(void 0!==s.otherEditionsISBNs[t]?s.otherEditionsISBNs[t]:"")))),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",null,"".concat(s.otherEditionsAddedBy[t]," people added"))))})))):null;return r.a.createElement("div",{className:"book-stats-for-edition-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"book-stats-for-edition-page-main-content"},x,j),r.a.createElement(S,null))}),Z=(a(88),function(e){var t=e.bookId,a=Object(n.useState)({title:"",cover:""}),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)(!1),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)("LineChart"),p=Object(b.a)(d,2),f=p[0],v=p[1],E=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.queryBookById(E.userUID,t));case 2:a=e.sent,c(a),m(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,E.userUID]);var k=u?r.a.createElement("span",{className:"book-all-stats-page-title"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(t,s.title)},void 0!==s.series?"".concat(s.title," (").concat(s.series.name,", #").concat(s.seriesInstance,")"):"".concat(s.title))," > Stats"):null,w=u?r.a.createElement("div",{className:"page-selection-area"},r.a.createElement("span",{className:"all-editions-page-span"},"All ".concat(s.otherEditionsPages.length+1," Editions")),r.a.createElement("a",{className:"just-this-edition-page-a",href:O.pageGenerator.generateBookStatsPageForEdition(t)},"Just This Editon ".concat(void 0!==s.ISBN?"ISBN ".concat(s.ISBN):""))):null,y=u?r.a.createElement("div",{className:"chart-area"},r.a.createElement("form",{className:"chart-type-form"},r.a.createElement("label",{htmlFor:"chart-type"},"Chart type"),r.a.createElement("select",{name:"chart-type",className:"chart-type-select",onChange:function(e){v(e.target.value)},value:f},r.a.createElement("option",{value:"ColumnChart"},"ColumnChart"),r.a.createElement("option",{value:"LineChart"},"LineChart"),r.a.createElement("option",{value:"AreaChart"},"AreaChart"),r.a.createElement("option",{value:"BarChart"},"BarChart"))),"ColumnChart"===f?r.a.createElement(V,{bookId:t}):"AreaChart"===f?r.a.createElement(H,{bookId:t}):"BarChart"===f?r.a.createElement(J,{bookId:t}):r.a.createElement(Q,{bookId:t})):null;return r.a.createElement("div",{className:"book-all-stats-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"book-all-stats-page-main-content"},k,w,y),r.a.createElement(S,null))}),X=(a(89),function(e){var t=e.match,a=Object(c.f)(),o=t.params.similarBooksPageId,s=Object(n.useState)({title:"",cover:""}),l=Object(b.a)(s,2),i=l[0],u=l[1],d=Object(n.useState)(!1),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)([]),k=Object(b.a)(E,2),w=k[0],y=k[1],N=Object(n.useState)([]),x=Object(b.a)(N,2),j=x[0],I=x[1],B=Object(n.useState)([]),P=Object(b.a)(B,2),C=P[0],U=P[1],M=Object(n.useState)([]),D=Object(b.a)(M,2),F=D[0],G=D[1],L=Object(n.useState)([]),T=Object(b.a)(L,2),W=T[0],q=T[1],z=Object(n.useState)([]),Y=Object(b.a)(z,2),Q=Y[0],V=Y[1],H=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="",a=0;case 2:if(!(a<o.length)){e.next=11;break}if("."===o[a]){e.next=7;break}t+=o[a],e.next=8;break;case 7:return e.abrupt("break",11);case 8:a++,e.next=2;break;case 11:return e.next=13,Object(R.trackPromise)(O.getAlsoEnjoyedBooksDetailsForBook(H.userUID,t));case 13:n=e.sent,localStorage.setItem("alsoEnjoyed".concat(t,"Obj"),JSON.stringify(n)),u(n),U([n.mainBook].concat(Object(_.a)(n.alsoEnjoyedBooks)).map((function(e){return!1}))),y([n.mainBook].concat(Object(_.a)(n.alsoEnjoyedBooks)).map((function(e){return!1}))),G([n.mainBook].concat(Object(_.a)(n.alsoEnjoyedBooks)).map((function(e){return!0}))),q([n.mainBook].concat(Object(_.a)(n.alsoEnjoyedBooks)).map((function(e){return""}))),V([n.mainBook].concat(Object(_.a)(n.alsoEnjoyedBooks)).map((function(e){return void 0!==e.userRating?e.userRating:0}))),v(!0);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,H.userUID]),Object(n.useLayoutEffect)((function(){var e=document.getElementsByClassName("synopsis");I(Array.from(e).map((function(e){return e.scrollHeight>36})))}),[f]);var J=function(e,t){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(H.userUID,e),u((function(e){return 0===t?Object(m.a)(Object(m.a)({},e),{},{mainBook:Object(m.a)(Object(m.a)({},e.mainBook),{},{userStatus:void 0,userProgress:void 0,userRating:void 0})}):Object(m.a)(Object(m.a)({},e),{},{alsoEnjoyedBooks:e.alsoEnjoyedBooks.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0,userProgress:void 0,userRating:void 0}):e}))})})))},K=function(){var e=Object(h.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=6;break}return y((function(e){return e.map((function(e,t){return t===n||e}))})),e.next=4,O.addBookToShelf(H.userUID,t,r,a);case 4:u((function(e){return 0===n?Object(m.a)(Object(m.a)({},e),{},{mainBook:Object(m.a)(Object(m.a)({},e.mainBook),{},{userStatus:r})}):Object(m.a)(Object(m.a)({},e),{},{alsoEnjoyedBooks:e.alsoEnjoyedBooks.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:r}):e}))})})),y((function(e){return e.map((function(e,t){return t!==n&&e}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(h.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=4;break}return e.next=3,O.rateBook(H.userUID,t,r,a);case 3:u((function(e,t){return 0===n?Object(m.a)(Object(m.a)({},e),{},{mainBook:Object(m.a)(Object(m.a)({},e.mainBook),{},{userStatus:void 0!==e.mainBook.userStatus?e.mainBook.userStatus:"read",userRating:r})}):Object(m.a)(Object(m.a)({},e),{},{alsoEnjoyedBooks:e.alsoEnjoyedBooks.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0!==e.userStatus?e.userStatus:"read",userRating:r}):e}))})}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),X=f?r.a.createElement("div",{className:"similar-books-page-page-indicator"},r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(i.mainBook.authorId,i.mainBook.authorName)},i.mainBook.authorName),r.a.createElement("span",{className:"similar-books-page-page-indicator-arrow"}),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(i.mainBook.id,i.mainBook.title)},i.mainBook.title),r.a.createElement("span",{className:"similar-books-page-page-indicator-arrow"}),r.a.createElement("span",null,"Similar books")):null,$=f?r.a.createElement("h1",{className:"similar-books-page-title"},"Books similar to ".concat(i.mainBook.title).concat(void 0!==i.mainBook.series?" (".concat(i.mainBook.series,", #").concat(i.mainBook.seriesInstance,")"):"")):null,ee=function(e,t){var n=e.fiveRatings+e.fourRatings+e.threeRatings+e.twoRatings+e.oneRatings,o=0!==n?((5*e.fiveRatings+4*e.fourRatings+3*e.threeRatings+2*e.twoRatings+e.oneRatings)/n).toFixed(2):0;return r.a.createElement("div",{className:t===i.alsoEnjoyedBooks.length?"similar-books-page-book-card borderless":"similar-books-page-book-card",key:t},r.a.createElement("div",{className:"similar-books-page-book-card-left-section"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))),r.a.createElement("div",{className:"similar-books-page-book-card-right-section"},r.a.createElement("a",{className:"book-card-book-title-a",href:O.pageGenerator.generateBookPage(e.id,e.title)},"".concat(e.title).concat(void 0!==e.series?" (".concat(e.series,", #").concat(e.seriesInstance,")"):"")),r.a.createElement("span",{className:"author-span"},"by"," ",r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.authorId,e.authorName)},e.authorName),e.authorIsMember?r.a.createElement("div",{className:"goodreads-seal"}):null),r.a.createElement("div",{className:"book-page-general-rating"},r.a.createElement("div",{className:"book-page-general-rating-stars"},r.a.createElement("div",{className:o>=1?"static-star small full":o>=.5?"static-star small almost-full":o>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:o>=2?"static-star small full":o>=1.5?"static-star small almost-full":o>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:o>=3?"static-star small full":o>=2.5?"static-star small almost-full":o>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:o>=4?"static-star small full":o>=3.5?"static-star small almost-full":o>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:o>=5?"static-star small full":o>=4.5?"static-star small almost-full":o>4?"static-star small almost-empty":"static-star small empty"})),r.a.createElement("span",null,isNaN(o)?"":"".concat(o," avg. rating")),r.a.createElement("span",{className:"separator-dot"},"\xb7"),r.a.createElement("span",null,"".concat(n," Ratings"))),r.a.createElement("div",{className:"book-page-synopsis-wrapper"},r.a.createElement("div",{className:C[t]?"book-page-synopsis-area-full":"book-page-synopsis-area"},void 0!==e.preSynopsis?r.a.createElement("p",{className:"pre-synopsis"},r.a.createElement("b",null,e.preSynopsis)):null,r.a.createElement("p",{className:"synopsis"},e.synopsis)),j[t]?r.a.createElement("button",{className:"synopsis-show-more",onClick:function(e){U((function(e){return e.map((function(e,a){return a===t?!e:e}))}))}},C[t]?"Less":"More"):null),r.a.createElement("div",{className:"shelf-and-ratings-section"},r.a.createElement("div",{className:"shelf-section"},function(e,t){return f&&"reading"===e.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:function(a){return J(e.id,t)}}),r.a.createElement("span",null,w[t]?"Saving...":"Currently Reading")):f&&"read"===e.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:function(a){return J(e.id,t)}}),r.a.createElement("span",null,w[t]?"Saving...":"Read")):f&&"to-read"===e.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:function(a){return J(e.id,t)}}),r.a.createElement("span",null,w[t]?"Saving...":"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return K(e.id,t,"to-read")}},w[t]?"Saving...":"Want to Read")}(e,t),function(e,t){return r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:F[t]?"book-options-dropdown":"book-options-dropdown expanded"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"to-read"===e.userStatus?"dropdown-want-to-read-button bold":"dropdown-want-to-read-button",onClick:function(){return K(e.id,t,"to-read")}},"Want to Read"),r.a.createElement("button",{className:"reading"===e.userStatus?"dropdown-reading-button bold":"dropdown-want-reading-button",onClick:function(){return K(e.id,t,"reading")}},"Currently Reading"),r.a.createElement("button",{className:"read"===e.userStatus?"dropdown-read-button bold":"dropdown-read-button",onClick:function(){return K(e.id,t,"read")}},"Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:F[t]?"dropdown-add-shelf":"dropdown-add-shelf hidden",onClick:function(e){return G((function(e){return e.map((function(e,a){return a!==t&&e}))}))}},"Add Shelf"),r.a.createElement("div",{className:F[t]?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",placeholder:"New Shelf Name",value:W[t],onChange:function(e){var a=e.target.value;q((function(e){return e.map((function(e,n){return n===t?a:e}))}))}}),r.a.createElement("button",{disabled:0===W[t].length,className:"dropdown-add-shelf-add-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(W[t].length>0)){n.next=4;break}return n.next=3,O.addBookToUserShelf(H.userUID,e.rootBook,W[t],null,a);case 3:G((function(e){return e.map((function(e,a){return a===t||e}))}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Add")))))}(e,t)),r.a.createElement("div",{className:"rating-section"},void 0===e.userRating?r.a.createElement("span",null,"Rate it: "):r.a.createElement("span",null,"Your rating: "),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:Q[t]>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return V((function(e){return e.map((function(e,a){return a===t?1:e}))}))},onMouseLeave:function(a){return V((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Z(e.id,t,1)}}),r.a.createElement("div",{className:Q[t]>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return V((function(e){return e.map((function(e,a){return a===t?2:e}))}))},onMouseLeave:function(a){return V((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Z(e.id,t,2)}}),r.a.createElement("div",{className:Q[t]>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return V((function(e){return e.map((function(e,a){return a===t?3:e}))}))},onMouseLeave:function(a){return V((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Z(e.id,t,3)}}),r.a.createElement("div",{className:Q[t]>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return V((function(e){return e.map((function(e,a){return a===t?4:e}))}))},onMouseLeave:function(a){return V((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Z(e.id,t,4)}}),r.a.createElement("div",{className:Q[t]>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return V((function(e){return e.map((function(e,a){return a===t?5:e}))}))},onMouseLeave:function(a){return V((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Z(e.id,t,5)}}))))))},te=f?r.a.createElement("div",{className:"similar-books-page-main-content"},X,$,r.a.createElement("div",{className:"main-book-card"},ee(i.mainBook,0)),r.a.createElement("span",null,"Goodreads members who liked this book also liked:"),r.a.createElement("div",{className:"similar-books-cards"},i.alsoEnjoyedBooks.map((function(e,t){return ee(e,t+1)})))):null;return r.a.createElement("div",{className:"similar-books-page"},r.a.createElement(A,null),te,r.a.createElement(S,null))}),$=(a(90),function(e){var t=e.match,a=Object(c.f)(),o=t.params.bookEditionsPageId,s=o.split(".")[0],l=o.split(".")[1].replace(/_/g," "),i=Object(n.useState)(!1),u=Object(b.a)(i,2),d=u[0],p=u[1],f=Object(n.useState)([]),v=Object(b.a)(f,2),E=v[0],k=v[1],w=Object(n.useState)([]),y=Object(b.a)(w,2),N=y[0],x=y[1],j=Object(n.useState)(!1),I=Object(b.a)(j,2),B=I[0],P=I[1],C=Object(n.useState)(10),U=Object(b.a)(C,2),M=U[0],D=U[1],F=Object(n.useState)(1),G=Object(b.a)(F,2),T=G[0],W=G[1],_=Object(n.useState)(""),q=Object(b.a)(_,2),z=q[0],Y=q[1],Q=Object(n.useState)("num ratings"),V=Object(b.a)(Q,2),H=V[0],J=V[1],K=Object(n.useState)([]),Z=Object(b.a)(K,2),X=Z[0],$=Z[1],ee=Object(n.useState)([]),te=Object(b.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)([]),oe=Object(b.a)(re,2),se=oe[0],ce=oe[1],le=Object(n.useState)([]),ie=Object(b.a)(le,2),ue=ie[0],me=ie[1],de=Object(n.useState)([]),pe=Object(b.a)(de,2),fe=pe[0],ge=pe[1],he=Object(n.useState)([]),be=Object(b.a)(he,2),ve=be[0],Ee=be[1],ke=Object(n.useState)([]),we=Object(b.a)(ke,2),ye=we[0],Ne=we[1],Oe=Object(n.useState)([]),xe=Object(b.a)(Oe,2),je=xe[0],Ie=xe[1],Se=Object(n.useState)(null),Be=Object(b.a)(Se,2),Pe=Be[0],Ce=Be[1],Ae=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getEditionDetailsForBook(Ae.userUID,s));case 2:t=e.sent,localStorage.setItem("editions".concat(s,"Obj"),JSON.stringify(t)),k(t),x(t.map((function(e){return!1}))),$(t.map((function(e){return!1}))),ne(t.map((function(e){return!0}))),ce(t.map((function(e){return""}))),me(t.map((function(e){return void 0!==e.userRating?e.userRating:0}))),ge(t.map((function(e){return!0}))),Ee(t.map((function(e){return!0}))),Ne(t.map((function(e){return""}))),Ie(t.map((function(e){return""}))),Ce(t.filter((function(e){return void 0!==e.userStatus})).length>0?t.filter((function(e){return void 0!==e.userStatus}))[0].id:null),p(!0);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,Ae.userUID]);var Ue=function(e,t){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(Ae.userUID,e.id),k((function(e){return e.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0,userProgress:void 0,userRating:void 0}):e}))})))},Re=function(){var e=Object(h.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=6;break}return $((function(e){return e.map((function(e,t){return t===n||e}))})),e.next=4,O.addBookToShelf(Ae.userUID,t.id,r,a);case 4:k((function(e){return e.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:r}):e}))})),$((function(e){return e.map((function(e,t){return t!==n&&e}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Me=function(){var e=Object(h.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=4;break}return e.next=3,O.rateBook(Ae.userUID,t.id,r,a);case 3:k((function(e,t){return e.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0!==e.userStatus?e.userStatus:"read",userRating:r}):e}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),De=function(){var e=Object(h.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==Ae.userUID&&void 0!==Ae.userUID&&void 0!==t.id&&n.length>0)){e.next=4;break}return e.next=3,O.updateBookInShelf(Ae.userUID,t.id,parseInt(n));case 3:k((function(e){return e.map((function(e,t){return t===a?Object(m.a)(Object(m.a)({},e),{},{userProgress:n}):e}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Fe=function(e,t){return r.a.createElement("div",{className:"book-editions-page-edition-card",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("div",{className:"cover-section"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))),r.a.createElement("div",{className:"info-section"},r.a.createElement("a",{className:"edition-title-a",href:O.pageGenerator.generateBookPage(e.id,e.title)},"".concat(e.title).concat(void 0!==e.type?" (".concat(e.type,")"):"")),r.a.createElement("span",{className:"published-span"},"".concat(void 0!==e.publishedDate&&void 0!==e.publisher?"Published ".concat(Object(L.a)(e.publishedDate,"MMMM do yyyy")," by ").concat(e.publisher):void 0!==e.publisher?"Published by ".concat(e.publisher):void 0!==e.publishedDate?"Published ".concat(Object(L.a)(e.publishedDate,"MMMM do yyyy")):"")),r.a.createElement("span",{className:"format-and-pages"},void 0!==e.type&&void 0!==e.pageCount?"".concat(e.type,", ").concat(e.pageCount," pages"):void 0!==e.type?"".concat(e.type):void 0!==e.pageCount?"".concat(e.pageCount," pages"):""),r.a.createElement("table",{className:N[t]?"info-section-more-details":"info-section-more-details hidden"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"info-section-more-details-author"},r.a.createElement("th",null,"Author(s):"),r.a.createElement("td",{className:"authors-td"},e.authorPages.map((function(t,a){return r.a.createElement("span",{key:a},r.a.createElement("a",{href:t},e.authorNames[a]),0!==a?r.a.createElement("span",{className:"author-function"}," (".concat(e.authorFunctions[a],")")):null,a!==e.authorPages.length-1?", ":"")})))),void 0!==e.ISBN?r.a.createElement("tr",{className:"info-section-more-details-ISBN"},r.a.createElement("th",null,"ISBN:"),r.a.createElement("td",{className:"isbn-td"},e.ISBN)):null,void 0!==e.language?r.a.createElement("tr",{className:"info-section-more-details-language"},r.a.createElement("th",null,"Edition language:"),r.a.createElement("td",{className:"language-td"},e.language)):null,r.a.createElement("tr",{className:"info-section-more-details-rating"},r.a.createElement("th",null,"Average rating:"),r.a.createElement("td",{className:"average-rating-td"},r.a.createElement("span",{className:"rating-value-span"},Math.round(e.thisEditionRating,2)),r.a.createElement("span",{className:"rating-count-span"}," (".concat(e.thisEditionRatings," ratings)")))))),r.a.createElement("button",{className:"more-less-detail-button",onClick:function(e){x((function(e){return e.map((function(e,a){return a===t?!e:e}))}))}},N[t]?"less detail":"more detail"))),null===Pe||Pe===e.id?r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"want-to-read-button-and-options ".concat(void 0!==e.userStatus?e.userStatus:"")},function(e,t){return d&&"reading"===e.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("div",{className:fe[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up reading"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,r.a.createElement("b",null,"Update your reading progress:")),r.a.createElement("span",null,"I'm on page"," ",r.a.createElement("input",{type:"text",value:ye[t],className:ve[t]?"page-progress-input":"page-progress-input white-background",onClick:function(e){Ee((function(e){return e.map((function(e,a){return a!==t&&e}))})),ge((function(e){return e.map((function(e,a){return a!==t&&e}))}))},onChange:function(e){var a=e.target.value;Ne((function(e){return e.map((function(e,n){return n===t?a:e}))}))}})," ","of ",e.pageCount,"."," ",r.a.createElement("a",{href:void 0!==Ae.userUID&&null!==Ae.userUID?O.pageGenerator.generateUserShelfPage(Ae.userUID,Ae.userInfo.firstName,["reading"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:ve[t]?"shelf-pop-up-bottom hidden":"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){De(e,t,ye[t]),Ee((function(e){return e.map((function(e,a){return a===t||e}))})),ge((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Submit"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){Ee((function(e){return e.map((function(e,a){return a===t||e}))})),ge((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{className:"progress-finished-button",onClick:function(a){Re(e,t,"read"),Ee((function(e){return e.map((function(e,a){return a===t||e}))})),ge((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Finished book"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:function(a){return Ue(e,t)}}),r.a.createElement("span",null,"Currently Reading")):d&&"read"===e.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("div",{className:"shelf-pop-up-wrapper"},r.a.createElement("div",{className:"shelf-pop-up read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("a",{href:O.pageGenerator.generateWriteReviewPageForBook(e.id)},"Write a review"),r.a.createElement("span",null,"\xb7"),r.a.createElement("a",{href:void 0!==Ae.userUID&&null!==Ae.userUID?O.pageGenerator.generateUserShelfPage(Ae.userUID,Ae.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:function(a){return Ue(e,t)}}),r.a.createElement("span",null,"Read")):d&&"to-read"===e.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("div",{className:fe[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up to-read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,"#",r.a.createElement("input",{type:"text",value:je[t],className:"shelf-pop-up-to-read-input",onChange:function(e){var a=e.target.value;Ie((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onClick:function(e){Ee((function(e){return e.map((function(e,a){return a!==t&&e}))})),ge((function(e){return e.map((function(e,a){return a!==t&&e}))}))}})," ","on your ",r.a.createElement("b",null,"To Read")," shelf.")),ve[t]?r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("a",{href:void 0!==Ae.userUID&&null!==Ae.userUID?O.pageGenerator.generateUserShelfPage(Ae.userUID,Ae.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf")):r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){O.changeBookPosition(Ae.userUID,e.id,parseInt(je[t])),k((function(e){return e.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{toReadBookPosition:parseInt(je[t])}):e}))})),Ee((function(e){return e.map((function(e,a){return a===t||e}))})),ge((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Save"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){Ee((function(e){return e.map((function(e,a){return a===t||e}))})),ge((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:function(a){return Ue(e,t)}}),r.a.createElement("span",null,"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return Re(e,t,"to-read")}},X[t]?"...saving":"Want to Read")}(e,t),function(e,t){return r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:"book-options-dropdown"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"dropdown-read-button",onClick:function(){return Re(e,t,"read")}},"Read"),r.a.createElement("button",{className:"dropdown-currently-reading-button",onClick:function(){return Re(e,t,"reading")}},"Currently Reading"),r.a.createElement("button",{className:"dropdown-want-to-read-button",onClick:function(){return Re(e,t,"to-read")}},"Want to Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:"dropdown-add-shelf",onClick:function(e){return ne((function(e){return e.map((function(e,a){return a!==t&&e}))}))}},"Add Shelf"),r.a.createElement("div",{className:ae[t]?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",value:se[t],onChange:function(e){var a=e.target.value;ce((function(e){return e.map((function(e,n){return n===t?a:e}))}))}}),r.a.createElement("button",{className:"dropdown-add-shelf-add-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(se[t].length>0)){n.next=4;break}return n.next=3,O.addBookToUserShelf(Ae.userUID,e.rootBook,se[t],null,a);case 3:ne((function(e){return e.map((function(e,a){return a===t||e}))}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Add")))))}(e,t)),function(e,t){return r.a.createElement("div",{className:"book-page-rate-book"},void 0===e.userRating?null:r.a.createElement("button",{className:"clear-rating-button",onClick:function(){return Me(e,t,void 0)}},"Clear rating"),void 0===e.userRating?r.a.createElement("span",{className:"rate-this-book"},"Rate this book"):r.a.createElement("span",{className:"rate-this-book my-rating"},"My rating:"),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:ue[t]>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return me((function(e){return e.map((function(e,a){return a===t?1:e}))}))},onMouseLeave:function(a){return me((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Me(e,t,1)}}),r.a.createElement("div",{className:ue[t]>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return me((function(e){return e.map((function(e,a){return a===t?2:e}))}))},onMouseLeave:function(a){return me((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Me(e,t,2)}}),r.a.createElement("div",{className:ue[t]>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return me((function(e){return e.map((function(e,a){return a===t?3:e}))}))},onMouseLeave:function(a){return me((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Me(e,t,3)}}),r.a.createElement("div",{className:ue[t]>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return me((function(e){return e.map((function(e,a){return a===t?4:e}))}))},onMouseLeave:function(a){return me((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Me(e,t,4)}}),r.a.createElement("div",{className:ue[t]>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return me((function(e){return e.map((function(e,a){return a===t?5:e}))}))},onMouseLeave:function(a){return me((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Me(e,t,5)}})))}(e,t)):r.a.createElement("button",{className:"switch-to-edition-button",onClick:function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.switchBookEditionForUser(Ae.userUID,Pe,e.id);case 2:Ce(e.id);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"Switch to This Edition"))},Ge=d?E.filter((function(e){return e.type===z||""===z})).sort((function(e,t){switch(H){case"title":return e.title<t.title?-1:1;case"original date published":return e.publishedDate-t.publishedDate;case"date published":return t.publishedDate-e.publishedDate;case"avg rating":return t.thisEditionRating-e.thisEditionRating;case"num ratings":return t.thisEditionRatings-e.thisEditionRatings;case"format":return e.type<t.type?-1:1;default:return-1}})).map((function(e,t){return Fe(e,t)})):null,Le=d?r.a.createElement("div",{className:"book-editions-page-edition-card-list"},Ge.length>0?Ge.filter((function(e,t){return t>=10*(T-1)&&t+1<=10*(T-1)+M})):r.a.createElement("span",{className:"no-editions-with-format-span"},"There are no editions with format ".concat(z,".")),Math.ceil(Ge.length/M)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return W((function(e){return e-1}))},disabled:1===T},"\xab previous"),Array.from({length:Math.ceil(Ge.length/M)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return W(e)},disabled:T===e},T!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return W((function(e){return e+1}))},disabled:T===Math.ceil(Ge.length/M)},"next \xbb")):null):null,Te=d?r.a.createElement("div",{className:"editions-per-page-selection-area"},r.a.createElement("label",{htmlFor:"editions-per-page"},"per page"),r.a.createElement("select",{name:"editions-per-page",value:M,onChange:function(e){W(1),D(parseInt(e.target.value))}},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"75"},"75"),r.a.createElement("option",{value:"100"},"100"))):null,We=d?r.a.createElement("div",{className:"book-editions-page-title"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(E.filter((function(e){return e.isMainEdition}))[0].id,l)},l),r.a.createElement("span",null,">"),r.a.createElement("span",null,"Editions")):null,_e=d?r.a.createElement("div",{className:"book-editions-page-info-and-filters-top"},r.a.createElement("div",{className:"book-editions-page-info-and-filters-top-left"},r.a.createElement("span",{className:"author-name-field"},r.a.createElement("span",null,"by "),r.a.createElement("a",{href:E[0].authorPages[0]},E[0].authorNames[0])),r.a.createElement("span",{className:"first-published-date-field"},"First published ".concat(Object(L.a)(E.reduce((function(e,t){return void 0===e.publishedDate||t.publishedDate<e.publishedDate?t.publishedDate:e.publishedDate}),E[0].publishedDate),"MMMM do yyyy")))),r.a.createElement("div",{className:"book-editions-page-info-and-filters-top-right"},r.a.createElement("button",{className:"expand-collapse-details-button",onClick:function(e){B?(x((function(e){return e.map((function(e){return!1}))})),P(!1)):(x((function(e){return e.map((function(e){return!0}))})),P(!0))}},B?"collapse details":"expand details"),r.a.createElement("a",{className:"add-new-edition-a",href:O.pageGenerator.generateAddBookPage()},"Add a new edition"))):null,qe=d?r.a.createElement("div",{className:"book-editions-page-info-and-filters-bottom"},r.a.createElement("div",{className:"book-editions-page-info-and-filters-bottom-left"},r.a.createElement("span",{className:"editions-bold"},"Editions"),r.a.createElement("span",{className:"page-showing-numbers-span"},"Showing ".concat(Ge.length>0?10*(T-1)+1:0,"-").concat(10*(T-1)+M<=Ge.length?10*(T-1)+M:Ge.length," of ").concat(Ge.length))),r.a.createElement("div",{className:"book-editions-page-info-and-filters-bottom-right"},r.a.createElement("label",{htmlFor:"format"},"Format"),r.a.createElement("select",{name:"format",value:z,className:"format-select",onChange:function(e){W(1),Y(e.target.value)}},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"Paperback"},"Paperback"),r.a.createElement("option",{value:"Hardcover"},"Hardcover"),r.a.createElement("option",{value:"Mass Market Paperback"},"Mass Market Paperback"),r.a.createElement("option",{value:"Kindle Edition"},"Kindle Edition"),r.a.createElement("option",{value:"Nook"},"Nook"),r.a.createElement("option",{value:"ebook"},"ebook"),r.a.createElement("option",{value:"Library Binding"},"Library Binding"),r.a.createElement("option",{value:"Audiobook"},"Audiobook"),r.a.createElement("option",{value:"Audio CD"},"Audio CD"),r.a.createElement("option",{value:"Audio Cassette"},"Audio Cassette"),r.a.createElement("option",{value:"Audible Audio"},"Audible Audio"),r.a.createElement("option",{value:"CD-ROM"},"CD-ROM"),r.a.createElement("option",{value:"MP3 CD"},"MP3 CD"),r.a.createElement("option",{value:"Board book"},"Board book"),r.a.createElement("option",{value:"Leather Bound"},"Leather Bound"),r.a.createElement("option",{value:"Unbound"},"Unbound"),r.a.createElement("option",{value:"Spiral-bound"},"Spiral-bound"),r.a.createElement("option",{value:"Unknown Binding"},"Unknown Binding")),r.a.createElement("label",{htmlFor:"sort-order"},"Sort by"),r.a.createElement("select",{name:"sort-order",value:H,className:"sort-order-select",onChange:function(e){return J(e.target.value)}},r.a.createElement("option",{value:"title"},"title"),r.a.createElement("option",{value:"original date published"},"original date published"),r.a.createElement("option",{value:"date published"},"date published"),r.a.createElement("option",{value:"avg rating"},"avg rating"),r.a.createElement("option",{value:"num ratings"},"num ratings"),r.a.createElement("option",{value:"format"},"format")))):null,ze=r.a.createElement("div",{className:"page-info-and-filters"},_e,qe),Ye=d?r.a.createElement("div",{className:"book-editions-page-main-content"},We,ze,Le,Te):null;return r.a.createElement("div",{className:"book-editions-page"},r.a.createElement(A,null),Ye,r.a.createElement(S,null))}),ee=(a(91),function(e){var t=e.match.params.bookCoverPageId,a=t.split(".")[0],o=t.split(".")[1].replace(/_/g," "),s=Object(n.useState)(null),c=Object(b.a)(s,2),l=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(b.a)(u,2),d=m[0],p=m[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getBookPhotos(a));case 2:t=e.sent,i(t),p(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var f=d?r.a.createElement("div",{className:"book-cover-page-main-content"},r.a.createElement("div",{className:"main-content-left-section"},r.a.createElement("span",{className:"book-cover-page-title"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(a,o)},o),r.a.createElement("span",null,">"),r.a.createElement("span",null,"Cover")),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(a,o)},r.a.createElement("img",{src:void 0!==l.cover?l.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:"".concat(o," cover")}))),r.a.createElement("div",{className:"main-content-right-section"},r.a.createElement("span",{className:"main-content-right-section-title-span"},"".concat(o.toUpperCase()," PHOTOS")),l.photos.length>0?r.a.createElement("div",{className:"photo-list"},l.photos.map((function(e,t){return r.a.createElement("a",{href:O.pageGenerator.generateBookPhotoPage(a,o,e.id),key:t},r.a.createElement("img",{src:e.url,alt:"".concat(o," ").concat(e.type)}))}))):r.a.createElement("span",{className:"no-photos-yet-span"},"This book has no photos yet."))):null;return r.a.createElement("div",{className:"book-cover-page"},r.a.createElement(A,null),f,r.a.createElement(S,null))}),te=(a(92),function(e){var t=e.match,a=e.location,o=t.params.bookPhotoPageId,s=new URLSearchParams(a.search).get("photo"),c=Object(n.useState)(!1),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(null),d=Object(b.a)(m,2),p=d[0],f=d[1],v=o.split(".")[0],E=o.split(".")[1].replace(/_/g," "),k=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getPhotoDetails(k.userUID,s));case 2:t=e.sent,f(t),u(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[k.userUID,s]);var w=i?r.a.createElement("div",{className:"book-photo-page-main-content"},r.a.createElement("span",{className:"book-photo-page-title"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(v,E)},E),r.a.createElement("span",null,">"),r.a.createElement("span",null,"Photos"),r.a.createElement("span",null,">"),r.a.createElement("span",null,p.type)),r.a.createElement("a",{href:O.pageGenerator.generateBookPhotoPage(v,E,s),className:"small-photo-a"},r.a.createElement("img",{src:p.url,alt:p.type})),r.a.createElement("div",{className:"main-photo-section"},r.a.createElement("a",{className:"largest-size-a",href:p.url},"largest size"),r.a.createElement("img",{src:p.url,alt:p.type}),r.a.createElement("span",{className:"views-span"},"Views: ".concat(p.usersWhoViewed.length)))):null;return r.a.createElement("div",{className:"book-photo-page"},r.a.createElement(A,null),w,r.a.createElement(S,null))}),ae=a(52),ne=(a(93),function(e){var t=e.location,a=Object(c.f)(),o=new URLSearchParams(t.search),s=o.get("author"),l=o.get("title"),i=o.get("work[id]"),u=Object(n.useRef)(),m=Object(n.useState)(!1),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(""),E=Object(b.a)(v,2),k=E[0],w=E[1],y=Object(n.useState)(null!==l?l:""),N=Object(b.a)(y,2),x=N[0],j=N[1],I=Object(n.useState)(null!==s?s:""),B=Object(b.a)(I,2),P=B[0],C=B[1],U=Object(n.useState)(null),M=Object(b.a)(U,2),D=M[0],F=M[1],G=Object(n.useState)([]),L=Object(b.a)(G,2),T=L[0],W=L[1],_=Object(n.useState)([]),q=Object(b.a)(_,2),z=q[0],Y=q[1],Q=Object(n.useState)(""),V=Object(b.a)(Q,2),H=V[0],J=V[1],K=Object(n.useState)(""),Z=Object(b.a)(K,2),X=Z[0],$=Z[1],ee=Object(n.useState)(""),te=Object(b.a)(ee,2),ne=te[0],re=te[1],oe=Object(n.useState)(""),se=Object(b.a)(oe,2),ce=se[0],le=se[1],ie=Object(n.useState)(""),ue=Object(b.a)(ie,2),me=ue[0],de=ue[1],pe=Object(n.useState)(""),fe=Object(b.a)(pe,2),ge=fe[0],he=fe[1],be=Object(n.useState)(!1),ve=Object(b.a)(be,2),Ee=ve[0],ke=ve[1],we=Object(n.useState)(""),ye=Object(b.a)(we,2),Ne=ye[0],Oe=ye[1],xe=Object(n.useState)(""),je=Object(b.a)(xe,2),Ie=je[0],Se=je[1],Be=Object(n.useState)("Select..."),Pe=Object(b.a)(Be,2),Ce=Pe[0],Ae=Pe[1],Ue=Object(n.useState)(""),Re=Object(b.a)(Ue,2),Me=Re[0],De=Re[1],Fe=Object(n.useState)(""),Ge=Object(b.a)(Fe,2),Le=Ge[0],Te=Ge[1],We=Object(n.useState)(""),_e=Object(b.a)(We,2),qe=_e[0],ze=_e[1],Ye=Object(n.useState)(""),Qe=Object(b.a)(Ye,2),Ve=Qe[0],He=Qe[1],Je=Object(n.useState)(!0),Ke=Object(b.a)(Je,2),Ze=Ke[0],Xe=Ke[1],$e=Object(n.useState)(!0),et=Object(b.a)($e,2),tt=et[0],at=et[1],nt=Object(n.useState)(!0),rt=Object(b.a)(nt,2),ot=rt[0],st=rt[1],ct=Object(n.useState)([]),lt=Object(b.a)(ct,2),it=lt[0],ut=lt[1],mt=Object(n.useState)([]),dt=Object(b.a)(mt,2),pt=dt[0],ft=dt[1],gt=Object(n.useState)(!0),ht=Object(b.a)(gt,2),bt=ht[0],vt=ht[1],Et=Object(n.useState)(!0),kt=Object(b.a)(Et,2),wt=kt[0],yt=kt[1],Nt=Object(n.useState)(!0),Ot=Object(b.a)(Nt,2),xt=Ot[0],jt=Ot[1],It=Object(n.useState)(!0),St=Object(b.a)(It,2),Bt=St[0],Pt=St[1],Ct=Object(n.useState)(!0),At=Object(b.a)(Ct,2),Ut=At[0],Rt=At[1],Mt=Object(n.useState)(!0),Dt=Object(b.a)(Mt,2),Ft=Dt[0],Gt=Dt[1],Lt=Object(n.useState)(!0),Tt=Object(b.a)(Lt,2),Wt=Tt[0],_t=Tt[1],qt=Object(n.useState)(!1),zt=Object(b.a)(qt,2),Yt=zt[0],Qt=zt[1],Vt=Object(n.useState)(null),Ht=Object(b.a)(Vt,2),Jt=Ht[0],Kt=Ht[1],Zt=Object(n.useState)([]),Xt=Object(b.a)(Zt,2),$t=Xt[0],ea=Xt[1],ta=Object(n.useState)(!1),aa=Object(b.a)(ta,2),na=aa[0],ra=aa[1],oa=Object(n.useState)([]),sa=Object(b.a)(oa,2),ca=sa[0],la=sa[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userState"));void 0!==e&&null!==e||a.push({pathname:"/user/sign_in",state:{}})})),Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getSynopsisAndPreSynopsisForBook(i));case 2:null!==(t=e.sent).preSynopsis?(w(t.preSynopsis),null!==t.synopsis&&w((function(e){return e+t.synopsis}))):null!==t.synopsis&&w(t.synopsis),f(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]);var ia=r.a.createElement("div",{className:"add-new-book-page-top-message warning"},r.a.createElement("span",null,"Please prove to us that you're not a robot by solving the challenge below"),r.a.createElement("button",{className:"top-message-close-button",onClick:function(e){return Kt(null)}})),ua=r.a.createElement("div",{className:"add-new-book-page-top-message error"},r.a.createElement("span",null,"Sorry, something went wrong with creating this book."),r.a.createElement("button",{className:"top-message-close-button",onClick:function(e){return Kt(null)}})),ma=r.a.createElement("div",{className:"add-new-book-page-error-list"},r.a.createElement("span",{className:"error-list-title"},1===$t.length?"1 error prohibited this book from being saved:":"".concat($t.length," errors prohibited this book from being saved:")),r.a.createElement("ul",null,$t.includes("author")?r.a.createElement("li",null,"Author can't be blank"):null,$t.includes("title")?r.a.createElement("li",null,"Title is too short (minimum is 1 character)"):null,$t.includes("year")?r.a.createElement("li",null,"Year is invalid"):null,$t.includes("pages")?r.a.createElement("li",null,"Number of pages is invalid"):null)),da=r.a.createElement("h1",{className:"add-new-book-page-title"},"Add a New Book"),pa=r.a.createElement("span",{className:"add-new-book-page-note"},r.a.createElement("b",null,"Note: "),"Please"," ",r.a.createElement("a",{href:O.pageGenerator.generateSearchPage()},r.a.createElement("nobr",null,"do a search"))," ","before adding a book, as it may be a duplicate. Please also carefully read the guidelines to the right, especially the part about what kind of books to add."),fa=r.a.createElement("div",{className:Ze?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"If the book is in a series, put which book it is in parenthesis after the title. For example: Breaking Dawn (Twilight, #4).")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),ga=r.a.createElement("div",{className:tt?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"First name goes first. Only social suffixes are used. This includes Jr., Sr., and Roman numerals. There is no punctuation between the name and the suffix.")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),ha=function(e){return r.a.createElement("div",{className:0===e&&ot||0!==e&&pt[e-1]?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"Help us keep this field consistent. Suggested values are:",r.a.createElement("br",null),"-Author (default) - no need to specify this",r.a.createElement("br",null),"-Illustrator",r.a.createElement("br",null),"-Contributor",r.a.createElement("br",null),"-Editor",r.a.createElement("br",null),"-Translator",r.a.createElement("br",null),"-Narrator")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"}))},ba=r.a.createElement("div",{className:bt?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"This is the date this particular edition was published.")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),va=r.a.createElement("div",{className:wt?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,'To use a format not in the list click "other". Please only add books. Books generally have ISBN numbers (but don\\\'t have to), and are usually published. Periodicals such as newspapers, magazines, and comics are not books. However a volume of comics or articles or graphic novels is considered a book.')),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),Ea=r.a.createElement("div",{className:xt?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"Link to the book's page on Amazon.")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),ka=r.a.createElement("div",{className:Bt?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"Description/synopsis only -- not your review. Please avoid spoilers, especially if copying from Wikipedia.")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),wa=r.a.createElement("div",{className:Ut?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"The language this edition of the book is primarily written in.")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),ya=r.a.createElement("div",{className:Ft?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"Title of the original publication of this work.")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),Na=r.a.createElement("div",{className:Wt?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"The date the first edition of this title was published. All fields optional.")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"})),Oa=r.a.createElement("form",{className:"add-new-book-page-book-form"},r.a.createElement("div",{className:"form-title-area"},r.a.createElement("label",{htmlFor:"title",className:"main-label"},r.a.createElement("span",null,"title"),r.a.createElement("span",{className:"red-asterisk"},"*")),r.a.createElement("input",{type:"text",name:"title",required:!0,value:x,onChange:function(e){return j(e.target.value)},onFocus:function(e){return Xe(!1)},onBlur:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xe(!0),!(x.length>0)){e.next=10;break}return ra(!0),e.t0=la,e.next=6,O.queryBooksForBookCreation(x);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 10:la([]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),fa),r.a.createElement("div",{className:"title-suggestions-area"},na?r.a.createElement("span",null,"The book you are adding may already exist in our database. If it appears below, please use that edition instead of adding a new one."):null,r.a.createElement("div",{className:"book-suggestion-list"},ca.map((function(e,t){return r.a.createElement("a",{href:e.link,className:"title-book-suggestion",key:t},e.title)})))),r.a.createElement("div",{className:"form-author-area"},r.a.createElement("div",{className:"main-author-area"},r.a.createElement("label",{htmlFor:"author",className:"main-label"},r.a.createElement("span",null,"author"),r.a.createElement("span",{className:"red-asterisk"},"*")),r.a.createElement("input",{type:"text",name:"author",required:!0,value:P,onChange:function(e){return C(e.target.value)},onFocus:function(e){return at(!1)},onBlur:function(e){return at(!0)}}),ga,null===D?r.a.createElement("button",{className:"add-role-button",onClick:function(e){e.preventDefault(),F("")}},"Add role"):r.a.createElement("div",{className:"main-author-role-area"},r.a.createElement("label",{htmlFor:"main-author-role"},"Role:"),r.a.createElement("input",{type:"text",name:"main-author-role",value:null!==D?D:"",onChange:function(e){return F(e.target.value)},onFocus:function(e){return st(!1)},onBlur:function(e){return st(!0)}}),ha(0))),r.a.createElement("div",{className:"other-authors-area"},T.map((function(e,t){return r.a.createElement("div",{className:"other-author-input",key:t},r.a.createElement("div",{className:"other-author-input-name"},r.a.createElement("label",{htmlFor:"name"},"name:"),r.a.createElement("input",{type:"text",name:"name",value:e,onChange:function(e){var a=e.target.value;W((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onFocus:function(e){return ut((function(e){return e.map((function(e,a){return a!==t&&e}))}))},onBlur:function(e){return ut((function(e){return e.map((function(e,a){return a===t||e}))}))}}),function(e){return r.a.createElement("div",{className:it[e]?"add-new-book-page-popup-wrapper hidden":"add-new-book-page-popup-wrapper"},r.a.createElement("div",{className:"add-new-book-page-popup"},r.a.createElement("span",null,"Add authors in the order they are listed on the book cover, or alphabetically if there is no cover or various editions disagree.")),r.a.createElement("div",{className:"add-new-book-page-popup-tip"}))}(t)),r.a.createElement("div",{className:"other-author-input-role"},r.a.createElement("label",{htmlFor:"role"},"role:"),r.a.createElement("input",{type:"text",name:"role",value:z[t],onChange:function(e){var a=e.target.value;Y((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onFocus:function(e){return ft((function(e){return e.map((function(e,a){return a!==t+1&&e}))}))},onBlur:function(e){return ft((function(e){return e.map((function(e,a){return a===t+1||e}))}))}}),ha(t+1)))})),r.a.createElement("button",{className:"add-new-author-button",onClick:function(e){e.preventDefault(),W((function(e){return e.concat("")})),Y((function(e){return e.concat("")})),ut((function(e){return e.concat(!0)})),ft((function(e){return e.concat(!0)}))}},"Add new author"))),r.a.createElement("div",{className:"form-isbn-area"},r.a.createElement("label",{htmlFor:"isbn",className:"main-label"},"isbn"),r.a.createElement("input",{type:"text",name:"isbn",value:H,onChange:function(e){return J(e.target.value)}})),r.a.createElement("div",{className:"form-publisher-area"},r.a.createElement("label",{htmlFor:"publisher",className:"main-label"},"publisher"),r.a.createElement("input",{type:"text",name:"publisher",value:X,onChange:function(e){return $(e.target.value)}})),r.a.createElement("div",{className:"form-published-area"},r.a.createElement("label",{htmlFor:"published",className:"main-label"},"published"),r.a.createElement("div",{className:"published"},r.a.createElement("div",{className:"published-year"},r.a.createElement("label",{htmlFor:"published-year"},"year:"),r.a.createElement("input",{type:"text",name:"published-year",value:ne,onChange:function(e){return re(e.target.value)},onFocus:function(e){return vt(!1)},onBlur:function(e){return vt(!0)}}),ba),r.a.createElement("div",{className:"published-month"},r.a.createElement("label",{htmlFor:"published-month"},"month:"),r.a.createElement("select",{name:"published-month",value:ce,onChange:function(e){return le(e.target.value)}},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"0"},"January"),r.a.createElement("option",{value:"1"},"February"),r.a.createElement("option",{value:"2"},"March"),r.a.createElement("option",{value:"3"},"April"),r.a.createElement("option",{value:"4"},"May"),r.a.createElement("option",{value:"5"},"June"),r.a.createElement("option",{value:"6"},"July"),r.a.createElement("option",{value:"7"},"August"),r.a.createElement("option",{value:"8"},"September"),r.a.createElement("option",{value:"9"},"October"),r.a.createElement("option",{value:"10"},"November"),r.a.createElement("option",{value:"11"},"December"))),r.a.createElement("div",{className:"published-day"},r.a.createElement("label",{htmlFor:"published-day"},"day:"),r.a.createElement("select",{name:"published-day",value:me,onChange:function(e){return de(e.target.value)}},r.a.createElement("option",null),Array(31).fill(0).map((function(e,t){return r.a.createElement("option",{key:t,value:(t+1).toString()},t+1)})))))),r.a.createElement("div",{className:"form-pages-area"},r.a.createElement("label",{htmlFor:"number-of-pages",className:"main-label"},"number of pages"),r.a.createElement("input",{type:"text",name:"number-of-pages",value:ge,onChange:function(e){return he(e.target.value)}})),r.a.createElement("div",{className:"form-format-area"},r.a.createElement("label",{htmlFor:"format",className:"main-label"},"format"),Ee?r.a.createElement("input",{type:"text",value:Ne,onChange:function(e){return Oe(e.target.value)}}):r.a.createElement("select",{name:"format",value:Ne,onChange:function(e){return Oe(e.target.value)},onFocus:function(e){return yt(!1)},onBlur:function(e){return yt(!0)}},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"Paperback"},"Paperback"),r.a.createElement("option",{value:"Hardcover"},"Hardcover"),r.a.createElement("option",{value:"Mass Market Paperback"},"Mass Market Paperback"),r.a.createElement("option",{value:"Kindle Edition"},"Kindle Edition"),r.a.createElement("option",{value:"Nook"},"Nook"),r.a.createElement("option",{value:"ebook"},"ebook"),r.a.createElement("option",{value:"Library Binding"},"Library Binding"),r.a.createElement("option",{value:"Audiobook"},"Audiobook"),r.a.createElement("option",{value:"Audio CD"},"Audio CD"),r.a.createElement("option",{value:"Audio Cassette"},"Audio Cassette"),r.a.createElement("option",{value:"Audible Audio"},"Audible Audio"),r.a.createElement("option",{value:"CD-ROM"},"CD-ROM"),r.a.createElement("option",{value:"MP3 CD"},"MP3 CD"),r.a.createElement("option",{value:"Board book"},"Board book"),r.a.createElement("option",{value:"Leather Bound"},"Leather Bound"),r.a.createElement("option",{value:"Unbound"},"Unbound"),r.a.createElement("option",{value:"Spiral-bound"},"Spiral-bound"),r.a.createElement("option",{value:"Unknown Binding"},"Unknown Binding")),Ee?r.a.createElement("button",{className:"set-format-to-options",onClick:function(e){ke(!1),Oe("")}},"options"):r.a.createElement("button",{className:"set-format-to-other-button",onClick:function(e){ke(!0),yt(!0),Oe("")}},"Other"),Ee?null:va),r.a.createElement("div",{className:"form-amazon-link-area"},r.a.createElement("label",{htmlFor:"amazon-link",className:"main-label"},"amazon link"),r.a.createElement("input",{type:"text",name:"amazon-link",value:Ie,onChange:function(e){return Se(e.target.value)},onFocus:function(e){return jt(!1)},onBlur:function(e){return jt(!0)}}),Ea),r.a.createElement("div",{className:"form-description-area"},r.a.createElement("label",{htmlFor:"description",className:"main-label"},"description"),r.a.createElement("textarea",{name:"description",rows:"20",value:k,onChange:function(e){return w(e.target.value)},onFocus:function(e){return Pt(!1)},onBlur:function(e){return Pt(!0)}}),ka),r.a.createElement("div",{className:"form-edition-language-area"},r.a.createElement("label",{htmlFor:"edition-language",className:"main-label"},"edition language"),r.a.createElement("select",{name:"edition-language",value:Ce,onChange:function(e){return Ae(e.target.value)},onFocus:function(e){return Rt(!1)},onBlur:function(e){return Rt(!0)}},r.a.createElement("option",{value:"Select..."},"Select..."),["Arabic","Bengali","Chinese","Dutch","English","French","German","Hindi","Italian","Japanese","Korean","Portuguese","Russian","Spanish"].map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),wa)),xa=null===i?r.a.createElement("form",{className:"add-new-book-page-work-settings-form"},r.a.createElement("div",{className:"work-settings-form-top"},r.a.createElement("h2",null,"Work Settings"),r.a.createElement("span",null,"Original publication date, characters, awards, and setting apply to all books in this work.")),r.a.createElement("div",{className:"work-settings-form-bottom"},r.a.createElement("div",{className:"form-original-title-area"},r.a.createElement("label",{htmlFor:"original-title",className:"main-label"},"original title"),r.a.createElement("input",{type:"text",name:"original-title",value:Me,onChange:function(e){return De(e.target.value)},onFocus:function(e){return Gt(!1)},onBlur:function(e){return Gt(!0)}}),ya),r.a.createElement("div",{className:"form-original-publication-date-area"},r.a.createElement("label",{htmlFor:"original-publication-date",className:"main-label"},"original publication date"),r.a.createElement("div",{className:"original-publication-date"},r.a.createElement("div",{className:"published-year"},r.a.createElement("label",{htmlFor:"published-year"},"year:"),r.a.createElement("input",{type:"text",name:"published-year",value:Le,onChange:function(e){return Te(e.target.value)},onFocus:function(e){return _t(!1)},onBlur:function(e){return _t(!0)}}),Na),r.a.createElement("div",{className:"published-month"},r.a.createElement("label",{htmlFor:"published-month"},"month:"),r.a.createElement("select",{name:"published-month",value:qe,onChange:function(e){return ze(e.target.value)}},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"0"},"January"),r.a.createElement("option",{value:"1"},"February"),r.a.createElement("option",{value:"2"},"March"),r.a.createElement("option",{value:"3"},"April"),r.a.createElement("option",{value:"4"},"May"),r.a.createElement("option",{value:"5"},"June"),r.a.createElement("option",{value:"6"},"July"),r.a.createElement("option",{value:"7"},"August"),r.a.createElement("option",{value:"8"},"September"),r.a.createElement("option",{value:"9"},"October"),r.a.createElement("option",{value:"10"},"November"),r.a.createElement("option",{value:"11"},"December"))),r.a.createElement("div",{className:"published-day"},r.a.createElement("label",{htmlFor:"published-day"},"day:"),r.a.createElement("select",{name:"published-day",value:Ve,onChange:function(e){return He(e.target.value)}},r.a.createElement("option",null),Array(31).fill(0).map((function(e,t){return r.a.createElement("option",{key:t,value:(t+1).toString()},t+1)})))))))):null,ja=p?r.a.createElement("div",{className:"add-new-book-page-left-section"},"warning"===Jt?ia:"error"===Jt?ua:null,da,pa,$t.length>0?ma:null,Oa,xa,r.a.createElement("div",{className:"add-new-book-page-left-section-bottom"},r.a.createElement("span",null,r.a.createElement("span",{className:"red-asterisk"},"*"),r.a.createElement("span",null,"denotes required field")),r.a.createElement(ae.a,{sitekey:"6Lda6nUaAAAAAFivpKuKT0S3apFL1Py17ZFn2faF",onChange:function(e){0!==e.length?Qt(!0):Qt(!1)}}),r.a.createElement("input",{type:"submit",value:"Create book",onClick:function(e){if(e.preventDefault(),Yt){var t=[];x.length<1&&t.push("title"),P.length<1&&t.push("author"),(ne.length>0&&Number.isNaN(parseInt(ne))||Le.length>0&&Number.isNaN(parseInt(Le)))&&t.push("year"),ge.length>0&&Number.isNaN(parseInt(ge))&&t.push("pages"),0===t.length?O.createNewBook({title:x,authorNames:[P].concat(T.filter((function(e){return e.length>0}))),authorRoles:[null!==D&&D.length>0?D:"Writer"].concat(z.filter((function(e,t){return T[t].length>0}))).map((function(e){return 0===e.length?"Writer":e})),isbn:H,publisher:X,publishedYear:ne,publishedMonth:ce,publishedDay:me,numberOfPages:ge,format:Ne,amazonLink:Ie,description:k,editionLanguage:"Select..."!==Ce?Ce:"",originalTitle:Me,originalPublicationYear:Le,originalPublicationMonth:qe,originalPublicationDay:Ve,coverImage:void 0!==u.current&&null!==u.current&&u.current.files.length>0?URL.createObjectURL(u.current.files[0]):"",history:a}):Kt("error"),ea(t)}else Kt("warning")}}))):null,Ia=r.a.createElement("div",{className:"add-new-book-page-right-section"},r.a.createElement("div",{className:"add-cover-image-section"},r.a.createElement("span",null,"Add a cover image for this book."),r.a.createElement("input",{type:"file",ref:u})),r.a.createElement("div",{className:"guidelines-section"},r.a.createElement("span",{className:"guidelines-section-title"},"Guidelines"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"Authors: "),"Add authors in the order they are listed on the book cover, or alphabetically if there is no cover or various editions disagree."),r.a.createElement("li",null,r.a.createElement("b",null,"Format: "),"Should generally be Hardcover, Paperback, Audio CD, Ebook, etc"),r.a.createElement("li",null,r.a.createElement("b",null,"Title: "),"If the book is in a series, put which book it is in parenthesis after the title. For example: Harry Potter and the Sorcerer's Stone (Harry Potter, #1)."),r.a.createElement("li",null,r.a.createElement("b",null,"Types of books: "),"Please only add books. Books generally have ISBN numbers (but don't have to), and are usually published. Periodicals such as newspapers, magazines, and comics are not books. However a volume of comics or articles or a graphic novel is considered a book.")))),Sa=r.a.createElement("div",{className:"add-new-book-page-main-content"},ja,Ia);return r.a.createElement("div",{className:"add-new-book-page"},r.a.createElement(A,null),Sa,r.a.createElement(S,null))}),re=(a(94),function(e){var t=e.match.params.bookId,a=Object(n.useState)(!1),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)({}),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(1),p=Object(b.a)(d,2),f=p[0],v=p[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,Object(R.trackPromise)(O.getBookInfoForTopShelvesPage(t));case 3:e.t1=e.sent,(0,e.t0)(e.t1),c(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var E=s?r.a.createElement("h1",{className:"book-top-shelves-page-header"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(t,u.title)},u.title),r.a.createElement("span",null," > Top Shelves")):null,k=s?r.a.createElement("div",{className:"book-top-shelves-page-showing-shelf-numbers"},r.a.createElement("span",{className:"page-description"},"Top shelves for ".concat(u.title)),r.a.createElement("span",{className:"showing-numbers"},"Showing ".concat(100*(f-1)+1,"-").concat(f!==Math.ceil(u.genres.length/100)?100*f:u.genres.length," of ").concat(u.genres.length))):null,w=s&&Math.ceil(u.genres.length/100)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return v((function(e){return e-1}))},disabled:1===f},"\xab previous"),Array.from({length:Math.ceil(u.genres.length/100)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return v(e)},disabled:f===e},f!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return v((function(e){return e+1}))},disabled:f===Math.ceil(u.genres.length/100)},"next \xbb")):null,y=s?r.a.createElement("div",{className:"book-top-shelves-page-genre-list"},u.genres.filter((function(e,t){return t>=100*(f-1)&&t<=100*f-1})).map((function(e,a){return r.a.createElement("div",{className:"book-top-shelves-page-genre",key:a},r.a.createElement("a",{className:"genre-a",href:O.pageGenerator.generateGenrePage(e.name)},e.name.toLowerCase().replace(/ /g,"-")),r.a.createElement("a",{className:"user-shelves-a",href:O.pageGenerator.generateBookGenreShelfPage(t,u.title,e.name)},e.userCount>1?"".concat(e.userCount," people"):"1 person"))})),w):null,N=r.a.createElement("div",{className:"book-top-shelves-page-main-content"},E,k,y);return r.a.createElement("div",{className:"book-top-shelves-page"},r.a.createElement(A,null),N,r.a.createElement(S,null))}),oe=(a(95),function(e){var t=e.match,a=e.location,o=t.params.bookGenreShelfPageId,s=new URLSearchParams(a.search).get("shelf"),c=o.split(".")[0],l=o.split(".")[1].replace(/_/g," "),i=Object(n.useState)(!1),u=Object(b.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)({}),f=Object(b.a)(p,2),v=f[0],E=f[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=E,e.next=3,Object(R.trackPromise)(O.getBookInfoForGenreShelfPage(c,s));case 3:e.t1=e.sent,(0,e.t0)(e.t1),d(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,s]);var k=m?r.a.createElement("h1",{className:"book-genre-shelf-page-header"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(c,l)},void 0===v.seriesInstance?l:"".concat(l," (").concat(v.series,", #").concat(v.seriesInstance,")")),r.a.createElement("span",null," > "),r.a.createElement("a",{href:O.pageGenerator.generateBookTopShelvesPage(c)},"Top Shelves"),r.a.createElement("span",null," > "),r.a.createElement("span",null,s)):null,w=m?r.a.createElement("div",{className:"book-genre-shelf-page-left-section"},v.users.map((function(e,t){return r.a.createElement("div",{className:"user-card",key:t},r.a.createElement("a",{className:"user-card-picture-a",href:O.pageGenerator.generateUserPage(e.id,e.firstName)},r.a.createElement("img",{className:"user-card-picture",src:void 0!==e.picture?e.picture:"https://s.gr-assets.com/assets/nophoto/user/m_100x100-c7bfe730633c9983e27caaa66a8e244a.png",alt:e.firstName})),r.a.createElement("div",{className:"user-card-right-section"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(e.id,e.firstName),className:"user-name-a"},e.firstName),r.a.createElement("span",null,"".concat(e.numberOfBooks," books")),r.a.createElement("span",null,"".concat(e.numberOfFriends," friends")),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.id,e.firstName,[s])},"".concat(e.numberOfBooksOnShelf," ").concat(s," books"))))}))):null,y=m?r.a.createElement("div",{className:"book-genre-shelf-page-right-section"},r.a.createElement("span",{className:"popular-books-title"},"POPULAR ".concat(s.toUpperCase()," BOOKS")),r.a.createElement("div",{className:"popular-books-list"},v.popularBooksOnShelf.map((function(e,t){return r.a.createElement("div",{className:"popular-book-card",key:t},r.a.createElement("a",{className:"image-container",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title})),r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(e.id,e.title)},e.title))})))):null,N=r.a.createElement("div",{className:"book-genre-shelf-page-main-content"},k,r.a.createElement("div",{className:"central-section"},w,y));return r.a.createElement("div",{className:"book-genre-shelf-page"},r.a.createElement(A,null),N,r.a.createElement(S,null))}),se=(a(96),function(e){var t=e.match.params.bookTriviaPageId,a=Object(n.useState)(!1),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)({}),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(1),p=Object(b.a)(d,2),f=p[0],v=p[1],E=t.split(".")[0],k=t.split(".")[1].replace(/_/g," ");Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,Object(R.trackPromise)(O.getBookInfoForTriviaPage(E));case 3:e.t1=e.sent,(0,e.t0)(e.t1),c(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[E]);var w=s?r.a.createElement("h1",{className:"book-trivia-page-header"},void 0===u.series?"Trivia about ".concat(k):"Trivia about ".concat(k," (").concat(u.series,", #").concat(u.seriesInstance,")")):null,y=r.a.createElement("a",{className:"back-to-book-page-a",href:O.pageGenerator.generateBookPage(E,k)},"back to book page \xbb"),N=s?r.a.createElement("div",{className:"book-trivia-page-quizzes-section"},r.a.createElement("span",{className:"book-trivia-page-quizzes-title"},"QUIZZES"),r.a.createElement("div",{className:"book-trivia-page-quizzes-other-quizzes"},r.a.createElement("span",null,r.a.createElement("a",{href:O.pageGenerator.generateCreateQuizPage()},"create a quiz")," ","or"," ",r.a.createElement("a",{href:O.pageGenerator.generateQuizzesPage()},"see other quizzes"))),r.a.createElement("div",{className:"quiz-questions"},u.quizQuestions.filter((function(e,t){return t<30*f&&t>=30*(f-1)})).map((function(e,t){return r.a.createElement("div",{className:"quiz-question",key:t},r.a.createElement("div",{className:"quiz-question-top-section"},r.a.createElement("a",{className:"quiz-title",href:O.pageGenerator.generateQuizPage(e.quizId,e.quizName)},e.quizName),r.a.createElement("span",{className:"quiz-author-span"},"by"," ",r.a.createElement("a",{href:O.pageGenerator.generateUserPage(e.creatorId,e.creatorFirstName)},e.creatorFirstName))),r.a.createElement("div",{className:"quiz-question-middle-section"},r.a.createElement("span",{className:"question"},void 0===e.book?e.question:"".concat(e.question," ").concat(e.book)),r.a.createElement("div",{className:"quiz-number-of-questions-and-rating"},r.a.createElement("span",null,"".concat(e.numberOfQuestions," questions")),r.a.createElement("div",{className:"quiz-rating"},r.a.createElement("div",{className:e.rating>=1?"static-star small full":e.rating>=.5?"static-star small almost-full":e.rating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=2?"static-star small full":e.rating>=1.5?"static-star small almost-full":e.rating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=3?"static-star small full":e.rating>=2.5?"static-star small almost-full":e.rating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=4?"static-star small full":e.rating>=3.5?"static-star small almost-full":e.rating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=5?"static-star small full":e.rating>=4.5?"static-star small almost-full":e.rating>4?"static-star small almost-empty":"static-star small empty"})))),r.a.createElement("div",{className:"quiz-question-bottom-section"},r.a.createElement("span",null,"".concat(e.numberOfUsersWhoTookQuiz," people took this quiz | "),r.a.createElement("a",{href:O.pageGenerator.generateQuizPage(e.quizId,e.quizName)},"take this quiz"))))}))),Math.ceil(u.quizQuestions.length/30)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return v((function(e){return e-1}))},disabled:1===f},"\xab previous"),Array.from({length:Math.ceil(u.quizQuestions.length/30)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return v(e)},disabled:f===e},f!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return v((function(e){return e+1}))},disabled:f===Math.ceil(u.quizQuestions.length/30)},"next \xbb")):null):null,x=r.a.createElement("div",{className:"book-trivia-page-main-content"},w,y,N);return r.a.createElement("div",{className:"book-trivia-page"},r.a.createElement(A,null),x,r.a.createElement(S,null))}),ce=(a(97),function(e){var t=e.match,a=Object(c.f)(),o=t.params.bookQuotesPageId,s=o.split("-")[0],l=o.split("-").slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "),i=Object(n.useState)(!1),u=Object(b.a)(i,2),d=u[0],p=u[1],f=Object(n.useState)({}),v=Object(b.a)(f,2),E=v[0],k=v[1],w=Object(n.useState)(1),y=Object(b.a)(w,2),N=y[0],x=y[1],j=Object(n.useState)(!0),I=Object(b.a)(j,2),B=I[0],P=I[1],C=Object(n.useState)(!0),U=Object(b.a)(C,2),M=U[0],D=U[1],F=Object(n.useState)(!0),G=Object(b.a)(F,2),L=G[0],T=G[1],W=Object(n.useState)(""),_=Object(b.a)(W,2),q=_[0],z=_[1],Y=Object(n.useState)(""),Q=Object(b.a)(Y,2),V=Q[0],H=Q[1],J=Object(n.useState)(""),K=Object(b.a)(J,2),Z=K[0],X=K[1],$=Object(n.useState)(0),ee=Object(b.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),re=Object(b.a)(ne,2),oe=re[0],se=re[1],ce=Object(n.useState)([]),le=Object(b.a)(ce,2),ie=le[0],ue=le[1],me=Object(n.useState)(""),de=Object(b.a)(me,2),pe=de[0],fe=de[1],ge=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k,e.next=3,Object(R.trackPromise)(O.getBookInfoForQuotesPage(ge.userUID,s));case 3:e.t1=e.sent,(0,e.t0)(e.t1),p(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,ge.userUID]);var he=function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(ge.userUID,s),k((function(e){return Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0,userProgress:void 0,userRating:void 0})})))},be=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),e.next=3,O.addBookToShelf(ge.userUID,s,t,a);case 3:k((function(e){return Object(m.a)(Object(m.a)({},e),{},{userStatus:t})})),se(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.rateBook(ge.userUID,s,t,a);case 2:k((function(e){return Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0!==e.userStatus?e.userStatus:"read",userRating:t})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==ge.userUID&&void 0!==ge.userUID&&t.length>0)){e.next=4;break}return e.next=3,O.updateBookInShelf(ge.userUID,s,parseInt(t));case 3:k((function(e){return Object(m.a)(Object(m.a)({},e),{},{userProgress:parseInt(t)})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=r.a.createElement("h1",{className:"book-quotes-page-header"},"".concat(l," Quotes")),we=d&&"reading"===E.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("div",{className:B?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up reading"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,r.a.createElement("b",null,"Update your reading progress:")),r.a.createElement("span",null,"I'm on page"," ",r.a.createElement("input",{type:"text",value:V,className:M?"page-progress-input":"page-progress-input white-background",onClick:function(e){D(!1),P(!1)},onChange:function(e){return H(e.target.value)}})," ","of ",E.pageCount,"."," ",r.a.createElement("a",{href:void 0!==ge.userUID&&null!==ge.userUID?O.pageGenerator.generateUserShelfPage(ge.userUID,ge.userInfo.firstName,["reading"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:M?"shelf-pop-up-bottom hidden":"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(e){Ee(V),P(!0),D(!0)}},"Submit"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){P(!0),D(!0)}},"Cancel"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{className:"progress-finished-button",onClick:function(e){be("read"),P(!0),D(!0)}},"Finished book"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:he}),r.a.createElement("span",null,"Currently Reading")):d&&"read"===E.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("div",{className:"shelf-pop-up-wrapper"},r.a.createElement("div",{className:"shelf-pop-up read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("a",{href:O.pageGenerator.generateWriteReviewPageForBook(E.id)},"Write a review"),r.a.createElement("span",null,"\xb7"),r.a.createElement("a",{href:void 0!==ge.userUID&&null!==ge.userUID?O.pageGenerator.generateUserShelfPage(ge.userUID,ge.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:he}),r.a.createElement("span",null,"Read")):d&&"to-read"===E.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("div",{className:B?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up to-read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,"#",r.a.createElement("input",{type:"text",value:Z,className:"shelf-pop-up-to-read-input",onChange:function(e){return X(e.target.value)},onClick:function(e){P(!1),D(!1)}})," ","on your ",r.a.createElement("b",null,"To Read")," shelf.")),M?r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("a",{href:void 0!==ge.userUID&&null!==ge.userUID?O.pageGenerator.generateUserShelfPage(ge.userUID,ge.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf")):r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(e){O.changeBookPosition(ge.userUID,E.id,parseInt(Z)),k((function(e){return Object(m.a)(Object(m.a)({},e),{},{toReadBookPosition:parseInt(Z)})})),P(!0),D(!0)}},"Save"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){P(!0),D(!0)}},"Cancel"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:he}),r.a.createElement("span",null,"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return be("to-read")}},oe?"...saving":"Want to Read"),ye=r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:"book-options-dropdown"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"dropdown-read-button",onClick:function(){return be("read")}},"Read"),r.a.createElement("button",{className:"dropdown-currently-reading-button",onClick:function(){return be("reading")}},"Currently Reading"),r.a.createElement("button",{className:"dropdown-want-to-read-button",onClick:function(){return be("to-read")}},"Want to Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:"dropdown-add-shelf",onClick:function(e){return T(!1)}},"Add Shelf"),r.a.createElement("div",{className:L?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",value:q,onChange:function(e){return z(e.target.value)}}),r.a.createElement("button",{className:"dropdown-add-shelf-add-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(q.length>0)){e.next=4;break}return e.next=3,O.addBookToUserShelf(ge.userUID,E.rootBook,q,null,a);case 3:T(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Add"))))),Ne=d?r.a.createElement("div",{className:"book-quotes-page-book-card"},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"cover-wrapper",href:O.pageGenerator.generateBookPage(s,l)},r.a.createElement("img",{src:void 0!==E.cover?E.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:l})),r.a.createElement("div",{className:"book-info"},r.a.createElement("span",{className:"book-title"},r.a.createElement("a",{className:"book-title-bold",href:O.pageGenerator.generateBookPage(s,l)},l)," ","by"," ",r.a.createElement("a",{className:"author-name",href:O.pageGenerator.generateAuthorPage(E.authorId,E.authorName)},E.authorName)),r.a.createElement("span",{className:"numbers"},"".concat(E.numberOfRatings," ratings, ").concat(E.averageRating," average rating, ").concat(E.numberOfReviews," reviews")))),r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"book-page-user-shelf-section"},r.a.createElement("div",{className:"add-to-shelf-buttons"},r.a.createElement("div",{className:"want-to-read-button-and-options ".concat(void 0!==E.userStatus?E.userStatus:"to-read")},we,ye))),r.a.createElement("div",{className:"book-page-rate-book"},void 0===E.userRating?null:r.a.createElement("button",{className:"clear-rating-button",onClick:function(){return ve(void 0)}},"Clear rating"),void 0===E.userRating?r.a.createElement("span",{className:"rate-this-book"},"Rate this book"):r.a.createElement("span",{className:"rate-this-book my-rating"},"My rating:"),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:te>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return ae(1)},onMouseLeave:function(e){return ae(void 0===E.userRating?0:E.userRating)},onClick:function(){return ve(1)}}),r.a.createElement("div",{className:te>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return ae(2)},onMouseLeave:function(e){return ae(void 0===E.userRating?0:E.userRating)},onClick:function(){return ve(2)}}),r.a.createElement("div",{className:te>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return ae(3)},onMouseLeave:function(e){return ae(void 0===E.userRating?0:E.userRating)},onClick:function(){return ve(3)}}),r.a.createElement("div",{className:te>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return ae(4)},onMouseLeave:function(e){return ae(void 0===E.userRating?0:E.userRating)},onClick:function(){return ve(4)}}),r.a.createElement("div",{className:te>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return ae(5)},onMouseLeave:function(e){return ae(void 0===E.userRating?0:E.userRating)},onClick:function(){return ve(5)}}))))):null,Oe=d?r.a.createElement("span",{className:"book-quotes-page-showing-numbers-span"},r.a.createElement("span",{className:"big-text"},"".concat(l," Quotes ")),r.a.createElement("span",{className:"small-text"},"Showing ".concat(30*(N-1)+1,"-").concat(N===Math.ceil(E.quotes.length/30)?E.quotes.length:30*N," of ").concat(E.quotes.length))):null,xe=d?r.a.createElement("div",{className:"book-quotes-page-quote-list"},E.quotes.filter((function(e,t){return t>=30*(N-1)&&t<=30*N})).map((function(e,t){return r.a.createElement("div",{className:"quote-card",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("span",{className:"quote"},"\u201c".concat(e.content,"\u201d")),r.a.createElement("span",{className:"quote-authorship"},r.a.createElement("span",{className:"dash"},"\u2015 "),"".concat(E.authorName,", ").concat(l)),0!==e.tags.length?r.a.createElement("span",{className:"tag-list"},r.a.createElement("span",null,"tags: "),r.a.createElement("span",null,e.tags.map((function(t,a){return a===e.tags.length-1?r.a.createElement("a",{key:a,href:O.pageGenerator.generateQuotesTagPage(t)},t):r.a.createElement("span",{key:a},r.a.createElement("a",{href:O.pageGenerator.generateQuotesTagPage(t)},t),", ")})))):null),r.a.createElement("div",{className:"right-section"},null!==ge.userUID&&e.usersWhoLiked.includes(ge.userUID)?ie.includes(t)?r.a.createElement("a",{className:"quote-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"View quote"):r.a.createElement("a",{className:"quote-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"In my quotes"):r.a.createElement("button",{className:"like-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.likeQuote(ge.userUID,e.id,a);case 2:k((function(e){return Object(m.a)(Object(m.a)({},e),{},{quotes:e.quotes.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{usersWhoLiked:e.usersWhoLiked.concat(ge.userUID)}):e}))})})),ue((function(e){return e.concat(t)}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Like"),r.a.createElement("a",{className:"number-of-likes-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"".concat(e.usersWhoLiked.length," likes"))))})),Math.ceil(E.quotes.length/30)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return x((function(e){return e-1}))},disabled:1===N},"\xab previous"),Array.from({length:Math.ceil(E.quotes.length/30)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return x(e)},disabled:N===e},N!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return x((function(e){return e+1}))},disabled:N===Math.ceil(E.quotes.length/30)},"next \xbb")):null):null,je=r.a.createElement("div",{className:"book-quotes-page-main-content-left-section"},ke,Ne,Oe,xe),Ie=r.a.createElement("div",{className:"book-quotes-page-main-content-right-section"},r.a.createElement("form",{className:"top-section"},r.a.createElement("input",{className:"search-quote input",type:"text",placeholder:"Find quotes by keyword, author",value:pe,onChange:function(e){return fe(e.target.value)}}),r.a.createElement("a",{className:"search-a",href:O.pageGenerator.generateQuotesSearchPage(pe)},"Search")),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("span",null,r.a.createElement("a",{href:O.pageGenerator.generateQuotesPage()},"All Quotes")," |"," ",r.a.createElement("a",{href:O.pageGenerator.generateAddQuotePage()},"Add A Quote")))),Se=r.a.createElement("div",{className:"book-quotes-page-main-content"},je,Ie);return r.a.createElement("div",{className:"book-quotes-page"},r.a.createElement(A,null),Se,r.a.createElement(S,null))}),le=(a(98),function(e){var t=e.match.params.bookId,a=Object(n.useState)(!1),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)(1),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)({}),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)(""),k=Object(b.a)(E,2),w=k[0],y=k[1],N=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,Object(R.trackPromise)(O.getBookInfoForListsPage(t));case 3:e.t1=e.sent,(0,e.t0)(e.t1),c(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var x=s?r.a.createElement("h1",{className:"book-lists-page-header"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(t,f.title)},void 0===f.series?f.title:"".concat(f.title," (").concat(f.series,", #").concat(f.seriesInstance,")"))," > Lists"):null,j=s?r.a.createElement("span",{className:"book-lists-page-authorship"},"by"," ",r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(f.authorId,f.authorName)},f.authorName),f.authorIsMember?r.a.createElement("span",{className:"goodreads-author-span"}," (Goodreads Author)"):null):null,I=s?r.a.createElement("div",{className:"book-lists-page-book-card"},r.a.createElement("a",{className:"cover-wrapper",href:O.pageGenerator.generateBookPage(t,f.title)},r.a.createElement("img",{src:void 0!==f.cover?f.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:f.title})),r.a.createElement("div",{className:"right-section"},x,j)):null,B=s?r.a.createElement("div",{className:"book-lists-page-lists-list"},f.lists.filter((function(e,t){return t>=30*(u-1)&&t<=30*u-1})).map((function(e,t){return r.a.createElement("div",{className:"book-list",key:t},r.a.createElement("div",{className:"covers"},e.bookCovers.map((function(t,a){return r.a.createElement("a",{className:"book-cover-wrapper",href:O.pageGenerator.generateListPage(e.id,e.name),key:a},r.a.createElement("img",{src:void 0!==t?t:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:"".concat(e.name," book")}))}))),r.a.createElement("a",{className:"list-name-a",href:O.pageGenerator.generateListPage(e.id,e.name)},e.name),r.a.createElement("span",{className:"list-details-span"},"".concat(1===e.bookPosition?"1st":2===e.bookPosition?"2nd":3===e.bookPosition?"3rd":"".concat(e.bookPosition,"th")," out of ").concat(e.bookCovers.length," books \u2014 ").concat(e.voterCount," voters")))})),Math.ceil(f.lists.length/30)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return m((function(e){return e-1}))},disabled:1===u},"\xab previous"),Array.from({length:Math.ceil(f.lists.length/30)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return m(e)},disabled:u===e},u!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return m((function(e){return e+1}))},disabled:u===Math.ceil(f.lists.length/30)},"next \xbb")):null):null,P=r.a.createElement("div",{className:"book-lists-page-main-content-left-section"},I,B),C=r.a.createElement("div",{className:"book-lists-page-main-content-right-section"},r.a.createElement("form",{className:"top-section"},r.a.createElement("input",{className:"search-quote input",type:"text",placeholder:"Search lists",value:w,onChange:function(e){return y(e.target.value)}}),r.a.createElement("a",{className:"search-a",href:O.pageGenerator.generateQuotesSearchPage(w)},"Search")),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("a",{href:O.pageGenerator.generateCreateListPage()},"Create New List"),r.a.createElement("a",{href:O.pageGenerator.generateListopiaPage()},"All Lists"),r.a.createElement("a",{href:null!==N.userUID?O.pageGenerator.generateListsCreatedByUserPage(N.userUID,N.userInfo.firstName):"/user/sign_in"},"Lists I Created"),r.a.createElement("a",{href:null!==N.userUID?O.pageGenerator.generateListsVotedByUserPage(N.userUID,N.userInfo.firstName):"/user/sign_in"},"Lists I've Voted On"),r.a.createElement("a",{href:null!==N.userUID?O.pageGenerator.generateListsLikedByUserPage(N.userUID,N.userInfo.firstName):"/user/sign_in"},"Lists I've Liked"),r.a.createElement("a",{className:"listopia-home-a",href:O.pageGenerator.generateListopiaPage()},"Listopia Home"))),U=r.a.createElement("div",{className:"book-lists-page-main-content"},P,C);return r.a.createElement("div",{className:"book-lists-page"},r.a.createElement(A,null),U,r.a.createElement(S,null))}),ie=(a(99),function(e){var t=e.match,a=Object(c.f)(),o=t.params.authorPageId,s=Object(n.useRef)(),l=Object(n.useRef)(),i=o.split(".")[0],u=o.split(".")[1].replace(/_/g," "),d=u.split(" ")[0],p=Object(n.useState)(!1),f=Object(b.a)(p,2),v=f[0],E=f[1],k=Object(n.useState)({}),w=Object(b.a)(k,2),y=w[0],N=w[1],x=Object(n.useState)([]),j=Object(b.a)(x,2),I=j[0],B=j[1],P=Object(n.useState)([]),C=Object(b.a)(P,2),U=C[0],M=C[1],D=Object(n.useState)([]),F=Object(b.a)(D,2),G=F[0],T=F[1],W=Object(n.useState)([]),_=Object(b.a)(W,2),q=_[0],z=_[1],Y=Object(n.useState)([]),Q=Object(b.a)(Y,2),V=Q[0],H=Q[1],J=Object(n.useState)([]),K=Object(b.a)(J,2),Z=K[0],X=K[1],$=Object(n.useState)([]),ee=Object(b.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)([]),re=Object(b.a)(ne,2),oe=re[0],se=re[1],ce=Object(n.useState)(!1),le=Object(b.a)(ce,2),ie=le[0],ue=le[1],me=Object(n.useState)(!1),de=Object(b.a)(me,2),pe=de[0],fe=de[1],ge=Object(n.useState)(!1),he=Object(b.a)(ge,2),be=he[0],ve=he[1],Ee=Object(n.useState)(!1),ke=Object(b.a)(Ee,2),we=ke[0],ye=ke[1],Ne=Object(n.useState)(!1),Oe=Object(b.a)(Ne,2),xe=Oe[0],je=Oe[1],Ie=Object(n.useState)([]),Se=Object(b.a)(Ie,2),Be=Se[0],Pe=Se[1],Ce=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getAuthorInfoForAuthorPage(Ce.userUID,i));case 2:t=e.sent,N(t),B(t.booksByAuthor.map((function(e){return!1}))),X(t.booksByAuthor.map((function(e){return!0}))),ae(t.booksByAuthor.map((function(e){return""}))),se(t.booksByAuthor.map((function(e){return void 0!==e.userRating?e.userRating:0}))),M(t.booksByAuthor.map((function(e){return!0}))),T(t.booksByAuthor.map((function(e){return!0}))),z(t.booksByAuthor.map((function(e){return""}))),H(t.booksByAuthor.map((function(e){return""}))),E(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i,Ce.userUID]),Object(n.useEffect)((function(){document.addEventListener("click",(function(e){null===s.current||void 0===s.current||null===l.current||void 0===l.current||s.current.contains(e.target)||l.current.contains(e.target)||ve(!1)}))}),[]);var Ae=v&&y.booksByAuthor.filter((function(e){return 0!==e.averageRating})).length>0?y.booksByAuthor.filter((function(e){return 0!==e.averageRating})).reduce((function(e,t){return e+t.averageRating/y.booksByAuthor.filter((function(e){return 0!==e.averageRating})).length}),0):0,Ue=v?y.booksByAuthor.reduce((function(e,t){return e+t.ratings}),0):0,Re=v?y.booksByAuthor.reduce((function(e,t){return e+t.numberOfReviews}),0):0,Me=function(e,t){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(Ce.userUID,e.id),N((function(e){return Object(m.a)(Object(m.a)({},e),{},{booksByAuthor:e.booksByAuthor.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0,userProgress:void 0,userRating:void 0}):e}))})})))},De=function(){var e=Object(h.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=6;break}return B((function(e){return e.map((function(e,t){return t===n||e}))})),e.next=4,O.addBookToShelf(Ce.userUID,t.id,r,a);case 4:N((function(e){return Object(m.a)(Object(m.a)({},e),{},{booksByAuthor:e.booksByAuthor.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:r}):e}))})})),B((function(e){return e.map((function(e,t){return t!==n&&e}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(h.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=4;break}return e.next=3,O.rateBook(Ce.userUID,t.id,r,a);case 3:N((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{booksByAuthor:e.booksByAuthor.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0===e.userStatus?"read":e.userStatus,userRating:r}):e}))})}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(h.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==Ce.userUID&&void 0!==Ce.userUID&&void 0!==t.id&&n.length>0)){e.next=4;break}return e.next=3,O.updateBookInShelf(Ce.userUID,t.id,parseInt(n));case 3:N((function(e){return Object(m.a)(Object(m.a)({},e),{},{booksByAuthor:e.booksByAuthor.map((function(e,t){return t===a?Object(m.a)(Object(m.a)({},e),{},{userProgress:n}):e}))})}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Le=v?r.a.createElement("div",{className:"follow-button-and-dropdown"},r.a.createElement("button",{className:"follow-author-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.followUnfollowAuthor(null!==Ce?Ce.userUID:null,i,a);case 2:N((function(e){return Object(m.a)(Object(m.a)({},e),{},{followers:null!==Ce&&e.followers.map((function(e){return e.id})).includes(Ce.userUID)?e.followers.filter((function(e){return e.id!==Ce.userUID})):null!==Ce?e.followers.concat({id:Ce.userUID,name:Ce.userInfo.firstName,profilePicture:void 0!==Ce.userInfo.profilePicture?Ce.userInfo.profilePicture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png"}):e.followers})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onMouseOver:function(e){null!==Ce&&y.followers.map((function(e){return e.id})).includes(Ce.userUID)&&(document.getElementsByClassName("follow-author-button")[0].innerHTML="Unfollow")},onMouseOut:function(e){null!==Ce&&y.followers.map((function(e){return e.id})).includes(Ce.userUID)&&(document.getElementsByClassName("follow-author-button")[0].innerHTML="Following")}},null!==Ce&&void 0!==Ce.userUID&&y.followers.map((function(e){return e.id})).includes(Ce.userUID)?"Following":"Follow Author"),r.a.createElement("div",{className:"follow-author-dropdown-trigger",onClick:function(e){ve((function(e){return!e}))},ref:l},r.a.createElement("div",{className:be?"follow-author-dropdown":"follow-author-dropdown hidden",ref:s},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateUserCompareBooksPage(i)},"Compare books")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.addRemoveAuthorToFavorites(Ce.userUID,i,a);case 2:null!==Ce&&y.usersWhoHaveAsFavorite.includes(Ce.userUID)?(N((function(e){return Object(m.a)(Object(m.a)({},e),{},{usersWhoHaveAsFavorite:e.usersWhoHaveAsFavorite.filter((function(e){return e!==e.userUID}))})})),ue(!1),fe(!0)):null!==Ce&&(N((function(e){return Object(m.a)(Object(m.a)({},e),{},{usersWhoHaveAsFavorite:e.usersWhoHaveAsFavorite.concat(Ce.userUID)})})),ue(!0),fe(!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},null!==Ce&&y.usersWhoHaveAsFavorite.includes(Ce.userUID)?"Remove from my favorite authors":"Add to my favorite authors")),r.a.createElement("li",null,r.a.createElement("a",{href:O.pageGenerator.generateFavoriteAuthorsPage()},"Edit my favorite authors")))))):null,Te=v?r.a.createElement("div",{className:"author-page-photo-and-stats-area"},r.a.createElement("div",{className:"top-section"},r.a.createElement("div",{className:"profile-picture-section"},r.a.createElement("img",{src:void 0!==y.profilePicture?y.profilePicture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:u}),y.GRMember?r.a.createElement("div",{className:"author-stats"},r.a.createElement("a",{href:O.pageGenerator.generateUserRatingsPage(i)},"".concat(y.numberOfRatings," ratings")),r.a.createElement("span",null,"|"),r.a.createElement("a",{href:O.pageGenerator.generateUserReviewsPage(i)},"".concat(y.numberOfReviews," reviews")),r.a.createElement("span",null,"|"),r.a.createElement("button",{onClick:function(e){return ye(!0)}},"avg rating:".concat(Math.round(y.averageRating,2))),r.a.createElement("div",{className:we?"author-rating-stats":"author-rating-stats hidden"})):null),Le),r.a.createElement("div",{className:"bottom-section"},void 0!==y.mostFollowedPosition?r.a.createElement("span",null,"#".concat(y.mostFollowedPosition," most followed")):null,void 0!==y.reviewerPosition?r.a.createElement("span",null,"#".concat(y.reviewerPosition," best reviewers")):null)):null,We=v&&y.GRMember?r.a.createElement("div",{className:"author-page-year-in-books-section"},r.a.createElement("a",{className:"section-title",href:O.pageGenerator.generateUserYearInBooksPage((new Date).getFullYear(),i,u)},"".concat(d.toUpperCase(),"'S YEAR IN BOOKS")),r.a.createElement("div",{className:"inner-content"},r.a.createElement("a",{className:"image-wrapper",href:O.pageGenerator.generateUserYearInBooksPage((new Date).getFullYear(),i,u)},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/yyib/yearly/yyib_badge-58c13ce9eeb35da7dda8dcf63aba2962.jpg",alt:"Year in books"})),r.a.createElement("div",{className:"year-in-books-right-section"},r.a.createElement("span",null,r.a.createElement("b",null,"".concat(d,"'s ").concat((new Date).getFullYear()," Year in Books"))),r.a.createElement("span",null,"Take a look at ".concat(d,"'s Year in Books. The long, the short\u2014it\u2019s all here.")),r.a.createElement("a",{href:O.pageGenerator.generateUserYearInBooksPage((new Date).getFullYear(),i,u)},"See ".concat(d,"'s ").concat((new Date).getFullYear()," Year in Books"))))):null,_e=v?r.a.createElement("div",{className:"author-page-followers-section"},r.a.createElement("span",{className:"section-title"},"".concat(u.toUpperCase(),"'S FOLLOWERS (").concat(y.followers.length,")")),y.followers.length>0?r.a.createElement("div",{className:"follower-list"},y.followers.map((function(e,t){return r.a.createElement("a",{href:O.pageGenerator.generateUserPage(e.id,e.name),key:t},r.a.createElement("img",{src:e.profilePicture,alt:e.name}))}))):r.a.createElement("span",{className:"no-followers-span"},"None yet.")):null,qe=v&&y.GRMember?r.a.createElement("div",{className:"author-page-bookshelves-section"},r.a.createElement("a",{className:"section-title",href:O.pageGenerator.generateUserBooksPage(i)},"".concat(d.toUpperCase(),"'S BOOKSHELVES")),r.a.createElement("div",{className:"shelf-list"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(i,d,["read"])},"read (".concat(y.numberOfReadBooks,")")),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(i,d,["reading"])},"currently-reading (".concat(y.numberOfReadingBooks,")")),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(i,d,["to-read"])},"to-read (".concat(y.numberOfToReadBooks,")")),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(i,d,["favorites"])},"favorites (".concat(y.numberOfFavoriteBooks,")")))):null,ze=v&&y.GRMember&&y.friends.length>0?r.a.createElement("div",{className:"author-page-friends-section"},r.a.createElement("span",{className:"section-title"},"".concat(d.toUpperCase(),"'S FRIENDS")),r.a.createElement("div",{className:"friend-list"},y.friends.map((function(e,t){return r.a.createElement("div",{className:"friend-card",key:t},r.a.createElement("a",{className:"profile-picture-wrapper",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},r.a.createElement("img",{src:void 0!==e.profilePicture?e.profilePicture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.name})),r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.id,e.name)},e.name),r.a.createElement("div",{className:"friend-stats"},r.a.createElement("span",null,"".concat(e.numberOfBooks," books")),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("span",null,"".concat(e.numberOfFriends," friends")))))})))):null,Ye=r.a.createElement("div",{className:"author-page-main-content-left-section"},Te,We,_e,qe,ze),Qe=v&(ie||pe)?r.a.createElement("div",{className:"author-now-in-favorites-message"},ie?r.a.createElement("span",null,"".concat(u," is now on your "),r.a.createElement("b",null,"Favorite Authors")," list"):r.a.createElement("span",null,"".concat(u," has been removed from your "),r.a.createElement("b",null,"Favorite Authors")," list"),r.a.createElement("button",{className:"close-button",onClick:function(e){ue(!1),fe(!1)}})):null,Ve=v?r.a.createElement("div",{className:"author-page-author-main-info-section"},r.a.createElement("div",{className:"author-name-area"},r.a.createElement("span",{className:"author-name"},u),y.GRMember?r.a.createElement("div",{className:"goodreads-seal-area"},r.a.createElement("div",{className:"goodreads-seal"}),r.a.createElement("span",null,"Goodreads Author")):null),r.a.createElement("table",{className:"author-info-table"},r.a.createElement("tbody",null,void 0!==y.placeOfBirth||void 0!==y.dateOfBirth?r.a.createElement("tr",null,r.a.createElement("th",null,"Born"),r.a.createElement("td",{className:"birth-info"},void 0!==y.placeOfBirth?r.a.createElement("td",null,"in ".concat(y.placeOfBirth)):null,void 0!==y.dateOfBirth?r.a.createElement("td",null,"".concat(Object(L.a)(y.dateOfBirth,"MMMM dd, yyyy"))):null)):null,void 0!==y.website?r.a.createElement("tr",null,r.a.createElement("th",null,"Website"),r.a.createElement("td",null,r.a.createElement("a",{href:y.website},y.website))):null,void 0!==y.twitter?r.a.createElement("tr",null,r.a.createElement("th",null,"Twitter"),r.a.createElement("td",null,r.a.createElement("a",{href:"https://twitter.com/".concat(y.twitter)},y.twitter))):null,void 0!==y.genre?r.a.createElement("tr",null,r.a.createElement("th",null,"Genre"),r.a.createElement("td",null,y.genre.map((function(e,t){return r.a.createElement("span",{className:"author-genre",key:t},r.a.createElement("a",{key:t,href:O.pageGenerator.generateGenrePage(e)},e.split("-").map((function(e){return e.length>1?e[0].toUpperCase()+e.slice(1):e[0]})).join(" ")),t!==y.genre.length-1?r.a.createElement("span",null,", "):null)})))):null,void 0!==y.influences?r.a.createElement("tr",null,r.a.createElement("th",null,"Influences"),r.a.createElement("td",null,y.influences.map((function(e,t){return r.a.createElement("span",{className:"author-influence"},r.a.createElement("a",{key:t,href:O.pageGenerator.generateAuthorPage(e.id,e.name)},e.name),t!==y.influences.length-1?r.a.createElement("span",null,", "):null)})))):null,void 0!==y.memberSince?r.a.createElement("tr",null,r.a.createElement("th",null,"Member Since"),r.a.createElement("td",null,Object(L.a)(y.memberSince,"MMMM yyyy"))):null)),void 0!==y.description?r.a.createElement("div",{className:xe?"author-description-area more":"author-description-area"},r.a.createElement("p",null,y.description),r.a.createElement("button",{className:"author-description-show-more-button",onClick:function(e){return je((function(e){return!e}))}},xe?"(less)":"...more")):null):null,He=v?r.a.createElement("div",{className:"author-page-author-books-section"},r.a.createElement("span",{className:"section-title"},"".concat(u.toUpperCase(),"'S BOOKS")),r.a.createElement("div",{className:"author-books-stats"},r.a.createElement("span",null,"Average rating: ".concat(Ae.toFixed(2))),r.a.createElement("span",{className:"separator"},"\xb7"),r.a.createElement("span",null,"".concat(Ue," ratings")),r.a.createElement("span",{className:"separator"},"\xb7"),r.a.createElement("span",null,"".concat(Re," reviews"))),r.a.createElement("div",{className:"author-book-list"},y.booksByAuthor.filter((function(e,t){return t<=9})).map((function(e,t){return r.a.createElement("div",{className:"author-book-card",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"book-cover-wrapper",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title})),r.a.createElement("div",{className:"book-details-section"},r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(e.id,e.title)},void 0===e.series?e.title:"".concat(e.title," (").concat(e.series,", #").concat(e.seriesInstance,")")),r.a.createElement("span",{className:"by-author-span"},r.a.createElement("span",null,"by "),r.a.createElement("a",{className:"author-book-card-author-a",href:O.pageGenerator.generateAuthorPage(i,u)},u),y.GRMember?r.a.createElement("span",{className:"book-card-goodreads-member-span"}," ","(Goodreads Author)"):null),r.a.createElement("div",{className:"author-book-card-stats"},r.a.createElement("div",{className:"author-page-general-rating"},r.a.createElement("div",{className:"author-page-general-rating-stars"},r.a.createElement("div",{className:e.averageRating>=1?"static-star small full":e.averageRating>=.5?"static-star small almost-full":e.averageRating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.averageRating>=2?"static-star small full":e.averageRating>=1.5?"static-star small almost-full":e.averageRating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.averageRating>=3?"static-star small full":e.averageRating>=2.5?"static-star small almost-full":e.averageRating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.averageRating>=4?"static-star small full":e.averageRating>=3.5?"static-star small almost-full":e.averageRating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.averageRating>=5?"static-star small full":e.averageRating>=4.5?"static-star small almost-full":e.averageRating>4?"static-star small almost-empty":"static-star small empty"})),r.a.createElement("span",null,r.a.createElement("span",null,"".concat(e.averageRating.toFixed(2)," avg rating \u2014 ").concat(e.ratings," ratings ").concat(void 0!==e.publishedYear?"\u2014 published ".concat(e.publishedYear):""," \u2014")),r.a.createElement("a",{href:O.pageGenerator.generateBookEditionsPage(e.id,e.title)}," ".concat(e.editions," editions"))))))),r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"want-to-read-button-and-options ".concat(void 0!==e.userStatus?e.userStatus:"")},function(e,t){return v&&"reading"===e.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("div",{className:U[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up reading"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,r.a.createElement("b",null,"Update your reading progress:")),r.a.createElement("span",null,"I'm on page"," ",r.a.createElement("input",{type:"text",value:q[t],className:G[t]?"page-progress-input":"page-progress-input white-background",onClick:function(e){T((function(e){return e.map((function(e,a){return a!==t&&e}))})),M((function(e){return e.map((function(e,a){return a!==t&&e}))}))},onChange:function(e){var a=e.target.value;z((function(e){return e.map((function(e,n){return n===t?a:e}))}))}})," ","of ",e.pageCount,"."," ",r.a.createElement("a",{href:void 0!==Ce.userUID&&null!==Ce.userUID?O.pageGenerator.generateUserShelfPage(Ce.userUID,Ce.userInfo.firstName,["reading"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:G[t]?"shelf-pop-up-bottom hidden":"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){Ge(e,t,q[t]),T((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Submit"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){T((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{className:"progress-finished-button",onClick:function(a){De(e,t,"read"),T((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Finished book"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:function(a){return Me(e,t)}}),r.a.createElement("span",null,"Currently Reading")):v&&"read"===e.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("div",{className:"shelf-pop-up-wrapper"},r.a.createElement("div",{className:"shelf-pop-up read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("a",{href:O.pageGenerator.generateWriteReviewPageForBook(e.id)},"Write a review"),r.a.createElement("span",null,"\xb7"),r.a.createElement("a",{href:void 0!==Ce.userUID&&null!==Ce.userUID?O.pageGenerator.generateUserShelfPage(Ce.userUID,Ce.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:function(a){return Me(e,t)}}),r.a.createElement("span",null,"Read")):v&&"to-read"===e.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("div",{className:U[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up to-read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,"#",r.a.createElement("input",{type:"text",value:V[t],className:"shelf-pop-up-to-read-input",onChange:function(e){var a=e.target.value;H((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onClick:function(e){T((function(e){return e.map((function(e,a){return a!==t&&e}))})),M((function(e){return e.map((function(e,a){return a!==t&&e}))}))}})," ","on your ",r.a.createElement("b",null,"To Read")," shelf.")),G[t]?r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("a",{href:void 0!==Ce.userUID&&null!==Ce.userUID?O.pageGenerator.generateUserShelfPage(Ce.userUID,Ce.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf")):r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){O.changeBookPosition(Ce.userUID,e.id,parseInt(V[t])),N((function(e){return Object(m.a)(Object(m.a)({},e),{},{booksByAuthor:e.booksByAuthor.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{toReadBookPosition:parseInt(V[t])}):e}))})})),T((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Save"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){T((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:function(a){return Me(e,t)}}),r.a.createElement("span",null,"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return De(e,t,"to-read")}},I[t]?"...saving":"Want to Read")}(e,t),function(e,t){return r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:"book-options-dropdown"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"dropdown-read-button",onClick:function(){return De(e,t,"read")}},"Read"),r.a.createElement("button",{className:"dropdown-currently-reading-button",onClick:function(){return De(e,t,"reading")}},"Currently Reading"),r.a.createElement("button",{className:"dropdown-want-to-read-button",onClick:function(){return De(e,t,"to-read")}},"Want to Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:"dropdown-add-shelf",onClick:function(e){return X((function(e){return e.map((function(e,a){return a!==t&&e}))}))}},"Add Shelf"),r.a.createElement("div",{className:Z[t]?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",value:te[t],onChange:function(e){var a=e.target.value;ae((function(e){return e.map((function(e,n){return n===t?a:e}))}))}}),r.a.createElement("button",{className:"dropdown-add-shelf-add-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(te[t].length>0)){n.next=4;break}return n.next=3,O.addBookToUserShelf(Ce.userUID,e.rootBook,te[t],null,a);case 3:X((function(e){return e.map((function(e,a){return a===t||e}))}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Add")))))}(e,t)),function(e,t){return r.a.createElement("div",{className:"book-page-rate-book"},void 0===e.userRating?null:r.a.createElement("button",{className:"clear-rating-button",onClick:function(){return Fe(e,t,void 0)}},"Clear rating"),void 0===e.userRating?r.a.createElement("span",{className:"rate-this-book"},"Rate this book"):r.a.createElement("span",{className:"rate-this-book my-rating"},"My rating:"),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:oe[t]>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return se((function(e){return e.map((function(e,a){return a===t?1:e}))}))},onMouseLeave:function(a){return se((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Fe(e,t,1)}}),r.a.createElement("div",{className:oe[t]>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return se((function(e){return e.map((function(e,a){return a===t?2:e}))}))},onMouseLeave:function(a){return se((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Fe(e,t,2)}}),r.a.createElement("div",{className:oe[t]>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return se((function(e){return e.map((function(e,a){return a===t?3:e}))}))},onMouseLeave:function(a){return se((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Fe(e,t,3)}}),r.a.createElement("div",{className:oe[t]>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return se((function(e){return e.map((function(e,a){return a===t?4:e}))}))},onMouseLeave:function(a){return se((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Fe(e,t,4)}}),r.a.createElement("div",{className:oe[t]>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return se((function(e){return e.map((function(e,a){return a===t?5:e}))}))},onMouseLeave:function(a){return se((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Fe(e,t,5)}})))}(e,t)))})))):null,Je=v&&y.seriesByAuthor.length>0?r.a.createElement("div",{className:"author-page-author-series-section"},r.a.createElement("span",{className:"title-span"},"SERIES BY ".concat(u.toUpperCase())),r.a.createElement("div",{className:"series-list"},y.seriesByAuthor.filter((function(e,t){return t<=4})).map((function(e,t){return r.a.createElement("div",{className:"author-page-series-card",key:t},r.a.createElement("div",{className:"series-card-left-section"},r.a.createElement("div",{className:"series-title"},r.a.createElement("span",{className:"bold-title"},e.title),r.a.createElement("span",{className:"number-of-books"}," (".concat(e.books.length," books)"))),r.a.createElement("div",{className:"series-authorship"},r.a.createElement("span",{className:"by-author-span"},"by"," ",r.a.createElement("a",{className:"author-series-card-author-a",href:O.pageGenerator.generateAuthorPage(i,u)},u),y.GRMember?r.a.createElement("span",{className:"series-card-goodreads-member-span"}," ","(Goodreads Author)"):null),r.a.createElement("div",{className:"series-stats"},r.a.createElement("div",{className:"author-page-general-rating-stars"},r.a.createElement("div",{className:e.averageRating>=1?"static-star small full":e.averageRating>=.5?"static-star small almost-full":e.averageRating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.averageRating>=2?"static-star small full":e.averageRating>=1.5?"static-star small almost-full":e.averageRating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.averageRating>=3?"static-star small full":e.averageRating>=2.5?"static-star small almost-full":e.averageRating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.averageRating>=4?"static-star small full":e.averageRating>=3.5?"static-star small almost-full":e.averageRating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.averageRating>=5?"static-star small full":e.averageRating>=4.5?"static-star small almost-full":e.averageRating>4?"static-star small almost-empty":"static-star small empty"})),r.a.createElement("span",{className:"stats-span"},"".concat(e.averageRating," avg rating \u2014 ").concat(e.numberOfRatings," ratings"))))),r.a.createElement("div",{className:"series-card-right-section"},e.books.sort((function(e,t){return e.seriesInstance-t.seriesInstance})).map((function(e,t){return r.a.createElement("a",{className:"series-card-book-cover-wrapper",key:t,href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))}))))})))):null,Ke=v&&y.relatedNews.length>0?r.a.createElement("div",{className:"author-page-related-news-section"},r.a.createElement("span",{className:"section-title"},"RELATED NEWS"),r.a.createElement("div",{className:"news-list"},y.relatedNews.filter((function(e,t){return t<=2})).map((function(e,t){return r.a.createElement("div",{className:"related-news-card",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"article-title",href:O.pageGenerator.generateArticlePage(e.id,e.title)},e.title),r.a.createElement("p",null,e.content),r.a.createElement("a",{className:"article-read-more-a",href:O.pageGenerator.generateArticlePage(e.id,e.title)},"Read more..."),r.a.createElement("span",{className:"article-like-count"},"".concat(e.numberOfLikes," likes \xb7 ").concat(e.numberOfComments," comments"))),void 0!==e.image?r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:"article-image-wrapper",href:O.pageGenerator.generateArticlePage(e.id,e.title)},r.a.createElement("img",{src:e.image,alt:e.title}))):null)})))):null,Ze=v&&y.quotes.length>0?r.a.createElement("div",{className:"author-page-quotes-section"},r.a.createElement("span",{className:"section-title"},"QUOTES BY ".concat(u.toUpperCase())),r.a.createElement("div",{className:"quote-list"},y.quotes.filter((function(e,t){return t<=2})).map((function(e,t){return r.a.createElement("div",{className:"quote-card",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("span",{className:"quote"},"\u201c".concat(e.content,"\u201d")),r.a.createElement("span",{className:"quote-authorship"},r.a.createElement("span",{className:"dash"},"\u2015 "),"".concat(u,", ").concat(e.bookTitle)),0!==e.tags.length?r.a.createElement("span",{className:"tag-list"},r.a.createElement("span",null,"tags: "),r.a.createElement("span",null,e.tags.map((function(t,a){return a===e.tags.length-1?r.a.createElement("a",{key:a,href:O.pageGenerator.generateQuotesTagPage(t),className:"tag-list-tag-a"},t):r.a.createElement("span",{key:a},r.a.createElement("a",{href:O.pageGenerator.generateQuotesTagPage(t),className:"tag-list-tag-a"},t),", ")})))):null),r.a.createElement("div",{className:"right-section"},null!==Ce.userUID&&e.usersWhoLiked.includes(Ce.userUID)?Be.includes(t)?r.a.createElement("a",{className:"quote-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"View quote"):r.a.createElement("a",{className:"quote-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"In my quotes"):r.a.createElement("button",{className:"like-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.likeQuote(Ce.userUID,e.id,a);case 2:N((function(e){return Object(m.a)(Object(m.a)({},e),{},{quotes:e.quotes.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{usersWhoLiked:e.usersWhoLiked.concat(Ce.userUID)}):e}))})})),Pe((function(e){return e.concat(t)}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Like"),r.a.createElement("a",{className:"number-of-likes-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"".concat(e.usersWhoLiked.length," likes"))))})))):null,Xe=v&&void 0!==y.favoriteAuthors&&y.favoriteAuthors.length>0?r.a.createElement("div",{className:"author-page-favorite-authors-section"},r.a.createElement("div",{className:"section-title"},r.a.createElement("a",{href:O.pageGenerator.generateUserFavoriteAuthorsPage(i),className:"title"},"".concat(u.toUpperCase(),"'S FAVORITE AUTHORS")),r.a.createElement("a",{className:"grey-small-a",href:O.pageGenerator.generateUserFavoriteAuthorsPage(i)},"view all ".concat(y.favoriteAuthors.length))),r.a.createElement("div",{className:"main-section"},y.favoriteAuthors.map((function(e,t){return r.a.createElement("div",{className:"favorite-author-card",key:t},r.a.createElement("a",{className:"author-image-wrapper",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},r.a.createElement("img",{src:void 0!==e.image?e.image:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.name})),r.a.createElement("a",{className:"author-name-a",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},e.name),r.a.createElement("span",null,"author of"),r.a.createElement("a",{className:"best-book-a",href:O.pageGenerator.generateBookPage(e.bestBookId,e.bestBookTitle)},e.bestBookTitle))}))),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("a",{href:O.pageGenerator.generateUserFavoriteAuthorsPage(i)},"More of ".concat(u,"'s favorite authors...")))):null,$e=r.a.createElement("div",{className:"author-page-main-content-right-section"},Qe,Ve,He,Je,Ke,Ze,Xe),et=r.a.createElement("div",{className:"author-page-main-content"},Ye,$e);return r.a.createElement("div",{className:"author-page"},r.a.createElement(A,null),et,r.a.createElement(S,null))}),ue=(a(100),function(){var e=Object(c.f)(),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)([]),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)(!1),k=Object(b.a)(E,2),w=k[0],y=k[1],N=Object(n.useState)(!1),x=Object(b.a)(N,2),j=x[0],I=x[1],B=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.trackPromise)(O.fetchUserFavoriteAuthors(B.userUID,e));case 2:a=t.sent,m(a),v(a.map((function(e,t){return(t+1).toString()}))),s(!0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[B.userUID,e]),Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return y(!0),e.next=4,O.changeFavoriteAuthors(B.userUID,u.map((function(e){return e.id})));case 4:y(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[B.userUID,u,o]);var P=r.a.createElement("div",{className:"error-message-container"},r.a.createElement("span",{className:"error-message"},"Please use positive whole numbers for positions."),r.a.createElement("button",{className:"close-message-button",onClick:function(e){return I(!1)}})),C=r.a.createElement("h1",{className:"favorite-authors-page-header"},"Your Favorite Authors"),U=r.a.createElement("span",{className:"no-authors-yet-message"},"You haven\u2019t marked any author as your favorite."),M=r.a.createElement("span",{className:"reorder-instruction-message"},'To re-order your favorite authors, you can drag and drop or manually enter a position number, then click "Save position changes".'),D=function(e,t){return r.a.createElement("div",{className:"favorite-authors-page-author-card",key:t,draggable:"true",onDragStart:function(e){e.dataTransfer.setData("index",t.toString())},onDragOver:function(e){return e.preventDefault()},onDrop:function(e){e.preventDefault();var a=parseInt(e.dataTransfer.getData("index"));Number.isNaN(a)||m((function(e){return e.map((function(n,r){return r===a?e[t]:r===t?e[a]:n}))}))}},r.a.createElement("div",{className:"left-section"},w?r.a.createElement("img",{className:"loading-spinner",src:"https://s.gr-assets.com/assets/loading-45f04d682f1e9151cf1e6fb18a1bde21.gif",alt:"Loading"}):r.a.createElement("input",{type:"text",className:"order-input",value:f[t],onChange:function(e){var a=e.target.value;v((function(e){return e.map((function(e,n){return n===t?a:e}))}))}}),r.a.createElement("div",{className:"author-details"},r.a.createElement("a",{className:"author-profile-picture-wrapper",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},r.a.createElement("img",{src:void 0!==e.profilePicture?e.profilePicture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.name})),r.a.createElement("div",{className:"author-info"},r.a.createElement("a",{className:"author-name-a",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},e.name),r.a.createElement("span",null,r.a.createElement("span",null,"author of "),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.bestBookId,e.bestBookTitle)},e.bestBookTitle)),r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.id,e.name)},"".concat(e.numberOfBooks," books")),r.a.createElement("span",null,"(".concat(e.numberOfMemberReviews," member reviews)")),void 0!==e.numberOfShelvedBooks?r.a.createElement("a",{href:O.pageGenerator.generateUserReviewsPage(e.userId)},"".concat(e.numberOfShelvedBooks," books shelved")):null,void 0!==e.numberOfFriends?r.a.createElement("a",{href:O.pageGenerator.generateUserFriendsPage(e.userId,e.name)},"".concat(e.numberOfFriends," friends")):null))),r.a.createElement("div",{className:"right-section"},r.a.createElement("button",{className:"remove-author-button",onClick:function(){return function(e){window.confirm("Are you sure you want remove ".concat(u[e].name," from your list of favorite authors?"))&&m((function(t){return t.filter((function(t,a){return a!==e}))}))}(t)}},"Remove")))},F=o?r.a.createElement("div",{className:"favorite-authors-list"},M,r.a.createElement("div",{className:"header"},r.a.createElement("span",null,"Order"),r.a.createElement("span",null,"Author")),u.map((function(e,t){return D(e,t)})),r.a.createElement("button",{className:"save-positions-button",onClick:function(){f.some((function(e){return Number.isNaN(parseInt(e))||parseInt(e)<=0}))?(I(!0),v((function(e){return e.map((function(e,t){return(t+1).toString()}))}))):(I(!1),m((function(e){return e.map((function(e,t){return t})).sort((function(e,t){return f[e]-f[t]})).map((function(t){return e[t]}))})))}},"Save Position Changes")):null,G=o?r.a.createElement("div",{className:"favorite-authors-page-main-content-left-section"},C,0===u.length?U:F):null,L=o&&null!==B?r.a.createElement("div",{className:"favorite-authors-page-main-content-right-section"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(B.userUID,B.userInfo.firstName)},"Your profile \xbb")):null,T=r.a.createElement("div",{className:"favorite-authors-page-main-content"},G,L);return r.a.createElement("div",{className:"favorite-authors-page"},r.a.createElement(A,null),j?P:null,T,r.a.createElement(S,null))}),me=(a(101),function(e){var t=e.match.params.userId,a=Object(n.useState)(!1),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)({}),i=Object(b.a)(l,2),u=i[0],m=i[1],d=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,Object(R.trackPromise)(O.getUserInfoForFavoriteAuthorsForUserPage(t));case 3:e.t1=e.sent,(0,e.t0)(e.t1),c(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var p=s?r.a.createElement("h1",{className:"favorite-authors-for-user-page-header"},"".concat(null!==d&&d.userUID===t?"Your":"".concat(u.firstName,"'s")," Favorite Authors")):null,f=r.a.createElement("span",{className:"no-authors-yet-span"},"None yet."),v=s?r.a.createElement("div",{className:"favorite-authors-page-author-list"},u.authors.map((function(e,t){return r.a.createElement("div",{className:"favorite-author-card",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("div",{className:"author-details"},r.a.createElement("a",{className:"author-profile-picture-wrapper",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},r.a.createElement("img",{src:void 0!==e.profilePicture?e.profilePicture:"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/nophoto/user/m_700x933._UX150_CR0,25,150,150_RO75,1,255,255,255,255,255,255,15_.png",alt:e.name})),r.a.createElement("div",{className:"author-info"},r.a.createElement("a",{className:"author-name-a",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},e.name),r.a.createElement("span",null,r.a.createElement("span",null,"Author of "),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.bestBookId,e.bestBookTitle)},e.bestBookTitle),r.a.createElement("span",null," and "),r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.id,e.name)},"".concat(e.rootBookCount-1," more books"))),void 0!==e.numberOfShelvedBooks?r.a.createElement("a",{href:O.pageGenerator.generateUserReviewsPage(e.userId)},"".concat(e.numberOfShelvedBooks," books shelved")):null,void 0!==e.numberOfFriends?r.a.createElement("a",{href:O.pageGenerator.generateUserFriendsPage(e.userId,e.name)},"".concat(e.numberOfFriends," friends")):null))),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",null,"".concat(e.numberOfMemberReviews," member reviews")),r.a.createElement("span",null,"".concat(e.numberOfFollowers," followers"))))}))):null,E=r.a.createElement("div",{className:"favorite-authors-for-user-page-main-content-left-section"},p,s&&0===u.authors.length?f:v),k=s?r.a.createElement("div",{className:"favorite-authors-for-user-page-main-content-right-section"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(t,u.firstName)},"".concat(u.firstName,"'s profile")),r.a.createElement("a",{href:O.pageGenerator.generateFavoriteAuthorsPage()},"Manage your favorite authors \xbb")):null,w=r.a.createElement("div",{className:"favorite-authors-for-user-page-main-content"},E,k);return r.a.createElement("div",{className:"favorite-authors-for-user-page"},r.a.createElement(A,null),w,r.a.createElement(S,null))}),de=(a(102),function(){var e=Object(c.f)(),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)([]),i=Object(b.a)(l,2),u=i[0],m=i[1],d=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=m,t.next=3,Object(R.trackPromise)(O.getNotificationsForUser(d.userUID,e));case 3:t.t1=t.sent,(0,t.t0)(t.t1),s(!0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[d.userUID,e]);var p=r.a.createElement("h1",{className:"notifications-page-header"},"Notifications"),f=o?r.a.createElement("div",{className:"notification-list"},u.map((function(e,t){return r.a.createElement("div",{className:"notification-card",key:t},r.a.createElement("a",{href:e.anchorSrc,className:"notification-image-wrapper"},r.a.createElement("img",{src:e.image,alt:e.name})),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",{className:"notification-span"},e.name!==d.userInfo.firstName?r.a.createElement("span",null,r.a.createElement("strong",null,e.name),r.a.createElement("span",null," ".concat(e.nonAnchorContent," "),r.a.createElement("a",{href:e.anchorSrc}," ".concat(e.content)))):r.a.createElement("a",{href:e.anchorSrc},"".concat(e.content))),r.a.createElement("span",{className:"time-span"},Object(P.a)(e.time,new Date,{addSuffix:!0}))))}))):null;return r.a.createElement("div",{className:"notifications-page"},r.a.createElement(A,null),p,f,r.a.createElement(S,null))}),pe=(a(103),function(e){var t=Object(n.useRef)(),a=Object(n.useState)(e.firstName),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)(e.middleName),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(e.lastName),p=Object(b.a)(d,2),f=p[0],g=p[1],h=Object(n.useState)(e.showLastNameTo),v=Object(b.a)(h,2),E=v[0],k=v[1],w=Object(n.useState)(e.gender),y=Object(b.a)(w,2),N=y[0],x=y[1],j=Object(n.useState)(e.customGender),I=Object(b.a)(j,2),S=I[0],B=I[1],P=Object(n.useState)(e.pronouns),C=Object(b.a)(P,2),A=C[0],U=C[1],R=Object(n.useState)(e.showGenderTo),M=Object(b.a)(R,2),D=M[0],F=M[1],G=Object(n.useState)(e.zipCode),L=Object(b.a)(G,2),T=L[0],W=L[1],_=Object(n.useState)(e.city),q=Object(b.a)(_,2),z=q[0],Y=q[1],Q=Object(n.useState)(e.stateProvinceCode),V=Object(b.a)(Q,2),H=V[0],J=V[1],K=Object(n.useState)(e.country),Z=Object(b.a)(K,2),X=Z[0],$=Z[1],ee=Object(n.useState)(e.locationViewableBy),te=Object(b.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(e.dateOfBirth),oe=Object(b.a)(re,2),se=oe[0],ce=oe[1],le=Object(n.useState)(e.ageAndBirthdayPrivacy),ie=Object(b.a)(le,2),ue=ie[0],me=ie[1],de=Object(n.useState)(e.website),pe=Object(b.a)(de,2),fe=pe[0],ge=pe[1],he=Object(n.useState)(e.interests),be=Object(b.a)(he,2),ve=be[0],Ee=be[1],ke=Object(n.useState)(e.typeOfBooks),we=Object(b.a)(ke,2),ye=we[0],Ne=we[1],Oe=Object(n.useState)(e.aboutMe),xe=Object(b.a)(Oe,2),je=xe[0],Ie=xe[1],Se=["January","February","March","April","May","June","July","August","September","October","November","December"];return r.a.createElement("form",{className:"profile-settings"},r.a.createElement("div",{className:"left-section"},r.a.createElement("label",{htmlFor:"first-name"},"First Name ",r.a.createElement("span",{className:"red-asterisk"},"*")),r.a.createElement("input",{type:"text",className:"first-name-input",name:"first-name",value:s,onChange:function(e){return c(e.target.value)}}),r.a.createElement("label",{htmlFor:"middle-name"},"Middle Name"),r.a.createElement("input",{type:"text",className:"middle-name-input",name:"middle-name",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement("label",{htmlFor:"last-name"},"Last Name"),r.a.createElement("input",{type:"text",className:"last-name-input",name:"last-name",value:f,onChange:function(e){return g(e.target.value)}}),r.a.createElement("label",{htmlFor:"show-last-name-preference"},"Show my last name to:"),r.a.createElement("div",{className:"show-last-name-preference"},r.a.createElement("div",{className:"anyone-input-and-label"},r.a.createElement("input",{type:"radio",name:"anyone-radio-input",value:"anyone",checked:"anyone"===E,onChange:function(e){return k(e.target.value)}}),r.a.createElement("label",{htmlFor:"anyone-radio-input"},"Anyone")),r.a.createElement("div",{className:"friends-input-and-radio"},r.a.createElement("input",{type:"radio",name:"friends-radio-input",value:"friends",checked:"friends"===E,onChange:function(e){return k(e.target.value)}}),r.a.createElement("label",{htmlFor:"friends-radio-input"},"Friends"))),r.a.createElement("label",{htmlFor:"gender"},"Gender"),r.a.createElement("select",{value:N,name:"gender",className:"gender-select",onChange:function(e){return x(e.target.value)}},r.a.createElement("option",{value:""},"Select"),r.a.createElement("option",{value:"m"},"Male"),r.a.createElement("option",{value:"f"},"Female"),r.a.createElement("option",{value:"c"},"Custom")),"c"===N?r.a.createElement("div",{className:"custom-gender-section"},r.a.createElement("label",{htmlFor:"custom-gender"},"Custom gender"),r.a.createElement("input",{type:"text",name:"custom-gender",className:"custom-gender-input",value:S,onChange:function(e){return B(e.target.value)}}),r.a.createElement("label",{htmlFor:"preferred-pronoun"},"Preferred pronoun"),r.a.createElement("select",{value:A,name:"preferred-pronoun",className:"preferred-pronoun-select",onChange:function(e){return U(e.target.value)}},r.a.createElement("option",{value:"neutral"},'Neutral: "Recommend them a book!"'),r.a.createElement("option",{value:"male"},'Male: "Recommend him a book!"'),r.a.createElement("option",{value:"female"},'Female: "Recommend her a book!"'))):null,r.a.createElement("label",{html:"gender-privacy"},"Gender Viewable By"),r.a.createElement("select",{name:"gender-privacy",value:D,onChange:function(e){return F(e.target.value)}},r.a.createElement("option",{value:"everyone"},"Everyone"),r.a.createElement("option",{value:"friends-only"},"Friends Only"),r.a.createElement("option",{value:"no-one"},"No One")),r.a.createElement("span",{className:"gender-privacy-note"},"Note: Pronouns (he/she/they) will be seen by everyone regardless of this setting."),r.a.createElement("label",{htmlFor:"zip-code"},"ZIP Code ",r.a.createElement("span",{className:"small-text"},"(US only)")),r.a.createElement("input",{className:"zip-code-input",name:"zip-code",type:"text",value:T,onChange:function(e){return W(e.target.value)}}),r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("input",{className:"city-input",name:"city",type:"text",value:z,onChange:function(e){return Y(e.target.value)}}),r.a.createElement("label",{htmlFor:"state-province-code"},"State/Providence Code"),r.a.createElement("input",{className:"state-province-code-input",name:"state-province-code",type:"text",value:H,onChange:function(e){return J(e.target.value)}}),r.a.createElement("label",{htmlFor:"country"},"Country"),r.a.createElement("select",{value:X,name:"country",className:"country-select",onChange:function(e){return $(e.target.value)}},r.a.createElement("option",{value:""},"Select"),["United States","Canada","Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua and/or Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo","Cook Islands","Costa Rica","Croatia (Hrvatska)","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecudaor","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (Malvinas)","Faroe Islands","Fiji","Finland","France","France, Metropolitan","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Heard and Mc Donald Islands","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran (Islamic Republic of)","Iraq","Ireland","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Democratic People's Republic of","Korea, Republic of","Kosovo","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libyan Arab Jamahiriya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States of","Moldova, Republic of","Monaco","Mongolia","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfork Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russian Federation","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia South Sandwich Islands","South Sudan","Spain","Sri Lanka","St. Helena","St. Pierre and Miquelon","Sudan","Suriname","Svalbarn and Jan Mayen Islands","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan","Tajikistan","Tanzania, United Republic of","Thailand","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States minor outlying islands","Uruguay","Uzbekistan","Vanuatu","Vatican City State","Venezuela","Vietnam","Virigan Islands (British)","Virgin Islands (U.S.)","Wallis and Futuna Islands","Western Sahara","Yemen","Yugoslavia","Zaire","Zambia","Zimbabwe"].map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("label",{htmlFor:"location-privacy"},"Location Viewable By:"),r.a.createElement("select",{name:"location-privacy",className:"location-privacy-select",value:ae,onChange:function(e){return ne(e.target.value)}},r.a.createElement("option",{value:"everyone"},"Everyone"),r.a.createElement("option",{value:"friends-only"},"Friends Only"),r.a.createElement("option",{value:"no-one"},"No One")),r.a.createElement("label",{htmlFor:"date-of-birth"},r.a.createElement("span",null,"Date of Birth"),r.a.createElement("button",{className:"set-birthday-to-blank-button",onClick:function(e){e.preventDefault(),ce(void 0)}}," ","(set all to blank to remove)")),r.a.createElement("div",{className:"date-of-birth"},r.a.createElement("select",{className:"birth-year-select",value:void 0!==se&&null!==se?se.getFullYear():"",onChange:function(e){var t=e.target.value;ce((function(e){return""===t?void 0:new Date(parseInt(t),void 0!==e?e.getMonth():0,void 0!==e?e.getDate():1)}))}},r.a.createElement("option",{value:""}),Array(88).fill(0).map((function(e,t){return(new Date).getFullYear()-87+t})).map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),r.a.createElement("select",{className:"birth-month-select",value:void 0!==se?Se[se.getMonth()]:"",onChange:function(e){var t=e.target.value;ce((function(e){return""===t?void 0:new Date(void 0!==e?e.getFullYear():"",Se.indexOf(t),void 0!==e?e.getDate():void 0)}))}},r.a.createElement("option",{value:""}),Array(12).fill(0).map((function(e,t){return Se[t]})).map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),r.a.createElement("select",{className:"birth-day-select",value:void 0!==se&&null!==se?se.getDate():"",onChange:function(e){var t=e.target.value;ce((function(e){return""===t?void 0:new Date(void 0!==e?e.getFullYear():1990,void 0!==e?e.getMonth():0,parseInt(t))}))}},r.a.createElement("option",{value:""}),Array(31).fill(0).map((function(e,t){return r.a.createElement("option",{key:t,value:t+1},t+1)})))),r.a.createElement("label",{htmlFor:"age-and-birthday-privacy"},"Age & Birthday Privacy:"),r.a.createElement("select",{value:ue,name:"age-and-birthday-privacy",className:"age-and-birthday-privacy-select",onChange:function(e){return me(e.target.value)}},r.a.createElement("option",{value:"age-members-birthday-members"},"Age & Birthday to Goodreads members"),r.a.createElement("option",{value:"age-members-birthday-friends"},"Age to Goodreads members, Birthday to friends"),r.a.createElement("option",{value:"age-members-birthday-no-one"},"Age to Goodreads members, Birthday to no one"),r.a.createElement("option",{value:"age-friends-birthday-friends"},"Age & Birthday to friends"),r.a.createElement("option",{value:"age-friends-birthday-no-one"},"Age to friends, Birthday to no one"),r.a.createElement("option",{value:"age-no-one-birthday-no-one"},"Age & Birthday to no one"),r.a.createElement("option",{value:"age-no-one-birthday-members"},"Age to no one & Birthday to Goodreads members"),r.a.createElement("option",{value:"age-no-one-birthday-friends"},"Age to no one & Birthday to friends")),r.a.createElement("label",{htmlFor:"website"},"My Web Site",r.a.createElement("span",{className:"small-text"}," (e.g. http://www.myblog.com)")),r.a.createElement("input",{type:"text",value:fe,name:"website",className:"website-input",onChange:function(e){return ge(e.target.value)}}),r.a.createElement("label",{htmlFor:"interests"},"My Interests \u2014 favorite subjects, or really anything you know a lot about"),r.a.createElement("span",{className:"interests-note"},r.a.createElement("i",null,"(in comma separated phrases, please)")),r.a.createElement("input",{type:"text",name:"interests",className:"interests-input",value:ve,onChange:function(e){return Ee(e.target.value)}}),r.a.createElement("label",{htmlFor:"type-of-books"},"What Kind of Books Do You Like to Read?"),r.a.createElement("input",{type:"text",name:"type-of-books",className:"type-of-books-input",value:ye,onChange:function(e){return Ne(e.target.value)}}),r.a.createElement("label",{htmlFor:"about-me"},"About Me"),r.a.createElement("textarea",{name:"about-me",className:"about-me-input",value:je,onChange:function(e){return Ie(e.target.value)}}),r.a.createElement("input",{type:"submit",className:"submit-button",value:"Save Profile Settings",onClick:function(t){t.preventDefault(),e.saveProfileSettings({firstName:s,middleName:u,lastName:f,showLastNameTo:E,gender:N,customGender:S,pronouns:A,showGenderTo:D,zipCode:T,city:z,stateProvinceCode:H,country:X,locationViewableBy:ae,dateOfBirth:se,ageAndBirthdayPrivacy:ue,website:fe,interests:ve,typeOfBooks:ye,aboutMe:je})}})),r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:"profile-picture-wrapper",href:O.pageGenerator.generateUserPhotoPage(e.id)},r.a.createElement("img",{src:void 0!==e.profilePicture?e.profilePicture:"https://s.gr-assets.com/assets/nophoto/user/m_111x148-e08b4682eea7088f8cdfd67c131d51cd.png",alt:e.firstName})),void 0!==e.profilePicture?r.a.createElement("button",{className:"delete-change-profile-picture-button",onClick:function(t){return e.deleteProfilePicture()}},"Delete/Change Photo"):r.a.createElement("div",{className:"new-photo-section"},r.a.createElement("input",{type:"file",ref:t}),r.a.createElement("button",{className:"upload-photo-button",onClick:function(a){a.preventDefault(),void 0!==t.current&&null!==t.current&&e.saveProfilePicture(t.current.files[0])}},"Upload Photo")),r.a.createElement("a",{className:"delete-account-a",href:O.pageGenerator.generateDeleteAccountPage()},"Delete my account")))}),fe=(a(104),function(e){var t=Object(n.useState)(e.email),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(e.whoCanViewMyProfile),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(e.emailAddressVisibleTo),d=Object(b.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(e.friendChallengeQuestion),h=Object(b.a)(g,2),v=h[0],E=h[1],k=Object(n.useState)(""!==e.friendChallengeAnswer),w=Object(b.a)(k,2),y=w[0],N=w[1],x=Object(n.useState)(e.friendChallengeAnswer),j=Object(b.a)(x,2),I=j[0],S=j[1];return r.a.createElement("form",{className:"settings"},r.a.createElement("label",{htmlFor:"email"},"Email Address ",r.a.createElement("span",{className:"red-asterisk"},"*"),r.a.createElement("span",{className:"small-text"},void 0!==e.emailVerifiedDate?"(verified ".concat(Object(L.a)(e.emailVerifiedDate,"MM-dd-yyyy"),")"):"")),r.a.createElement("input",{type:"text",name:"email",value:o,onChange:function(e){return s(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"password"},r.a.createElement("span",null,Array(e.passwordLength).fill("*")),r.a.createElement("a",{href:O.pageGenerator.generateChangePasswordPage()},"change password")),r.a.createElement("div",{className:"privacy-section"},r.a.createElement("h2",null,"Privacy"),r.a.createElement("span",{className:"privacy-info-span"},"You control who can see your profile. Your profile includes your information on the"," ",r.a.createElement("button",{className:"profile-tab-button",onClick:e.moveToProfileTab},"profile tab"),", your bookshelves, and your friend list. Your profile image thumbnail and your name will always be visible in some areas of the site, but you can hide your last name using the setting on the"," ",r.a.createElement("button",{className:"profile-tab-button",onClick:e.moveToProfileTab},"profile tab"),". Book reviews are always public and will appear on book pages throughout the site regardless of privacy setting."),r.a.createElement("label",{htmlFor:"who-can-view-my-profile"},r.a.createElement("b",null,"Who Can View My Profile:")),r.a.createElement("div",{className:"who-can-view-my-profile"},r.a.createElement("div",{className:"anyone-input-label"},r.a.createElement("input",{type:"radio",name:"anyone",value:"anyone",checked:"anyone"===i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",{htmlFor:"anyone"},"anyone")),r.a.createElement("div",{className:"goodreads-members-input-label"},r.a.createElement("input",{type:"radio",name:"goodreads-members",value:"goodreads-members",checked:"goodreads-members"===i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",{htmlFor:"goodreads-members"},"Goodreads members")),r.a.createElement("div",{className:"just-my-friends-input-label"},r.a.createElement("input",{type:"radio",name:"just-my-friends",value:"just-my-friends",checked:"just-my-friends"===i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",{htmlFor:"just-my-friends"},"just-my-friends"))),r.a.createElement("label",{htmlFor:"email-visible-to"},"Make my email address visible to:"),r.a.createElement("div",{className:"email-visible-to"},r.a.createElement("div",{className:"friends-friends-requests-input-label"},r.a.createElement("input",{type:"radio",name:"friends-friends-requests",value:"friends-friends-requests",checked:"friends-friends-requests"===p,onChange:function(e){return f(e.target.value)}}),r.a.createElement("label",{htmlFor:"friends-friends-requests"},"Friends & friend requests")),r.a.createElement("div",{className:"no-one-input-label"},r.a.createElement("input",{type:"radio",name:"no-one",value:"no-one",checked:"no-one"===p,onChange:function(e){return f(e.target.value)}}),r.a.createElement("label",{htmlFor:"no-one"},"No one")))),r.a.createElement("div",{className:"friends-requests-section"},r.a.createElement("h2",null,"Friend Requests"),r.a.createElement("span",{className:"friends-requests-info-span"},"You can require other Goodreads members to answer a challenge question when sending you friend requests. Note that this doesn't apply to friends who already know your email address."),r.a.createElement("label",{htmlFor:"challenge-question"},"Challenge question"),r.a.createElement("span",{className:"challenge-question-example-span"},y?"Make it easy \u2014 eg. Where did I go to college? What kind of car do I drive? What is my last name?":"e.g., Why do you want to be my friend?"),r.a.createElement("input",{type:"text",name:"challenge-question",value:v,onChange:function(e){return E(e.target.value)}}),y?r.a.createElement("label",{htmlFor:"challenge-answer"},"Challenge Answer \u2014 your friends must guess this to friend you."):null,y?r.a.createElement("span",{className:"challenge-answer-span"},"Answers must be one word only."):null,y?r.a.createElement("input",{type:"text",name:"challenge-answer",className:"challenge-answer-input",value:I,onChange:function(e){return S(e.target.value)}}):null,r.a.createElement("button",{className:"require-challenge-answer-button",onClick:function(e){e.preventDefault(),N((function(e){return!e}))}},y?"Don't require a challenge answer":"Require a challenge answer")),r.a.createElement("input",{type:"submit",className:"submit-button",value:"Save account settings",onClick:function(t){t.preventDefault(),e.saveAccountSettings({email:o,whoCanViewMyProfile:i,emailAddressVisibleTo:p,friendChallengeQuestion:v,friendChallengeAnswer:I})}}),r.a.createElement("a",{className:"delete-account-a",href:O.pageGenerator.generateDeleteAccountPage()},"Delete my account"))}),ge=(a(105),function(e){var t=Object(n.useState)(e.addBookToShelves),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(e.addAFriend),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(e.voteForABookReview),d=Object(b.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(e.addAQuote),h=Object(b.a)(g,2),v=h[0],E=h[1],k=Object(n.useState)(e.recommendABook),w=Object(b.a)(k,2),y=w[0],N=w[1],O=Object(n.useState)(e.addANewStatusToBook),x=Object(b.a)(O,2),j=x[0],I=x[1],S=Object(n.useState)(e.followAnAuthor),B=Object(b.a)(S,2),P=B[0],C=B[1];return r.a.createElement("form",{className:"feed-update-settings"},r.a.createElement("h2",null,"Feed Update Settings"),r.a.createElement("span",null,"Some actions on Goodreads are published to your Update Feed. Your Update Feed is what shows up on your profile and your friends\u2018 homepages. Updates are published when you:"),r.a.createElement("div",{className:"preference-list"},r.a.createElement("div",{className:"add-book-to-shelves-preference"},r.a.createElement("input",{type:"checkbox",name:"add-book-to-shelves",checked:o,onChange:function(e){return s(e.target.checked)}}),r.a.createElement("label",{htmlFor:"add-book-to-shelves"},"Add a book to your shelves")),r.a.createElement("div",{className:"add-a-friend-preference"},r.a.createElement("input",{type:"checkbox",name:"add-a-friend",checked:i,onChange:function(e){return u(e.target.checked)}}),r.a.createElement("label",{htmlFor:"add-a-friend"},"Add a friend")),r.a.createElement("div",{className:"vote-for-a-book-review-preference"},r.a.createElement("input",{type:"checkbox",name:"vote-for-a-book-review",checked:p,onChange:function(e){return f(e.target.checked)}}),r.a.createElement("label",{htmlFor:"vote-for-a-book-review"},"Vote for a book review")),r.a.createElement("div",{className:"add-a-quote-preference"},r.a.createElement("input",{type:"checkbox",name:"add-a-quote",checked:v,onChange:function(e){return E(e.target.checked)}}),r.a.createElement("label",{htmlFor:"add-a-quote"},"Add a quote")),r.a.createElement("div",{className:"recommend-a-book"},r.a.createElement("input",{type:"checkbox",name:"recommend-a-book",checked:y,onChange:function(e){return N(e.target.checked)}}),r.a.createElement("label",{htmlFor:"recommend-a-book"},"Recommend a book")),r.a.createElement("div",{className:"add-a-new-status-to-book-preference"},r.a.createElement("input",{type:"checkbox",name:"add-a-new-status-to-book",checked:j,onChange:function(e){return I(e.target.checked)}}),r.a.createElement("label",{htmlFor:"add-a-new-status-to-book"},"Add a new status to a book I'm reading")),r.a.createElement("div",{className:"follow-an-author"},r.a.createElement("input",{type:"checkbox",name:"follow-an-author",checked:P,onChange:function(e){return C(e.target.checked)}}),r.a.createElement("label",{htmlFor:"follow-an-author"},"Follow an author"))),r.a.createElement("input",{type:"submit",value:"Save Feed Settings",className:"save-feed-settings-button",onClick:function(t){t.preventDefault(),e.saveFeedSettings({addBookToShelves:o,addAFriend:i,voteForABookReview:p,addAQuote:v,recommendABook:y,addANewStatusToBook:j,followAnAuthor:P})}}))}),he=(a(106),function(){var e=Object(c.f)(),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)({}),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)("profile"),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)(""),k=Object(b.a)(E,2),w=k[0],y=k[1],N=Object(n.useState)("yellow"),x=Object(b.a)(N,2),j=x[0],I=x[1],B=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=m,t.next=3,Object(R.trackPromise)(O.getUserSettings(B.userUID,e));case 3:t.t1=t.sent,(0,t.t0)(t.t1),s(!0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[B.userUID,e]);var P=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.saveUserSettings(B.userUID,t);case 2:y("The changes to your profile have been saved."),I("yellow");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.friendChallengeAnswer.split(" ").length>1||t.friendChallengeAnswer.split("").some((function(e){return[",",".",":",'"',"'","?","!"].includes(e)})))){e.next=5;break}y("Challenge answer must be one word and contain no spaces or punctuation."),I("red"),e.next=9;break;case 5:return e.next=7,O.saveUserSettings(B.userUID,t);case 7:y("The changes to your profile have been saved."),I("yellow");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=6;break}return a=URL.createObjectURL(t),e.next=4,O.saveUserSettings(B.userUID,{profileImage:a});case 4:y("The changes to your profile have been saved."),I("yellow");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=5;break}return e.next=3,O.deleteProfilePicture(B.userUID);case 3:y("Your photo has been deleted."),I("yellow");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=r.a.createElement("div",{className:"yellow"===j?"account-settings-saved-message yellow":"account-settings-saved-message red"},r.a.createElement("span",null,w),r.a.createElement("button",{className:"close-button",onClick:function(e){return y("")}})),F=r.a.createElement("h1",{className:"account-settings-page-header"},"Account Settings"),G=o&&null!==B?r.a.createElement("div",{className:"account-settings-page-main-content-top-section"},F,r.a.createElement("a",{href:O.pageGenerator.generateUserPage(B.userUID,u.profile.firstName)},"View My Profile")):null,L=r.a.createElement("div",{className:"tab-navigation-section"},r.a.createElement("button",{className:"profile"===f?"tab-navigation-button selected":"tab-navigation-button",onClick:function(e){return v("profile")}},"Profile"),r.a.createElement("button",{className:"settings"===f?"tab-navigation-button selected":"tab-navigation-button",onClick:function(e){return v("settings")}},"Settings"),r.a.createElement("button",{className:"feeds"===f?"tab-navigation-button selected":"tab-navigation-button",onClick:function(e){return v("feeds")}},"Feeds")),T=o?"profile"===f?r.a.createElement(pe,Object.assign({},u.profile,{saveProfileSettings:P,saveProfilePicture:U,deleteProfilePicture:M})):"settings"===f?r.a.createElement(fe,Object.assign({},u.account,{saveAccountSettings:C,moveToProfileTab:function(){v("profile")}})):r.a.createElement(ge,Object.assign({},u.feed,{saveFeedSettings:P})):null;return r.a.createElement("div",{className:"account-settings-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"account-settings-page-main-content"},""!==w?D:null,G,L,T),r.a.createElement(S,null))}),be=(a(107),function(){var e=Object(c.f)(),t=Object(n.useState)([]),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)(""),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)(""),k=Object(b.a)(E,2),w=k[0],y=k[1],N=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){null!==N.userUID&&void 0!==N.userUID||e.push({pathname:"/user/sign_in",state:{error:"User not logged in"}})}),[N.userUID,e]);var x=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.checkIfPasswordsMatch(N.userUID,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var t=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.changePassword(N.userUID,f,e);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=r.a.createElement("h1",{className:"change-password-page-header"},"Change Password"),B=r.a.createElement("div",{className:"change-password-page-error-list"},r.a.createElement("span",{className:"error-list-title"},1===o.length?"1 error prohibited this book from being saved:":"".concat(o.length," errors prohibited this book from being saved:")),r.a.createElement("ul",null,o.includes("matching")?r.a.createElement("li",null,"Password doesn't match the one in your account."):null,o.includes("short")?r.a.createElement("li",null,"Password is too short. (minimum is 6 characters)"):null,o.includes("confirm")?r.a.createElement("li",null,"Password is invalid or doesn't match"):null)),P=r.a.createElement("div",{className:"change-password-page-main-content"},I,o.length>0?B:null,r.a.createElement("div",{className:"password-area"},r.a.createElement("label",{htmlFor:"current-password"},"current password"),r.a.createElement("input",{type:"password",name:"current-password",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement("label",{htmlFor:"new-password"},"new password"),r.a.createElement("input",{type:"password",name:"new-password",value:f,onChange:function(e){return v(e.target.value)}}),r.a.createElement("label",{htmlFor:"confirm-password"},"confirm password"),r.a.createElement("input",{type:"password",name:"confirm-password",value:w,onChange:function(e){return y(e.target.value)}}),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("input",{type:"submit",value:"save changes",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x();case 3:e.sent?f!==w?s(["confirm"]):f.length<6?s(["short"]):j():s(["matching"]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement("a",{href:O.pageGenerator.generateAccountSettingsPage()},"cancel"))));return r.a.createElement("div",{className:"change-password-page"},r.a.createElement(A,null),P,r.a.createElement(S,null))}),ve=(a(108),function(){var e=Object(c.f)(),t=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){null!==t.userUID&&void 0!==t.userUID||e.push({pathname:"/user/sign_in",state:{error:"User not logged in"}})}),[t.userUID,e]);var a=function(){var a=Object(h.a)(g.a.mark((function a(){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("This will remove all your books and data from goodreads forever - are you sure?")){a.next=3;break}return a.next=3,O.deleteAccount(t.userUID,e);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),o=r.a.createElement("h1",{className:"delete-account-page-header"},"Delete My Account"),s=r.a.createElement("div",{className:"delete-account-page-main-content-left-section"},o,r.a.createElement("span",null,"This will delete your account. The ratings and reviews you've posted, your comments, writing, etc. will be removed from the site."),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("input",{type:"submit",value:"Delete My Account",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement("a",{href:O.pageGenerator.generateAccountSettingsPage()},"cancel"))),l=r.a.createElement("div",{className:"delete-account-page-main-content-right-section"},r.a.createElement("a",{href:O.pageGenerator.generateAccountSettingsPage()},"account settings"));return r.a.createElement("div",{className:"delete-account-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"delete-account-page-main-content"},s,l),r.a.createElement(S,null))}),Ee=(a(109),function(){var e=Object(c.f)(),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)([]),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)(!1),k=Object(b.a)(E,2),w=k[0],y=k[1],N=Object(n.useState)(""),x=Object(b.a)(N,2),j=x[0],I=x[1],B=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){var a,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=["contemporary","fantasy","fiction","graphic-novels","historical-fiction","manga","romance","science-fiction","thriller","young-adult","art","biography","business","chick-lit","children's","christian","classics","comics","cookbooks","crime","ebooks","gay-and-lesbian","history","horror","humor-and-comedy","memoir","music","mystery","non-fiction","paranoia","philosophy","poetry","psychology","religion","science","self-help","suspense","spirituality","sports","travel"],t.next=3,Object(R.trackPromise)(O.getFavoriteGenresForUser(B.userUID,e));case 3:n=t.sent,m(n),v(n.concat(a.filter((function(e){return!n.includes(e)})))),s(!0);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[B.userUID,e]);var P=r.a.createElement("h1",{className:"edit-favorite-genres-page-header"},"Follow Your Favorite Genres"),C=r.a.createElement("div",{className:"edit-favorite-genres-page-explanation-box"},r.a.createElement("span",null,"We use your favorite genres to make better book recommendations and tailor what you see in your Updates feed.")),U=o?r.a.createElement("div",{className:"edit-favorite-genres-page-genre-selection-area"},r.a.createElement("div",{className:"genre-boxes"},f.map((function(e,t){return r.a.createElement("div",{className:u.includes(e)?"genre-box selected":"genre-box",key:t,onClick:function(t){t.preventDefault(),u.includes(e)?m((function(t){return t.filter((function(t){return t!==e}))})):m((function(t){return t.concat(e)}))}},r.a.createElement("input",{type:"checkbox",name:"genre-checkbox",checked:u.includes(e),onClick:function(t){t.stopPropagation(),u.includes(e)?m((function(t){return t.filter((function(t){return t!==e}))})):m((function(t){return t.concat(e)}))},readOnly:!0}),r.a.createElement("label",{htmlFor:"genre-checkbox"},e.split("-").map((function(e){return 1===e.length?e.toUpperCase():e[0].toUpperCase()+e.slice(1)})).join(" ")))}))),w?r.a.createElement("div",{className:"custom-genre-section"},r.a.createElement("label",{htmlFor:"custom-genre"},"Enter other favorite genres, separated by commas:"," "),r.a.createElement("input",{type:"text",name:"custom-genre",placeholder:"ex: Chess, Cooking, Hobbies",value:j,onChange:function(e){return I(e.target.value)}})):r.a.createElement("button",{className:"custom-genres-button",onClick:function(e){return y(!0)}},"Don\u2019t see your favorite genres here?")):null,M=r.a.createElement("div",{className:"edit-favorite-genres-page-main-content"},P,C,U,r.a.createElement("input",{type:"submit",value:"Continue",onClick:function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=j.length>0?u.concat(j.split(",").map((function(e){return" "===e[0]?e.slice(1).toLowerCase().split(" ").join("-"):e.toLowerCase().split(" ").join("-")}))):u,t.next=4,O.updateFavoriteGenresForUser(B.userUID,n);case 4:e.push({pathname:"/"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}));return r.a.createElement("div",{className:"edit-favorite-genres-page"},r.a.createElement(A,null),M,r.a.createElement(S,null))}),ke=(a(110),function(e){var t=e.match.params.genre,a=Object(n.useState)(!1),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)({}),i=Object(b.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)(!1),f=Object(b.a)(p,2),v=f[0],E=f[1],k=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,Object(R.trackPromise)(O.getGenreInfo(k.userUID,t));case 3:e.t1=e.sent,(0,e.t0)(e.t1),c(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[k.userUID,t]);var w=function(e){return e.split("-").map((function(e){return 1===e.length?e.toUpperCase():e[0].toUpperCase()+e.slice(1)})).join(" ")},y=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.updateFavoriteGenresForUser(k.userUID,u.userFavoriteGenres.concat(t));case 2:d((function(e){return Object(m.a)(Object(m.a)({},e),{},{userFavoriteGenres:e.userFavoriteGenres.concat(t)})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.updateFavoriteGenresForUser(k.userUID,u.userFavoriteGenres.filter((function(e){return e!==t})));case 2:d((function(e){return Object(m.a)(Object(m.a)({},e),{},{userFavoriteGenres:e.userFavoriteGenres.filter((function(e){return e!==t}))})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=s?r.a.createElement("div",{className:"genre-page-header"},r.a.createElement("div",{className:"page-indication"},r.a.createElement("span",null,"Genres"),void 0!==u.parentGenre?r.a.createElement("span",null,">"):null,void 0!==u.parentGenre?r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(u.parentGenre)},w(u.parentGenre)):null),r.a.createElement("h1",null,w(t)),void 0!==u.userFavoriteGenres?r.a.createElement("button",{className:"user-favorite-button",onMouseOver:function(e){u.userFavoriteGenres.includes(t)&&(e.target.innerHTML="Unfavorite this Genre")},onMouseLeave:function(e){u.userFavoriteGenres.includes(t)&&(e.target.innerHTML="Favorited")},onClick:function(e){u.userFavoriteGenres.includes(t)?N():y()}},u.userFavoriteGenres.includes(t)?"Favorited":"Add to Favorite Genres"):null):null,j=s?r.a.createElement("div",{className:v?"genre-page-description-section more":"genre-page-description-section"},r.a.createElement("p",null,u.description),r.a.createElement("button",{className:"genre-description-more-less-button",onClick:function(e){E((function(e){return!e}))}},v?"(less)":"...more")):null,I=s&&u.newReleases.length>0?r.a.createElement("div",{className:"genre-page-new-releases-section"},r.a.createElement("span",{className:"section-title"},'NEW RELEASES TAGGED "'.concat(t.toUpperCase(),'"')),r.a.createElement("div",{className:"book-list"},u.newReleases.map((function(e,t){return r.a.createElement("a",{key:t,className:"book-cover-wrapper",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))})))):null,B=s&&u.mostReadThisWeek.length>0?r.a.createElement("div",{className:"genre-page-new-most-read-this-week-section"},r.a.createElement("span",{className:"section-title"},"MOST READ THIS WEEK"),r.a.createElement("div",{className:"book-list"},u.mostReadThisWeek.map((function(e,t){return r.a.createElement("a",{key:t,className:"book-cover-wrapper",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))})))):null,P=s&&u.lists.length>0?r.a.createElement("div",{className:"genre-page-lists-section"},r.a.createElement("span",{className:"section-title"},"LISTS"),r.a.createElement("div",{className:"lists-list"},u.lists.map((function(e,t){return r.a.createElement("div",{className:"list-card",key:t},r.a.createElement("div",{className:"covers"},e.bookCovers.map((function(t,a){return r.a.createElement("a",{className:"cover-wrapper",href:O.pageGenerator.generateListPage(e.id,e.title),key:a},r.a.createElement("img",{src:t,alt:"list book"}))}))),r.a.createElement("a",{className:"list-a",href:O.pageGenerator.generateListPage(e.id,e.title)},e.title),r.a.createElement("span",{className:"list-numbers"},"".concat(e.numberOfBooks," books \u2014 ").concat(e.numberOfVoters," voters")))})))):null,C=s&&u.genreBooks.length>0?r.a.createElement("div",{className:"genre-page-genre-books-section"},r.a.createElement("span",{className:"section-title"},"".concat(w(t).toUpperCase()," BOOKS")),r.a.createElement("div",{className:"book-list"},u.genreBooks.map((function(e,t){return r.a.createElement("a",{key:t,className:"book-cover-wrapper",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))})))):null,U=r.a.createElement("div",{className:"genre-page-main-content-left-section"},x,j,I,B,P,C),M=s&&u.relatedGenres.length>0?r.a.createElement("div",{className:"genre-page-related-genres-section"},r.a.createElement("span",{className:"section-title"},"RELATED GENRES"),r.a.createElement("div",{className:"related-genres-list"},u.relatedGenres.map((function(e,t){return r.a.createElement("a",{key:t,href:O.pageGenerator.generateGenrePage(e)},w(e))})))):null,D=s&&u.relatedNews.length>0?r.a.createElement("div",{className:"genre-page-related-news-section"},r.a.createElement("span",{className:"section-title"},"RELATED NEWS"),u.relatedNews.map((function(e,t){return r.a.createElement("div",{className:"article-preview",key:t},void 0!==e.image?r.a.createElement("a",{className:"article-image-wrapper",href:O.pageGenerator.generateArticlePage(e.id,e.title)},r.a.createElement("img",{src:e.image,alt:e.title})):null,r.a.createElement("a",{className:"article-title-a",href:O.pageGenerator.generateArticlePage(e.id,e.title)},e.title),r.a.createElement("p",null,e.content),r.a.createElement("a",{className:"article-read-more-a",href:O.pageGenerator.generateArticlePage(e.id,e.title)},"Read more..."))}))):null,F=s&&u.quotesTagged.length>0?r.a.createElement("div",{className:"genre-page-quotes-section"},r.a.createElement("a",{href:O.pageGenerator.generateQuotesTagPage(t),className:"section-title"},"QUOTES TAGGED \u201c".concat(w(t).toUpperCase(),"\u201d")),r.a.createElement("div",{className:"quotes-list"},u.quotesTagged.map((function(e,t){return r.a.createElement("div",{className:"quote-card",key:t},r.a.createElement("div",{className:"quote-and-author-picture"},void 0!==e.authorPicture?r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.authorId,e.authorName)},r.a.createElement("img",{src:void 0!==e.authorPicture?e.authorPicture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.authorName})):null,r.a.createElement("div",{className:"actual-quote"},r.a.createElement("span",{className:"quote-content"},"\u201c ".concat(e.content," \u201d")),r.a.createElement("span",{className:"quote-authorship-span"},r.a.createElement("span",null,"\u2015 "),r.a.createElement("b",null,"".concat(e.authorName,", ").concat(e.bookTitle))))),r.a.createElement("a",{className:"quote-likes-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"".concat(e.numberOfLikes," likes")))}))),r.a.createElement("a",{className:"more-quotes-a",href:O.pageGenerator.generateQuotesTagPage(t)},"More quotes...")):null,G=r.a.createElement("div",{className:"genre-page-main-content-right-section"},M,D,F);return r.a.createElement("div",{className:"genre-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"genre-page-main-content"},U,G),r.a.createElement(S,null))}),we=(a(111),function(){var e=new URLSearchParams(Object(c.g)().search),t=e.get("content_type"),a=null!==e.get("page")?parseInt(e.get("page")):1,o="articles"===t?O.pageGenerator.generateArticlesNewsPage()+"&":"interviews"===t?O.pageGenerator.generateInterviewsNewsPage()+"&":O.pageGenerator.generateNewsPage()+"?",s=Object(n.useState)(!1),l=Object(b.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)([]),d=Object(b.a)(m,2),p=d[0],f=d[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,Object(R.trackPromise)(O.getNews());case 3:e.t1=e.sent,(0,e.t0)(e.t1),u(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var v=i?p.filter((function(e){return!("articles"===t&&"article"!==e.type)&&!("interviews"===t&&"interview"!==e.type)&&e.featured}))[0]:null,E=r.a.createElement("a",{className:"page-header-a",href:O.pageGenerator.generateNewsPage()},r.a.createElement("h1",null,"News and Interviews")),k=r.a.createElement("div",{className:"browsing-type-content-area"},r.a.createElement("a",{className:"all"===t||null===t?"all-stories-a selected":"all-stories-a",href:O.pageGenerator.generateAllStoriesNewsPage()},"All Stories"),r.a.createElement("a",{className:"articles"===t?"articles-a selected":"articles-a",href:O.pageGenerator.generateArticlesNewsPage()},"Articles"),r.a.createElement("a",{className:"interviews"===t?"interviews-a selected":"interviews-a",href:O.pageGenerator.generateInterviewsNewsPage()},"Interviews")),w=i?r.a.createElement("div",{className:"news-page-news-list-section"},1===a?r.a.createElement("div",{className:"featured-article"},void 0!==v.image?r.a.createElement("a",{className:"article-image-wrapper",href:O.pageGenerator.generateArticlePage(v.id,v.title)},r.a.createElement("img",{src:v.image,alt:v.title})):null,r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"type-and-date"},r.a.createElement("span",null,v.type.toUpperCase()),r.a.createElement("a",{href:O.pageGenerator.generateArticlePage(v.id,v.title)},Object(L.a)(v.date,"MMM dd"))),r.a.createElement("div",{className:"title-and-content"},r.a.createElement("a",{className:"article-title-a",href:O.pageGenerator.generateArticlePage(v.id,v.title)},v.title),r.a.createElement("span",{className:"article-content-preview"},v.content.slice(0,137)+"..."),r.a.createElement("a",{className:"read-more-a",href:O.pageGenerator.generateArticlePage(v.id,v.title)},"Read more")),r.a.createElement("div",{className:"likes-area"},r.a.createElement("a",{href:O.pageGenerator.generateArticleLikesPage(v.id)},"".concat(v.numberOfLikes," likes"))))):null,r.a.createElement("div",{className:"other-articles"},p.filter((function(e,n){return n<10*a&&n>=10*(a-1)&&e!==v&&!("articles"===t&&"article"!==e.type)&&!("interviews"===t&&"interview"!==e.type)})).map((function(e,t){return r.a.createElement("div",{className:"article-card",key:t},void 0!==e.image?r.a.createElement("a",{className:"article-image-wrapper",href:O.pageGenerator.generateArticlePage(e.id,e.title)},r.a.createElement("img",{src:e.image,alt:e.title})):null,r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"type-and-date"},r.a.createElement("span",null,e.type.toUpperCase()),r.a.createElement("a",{href:O.pageGenerator.generateArticlePage(e.id,e.title)},Object(L.a)(e.date,"MMM dd"))),r.a.createElement("div",{className:"title-and-content"},r.a.createElement("a",{className:"article-title-a",href:O.pageGenerator.generateArticlePage(e.id,e.title)},e.title),r.a.createElement("span",{className:"article-content-preview"},e.content.slice(0,107)+"..."),r.a.createElement("a",{className:"read-more-a",href:O.pageGenerator.generateArticlePage(e.id,e.title)},"Read more")),r.a.createElement("div",{className:"likes-area"},r.a.createElement("a",{href:O.pageGenerator.generateArticleLikesPage(e.id)},"".concat(e.numberOfLikes," likes")))))}))),Math.ceil(p.filter((function(e){return e.type===t||"all"===t||null===t})).length/10)>1?r.a.createElement("div",{className:"page-navigation-section"},1===a?r.a.createElement("span",null,"\xab previous"):r.a.createElement("a",{href:o+"page=".concat(a-1)},"\xab previous"),Array.from({length:Math.ceil(p.length/10)},(function(e,t){return t+1})).map((function(e,t){return a===e?r.a.createElement("span",{key:t},r.a.createElement("em",null,e)):r.a.createElement("a",{key:t,href:o+"page=".concat(e)},e)})),a===Math.ceil(p.filter((function(e){return e.type===t||"all"===t||null===t})).length/10)?r.a.createElement("span",null,"next \xbb"):r.a.createElement("a",{href:o+"page=".concat(a+1)},"next \xbb")):null):null;return r.a.createElement("div",{className:"news-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"news-page-main-content"},E,r.a.createElement("div",{className:"main-section"},k,w)),r.a.createElement(S,null))}),ye=(a(112),function(e){var t=e.match,a=Object(c.f)(),o=t.params.articlePageId,s=o.split("-")[0],l=o.split("-").slice(1).map((function(e){return 1===e.length?e.toUpperCase():e[0].toUpperCase()+e.slice(1)})).join(" "),i=Object(n.useState)(!1),u=Object(b.a)(i,2),d=u[0],p=u[1],f=Object(n.useState)({}),v=Object(b.a)(f,2),E=v[0],k=v[1],w=Object(n.useState)(!1),y=Object(b.a)(w,2),N=y[0],x=y[1],j=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k,e.next=3,Object(R.trackPromise)(O.getInfoForArticle(s));case 3:e.t1=e.sent,(0,e.t0)(e.t1),p(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var I=d?r.a.createElement("div",{className:"article-page-header"},r.a.createElement("a",{className:"news-and-interviews-a",href:O.pageGenerator.generateNewsPage()},r.a.createElement("span",null,"News and Interviews"),r.a.createElement("div",{className:"icon-side-arrow"})),r.a.createElement("h1",null,l),r.a.createElement("span",{className:"authorship-and-date"},"Posted by ".concat(E.authorName," on ").concat(Object(L.a)(E.date,"MMMM dd, yyyy")))):null,B=d?r.a.createElement("div",{className:"article-page-top-likes-area"},r.a.createElement("a",{href:O.pageGenerator.generateArticleLikesPage(s)},"".concat(E.likes.length," likes"))):null,P=d?r.a.createElement("div",{className:"article-page-article-content-section"},r.a.createElement("img",{src:E.image,alt:l}),E.content.split("\\n").map((function(e,t){return r.a.createElement("p",{key:t},e)}))):null,C=d?r.a.createElement("div",{className:"article-page-bottom-likes-area"},N?r.a.createElement("img",{className:"loading-spinner",src:"data:image/gif;base64,R0lGODlhEAAQAPMPAJmSa8XBq%2BLg1baxltPQwKihgJGJX%2FHw6724oPf39czIta%2BpiqCZddrYypKKYf%2F%2F%2FyH%2FC05FVFNDQVBFMi4wAwEAAAAh%2BQQFCgAPACwAAAAAEAAQAEAEcPDJlygadUq1OtFTIoqLoSSGMwxH1krH8RyF0BCHIlPaYTAJh6G1CyUahaIkE1IAFsrEQaCcBWSEz0PAnBwYLcOQ15MpTMJYd1ZyUDXSDGelBY0qIkFg%2FZoEGAQJCjoxDRRvIQMBD1kzgSAgAgKQDxEAIfkEBQoADwAsAAAAAA8AEAAABF3wyfkCkonOJZk8QKNJxcM4piGMEsEAhMFNA%2FwAhWUYWSYNj8JhIhiyZqxHAxEIrJIPwgCBeEI%2FhJFv0lgANYmDT7EQERqHtFGsQRwEjYRVE8jCJXMMIXN%2FGJNpIxEAIfkEBQoADwAsAAAAABAADwAABFrwyfmIolgiuVhKRSY5w9MlZZZUT9M10yFIQQEXi6KEh2IYBw0gJTkQfobZRIBYLQ0XiUBHCGKckkZgK%2Bq2vBiEAtslBGYCwecjcioO8MeBTCHM4glrBia3kiMAIfkEBQoADwAsAAAAABAAEAAABFzwySkJvTKkN5YcAvYUAech2CYBQheiySEpiLwEBOElFqAGpIfqIWCIHiWKrJbYEBoNEQIAcIByBNkFYegWKKHLYXxQHRSW40SQfYzVQklC0BweBbIm3C23w%2FUYEQAh%2BQQFCgAIACwAAAAAEAAOAAAERRDJiUKgWA5pDM%2Fc1iEAKAVeR5DYAAiIUVheNWrGhtUrpWOFyYFABBU6hpLlkgEga5IDRiDL9CjUjhSxNSEzXewvappEAAAh%2BQQFCgAOACwAAAAAEAAQAAAEa9DJ6YSg2KUmVZDBkSUBpyiOwojZgRznAaCU0IgKYQVFxSyShEAhSEwSh4GjwJIcOJTEgpCoIg8HI4YwGCwUWKyWQmAwAIgo5lAgYK6UpwQYzFolAEPSARhnGgZKDlBqEwwGFyNrBm4Zjn4RACH5BAUKAA8ALAAAAAAQABAAAARc8Mn5zqFYCkkIz9zVeMQCSkoyPkuDWcnTCBaBSMstHXSGAANM4oJBNBLIZCzTQCCCSlBjUSgETpPBcYndPBBcTADBeCRuhRPAoHhceaDEmkiMOwwXh%2BuUGBTCEhEAIfkEBQoADgAsAQABAA8ADwAABFnQySOFkE3qWq9A2%2BZdyOUkp3ZQThM4x6Ak9IGGQfFu96aYoaAgQMwENZ%2BB7ChJlIKJVfPAcOw2BoNCsagqHAufIcBgEBzf0CF7AAAShWPDcHGjGECVZnCMAAAh%2BQQFCgAPACwAAAAAEAAQAAAEXfDJ%2BVKiWN53jhQbdlwdR4RU4nWJ4mFWbAmNpBAZTCB4jhEvH%2BWgKAonh4Cy9mEIMK7hwmDoTRYAhcZhKHgYhAZi8SAwEBLC01Yo1HrBCSPRfgwcPse3ICHnNko5EQAh%2BQQFCgAOACwAAAEAEAAPAAAEWtDJ6VKSh2pppdha922ZdpTECE6NIlxUSakOAtwI2OxCYfwLEIHgSpwIAJmEsHK8JglEgSlh1BKMRcOhGDgHAUlDRhgsBIAtTFNwmB2B9kZgdSyCNeVGoQBFAAAh%2BQQFCgAPACwAAAEAEAAPAAAEWvDJSV%2BqeKZTD8fHRRmGkpyolAifQBrfdLBVYDSdKDF89gjAw8ABAAQywMYn0VhgcJWBJCZRIKCPwuO4GAAJCEmAIBFIyI0A4qD1AZzqB8EJoiMGp6PvTMZEAAAh%2BQQFCgAPACwAAAEADwAPAAAEWvBJAY68%2BArDspeD0XxS9xyG4R3JaRLjlbAY4QhZKynFsiie2eEQYBiBuSGrJRh4cLLAA%2BBpKKBOICIwbBBOsNMEIFBIEZaHTl1APMyPRmB9cb%2Bljy8pHsNEAAA7",alt:"Loading"}):r.a.createElement("button",{onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,O.likeUnlikeArticle(j.userUID,s,a);case 3:x(!1),k((function(e){return Object(m.a)(Object(m.a)({},e),{},{likes:e.likes.includes(j.userUID)?e.likes.filter((function(e){return e!==e.userUID})):e.likes.concat(j.userUID)})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E.likes.includes(j.userUID)?"Unlike":"Like"),r.a.createElement("span",{className:"separator"},"\xb7"),r.a.createElement("a",{href:O.pageGenerator.generateArticleLikesPage(s)},"".concat(E.likes.length," likes"))):null,U=r.a.createElement("div",{className:"article-page-main-content"},I,B,P,C);return r.a.createElement("div",{className:"article-page"},r.a.createElement(A,null),U,r.a.createElement(S,null))}),Ne=(a(113),function(e){var t=e.match.params.articleId,a=Object(n.useState)(!1),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)(1),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)([]),k=Object(b.a)(E,2),w=k[0],y=k[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,Object(R.trackPromise)(O.getArticleTitle(t));case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=y,e.next=8,Object(R.trackPromise)(O.getUsersWhoLikedArticle(t));case 8:e.t3=e.sent,(0,e.t2)(e.t3),c(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(n.useEffect)((function(){console.log(w)}),[w]);var N=s?r.a.createElement("h1",{className:"article-liked-by-page-header"},r.a.createElement("a",{href:O.pageGenerator.generateArticlePage(t,f)},f),r.a.createElement("span",null,"> Liked By")):null,x=s?r.a.createElement("div",{className:"article-liked-by-page-user-list"},r.a.createElement("span",{className:"showing-numbers-span"},"Showing ".concat(100*(u-1)+1,"-").concat(u===Math.ceil(w.length/100)?w.length:100*u," of ").concat(w.length)),r.a.createElement("div",{className:"list"},w.filter((function(e,t){return t>=100*(u-1)&&t<=100*u})).map((function(e,t){return r.a.createElement("div",{className:"user-card",key:t},r.a.createElement("a",{className:"user-profile-picture-wrapper",href:O.pageGenerator.generateUserPage(e.id,e.name)},r.a.createElement("img",{src:void 0!==e.profilePicture?e.profilePicture:"https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png",alt:e.name})),r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:"user-name-a",href:O.pageGenerator.generateUserPage(e.id,e.name)},e.name),r.a.createElement("span",null,"".concat(e.numberOfBooks," books")),r.a.createElement("span",null,"".concat(e.numberOfFriends," friends"))))}))),w.length>100?r.a.createElement("div",{className:"page-navigation-area"},r.a.createElement("button",{onClick:function(e){return m((function(e){return e-1}))},disabled:1===u},"\xab previous"),Array.from({length:Math.ceil(w.length/100)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{className:"page-number-button",key:e,onClick:function(t){return m(e)},disabled:u===e},u!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return m((function(e){return e+1}))},disabled:u===Math.ceil(w.length/100)},"next \xbb")):null):null;return r.a.createElement("div",{className:"article-liked-by-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"article-liked-by-page-main-content"},N,x),r.a.createElement(S,null))}),Oe=a(164),xe=(a(114),a(115),function(e){var t=Math.max(e.fiveRatings+e.fourRatings+e.threeRatings+e.twoRatings+e.oneRatings,1),a=Math.max(e.fiveRatings,e.fourRatings,e.threeRatings,e.twoRatings,e.oneRatings);return r.a.createElement("div",{className:"ratings-chart"},r.a.createElement("button",{className:"rating-chart-close-button",onClick:function(t){return e.closeChart()}},"[close]"),r.a.createElement("table",{className:"rating-distribution"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},r.a.createElement("span",null,"5"),r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==t?350*e.fiveRatings/a:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==t?Math.round(100*e.fiveRatings/t):0,"% (").concat(e.fiveRatings,")"))),r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},r.a.createElement("span",null,"4"),r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==t?350*e.fourRatings/a:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==t?Math.round(100*e.fourRatings/t):0,"% (").concat(e.fourRatings,")"))),r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},r.a.createElement("span",null,"3"),r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==t?350*e.threeRatings/a:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==t?Math.round(100*e.threeRatings/t):0,"% (").concat(e.threeRatings,")"))),r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},r.a.createElement("span",null,"2"),r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==t?350*e.twoRatings/a:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==t?Math.round(100*e.twoRatings/t):0,"% (").concat(e.threeRatings,")"))),r.a.createElement("tr",null,r.a.createElement("th",{width:"25",className:"rating-and-star"},r.a.createElement("span",null,"1"),r.a.createElement("div",{className:"static-star small full"})),r.a.createElement("td",{className:"green-bar-container"},r.a.createElement("div",{className:"green-bar",style:{width:0!==t?350*e.oneRatings/a:0}})),r.a.createElement("td",{width:"90",className:"rating-percentage-and-absolute"},"".concat(0!==t?Math.round(100*e.oneRatings/t):0,"% (").concat(e.oneRatings,")"))))))}),je=function(e){var t=e.match.params.userPageId,a=Object(c.f)(),o=Object(c.g)(),s=Object(n.useRef)(),l=Object(n.useRef)(),i=t.split("-")[0],u=t.split("-")[1].length>1?t.split("-")[1][0].toUpperCase()+t.split("-")[1].slice(1):t.split("-")[1].toUpperCase(),d=Object(n.useState)(!1),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)({}),k=Object(b.a)(E,2),w=k[0],y=k[1],N=Object(n.useState)(!1),x=Object(b.a)(N,2),j=x[0],I=x[1],B=Object(n.useState)(!1),P=Object(b.a)(B,2),C=P[0],U=P[1],M=Object(n.useState)([]),D=Object(b.a)(M,2),F=D[0],G=D[1],T=Object(n.useState)([]),W=Object(b.a)(T,2),_=W[0],q=W[1],z=Object(n.useState)([]),Y=Object(b.a)(z,2),Q=Y[0],V=Y[1],H=Object(n.useState)([]),J=Object(b.a)(H,2),K=J[0],Z=J[1],X=Object(n.useState)([]),$=Object(b.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)([]),ne=Object(b.a)(ae,2),re=ne[0],oe=ne[1],se=Object(n.useState)([]),ce=Object(b.a)(se,2),le=ce[0],ie=ce[1],ue=Object(n.useState)([]),me=Object(b.a)(ue,2),de=me[0],pe=me[1],fe=Object(n.useState)([]),ge=Object(b.a)(fe,2),he=ge[0],be=ge[1],ve=Object(n.useState)(!1),Ee=Object(b.a)(ve,2),ke=Ee[0],we=Ee[1],ye=Object(n.useState)(!1),Ne=Object(b.a)(ye,2),je=Ne[0],Ie=Ne[1],Se=Object(n.useState)([]),Be=Object(b.a)(Se,2),Pe=Be[0],Ce=Be[1],Ae=Object(n.useState)(""),Ue=Object(b.a)(Ae,2),Re=Ue[0],Me=Ue[1],De=JSON.parse(localStorage.getItem("userState"));Object(n.useLayoutEffect)((function(){document.addEventListener("click",(function(e){null!==s.current&&void 0!==s.current&&s.current.contains(e.target)||null!==l.current&&void 0!==l.current&&l.current.contains(e.target)||U(!1)}))})),Object(n.useEffect)((function(){void 0!==o.state&&o.state.addedFriend&&Me("A friend request has been sent to Entien. After confirmation has been made, you will be notified by email.")}),[o.state]),Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getUserInfoForUserPage(i,De.userUID));case 2:(t=e.sent).isUserFriend=!0,y(t),v(!0),a=t.currentlyReadingBooks.length+t.recentUpdates.filter((function(e){return"add-book-to-read"===e.type||"add-book-read"===e.type||"add-book-reading"===e.type||"rate-book"===e.type})).length,G(Array(a).fill(!1)),q(Array(a).fill(!0)),V(Array(a).fill(!0)),Z(Array(a).fill("")),te(Array(a).fill("")),oe(Array(a).fill(!0)),ie(Array(a).fill("")),pe(t.currentlyReadingBooks.map((function(e){return void 0===e.userRating?0:e.userRating})).concat(t.recentUpdates.filter((function(e){return"add-book-to-read"===e.type||"add-book-read"===e.type||"add-book-reading"===e.type||"rate-book"===e.type||"recommend-book"===e.type})).map((function(e){return void 0===e.bookInfo.userRating?0:e.bookInfo.userRating})))),Ce(Array(t.recentUpdates.length).fill(!1));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[De.userUID,i]);var Fe=f?void 0!==w.city&&""!==w.city&&void 0!==w.stateProvinceCode&&""!==w.stateProvinceCode&&void 0!==w.country&&""!==w.country?"".concat(w.city,", ").concat(w.stateProvinceCode,", ").concat(w.country):void 0!==w.city&&""!==w.city&&void 0!==w.stateProvinceCode&&""!==w.stateProvinceCode?"".concat(w.city,", ").concat(w.stateProvinceCode):void 0!==w.city&&""!==w.city&&void 0!==w.country&&""!==w.country?"".concat(w.city,", ").concat(w.country):void 0!==w.stateProvinceCode&&""!==w.stateProvinceCode&&void 0!==w.country&&""!==w.country?"".concat(w.stateProvinceCode,", ").concat(w.country):void 0!==w.city&&""!==w.city?w.city:void 0!==w.stateProvinceCode&&""!==w.stateProvinceCode?w.stateProvinceCode:void 0!==w.country&&""!==w.country?w.country:"":"",Ge=i===De.userUID,Le=f&&(Ge||"anyone"===w.whoCanViewUserProfile||"goodreads-members"===w.whoCanViewUserProfile&&null!==De.userUID&&void 0!==De.userUID||"just-my-friends"===w.whoCanViewUserProfile&&w.isUserFriend),Te=f&&""!==w.lastName&&void 0!==w.lastName&&("anyone"===w.showLastNameTo||"friends"===w.showLastNameTo&&w.isUserFriend),We=f&&""!==w.gender&&("everyone"===w.showGenderTo||"friendOnly"===w.showGenderTo&&w.isUserFriend),_e=f&&""!==Fe&&("everyone"===w.locationViewableBy||"friendOnly"===w.locationViewableBy&&w.isUserFriend),qe=f&&void 0!==w.birthday&&(["age-members-birthday-members","age-members-birthday-no-one","age-members-birthday-friends"].includes(w.ageAndBirthdayPrivacy)&&null!==De.userUID&&void 0!==De.userUID||["age-friends-birthday-friends","age-friends-birthday-no-one"].includes(w.ageAndBirthdayPrivacy)&&w.isUserFriend),ze=f&&void 0!==w.birthday&&(["age-members-birthday-members","age-no-one-birthday-members"].includes(w.ageAndBirthdayPrivacy)&&null!==De.userUID&&void 0!==De.userUID||["age-members-birthday-friends","age-friends-birthday-friends","age-no-one-birthday-friends"].includes(w.ageAndBirthdayPrivacy)&&w.isUserFriend),Ye=f&&void 0!==w.birthday?Object(Oe.a)(new Date,w.birthday):0,Qe=function(e){return e.split("-").map((function(e){return 1===e.length?e.toUpperCase():e[0].toUpperCase()+e.slice(1)})).join(" ")},Ve=function(e,t){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(De.userUID,e.id),y((function(e){return Object(m.a)(Object(m.a)({},e),{},{currentlyReadingBooks:t>=e.currentlyReadingBooks.length?e.currentlyReadingBooks:e.currentlyReadingBooks.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0,userProgress:void 0,userRating:void 0}):e})),recentUpdates:t<e.currentlyReadingBooks.length?e.recentUpdates:e.recentUpdates.map((function(a,n){return(a.type.includes("add-book")||"rate-book"===a.type||"recommend-book"===a.type)&&e.recentUpdates.filter((function(e){return"rate-book"===e.type||e.type.includes("add-book")||"recommend-book"===e.type})).indexOf(a)+e.currentlyReadingBooks.length===t?Object(m.a)(Object(m.a)({},a),{},{bookInfo:Object(m.a)(Object(m.a)({},a.bookInfo),{},{userStatus:void 0,userProgress:void 0,userRating:void 0})}):a}))})})))},He=function(){var e=Object(h.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=6;break}return G((function(e){return e.map((function(e,t){return t===n||e}))})),e.next=4,O.addBookToShelf(De.userUID,t.id,r,a);case 4:y((function(e){return Object(m.a)(Object(m.a)({},e),{},{currentlyReadingBooks:n>=e.currentlyReadingBooks.length?e.currentlyReadingBooks:e.currentlyReadingBooks.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:r}):e})),recentUpdates:n<e.currentlyReadingBooks.length?e.recentUpdates:e.recentUpdates.map((function(t,a){return(t.type.includes("add-book")||"rate-book"===t.type||"recommend-book"===t.type)&&e.recentUpdates.filter((function(e){return"rate-book"===e.type||e.type.includes("add-book")||"recommend-book"===e.type})).indexOf(t)+e.currentlyReadingBooks.length===n?Object(m.a)(Object(m.a)({},t),{},{bookInfo:Object(m.a)(Object(m.a)({},t.bookInfo),{},{userStatus:r})}):t}))})})),G((function(e){return e.map((function(e,t){return t!==n&&e}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Je=function(){var e=Object(h.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=4;break}return e.next=3,O.rateBook(De.userUID,t.id,r,a);case 3:y((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{currentlyReadingBooks:n>=e.currentlyReadingBooks.length?e.currentlyReadingBooks:e.currentlyReadingBooks.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0===e.userStatus?"read":e.userStatus,userRating:r}):e})),recentUpdates:n<e.currentlyReadingBooks.length?e.recentUpdates:e.recentUpdates.map((function(t,a){return(t.type.includes("add-book")||"rate-book"===t.type||"recommend-book"===t.type)&&e.recentUpdates.filter((function(e){return"rate-book"===e.type||e.type.includes("add-book")||"recommend-book"===e.type})).indexOf(t)+e.currentlyReadingBooks.length===n?Object(m.a)(Object(m.a)({},t),{},{bookInfo:Object(m.a)(Object(m.a)({},t.bookInfo),{},{userStatus:void 0===t.bookInfo.userStatus?"read":t.bookInfo.userStatus,userRating:r})}):t}))})}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(h.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==De.userUID&&void 0!==De.userUID&&void 0!==t.id&&n.length>0)){e.next=4;break}return e.next=3,O.updateBookInShelf(De.userUID,t.id,parseInt(n));case 3:y((function(e){return Object(m.a)(Object(m.a)({},e),{},{currentlyReadingBooks:a>=e.currentlyReadingBooks.length?e.currentlyReadingBooks:e.currentlyReadingBooks.map((function(e,t){return t===a?Object(m.a)(Object(m.a)({},e),{},{userProgress:n}):e})),recentUpdates:a<e.currentlyReadingBooks.length?e.recentUpdates:e.recentUpdates.map((function(t,r){return(t.type.includes("add-book")||"rate-book"===t.type||"recommend-book"===t.type)&&e.recentUpdates.filter((function(e){return"rate-book"===e.type||e.type.includes("add-book")||"recommend-book"===e.type})).indexOf(t)+e.currentlyReadingBooks.length===a?Object(m.a)(Object(m.a)({},t),{},{bookInfo:Object(m.a)(Object(m.a)({},t.bookInfo),{},{userProgress:n})}):t}))})}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ze=function(e,t){return f&&"reading"===e.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("div",{className:_[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up reading"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,r.a.createElement("b",null,"Update your reading progress:")),r.a.createElement("span",null,"I'm on page"," ",r.a.createElement("input",{type:"text",value:K[t],className:Q[t]?"page-progress-input":"page-progress-input white-background",onClick:function(e){V((function(e){return e.map((function(e,a){return a!==t&&e}))})),q((function(e){return e.map((function(e,a){return a!==t&&e}))}))},onChange:function(e){var a=e.target.value;Z((function(e){return e.map((function(e,n){return n===t?a:e}))}))}})," ","of ",e.pageCount,"."," ",r.a.createElement("a",{href:void 0!==De.userUID&&null!==De.userUID?O.pageGenerator.generateUserShelfPage(De.userUID,De.userInfo.firstName,["reading"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:Q[t]?"shelf-pop-up-bottom hidden":"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){Ke(e,t,K[t]),V((function(e){return e.map((function(e,a){return a===t||e}))})),q((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Submit"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){V((function(e){return e.map((function(e,a){return a===t||e}))})),q((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{className:"progress-finished-button",onClick:function(a){He(e,t,"read"),V((function(e){return e.map((function(e,a){return a===t||e}))})),q((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Finished book"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:function(a){return Ve(e,t)}}),r.a.createElement("span",null,"Currently Reading")):f&&"read"===e.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("div",{className:"shelf-pop-up-wrapper"},r.a.createElement("div",{className:"shelf-pop-up read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("a",{href:O.pageGenerator.generateWriteReviewPageForBook(e.id)},"Write a review"),r.a.createElement("span",null,"\xb7"),r.a.createElement("a",{href:void 0!==De.userUID&&null!==De.userUID?O.pageGenerator.generateUserShelfPage(De.userUID,De.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:function(a){return Ve(e,t)}}),r.a.createElement("span",null,"Read")):f&&"to-read"===e.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("div",{className:_[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up to-read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,"#",r.a.createElement("input",{type:"text",value:ee[t],className:"shelf-pop-up-to-read-input",onChange:function(e){var a=e.target.value;te((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onClick:function(e){V((function(e){return e.map((function(e,a){return a!==t&&e}))})),q((function(e){return e.map((function(e,a){return a!==t&&e}))}))}})," ","on your ",r.a.createElement("b",null,"To Read")," shelf.")),Q[t]?r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("a",{href:void 0!==De.userUID&&null!==De.userUID?O.pageGenerator.generateUserShelfPage(De.userUID,De.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf")):r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){O.changeBookPosition(De.userUID,e.id,parseInt(ee[t])),y((function(e){return Object(m.a)(Object(m.a)({},e),{},{currentlyReadingBooks:t>=e.currentlyReadingBooks.length?e.currentlyReadingBooks:e.currentlyReadingBooks.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{userToReadPosition:parseInt(ee[t])}):e})),recentUpdates:t<e.currentlyReadingBooks.length?e.recentUpdates:e.recentUpdates.map((function(a,n){return(a.type.includes("add-book")||"rate-book"===a.type||"recommend-book"===a.type)&&e.recentUpdates.filter((function(e){return"rate-book"===e.type||e.type.includes("add-book")||"recommend-book"===e.type})).indexOf(a)+e.currentlyReadingBooks.length===t?Object(m.a)(Object(m.a)({},a),{},{bookInfo:Object(m.a)(Object(m.a)({},a.bookInfo),{},{userToReadPosition:parseInt(ee[t])})}):a}))})})),V((function(e){return e.map((function(e,a){return a===t||e}))})),q((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Save"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){V((function(e){return e.map((function(e,a){return a===t||e}))})),q((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:function(a){return Ve(e,t)}}),r.a.createElement("span",null,"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return He(e,t,"to-read")}},F[t]?"...saving":"Want to Read")},Xe=function(e,t){return r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:"book-options-dropdown"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"dropdown-read-button",onClick:function(){return He(e,t,"read")}},"Read"),r.a.createElement("button",{className:"dropdown-currently-reading-button",onClick:function(){return He(e,t,"reading")}},"Currently Reading"),r.a.createElement("button",{className:"dropdown-want-to-read-button",onClick:function(){return He(e,t,"to-read")}},"Want to Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:"dropdown-add-shelf",onClick:function(e){return oe((function(e){return e.map((function(e,a){return a!==t&&e}))}))}},"Add Shelf"),r.a.createElement("div",{className:re[t]?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",value:void 0!==le[t]?le[t]:"",onChange:function(e){var a=e.target.value;ie((function(e){return e.map((function(e,n){return n===t?a:e}))}))}}),r.a.createElement("button",{className:"dropdown-add-shelf-add-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(le[t].length>0)){n.next=4;break}return n.next=3,O.addBookToUserShelf(De.userUID,e.rootBook,le[t],null,a);case 3:oe((function(e){return e.map((function(e,a){return a===t||e}))}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Add")))))},$e=function(e,t){return r.a.createElement("div",{className:"book-page-rate-book"},void 0===e.userRating?null:r.a.createElement("button",{className:"clear-rating-button",onClick:function(){return Je(e,t,void 0)}},"Clear rating"),void 0===e.userRating?r.a.createElement("span",{className:"rate-this-book"},"Rate this book"):r.a.createElement("span",{className:"rate-this-book my-rating"},"My rating:"),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:de[t]>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return pe((function(e){return e.map((function(e,a){return a===t?1:e}))}))},onMouseLeave:function(a){return pe((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Je(e,t,1)}}),r.a.createElement("div",{className:de[t]>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return pe((function(e){return e.map((function(e,a){return a===t?2:e}))}))},onMouseLeave:function(a){return pe((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Je(e,t,2)}}),r.a.createElement("div",{className:de[t]>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return pe((function(e){return e.map((function(e,a){return a===t?3:e}))}))},onMouseLeave:function(a){return pe((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Je(e,t,3)}}),r.a.createElement("div",{className:de[t]>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return pe((function(e){return e.map((function(e,a){return a===t?4:e}))}))},onMouseLeave:function(a){return pe((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Je(e,t,4)}}),r.a.createElement("div",{className:de[t]>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return pe((function(e){return e.map((function(e,a){return a===t?5:e}))}))},onMouseLeave:function(a){return pe((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return Je(e,t,5)}})))},et=f&&Re.length>0?r.a.createElement("div",{className:"top-message-div yellow"},r.a.createElement("span",null,Re),r.a.createElement("button",{className:"close-button",onClick:function(e){return Me("")}})):null,tt=f?r.a.createElement("div",{className:"user-page-introduction"},r.a.createElement("div",{className:"left-section"},void 0!==w.profilePicture?r.a.createElement("a",{className:"user-photo-a",href:O.pageGenerator.generateUserPhotoPage(i)},r.a.createElement("img",{src:w.profilePicture,alt:u})):r.a.createElement("img",{src:"https://s.gr-assets.com/assets/nophoto/user/u_225x300-c928cbb998d4ac6dd1f0f66f31f74b81.png",alt:u}),r.a.createElement("span",{className:"ratings-stats"},r.a.createElement("a",{href:O.pageGenerator.generateUserRatingsPage(i)},"".concat(w.numberOfRatings," ratings")),r.a.createElement("button",{className:"show-stats-window-button",onClick:function(e){return Ie(!0)}},"(".concat(w.averageRating.toFixed(2)," avg)")),r.a.createElement("div",{className:je?"user-ratings-chart visible":"user-ratings-chart"},r.a.createElement(xe,{fiveRatings:w.fiveRatings,fourRatings:w.fourRatings,threeRatings:w.threeRatings,twoRatings:w.twoRatings,oneRatings:w.oneRatings,closeChart:function(){return Ie(!1)}}))),r.a.createElement("a",{className:"number-of-reviews-a",href:O.pageGenerator.generateUserReviewsPage(i)},"".concat(w.numberOfReviews," reviews"))),r.a.createElement("div",{className:"right-section"},r.a.createElement("h1",null,Te?u+" "+w.lastName:u,Ge?r.a.createElement("a",{href:O.pageGenerator.generateAccountSettingsPage()},"(edit profile)"):null),j||Ge?j?r.a.createElement("div",{id:"loadingSpinner"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)):null:r.a.createElement("div",{className:"follow-friends-buttons"},w.isUserFriend?null:r.a.createElement("button",{className:w.isFollowedByUser?"follow-button following":"follow-button",onMouseOver:function(e){w.isFollowedByUser&&(document.querySelector("span.followed-by-user-span").innerHTML="Unfollow")},onMouseOut:function(e){if(w.isFollowedByUser){var t=document.createElement("div");t.classList.add("following-checkmark");var a=document.createElement("span");a.innerHTML="Following";var n=document.querySelector("span.followed-by-user-span");n.innerHTML="",n.appendChild(t),n.appendChild(a)}},onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.isFollowedByUser){e.next=4;break}we(!0),e.next=9;break;case 4:return I(!0),e.next=7,O.followUser(De.userUID,i,a);case 7:I(!1),y((function(e){return Object(m.a)(Object(m.a)({},e),{},{isFollowedByUser:!0,numberOfFollowers:e.numberOfFollowers+1})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w.isFollowedByUser?r.a.createElement("span",{className:"followed-by-user-span"},r.a.createElement("div",{className:"following-checkmark"}),r.a.createElement("span",null,"Following")):r.a.createElement("span",null,"Follow")),r.a.createElement("a",{className:w.hasPendingFriendRequestFromUser?"add-as-friend-a pending":"add-as-friend-a",disabled:w.hasPendingFriendRequestFromUser,href:O.pageGenerator.generateAddAsFriendPage(i),onMouseOver:function(e){w.isUserFriend&&(document.querySelector("span.friends-with-user-span").innerHTML="Unfriend")},onMouseOut:function(e){if(w.isUserFriend){var t=document.createElement("div");t.classList.add("following-checkmark");var a=document.createElement("span");a.innerHTML="Friends";var n=document.querySelector("span.friends-with-user-span");n.innerHTML="",n.appendChild(t),n.appendChild(a)}},onClick:function(e){w.isUserFriend&&(e.preventDefault(),we(!0))}},w.isUserFriend?r.a.createElement("span",{className:"friends-with-user-span"},r.a.createElement("div",{className:"following-checkmark"}),r.a.createElement("span",null,"Friends")):w.hasPendingFriendRequestFromUser?r.a.createElement("span",{className:"pending-span"},"Pending"):r.a.createElement("span",null,"Add friend")),r.a.createElement("button",{ref:l,className:"more-dropdown-trigger",onClick:function(e){return U((function(e){return!e}))}},r.a.createElement("span",null,"More"),r.a.createElement("div",{className:"downwards-arrow"}),r.a.createElement("div",{ref:s,className:C?"more-dropdown":"more-dropdown hidden"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{className:"compare-books-a",href:O.pageGenerator.generateUserCompareBooksPage(i)},"Compare books")))))),r.a.createElement("table",{className:"user-misc"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Details"),We||_e||qe?r.a.createElement("td",null,qe&&We&&_e?"Age ".concat(Ye,", ").concat(w.gender[0].toUpperCase()+w.gender.slice(1),", ").concat(Fe):qe&&We?"Age ".concat(Ye,", ").concat(w.gender[0].toUpperCase()+w.gender.slice(1)):qe&&_e?"Age ".concat(Ye,", ").concat(Fe):qe?"Age ".concat(Ye):We&&_e?"".concat(w.gender[0].toUpperCase()+w.gender.slice(1),", ").concat(Fe):We?w.gender[0].toUpperCase()+w.gender.slice(1):Fe):r.a.createElement("td",null,"".concat(u," hasn't added any details yet"))),ze?r.a.createElement("tr",null,r.a.createElement("th",null,"Birthday"),r.a.createElement("td",null,Object(L.a)(w.birthday,"MMMM dd, yyyy"))):null,void 0!==w.website&&w.website.length>0?r.a.createElement("tr",null,r.a.createElement("th",null,"Website"),r.a.createElement("td",null,r.a.createElement("a",{href:w.website},w.website))):null,r.a.createElement("tr",null,r.a.createElement("th",null,"Activity"),r.a.createElement("td",null,"Joined in ".concat(Object(L.a)(w.joinedDate,"MMMM yyyy"),", last active ").concat(w.lastActiveDate.getFullYear()===(new Date).getFullYear()&&w.lastActiveDate.getMonth()===(new Date).getMonth()?"this month":w.lastActiveDate.getFullYear()===(new Date).getFullYear()&&w.lastActiveDate.getMonth()===(new Date).getMonth()-1||w.lastActiveDate.getFullYear()===(new Date).getFullYear()-1&&11===w.lastActiveDate.getMonth()&&0===(new Date).getMonth()?"last month":w.lastActiveDate.getFullYear()===(new Date).getFullYear()?"this year":"in ".concat(Object(L.a)(w.lastActiveDate,"MMMM yyyy"))))),void 0!==w.interests&&w.interests.length>0?r.a.createElement("tr",null,r.a.createElement("th",null,"Interests"),r.a.createElement("td",null,w.interests)):null,void 0!==w.favoriteBooks&&w.favoriteBooks.length>0?r.a.createElement("tr",null,r.a.createElement("th",null,"Favorite Books"),r.a.createElement("td",null,w.favoriteBooks)):null,void 0!==w.about&&w.about.length>0?r.a.createElement("tr",null,r.a.createElement("th",null,"About"),r.a.createElement("td",null,w.about)):null)))):null,at=f?r.a.createElement("div",{className:"user-page-to-read-shelf-section"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(i,u,["to-read"]),className:"section-title"},"".concat(u.toUpperCase(),"'S TO-READ SHELF")),r.a.createElement("div",{className:"book-list"},w.toReadBooks.filter((function(e,t){return t<11})).map((function(e,t){return r.a.createElement("a",{className:"book-a",href:O.pageGenerator.generateBookPage(e.id,e.title),key:t},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))}))),r.a.createElement("a",{className:"more-books-a",href:O.pageGenerator.generateUserShelfPage(i,u,["to-read"])},"More...")):null,nt=f?r.a.createElement("div",{className:"user-page-bookshelves-section"},r.a.createElement("a",{className:"section-title",href:O.pageGenerator.generateUserBooksPage()},"".concat(u.toUpperCase(),"'S BOOKSHELVES")),r.a.createElement("div",{className:"bookshelves-list"},w.bookshelves.map((function(e,t){return r.a.createElement("a",{key:t,href:O.pageGenerator.generateUserShelfPage(i,u,[e.name])},"".concat(e.name," (").concat(e.numberOfBooks,")"))}))),r.a.createElement("a",{className:"more-a",href:O.pageGenerator.generateUserBooksPage()},"More...")):null,rt=f&&w.currentlyReadingBooks.length>0?r.a.createElement("div",{className:"user-page-currently-reading-section"},r.a.createElement("a",{className:"section-title",href:O.pageGenerator.generateUserShelfPage(i,u,["reading"])},"".concat(u.toUpperCase()," IS CURRENTLY READING")),r.a.createElement("div",{className:"currently-reading-list"},w.currentlyReadingBooks.map((function(e,t){return r.a.createElement("div",{className:"book-update",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"book-cover-a",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{alt:e.title,src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png"})),r.a.createElement("div",{className:"book-update-info"},r.a.createElement("span",{className:"currently-reading-span"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(i,u)},"".concat(Te?u+" "+w.lastName:u)),r.a.createElement("span",null," is currently reading")),r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(e.id,e.title)},e.title),r.a.createElement("span",{className:"book-authorship-span"},r.a.createElement("span",null,"by "),r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.mainAuthorId,e.mainAuthorName)},e.mainAuthorName),e.mainAuthorIsMember?r.a.createElement("span",{className:"goodreads-member-span"},"(Goodreads Author)"):null),r.a.createElement("span",{className:"bookshelves-span"},r.a.createElement("span",null,"bookshelves: "),e.bookshelves.map((function(t,a){return r.a.createElement("span",{key:a},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(i,u,[t])},t),a!==e.bookshelves.length-1?r.a.createElement("span",null,", "):null)}))),r.a.createElement("span",{className:"update-date-span"},Object(L.a)(e.updateDate,"MMM dd, yyyy HH:mma")))),r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"add-to-shelf-button-and-dropdown"},Ze(e,t),Xe(e,t)),$e(e,t)))})))):null,ot=f?r.a.createElement("div",{className:"user-recent-updates-section"},r.a.createElement("span",{className:"section-title"},"".concat(u.toUpperCase(),"'S RECENT UPDATES")),w.recentUpdates.map((function(e,t){return r.a.createElement("div",{className:t===w.recentUpdates.length-1?"update-card":"update-card bordered",key:t},r.a.createElement("span",{className:"update-description"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(i,u)},Te?u+" "+w.lastName:u),r.a.createElement("span",null," "),"rate-book"===e.type?r.a.createElement("span",{className:"rated-book-span"},"rated a book"," ",r.a.createElement("div",{className:"rating-stars"},r.a.createElement("div",{className:e.rating>=1?"static-star small full":e.rating>=.5?"static-star small almost-full":e.rating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=2?"static-star small full":e.rating>=1.5?"static-star small almost-full":e.rating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=3?"static-star small full":e.rating>=2.5?"static-star small almost-full":e.rating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=4?"static-star small full":e.rating>=3.5?"static-star small almost-full":e.rating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=5?"static-star small full":e.rating>=4.5?"static-star small almost-full":e.rating>4?"static-star small almost-empty":"static-star small empty"}))):"add-book-to-read"===e.type?r.a.createElement("span",null,"wants to read"):"add-book-read"===e.type?r.a.createElement("span",null,"finished reading"):"add-book-reading"===e.type?r.a.createElement("span",null,"started reading"):"add-friend"===e.type?r.a.createElement("span",null,r.a.createElement("span",null,"is now friends with "),r.a.createElement("a",{href:O.pageGenerator.generateUserPage(e.userInfo.id,e.userInfo.name)},e.userInfo.name)):"vote-for-book-review"===e.type?r.a.createElement("span",null,r.a.createElement("span",null,"and ".concat(e.numberOfReviewVoters-1," other people liked ")),r.a.createElement("a",{href:O.pageGenerator.generateUserPage(e.userInfo.id,e.userInfo.name)},"".concat(e.userInfo.name,"'s")),r.a.createElement("span",null," review of "),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.bookInfo.id,e.bookInfo.title)},e.bookInfo.title)):"add-quote"===e.type?r.a.createElement("span",null,r.a.createElement("span",null,"liked a "),r.a.createElement("a",{href:O.pageGenerator.generateQuotePage(e.quoteId,e.quoteContent)},"quote")):"recommend-book"===e.type?r.a.createElement("span",null,r.a.createElement("span",null," recommended"),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.bookInfo.id,e.bookInfo.title)}," ",e.bookInfo.title," "),r.a.createElement("span",null,"to "),r.a.createElement("a",{href:O.pageGenerator.generateUserPage(e.userInfo.id,e.userInfo.name)},e.userInfo.name)):r.a.createElement("span",null," is now following")),"add-book-to-read"===e.type||"add-book-reading"===e.type||"add-book-read"===e.type||"rate-book"===e.type||"recommend-book"===e.type?r.a.createElement("div",{className:"update-book-section"},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"book-cover-a",href:O.pageGenerator.generateBookPage(e.bookInfo.id,e.bookInfo.title)},r.a.createElement("img",{alt:e.bookInfo.title,src:void 0!==e.bookInfo.cover?e.bookInfo.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png"})),r.a.createElement("div",{className:"book-update-info"},r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(e.bookInfo.id,e.bookInfo.title)},e.bookInfo.title),r.a.createElement("span",{className:"book-authorship-span"},r.a.createElement("span",null,"by "),r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.authorInfo.id,e.authorInfo.name)},e.authorInfo.name),e.authorInfo.isMember?r.a.createElement("span",{className:"goodreads-member-span"},"(Goodreads Author)"):null))),r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"add-to-shelf-button-and-dropdown"},Ze(e.bookInfo,w.currentlyReadingBooks.length+w.recentUpdates.filter((function(e){return["add-book-to-read","add-book-read","add-book-reading","recommend-book","rate-book"].includes(e.type)})).indexOf(e)),Xe(e.bookInfo,w.currentlyReadingBooks.length+w.recentUpdates.filter((function(e){return["add-book-to-read","add-book-read","add-book-reading","recommend-book","rate-book"].includes(e.type)})).indexOf(e))),$e(e.bookInfo,w.currentlyReadingBooks.length+w.recentUpdates.filter((function(e){return["add-book-to-read","add-book-read","add-book-reading","recommend-book","rate-book"].includes(e.type)})).indexOf(e)))):null,"add-friend"===e.type?r.a.createElement("a",{className:"friend-profile-picture-a",href:O.pageGenerator.generateUserPage(e.userInfo.id,e.userInfo.name)},r.a.createElement("img",{src:void 0!==e.userInfo.picture?e.userInfo.picture:"https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png",alt:e.userInfo.name})):null,"vote-for-book-review"===e.type?r.a.createElement("div",{className:"book-review-preview"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.bookInfo.id,e.bookInfo.title)},r.a.createElement("img",{src:void 0!==e.bookInfo.cover?e.bookInfo.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.bookInfo.title})),r.a.createElement("span",{className:"review-text-span"},'"'.concat(e.reviewText.slice(0,250),'"'))):null,"add-quote"===e.type?r.a.createElement("div",{className:"quote-area"},r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.bookInfo.id,e.bookInfo.title)},r.a.createElement("img",{src:void 0!==e.bookInfo.cover?e.bookInfo.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.bookInfo.title})),r.a.createElement("div",{className:"quote-content-and-authorship"},r.a.createElement("span",null,"\u201c".concat(e.quoteContent,"\u201d")),r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.authorInfo.id,e.authorInfo.name)},e.authorInfo.name))):null,"follow-author"===e.type?r.a.createElement("div",{className:"author-info-section"},r.a.createElement("a",{className:"author-profile-picture-wrapper",href:O.pageGenerator.generateAuthorPage(e.authorInfo.id,e.authorInfo.name)},r.a.createElement("img",{src:void 0!==e.authorInfo.picture?e.authorInfo.picture:"https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png",alt:e.authorInfo.name})),r.a.createElement("div",{className:"author-actual-info-section"},r.a.createElement("span",{className:"author-name-span"},r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.authorInfo.id,e.authorInfo.name)},e.authorInfo.name),e.authorInfo.isMember?r.a.createElement("div",{className:"goodreads-badge"}):null),r.a.createElement("span",{className:"author-best-book-span"},r.a.createElement("span",null,"Author of "),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.authorInfo.bestBookId,e.authorInfo.bestBookTitle)},void 0===e.authorInfo.bestBookSeries?e.authorInfo.bestBookTitle:"".concat(e.authorInfo.bestBookTitle," (").concat(e.authorInfo.bestBookSeries,", #").concat(e.authorInfo.bestBookSeriesInstance,")")),r.a.createElement("button",{className:"follow-author-button",onMouseOver:function(t){e.authorInfo.userIsFollowing&&(t.target.innerHTML="Unfollow")},onMouseOut:function(t){e.authorInfo.userIsFollowing&&(t.target.innerHTML="Following")}},e.authorInfo.userIsFollowing?"Following":"Follow Author")))):null,Pe[t]?r.a.createElement("img",{src:"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif",alt:"Loading"}):null,r.a.createElement("span",{className:"update-date-span"},Object(L.a)(e.date,"MMM dd, yyyy HH:mma")),r.a.createElement("button",{className:"delete-update-button",onClick:function(){var a=Object(h.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("This will hide this item from your updates feed so that it no longer appears on your profile or your friends' home pages. The item itself will not be deleted. Are you sure?")){a.next=6;break}return Ce((function(e){return e.map((function(e,a){return a===t||e}))})),a.next=4,O.deleteUpdate(e.id);case 4:y((function(e){return Object(m.a)(Object(m.a)({},e),{},{recentUpdates:e.recentUpdates.filter((function(e,a){return a!==t}))})})),Ce((function(e){return e.map((function(e,a){return a!==t&&e}))}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}))}))):null,st=f&&w.quotes.length>0?r.a.createElement("div",{className:"user-page-quotes-section"},r.a.createElement("span",{className:"section-title"},"".concat(u.toUpperCase(),"'S QUOTES")),w.quotes.filter((function(e,t){return t<5})).map((function(e,t){return r.a.createElement("div",{className:"user-page-quote-card",key:t},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.authorId,e.authorName)},r.a.createElement("img",{src:void 0!==e.authorProfilePicture?e.authorProfilePicture:"https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png",alt:e.authorName})),r.a.createElement("div",{className:"actual-quote-section"},r.a.createElement("span",{className:"quote"},"\u201c".concat(e.content,"\u201d")),r.a.createElement("span",{className:"quote-authorship"},r.a.createElement("span",{className:"dash"},"\u2015 "),r.a.createElement("span",null,"".concat(e.authorName,", ")),r.a.createElement("a",{href:O.pageGenerator.generateAddBookPage(e.bookId,e.bookTitle)},e.bookTitle)))),r.a.createElement("div",{className:"right-section"},null!==De.userUID&&e.likedByUser?he.includes(t)?r.a.createElement("a",{className:"quote-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"View quote"):r.a.createElement("a",{className:"quote-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"In my quotes"):r.a.createElement("button",{onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.likeQuote(De.userUID,e.id,a);case 2:y((function(a){return Object(m.a)(Object(m.a)({},a),{},{quotes:a.quotes.map((function(a,n){return n===t?Object(m.a)(Object(m.a)({},e),{},{likedByUser:!0}):e}))})})),be((function(e){return e.concat(t)}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Like"),r.a.createElement("a",{className:"number-of-likes-a",href:O.pageGenerator.generateQuotePage(e.id,e.content)},"".concat(e.numberOfLikes," likes"))))}))):null,ct=r.a.createElement("div",{className:"user-page-main-content-left-section"},et,tt,at,nt,rt,ot,st),lt=r.a.createElement("div",{className:"user-page-year-in-books-section"},r.a.createElement("a",{className:"section-title",href:O.pageGenerator.generateUserYearInBooksPage((new Date).getFullYear(),i,u)},"".concat(u.toUpperCase(),"'S YEAR IN BOOKS")),r.a.createElement("div",{className:"inner-content"},r.a.createElement("a",{className:"image-wrapper",href:O.pageGenerator.generateUserYearInBooksPage((new Date).getFullYear(),i,u)},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/yyib/yearly/yyib_badge-58c13ce9eeb35da7dda8dcf63aba2962.jpg",alt:"Year in books"})),r.a.createElement("div",{className:"year-in-books-right-section"},r.a.createElement("span",null,r.a.createElement("b",null,"".concat(Ge?"Your":"".concat(u,"'s")," ").concat((new Date).getFullYear()," Year in Books"))),r.a.createElement("span",null,"Take a look at ".concat(Ge?"Your":"".concat(u,"'s")," Year in Books. The long, the short\u2014it\u2019s all here.")),r.a.createElement("a",{href:O.pageGenerator.generateUserYearInBooksPage((new Date).getFullYear(),i,u)},"See ".concat(Ge?"Your":"".concat(u,"'s")," ").concat((new Date).getFullYear()," Year in Books"))))),it=f&&w.friends.length>0?r.a.createElement("div",{className:"user-page-friends-section"},r.a.createElement("span",{className:"section-title"},"".concat(u.toUpperCase(),"'S FRIENDS (").concat(w.friends.length,")")),r.a.createElement("div",{className:"friend-list"},w.friends.filter((function(e,t){return t<8})).map((function(e,t){return r.a.createElement("div",{className:"friend-card",key:t},r.a.createElement("a",{className:"profile-picture-wrapper",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},r.a.createElement("img",{src:void 0!==e.picture?e.picture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.name})),r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(e.id,e.name)},e.name),r.a.createElement("div",{className:"friend-stats"},r.a.createElement("span",null,"".concat(e.numberOfBooks," books")),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("span",null,"".concat(e.numberOfFriends," friends")))))})))):null,ut=f&&w.following.length>0?r.a.createElement("div",{className:"user-page-following-section"},r.a.createElement("span",{className:"section-title"},"PEOPLE ".concat(u.toUpperCase()," IS FOLLOWING")),r.a.createElement("div",{className:"following-list"},w.following.map((function(e,t){return r.a.createElement("a",{href:O.pageGenerator.generateUserPage(e.id,e.name),key:t},r.a.createElement("img",{src:void 0!==e.picture?e.picture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.name}))}))),r.a.createElement("span",{className:"number-of-followers-span"},"".concat(w.numberOfFollowers," people are following ").concat(u))):null,mt=f&&w.favoriteAuthors.length>0?r.a.createElement("div",{className:"user-page-favorite-authors-section"},r.a.createElement("span",{className:"section-title"},"".concat(u.toUpperCase(),"'S FAVORITE AUTHORS"),Ge?r.a.createElement("a",{href:O.pageGenerator.generateFavoriteAuthorsPage()},"edit"):null),r.a.createElement("div",{className:"favorite-author-list"},w.favoriteAuthors.filter((function(e,t){return t<6})).map((function(e,t){return r.a.createElement("div",{className:"favorite-author-card",key:t},r.a.createElement("a",{className:"favorite-author-picture-wrapper",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},r.a.createElement("img",{src:void 0!==e.picture?e.picture:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png",alt:e.name})),r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:"author-name-a",href:O.pageGenerator.generateAuthorPage(e.id,e.name)},e.name),r.a.createElement("span",null,r.a.createElement("span",null,"author of: "),r.a.createElement("a",{className:"favorite-author-best-book-a",href:O.pageGenerator.generateBookPage(e.bestBookId,e.bestBookTitle)},e.bestBookTitle))))})))):null,dt=f&&w.votedLists.length>0?r.a.createElement("div",{className:"user-page-listopia-section"},r.a.createElement("a",{className:"section-title",href:O.pageGenerator.generateListsVotedByUserPage(i,u)},"LISTOPIA VOTES"),r.a.createElement("div",{className:"lists-list"},w.votedLists.filter((function(e,t){return t<2})).map((function(e,t){return r.a.createElement("div",{className:"list-card",key:t},r.a.createElement("div",{className:"covers"},e.bookCovers.map((function(t,a){return r.a.createElement("a",{className:"list-book-cover-wrapper",href:O.pageGenerator.generateListPage(e.id,e.title),key:a},r.a.createElement("img",{src:t,alt:e.title}))}))),r.a.createElement("a",{className:"list-title-a",href:O.pageGenerator.generateListPage(e.id,e.title)},e.title),r.a.createElement("span",{className:"list-stats-span"},"".concat(e.numberOfBooks," books \u2014 ").concat(e.numberOfVoters," voters")))}))),r.a.createElement("a",{className:"more-lists-a",href:O.pageGenerator.generateListsVotedByUserPage(i,u)},"More...")):null,pt=f&&w.favoriteGenres.length>0?r.a.createElement("div",{className:"user-page-favorite-genres-section"},r.a.createElement("span",{className:"section-title"},"FAVORITE GENRES",Ge?r.a.createElement("a",{href:O.pageGenerator.generateEditFavoriteGenresPage()},"edit"):null),r.a.createElement("span",{className:"favorite-genres-span"},w.favoriteGenres.map((function(e,t){return t===w.favoriteGenres.length-1?r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(e),key:t},Qe(e)):t===w.favoriteGenres.length-2?r.a.createElement("span",{key:t},r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(e)},Qe(e)),r.a.createElement("span",null,", and ")):r.a.createElement("span",{key:t},r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(e)},Qe(e)),r.a.createElement("span",null,", "))})))):null,ft=r.a.createElement("div",{className:"user-page-main-content-right-section-bottom-links"},r.a.createElement("a",{href:O.pageGenerator.generateListsLikedByUserPage(i,u)},"Lists liked by ".concat(u))),gt=r.a.createElement("div",{className:"user-page-main-content-right-section"},lt,it,ut,mt,dt,pt,ft),ht=f?r.a.createElement("div",{className:ke?"user-page-unfollow-user-modal visible":"user-page-unfollow-user-modal"},r.a.createElement("button",{className:"close-button",onClick:function(e){return we(!1)}}),r.a.createElement("h1",null,"".concat(w.isUserFriend?"Unfollow":"Unfriend"," ").concat(Te?u+" "+w.lastName:u,"?")),r.a.createElement("span",null,w.isUserFriend?"This will remove ".concat(u,"'s activity from your updates feed, and your own activity will stop appearing in their updates feed. ").concat(u," will not be notified."):"This will remove ".concat(u,"'s activity from your updates feed.")),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"confirm-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(we(!1),I(!0),!w.isUserFriend){e.next=7;break}return e.next=5,O.unfriendUser(De.userUID,i,a);case 5:e.next=9;break;case 7:return e.next=9,O.unfollowUser(De.userUID,i,a);case 9:I(!1),y((function(e){return Object(m.a)(Object(m.a)({},e),{},{isFollowedByUser:!1,numberOfFollowers:e.numberOfFollowers-1})}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Confirm"),r.a.createElement("button",{className:"cancel-button",onClick:function(e){return we(!1)}},"Cancel"))):null,bt=f?r.a.createElement("div",{className:"private-profile"},r.a.createElement("h1",null,"".concat(u,"'s profile")),r.a.createElement("div",{className:"main-section"},r.a.createElement("div",{className:"left-section"},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/nophoto/user/u_225x300-c928cbb998d4ac6dd1f0f66f31f74b81.png",alt:"Private profile"}),r.a.createElement("span",null,"".concat(w.numberOfRatings," ratings | ").concat(w.numberOfReviews," reviews")),r.a.createElement("button",{className:"show-stats-window-button",onClick:function(e){return Ie(!0)}},"avg rating: ".concat(w.averageRating.toFixed(2))),r.a.createElement("div",{className:je?"user-ratings-chart visible":"user-ratings-chart"},r.a.createElement(xe,{fiveRatings:w.fiveRatings,fourRatings:w.fourRatings,threeRatings:w.threeRatings,twoRatings:w.twoRatings,oneRatings:w.oneRatings,closeChart:function(){return Ie(!1)}}))),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",{className:"introduction-span"},"".concat(u,"'s profile data is set to private.")),r.a.createElement("span",null,"You can view profiles for:"),r.a.createElement("ul",null,r.a.createElement("li",null,"direct friends (if you are signed in)"),r.a.createElement("li",null,"users who have made their profile public")),r.a.createElement("a",{className:"add-as-friend-a",href:O.pageGenerator.generateAddAsFriendPage(i)},"Add friend")))):null,vt=f&&Le?r.a.createElement("div",{className:"user-page-main-content"},ct,gt,ht):bt;return r.a.createElement("div",{className:ke?"user-page disabled-scrolling":"user-page"},r.a.createElement("div",{className:ke?"dark-page-cover visible":"dark-page-cover"}),r.a.createElement(A,null),vt,r.a.createElement(S,null))},Ie=(a(116),function(e){var t=e.match.params.userId,a=Object(c.f)(),o=new URLSearchParams(Object(c.g)().search),s="rating"===o.get("sort")?"rating":"popularity",l=null!==o.get("shelf")?o.get("shelf"):"all",i=null!==o.get("user_shelf")?o.get("user_shelf"):l,u=null!==o.get("friend_shelf")?o.get("friend_shelf"):l,d=Object(n.useState)(!1),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)({}),k=Object(b.a)(E,2),w=k[0],y=k[1],N=Object(n.useState)(!0),x=Object(b.a)(N,2),j=x[0],I=x[1],B=Object(n.useState)(0),P=Object(b.a)(B,2),C=P[0],U=P[1],M=Object(n.useState)(0),D=Object(b.a)(M,2),F=D[0],G=D[1],L=Object(n.useState)(!1),T=Object(b.a)(L,2),W=T[0],_=T[1],q=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q.userUID!==t){e.next=4;break}a.push({pathname:O.pageGenerator.generateUserPage(t,q.userInfo.firstName),state:"You can't compare books with yourself"}),e.next=9;break;case 4:return e.next=6,Object(R.trackPromise)(O.getInfoForCompareBooksPage(q.userUID,t,a));case 6:n=e.sent,y(n),v(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[q.userUID,t,a,q.userInfo.firstName]),Object(n.useEffect)((function(){if(void 0!==w.loggedInUserBooks){var e=w.otherUserBooks.filter((function(e,t){return t<20&&!w.loggedInUserBooks.some((function(t){return t.rootId===e.rootId}))&&0!==e.rating&&void 0!==e.rating}));C<e.length&&G(e[C].rating)}}),[C,w]);var z=f?w.loggedInUserBooks.reduce((function(e,t){return t.bookshelves.forEach((function(t){e.includes(t)||e.push(t)})),e}),[]):[],Y=f?w.otherUserBooks.reduce((function(e,t){return t.bookshelves.forEach((function(t){e.includes(t)||e.push(t)})),e}),[]):[],Q=z.filter((function(e){return Y.includes(e)})),V=f?w.otherUserBooks.filter((function(e){return"all"===u||e.bookshelves.includes(u)||e.status===u})):[],H=f?w.loggedInUserBooks.filter((function(e){return"all"===i||e.bookshelves.includes(i)||e.status===i})):[],J=f?V.length:0,K=f?V.filter((function(e){return!H.some((function(t){return t.rootId===e.rootId}))})).length:0,Z=J-K,X=f?H.length:0,$=X-Z,ee=0!==X?Z/X:0,te=0!==J?Z/J:0,ae=f?V.filter((function(e){return H.some((function(t){return t.rootId===e.rootId}))})).map((function(e){return e.rootId})):[],ne=ae.filter((function(e){var t=H.filter((function(t){return t.rootId===e}))[0],a=V.filter((function(t){return t.rootId===e}))[0];return void 0!==t.rating&&0!==t.rating&&void 0!==a.rating&&0!==a.rating})),re=f?ne.map((function(e){var t=H.filter((function(t){return t.rootId===e}))[0],a=V.filter((function(t){return t.rootId===e}))[0];return 100-25*Math.abs(t.rating-a.rating)})).reduce((function(e,t){return e+t/ne.length}),0):0,oe=f?V.filter((function(e,t){return t<20&&!ae.includes(e.rootId)&&0!==e.rating&&void 0!==e.rating})):[],se=function(){var e=Object(h.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=4;break}return e.next=3,O.rateBook(q.userUID,t.id,n,a);case 3:y((function(e){return Object(m.a)(Object(m.a)({},e),{},{loggedInUserBooks:e.loggedInUserBooks.concat(Object(m.a)(Object(m.a)({},t),{},{rating:n,status:"read"}))})}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce=f?r.a.createElement("h1",{className:"user-compare-books-page-header"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(t,w.otherUserFirstName)},void 0!==w.otherUserLastName?w.otherUserFirstName+" "+w.otherUserLastName:w.otherUserFirstName),r.a.createElement("span",null," > Compare Books")):null,le=f?r.a.createElement("div",{className:"user-compare-books-page-comparison-chart-section"},r.a.createElement("div",{className:"top-section"},r.a.createElement("img",{src:"https://chart.googleapis.com/chart?cht=v&chs=200x100&chd=t:".concat(J,",").concat(X,",0,").concat(Z,"&chds=0,").concat(Math.max(J,X),"&chco=66bb66,6666bb"),alt:"Comparison Chart"}),r.a.createElement("div",{className:"chart-explanation-area"},r.a.createElement("div",{className:"other-user"},r.a.createElement("div",{className:"other-user-chart-color-block"}),r.a.createElement("span",null,r.a.createElement("span",null,"".concat(w.otherUserFirstName,"'s books: ").concat(J," (")),r.a.createElement("a",{href:O.pageGenerator.generateUserReviewsPage(t)},"".concat(K," ")),r.a.createElement("span",null,"not in common)"))),0!==Z?r.a.createElement("div",{className:"books-in-common"},r.a.createElement("div",{className:"books-in-common-chart-color-block"}),r.a.createElement("span",null,"Books in common: ".concat(Z," (").concat((100*ee).toFixed(0),"% of your library and ").concat((100*te).toFixed(0),"% of ").concat(w.otherUserPronouns," library)"))):null,r.a.createElement("div",{className:"logged-in-user"},r.a.createElement("div",{className:"logged-in-user-chart-color-block"}),r.a.createElement("span",null,r.a.createElement("span",null,"My books: ".concat(X," (")),r.a.createElement("a",{href:O.pageGenerator.generateUserReviewsPage(q.userUID)},"".concat($," ")),r.a.createElement("span",null,"not in common)"))))),0!==Z?r.a.createElement("div",{className:"bottom-section"},r.a.createElement("span",null,"Your tastes are ".concat(re,"% similar for the books you both rated.")),r.a.createElement("div",{className:"sort-area"},r.a.createElement("label",{htmlFor:"sort"},"sort"),r.a.createElement("select",{name:"sort",value:s,onChange:function(e){return a.push({pathname:O.pageGenerator.generateUserCompareBooksPage(t),search:"?sort=".concat(e.target.value,"&user_shelf=").concat(i,"&friend_shelf=").concat(u)})}},r.a.createElement("option",null,"inverse popularity"),r.a.createElement("option",null,"rating")),r.a.createElement("button",{onClick:function(e){return I((function(e){return!e}))}},"(?)"),r.a.createElement("div",{className:j?"sort-explanation-popup hidden":"sort-explanation-popup"},r.a.createElement("div",{className:"left-tip"}),r.a.createElement("div",{className:"title-area"},r.a.createElement("span",null,r.a.createElement("b",null,"about sorts")),r.a.createElement("button",{className:"close-button",onClick:function(e){return I(!0)}})),r.a.createElement("div",{className:"explanation"},r.a.createElement("span",null,r.a.createElement("b",null,"inverse popularity")),r.a.createElement("p",null,"Sort by the number of times the book has been added by people on Goodreads in descending order. Seeing the uncommon books you have in common with someone can be revealing!"),r.a.createElement("span",null,r.a.createElement("b",null,"rating")),r.a.createElement("p",null,"Sort by the other person's rating in descending order."))))):null):null,ie=f?0===ae.length?r.a.createElement("span",{className:"no-books-in-common-span"},"You and ".concat(w.otherUserFirstName," don't have any books in common.")):r.a.createElement("table",{className:"books-in-common-table"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"top-row"},r.a.createElement("th",{width:"70%"},"book title"),r.a.createElement("th",{width:"15%"},"".concat(w.otherUserFirstName,"'s rating")),r.a.createElement("th",{width:"15%"},"my rating"))),r.a.createElement("tbody",null,ae.sort((function(e,t){var a=V.filter((function(t){return t.rootId===e}))[0],n=V.filter((function(e){return e.rootId===t}))[0];return"rating"===s?void 0===a.rating||0===a.rating?t:void 0===n.rating||0===n.rating?e:n.rating-a.rating:n.popularityScore-a.popularityScore})).map((function(e,t){var a=w.loggedInUserBooks.filter((function(t){return t.rootId===e}))[0],n=w.otherUserBooks.filter((function(t){return t.rootId===e}))[0];return r.a.createElement("tr",{className:"book-info-row",key:t},r.a.createElement("td",{width:"70%"},r.a.createElement("div",{className:"book-title-area"},r.a.createElement("a",{className:"book-cover-a",href:O.pageGenerator.generateBookPage(a.id,a.title)},r.a.createElement("img",{src:void 0!==a.cover?a.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:a.title})),r.a.createElement("div",{className:"book-title-and-authorship"},r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(a.id,a.title)},a.title),r.a.createElement("span",{className:"authorship-span"},r.a.createElement("span",null,"by "),r.a.createElement("a",{className:"book-author-a",href:O.pageGenerator.generateAuthorPage(a.authorId,a.authorName)},a.authorName))))),r.a.createElement("td",{width:"15%"},0!==n.rating&&void 0!==n.rating?r.a.createElement("div",{className:"rating-stars"},r.a.createElement("div",{className:n.rating>=1?"static-star small full":n.rating>=.5?"static-star small almost-full":n.rating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:n.rating>=2?"static-star small full":n.rating>=1.5?"static-star small almost-full":n.rating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:n.rating>=3?"static-star small full":n.rating>=2.5?"static-star small almost-full":n.rating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:n.rating>=4?"static-star small full":n.rating>=3.5?"static-star small almost-full":n.rating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:n.rating>=5?"static-star small full":n.rating>=4.5?"static-star small almost-full":n.rating>4?"static-star small almost-empty":"static-star small empty"})):r.a.createElement("span",{className:"status-span"},n.status)),r.a.createElement("td",{width:"15%"},0!==a.rating&&void 0!==a.rating?r.a.createElement("div",{className:"rating-stars"},r.a.createElement("div",{className:a.rating>=1?"static-star small full":a.rating>=.5?"static-star small almost-full":a.rating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:a.rating>=2?"static-star small full":a.rating>=1.5?"static-star small almost-full":a.rating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:a.rating>=3?"static-star small full":a.rating>=2.5?"static-star small almost-full":a.rating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:a.rating>=4?"static-star small full":a.rating>=3.5?"static-star small almost-full":a.rating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:a.rating>=5?"static-star small full":a.rating>=4.5?"static-star small almost-full":a.rating>4?"static-star small almost-empty":"static-star small empty"})):r.a.createElement("span",{className:"status-span"},a.status)))})))):null,ue=f&&te<100&&oe.length>0?r.a.createElement("div",{className:"user-compare-books-page-rate-other-books-area"},r.a.createElement("span",{className:"rate-other-books-explanation-span"},"See what other books you have in common with ".concat(w.otherUserFirstName,'. Rate each book you\'ve read, or click "skip".')),C<oe.length?r.a.createElement("div",{className:"rating-section"},r.a.createElement("span",{className:"rate-this-book-title"},r.a.createElement("span",null,"#".concat(C+1,". rate this book: ")),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:F>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return G(1)},onMouseLeave:function(e){return G(oe[C].rating)},onClick:function(){return se(oe[C],1)}}),r.a.createElement("div",{className:F>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return G(2)},onMouseLeave:function(e){return G(oe[C].rating)},onClick:function(){return se(oe[C],2)}}),r.a.createElement("div",{className:F>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return G(3)},onMouseLeave:function(e){return G(oe[C].rating)},onClick:function(){return se(oe[C],3)}}),r.a.createElement("div",{className:F>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return G(4)},onMouseLeave:function(e){return G(oe[C].rating)},onClick:function(){return se(oe[C],4)}}),r.a.createElement("div",{className:F>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return G(5)},onMouseLeave:function(e){return G(oe[C].rating)},onClick:function(){return se(oe[C],5)}})),r.a.createElement("span",{className:"or-span"}," or "),r.a.createElement("button",{className:"skip-button",onClick:function(e){return U((function(e){return e+1}))}},"skip")),r.a.createElement("div",{className:"book-card"},r.a.createElement("a",{className:"book-cover-a",href:O.pageGenerator.generateBookPage(oe[C].id,oe[C].title)},r.a.createElement("img",{src:void 0!==oe[C].cover?oe[C].cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:oe[C].title})),r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(oe[C].id,oe[C].title)},oe[C].title),r.a.createElement("span",{className:"authorship-span"},r.a.createElement("span",null,"by "),r.a.createElement("a",{className:"book-author-a",href:O.pageGenerator.generateAuthorPage(oe[C].authorId,oe[C].authorName)},oe[C].authorName)),r.a.createElement("span",{className:"user-rated-span"},r.a.createElement("span",null,"".concat(w.otherUserFirstName," rated it: ")),r.a.createElement("div",{className:"rating-stars"},r.a.createElement("div",{className:oe[C].rating>=1?"static-star small full":oe[C].rating>=.5?"static-star small almost-full":oe[C].rating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:oe[C].rating>=2?"static-star small full":oe[C].rating>=1.5?"static-star small almost-full":oe[C].rating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:oe[C].rating>=3?"static-star small full":oe[C].rating>=2.5?"static-star small almost-full":oe[C].rating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:oe[C].rating>=4?"static-star small full":oe[C].rating>=3.5?"static-star small almost-full":oe[C].rating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:oe[C].rating>=5?"static-star small full":oe[C].rating>=4.5?"static-star small almost-full":oe[C].rating>4?"static-star small almost-empty":"static-star small empty"}))),r.a.createElement("span",{className:"bookshelves-span"},r.a.createElement("span",null,"bookshelves: "),oe[C].bookshelves.map((function(e,t){return r.a.createElement("span",{className:"bookshelf-span",key:t},"".concat(e,", "))}))),void 0!==oe[C].review?r.a.createElement("div",{className:W?"book-review show-more":"book-review"},r.a.createElement("span",{className:"review-span"},oe[C].review),oe[C].review.length>500?r.a.createElement("button",{className:"more-less-button",onClick:function(e){return _((function(e){return!e}))}},W?"(less)":"...more"):null):null),r.a.createElement("div",{className:"book-index-section"},r.a.createElement("span",null,"book ".concat(C+1," of ").concat(oe.length))))):r.a.createElement("div",{className:"finished-rating-area"},r.a.createElement("span",null,"You have ".concat(Z," books in common with ").concat(w.otherUserFirstName,". Based on these ratings your tastes are ").concat(re,"% similar.")),r.a.createElement("a",{href:O.pageGenerator.generateUserPage(t,w.otherUserFirstName)},"back to ".concat(w.otherUserFirstName,"'s profile")))):null,me=f?r.a.createElement("div",{className:"user-compare-books-page-main-content-left-section"},ce,w.otherUserBooks.length>0?r.a.createElement("div",{className:"comparisons-and-ratings"},le,ie,ue):r.a.createElement("span",{className:"no-books-added-span"},"".concat(w.otherUserFirstName," hasn't added any books."))):null,de=f?r.a.createElement("div",{className:"user-compare-books-page-main-content-right-section"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(t,w.otherUserFirstName)},"back to ".concat(w.otherUserFirstName,"'s profile \xbb")),r.a.createElement("a",{href:O.pageGenerator.generateBookCompatibilityTestPage(t,w.otherUserFirstName)},"book compatibility test"),r.a.createElement("a",{href:O.pageGenerator.generateGiveRecommendationToUserPage(t)},"recommend a book to ".concat(w.otherUserFirstName)),r.a.createElement("div",{className:"common-shelves-area"},r.a.createElement("label",{htmlFor:"common-shelves"},"common shelves"),r.a.createElement("select",{name:"common-shelves",value:l,onChange:function(e){a.push({pathname:O.pageGenerator.generateUserCompareBooksPage(t),search:"?sort=".concat(s,"&shelf=").concat(e.target.value)})}},r.a.createElement("option",null,"all"),r.a.createElement("option",null,"read"),r.a.createElement("option",null,"currently-reading"),r.a.createElement("option",null,"to-read"),Q.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("div",{className:"your-shelves-area"},r.a.createElement("label",{htmlFor:"your-shelves"},"your shelves"),r.a.createElement("select",{name:"your-shelves",value:i,onChange:function(e){a.push({pathname:O.pageGenerator.generateUserCompareBooksPage(t),search:"?sort=".concat(s,"&user_shelf=").concat(e.target.value,"&friend_shelf=").concat(u)})}},r.a.createElement("option",null,"all"),r.a.createElement("option",null,"read"),r.a.createElement("option",null,"currently-reading"),r.a.createElement("option",null,"to-read"),z.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("div",{className:"their-shelves-area"},r.a.createElement("label",{htmlFor:"their-shelves"},"their shelves"),r.a.createElement("select",{name:"their-shelves",value:u,onChange:function(e){a.push({pathname:O.pageGenerator.generateUserCompareBooksPage(t),search:"?sort=".concat(s,"&user_shelf=").concat(i,"&friend_shelf=").concat(e.target.value)})}},r.a.createElement("option",null,"all"),r.a.createElement("option",null,"read"),r.a.createElement("option",null,"currently-reading"),r.a.createElement("option",null,"to-read"),Y.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))):null;return r.a.createElement("div",{className:"user-compare-books-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"user-compare-books-page-main-content"},me,de),r.a.createElement(S,null))}),Se=(a(117),function(){var e=Object(c.f)(),t=new URLSearchParams(Object(c.g)().search).get("id"),a=null!==t?t.split("-")[0]:null,o=null!==t?t.split("-").slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):null,s=null!==o?o.split(" ")[0]:null,l=Object(n.useState)(!1),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)({}),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)({}),k=Object(b.a)(E,2),w=k[0],y=k[1],N=Object(n.useState)(0),x=Object(b.a)(N,2),j=x[0],I=x[1],B=Object(n.useMemo)((function(){return["JdE1oE1zeZYOVU8PYyy7","Fctu87S2XLy2RA5Wcr6H","0Ahlt0lmj06b0rKaD7qJ","24P8kxLmS4LmtcDSPkvl"]}),[]),P=Object(n.useMemo)((function(){return["6490z4ij4qsGAIBoeBMK","Djx2P7Egc9cJgfdwwF37","H1xRvYEIDyk54H68QssS","HfkmwYPOfQ4MtpLnLNlq"]}),[]),C=Object(n.useMemo)((function(){return["JQBwpf6G3ND5pKXDYNlx","JdE1oE1zeZYOVU8PYyy7"]}),[]),U=Object(n.useMemo)((function(){return["VYSVKcKAKYwDq2PhV2cJ","VncumXL1QTrVaGdhvM4O","aJSCUT07kmUQqUlTegRv"]}),[]),M=Object(n.useMemo)((function(){return["aJy9OMGHhUQ8GPZGRn6C","bzRUzMqsdgjKD75Jxosn","dDSxgc4Af87DFYEsiTxq","e7wTYJTr4dSkJLaEXWEO"]}),[]),D=Object(n.useMemo)((function(){return["hx124Fx58u2xRqWUaxlv","ljpqnZKAKgZSjbmrO6sF","nSpJeOPwkgFKg45uc164","oJ2euLQwJOn944VBu1tl"]}),[]),F=Object(n.useMemo)((function(){return["pe83n32WlbIWRmYwyLiD","pttjrCHmNS16f2lhOU9e"]}),[]),G=Object(n.useMemo)((function(){return["qNejPAmYF2xlTdbnhH41","qUe7SD2Jba5MbybZNUj5","sBVe4XtgS9K0HldzfRBN"]}),[]),L=Object(n.useMemo)((function(){return["t8AF9o4IHodXuusb62ws","uBI55trKgMJpRohAtxry","unRbEhtsd1vcMxpSvDKI","zCikj4mmQyZlyVNyP7cF"]}),[]),T="https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png",W=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var t=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=y,t.next=3,Object(R.trackPromise)(O.getBooksInfoForBookCompatibilityTestPage(B,P,C,U,M,D,F,G,L));case 3:return t.t1=t.sent,(0,t.t0)(t.t1),t.t2=v,t.next=8,Object(R.trackPromise)(O.getUsersInfoForCompatibilityTestPage(B,P,C,U,M,D,F,G,L,W.userUID,a,e));case 8:t.t3=t.sent,(0,t.t2)(t.t3),m(!0);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[P,C,B,U,D,L,G,M,F,W.userUID,a,e]);var _=function(e,t,a){var n=e.filter((function(e){return t.some((function(t){return t.rootId===e&&void 0!==t.rating&&t.rating>0}))&&a.some((function(t){return t.rootId===e&&void 0!==t.rating&&t.rating>0}))}));return 0===n.length?-1:n.reduce((function(e,r){return e+(5-Math.abs(t.filter((function(e){return e.rootId===r}))[0].rating-a.filter((function(e){return e.rootId===r}))[0].rating))/5/n.length}),0)},q=[u?_(B,f.loggedInUser.popularBooks,f.otherUser.popularBooks):0,u?_(P,f.loggedInUser.classicsBooks,f.otherUser.classicsBooks):0,u?_(C,f.loggedInUser.popularFictionBooks,f.otherUser.popularFictionBooks):0,u?_(U,f.loggedInUser.thrillersBooks,f.otherUser.thrillersBooks):0,u?_(M,f.loggedInUser.nonFictionBooks,f.otherUser.nonFictionBooks):0,u?_(D,f.loggedInUser.fantasyBooks,f.otherUser.fantasyBooks):0,u?_(F,f.loggedInUser.romanceBooks,f.otherUser.romanceBooks):0,u?_(G,f.loggedInUser.scienceFictionBooks,f.otherUser.scienceFictionBooks):0,u?_(L,f.loggedInUser.womensFictionBooks,f.otherUser.womensFictionBooks):0],z=q.filter((function(e){return-1!==e})).reduce((function(e,t){return e+t/q.filter((function(e){return-1!==e})).length}),0),Y=r.a.createElement("h1",{className:"book-compatibility-test-page-header"},"Book Compatibility Test Results"),Q=u?r.a.createElement("div",{className:"book-compatibility-test-page-general-compatibility-section"},r.a.createElement("a",{className:"user-profile-picture-wrapper",href:O.pageGenerator.generateUserPage(W.userUID,W.userInfo.firstName)},r.a.createElement("img",{src:void 0!==f.loggedInUser.profilePicture?f.loggedInUser.profilePicture:T,alt:W.userInfo.firstName})),r.a.createElement("span",null,r.a.createElement("span",null,"Your compatibility with "),r.a.createElement("a",{href:O.pageGenerator.generateUserPage(a,o.split(" ")[0])},o),r.a.createElement("span",null," is ".concat((100*z).toFixed(0),"%."))),r.a.createElement("a",{className:"user-profile-picture-wrapper",href:O.pageGenerator.generateUserPage(W.userUID,W.userInfo.firstName)},r.a.createElement("img",{src:void 0!==f.otherUser.profilePicture?f.otherUser.profilePicture:T,alt:W.userInfo.firstName}))):null,V=u?r.a.createElement("table",{className:"book-compatibility-test-page-category-compatibility-section"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Score"))),r.a.createElement("tbody",null,["popular","classics","popular fiction","thrillers","nonfiction","fantasy","romance","science fiction","women's fiction"].map((function(e,t){var a=-1===q[t]?0:q[t];return r.a.createElement("tr",{key:t,className:8===t?"last-row":""},r.a.createElement("td",{className:"category-td"},r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(e.split(" ").join("-"))},e)),r.a.createElement("td",{className:"score-td"},r.a.createElement("span",null,100*a),r.a.createElement("div",{className:"green-bar-"+(100*a).toString()})))})))):null,H=function(e,t,a,n,o,c){var l=function(e){return e.length>0?void 0!==e[0].rating&&0!==e[0].rating?r.a.createElement("div",{className:"rating-stars"},r.a.createElement("div",{className:e[0].rating>=1?"static-star small full":e[0].rating>=.5?"static-star small almost-full":e[0].rating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e[0].rating>=2?"static-star small full":e[0].rating>=1.5?"static-star small almost-full":e[0].rating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e[0].rating>=3?"static-star small full":e[0].rating>=2.5?"static-star small almost-full":e[0].rating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e[0].rating>=4?"static-star small full":e[0].rating>=3.5?"static-star small almost-full":e[0].rating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e[0].rating>=5?"static-star small full":e[0].rating>=4.5?"static-star small almost-full":e[0].rating>4?"static-star small almost-empty":"static-star small empty"})):r.a.createElement("span",{className:"status-span"},e[0].status):r.a.createElement("span",{className:"nothing-span"},"--")};return r.a.createElement("table",{className:"specific-category-table",key:c},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,e+" Books"),r.a.createElement("th",null,"My Rating"),r.a.createElement("th",null,"".concat(s,"'s Rating")),r.a.createElement("th",null,"Match"))),r.a.createElement("tbody",null,t.map((function(e,s){var c=n.filter((function(t){return t.rootId===e})),i=o.filter((function(t){return t.rootId===e}));return r.a.createElement("tr",{key:s,className:s===t.length-1?"last-row":""},r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("a",{href:O.pageGenerator.generateBookPage(a[s].id,a[s].title)},a[s].title),r.a.createElement("span",null," by "),r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(a[s].authorId,a[s].authorName)},a[s].authorName))),r.a.createElement("td",null,l(c)),r.a.createElement("td",null,l(i)),r.a.createElement("td",null,c.length>0&&void 0!==c[0].rating&&0!==c[0].rating&&i.length>0&&void 0!==i[0].rating&&0!==i[0].rating?0===Math.abs(c[0].rating-i[0].rating)?r.a.createElement("span",{className:"excellent"},"excellent"):1===Math.abs(c[0].rating-i[0].rating)?r.a.createElement("span",{className:"good"},"good"):2===Math.abs(c[0].rating-i[0].rating)?r.a.createElement("span",{className:"ok"},"ok"):3===Math.abs(c[0].rating-i[0].rating)?r.a.createElement("span",{className:"not-good"},"not good"):r.a.createElement("span",{className:"very-bad"},"very bad"):r.a.createElement("span",null)))}))))},J=u?r.a.createElement("div",{className:"book-compatibility-test-page-popular-section"},H("popular",B,w.popularBooks,f.loggedInUser.popularBooks,f.otherUser.popularBooks,0)):null,K=u?r.a.createElement("div",{className:"book-compatibility-test-page-classics-section"},H("classics",P,w.classicsBooks,f.loggedInUser.classicsBooks,f.otherUser.classicsBooks,0)):null,Z=u?r.a.createElement("div",{className:"book-compatibility-test-page-popular-fiction-section"},H("popular fiction",C,w.popularFictionBooks,f.loggedInUser.popularFictionBooks,f.otherUser.popularFictionBooks,0)):null,X=u?r.a.createElement("div",{className:"book-compatibility-test-page-thrillers-section"},H("thrillers",U,w.thrillersBooks,f.loggedInUser.thrillersBooks,f.otherUser.thrillersBooks,0)):null,$=u?r.a.createElement("div",{className:"book-compatibility-test-page-nonfiction-section"},H("nonfiction",M,w.nonFictionBooks,f.loggedInUser.nonFictionBooks,f.otherUser.nonFictionBooks,0)):null,ee=u?r.a.createElement("div",{className:"book-compatibility-test-page-fantasy-section"},H("fantasy",D,w.fantasyBooks,f.loggedInUser.fantasyBooks,f.otherUser.fantasyBooks,0)):null,te=u?r.a.createElement("div",{className:"book-compatibility-test-page-romance-section"},H("romance",F,w.romanceBooks,f.loggedInUser.romanceBooks,f.otherUser.romanceBooks,0)):null,ae=u?r.a.createElement("div",{className:"book-compatibility-test-page-science-fiction-section"},H("science fiction",G,w.scienceFictionBooks,f.loggedInUser.scienceFictionBooks,f.otherUser.scienceFictionBooks,0)):null,ne=u?r.a.createElement("div",{className:"book-compatibility-test-page-womens-fiction-section"},H("women's fiction",L,w.womensFictionBooks,f.loggedInUser.womensFictionBooks,f.otherUser.womensFictionBooks,0)):null,re=r.a.createElement("div",{className:"book-compatibility-test-page-main-content-left-section"},Y,Q,V,J,K,Z,X,$,ee,te,ae,ne),oe=u?r.a.createElement("div",{className:"book-compatibility-test-page-main-content-right-section"},r.a.createElement("div",{className:"top-links"},r.a.createElement("a",{href:O.pageGenerator.generateBookEditCompatibilityTestAnswersPage(a)},"edit my answers"),r.a.createElement("a",{href:O.pageGenerator.generateUserCompareBooksPage(a)},"compare books")),r.a.createElement("div",{className:"compare-with-friends-section"},r.a.createElement("h2",null,"Compare with Friends"),r.a.createElement("select",{value:j,onChange:function(t){var a=t.target.value;I(a),e.push({pathname:O.pageGenerator.generateBookCompatibilityTestPage(f.loggedInUser.friends[a-1].id,f.loggedInUser.friends[a-1].name)})}},r.a.createElement("option",{className:"no-display-option",value:0}),f.loggedInUser.friends.map((function(e,t){return r.a.createElement("option",{key:t,value:t+1},e.name)}))))):null,se=r.a.createElement("div",{className:"book-compatibility-test-page-main-content"},re,oe);return r.a.createElement("div",{className:"book-compatibility-test-page"},r.a.createElement(A,null),se,r.a.createElement(S,null))}),Be=(a(118),function(e){var t=Object(n.useState)(e.rating),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),i=l[0],u=l[1],m=function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u(!0),e.saveRating(a),u(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return i?r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("span",{className:"saving-span"},"saving")):r.a.createElement("div",{className:"user-book-page-rate-book-star-rating"},r.a.createElement("div",{className:o>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return s(1)},onMouseLeave:function(t){return s(void 0===e.rating?0:e.rating)},onClick:function(){return m(1)}}),r.a.createElement("div",{className:o>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return s(2)},onMouseLeave:function(t){return s(void 0===e.rating?0:e.rating)},onClick:function(){return m(2)}}),r.a.createElement("div",{className:o>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return s(3)},onMouseLeave:function(t){return s(void 0===e.rating?0:e.rating)},onClick:function(){return m(3)}}),r.a.createElement("div",{className:o>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return s(4)},onMouseLeave:function(t){return s(void 0===e.rating?0:e.rating)},onClick:function(){return m(4)}}),r.a.createElement("div",{className:o>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return s(5)},onMouseLeave:function(t){return s(void 0===e.rating?0:e.rating)},onClick:function(){return m(5)}}))}),Pe=(a(119),function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],c=function(){var t=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,Object(R.trackPromise)(e.addToShelf());case 3:s(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,Object(R.trackPromise)(e.removeFromShelf());case 3:s(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("button",{className:e.wantToRead?"user-want-to-read-button remove":"user-want-to-read-button add",onClick:function(t){e.wantToRead?l():c()}},r.a.createElement("span",null,o?null:r.a.createElement("img",{className:"check-img",src:"https://s.gr-assets.com/assets/green_check-101ac6f308922bc4fd60437500d7b60a.png",alt:"Green check"}),r.a.createElement("span",null,o?"...saving":"Want to Read")))}),Ce=(a(120),function(){var e=Object(c.f)(),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)({}),i=Object(b.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(b.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)([]),k=Object(b.a)(E,2),w=k[0],y=k[1],N=new URLSearchParams(Object(c.g)().search).get("id"),x=JSON.parse(localStorage.getItem("userState")),j=["POPULAR BOOKS","CLASSICS BOOKS","POPULAR FICTION BOOKS","THRILLERS BOOKS","NONFICTION BOOKS","FANTASY BOOKS","ROMANCE BOOKS","SCIENCE FICTION BOOKS","WOMEN'S FICTION BOOKS"],I=Object(n.useMemo)((function(){return["JdE1oE1zeZYOVU8PYyy7","Fctu87S2XLy2RA5Wcr6H","0Ahlt0lmj06b0rKaD7qJ","24P8kxLmS4LmtcDSPkvl","4uhaVEO0ZZvDCvT8FgEM","AsA2JWdwSzRg6vTJ7adi"]}),[]),B=Object(n.useMemo)((function(){return["6490z4ij4qsGAIBoeBMK","Djx2P7Egc9cJgfdwwF37","H1xRvYEIDyk54H68QssS","HfkmwYPOfQ4MtpLnLNlq"]}),[]),P=Object(n.useMemo)((function(){return["JQBwpf6G3ND5pKXDYNlx","JdE1oE1zeZYOVU8PYyy7"]}),[]),C=Object(n.useMemo)((function(){return["VYSVKcKAKYwDq2PhV2cJ","VncumXL1QTrVaGdhvM4O","aJSCUT07kmUQqUlTegRv"]}),[]),U=Object(n.useMemo)((function(){return["aJy9OMGHhUQ8GPZGRn6C","bzRUzMqsdgjKD75Jxosn","dDSxgc4Af87DFYEsiTxq","e7wTYJTr4dSkJLaEXWEO"]}),[]),M=Object(n.useMemo)((function(){return["hx124Fx58u2xRqWUaxlv","ljpqnZKAKgZSjbmrO6sF","nSpJeOPwkgFKg45uc164","oJ2euLQwJOn944VBu1tl"]}),[]),D=Object(n.useMemo)((function(){return["pe83n32WlbIWRmYwyLiD","pttjrCHmNS16f2lhOU9e"]}),[]),F=Object(n.useMemo)((function(){return["qNejPAmYF2xlTdbnhH41","qUe7SD2Jba5MbybZNUj5","sBVe4XtgS9K0HldzfRBN"]}),[]),G=Object(n.useMemo)((function(){return["t8AF9o4IHodXuusb62ws","uBI55trKgMJpRohAtxry","unRbEhtsd1vcMxpSvDKI","zCikj4mmQyZlyVNyP7cF"]}),[]);Object(n.useEffect)((function(){var t=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,Object(R.trackPromise)(O.getBooksInfoForBookCompatibilityTestPage(I,B,P,C,U,M,D,F,G));case 3:e.t1=e.sent,(0,e.t0)(e.t1),s(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null===x.userUID||void 0===x.userUID?e.push({pathname:"/user/sign_in"}):t()}),[I,B,P,C,U,M,D,F,G,x.userUID,e]);var L=function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.trackPromise)(O.addBookToShelf(x.userUID,a,"to-read",e));case 2:y((function(e){return e.concat(a)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.removeBookFromShelf(x.userUID,t));case 2:y((function(e){return e.filter((function(e){return e!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.trackPromise)(O.rateBook(x.userUID,a,n,e));case 2:v((function(e){return e.concat({id:a,rating:n})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),_=r.a.createElement("div",{className:"edit-compatibility-test-answers-page-main-content-top-section"},r.a.createElement("h1",null,"Book Compatibility Test"),r.a.createElement("span",null,"Rate the books below and then click to get your report."),r.a.createElement("a",{href:null!==N?O.pageGenerator.generateBookCompatibilityTestPage(N):O.pageGenerator.generateInviteFriendsPage()},"Compare Results")),q=o?r.a.createElement("div",{className:"edit-compatibility-test-answers-page-main-content-categories-section"},r.a.createElement("div",{className:"categories"},Object.keys(u).map((function(e,t){var a=function(t){return r.a.createElement("div",{className:"book-row"},u[e].filter((function(e,a){return a>=t&&a<t+5})).map((function(e,t){var a=f.filter((function(t){return t.id===e.id}));return r.a.createElement("div",{className:"book-card",key:t},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}),r.a.createElement(Pe,{wantToRead:w.includes(e.id),addToShelf:function(){return L(e.id)},removeFromShelf:function(){return T(e.id)}}),r.a.createElement(Be,{rating:a.length>0?a[0].rating:0,saveRating:function(t){return W(e.id,t)}}))})))};return r.a.createElement("div",{className:"category-books-list",key:t},r.a.createElement("span",{className:"section-title"},j[t]),a(0),u[e].length>5?r.a.createElement("div",{className:"divider"}):null,u[e].length>5?a(5):null)}))),r.a.createElement("a",{href:null!==N?O.pageGenerator.generateBookCompatibilityTestPage(N):O.pageGenerator.generateInviteFriendsPage()},"Compare Results")):null;return r.a.createElement("div",{className:"edit-compatibility-test-answers-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"edit-compatibility-test-answers-page-main-section"},_,q),r.a.createElement(S,null))}),Ae=(a(121),function(e){var t=e.match,a=Object(c.f)(),o=t.params.newFriendId,s=Object(n.useState)(!1),l=Object(b.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)({}),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(!1),E=Object(b.a)(v,2),k=E[0],w=E[1],y=Object(n.useState)(""),N=Object(b.a)(y,2),x=N[0],j=N[1],I=Object(n.useState)(!1),B=Object(b.a)(I,2),P=B[0],C=B[1],U=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,Object(R.trackPromise)(O.getUserInfoForAddAsFriendPage(U.userUID,o,a));case 3:e.t1=e.sent,(0,e.t0)(e.t1),u(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();U.userUID===o?a.push({pathname:O.pageGenerator.generateUserPage(o,U.userInfo.firstName),state:"You can't be friends with yourself."}):null===U.userUID||void 0===U.userUID?a.push({pathname:"/user/sign_in"}):e()}),[U.userUID,o,U.userInfo.firstName,a]);var M=i?r.a.createElement("h1",{className:"user-add-as-friend-page-header"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(o,p.firstName)},p.firstName),r.a.createElement("span",null," > Add as a Friend")):null,D=i?r.a.createElement("div",{className:"user-add-as-friend-page-request-sent-area"},r.a.createElement("span",null,"A friend request has been sent to ".concat(p.firstName,".")),r.a.createElement("span",null,"After confirmation has been made, you will be notified by email."),r.a.createElement("a",{className:"ok-a",href:O.pageGenerator.generateUserPage(o,p.firstName)},"Ok")):null,F=i?r.a.createElement("div",{className:"user-add-as-friend-page-explanation-section"},r.a.createElement("span",{className:"black-span"},"Please only add people who you are genuinely interested in being friends with!"),r.a.createElement("span",{className:"black-span"},"We will ask ".concat(p.firstName," to confirm you as a friend before the connection is made.")),r.a.createElement("button",{className:"add-message-button",onClick:function(e){return w((function(e){return!e}))}},"add a message (optional) \xbb"," "),r.a.createElement("textarea",{className:k?"message":"message hidden",value:x,onChange:function(e){return j(e.target.value)}}),r.a.createElement("span",{className:"grey-span"},"Submitting a friend request will cause you to start following ".concat(p.firstName," right away. You will see ").concat(p.pronouns," reviews and status updates on your home page, even before they accept your friend request."))):null,G=i?r.a.createElement("div",{className:"user-add-as-friend-page-bottom-section"},r.a.createElement("button",{className:"add-friend-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.sendFriendRequest(U.userUID,o,x.length>0?x:void 0);case 2:C(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Add as a Friend"),r.a.createElement("a",{className:"cancel-a",href:O.pageGenerator.generateUserPage(o,p.firstName)},"cancel")):null,L=r.a.createElement("div",{className:"user-add-as-friend-page-main-content"},M,P?D:F,P?null:G);return r.a.createElement("div",{className:"user-add-as-friend-page"},r.a.createElement(A,null),L,r.a.createElement(S,null))}),Ue=(a(122),a(123),function(e){var t=Object(n.useState)(e.shelvesBookBelongsTo),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(""),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(b.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(""),E=Object(b.a)(v,2),k=E[0],w=E[1];return Object(n.useEffect)((function(){s(e.shelvesBookBelongsTo)}),[e.shelvesBookBelongsTo]),r.a.createElement("div",{className:"user-bookshelf-page-add-to-shelves-popup"},r.a.createElement("div",{className:"popup-top-section"},r.a.createElement("div",{className:"popup-topmost-section"},r.a.createElement("button",{className:"choose-shelves-button"},"choose shelves..."),r.a.createElement("button",{className:"close-popup-button",onClick:function(t){return e.close()}},"close")),r.a.createElement("input",{type:"text",className:"search-shelf-input",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"popup-middle-section"},e.shelves.filter((function(e){return 0===i.length||e.includes(i.toLowerCase())})).map((function(t,a){return r.a.createElement("div",{className:"read"===t?o.includes(t)?"marked selected popup-shelf":"marked popup-shelf":o.includes(t)?"selected popup-shelf":"popup-shelf",key:a,onClick:function(){var a=Object(h.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o.includes(t)){a.next=12;break}if(!["read","to-read","reading"].includes(t)){a.next=8;break}if(o.includes(t)){a.next=6;break}return s((function(e){return e.filter((function(e){return!["read","to-read","reading"].includes(e)})).concat(t)})),a.next=6,e.changeBookStatus(t);case 6:a.next=12;break;case 8:if(o.includes(t)){a.next=12;break}return s((function(e){return e.concat(t)})),a.next=12,e.addBookToShelf(t);case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},r.a.createElement("span",null,t))}))),r.a.createElement("div",{className:"popup-bottom-section"},!p||i.length>0?r.a.createElement("button",{className:"add-new-shelf-button",onClick:function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==i.length&&!e.shelves.includes(i)){t.next=4;break}f(!0),t.next=8;break;case 4:return t.next=6,e.addBookToShelf(i);case 6:u(""),f(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},0===i.length||e.shelves.includes(i)?r.a.createElement("span",{className:"add-new-shelf-span"},"Add new shelf"):r.a.createElement("span",null,"Add ",r.a.createElement("b",null,'"'.concat(i,'"'))," shelf")):r.a.createElement("div",{className:"add-new-shelf-container"},r.a.createElement("input",{type:"text",value:k,onChange:function(e){return w(e.target.value)}}),r.a.createElement("button",{className:"add-new-shelf-with-input-button",onClick:function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addBookToShelf(k);case 2:w(""),f(!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"Add"))))}),Re=(a(124),function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1];return r.a.createElement("div",{className:o?"user-bookshelf-page-user-review-section showing-all":"user-bookshelf-page-user-review-section"},r.a.createElement("span",{className:void 0===e.reviewText?"no-review-span":""},void 0!==e.reviewText?e.reviewText.slice(0,o?e.reviewText.length:150):"None"),void 0!==e.reviewText&&e.reviewText.length>150?r.a.createElement("button",{className:"review-more-less-button",onClick:function(e){return s((function(e){return!e}))}},o?"(less)":"...more"):null)}),Me=(a(125),function(e){var t=Object(n.useState)(!0),a=Object(b.a)(t,2),o=a[0],s=a[1];return r.a.createElement("div",{className:"top-message-div ".concat(e.color," ").concat(o?"":"hidden")},r.a.createElement("span",null,e.content),r.a.createElement("button",{className:"close-button",onClick:function(e){return s(!1)}}))}),De=(a(126),function(e){var t=Object(n.useState)(void 0!==e.initialDate?e.initialDate.getFullYear().toString():""),a=Object(b.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(void 0!==e.initialDate?e.initialDate.getMonth().toString():""),l=Object(b.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(void 0!==e.initialDate?e.initialDate.getDate().toString():""),d=Object(b.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(!1),h=Object(b.a)(g,2),v=h[0],E=h[1],k=Object(n.useState)(!1),w=Object(b.a)(k,2),y=w[0],N=w[1];return r.a.createElement("div",{className:"editable-bookshelf-date-field"},r.a.createElement("span",{className:void 0===e.initialDate?"no-date-span":""},void 0!==e.initialDate?Object(L.a)(e.initialDate,"MMM dd, yyyy"):"not set"),r.a.createElement("button",{className:"edit-button",onClick:function(e){return E((function(e){return!e}))}},"[edit]"),y?r.a.createElement("div",{className:"editable-bookshelf-date-field"},r.a.createElement("img",{className:"saving-date-spinner",src:"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif",alt:"loading"}),r.a.createElement("span",{className:"saving-span"},"saving...")):r.a.createElement("div",{className:v?"set-date-popup":"set-date-popup hidden"},r.a.createElement("div",{className:"popup-top-section"},r.a.createElement("select",{className:"year-select",value:o,onChange:function(e){return s(e.target.value)}},r.a.createElement("option",{value:""}),Array(101).fill(0).map((function(e,t){return((new Date).getFullYear()-100+(100-t)).toString()})).map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),r.a.createElement("select",{className:"month-select",value:i,onChange:function(e){return u(e.target.value)}},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"0"},"January"),r.a.createElement("option",{value:"1"},"February"),r.a.createElement("option",{value:"2"},"March"),r.a.createElement("option",{value:"3"},"April"),r.a.createElement("option",{value:"4"},"May"),r.a.createElement("option",{value:"5"},"June"),r.a.createElement("option",{value:"6"},"July"),r.a.createElement("option",{value:"7"},"August"),r.a.createElement("option",{value:"8"},"September"),r.a.createElement("option",{value:"9"},"October"),r.a.createElement("option",{value:"10"},"November"),r.a.createElement("option",{value:"11"},"December")),r.a.createElement("select",{className:"day-select",value:p,onChange:function(e){return f(e.target.value)}},r.a.createElement("option",{value:""}),Array(31).fill(0).map((function(e,t){return r.a.createElement("option",{key:t,value:(t+1).toString()},t+1)}))),r.a.createElement("button",{className:"set-to-today-button",onClick:function(e){return s((new Date).getFullYear().toString()),u((new Date).getMonth().toString()),void f((new Date).getDate().toString())}},"set to today")),r.a.createElement("div",{className:"popup-bottom-section"},r.a.createElement("div",{className:"left-section"},r.a.createElement("button",{className:"save-button",onClick:function(t){N(!0),o.length>0&&i.length>0&&p.length>0&&e.save(new Date(parseInt(o),parseInt(i),parseInt(p))),N(!1)}},"Save"),r.a.createElement("button",{className:"cancel-button",onClick:function(e){return E(!1)}},"cancel")),r.a.createElement("button",{className:"cancel-button",onClick:function(e){return E(!1)}},"close"))))}),Fe=function(e){var t=e.match,a=Object(n.useRef)(),o=Object(c.f)(),s=t.params.pageId,l=s.split("-")[0],i=s.split("-")[1][0].toUpperCase()+s.split("-")[1].slice(1),u=new URLSearchParams(Object(c.g)().search),d=null!==u.get("shelf")&&void 0!==u.get("shelf")?u.get("shelf").split(","):["all"],p=null!==u.get("order")&&void 0!==u.get("order")?"d"===u.get("order")?"descending":"ascending":"descending",f=null!==u.get("sort")&&void 0!==u.get("sort")?u.get("sort"):"date-added",v=null!==u.get("per_page")&&void 0!==u.get("per_page")?u.get("per_page"):20,E=null!==u.get("page")&&void 0!==u.get("page")?parseInt(u.get("page")):1,k=null!==u.get("view")&&void 0!==u.get("view")?u.get("view"):"table",w=null!==u.get("search_query")&&void 0!==u.get("search_query")?u.get("search_query"):"",y=Object(n.useState)(!1),N=Object(b.a)(y,2),x=N[0],j=N[1],I=Object(n.useState)({}),B=Object(b.a)(I,2),P=B[0],C=B[1],U=Object(n.useState)([]),M=Object(b.a)(U,2),D=M[0],F=M[1],G=Object(c.g)().state,T=Object(n.useState)(w),W=Object(b.a)(T,2),_=W[0],q=W[1],z=Object(n.useState)(!1),Y=Object(b.a)(z,2),Q=Y[0],V=Y[1],H=Object(n.useState)(!0),J=Object(b.a)(H,2),K=J[0],Z=J[1],X=Object(n.useState)(!0),$=Object(b.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)(!0),ne=Object(b.a)(ae,2),re=ne[0],oe=ne[1],se=Object(n.useState)(!0),ce=Object(b.a)(se,2),le=ce[0],ie=ce[1],ue=Object(n.useState)(!1),me=Object(b.a)(ue,2),de=me[0],pe=me[1],fe=Object(n.useState)(!1),ge=Object(b.a)(fe,2),he=ge[0],be=ge[1],ve=Object(n.useState)(!0),Ee=Object(b.a)(ve,2),ke=Ee[0],we=Ee[1],ye=Object(n.useState)(!1),Ne=Object(b.a)(ye,2),Oe=Ne[0],xe=Ne[1],je=Object(n.useState)(!1),Ie=Object(b.a)(je,2),Se=Ie[0],Pe=Ie[1],Ce=Object(n.useState)(!1),Ae=Object(b.a)(Ce,2),Fe=Ae[0],Ge=Ae[1],Le=Object(n.useState)(!1),Te=Object(b.a)(Le,2),We=Te[0],_e=Te[1],qe=Object(n.useState)(!1),ze=Object(b.a)(qe,2),Ye=ze[0],Qe=ze[1],Ve=Object(n.useState)(!1),He=Object(b.a)(Ve,2),Je=He[0],Ke=He[1],Ze=Object(n.useState)(!0),Xe=Object(b.a)(Ze,2),$e=Xe[0],et=Xe[1],tt=Object(n.useState)(!0),at=Object(b.a)(tt,2),nt=at[0],rt=at[1],ot=Object(n.useState)(!0),st=Object(b.a)(ot,2),ct=st[0],lt=st[1],it=Object(n.useState)(!1),ut=Object(b.a)(it,2),mt=ut[0],dt=ut[1],pt=Object(n.useState)(!1),ft=Object(b.a)(pt,2),gt=ft[0],ht=ft[1],bt=Object(n.useState)(""),vt=Object(b.a)(bt,2),Et=vt[0],kt=vt[1],wt=Object(n.useState)(f),yt=Object(b.a)(wt,2),Nt=yt[0],Ot=yt[1],xt=Object(n.useState)(p),jt=Object(b.a)(xt,2),It=jt[0],St=jt[1],Bt=Object(n.useState)(null),Pt=Object(b.a)(Bt,2),Ct=Pt[0],At=Pt[1],Ut=Object(n.useState)(!1),Rt=Object(b.a)(Ut,2),Mt=Rt[0],Dt=Rt[1],Ft=Object(n.useState)(""),Gt=Object(b.a)(Ft,2),Lt=Gt[0],Tt=Gt[1],Wt=Object(n.useState)("read"),_t=Object(b.a)(Wt,2),qt=_t[0],zt=_t[1],Yt=Object(n.useState)(!1),Qt=Object(b.a)(Yt,2),Vt=Qt[0],Ht=Qt[1],Jt=Object(n.useState)([]),Kt=Object(b.a)(Jt,2),Zt=Kt[0],Xt=Kt[1],$t=Object(n.useState)(null),ea=Object(b.a)($t,2),ta=ea[0],aa=ea[1],na=Object(n.useState)([]),ra=Object(b.a)(na,2),oa=ra[0],sa=ra[1],ca=Object(n.useState)(null),la=Object(b.a)(ca,2),ia=la[0],ua=la[1],ma=Object(n.useState)(!1),da=Object(b.a)(ma,2),pa=da[0],fa=da[1],ga=null!==JSON.parse(localStorage.getItem("userState"))?JSON.parse(localStorage.getItem("userState")):{userUID:null};Object(n.useLayoutEffect)((function(){document.addEventListener("click",(function(e){null===a.current||null!==a.current&&void 0!==a.current&&a.current.contains(e.target)||"add-new-shelf-span"===e.target.className||At(null)}))}),[]),Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.queryUserInfoForUserBookshelfPage(l,ga.userUID));case 2:return t=e.sent,C(t),e.t0=F,e.next=7,Object(R.trackPromise)(O.queryLoggedInUserInfoForUserBookshelfPage(ga.userUID));case 7:e.t1=e.sent,(0,e.t0)(e.t1),sa(t.shelves.filter((function(e){return"want-to-read"===e.name}))[0].books.map((function(e){return e.position}))),j(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,ga.userUID]);var ha=function(){var e=Object(h.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==ga.userUID&&null!==ga.userUID){e.next=4;break}o.push("/user/sign_in"),e.next=6;break;case 4:return e.next=6,O.rateBook(ga.userUID,t,a,o);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ba=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===ga.userUID||null===ga.userUID){e.next=4;break}return e.next=3,O.addNewUserShelf(ga.userUID,t,o);case 3:o.go(0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),va=function(e,t,a,n,r,o,s,c,l,i,u,m,d,p,f,g,h){Z(e),te(t),oe(a),ie(n),pe(r),be(o),we(s),xe(c),Pe(l),Ge(i),_e(u),Qe(m),Ke(d),et(p),rt(f),lt(g),dt(h)},Ea="https://s.gr-assets.com/assets/nophoto/user/u_100x100-259587f1619f5253426a4fa6fb508831.png",ka=x?w.length>0?P.shelves.filter((function(e){return"all"===e.name})):d.map((function(e){return P.shelves.filter((function(t){return t.name===e})).length>0?P.shelves.filter((function(t){return t.name===e}))[0]:null})).filter((function(e){return null!==e})):[],wa=w.length>0?ka.reduce((function(e,t){return t.books.forEach((function(t){e.includes(t)||!t.title.toLowerCase().includes(w.toLowerCase())&&!t.authorName.toLowerCase().includes(w.toLowerCase())||e.push(t)})),e}),[]):ka.length>0?ka.reduce((function(e,t){return t.books.forEach((function(t){!e.map((function(e){return e.id})).includes(t.id)&&ka.every((function(e){return e.books.some((function(e){return e.id===t.id}))}))&&e.push(t)})),e}),[]):x?P.shelves.reduce((function(e,t){return t.books.forEach((function(t){e.map((function(e){return e.id})).includes(t.id)||!t.title.toLowerCase().includes(w.toLowerCase())&&!t.authorName.toLowerCase().includes(w.toLowerCase())||e.push(t)})),e}),[]):[],ya=r.a.createElement(Me,{color:"yellow",content:G}),Na=r.a.createElement("div",{className:"left-section"},r.a.createElement("h1",null,r.a.createElement("a",{className:l===ga.userUID?"profile-picture-a hidden":"profile-picture-a",href:O.pageGenerator.generateUserPage(l,i)},r.a.createElement("img",{src:void 0!==P.profilePicture?P.profilePicture:Ea,alt:i})),r.a.createElement("a",{className:l===ga.userUID?"first-name-a hidden":"first-name-a",href:O.pageGenerator.generateUserPage(l,i)},i),r.a.createElement("span",{className:l===ga.userUID?"separator hidden":"separator"}," > "),r.a.createElement("a",{className:"books-a",href:O.pageGenerator.generateUserShelfPage(l,i,["all"])},l===ga.userUID?"My Books":"Books"),ka.length>0&&"all"!==ka[0].name?r.a.createElement("span",{className:"colon-span"},":"):null,ka.length>0&&"all"!==ka[0].name?ka.map((function(e,t){return r.a.createElement("div",{className:"shelf-selection-indicator-wrapper",key:t},r.a.createElement("div",{className:"shelf-selection-indicator"},r.a.createElement("span",null,r.a.createElement("span",{className:"shelf-name-span"},["read","want-to-read","reading"].includes(e.name)?e.name.split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):e.name),r.a.createElement("span",{className:"shelf-number-span"}," (".concat(e.books.length,") "))),r.a.createElement("a",{className:"deselect-a",href:O.pageGenerator.generateUserShelfPage(l,i,d.filter((function(t){return t!==e.name})),"","table",20,1)},r.a.createElement("img",{src:"https://s.gr-assets.com/assets/layout/delete-small-d4ae0181ae7f3438c6eb1f1c658e6002.png",alt:"Remove shelf filter"}))),t!==ka.length-1?r.a.createElement("span",{className:"shelf-separator-span"},"&"):null)})):null)),Oa=r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"search-bar-container"},r.a.createElement("input",{type:"text",className:"search-bar",placeholder:"Search and add books",value:_,onChange:function(e){return q(e.target.value)},onKeyDown:function(e){console.log(e.keyCode),13===e.keyCode&&o.push(O.pageGenerator.generateUserShelfPage(l,i,["all"],_,"table",v,1))}}),r.a.createElement("a",{className:"search-magnifying-glass-a",href:O.pageGenerator.generateUserShelfPage(l,i,["all"],_,"table",v,1)},r.a.createElement("img",{alt:"search",src:"https://s.gr-assets.com/assets/layout/magnifying_glass-a2d7514d50bcee1a0061f1ece7821750.png"}))),l!==ga.userUID?r.a.createElement("a",{className:"compare-books-a",href:O.pageGenerator.generateUserCompareBooksPage(l)},"Compare Books"):null,l===ga.userUID?r.a.createElement("button",{className:Vt?"batch-edit-toggle-button toggled":"batch-edit-toggle-button",onClick:function(e){V(!1),Ht((function(e){return!e}))}},"Batch Edit"):null,r.a.createElement("button",{className:Q?"settings-toggle-button toggled":"settings-toggle-button",onClick:function(e){Ht(!1),V((function(e){return!e}))}},"Settings"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("a",{className:"view-type-a",href:""!==w?O.pageGenerator.generateUserShelfPage(l,i,["all"],w,"table",v,1):O.pageGenerator.generateUserShelfPage(l,i,d,"","table",v,1)},r.a.createElement("img",{onMouseOver:function(e){e.target.src="https://s.gr-assets.com/assets/layout/list_selected.png"},onMouseOut:function(e){"cover"===k&&(e.target.src="https://s.gr-assets.com/assets/layout/list-fe412c89a6a612c841b5b58681660b82.png")},alt:"Table View",src:"table"===k?"https://s.gr-assets.com/assets/layout/list_selected.png":"https://s.gr-assets.com/assets/layout/list-fe412c89a6a612c841b5b58681660b82.png"})),r.a.createElement("a",{className:"view-type-a",href:""!==w?O.pageGenerator.generateUserShelfPage(l,i,["all"],w,"cover",v,1):O.pageGenerator.generateUserShelfPage(l,i,d,"","cover",v,1)},r.a.createElement("img",{onMouseOver:function(e){e.target.src="https://s.gr-assets.com/assets/layout/grid_selected.png"},onMouseOut:function(e){"table"===k&&(e.target.src="https://s.gr-assets.com/assets/layout/grid-2c030bffe1065f73ddca41540e8a267d.png")},alt:"Cover View",src:"cover"===k?"https://s.gr-assets.com/assets/layout/grid_selected.png":"https://s.gr-assets.com/assets/layout/grid-2c030bffe1065f73ddca41540e8a267d.png"}))),xa=x?r.a.createElement("div",{className:"user-bookshelf-page-shelves-top-bar"},Na,Oa):null,ja=l===ga.userUID?r.a.createElement("div",{className:"your-reading-activity-section"},r.a.createElement("span",null,r.a.createElement("b",null,"Your reading activity")),r.a.createElement("a",{href:O.pageGenerator.generateUserYearInBooksPage((new Date).getFullYear(),l,i)},"Year in Books")):null,Ia=l===ga.userUID?r.a.createElement("div",{className:"add-books-section"},r.a.createElement("span",null,r.a.createElement("b",null,"Add books")),r.a.createElement("a",{href:O.pageGenerator.generateRecommendationsPage()},"Recommendations"),r.a.createElement("a",{href:O.pageGenerator.generateExplorePage()},"Explore")):null,Sa=Mt?r.a.createElement("div",{className:"logged-in-user-add-shelf-input-area"},r.a.createElement("label",{htmlFor:"logged-in-user-add-shelf-input"},"Add a Shelf:"),r.a.createElement("div",{className:"input-and-button"},r.a.createElement("input",{type:"text",value:Lt,onChange:function(e){return Tt(e.target.value)}}),r.a.createElement("button",{className:"add-button",onClick:function(e){Lt.length>0&&ba(Lt)}},"add"))):r.a.createElement("button",{className:"logged-in-user-add-shelf-button",onClick:function(e){return Dt(!0)}},"Add shelf"),Ba=l===ga.userUID?Sa:null,Pa=x?r.a.createElement("div",{className:"user-bookshelf-page-bookshelf-navigation-section"},r.a.createElement("div",{className:"general-shelves-section"},r.a.createElement("span",{className:"title-span"},r.a.createElement("b",null,"Bookshelves")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{className:0===d.length||"all"===d[0]?"general-shelf-a selected-shelf":"general-shelf-a",href:O.pageGenerator.generateUserShelfPage(l,i,["all"],"",k,v,1)},"All (".concat(P.shelves.filter((function(e){return"all"===e.name}))[0].books.length,")"))),r.a.createElement("li",null,r.a.createElement("a",{className:d.includes("read")?"general-shelf-a selected-shelf":"general-shelf-a",href:O.pageGenerator.generateUserShelfPage(l,i,["read"],"",k,v,1)},"Read (".concat(P.shelves.filter((function(e){return"read"===e.name}))[0].books.length,")")),gt?r.a.createElement("a",{className:"add-shelf-a",href:O.pageGenerator.generateUserShelfPage(l,i,d.includes("read")?d.filter((function(e){return"read"!==e})):d.concat("read"),"",k,v,1)},d.includes("read")?"\u2212":"+"):null),r.a.createElement("li",null,r.a.createElement("a",{className:d.includes("want-to-read")?"general-shelf-a selected-shelf":"general-shelf-a",href:O.pageGenerator.generateUserShelfPage(l,i,["want-to-read"],"",k,v,1)},"Want To Read (".concat(P.shelves.filter((function(e){return"want-to-read"===e.name}))[0].books.length,")")),gt?r.a.createElement("a",{className:"add-shelf-a",href:O.pageGenerator.generateUserShelfPage(l,i,d.includes("want-to-read")?d.filter((function(e){return"want-to-read"!==e})):d.concat("want-to-read"),"",k,v,1)},d.includes("want-to-read")?"\u2212":"+"):null))),r.a.createElement("div",{className:"shelf-group-separator"}),r.a.createElement("div",{className:"other-shelves-section"},r.a.createElement("ul",null,P.shelves.filter((function(e){return!["read","want-to-read","reading","all"].includes(e.name)})).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("a",{className:d.includes(e.name)?"general-shelf-a selected-shelf":"general-shelf-a",href:O.pageGenerator.generateUserShelfPage(l,i,[e.name],"",k,v,1)},"".concat(e.name," (").concat(e.books.length,")")),gt?r.a.createElement("a",{className:"add-shelf-a",href:O.pageGenerator.generateUserShelfPage(l,i,d.includes(e.name)?d.filter((function(e){return e!==e.name})):d.concat(e.name),"",k,v,1)},d.includes(e.name)?"\u2212":"+"):null)}))),ka.length>0&&"all"!==ka[0].name?r.a.createElement("button",{className:"select-multiple-shelves-button",onClick:function(e){return ht((function(e){return!e}))}},"select multiple"):null,Ba),P.shelves.filter((function(e){return!["read","want-to-read","reading","all"].includes(e.name)})).length>0?r.a.createElement("div",{className:"shelf-group-separator"}):null,ja,Ia):null,Ca=x?r.a.createElement("div",{className:"user-bookshelf-page-batch-edit-tab"},r.a.createElement("div",{className:"top-section"},r.a.createElement("label",{htmlFor:"batch-edit-shelf-select"},"Shelf:"),r.a.createElement("select",{className:"batch-edit-shelf-select",value:qt,onChange:function(e){return zt(e.target.value)}},P.shelves.filter((function(e){return"all"!==e.name})).map((function(e){return"want-to-read"===e.name?"to-read":e.name})).map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("div",{className:"add-remove-books-buttons"},"add"!==ta?r.a.createElement("button",{className:"add-books-to-this-shelf-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aa("add"),e.next=3,Promise.all(Zt.map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["to-read","reading","read"].includes(qt)){e.next=6;break}return e.next=3,O.addBookToShelf(ga.userUID,wa[t].id,qt,o);case 3:C((function(e){return Object(m.a)(Object(m.a)({},e),{},{shelves:e.shelves.map((function(e){return e.name===qt||"want-to-read"===e.name&&"to-read"===qt?Object(m.a)(Object(m.a)({},e),{},{books:e.books.concat(wa[t])}):["want-to-read","read","reading"].includes(e.name)?Object(m.a)(Object(m.a)({},e),{},{books:e.books.filter((function(e){return e.rootId!==wa[t].rootId}))}):e}))})})),e.next=9;break;case 6:return e.next=8,O.addBookToUserShelf(ga.userUID,wa[t].rootId,qt,null,o);case 8:C((function(e){return Object(m.a)(Object(m.a)({},e),{},{shelves:e.shelves.map((function(e){return e.name===qt?Object(m.a)(Object(m.a)({},e),{},{books:e.books.concat(wa[t])}):e}))})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:aa(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"add books to this shelf"):r.a.createElement("img",{src:"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif",alt:"loading"}),r.a.createElement("span",{className:"separator"},"|"),"remove"!==ta?r.a.createElement("button",{className:"remove-books-from-this-shelf-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aa("remove"),e.next=3,Promise.all(Zt.map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["to-read","reading","read"].includes(qt)){e.next=4;break}window.alert("\u201c".concat(qt,"\u201d is an exclusive shelf. You cannot remove a book from its exclusive shelf, but you can move it to a different one, such as \u201cto-read\u201d.")),e.next=7;break;case 4:return e.next=6,O.removeBookFromUserShelf(ga.userUID,wa[t].rootId,qt,o);case 6:C((function(e){return Object(m.a)(Object(m.a)({},e),{},{shelves:e.shelves.map((function(e){return e.name===qt?Object(m.a)(Object(m.a)({},e),{},{books:e.books.filter((function(e){return e.rootId!==wa[t].rootId}))}):e}))})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:aa(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"remove books from this shelf"):r.a.createElement("img",{src:"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif",alt:"loading"}),r.a.createElement("span",{className:"separator"},"|"),"remove-all"!==ta?r.a.createElement("button",{className:"remove-books-from-all-shelves-button",onClick:function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aa("remove-all"),!window.confirm("This will completely remove the selected books from your shelves.")){e.next=6;break}return a=Zt.map((function(e){return wa[e].rootId})),e.next=5,Promise.all(P.shelves.map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(["to-read","reading","read"].includes(t.name)){e.next=5;break}return e.next=3,Promise.all(t.books.filter((function(e){return Zt.some((function(t){return wa[t].rootId===e.rootId}))})).map(function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.removeBookFromShelf(ga.userUID,t.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:e.next=7;break;case 5:return e.next=7,Promise.all(t.books.filter((function(e){return Zt.some((function(t){return wa[t].rootId===e.rootId}))})).map(function(){var e=Object(h.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.removeBookFromUserShelf(ga.userUID,a.rootId,t.name,o);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:C((function(e){return Object(m.a)(Object(m.a)({},e),{},{shelves:e.shelves.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{books:e.books.filter((function(e){return!a.includes(e.rootId)}))})}))})}));case 6:aa(null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"remove books from all shelves"):r.a.createElement("img",{src:"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif",alt:"loading"}))),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"bottom-section-left-section"},r.a.createElement("button",{className:"select-all-button",onClick:function(e){Xt(wa.map((function(e,t){return t})))}},"select all"),r.a.createElement("span",{className:"separator"},"|"),r.a.createElement("button",{className:"select-none-button",onClick:function(e){Xt([])}},"select none")),r.a.createElement("div",{className:"bottom-section-right-section"},r.a.createElement("button",{className:"close-batch-edit-tab-button",onClick:function(e){return Ht(!1)}},"close")))):null,Aa=r.a.createElement("div",{className:"user-bookshelf-page-settings-tab"},r.a.createElement("div",{className:"top-section"},r.a.createElement("div",{className:"left-section"},r.a.createElement("div",{className:"settings-title"},r.a.createElement("span",null,r.a.createElement("b",null,"visible columns")),r.a.createElement("button",{onClick:function(e){va(!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0)}},"select all")),r.a.createElement("span",{className:"gray-settings-message"},"These settings only apply to table view."),r.a.createElement("div",{className:"column-checkboxes"},r.a.createElement("div",{className:"author-column-selection"},r.a.createElement("input",{name:"author",type:"checkbox",checked:K,onChange:function(e){kt(""),Z(e.target.checked)}}),r.a.createElement("label",{htmlFor:"author"},"author")),r.a.createElement("div",{className:"avg-rating-column-selection"},r.a.createElement("input",{name:"avg-rating",type:"checkbox",checked:ee,onChange:function(e){kt(""),te(e.target.checked)}}),r.a.createElement("label",{htmlFor:"avg-rating"},"avg rating")),r.a.createElement("div",{className:"cover-column-selection"},r.a.createElement("input",{name:"cover",type:"checkbox",checked:re,onChange:function(e){kt(""),oe(e.target.checked)}}),r.a.createElement("label",{htmlFor:"cover"},"cover")),r.a.createElement("div",{className:"date-added-column-selection"},r.a.createElement("input",{name:"date-added",type:"checkbox",checked:le,onChange:function(e){kt(""),ie(e.target.checked)}}),r.a.createElement("label",{htmlFor:"date-added"},"date added")),r.a.createElement("div",{className:"date-publication-column-selection"},r.a.createElement("input",{name:"date-publication",type:"checkbox",checked:de,onChange:function(e){kt(""),pe(e.target.checked)}}),r.a.createElement("label",{htmlFor:"date-publication"},"date pub")),r.a.createElement("div",{className:"date-publication-edition-column-selection"},r.a.createElement("input",{name:"date-publication-edition",type:"checkbox",checked:he,onChange:function(e){kt(""),be(e.target.checked)}}),r.a.createElement("label",{htmlFor:"date-publication-edition"},"date pub (ed.)")),r.a.createElement("div",{className:"date-read-column-selection"},r.a.createElement("input",{name:"date-read",type:"checkbox",checked:ke,onChange:function(e){kt(""),we(e.target.checked)}}),r.a.createElement("label",{htmlFor:"date-read"},"date read")),r.a.createElement("div",{className:"date-started-column-selection"},r.a.createElement("input",{name:"date-started",type:"checkbox",checked:Oe,onChange:function(e){kt(""),xe(e.target.checked)}}),r.a.createElement("label",{htmlFor:"date-started"},"date started")),r.a.createElement("div",{className:"format-column-selection"},r.a.createElement("input",{name:"format",type:"checkbox",checked:Se,onChange:function(e){kt(""),Pe(e.target.checked)}}),r.a.createElement("label",{htmlFor:"format"},"format")),r.a.createElement("div",{className:"isbn-column-selection"},r.a.createElement("input",{name:"isbn",type:"checkbox",checked:Fe,onChange:function(e){kt(""),Ge(e.target.checked)}}),r.a.createElement("label",{htmlFor:"isbn"},"isbn")),r.a.createElement("div",{className:"number-of-pages-column-selection"},r.a.createElement("input",{name:"number-of-pages",type:"checkbox",checked:We,onChange:function(e){kt(""),_e(e.target.checked)}}),r.a.createElement("label",{htmlFor:"number-of-pages"},"num pages")),r.a.createElement("div",{className:"number-of-ratings-column-selection"},r.a.createElement("input",{name:"number-of-ratings",type:"checkbox",checked:Ye,onChange:function(e){kt(""),Qe(e.target.checked)}}),r.a.createElement("label",{htmlFor:"number-of-ratings"},"num ratings")),r.a.createElement("div",{className:"position-column-selection"},r.a.createElement("input",{name:"position",type:"checkbox",checked:Je,onChange:function(e){kt(""),Ke(e.target.checked)}}),r.a.createElement("label",{htmlFor:"position"},"position")),r.a.createElement("div",{className:"rating-column-selection"},r.a.createElement("input",{name:"rating",type:"checkbox",checked:$e,onChange:function(e){kt(""),et(e.target.checked)}}),r.a.createElement("label",{htmlFor:"rating"},"rating")),r.a.createElement("div",{className:"review-column-selection"},r.a.createElement("input",{name:"review",type:"checkbox",checked:nt,onChange:function(e){kt(""),rt(e.target.checked)}}),r.a.createElement("label",{htmlFor:"review"},"review")),r.a.createElement("div",{className:"shelves-column-selection"},r.a.createElement("input",{name:"shelves",type:"checkbox",checked:ct,onChange:function(e){kt(""),lt(e.target.checked)}}),r.a.createElement("label",{htmlFor:"shelves"},"shelves")),r.a.createElement("div",{className:"title-column-selection"},r.a.createElement("input",{name:"title",type:"checkbox",checked:mt,onChange:function(e){kt(""),dt(e.target.checked)}}),r.a.createElement("label",{htmlFor:"title"},"title")))),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",{className:"column-sets-title"},r.a.createElement("b",null,"column sets")),r.a.createElement("button",{className:"main"===Et?"column-set-button selected":"column-set-button",onClick:function(e){kt("main"),va(!0,!0,!0,!0,!1,!1,!0,!1,!1,!1,!1,!1,!0,!0,!1,!0,!0)}},"main"),r.a.createElement("button",{className:"reading"===Et?"column-set-button selected":"column-set-button",onClick:function(e){kt("reading"),va(!0,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!0)}},"reading"),r.a.createElement("button",{className:"list"===Et?"column-set-button selected":"column-set-button",onClick:function(e){kt("list"),va(!0,!0,!1,!0,!0,!1,!0,!1,!1,!1,!1,!0,!0,!0,!1,!1,!0)}},"list"),r.a.createElement("button",{className:"review"===Et?"column-set-button selected":"column-set-button",onClick:function(e){kt("review"),va(!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0)}},"review"))),r.a.createElement("div",{className:"bottom-section"},l===ga.userUID?r.a.createElement("div",{className:"other-section"},r.a.createElement("h3",null,"other"),r.a.createElement("div",{className:"parameters-section"},r.a.createElement("div",{className:"per-page-parameter"},r.a.createElement("label",{htmlFor:"per-page"},"Per page"),r.a.createElement("select",{name:"per-page",value:v,onChange:function(e){var t=e.target.value;o.push(O.pageGenerator.generateUserShelfPage(l,i,d,"",k,t,1))}},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"30"},"30"),r.a.createElement("option",{value:"40"},"40"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"75"},"75"),r.a.createElement("option",{value:"100"},"100"),r.a.createElement("option",{value:"infinite-scroll"},"infinite scroll"))),r.a.createElement("div",{className:"sort-parameter"},r.a.createElement("label",{htmlFor:"sort"},"Sort"),r.a.createElement("select",{name:"sort",value:Nt,onChange:function(e){return Ot(e.target.value)}},r.a.createElement("option",{value:"author"},"Author"),r.a.createElement("option",{value:"avg-rating"},"Avg rating"),r.a.createElement("option",{value:"cover"},"Cover"),r.a.createElement("option",{value:"date-added"},"Date added"),r.a.createElement("option",{value:"date-pub"},"Date pub"),r.a.createElement("option",{value:"date-pub-edition"},"Date pub edition"),r.a.createElement("option",{value:"date-read"},"Date read"),r.a.createElement("option",{value:"date-started"},"Date started"),r.a.createElement("option",{value:"format"},"Format"),r.a.createElement("option",{value:"isbn"},"Isbn"),r.a.createElement("option",{value:"num-pages"},"Num pages"),r.a.createElement("option",{value:"num-ratings"},"Num ratings"),r.a.createElement("option",{value:"position"},"Position"),r.a.createElement("option",{value:"random"},"Random"),r.a.createElement("option",{value:"rating"},"Rating"),r.a.createElement("option",{value:"review"},"Review"),r.a.createElement("option",{value:"title"},"Title"))),r.a.createElement("div",{className:"sort-order-parameter"},r.a.createElement("input",{type:"radio",checked:"ascending"===It,onChange:function(e){e.target.checked&&St("ascending")},name:"asc"}),r.a.createElement("label",{htmlFor:"asc"},"ascending"),r.a.createElement("input",{type:"radio",checked:"descending"===It,onChange:function(e){e.target.checked&&St("descending")},name:"desc"}),r.a.createElement("label",{htmlFor:"desc"},"descending")))):null),r.a.createElement("button",{className:"settings-tab-close-button",onClick:function(e){return V(!1)}},"close")),Ua=wa.length>v?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(l,i,d,w,k,v,E-1),className:1===E?"disabled":""},"\xab previous"),Array.from({length:Math.ceil(wa.length/v)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("a",{key:e,href:O.pageGenerator.generateUserShelfPage(l,i,d,w,k,v,e),className:E===e?"disabled":""},E!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(l,i,d,w,k,v,E+1),className:E===Math.ceil(wa.length/v)?"disabled":""},"next \xbb")):null,Ra=r.a.createElement("span",{className:"no-matching-items-span"},l!==ga.userUID?"No matching items!":r.a.createElement("span",null,"You have no books matching ",r.a.createElement("b",null,'"'.concat(_,'"')))),Ma=x&&"cover"===k?r.a.createElement("div",{className:"user-bookshelf-page-books-cover-view"},0===wa.length?{noMatchingItemsSpan:Ra}:wa.sort((function(e,t){var a=function(e,t){return"ascending"===It?e<t?-1:1:t<e?-1:1};switch(Nt){case"author":return a(e.authorName,t.authorName);case"avg-rating":return a(e.averageRating,t.averageRating);case"cover":return a(e.cover,t.cover);case"date-added":return a(e.dateAdded,t.dateAdded);case"date-pub":return a(e.datePublished,t.datePublished);case"date-pub-ed":return a(e.datePublishedEdition,t.datePublishedEdition);case"date-read":return a(e.dateRead,t.dateRead);case"date-started":return a(e.dateStarted,t.dateStarted);case"format":return a(e.format,t.format);case"isbn":return a(e.isbn,t.isbn);case"num-pages":return a(e.numberOfPages,t.numberOfPages);case"num-ratings":return a(e.numberOfRatings,t.numberOfRatings);case"position":return a(e.position,t.position);case"rating":return a(e.rating,t.rating);case"review":return a(e.review,t.review);case"title":return a(e.title,t.title);default:return Math.random()>.5?e:t}})).filter((function(e,t){return t>=(E-1)*v&&t<E*v})).map((function(e,t){return r.a.createElement("a",{className:"book-cover-view-cover-wrapper",key:t,href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:Ea,alt:e.title}))}))):x?r.a.createElement("table",{className:"user-bookshelf-page-books-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,Je?r.a.createElement("th",{onClick:function(e){"position"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("position")}},r.a.createElement("span",null,"#"),"position"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,re?r.a.createElement("th",{onClick:function(e){"cover"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("cover")}},r.a.createElement("span",null,"cover"),"cover"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,mt?r.a.createElement("th",{onClick:function(e){"title"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("title")}},r.a.createElement("span",null,"title"),"title"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,K?r.a.createElement("th",{onClick:function(e){"author"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("author")}},r.a.createElement("span",null,"author"),"author"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,Fe?r.a.createElement("th",{onClick:function(e){"isbn"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("isbn")}},r.a.createElement("span",null,"isbn"),"isbn"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,We?r.a.createElement("th",{onClick:function(e){"num-pages"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("num-pages")}},r.a.createElement("span",null,"num pages"),"num-pages"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,ee?r.a.createElement("th",{onClick:function(e){"avg-rating"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("avg-rating")}},r.a.createElement("span",null,"avg rating"),"avg-rating"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,Ye?r.a.createElement("th",{onClick:function(e){"num-ratings"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("num-ratings")}},r.a.createElement("span",null,"num ratings"),"num-ratings"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,de?r.a.createElement("th",{onClick:function(e){"date-pub"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("date-pub")}},r.a.createElement("span",null,"date pub"),"date-pub"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,he?r.a.createElement("th",{onClick:function(e){"date-pub-ed"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("date-pub-ed")}},r.a.createElement("span",null,"date pub (ed.)"),"date-pub-ed"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,$e?r.a.createElement("th",{onClick:function(e){"rating"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("rating")}},r.a.createElement("span",null,"rating"),"rating"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,ct?r.a.createElement("th",{className:"my-rating-th"},ga.userUID!==l?"my rating":"shelves"):null,nt?r.a.createElement("th",{onClick:function(e){"review"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("review")}},r.a.createElement("span",null,"review"),"review"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,Oe?r.a.createElement("th",{onClick:function(e){"date-started"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("date-started")}},r.a.createElement("span",null,"date started"),"date-started"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,ke?r.a.createElement("th",{onClick:function(e){"date-read"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("date-read")}},r.a.createElement("span",null,"date read"),"date-read"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,le?r.a.createElement("th",{onClick:function(e){"date-added"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("date-added")}},r.a.createElement("span",null,"date added"),"date-added"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,Se?r.a.createElement("th",{onClick:function(e){"format"===Nt?St((function(e){return"ascending"===e?"descending":"ascending"})):Ot("format")}},r.a.createElement("span",null,"format"),"format"===Nt?r.a.createElement("img",{src:"ascending"===It?"https://s.gr-assets.com/assets/up_arrow-eed7cf633822703667086373e41273eb.gif":"https://s.gr-assets.com/assets/down_arrow-1e1fa5642066c151f5e0136233fce98a.gif",alt:"ascending"===It?"Up arrow":"Down arrow"}):null):null,l===ga.userUID?r.a.createElement("th",null,""):null)),r.a.createElement("tbody",null,0===wa.length?r.a.createElement("tr",{className:"no-matching-items-tr"},r.a.createElement("td",{colSpan:"20"},Ra)):wa.sort((function(e,t){var a=function(e,t){return"ascending"===It?e<t?-1:1:t<e?-1:1};switch(Nt){case"author":return a(e.authorName,t.authorName);case"avg-rating":return a(e.averageRating,t.averageRating);case"cover":return a(e.cover,t.cover);case"date-added":return a(e.dateAdded,t.dateAdded);case"date-pub":return a(e.datePublished,t.datePublished);case"date-pub-ed":return a(e.datePublishedEdition,t.datePublishedEdition);case"date-read":return a(e.dateRead,t.dateRead);case"date-started":return a(e.dateStarted,t.dateStarted);case"format":return a(e.format,t.format);case"isbn":return a(e.isbn,t.isbn);case"num-pages":return a(e.numberOfPages,t.numberOfPages);case"num-ratings":return a(e.numberOfRatings,t.numberOfRatings);case"position":return a(e.position,t.position);case"rating":return a(e.rating,t.rating);case"review":return a(e.review,t.review);case"title":return a(e.title,t.title);default:return Math.random()>.5?e:t}})).filter((function(e,t){return t>=(E-1)*v&&t<E*v})).map((function(e,t){var n=void 0!==e.authorName&&e.authorName.split(" ").length>1?e.authorName.split(" ").slice(1).join(" ")+", "+e.authorName.split(" ")[0]:e.authorName;return r.a.createElement("tr",{key:t,className:Zt.includes((E-1)*v+t)?"selected":Vt?"selecting":"",onClick:function(e){Vt&&Xt((function(e){return e.includes((E-1)*v+t)?e.filter((function(e){return e!==(E-1)*v+t})):e.concat((E-1)*v+t)}))}},Vt?r.a.createElement("input",{type:"checkbox",checked:Zt.includes((E-1)*v+t)}):null,Je?r.a.createElement("td",null,l===ga.userUID&&d.includes("want-to-read")&&1===d.length?pa?r.a.createElement("img",{className:"book-position-loading",src:"https://s.gr-assets.com/assets/loading-trans-ced157046184c3bc7c180ffbfc6825a4.gif",alt:"loading"}):r.a.createElement("div",{className:"want-to-read-position-input-section"},r.a.createElement("input",{type:"text",value:oa[t],onChange:function(e){var a=e.target.value;sa((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onFocus:function(){return ua(t)}}),r.a.createElement("div",{className:ia===t?"save-position-changes-popup":"save-position-changes-popup hidden"},r.a.createElement("div",{className:"popup-point"}),r.a.createElement("button",{className:"save-position-changes-button",onClick:function(){var a=Object(h.a)(g.a.mark((function a(n){var r,o;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=P.shelves.filter((function(e){return"want-to-read"===e.name}))[0].books[t].position,o=isNaN(oa[t])||parseInt(oa[t])<=0?1:parseInt(oa[t]),fa(!0),a.next=5,O.changeBookPosition(l,e.id,o);case 5:sa((function(e){return e.map((function(e,a){return a===t?o:o<r&&e>=o&&e<r?e+1:o>r&&e<=o&&e>r?e-1:e}))})),ua(null),fa(!1);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},"Save position changes"),r.a.createElement("button",{className:"close-popup-button",onClick:function(){return ua(null)}},"close"))):r.a.createElement("span",null,void 0!==e.position?e.position:"")):null,re?r.a.createElement("td",null,r.a.createElement("a",{className:"book-cover-wrapper",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0!==e.cover?e.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.title}))):null,mt?r.a.createElement("td",null,r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("span",{className:"book-title-proper"},e.title),void 0!==e.seriesName?r.a.createElement("span",{className:"book-series-span"}," (".concat(e.seriesName,", #").concat(e.seriesInstance,")")):null)):null,K?r.a.createElement("td",null,r.a.createElement("a",{className:"author-a",href:O.pageGenerator.generateAuthorPage(e.authorId,e.authorName)},void 0!==n?n:"")):null,Fe?r.a.createElement("td",null,r.a.createElement("span",null,void 0!==e.isbn?e.isbn:"")):null,We?r.a.createElement("td",null,void 0!==e.numberOfPages?r.a.createElement("span",{className:"num-pages-span"},r.a.createElement("span",{className:"black"},e.numberOfPages),r.a.createElement("span",{className:"gray"}," pp")):null):null,ee?r.a.createElement("td",null,r.a.createElement("span",null,e.averageRating.toFixed(2))):null,Ye?r.a.createElement("td",null,r.a.createElement("span",null,e.numberOfRatings)):null,de?r.a.createElement("td",null,r.a.createElement("span",null,void 0!==e.datePublished?Object(L.a)(e.datePublished,"MMM dd, yyyy"):"")):null,he?r.a.createElement("td",null,r.a.createElement("span",null,void 0!==e.datePublishedEdition?Object(L.a)(e.datePublishedEdition,"MMM dd, yyyy"):"")):null,$e?r.a.createElement("td",null,l!==ga.userUID?r.a.createElement("div",{className:"rating-stars"},r.a.createElement("div",{className:e.rating>=1?"static-star small full":e.rating>=.5?"static-star small almost-full":e.rating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=2?"static-star small full":e.rating>=1.5?"static-star small almost-full":e.rating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=3?"static-star small full":e.rating>=2.5?"static-star small almost-full":e.rating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=4?"static-star small full":e.rating>=3.5?"static-star small almost-full":e.rating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:e.rating>=5?"static-star small full":e.rating>=4.5?"static-star small almost-full":e.rating>4?"static-star small almost-empty":"static-star small empty"})):r.a.createElement(Be,{rating:void 0!==e.loggedInUserRating?e.loggedInUserRating:0,saveRating:function(t){return ha(e.id,t)}})):null,ct?r.a.createElement("td",null,l!==ga.userUID?r.a.createElement(Be,{rating:void 0!==e.loggedInUserRating?e.loggedInUserRating:0,saveRating:function(t){return ha(e.id,t)}}):r.a.createElement("a",{className:"user-own-shelf-a",href:P.shelves.some((function(t){return"read"===t.name&&t.books.some((function(t){return t.id===e.id}))}))?O.pageGenerator.generateUserShelfPage(l,i,["read"],"","table",20,1):P.shelves.some((function(t){return"reading"===t.name&&t.books.some((function(t){return t.id===e.id}))}))?O.pageGenerator.generateUserShelfPage(l,i,["reading"],"","table",20,1):O.pageGenerator.generateUserShelfPage(l,i,["want-to-read"],"","table",20,1)},P.shelves.some((function(t){return"read"===t.name&&t.books.some((function(t){return t.id===e.id}))}))?"read":P.shelves.some((function(t){return"reading"===t.name&&t.books.some((function(t){return t.id===e.id}))}))?"reading":"to-read"),r.a.createElement("div",{className:"add-to-shelves-button-wrapper",ref:t===Ct?a:null},r.a.createElement("button",{className:"table-add-to-shelves-button",onClick:function(e){null!==ga.userUID?At(Ct===t?null:t):o.push("/user/sign_up")}},l===ga.userUID?"[edit]":D.some((function(t){return t.books.map((function(e){return e.id})).includes(e.id)}))?"edit shelves":"add to shelves"),r.a.createElement("div",{className:Ct===t?"add-to-shelves-popup-wrapper visible":"add-to-shelves-popup-wrapper"},r.a.createElement(Ue,{shelves:D.map((function(e){return"want-to-read"!==e.name?e.name:"to-read"})).filter((function(e){return"all"!==e})),shelvesBookBelongsTo:D.filter((function(t){return"all"!==t.name&&t.books.some((function(t){return t.id===e.id}))})).map((function(e){return"want-to-read"!==e.name?e.name:"to-read"})),addBookToShelf:function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.addBookToUserShelf(ga.userUID,e.rootId,a,null,o);case 2:F((function(t){return t.some((function(e){return e.name===a}))?t.map((function(t){return t.name===a?{name:a,books:t.books.concat({id:e.id,rootId:e.rootId})}:t})):t.concat({name:a,books:[{id:e.id,rootId:e.rootId}]})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),changeBookStatus:function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.addBookToShelf(ga.userUID,e.id,a,o);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),close:function(){return At(null)}})))):null,nt?r.a.createElement("td",null,r.a.createElement(Re,{reviewText:e.review})):null,Oe?r.a.createElement("td",null,l!==ga.userUID?r.a.createElement("span",{className:void 0===e.dateStarted?"no-date-span":""},void 0!==e.dateStarted?Object(L.a)(e.dateStarted,"MMM dd, yyyy"):"not set"):r.a.createElement(De,{initialDate:e.dateStarted,save:function(e){}})):null,ke?r.a.createElement("td",null,l!==ga.userUID?r.a.createElement("span",{className:void 0===e.dateRead?"no-date-span":""},void 0!==e.dateRead?Object(L.a)(e.dateRead,"MMM dd, yyyy"):"not set"):r.a.createElement(De,{initialDate:e.dateStarted,save:function(e){}})):null,le?r.a.createElement("td",null,r.a.createElement("span",null,void 0!==e.dateAdded?Object(L.a)(e.dateAdded,"MMM dd, yyyy"):"")):null,Se?r.a.createElement("td",null,r.a.createElement("span",null,e.format)):null,l===ga.userUID?r.a.createElement("td",null,r.a.createElement("button",{className:"remove-book-from-shelves-button",onClick:function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to remove ".concat(e.title," from your books? This will permanently remove this book from your shelves, including any review, or rating you have added. To change the shelf this book appears on please edit the shelves."))){t.next=4;break}return t.next=3,O.removeBookFromShelf(l,e.id);case 3:o.push({pathname:O.pageGenerator.generateUserShelfPage(l,i,d,"","table",20,1),state:"".concat(e.title," was removed from your books.")});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})):null)})))):null,Da=r.a.createElement("div",{className:"user-bookshelf-page-table-parameters-section"},r.a.createElement("div",{className:"per-page-parameter"},r.a.createElement("label",{htmlFor:"per-page"},"per page"),r.a.createElement("select",{name:"per-page",value:v,onChange:function(e){var t=e.target.value;o.push(O.pageGenerator.generateUserShelfPage(l,i,d,"",k,t,1))}},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"30"},"30"),r.a.createElement("option",{value:"40"},"40"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"75"},"75"),r.a.createElement("option",{value:"100"},"100"),r.a.createElement("option",{value:"infinite-scroll"},"infinite scroll"))),r.a.createElement("div",{className:"sort-parameter"},r.a.createElement("label",{htmlFor:"sort"},"sort"),r.a.createElement("select",{name:"sort",value:Nt,onChange:function(e){return Ot(e.target.value)}},r.a.createElement("option",{value:"author"},"Author"),r.a.createElement("option",{value:"avg-rating"},"Avg rating"),r.a.createElement("option",{value:"cover"},"Cover"),r.a.createElement("option",{value:"date-added"},"Date added"),r.a.createElement("option",{value:"date-pub"},"Date pub"),r.a.createElement("option",{value:"date-pub-edition"},"Date pub edition"),r.a.createElement("option",{value:"date-read"},"Date read"),r.a.createElement("option",{value:"date-started"},"Date started"),r.a.createElement("option",{value:"format"},"Format"),r.a.createElement("option",{value:"isbn"},"Isbn"),r.a.createElement("option",{value:"num-pages"},"Num pages"),r.a.createElement("option",{value:"num-ratings"},"Num ratings"),r.a.createElement("option",{value:"position"},"Position"),r.a.createElement("option",{value:"random"},"Random"),r.a.createElement("option",{value:"rating"},"Rating"),r.a.createElement("option",{value:"review"},"Review"),r.a.createElement("option",{value:"title"},"Title"))),r.a.createElement("div",{className:"sort-order-parameter"},r.a.createElement("input",{type:"radio",checked:"ascending"===It,onChange:function(e){e.target.checked&&St("ascending")},name:"asc"}),r.a.createElement("label",{htmlFor:"asc"},"asc."),r.a.createElement("input",{type:"radio",checked:"descending"===It,onChange:function(e){e.target.checked&&St("descending")},name:"desc"}),r.a.createElement("label",{htmlFor:"desc"},"desc."))),Fa=r.a.createElement("div",{className:"user-bookshelf-page-main-info-container"},Q?Aa:null,Vt?Ca:null,r.a.createElement("div",{className:"top-page-navigation-section-wrapper"},Ua),Ma,Da,r.a.createElement("div",{className:"bottom-page-navigation-section-wrapper"},Ua)),Ga=r.a.createElement("div",{className:"user-bookshelf-page-main-content"},r.a.createElement("div",{className:"user-bookshelf-page-main-content-top-section"},void 0!==G?ya:null,xa),r.a.createElement("div",{className:"user-bookshelf-page-main-content-bottom-section"},Pa,Fa));return r.a.createElement("div",{className:"user-bookshelf-page"},r.a.createElement(A,null),Ga,r.a.createElement(S,null))},Ge=(a(127),function(e){var t=e.match.params.userPhotoPageId,a=t.split("-")[0],o=t.split("-")[1].length>1?t.split("-")[1][0].toUpperCase()+t.split("-")[1].slice(1):t.split("-")[1].toUpperCase(),s=Object(n.useState)(!1),c=Object(b.a)(s,2),l=c[0],i=c[1],u=Object(n.useState)(null),m=Object(b.a)(u,2),d=m[0],p=m[1],f=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getUserInfoForUserPage(a,f.userUID));case 2:t=e.sent,p(t.profilePicture),i(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,f.userUID]);var v=l?r.a.createElement("div",{className:"user-photo-page-main-content"},r.a.createElement("span",{className:"user-photo-page-title"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(a,o)},o),r.a.createElement("span",null,">"),r.a.createElement("span",null,"Photos"),r.a.createElement("span",null,">"),r.a.createElement("span",null,"Profile Photo")),r.a.createElement("a",{href:O.pageGenerator.generateUserPhotoPage(a),className:"small-photo-a"},r.a.createElement("img",{src:d,alt:"Profile"})),r.a.createElement("div",{className:"main-photo-section"},r.a.createElement("a",{className:"largest-size-a",href:d},"largest size"),r.a.createElement("img",{src:d,alt:"Profile"})),r.a.createElement("span",{className:"description-span"},"Profile photo.")):null;return r.a.createElement("div",{className:"user-photo-page"},r.a.createElement(A,null),v,r.a.createElement(S,null))}),Le=(a(128),function(e){var t=e.match.params,a=t.year,o=t.pageId,s=o.split("-")[0],c=o.split("-")[1].charAt(0).toUpperCase()+o.split("-")[1].slice(1),l=Number.parseInt(a),i=(new Date).getFullYear()===l,u=Object(n.useState)([]),m=Object(b.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(null),v=Object(b.a)(f,2),E=v[0],k=v[1],w=Object(n.useState)(!1),y=Object(b.a)(w,2),N=y[0],x=y[1],j=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,Object(R.trackPromise)(O.getUserInfoForYearInBooksPage(s,l));case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=k,e.next=8,Object(R.trackPromise)(O.getUserProfilePicture(s));case 8:e.t3=e.sent,(0,e.t2)(e.t3),x(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,l]);var I=d.reduce((function(e,t){return null===e||e.pageCount>t.pageCount?t:e}),null),B=d.reduce((function(e,t){return null===e||e.pageCount<t.pageCount?t:e}),null),P=Math.round(d.reduce((function(e,t){return 0===d.length?0:e+t.pageCount/d.length}),0)),C=d.reduce((function(e,t){return null===e||e.numberShelved<t.numberShelved?t:e}),null),U=d.reduce((function(e,t){return null===e||e.numberShelved>t.numberShelved?t:e}),null),M=d.reduce((function(e,t){return 0===d.length?0:void 0===t.userRating?e:e+t.userRating/d.filter((function(e){return void 0!==e.userRating})).length}),0).toFixed(1),D=d.reduce((function(e,t){return null===e||e.averageRating<t.averageRating?t:e}),null),F=d.sort((function(e,t){return e.userRating>t.userRating?-1:1})),G=N?r.a.createElement("div",{className:"user-year-in-books-overall-stats"},r.a.createElement("div",{className:"user-year-in-books-overall-stats-top"},r.a.createElement("a",{href:O.pageGenerator.generateUserYearInBooksPage(l-1,s,c)},"Go to previous year"),i?null:r.a.createElement("a",{href:O.pageGenerator.generateUserYearInBooksPage(l+1,s,c)},"Go to next year")),r.a.createElement("div",{className:"user-year-in-books-image-and-title"},r.a.createElement("span",{className:"year-span"},a),r.a.createElement("img",{src:"https://s.gr-assets.com/assets/yyib/hero_desktop_2021@2x-2075d93f13d7007160228ce5e23000a7.png",alt:"Open book"})),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"top-half"},r.a.createElement("span",{className:"stat"},r.a.createElement("span",{className:"number"},d.reduce((function(e,t){return e+t.pageCount}),0))," ","pages read"),r.a.createElement("div",{className:"profile-info"},r.a.createElement("a",{className:"profile-a",href:O.pageGenerator.generateUserPage(s,void 0!==c?c:"")},r.a.createElement("img",{alt:"profile",src:void 0!==E&&null!==E?E:"https://www.goodreads.com/assets/nophoto/user/u_60x60-267f0ca0ea48fd3acfd44b95afa64f01.png"})),void 0!==c?r.a.createElement("a",{className:"profile-name-a",href:O.pageGenerator.generateUserPage(s,c)},c):null),r.a.createElement("span",{className:"stat"},r.a.createElement("span",{className:"number"},d.length)," books read")),0!==d.length?r.a.createElement("div",{className:"bottom-half"},r.a.createElement("div",{className:"longest-shortest-section book-and-info-wrapper"},r.a.createElement("div",{className:"book-and-info"},r.a.createElement("a",{className:"book-and-info-a",href:O.pageGenerator.generateBookPage(I.bookId,I.title)},r.a.createElement("img",{src:I.cover,alt:I.title})),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"small-text"},"Shortest Book"),r.a.createElement("span",{className:"big-text"},I.pageCount),r.a.createElement("span",{className:"medium-text"},"pages"))),r.a.createElement("div",{className:"book-and-info"},r.a.createElement("a",{className:"book-and-info-a",href:O.pageGenerator.generateBookPage(B.bookId,B.title)},r.a.createElement("img",{src:B.cover,alt:B.title})),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"small-text"},"Shortest Book"),r.a.createElement("span",{className:"big-text"},B.pageCount),r.a.createElement("span",{className:"medium-text"},"pages")))),r.a.createElement("div",{className:"book-length-section"},r.a.createElement("span",{className:"average-length-span"},"Average book length in ",a),r.a.createElement("span",{className:"number-pages"},r.a.createElement("span",{className:"number"},P),r.a.createElement("span",{className:"pages"},"pages"))),r.a.createElement("div",{className:"most-least-popular-section book-and-info-wrapper"},r.a.createElement("div",{className:"book-and-info"},r.a.createElement("a",{className:"book-and-info-a",href:O.pageGenerator.generateBookPage(C.bookId,C.title)},r.a.createElement("img",{src:C.cover,alt:C.title})),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"small-text"},"Most Popular"),r.a.createElement("span",{className:"big-text"},C.numberShelved-1),r.a.createElement("span",{className:"medium-text"},"people also shelved"))),r.a.createElement("div",{className:"book-and-info"},r.a.createElement("a",{className:"book-and-info-a",href:O.pageGenerator.generateBookPage(U.bookId,U.title)},r.a.createElement("img",{src:U.cover,alt:U.title})),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"small-text"},"Least Popular"),r.a.createElement("span",{className:"big-text"},U.numberShelved-1),r.a.createElement("span",{className:"medium-text"},"people also shelved")))),r.a.createElement("div",{className:"average-rating-section"},r.a.createElement("span",{className:"average-rating-span"},j.userUID===s?"My":"".concat(c,"'s")," average rating for ",a),r.a.createElement("span",{className:"stars-rating"},r.a.createElement("div",{className:"rating-stars"},r.a.createElement("div",{className:M>=1?"static-star large full":M>=.5?"static-star large almost-full":M>0?"static-star large almost-empty":"static-star large empty"}),r.a.createElement("div",{className:M>=2?"static-star large full":M>=1.5?"static-star large almost-full":M>1?"static-star large almost-empty":"static-star large empty"}),r.a.createElement("div",{className:M>=3?"static-star large full":M>=2.5?"static-star large almost-full":M>2?"static-star large almost-empty":"static-star large empty"}),r.a.createElement("div",{className:M>=4?"static-star large full":M>=3.5?"static-star large almost-full":M>3?"static-star large almost-empty":"static-star large empty"}),r.a.createElement("div",{className:M>=5?"static-star large full":M>=4.5?"static-star large almost-full":M>4?"static-star large almost-empty":"static-star large empty"})),r.a.createElement("span",{className:"rating"},M))),r.a.createElement("div",{className:"highest-rated-section"},r.a.createElement("a",{className:"book-and-info-a",href:O.pageGenerator.generateBookPage(D.bookId,D.title)},r.a.createElement("img",{src:D.cover,alt:D.title})),r.a.createElement("div",{className:"highest-rated-info"},r.a.createElement("span",{className:"highest-rated-span"},"Highest Rated on Goodreads"),r.a.createElement("span",{className:"stars-rating"},r.a.createElement("div",{className:"rating-stars"},r.a.createElement("div",{className:D.averageRating>=1?"static-star large full":D.averageRating>=.5?"static-star large almost-full":D.averageRating>0?"static-star large almost-empty":"static-star large empty"}),r.a.createElement("div",{className:D.averageRating>=2?"static-star large full":D.averageRating>=1.5?"static-star large almost-full":D.averageRating>1?"static-star large almost-empty":"static-star large empty"}),r.a.createElement("div",{className:D.averageRating>=3?"static-star large full":D.averageRating>=2.5?"static-star large almost-full":D.averageRating>2?"static-star large almost-empty":"static-star large empty"}),r.a.createElement("div",{className:D.averageRating>=4?"static-star large full":D.averageRating>=3.5?"static-star large almost-full":D.averageRating>3?"static-star large almost-empty":"static-star large empty"}),r.a.createElement("div",{className:D.averageRating>=5?"static-star large full":D.averageRating>=4.5?"static-star large almost-full":D.averageRating>4?"static-star large almost-empty":"static-star large empty"})),r.a.createElement("span",{className:"rating-average"},D.averageRating.toFixed(2)," average")))),r.a.createElement("div",{className:"all-books-section"},r.a.createElement("span",{className:"my-books-span"},"My ".concat(a," Books")),r.a.createElement("div",{className:"top-section"},r.a.createElement("a",{className:"book-and-info-a",href:O.pageGenerator.generateBookPage(F[0].bookId,F[0].title)},r.a.createElement("img",{src:F[0].cover,alt:F[0].title})),F.length>1?r.a.createElement("div",{className:"other-top-books"},F.slice(1,5).map((function(e){return r.a.createElement("a",{key:e.bookId,className:"book-and-info-a",href:O.pageGenerator.generateBookPage(e.bookId,e.title)},r.a.createElement("img",{src:e.cover,alt:e.title}))}))):null),F.length>5?r.a.createElement("div",{className:"bottom-section"},F.slice(5).map((function(e){return r.a.createElement("a",{className:"book-and-info-a",key:e.bookId,href:O.pageGenerator.generateBookPage(e.bookId,e.title)},r.a.createElement("img",{src:e.cover,alt:e.title}))}))):null)):null,s===j.userUID?r.a.createElement("div",{className:"missing-books-section"},r.a.createElement("span",{className:"missing-books-span"},"Missing books?"),r.a.createElement("span",{className:"missing-books-message"},"You can easily add books to this list by setting"," ",r.a.createElement("strong",null,"\u201cDate Read\u201d")," for each book to any time in"," ",r.a.createElement("strong",null,a),". Are you re-reading? That counts too!"),r.a.createElement("a",{className:"missing-books-a",href:O.pageGenerator.generateUserShelfPage(s,c,["all"])},"Go to My Books")):null)):null,L=r.a.createElement("div",null),T=r.a.createElement("div",null),W=N?r.a.createElement("div",{className:"user-year-in-books-page-main-content"},G,L,T):null;return r.a.createElement("div",{className:"user-year-in-books-page"},r.a.createElement(A,null),W,r.a.createElement(S,null))}),Te=(a(129),function(){var e=Object(c.f)(),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)([]),i=Object(b.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)([]),f=Object(b.a)(p,2),v=f[0],E=f[1],k=Object(n.useState)([]),w=Object(b.a)(k,2),y=w[0],N=w[1],x=Object(n.useState)([]),j=Object(b.a)(x,2),I=j[0],B=j[1],P=Object(n.useState)([]),C=Object(b.a)(P,2),U=C[0],M=C[1],D=Object(n.useState)([]),F=Object(b.a)(D,2),G=F[0],L=F[1],T=Object(n.useState)([]),W=Object(b.a)(T,2),_=W[0],q=W[1],z=Object(n.useState)([]),Y=Object(b.a)(z,2),Q=Y[0],V=Y[1],H=Object(n.useState)([]),J=Object(b.a)(H,2),K=J[0],Z=J[1],X=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getRecommendationsToFromUser(X.userUID,!0));case 2:t=e.sent,d(t),E(t.map((function(e){return e.book})).map((function(e){return!1}))),N(t.map((function(e){return e.book})).map((function(e){return!0}))),B(t.map((function(e){return e.book})).map((function(e){return""}))),M(t.map((function(e){return e.book})).map((function(e){return void 0!==e.userRating?e.userRating:0}))),L(t.map((function(e){return e.book})).map((function(e){return!0}))),q(t.map((function(e){return e.book})).map((function(e){return!0}))),V(t.map((function(e){return e.book})).map((function(e){return""}))),Z(t.map((function(e){return e.book})).map((function(e){return""}))),s(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[X.userUID]);var $=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.deleteRecommendation(t);case 2:d((function(e){return e.filter((function(e){return e.id!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e,t){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(X.userUID,e.bookId),d((function(e){return e.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{userStatus:void 0,userProgress:void 0,userRating:void 0})}):e}))})))},te=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a.bookId){t.next=6;break}return E((function(e){return e.map((function(e,t){return t===n||e}))})),t.next=4,O.addBookToShelf(X.userUID,a.bookId,r,e);case 4:d((function(e){return e.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{userStatus:r})}):e}))})),E((function(e){return e.map((function(e,t){return t!==n&&e}))}));case 6:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ae=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a.bookId){t.next=4;break}return t.next=3,O.rateBook(X.userUID,a.bookId,r,e);case 3:d((function(e,t){return e.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{userStatus:void 0!==e.userStatus?e.userStatus:"read",userRating:r})}):e}))}));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ne=function(){var e=Object(h.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==X.userUID&&void 0!==X.userUID&&void 0!==t.bookId&&n.length>0)){e.next=4;break}return e.next=3,O.updateBookInShelf(X.userUID,t.bookId,parseInt(n));case 3:d((function(e){return e.map((function(e,t){return t===a?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{userProgress:n})}):e}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"recommendations-from-users-page recommendation-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"recommendations-main-content"},r.a.createElement("span",{className:"recommendations-page-indicator"},"Recommendations ",">"," From Users"),u.length>0?r.a.createElement("span",{className:"recommendations-total-span"},"Showing 1-".concat(u.length," of ").concat(u.length)):null,r.a.createElement("div",{className:"main-content"},u.length>0?r.a.createElement("div",{className:"recommendation-list"},u.map((function(t,a){return r.a.createElement("div",{className:"recommendation-card",key:t.id},r.a.createElement("div",{className:"top-section"},r.a.createElement("span",null,r.a.createElement("a",{href:O.pageGenerator.generateUserPage(t.otherUser.userId,t.otherUser.firstName)},t.otherUser.firstName)," ","recommended:"),r.a.createElement("button",{className:"ignore-button",onClick:function(){return $(t.id)}},"ignore")),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"cover-wrapper-a",href:O.pageGenerator.generateBookPage(t.book.bookId,t.book.title)},r.a.createElement("img",{src:void 0!==t.book.cover&&null!==t.book.cover?t.book.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:t.book.title})),r.a.createElement("div",{className:"book-info"},r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(t.book.bookId,t.book.title)},t.book.title),r.a.createElement("span",{className:"authorship-span"},"by"," ",r.a.createElement("a",{className:"author-name-a",href:O.pageGenerator.generateAuthorPage(t.book.authorId,t.book.authorName)},t.book.authorName)),void 0!==t.message&&null!==t.message&&t.message.length>0?r.a.createElement("span",{className:"rec-message-span"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(t.otherUser.userId,t.otherUser.firstName)},"they")," ",'said: " ',t.message,' "'):null)),r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"want-to-read-button-and-options ".concat(void 0!==t.book.userStatus?t.book.userStatus:"")},function(e,t){return o&&"reading"===e.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("div",{className:G[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up reading"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,r.a.createElement("b",null,"Update your reading progress:")),r.a.createElement("span",null,"I'm on page"," ",r.a.createElement("input",{type:"text",value:Q[t],className:_[t]?"page-progress-input":"page-progress-input white-background",onClick:function(e){q((function(e){return e.map((function(e,a){return a!==t&&e}))})),L((function(e){return e.map((function(e,a){return a!==t&&e}))}))},onChange:function(e){var a=e.target.value;V((function(e){return e.map((function(e,n){return n===t?a:e}))}))}})," ","of ",e.pageCount,"."," ",r.a.createElement("a",{href:void 0!==X.userUID&&null!==X.userUID?O.pageGenerator.generateUserShelfPage(X.userUID,X.userInfo.firstName,["reading"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:_[t]?"shelf-pop-up-bottom hidden":"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){ne(e,t,Q[t]),q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Submit"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{className:"progress-finished-button",onClick:function(a){te(e,t,"read"),q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Finished book"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:function(a){return ee(e,t)}}),r.a.createElement("span",null,"Currently Reading")):o&&"read"===e.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("div",{className:"shelf-pop-up-wrapper"},r.a.createElement("div",{className:"shelf-pop-up read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("a",{href:O.pageGenerator.generateWriteReviewPageForBook(e.bookId)},"Write a review"),r.a.createElement("span",null,"\xb7"),r.a.createElement("a",{href:void 0!==X.userUID&&null!==X.userUID?O.pageGenerator.generateUserShelfPage(X.userUID,X.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:function(a){return ee(e,t)}}),r.a.createElement("span",null,"Read")):o&&"to-read"===e.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("div",{className:G[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up to-read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,"#",r.a.createElement("input",{type:"text",value:K[t],className:"shelf-pop-up-to-read-input",onChange:function(e){var a=e.target.value;Z((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onClick:function(e){q((function(e){return e.map((function(e,a){return a!==t&&e}))})),L((function(e){return e.map((function(e,a){return a!==t&&e}))}))}})," ","on your ",r.a.createElement("b",null,"To Read")," shelf.")),_[t]?r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("a",{href:void 0!==X.userUID&&null!==X.userUID?O.pageGenerator.generateUserShelfPage(X.userUID,X.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf")):r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){O.changeBookPosition(X.userUID,e.bookId,parseInt(K[t])),d((function(e){return e.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{toReadBookPosition:parseInt(K[t])})}):e}))})),q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Save"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:function(a){return ee(e,t)}}),r.a.createElement("span",null,"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return te(e,t,"to-read")}},v[t]?"...saving":"Want to Read")}(t.book,a),function(t,a){return r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:"book-options-dropdown"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"dropdown-read-button",onClick:function(){return te(t,a,"read")}},"Read"),r.a.createElement("button",{className:"dropdown-currently-reading-button",onClick:function(){return te(t,a,"reading")}},"Currently Reading"),r.a.createElement("button",{className:"dropdown-want-to-read-button",onClick:function(){return te(t,a,"to-read")}},"Want to Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:"dropdown-add-shelf",onClick:function(e){return N((function(e){return e.map((function(e,t){return t!==a&&e}))}))}},"Add Shelf"),r.a.createElement("div",{className:y[a]?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",value:I[a],onChange:function(e){var t=e.target.value;B((function(e){return e.map((function(e,n){return n===a?t:e}))}))}}),r.a.createElement("button",{className:"dropdown-add-shelf-add-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(I[a].length>0)){n.next=4;break}return n.next=3,O.addBookToUserShelf(X.userUID,t.rootBook,I[a],null,e);case 3:N((function(e){return e.map((function(e,t){return t===a||e}))}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Add")))))}(t.book,a)),function(e,t){return r.a.createElement("div",{className:"book-page-rate-book"},void 0===e.userRating?null:r.a.createElement("button",{className:"clear-rating-button",onClick:function(){return ae(e,t,void 0)}},"Clear rating"),void 0===e.userRating?r.a.createElement("span",{className:"rate-this-book"},"Rate this book"):r.a.createElement("span",{className:"rate-this-book my-rating"},"My rating:"),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:U[t]>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?1:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,1)}}),r.a.createElement("div",{className:U[t]>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?2:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,2)}}),r.a.createElement("div",{className:U[t]>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?3:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,3)}}),r.a.createElement("div",{className:U[t]>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?4:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,4)}}),r.a.createElement("div",{className:U[t]>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?5:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,5)}})))}(t.book,a))))}))):r.a.createElement("span",{className:"no-pending-recommendations-span"},"You don't have any pending recommendations."),r.a.createElement("div",{className:"more-actions-box"},r.a.createElement("span",{className:"more-actions-title"},"More Actions"),r.a.createElement("div",{className:"anchors-list"},r.a.createElement("a",{className:"selected",href:O.pageGenerator.generateRecommendationsPage(!0)},"Recommendations from Users"),r.a.createElement("a",{href:O.pageGenerator.generateRecommendationsPage(!1)},"Recommendations from You"))))),r.a.createElement(S,null))}),We=(a(130),function(){var e=Object(c.f)(),t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)([]),i=Object(b.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)([]),f=Object(b.a)(p,2),v=f[0],E=f[1],k=Object(n.useState)([]),w=Object(b.a)(k,2),y=w[0],N=w[1],x=Object(n.useState)([]),j=Object(b.a)(x,2),I=j[0],B=j[1],P=Object(n.useState)([]),C=Object(b.a)(P,2),U=C[0],M=C[1],D=Object(n.useState)([]),F=Object(b.a)(D,2),G=F[0],L=F[1],T=Object(n.useState)([]),W=Object(b.a)(T,2),_=W[0],q=W[1],z=Object(n.useState)([]),Y=Object(b.a)(z,2),Q=Y[0],V=Y[1],H=Object(n.useState)([]),J=Object(b.a)(H,2),K=J[0],Z=J[1],X=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getRecommendationsToFromUser(X.userUID,!1));case 2:t=e.sent,d(t),E(t.map((function(e){return e.book})).map((function(e){return!1}))),N(t.map((function(e){return e.book})).map((function(e){return!0}))),B(t.map((function(e){return e.book})).map((function(e){return""}))),M(t.map((function(e){return e.book})).map((function(e){return void 0!==e.userRating?e.userRating:0}))),L(t.map((function(e){return e.book})).map((function(e){return!0}))),q(t.map((function(e){return e.book})).map((function(e){return!0}))),V(t.map((function(e){return e.book})).map((function(e){return""}))),Z(t.map((function(e){return e.book})).map((function(e){return""}))),s(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[X.userUID]);var $=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this recommendation?")){e.next=4;break}return e.next=3,O.deleteRecommendation(t);case 3:d((function(e){return e.filter((function(e){return e.id!==t}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e,t){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(X.userUID,e.bookId),d((function(e){return e.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{userStatus:void 0,userProgress:void 0,userRating:void 0})}):e}))})))},te=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a.bookId){t.next=6;break}return E((function(e){return e.map((function(e,t){return t===n||e}))})),t.next=4,O.addBookToShelf(X.userUID,a.bookId,r,e);case 4:d((function(e){return e.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{userStatus:r})}):e}))})),E((function(e){return e.map((function(e,t){return t!==n&&e}))}));case 6:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ae=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a.bookId){t.next=4;break}return t.next=3,O.rateBook(X.userUID,a.bookId,r,e);case 3:d((function(e,t){return e.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{userStatus:void 0!==e.userStatus?e.userStatus:"read",userRating:r})}):e}))}));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ne=function(){var e=Object(h.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==X.userUID&&void 0!==X.userUID&&void 0!==t.bookId&&n.length>0)){e.next=4;break}return e.next=3,O.updateBookInShelf(X.userUID,t.bookId,parseInt(n));case 3:d((function(e){return e.map((function(e,t){return t===a?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{userProgress:n})}):e}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"recommendations-from-you-page recommendation-page"},r.a.createElement(A,null),r.a.createElement("div",{className:"recommendations-main-content"},r.a.createElement("span",{className:"recommendations-page-indicator"},"Recommendations ",">"," From You to Users"),u.length>0?r.a.createElement("span",{className:"recommendations-total-span"},"Showing 1-".concat(u.length," of ").concat(u.length)):null,r.a.createElement("div",{className:"main-content"},u.length>0?r.a.createElement("div",{className:"recommendation-list"},u.map((function(t,a){return r.a.createElement("div",{className:"recommendation-card",key:t.id},r.a.createElement("div",{className:"top-section"},r.a.createElement("span",null,r.a.createElement("a",{href:O.pageGenerator.generateUserPage(X.userUID,void 0!==X.userInfo&&null!==X.userInfo&&void 0!==X.userInfo.firstName&&null!==X.userInfo.firstName?X.userInfo.firstName:"Someone")},"you")," ","sent a recommendation to"," ",r.a.createElement("a",{className:"other-user-a",href:O.pageGenerator.generateUserPage(t.otherUser.userId,t.otherUser.firstName)},t.otherUser.firstName),":"),r.a.createElement("button",{className:"ignore-button",onClick:function(){return $(t.id)}},"delete")),r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"cover-wrapper-a",href:O.pageGenerator.generateBookPage(t.book.bookId,t.book.title)},r.a.createElement("img",{src:void 0!==t.book.cover&&null!==t.book.cover?t.book.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:t.book.title})),r.a.createElement("div",{className:"book-info"},r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(t.book.bookId,t.book.title)},t.book.title),r.a.createElement("span",{className:"authorship-span"},"by"," ",r.a.createElement("a",{className:"author-name-a",href:O.pageGenerator.generateAuthorPage(t.book.authorId,t.book.authorName)},t.book.authorName)),void 0!==t.message&&null!==t.message&&t.message.length>0?r.a.createElement("span",{className:"rec-message-span"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(X.userUID,void 0!==X.userInfo&&null!==X.userInfo&&void 0!==X.userInfo.firstName&&null!==X.userInfo.firstName?X.userInfo.firstName:"Someone")},"you")," ",'said: " ',t.message,' "'):null)),r.a.createElement("div",{className:"right-section"},r.a.createElement("div",{className:"want-to-read-button-and-options ".concat(void 0!==t.book.userStatus?t.book.userStatus:"")},function(e,t){return o&&"reading"===e.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("div",{className:G[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up reading"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,r.a.createElement("b",null,"Update your reading progress:")),r.a.createElement("span",null,"I'm on page"," ",r.a.createElement("input",{type:"text",value:Q[t],className:_[t]?"page-progress-input":"page-progress-input white-background",onClick:function(e){q((function(e){return e.map((function(e,a){return a!==t&&e}))})),L((function(e){return e.map((function(e,a){return a!==t&&e}))}))},onChange:function(e){var a=e.target.value;V((function(e){return e.map((function(e,n){return n===t?a:e}))}))}})," ","of ",e.pageCount,"."," ",r.a.createElement("a",{href:void 0!==X.userUID&&null!==X.userUID?O.pageGenerator.generateUserShelfPage(X.userUID,X.userInfo.firstName,["reading"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:_[t]?"shelf-pop-up-bottom hidden":"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){ne(e,t,Q[t]),q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Submit"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{className:"progress-finished-button",onClick:function(a){te(e,t,"read"),q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Finished book"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:function(a){return ee(e,t)}}),r.a.createElement("span",null,"Currently Reading")):o&&"read"===e.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("div",{className:"shelf-pop-up-wrapper"},r.a.createElement("div",{className:"shelf-pop-up read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("a",{href:O.pageGenerator.generateWriteReviewPageForBook(e.bookId)},"Write a review"),r.a.createElement("span",null,"\xb7"),r.a.createElement("a",{href:void 0!==X.userUID&&null!==X.userUID?O.pageGenerator.generateUserShelfPage(X.userUID,X.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:function(a){return ee(e,t)}}),r.a.createElement("span",null,"Read")):o&&"to-read"===e.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("div",{className:G[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up to-read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,"#",r.a.createElement("input",{type:"text",value:K[t],className:"shelf-pop-up-to-read-input",onChange:function(e){var a=e.target.value;Z((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onClick:function(e){q((function(e){return e.map((function(e,a){return a!==t&&e}))})),L((function(e){return e.map((function(e,a){return a!==t&&e}))}))}})," ","on your ",r.a.createElement("b",null,"To Read")," shelf.")),_[t]?r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("a",{href:void 0!==X.userUID&&null!==X.userUID?O.pageGenerator.generateUserShelfPage(X.userUID,X.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf")):r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){O.changeBookPosition(X.userUID,e.bookId,parseInt(K[t])),d((function(e){return e.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{toReadBookPosition:parseInt(K[t])})}):e}))})),q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Save"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){q((function(e){return e.map((function(e,a){return a===t||e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:function(a){return ee(e,t)}}),r.a.createElement("span",null,"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return te(e,t,"to-read")}},v[t]?"...saving":"Want to Read")}(t.book,a),function(t,a){return r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:"book-options-dropdown"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"dropdown-read-button",onClick:function(){return te(t,a,"read")}},"Read"),r.a.createElement("button",{className:"dropdown-currently-reading-button",onClick:function(){return te(t,a,"reading")}},"Currently Reading"),r.a.createElement("button",{className:"dropdown-want-to-read-button",onClick:function(){return te(t,a,"to-read")}},"Want to Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:"dropdown-add-shelf",onClick:function(e){return N((function(e){return e.map((function(e,t){return t!==a&&e}))}))}},"Add Shelf"),r.a.createElement("div",{className:y[a]?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",value:I[a],onChange:function(e){var t=e.target.value;B((function(e){return e.map((function(e,n){return n===a?t:e}))}))}}),r.a.createElement("button",{className:"dropdown-add-shelf-add-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(I[a].length>0)){n.next=4;break}return n.next=3,O.addBookToUserShelf(X.userUID,t.rootBook,I[a],null,e);case 3:N((function(e){return e.map((function(e,t){return t===a||e}))}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Add")))))}(t.book,a)),function(e,t){return r.a.createElement("div",{className:"book-page-rate-book"},void 0===e.userRating?null:r.a.createElement("button",{className:"clear-rating-button",onClick:function(){return ae(e,t,void 0)}},"Clear rating"),void 0===e.userRating?r.a.createElement("span",{className:"rate-this-book"},"Rate this book"):r.a.createElement("span",{className:"rate-this-book my-rating"},"My rating:"),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:U[t]>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?1:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,1)}}),r.a.createElement("div",{className:U[t]>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?2:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,2)}}),r.a.createElement("div",{className:U[t]>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?3:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,3)}}),r.a.createElement("div",{className:U[t]>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?4:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,4)}}),r.a.createElement("div",{className:U[t]>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return M((function(e){return e.map((function(e,a){return a===t?5:e}))}))},onMouseLeave:function(a){return M((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return ae(e,t,5)}})))}(t.book,a))))}))):r.a.createElement("span",{className:"no-pending-recommendations-span"},"You haven't made any recommendations yet."),r.a.createElement("div",{className:"more-actions-box"},r.a.createElement("span",{className:"more-actions-title"},"More Actions"),r.a.createElement("div",{className:"anchors-list"},r.a.createElement("a",{href:O.pageGenerator.generateRecommendationsPage(!0)},"Recommendations from Users"),r.a.createElement("a",{className:"selected",href:O.pageGenerator.generateRecommendationsPage(!1)},"Recommendations from You"))))),r.a.createElement(S,null))}),_e=(a(131),function(e){var t=e.match.params.pageId,a=t.split("-")[0],o=t.split("-")[1].charAt(0).toUpperCase()+t.split("-")[1].slice(1),s=Object(n.useState)(!1),c=Object(b.a)(s,2),l=c[0],i=c[1],u=Object(n.useState)([]),m=Object(b.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(1),v=Object(b.a)(f,2),E=v[0],k=v[1],w=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,Object(R.trackPromise)(O.getInfoForFollowPage(a,w.userUID,"followers"));case 3:e.t1=e.sent,(0,e.t0)(e.t1),i(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[w.userUID,a]);var y=l?r.a.createElement("div",{className:"follow-page-main-content"},r.a.createElement("span",{className:"follow-page-page-indicator"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(a,o)},o)," > Followers"),Math.ceil(d.length/30)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return k((function(e){return e-1}))},disabled:1===E},"\xab previous"),Array.from({length:Math.ceil(d.length/30)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return k(e)},disabled:E===e},E!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return k((function(e){return e+1}))},disabled:E===Math.ceil(d.length/30)},"next \xbb")):null,r.a.createElement("div",{className:"follow-list"},d.length>0?d.filter((function(e,t){return t>=30*(E-1)&&t<=30*E-1})).map((function(e){return r.a.createElement("div",{className:"follow-card",key:e.id},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"picture-a",href:O.pageGenerator.generateUserPage(e.id,e.name.split(" ").join("-"))},r.a.createElement("img",{src:void 0===e.profilePicture?"https://s.gr-assets.com/assets/nophoto/user/u_50x66-632230dc9882b4352d753eedf9396530.png":e.profilePicture,alt:e.name})),r.a.createElement("div",{className:"user-info"},r.a.createElement("a",{className:"name-a",href:O.pageGenerator.generateUserPage(e.id,e.name.split(" ").join("-"))},e.name),r.a.createElement("span",{className:"books-and-friends-span"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.id,e.name.split(" ")[0])},"".concat(e.numberOfBooks," books")),r.a.createElement("span",null," | "),r.a.createElement("a",{href:O.pageGenerator.generateUserFriendsPage(e.id,e.name.split(" ")[0])},"".concat(e.numberOfFriends," friends"))),r.a.createElement("span",{className:"location-span"},e.location))),void 0!==e.currentlyReadingBook?r.a.createElement("div",{className:"middle-section"},r.a.createElement("a",{className:"cover-a",href:O.pageGenerator.generateBookPage(e.currentlyReadingBook.id,e.currentlyReadingBook.title)},r.a.createElement("img",{src:void 0!==e.currentlyReadingBook.cover?e.currentlyReadingBook.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.currentlyReadingBook.title})),r.a.createElement("div",{className:"book-info"},r.a.createElement("span",{className:"currently-reading-span"},"Currently reading:"),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.currentlyReadingBook.id,e.currentlyReadingBook.title)},e.currentlyReadingBook.title))):null,r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:e.isFriend?"hidden add-friend-a":"add-friend-a",href:O.pageGenerator.generateAddAsFriendPage(a)},"Add as Friend"),r.a.createElement("a",{href:O.pageGenerator.generateUserCompareBooksPage(e.id)},"compare books")))})):r.a.createElement("span",{className:"no-follow-span"},"No followers."))):null;return r.a.createElement("div",{className:"followers-page follow-page"},r.a.createElement(A,null),y,r.a.createElement(S,null))}),qe=(a(132),function(e){var t=e.match.params.pageId,a=t.split("-")[0],o=t.split("-")[1].charAt(0).toUpperCase()+t.split("-")[1].slice(1),s=Object(n.useState)(!1),c=Object(b.a)(s,2),l=c[0],i=c[1],u=Object(n.useState)([]),m=Object(b.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(1),v=Object(b.a)(f,2),E=v[0],k=v[1],w=JSON.parse(localStorage.getItem("userState"));Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,Object(R.trackPromise)(O.getInfoForFollowPage(a,w.userUID,"following"));case 3:e.t1=e.sent,(0,e.t0)(e.t1),i(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[w.userUID,a]);var y=l?r.a.createElement("div",{className:"follow-page-main-content"},r.a.createElement("span",{className:"follow-page-page-indicator"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(a,o)},o),a===w.userUID?" > People You're Following":" > People ".concat(o," is Following")),Math.ceil(d.length/30)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return k((function(e){return e-1}))},disabled:1===E},"\xab previous"),Array.from({length:Math.ceil(d.length/30)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return k(e)},disabled:E===e},E!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return k((function(e){return e+1}))},disabled:E===Math.ceil(d.length/30)},"next \xbb")):null,r.a.createElement("div",{className:"follow-list-and-links"},r.a.createElement("div",{className:"follow-list"},d.length>0?d.filter((function(e,t){return t>=30*(E-1)&&t<=30*E-1})).map((function(e){return r.a.createElement("div",{className:"follow-card",key:e.id},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"picture-a",href:O.pageGenerator.generateUserPage(e.id,e.name.split(" ").join("-"))},r.a.createElement("img",{src:void 0===e.profilePicture?"https://s.gr-assets.com/assets/nophoto/user/u_50x66-632230dc9882b4352d753eedf9396530.png":e.profilePicture,alt:e.name})),r.a.createElement("div",{className:"user-info"},r.a.createElement("a",{className:"name-a",href:O.pageGenerator.generateUserPage(e.id,e.name.split(" ").join("-"))},e.name),r.a.createElement("span",{className:"books-and-friends-span"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.id,e.name.split(" ")[0])},"".concat(e.numberOfBooks," books")),r.a.createElement("span",null," | "),r.a.createElement("a",{href:O.pageGenerator.generateUserFriendsPage(e.id,e.name.split(" ")[0])},"".concat(e.numberOfFriends," friends"))),r.a.createElement("span",{className:"location-span"},e.location))),void 0!==e.currentlyReadingBook?r.a.createElement("div",{className:"middle-section"},r.a.createElement("a",{className:"cover-a",href:O.pageGenerator.generateBookPage(e.currentlyReadingBook.id,e.currentlyReadingBook.title)},r.a.createElement("img",{src:void 0!==e.currentlyReadingBook.cover?e.currentlyReadingBook.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.currentlyReadingBook.title})),r.a.createElement("div",{className:"book-info"},r.a.createElement("span",{className:"currently-reading-span"},"Currently reading:"),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.currentlyReadingBook.id,e.currentlyReadingBook.title)},e.currentlyReadingBook.title))):null,r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:e.isFriend?"hidden add-friend-a":"add-friend-a",href:O.pageGenerator.generateAddAsFriendPage(a)},"Add as Friend"),r.a.createElement("a",{href:O.pageGenerator.generateUserCompareBooksPage(e.id)},"compare books")))})):r.a.createElement("span",{className:"no-follow-span"},a!==w.userUID?"".concat(o," is not following anyone."):"You aren't following anyone.")),r.a.createElement("div",{className:"links"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(a,o)},"".concat(a===w.userUID?"My":"".concat(o,"'s")," profile \xbb"))))):null;return r.a.createElement("div",{className:"people-following-page follow-page"},r.a.createElement(A,null),y,r.a.createElement(S,null))}),ze=(a(133),function(e){var t=e.match.params.pageId,a=t.split("-")[0],o=t.split("-")[1].charAt(0).toUpperCase()+t.split("-")[1].slice(1),s=Object(n.useState)(!1),c=Object(b.a)(s,2),l=c[0],i=c[1],u=Object(n.useState)([]),m=Object(b.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(null),v=Object(b.a)(f,2),E=v[0],k=v[1],w=Object(n.useState)(1),y=Object(b.a)(w,2),N=y[0],x=y[1],j=JSON.parse(localStorage.getItem("userState")),I="https://s.gr-assets.com/assets/nophoto/user/u_50x66-632230dc9882b4352d753eedf9396530.png";Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k,e.next=3,Object(R.trackPromise)(O.getUserProfilePicture(a));case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=p,e.next=8,Object(R.trackPromise)(O.getInfoForFollowPage(a,j.userUID,"friends"));case 8:e.t3=e.sent,(0,e.t2)(e.t3),i(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[j.userUID,a]);var B=l?r.a.createElement("div",{className:"follow-page-main-content"},r.a.createElement("span",{className:"follow-page-page-indicator"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(a,o)},r.a.createElement("img",{src:void 0===E?I:E,alt:o})),a===j.userUID?"Your Friends":"".concat(o,"'s Friends"),r.a.createElement("span",{className:"showing-page-span"},"Showing ".concat(0===d.length?0:30*(N-1)+1,"-").concat(30*N-1<=d.length?30*N-1:d.length," of ").concat(d.length))),Math.ceil(d.length/30)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return x((function(e){return e-1}))},disabled:1===N},"\xab previous"),Array.from({length:Math.ceil(d.length/30)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return x(e)},disabled:N===e},N!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return x((function(e){return e+1}))},disabled:N===Math.ceil(d.length/30)},"next \xbb")):null,r.a.createElement("div",{className:"follow-list-and-links"},r.a.createElement("div",{className:"follow-list"},d.length>0?d.filter((function(e,t){return t>=30*(N-1)&&t<=30*N-1})).map((function(e){return r.a.createElement("div",{className:"follow-card",key:e.id},r.a.createElement("div",{className:"left-section"},r.a.createElement("a",{className:"picture-a",href:O.pageGenerator.generateUserPage(e.id,e.name.split(" ").join("-"))},r.a.createElement("img",{src:void 0===e.profilePicture?I:e.profilePicture,alt:e.name})),r.a.createElement("div",{className:"user-info"},r.a.createElement("a",{className:"name-a",href:O.pageGenerator.generateUserPage(e.id,e.name.split(" ").join("-"))},e.name),r.a.createElement("span",{className:"books-and-friends-span"},r.a.createElement("a",{href:O.pageGenerator.generateUserShelfPage(e.id,e.name.split(" ")[0])},"".concat(e.numberOfBooks," books")),r.a.createElement("span",null," | "),r.a.createElement("a",{href:O.pageGenerator.generateUserFriendsPage(e.id,e.name.split(" ")[0])},"".concat(e.numberOfFriends," friends"))),r.a.createElement("span",{className:"location-span"},e.location))),void 0!==e.currentlyReadingBook?r.a.createElement("div",{className:"middle-section"},r.a.createElement("a",{className:"cover-a",href:O.pageGenerator.generateBookPage(e.currentlyReadingBook.id,e.currentlyReadingBook.title)},r.a.createElement("img",{src:void 0!==e.currentlyReadingBook.cover?e.currentlyReadingBook.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:e.currentlyReadingBook.title})),r.a.createElement("div",{className:"book-info"},r.a.createElement("span",{className:"currently-reading-span"},"Currently reading:"),r.a.createElement("a",{href:O.pageGenerator.generateBookPage(e.currentlyReadingBook.id,e.currentlyReadingBook.title)},e.currentlyReadingBook.title))):null,r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:e.isFriend?"hidden add-friend-a":"add-friend-a",href:O.pageGenerator.generateAddAsFriendPage(a)},"Add as Friend"),r.a.createElement("a",{href:O.pageGenerator.generateUserCompareBooksPage(e.id)},"compare books")))})):r.a.createElement("span",{className:"no-follow-span"},a!==j.userUID?"".concat(o," doesn't have any friends."):"You don't have any friends.")),r.a.createElement("div",{className:"links"},r.a.createElement("a",{href:O.pageGenerator.generateUserPage(a,o)},"".concat(a===j.userUID?"My":"".concat(o,"'s")," profile \xbb"))))):null;return r.a.createElement("div",{className:"friends-page follow-page"},r.a.createElement(A,null),B,r.a.createElement(S,null))}),Ye=(a(134),function(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(!1),c=Object(b.a)(s,2),l=c[0],i=c[1],u=Object(n.useState)(1),m=Object(b.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(1),v=Object(b.a)(f,2),E=v[0],k=v[1],w=Object(n.useState)(1),y=Object(b.a)(w,2),N=y[0],x=y[1],j=Object(n.useState)(1),I=Object(b.a)(j,2),B=I[0],P=I[1],C=JSON.parse(localStorage.getItem("userState")),U="https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png";Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,Object(R.trackPromise)(O.getInfoForExplorePage(C.userUID));case 3:e.t1=e.sent,(0,e.t0)(e.t1),i(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[C.userUID]),Object(n.useEffect)((function(){console.log(a)}),[a]);var M=l&&a.articles.length>0?r.a.createElement("div",{className:"top-news-and-interviews-section"},r.a.createElement("a",{className:"featured-article-card",href:O.pageGenerator.generateArticlePage(a.articles[0].id,a.articles[0].title)},r.a.createElement("img",{src:a.articles[0].image,alt:a.articles[0].title}),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",{className:"article-title-span"},a.articles[0].title),r.a.createElement("span",{className:"comments-likes-span"},"".concat(a.articles[0].numberOfLikes," likes \xb7 ").concat(a.articles[0].numberOfComments," comments")))),r.a.createElement("a",{className:"see-all-a",href:O.pageGenerator.generateNewsPage()},r.a.createElement("span",null,"More news & interviews"),r.a.createElement("span",{className:"chevron-span"}))):null,D=l&&void 0!==a.enjoyedBook&&a.enjoyedBook.similarBooks.length>0?r.a.createElement("div",{className:"similar-books-section"},r.a.createElement("div",{className:"similar-books-section-header explore-page-section-header"},r.a.createElement("span",{className:"title-span"},"Because you enjoyed"," ",r.a.createElement("a",{href:O.pageGenerator.generateBookPage(a.enjoyedBook.id,a.enjoyedBook.title)},r.a.createElement("i",null,a.enjoyedBook.title))),r.a.createElement("div",{className:"back-forward-arrows"},r.a.createElement("button",{className:"arrow-back-button",disabled:1===d,onClick:function(){return p((function(e){return e-1}))}},r.a.createElement("span",{className:"chevron-span"})),r.a.createElement("button",{className:"arrow-forward-button",disabled:d===Math.ceil(a.enjoyedBook.similarBooks.length/4),onClick:function(){return p((function(e){return e+1}))}},r.a.createElement("span",{className:"chevron-span"})))),r.a.createElement("div",{className:"similar-books-list"},a.enjoyedBook.similarBooks.filter((function(e,t){return t>=4*(d-1)&&t<=4*d-1})).map((function(e,t){return r.a.createElement("a",{className:"book-card",key:t,href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0===e.cover?U:e.cover,alt:e.title}),r.a.createElement("span",{className:"title-span"},e.title),r.a.createElement("span",{className:"author-name-span"},e.authorName),r.a.createElement("div",{className:"rating-section"},r.a.createElement("div",{className:"star"},r.a.createElement("svg",{viewBox:"0 0 24 24",role:"presentation"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("path",{className:"RatingStar__fill",d:"M12.4770229,1.34326985 L15.0891563,9.1315756 L23.4968842,9.1315756 C23.7747474,9.1315756 24,9.35682823 24,9.63469143 C24,9.79809886 23.9206399,9.95132779 23.7871766,10.0456121 L16.9959586,14.8432273 L19.5982827,22.6117477 C19.6865419,22.8752212 19.5445026,23.1603569 19.2810291,23.2486161 C19.1293386,23.2994298 18.9625235,23.2750752 18.8316924,23.1830139 L12.0000207,18.3758025 L5.1685337,23.1876292 C4.94136559,23.3476374 4.62749722,23.2931935 4.46748907,23.0660254 C4.37533831,22.9351963 4.35092131,22.7683321 4.4017231,22.616585 L7.00408269,14.8432273 L0.212864685,10.0456121 C-0.0140805533,9.88528803 -0.0680876559,9.57134421 0.0922364448,9.34439897 C0.186520784,9.21093568 0.339749724,9.1315756 0.503157148,9.1315756 L8.910885,9.1315756 L11.5230185,1.34326985 C11.6113744,1.0798288 11.8965622,0.937894292 12.1600033,1.02625024 C12.3095218,1.07639751 12.4268756,1.19375135 12.4770229,1.34326985 Z"})))),r.a.createElement("span",{className:"rating-span"},e.rating.toFixed(2)),r.a.createElement("span",{className:"number-of-ratings-span"},"\xb7 ".concat(e.numberOfRatings))))}))),r.a.createElement("a",{className:"see-all-a",href:O.pageGenerator.generateSimilarBooksPage(a.enjoyedBook.id,a.enjoyedBook.title)},r.a.createElement("span",null,"See all"),r.a.createElement("span",{className:"chevron-span"}))):null,F=l&&void 0!==a.readingBook&&a.readingBook.similarBooks.length>0?r.a.createElement("div",{className:"similar-books-section"},r.a.createElement("div",{className:"similar-books-section-header explore-page-section-header"},r.a.createElement("span",{className:"title-span"},"Because you're reading"," ",r.a.createElement("a",{href:O.pageGenerator.generateBookPage(a.readingBook.id,a.readingBook.title)},r.a.createElement("i",null,a.readingBook.title))),r.a.createElement("div",{className:"back-forward-arrows"},r.a.createElement("button",{className:"arrow-back-button",disabled:1===E,onClick:function(){return k((function(e){return e-1}))}},r.a.createElement("span",{className:"chevron-span"})),r.a.createElement("button",{className:"arrow-forward-button",disabled:E===Math.ceil(a.readingBook.similarBooks.length/4),onClick:function(){return k((function(e){return e+1}))}},r.a.createElement("span",{className:"chevron-span"})))),r.a.createElement("div",{className:"similar-books-list"},a.readingBook.similarBooks.filter((function(e,t){return t>=4*(E-1)&&t<=4*E-1})).map((function(e,t){return r.a.createElement("a",{className:"book-card",key:t,href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0===e.cover?U:e.cover,alt:e.title}),r.a.createElement("span",{className:"title-span"},e.title),r.a.createElement("span",{className:"author-name-span"},e.authorName),r.a.createElement("div",{className:"rating-section"},r.a.createElement("div",{className:"star"},r.a.createElement("svg",{viewBox:"0 0 24 24",role:"presentation"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("path",{className:"RatingStar__fill",d:"M12.4770229,1.34326985 L15.0891563,9.1315756 L23.4968842,9.1315756 C23.7747474,9.1315756 24,9.35682823 24,9.63469143 C24,9.79809886 23.9206399,9.95132779 23.7871766,10.0456121 L16.9959586,14.8432273 L19.5982827,22.6117477 C19.6865419,22.8752212 19.5445026,23.1603569 19.2810291,23.2486161 C19.1293386,23.2994298 18.9625235,23.2750752 18.8316924,23.1830139 L12.0000207,18.3758025 L5.1685337,23.1876292 C4.94136559,23.3476374 4.62749722,23.2931935 4.46748907,23.0660254 C4.37533831,22.9351963 4.35092131,22.7683321 4.4017231,22.616585 L7.00408269,14.8432273 L0.212864685,10.0456121 C-0.0140805533,9.88528803 -0.0680876559,9.57134421 0.0922364448,9.34439897 C0.186520784,9.21093568 0.339749724,9.1315756 0.503157148,9.1315756 L8.910885,9.1315756 L11.5230185,1.34326985 C11.6113744,1.0798288 11.8965622,0.937894292 12.1600033,1.02625024 C12.3095218,1.07639751 12.4268756,1.19375135 12.4770229,1.34326985 Z"})))),r.a.createElement("span",{className:"rating-span"},e.rating.toFixed(2)),r.a.createElement("span",{className:"number-of-ratings-span"},"\xb7 ".concat(e.numberOfRatings))))}))),r.a.createElement("a",{className:"see-all-a",href:O.pageGenerator.generateSimilarBooksPage(a.readingBook.id,a.readingBook.title)},r.a.createElement("span",null,"See all"),r.a.createElement("span",{className:"chevron-span"}))):null,G=l&&void 0!==a.trendingBooks&&a.trendingBooks.length>0?r.a.createElement("div",{className:"similar-books-section"},r.a.createElement("div",{className:"similar-books-section-header explore-page-section-header"},r.a.createElement("span",{className:"title-span"},"Trending with Goodreads members"),r.a.createElement("div",{className:"back-forward-arrows"},r.a.createElement("button",{className:"arrow-back-button",disabled:1===N,onClick:function(){return x((function(e){return e-1}))}},r.a.createElement("span",{className:"chevron-span"})),r.a.createElement("button",{className:"arrow-forward-button",disabled:N===Math.ceil(a.trendingBooks.length/4),onClick:function(){return x((function(e){return e+1}))}},r.a.createElement("span",{className:"chevron-span"})))),r.a.createElement("div",{className:"similar-books-list"},a.trendingBooks.filter((function(e,t){return t>=4*(N-1)&&t<=4*N-1})).map((function(e,t){return r.a.createElement("a",{className:"book-card",key:t,href:O.pageGenerator.generateBookPage(e.id,e.title)},r.a.createElement("img",{src:void 0===e.cover?U:e.cover,alt:e.title}),r.a.createElement("span",{className:"title-span"},e.title),r.a.createElement("span",{className:"author-name-span"},e.authorName),r.a.createElement("div",{className:"rating-section"},r.a.createElement("div",{className:"star"},r.a.createElement("svg",{viewBox:"0 0 24 24",role:"presentation"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("path",{className:"RatingStar__fill",d:"M12.4770229,1.34326985 L15.0891563,9.1315756 L23.4968842,9.1315756 C23.7747474,9.1315756 24,9.35682823 24,9.63469143 C24,9.79809886 23.9206399,9.95132779 23.7871766,10.0456121 L16.9959586,14.8432273 L19.5982827,22.6117477 C19.6865419,22.8752212 19.5445026,23.1603569 19.2810291,23.2486161 C19.1293386,23.2994298 18.9625235,23.2750752 18.8316924,23.1830139 L12.0000207,18.3758025 L5.1685337,23.1876292 C4.94136559,23.3476374 4.62749722,23.2931935 4.46748907,23.0660254 C4.37533831,22.9351963 4.35092131,22.7683321 4.4017231,22.616585 L7.00408269,14.8432273 L0.212864685,10.0456121 C-0.0140805533,9.88528803 -0.0680876559,9.57134421 0.0922364448,9.34439897 C0.186520784,9.21093568 0.339749724,9.1315756 0.503157148,9.1315756 L8.910885,9.1315756 L11.5230185,1.34326985 C11.6113744,1.0798288 11.8965622,0.937894292 12.1600033,1.02625024 C12.3095218,1.07639751 12.4268756,1.19375135 12.4770229,1.34326985 Z"})))),r.a.createElement("span",{className:"rating-span"},e.rating.toFixed(2)),r.a.createElement("span",{className:"number-of-ratings-span"},"\xb7 ".concat(e.numberOfRatings))))})))):null,L=l&&a.articles.length>1?r.a.createElement("div",{className:"bottom-news-and-interviews-section"},r.a.createElement("div",{className:"bottom-news-and-interviews-section-header explore-page-section-header"},r.a.createElement("span",{className:"title-span"},"News and interviews"),r.a.createElement("div",{className:"back-forward-arrows"},r.a.createElement("button",{className:"arrow-back-button",disabled:1===B,onClick:function(){return P((function(e){return e-1}))}},r.a.createElement("span",{className:"chevron-span"})),r.a.createElement("button",{className:"arrow-forward-button",disabled:B===Math.ceil((a.articles.length-1)/2),onClick:function(){return P((function(e){return e+1}))}},r.a.createElement("span",{className:"chevron-span"})))),r.a.createElement("div",{className:"articles-list"},a.articles.slice(1).filter((function(e,t){return t>=2*(B-1)&&t<=2*B-1})).map((function(e,t){return r.a.createElement("a",{className:"bottom-article-card",href:O.pageGenerator.generateArticlePage(e.id,e.title),key:t},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{src:e.image,alt:e.title})),r.a.createElement("span",{className:"article-title-span"},e.title))}))),r.a.createElement("a",{className:"see-all-a",href:O.pageGenerator.generateNewsPage()},r.a.createElement("span",null,"More news & interviews"),r.a.createElement("span",{className:"chevron-span"}))):null,T=r.a.createElement("div",{className:"explore-page-main-content"},M,D,F,G,L);return r.a.createElement("div",{className:"explore-page"},r.a.createElement(A,null),T,r.a.createElement(S,null))}),Qe=(a(135),function(){var e=Object(c.f)(),t=new URLSearchParams(Object(c.g)().search),a=null!==t.get("q")&&void 0!==t.get("q")?t.get("q"):"",o=null!==t.get("search_type")&&void 0!==t.get("search_type")?t.get("search_type"):"books",s=null!==t.get("search_field")&&void 0!==t.get("search_field")?t.get("search_field"):"all",l=Object(n.useState)([]),i=Object(b.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)([]),f=Object(b.a)(p,2),v=f[0],E=f[1],k=Object(n.useState)([]),w=Object(b.a)(k,2),y=w[0],N=w[1],x=Object(n.useState)([]),j=Object(b.a)(x,2),I=j[0],B=j[1],P=Object(n.useState)([]),C=Object(b.a)(P,2),U=C[0],M=C[1],D=Object(n.useState)([]),F=Object(b.a)(D,2),G=F[0],L=F[1],T=Object(n.useState)([]),W=Object(b.a)(T,2),_=W[0],q=W[1],z=Object(n.useState)([]),Y=Object(b.a)(z,2),Q=Y[0],V=Y[1],H=Object(n.useState)(!1),J=Object(b.a)(H,2),K=J[0],Z=J[1],X=Object(n.useState)(a),$=Object(b.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)("people"===o?"author":s),ne=Object(b.a)(ae,2),re=ne[0],oe=ne[1],se=Object(n.useState)([]),ce=Object(b.a)(se,2),le=ce[0],ie=ce[1],ue=Object(n.useState)([]),me=Object(b.a)(ue,2),de=me[0],pe=me[1],fe=Object(n.useState)(null),ge=Object(b.a)(fe,2),he=ge[0],be=ge[1],ve=Object(n.useState)(1),Ee=Object(b.a)(ve,2),ke=Ee[0],we=Ee[1],ye=JSON.parse(localStorage.getItem("userState")),Ne=20;Object(n.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.trackPromise)(O.getInfoForSearchPage(ye.userUID,a,o,s));case 2:t=e.sent,0===a.length?(ie([]),pe([]),be(null)):"genre"===s?be(t):"books"===o?(d(t.map((function(e){return!1}))),E(t.map((function(e){return!0}))),N(t.map((function(e){return""}))),B(t.map((function(e){return void 0!==e.userRating?e.userRating:0}))),M(t.map((function(e){return!0}))),L(t.map((function(e){return!0}))),q(t.map((function(e){return""}))),V(t.map((function(e){return""}))),ie(t)):pe(t),Z(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,o,s,ye.userUID]);var Oe=function(e,t){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&(O.removeBookFromShelf(ye.userUID,e.bookId),ie((function(e){return e.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0,userProgress:void 0,userRating:void 0}):e}))})))},xe=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a.bookId){t.next=6;break}return d((function(e){return e.map((function(e,t){return t===n||e}))})),t.next=4,O.addBookToShelf(ye.userUID,a.bookId,r,e);case 4:ie((function(e){return e.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:r}):e}))})),d((function(e){return e.map((function(e,t){return t!==n&&e}))}));case 6:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),je=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a.bookId){t.next=4;break}return t.next=3,O.rateBook(ye.userUID,a.bookId,r,e);case 3:ie((function(e,t){return e.map((function(e,t){return t===n?Object(m.a)(Object(m.a)({},e),{},{userStatus:void 0!==e.userStatus?e.userStatus:"read",userRating:r}):e}))}));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Ie=function(){var e=Object(h.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==ye.userUID&&void 0!==ye.userUID&&void 0!==t.bookId&&n.length>0)){e.next=4;break}return e.next=3,O.updateBookInShelf(ye.userUID,t.bookId,parseInt(n));case 3:ie((function(e){return e.map((function(e,t){return t===a?Object(m.a)(Object(m.a)({},e),{},{userProgress:n}):e}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Se=K?r.a.createElement("div",{className:"search-area"},r.a.createElement("div",{className:"input-and-button"},r.a.createElement("input",{type:"text",value:ee,onChange:function(e){return te(e.target.value)}}),r.a.createElement("a",{href:O.pageGenerator.generateSearchPage(ee,o,re)},"Search")),r.a.createElement("div",{className:"radio-inputs"},["all","title","author","genre"].map((function(e,t){return r.a.createElement("div",{className:"input-wrapper",key:t},r.a.createElement("input",{type:"radio",id:e,key:t,checked:re===e,value:e,onChange:function(t){return oe(e)}}),r.a.createElement("label",{htmlFor:e},e))})))):null,Be=K?r.a.createElement("div",{className:"search-page-navigation-tabs-section"},r.a.createElement("a",{className:"books"===o?"disabled":"",href:O.pageGenerator.generateSearchPage(a,"books",s)},"Books"),r.a.createElement("a",{className:"people"===o?"disabled":"",href:O.pageGenerator.generateSearchPage(a,"people",s)},"People")):null,Pe=K&&"genre"!==s?r.a.createElement("div",{className:"book-results-section"},le.length>0?r.a.createElement("span",{className:"total-results-span"},"Page ".concat(ke," of about ").concat(le.length," results")):null,r.a.createElement("div",{className:"book-list"},le.filter((function(e,t){return t>=20*(ke-1)&&t<=20*ke-1})).map((function(t,a){return r.a.createElement("div",{className:"book-result-card",key:a},r.a.createElement("a",{className:"cover-a",href:O.pageGenerator.generateBookPage(t.id,t.title)},r.a.createElement("img",{src:void 0!==t.cover?t.cover:"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png",alt:t.title})),r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:"book-title-a",href:O.pageGenerator.generateBookPage(t.id,t.title)},t.title),r.a.createElement("span",{className:"authorship-span"},"by ",r.a.createElement("a",{href:O.pageGenerator.generateAuthorPage(t.authorId,t.authorName)},t.authorName),t.authorIsMember?r.a.createElement("span",{className:"goodreads-member-span"}," (Goodreads Author)"):null),r.a.createElement("div",{className:"other-info-section"},r.a.createElement("div",{className:"search-page-general-rating-stars"},r.a.createElement("div",{className:t.averageRating>=1?"static-star small full":t.averageRating>=.5?"static-star small almost-full":t.averageRating>0?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:t.averageRating>=2?"static-star small full":t.averageRating>=1.5?"static-star small almost-full":t.averageRating>1?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:t.averageRating>=3?"static-star small full":t.averageRating>=2.5?"static-star small almost-full":t.averageRating>2?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:t.averageRating>=4?"static-star small full":t.averageRating>=3.5?"static-star small almost-full":t.averageRating>3?"static-star small almost-empty":"static-star small empty"}),r.a.createElement("div",{className:t.averageRating>=5?"static-star small full":t.averageRating>=4.5?"static-star small almost-full":t.averageRating>4?"static-star small almost-empty":"static-star small empty"})),r.a.createElement("span",null,r.a.createElement("span",null,"".concat(t.averageRating.toFixed(2)," avg rating \u2014 ").concat(t.numberOfRatings," ratings ").concat(void 0!==t.publishedYear?"\u2014 published ".concat(t.publishedYear):""," \u2014")),r.a.createElement("a",{href:O.pageGenerator.generateBookEditionsPage(t.id,t.title)}," ".concat(t.numberOfEditions," editions")))),r.a.createElement("div",{className:"read-buy-section"},r.a.createElement("div",{className:"shelves-rating"},r.a.createElement("div",{className:"want-to-read-button-and-options ".concat(void 0!==t.userStatus?t.userStatus:"")},function(e,t){return K&&"reading"===e.userStatus?r.a.createElement("div",{className:"book-on-reading-shelf"},r.a.createElement("div",{className:U[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up reading"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,r.a.createElement("b",null,"Update your reading progress:")),r.a.createElement("span",null,"I'm on page"," ",r.a.createElement("input",{type:"text",value:_[t],className:G[t]?"page-progress-input":"page-progress-input white-background",onClick:function(e){L((function(e){return e.map((function(e,a){return a!==t&&e}))})),M((function(e){return e.map((function(e,a){return a!==t&&e}))}))},onChange:function(e){var a=e.target.value;q((function(e){return e.map((function(e,n){return n===t?a:e}))}))}})," ","of ",e.pageCount,"."," ",r.a.createElement("a",{href:void 0!==ye.userUID&&null!==ye.userUID?O.pageGenerator.generateUserShelfPage(ye.userUID,ye.userInfo.firstName,["reading"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:G[t]?"shelf-pop-up-bottom hidden":"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){Ie(e,t,_[t]),L((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Submit"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){L((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"),r.a.createElement("span",null,"\xb7"),r.a.createElement("button",{className:"progress-finished-button",onClick:function(a){xe(e,t,"read"),L((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Finished book"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf reading",onClick:function(a){return Oe(e,t)}}),r.a.createElement("span",null,"Currently Reading")):K&&"read"===e.userStatus?r.a.createElement("div",{className:"book-on-read-shelf"},r.a.createElement("div",{className:"shelf-pop-up-wrapper"},r.a.createElement("div",{className:"shelf-pop-up read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("a",{href:O.pageGenerator.generateWriteReviewPageForBook(e.bookId)},"Write a review"),r.a.createElement("span",null,"\xb7"),r.a.createElement("a",{href:void 0!==ye.userUID&&null!==ye.userUID?O.pageGenerator.generateUserShelfPage(ye.userUID,ye.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf read",onClick:function(a){return Oe(e,t)}}),r.a.createElement("span",null,"Read")):K&&"to-read"===e.userStatus?r.a.createElement("div",{className:"book-on-to-read-shelf"},r.a.createElement("div",{className:U[t]?"shelf-pop-up-wrapper":"shelf-pop-up-wrapper always-visible"},r.a.createElement("div",{className:"shelf-pop-up to-read"},r.a.createElement("div",{className:"shelf-pop-up-top"},r.a.createElement("span",null,"#",r.a.createElement("input",{type:"text",value:Q[t],className:"shelf-pop-up-to-read-input",onChange:function(e){var a=e.target.value;V((function(e){return e.map((function(e,n){return n===t?a:e}))}))},onClick:function(e){L((function(e){return e.map((function(e,a){return a!==t&&e}))})),M((function(e){return e.map((function(e,a){return a!==t&&e}))}))}})," ","on your ",r.a.createElement("b",null,"To Read")," shelf.")),G[t]?r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("a",{href:void 0!==ye.userUID&&null!==ye.userUID?O.pageGenerator.generateUserShelfPage(ye.userUID,ye.userInfo.firstName,["to-read"]):"/user/sign_in"},"View shelf")):r.a.createElement("div",{className:"shelf-pop-up-bottom"},r.a.createElement("button",{className:"progress-submit-button",onClick:function(a){O.changeBookPosition(ye.userUID,e.bookId,parseInt(Q[t])),ie((function(e){return e.map((function(e,a){return a===t?Object(m.a)(Object(m.a)({},e),{},{book:Object(m.a)(Object(m.a)({},e.book),{},{toReadBookPosition:parseInt(Q[t])})}):e}))})),L((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Save"),r.a.createElement("button",{className:"progress-cancel-button",onClick:function(e){L((function(e){return e.map((function(e,a){return a===t||e}))})),M((function(e){return e.map((function(e,a){return a===t||e}))}))}},"Cancel"))),r.a.createElement("div",{className:"shelf-pop-up-arrow-grey"},r.a.createElement("div",{className:"shelf-pop-up-arrow"}))),r.a.createElement("button",{className:"remove-book-from-shelf to-read",onClick:function(a){return Oe(e,t)}}),r.a.createElement("span",null,"Want to Read")):r.a.createElement("button",{className:"book-page-want-to-read-button",onClick:function(){return xe(e,t,"to-read")}},u[t]?"...saving":"Want to Read")}(t,a),function(t,a){return r.a.createElement("div",{className:"book-page-book-option-dropdown-trigger"},r.a.createElement("div",{className:"book-options-dropdown"},r.a.createElement("div",{className:"book-options-dropdown-top"},r.a.createElement("button",{className:"dropdown-read-button",onClick:function(){return xe(t,a,"read")}},"Read"),r.a.createElement("button",{className:"dropdown-currently-reading-button",onClick:function(){return xe(t,a,"reading")}},"Currently Reading"),r.a.createElement("button",{className:"dropdown-want-to-read-button",onClick:function(){return xe(t,a,"to-read")}},"Want to Read")),r.a.createElement("div",{className:"book-options-dropdown-bottom"},r.a.createElement("button",{className:"dropdown-add-shelf",onClick:function(e){return E((function(e){return e.map((function(e,t){return t!==a&&e}))}))}},"Add Shelf"),r.a.createElement("div",{className:v[a]?"dropdown-add-shelf-input-section hidden":"dropdown-add-shelf-input-section"},r.a.createElement("input",{className:"dropdown-add-shelf-input",type:"text",value:y[a],onChange:function(e){var t=e.target.value;N((function(e){return e.map((function(e,n){return n===a?t:e}))}))}}),r.a.createElement("button",{className:"dropdown-add-shelf-add-button",onClick:function(){var n=Object(h.a)(g.a.mark((function n(r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(y[a].length>0)){n.next=4;break}return n.next=3,O.addBookToUserShelf(ye.userUID,t.rootBook,y[a],null,e);case 3:E((function(e){return e.map((function(e,t){return t===a||e}))}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},"Add")))))}(t,a)),function(e,t){return r.a.createElement("div",{className:"book-page-rate-book"},void 0===e.userRating?null:r.a.createElement("button",{className:"clear-rating-button",onClick:function(){return je(e,t,void 0)}},"Clear rating"),void 0===e.userRating?r.a.createElement("span",{className:"rate-this-book"},"Rate this book"):r.a.createElement("span",{className:"rate-this-book my-rating"},"My rating:"),r.a.createElement("div",{className:"book-page-rate-book-star-rating"},r.a.createElement("div",{className:I[t]>0?"interactive-star small on":"interactive-star small",title:"did not like it",onMouseOver:function(e){return B((function(e){return e.map((function(e,a){return a===t?1:e}))}))},onMouseLeave:function(a){return B((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return je(e,t,1)}}),r.a.createElement("div",{className:I[t]>1?"interactive-star small on":"interactive-star small",title:"it was ok",onMouseOver:function(e){return B((function(e){return e.map((function(e,a){return a===t?2:e}))}))},onMouseLeave:function(a){return B((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return je(e,t,2)}}),r.a.createElement("div",{className:I[t]>2?"interactive-star small on":"interactive-star small",title:"liked it",onMouseOver:function(e){return B((function(e){return e.map((function(e,a){return a===t?3:e}))}))},onMouseLeave:function(a){return B((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return je(e,t,3)}}),r.a.createElement("div",{className:I[t]>3?"interactive-star small on":"interactive-star small",title:"really liked it",onMouseOver:function(e){return B((function(e){return e.map((function(e,a){return a===t?4:e}))}))},onMouseLeave:function(a){return B((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return je(e,t,4)}}),r.a.createElement("div",{className:I[t]>4?"interactive-star small on":"interactive-star small",title:"it was amazing",onMouseOver:function(e){return B((function(e){return e.map((function(e,a){return a===t?5:e}))}))},onMouseLeave:function(a){return B((function(a){return a.map((function(a,n){return n===t&&void 0!==e.userRating?e.userRating:n===t?0:a}))}))},onClick:function(){return je(e,t,5)}})))}(t,a)),void 0!==t.amazonLink?r.a.createElement("a",{className:"get-a-copy-a",href:t.amazonLink},"Get a copy"):null)))}))),Math.ceil(le.length/Ne)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return we((function(e){return e-1}))},disabled:1===ke},"\xab previous"),Array.from({length:Math.ceil(le.length/Ne)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return we(e)},disabled:ke===e},ke!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return we((function(e){return e+1}))},disabled:ke===Math.ceil(le.length/Ne)},"next \xbb")):null):K&&"genre"===s?r.a.createElement("div",{className:"book-results-section"},null!==he?r.a.createElement("div",{className:"genre-result"},r.a.createElement("span",null,"Genre:"," ",void 0!==he.parentGenre?r.a.createElement("span",null,r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(he.parentGenre)},he.parentGenre)," > "):null,r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(he.name)},he.name))):null,r.a.createElement("div",{className:"search-unavailable-section"},r.a.createElement("span",null,"Search is temporarily unavailable."),r.a.createElement("span",null,"Use this time to read a book!"))):null,Ce=K?r.a.createElement("div",{className:"people-results-section"},de.length>0?r.a.createElement("span",{className:"total-results-span"},"Page ".concat(ke," of about ").concat(de.length," results")):null,r.a.createElement("div",{className:"people-list"},de.filter((function(e,t){return t>=20*(ke-1)&&t<=20*ke-1})).map((function(e,t){return r.a.createElement("div",{className:"person-result-card",key:t},r.a.createElement("a",{className:"person-image-a",href:O.pageGenerator.generateUserPage(e.id,e.name.split(" ")[0])},r.a.createElement("img",{src:void 0===e.profilePicture?"https://s.gr-assets.com/assets/nophoto/user/u_50x66-632230dc9882b4352d753eedf9396530.png":e.profilePicture,alt:e.name})),r.a.createElement("div",{className:"right-section"},r.a.createElement("a",{className:"person-name-a",href:O.pageGenerator.generateUserPage(e.id,e.name.split(" ")[0])},e.name),void 0!==e.location?r.a.createElement("span",{className:"location-span"},e.location):null,r.a.createElement("a",{className:"person-friends-a",href:O.pageGenerator.generateUserFriendsPage(e.id,e.name)},1===e.numberOfFriends?"1 friend":"".concat(e.numberOfFriends," friends")),r.a.createElement("a",{className:"person-shelves-a",href:O.pageGenerator.generateUserShelfPage(e.id,e.name.split(" ")[0])},1===e.numberOfBooks?"1 book":"".concat(e.numberOfBooks," books"))))}))),Math.ceil(de.length/Ne)>1?r.a.createElement("div",{className:"page-navigation-section"},r.a.createElement("button",{onClick:function(e){return we((function(e){return e-1}))},disabled:1===ke},"\xab previous"),Array.from({length:Math.ceil(de.length/Ne)},(function(e,t){return t+1})).map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){return we(e)},disabled:ke===e},ke!==e?e:r.a.createElement("i",null,e))})),r.a.createElement("button",{onClick:function(e){return we((function(e){return e+1}))},disabled:ke===Math.ceil(de.length/Ne)},"next \xbb")):null):null,Ae=K?r.a.createElement("div",{className:"search-page-main-content-left-section"},r.a.createElement("span",{className:"page-title-span"},"Search"),Se,Be,"books"===o?Pe:Ce):null,Ue=K?r.a.createElement("div",{className:"search-page-main-content-right-section"},r.a.createElement("div",{className:"top-anchors"},r.a.createElement("a",{href:O.pageGenerator.generateAddBookPage()},"Manually add a book")),"books"===o&&"genre"!==s?r.a.createElement("div",{className:"top-shelves-area"},r.a.createElement("span",{className:"top-shelves-area-title"},"Related Shelves"),le.map((function(e){return e.genreShelves})).reduce((function(e,t){return e.concat(t.filter((function(t){return!e.map((function(e){return e.name})).includes(t.name)})))}),[]).map((function(e,t){return r.a.createElement("span",{className:"genre-shelf-span",key:t},r.a.createElement("a",{href:O.pageGenerator.generateGenrePage(e.name)},e.name)," ",r.a.createElement("span",{className:"number-of-books-span"},"(",e.numberOfBooks,")"))}))):null):null,Re=K?r.a.createElement("div",{className:"search-page-main-content"},Ae,Ue):null;return r.a.createElement("div",{className:"search-page"},r.a.createElement(A,null),Re,r.a.createElement(S,null))}),Ve=(a(136),function(){var e=[{message:"We\u2019re sorry, you seem to have stumbled on a bad link.",quote:"Two links diverged from a yellow page,\nAnd sorry I could not travel both\nAnd be one traveler, long I stood\nAnd looked down one as far as I could\nTo where it broke in the understroke;\n\nThen took the other, as just as fair\nAnd having perhaps the better claim,\nBecause it was grassy and wanted wear;\nThough as for that the passing there\nMay wear them really about the same,\n\nAnd both that page-load equally lay\nIn bits no click had colored black.",book:{cover:"https://s.gr-assets.com/assets/error_pages/not_found/frost_book-63a7b8d45d1a90d855083d4dea811026.png",title:"The Road Not Taken"},author:{photo:"https://s.gr-assets.com/assets/error_pages/not_found/frost_author-5ca4ea23d1c35dd6db39c432abcff0cf.png",name:"Robert Frost"}},{message:"Yarr, the page you requested can\u2019t be charted on any known map.",quote:"\u201cIt would be a lot quicker than that if we could just sail straight there, but I was looking at the nautical charts, and there\u2019s a dirty great sea serpent right in the middle of the ocean!\n\nFitzRoy frowned. \u201cI think they just draw those on maps to add a bit of decoration. It doesn\u2019t actually mean there\u2019s a sea serpent there.\u201d\n\nThe galley went rather quiet. A few of the pirate crew stared intently out of the portholes, embarrassed at their Captain\u2019s mistake. But to everyone\u2019s relief, instead of running somebody through, the Pirate Captain just narrowed his eyes thoughtfully.\n\n\u201cThat explains a lot,\u201d he said. \u201cI suppose it\u2019s also why we\u2019ve never glimpsed that giant compass in the corner of the Atlantic. I have to say, I\u2019m a little disappointed.\u201d",book:{cover:"https://s.gr-assets.com/assets/error_pages/not_found/pirates_book-ca3112b76cf166f6cf97f2ce19429386.png",title:"The Pirates! In an Adventure with Scientists"},author:{photo:"https://s.gr-assets.com/assets/error_pages/not_found/pirates_author-9027bd4f549b8d0b01e23c2368fa42b3.png",name:"Gideon Defoe"}},{message:"You've hit a bad link, but don't panic!",quote:'"I don\u2019t know what I\u2019m looking for.\u201d\n"Why not?"\n"Because...because...I think it might be because if I knew\nI wouldn\u2019t be able to look for them.\u201d',book:{cover:"https://s.gr-assets.com/assets/error_pages/not_found/hitchhikers_book-0909ea93cabdeba89c38901ab3eadbf5.png",title:"The Hitchhiker's Guide to the Galaxy"},author:{photo:"https://s.gr-assets.com/assets/error_pages/not_found/hitchhikers_author-0cc7d6798db276033042fd2a1dd1b4ef.png",name:"Douglas Adams"}}][Math.floor(2*Math.random())];return r.a.createElement("div",{className:"error-page"},r.a.createElement(A,null),r.a.createElement("span",{className:"error-page-message"},e.message),r.a.createElement("div",{className:"middle-section"},r.a.createElement("div",{className:"quote-section"},r.a.createElement("span",{className:"quote-span"},e.quote),r.a.createElement("span",{className:"quote-authorship-span"},"\u2014 ".concat(e.author.name,", "),r.a.createElement("i",null,e.book.title))),r.a.createElement("div",{className:"book-and-author-section"},r.a.createElement("img",{src:e.book.cover,alt:"Book"}),r.a.createElement("img",{className:"author-picture",src:e.author.photo,alt:e.author.name}))),r.a.createElement("a",{className:"back-to-homepage-a goodreads-button",href:O.pageGenerator.generateHomePage()},"Back to the Goodreads homepage"),r.a.createElement(S,null))}),He=a(48),Je=a(49),Ke=a(53),Ze=a(51),Xe=function(e){Object(Ke.a)(a,e);var t=Object(Ze.a)(a);function a(e){var n;return Object(He.a)(this,a),(n=t.call(this,e)).state={hasError:!1,error:"",info:"",stack:""},n}return Object(Je.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t,stack:e.stack})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(Ve,null):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(r.a.Component),$e=a(50),et=(a(154),Object(i.b)(p.userReducer)),tt=function(){var e=new URLSearchParams(Object(c.g)().search);return"yep"===e.get("just_this_edition")?r.a.createElement(K,{bookId:e.get("id")}):r.a.createElement(Z,{bookId:e.get("id")})},at=function(e){return Object(R.usePromiseTracker)().promiseInProgress&&r.a.createElement("div",{className:"tailspin-loader-container"},r.a.createElement($e.TailSpin,{color:"#382110",height:100,width:100}))};s.a.render(r.a.createElement(u.a,{store:et},r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/"),exact:!0,render:function(e){return r.a.createElement(Xe,null,r.a.createElement(M,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/forgot_password"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(W,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/sign_out"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(G,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/sign_up"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(F,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/sign_in"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(D,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/book/show/:bookPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(T,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/book/stats"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(tt,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/book/new"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ne,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/work/shelves/:bookId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(re,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/book/similar/:similarBooksPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(X,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/work/editions/:bookEditionsPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement($,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/book/photo/:bookCoverPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ee,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/photo/work/:bookPhotoPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(te,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/shelf/users/:bookGenreShelfPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(oe,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/trivia/work/:bookTriviaPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(se,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/work/quotes/:bookQuotesPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ce,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/list/book/:bookId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(le,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/author/show/:authorPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ie,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/favorite_authors"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ue,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/:userId/favorite_authors"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(me,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/notifications"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(de,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/edit"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(he,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/change_password"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(be,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/destroy"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ve,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/photo/user/:userPhotoPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Ge,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/edit_fav_genres"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Ee,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/genres/:genre"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ke,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/news"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(we,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/blog/show/:articlePageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ye,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/rating/voters/:articleId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Ne,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/show/:userPageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(je,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/year_in_books/:year/:pageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Le,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/compare/:userId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Ie,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/book/compatibility_results"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Se,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/book/compatibility_test"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Ce,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/friend/add_as_friend/:newFriendId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Ae,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/review/list/:pageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Fe,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/recommendations/to_me"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Te,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/recommendations/from_me"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(We,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/:pageId/followers"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(_e,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/user/:pageId/following"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(qe,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/friend/user/:pageId"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(ze,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/search"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Qe,e))}}),r.a.createElement(c.a,{path:"/".concat("goodreads-copy","/explore"),render:function(e){return r.a.createElement(Xe,null,r.a.createElement(Ye,e))}}),r.a.createElement(c.a,{component:Ve})),r.a.createElement(at,null)))),document.getElementById("root"))}]),[[155,1,2]]]);
//# sourceMappingURL=main.1fa95be8.chunk.js.map